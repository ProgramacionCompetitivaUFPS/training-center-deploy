(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~ede6d506"],{

/***/ "6Y8/":
/*!****************************************************!*\
  !*** ./node_modules/blockly/blockly_compressed.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;(function(root, factory) {\n  if (true) { // AMD\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(this, function() {\n  'use strict';var Blockly={constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};Blockly.CONNECTING_SNAP_RADIUS=Blockly.SNAP_RADIUS;Blockly.CURRENT_CONNECTION_PREFERENCE=8;Blockly.BUMP_DELAY=250;Blockly.BUMP_RANDOMNESS=10;Blockly.COLLAPSE_CHARS=30;Blockly.LONGPRESS=750;Blockly.SOUND_LIMIT=100;Blockly.DRAG_STACK=!0;Blockly.HSV_SATURATION=.45;Blockly.HSV_VALUE=.65;Blockly.SPRITE={width:96,height:124,url:\"sprites.png\"};Blockly.INPUT_VALUE=1;\nBlockly.OUTPUT_VALUE=2;Blockly.NEXT_STATEMENT=3;Blockly.PREVIOUS_STATEMENT=4;Blockly.DUMMY_INPUT=5;Blockly.ALIGN_LEFT=-1;Blockly.ALIGN_CENTRE=0;Blockly.ALIGN_RIGHT=1;Blockly.DRAG_NONE=0;Blockly.DRAG_STICKY=1;Blockly.DRAG_BEGIN=1;Blockly.DRAG_FREE=2;Blockly.OPPOSITE_TYPE=[];Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT;\nBlockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT;Blockly.TOOLBOX_AT_TOP=0;Blockly.TOOLBOX_AT_BOTTOM=1;Blockly.TOOLBOX_AT_LEFT=2;Blockly.TOOLBOX_AT_RIGHT=3;Blockly.DELETE_AREA_NONE=null;Blockly.DELETE_AREA_TRASH=1;Blockly.DELETE_AREA_TOOLBOX=2;Blockly.VARIABLE_CATEGORY_NAME=\"VARIABLE\";Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME=\"VARIABLE_DYNAMIC\";Blockly.PROCEDURE_CATEGORY_NAME=\"PROCEDURE\";Blockly.RENAME_VARIABLE_ID=\"RENAME_VARIABLE_ID\";Blockly.DELETE_VARIABLE_ID=\"DELETE_VARIABLE_ID\";Blockly.registry={};Blockly.registry.typeMap_={};Blockly.registry.DEFAULT=\"default\";Blockly.registry.Type=function(a){this.name_=a};Blockly.registry.Type.prototype.toString=function(){return this.name_};Blockly.registry.Type.CONNECTION_CHECKER=new Blockly.registry.Type(\"connectionChecker\");Blockly.registry.Type.EVENT=new Blockly.registry.Type(\"event\");Blockly.registry.Type.FIELD=new Blockly.registry.Type(\"field\");Blockly.registry.Type.RENDERER=new Blockly.registry.Type(\"renderer\");\nBlockly.registry.Type.TOOLBOX=new Blockly.registry.Type(\"toolbox\");Blockly.registry.Type.THEME=new Blockly.registry.Type(\"theme\");Blockly.registry.Type.TOOLBOX_ITEM=new Blockly.registry.Type(\"toolboxItem\");Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new Blockly.registry.Type(\"flyoutsVerticalToolbox\");Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new Blockly.registry.Type(\"flyoutsHorizontalToolbox\");\nBlockly.registry.register=function(a,b,c,d){if(!(a instanceof Blockly.registry.Type)&&\"string\"!=typeof a||\"\"==String(a).trim())throw Error('Invalid type \"'+a+'\". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if(\"string\"!=typeof b||\"\"==b.trim())throw Error('Invalid name \"'+b+'\". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error(\"Can not register a null value\");var e=Blockly.registry.typeMap_[a];e||(e=Blockly.registry.typeMap_[a]=\n{});Blockly.registry.validate_(a,c);if(!d&&e[b])throw Error('Name \"'+b+'\" with type \"'+a+'\" already registered.');e[b]=c};Blockly.registry.validate_=function(a,b){switch(a){case String(Blockly.registry.Type.FIELD):if(\"function\"!=typeof b.fromJson)throw Error('Type \"'+a+'\" must have a fromJson function');}};\nBlockly.registry.unregister=function(a,b){a=String(a).toLowerCase();b=b.toLowerCase();var c=Blockly.registry.typeMap_[a];c?c[b]?delete Blockly.registry.typeMap_[a][b]:console.warn('No name \"'+b+'\" with type \"'+a+'\" found'):console.warn('No type \"'+a+'\" found')};\nBlockly.registry.getItem_=function(a,b){a=String(a).toLowerCase();b=b.toLowerCase();var c=Blockly.registry.typeMap_[a];return c?c[b]?c[b]:(console.warn('No name \"'+b+'\" with type \"'+a+'\" found'),null):(console.warn('No type \"'+a+'\" found'),null)};Blockly.registry.hasItem=function(a,b){a=String(a).toLowerCase();b=b.toLowerCase();return(a=Blockly.registry.typeMap_[a])?!!a[b]:!1};Blockly.registry.getClass=function(a,b){return Blockly.registry.getItem_(a,b)};\nBlockly.registry.getObject=function(a,b){return Blockly.registry.getItem_(a,b)};Blockly.registry.getClassFromOptions=function(a,b){b=b.plugins[a.toString()]||Blockly.registry.DEFAULT;return\"function\"==typeof b?b:Blockly.registry.getClass(a,b)};Blockly.utils={};Blockly.utils.global=function(){return\"object\"===typeof self?self:\"object\"===typeof window?window:\"object\"===typeof global?global:this}();Blockly.Msg={};Blockly.utils.global.Blockly||(Blockly.utils.global.Blockly={});Blockly.utils.global.Blockly.Msg||(Blockly.utils.global.Blockly.Msg=Blockly.Msg);Blockly.utils.colour={};\nBlockly.utils.colour.parse=function(a){a=String(a).toLowerCase().trim();var b=Blockly.utils.colour.names[a];if(b)return b;b=\"0x\"==a.substring(0,2)?\"#\"+a.substring(2):a;b=\"#\"==b[0]?b:\"#\"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return[\"#\",b[1],b[1],b[2],b[2],b[3],b[3]].join(\"\");var c=a.match(/^(?:rgb)?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),0<=a&&256>a&&0<=b&&256>b&&0<=c&&256>c)?Blockly.utils.colour.rgbToHex(a,b,\nc):null};Blockly.utils.colour.rgbToHex=function(a,b,c){b=a<<16|b<<8|c;return 16>a?\"#\"+(16777216|b).toString(16).substr(1):\"#\"+b.toString(16)};Blockly.utils.colour.hexToRgb=function(a){a=Blockly.utils.colour.parse(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]};\nBlockly.utils.colour.hsvToHex=function(a,b,c){var d=0,e=0,f=0;if(0==b)f=e=d=c;else{var g=Math.floor(a/60),h=a/60-g;a=c*(1-b);var k=c*(1-b*h);b=c*(1-b*(1-h));switch(g){case 1:d=k;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=a;e=k;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c;e=a;f=k;break;case 6:case 0:d=c,e=b,f=a}}return Blockly.utils.colour.rgbToHex(Math.floor(d),Math.floor(e),Math.floor(f))};\nBlockly.utils.colour.blend=function(a,b,c){a=Blockly.utils.colour.parse(a);if(!a)return null;b=Blockly.utils.colour.parse(b);if(!b)return null;a=Blockly.utils.colour.hexToRgb(a);b=Blockly.utils.colour.hexToRgb(b);return Blockly.utils.colour.rgbToHex(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))};\nBlockly.utils.colour.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\"};Blockly.utils.Coordinate=function(a,b){this.x=a;this.y=b};Blockly.utils.Coordinate.equals=function(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1};Blockly.utils.Coordinate.distance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)};Blockly.utils.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};Blockly.utils.Coordinate.difference=function(a,b){return new Blockly.utils.Coordinate(a.x-b.x,a.y-b.y)};\nBlockly.utils.Coordinate.sum=function(a,b){return new Blockly.utils.Coordinate(a.x+b.x,a.y+b.y)};Blockly.utils.Coordinate.prototype.scale=function(a){this.x*=a;this.y*=a;return this};Blockly.utils.Coordinate.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};Blockly.utils.Rect=function(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d};Blockly.utils.Rect.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};Blockly.utils.string={};Blockly.utils.string.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)};Blockly.utils.string.shortestStringLength=function(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0};\nBlockly.utils.string.commonWordPrefix=function(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||Blockly.utils.string.shortestStringLength(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;\" \"==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&\" \"!=e)return c;return b};\nBlockly.utils.string.commonWordSuffix=function(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||Blockly.utils.string.shortestStringLength(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;\" \"==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&\" \"!=e)return c;return b};Blockly.utils.string.wrap=function(a,b){a=a.split(\"\\n\");for(var c=0;c<a.length;c++)a[c]=Blockly.utils.string.wrapLine_(a[c],b);return a.join(\"\\n\")};\nBlockly.utils.string.wrapLine_=function(a,b){if(a.length<=b)return a;for(var c=a.trim().split(/\\s+/),d=0;d<c.length;d++)c[d].length>b&&(b=c[d].length);d=-Infinity;var e=1;do{var f=d;var g=a;a=[];var h=c.length/e,k=1;for(d=0;d<c.length-1;d++)k<(d+1.5)/h?(k++,a[d]=!0):a[d]=!1;a=Blockly.utils.string.wrapMutate_(c,a,b);d=Blockly.utils.string.wrapScore_(c,a,b);a=Blockly.utils.string.wrapToText_(c,a);e++}while(d>f);return g};\nBlockly.utils.string.wrapScore_=function(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,!0===b[f]?(d.push(0),e.push(a[f].charAt(a[f].length-1))):!1===b[f]&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=2*Math.pow(Math.abs(c-d[f]),1.5),b-=Math.pow(a-d[f],1.5),-1!=\".?!\".indexOf(e[f])?b+=c/3:-1!=\",;)]}\".indexOf(e[f])&&(b+=c/4);1<d.length&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b};\nBlockly.utils.string.wrapMutate_=function(a,b,c){for(var d=Blockly.utils.string.wrapScore_(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var g=[].concat(b);g[f]=!g[f];g[f+1]=!g[f+1];var h=Blockly.utils.string.wrapScore_(a,g,c);h>d&&(d=h,e=g)}return e?Blockly.utils.string.wrapMutate_(a,e,c):b};Blockly.utils.string.wrapToText_=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]),void 0!==b[d]&&c.push(b[d]?\"\\n\":\" \");return c.join(\"\")};Blockly.utils.Size=function(a,b){this.width=a;this.height=b};Blockly.utils.Size.equals=function(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1};Blockly.utils.style={};Blockly.utils.style.getSize=function(a){if(\"none\"!=Blockly.utils.style.getStyle_(a,\"display\"))return Blockly.utils.style.getSizeWithDisplay_(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility=\"hidden\";b.position=\"absolute\";b.display=\"inline\";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Blockly.utils.Size(f,a)};Blockly.utils.style.getSizeWithDisplay_=function(a){return new Blockly.utils.Size(a.offsetWidth,a.offsetHeight)};\nBlockly.utils.style.getStyle_=function(a,b){return Blockly.utils.style.getComputedStyle(a,b)||Blockly.utils.style.getCascadedStyle(a,b)||a.style&&a.style[b]};Blockly.utils.style.getComputedStyle=function(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||\"\":\"\"};Blockly.utils.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};\nBlockly.utils.style.getPageOffset=function(a){var b=new Blockly.utils.Coordinate(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new Blockly.utils.Coordinate(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};Blockly.utils.style.getViewportPageOffset=function(){var a=document.body,b=document.documentElement;return new Blockly.utils.Coordinate(a.scrollLeft||b.scrollLeft,a.scrollTop||b.scrollTop)};\nBlockly.utils.style.setElementShown=function(a,b){a.style.display=b?\"\":\"none\"};Blockly.utils.style.isRightToLeft=function(a){return\"rtl\"==Blockly.utils.style.getStyle_(a,\"direction\")};\nBlockly.utils.style.getBorderBox=function(a){var b=Blockly.utils.style.getComputedStyle(a,\"borderLeftWidth\"),c=Blockly.utils.style.getComputedStyle(a,\"borderRightWidth\"),d=Blockly.utils.style.getComputedStyle(a,\"borderTopWidth\");a=Blockly.utils.style.getComputedStyle(a,\"borderBottomWidth\");return{top:parseFloat(d),right:parseFloat(c),bottom:parseFloat(a),left:parseFloat(b)}};\nBlockly.utils.style.scrollIntoContainerView=function(a,b,c){a=Blockly.utils.style.getContainerOffsetToScrollInto(a,b,c);b.scrollLeft=a.x;b.scrollTop=a.y};\nBlockly.utils.style.getContainerOffsetToScrollInto=function(a,b,c){var d=Blockly.utils.style.getPageOffset(a),e=Blockly.utils.style.getPageOffset(b),f=Blockly.utils.style.getBorderBox(b),g=d.x-e.x-f.left;d=d.y-e.y-f.top;e=Blockly.utils.style.getSizeWithDisplay_(a);a=b.clientWidth-e.width;e=b.clientHeight-e.height;f=b.scrollLeft;b=b.scrollTop;c?(f+=g-a/2,b+=d-e/2):(f+=Math.min(g,Math.max(g-a,0)),b+=Math.min(d,Math.max(d-e,0)));return new Blockly.utils.Coordinate(f,b)};Blockly.utils.userAgent={};\n(function(a){function b(d){return-1!=c.indexOf(d.toUpperCase())}Blockly.utils.userAgent.raw=a;var c=Blockly.utils.userAgent.raw.toUpperCase();Blockly.utils.userAgent.IE=b(\"Trident\")||b(\"MSIE\");Blockly.utils.userAgent.EDGE=b(\"Edge\");Blockly.utils.userAgent.JAVA_FX=b(\"JavaFX\");Blockly.utils.userAgent.CHROME=(b(\"Chrome\")||b(\"CriOS\"))&&!Blockly.utils.userAgent.EDGE;Blockly.utils.userAgent.WEBKIT=b(\"WebKit\")&&!Blockly.utils.userAgent.EDGE;Blockly.utils.userAgent.GECKO=b(\"Gecko\")&&!Blockly.utils.userAgent.WEBKIT&&\n!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE;Blockly.utils.userAgent.ANDROID=b(\"Android\");Blockly.utils.userAgent.IPAD=b(\"iPad\");Blockly.utils.userAgent.IPOD=b(\"iPod\");Blockly.utils.userAgent.IPHONE=b(\"iPhone\")&&!Blockly.utils.userAgent.IPAD&&!Blockly.utils.userAgent.IPOD;Blockly.utils.userAgent.MAC=b(\"Macintosh\");Blockly.utils.userAgent.TABLET=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID&&!b(\"Mobile\")||b(\"Silk\");Blockly.utils.userAgent.MOBILE=!Blockly.utils.userAgent.TABLET&&\n(Blockly.utils.userAgent.IPOD||Blockly.utils.userAgent.IPHONE||Blockly.utils.userAgent.ANDROID||b(\"IEMobile\"))})(Blockly.utils.global.navigator&&Blockly.utils.global.navigator.userAgent||\"\");Blockly.utils.noEvent=function(a){a.preventDefault();a.stopPropagation()};Blockly.utils.isTargetInput=function(a){return\"textarea\"==a.target.type||\"text\"==a.target.type||\"number\"==a.target.type||\"email\"==a.target.type||\"password\"==a.target.type||\"search\"==a.target.type||\"tel\"==a.target.type||\"url\"==a.target.type||a.target.isContentEditable||a.target.dataset&&\"true\"==a.target.dataset.isTextInput};\nBlockly.utils.getRelativeXY=function(a){var b=new Blockly.utils.Coordinate(0,0),c=a.getAttribute(\"x\");c&&(b.x=parseInt(c,10));if(c=a.getAttribute(\"y\"))b.y=parseInt(c,10);if(c=(c=a.getAttribute(\"transform\"))&&c.match(Blockly.utils.getRelativeXY.XY_REGEX_))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute(\"style\"))&&-1<a.indexOf(\"translate\")&&(a=a.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b};\nBlockly.utils.getInjectionDivXY_=function(a){for(var b=0,c=0;a;){var d=Blockly.utils.getRelativeXY(a);b+=d.x;c+=d.y;if(-1!=(\" \"+(a.getAttribute(\"class\")||\"\")+\" \").indexOf(\" injectionDiv \"))break;a=a.parentNode}return new Blockly.utils.Coordinate(b,c)};Blockly.utils.getRelativeXY.XY_REGEX_=/translate\\(\\s*([-+\\d.e]+)([ ,]\\s*([-+\\d.e]+)\\s*)?/;Blockly.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\\s*translate(?:3d)?\\(\\s*([-+\\d.e]+)\\s*px([ ,]\\s*([-+\\d.e]+)\\s*px)?/;\nBlockly.utils.isRightButton=function(a){return a.ctrlKey&&Blockly.utils.userAgent.MAC?!0:2==a.button};Blockly.utils.mouseToSvg=function(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)};\nBlockly.utils.getScrollDeltaPixels=function(a){switch(a.deltaMode){default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:a.deltaX*Blockly.LINE_MODE_MULTIPLIER,y:a.deltaY*Blockly.LINE_MODE_MULTIPLIER};case 2:return{x:a.deltaX*Blockly.PAGE_MODE_MULTIPLIER,y:a.deltaY*Blockly.PAGE_MODE_MULTIPLIER}}};Blockly.utils.tokenizeInterpolation=function(a){return Blockly.utils.tokenizeInterpolation_(a,!0)};\nBlockly.utils.replaceMessageReferences=function(a){if(\"string\"!=typeof a)return a;a=Blockly.utils.tokenizeInterpolation_(a,!1);return a.length?String(a[0]):\"\"};Blockly.utils.checkMessageReferences=function(a){for(var b=!0,c=Blockly.Msg,d=a.match(/%{BKY_[A-Z]\\w*}/ig),e=0;e<d.length;e++){var f=d[e].toUpperCase();void 0==c[f.slice(6,-1)]&&(console.warn(\"No message string for \"+d[e]+\" in \"+a),b=!1)}return b};\nBlockly.utils.tokenizeInterpolation_=function(a,b){var c=[],d=a.split(\"\");d.push(\"\");var e=0;a=[];for(var f=null,g=0;g<d.length;g++){var h=d[g];0==e?\"%\"==h?((h=a.join(\"\"))&&c.push(h),a.length=0,e=1):a.push(h):1==e?\"%\"==h?(a.push(h),e=0):b&&\"0\"<=h&&\"9\">=h?(e=2,f=h,(h=a.join(\"\"))&&c.push(h),a.length=0):\"{\"==h?e=3:(a.push(\"%\",h),e=0):2==e?\"0\"<=h&&\"9\">=h?f+=h:(c.push(parseInt(f,10)),g--,e=0):3==e&&(\"\"==h?(a.splice(0,0,\"%{\"),g--,e=0):\"}\"!=h?a.push(h):(e=a.join(\"\"),/[A-Z]\\w*/i.test(e)?(h=e.toUpperCase(),\n(h=Blockly.utils.string.startsWith(h,\"BKY_\")?h.substring(4):null)&&h in Blockly.Msg?(e=Blockly.Msg[h],\"string\"==typeof e?Array.prototype.push.apply(c,Blockly.utils.tokenizeInterpolation_(e,b)):b?c.push(String(e)):c.push(e)):c.push(\"%{\"+e+\"}\")):c.push(\"%{\"+e+\"}\"),e=a.length=0))}(h=a.join(\"\"))&&c.push(h);b=[];for(g=a.length=0;g<c.length;++g)\"string\"==typeof c[g]?a.push(c[g]):((h=a.join(\"\"))&&b.push(h),a.length=0,b.push(c[g]));(h=a.join(\"\"))&&b.push(h);a.length=0;return b};\nBlockly.utils.genUid=function(){for(var a=Blockly.utils.genUid.soup_.length,b=[],c=0;20>c;c++)b[c]=Blockly.utils.genUid.soup_.charAt(Math.random()*a);return b.join(\"\")};Blockly.utils.genUid.soup_=\"!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nBlockly.utils.is3dSupported=function(){if(void 0!==Blockly.utils.is3dSupported.cached_)return Blockly.utils.is3dSupported.cached_;if(!Blockly.utils.global.getComputedStyle)return!1;var a=document.createElement(\"p\"),b=\"none\",c={webkitTransform:\"-webkit-transform\",OTransform:\"-o-transform\",msTransform:\"-ms-transform\",MozTransform:\"-moz-transform\",transform:\"transform\"};document.body.insertBefore(a,null);for(var d in c)if(void 0!==a.style[d]){a.style[d]=\"translate3d(1px,1px,1px)\";b=Blockly.utils.global.getComputedStyle(a);\nif(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);Blockly.utils.is3dSupported.cached_=\"none\"!==b;return Blockly.utils.is3dSupported.cached_};Blockly.utils.runAfterPageLoad=function(a){if(\"object\"!=typeof document)throw Error(\"Blockly.utils.runAfterPageLoad() requires browser document.\");if(\"complete\"==document.readyState)a();else var b=setInterval(function(){\"complete\"==document.readyState&&(clearInterval(b),a())},10)};\nBlockly.utils.getViewportBBox=function(){var a=Blockly.utils.style.getViewportPageOffset();return new Blockly.utils.Rect(a.y,document.documentElement.clientHeight+a.y,a.x,document.documentElement.clientWidth+a.x)};Blockly.utils.arrayRemove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};\nBlockly.utils.getDocumentScroll=function(){var a=document.documentElement,b=window;return Blockly.utils.userAgent.IE&&b.pageYOffset!=a.scrollTop?new Blockly.utils.Coordinate(a.scrollLeft,a.scrollTop):new Blockly.utils.Coordinate(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)};Blockly.utils.getBlockTypeCounts=function(a,b){var c=Object.create(null),d=a.getDescendants(!0);b&&(a=a.getNextBlock())&&(a=d.indexOf(a),d.splice(a,d.length-a));for(a=0;b=d[a];a++)c[b.type]?c[b.type]++:c[b.type]=1;return c};\nBlockly.utils.screenToWsCoordinates=function(a,b){var c=b.x;b=b.y;var d=a.getInjectionDiv().getBoundingClientRect();c=new Blockly.utils.Coordinate(c-d.left,b-d.top);b=a.getOriginOffsetInPixels();return Blockly.utils.Coordinate.difference(c,b).scale(1/a.scale)};\nBlockly.utils.parseBlockColour=function(a){var b=\"string\"==typeof a?Blockly.utils.replaceMessageReferences(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&360>=c)return{hue:c,hex:Blockly.utils.colour.hsvToHex(c,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)};if(c=Blockly.utils.colour.parse(b))return{hue:null,hex:c};c='Invalid colour: \"'+b+'\"';a!=b&&(c+=' (from \"'+a+'\")');throw Error(c);};Blockly.Events={};Blockly.Events.group_=\"\";Blockly.Events.recordUndo=!0;Blockly.Events.disabled_=0;Blockly.Events.CREATE=\"create\";Blockly.Events.BLOCK_CREATE=Blockly.Events.CREATE;Blockly.Events.DELETE=\"delete\";Blockly.Events.BLOCK_DELETE=Blockly.Events.DELETE;Blockly.Events.CHANGE=\"change\";Blockly.Events.BLOCK_CHANGE=Blockly.Events.CHANGE;Blockly.Events.MOVE=\"move\";Blockly.Events.BLOCK_MOVE=Blockly.Events.MOVE;Blockly.Events.VAR_CREATE=\"var_create\";Blockly.Events.VAR_DELETE=\"var_delete\";\nBlockly.Events.VAR_RENAME=\"var_rename\";Blockly.Events.UI=\"ui\";Blockly.Events.COMMENT_CREATE=\"comment_create\";Blockly.Events.COMMENT_DELETE=\"comment_delete\";Blockly.Events.COMMENT_CHANGE=\"comment_change\";Blockly.Events.COMMENT_MOVE=\"comment_move\";Blockly.Events.FINISHED_LOADING=\"finished_loading\";Blockly.Events.BUMP_EVENTS=[Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_MOVE,Blockly.Events.COMMENT_CREATE,Blockly.Events.COMMENT_MOVE];Blockly.Events.FIRE_QUEUE_=[];\nBlockly.Events.fire=function(a){Blockly.Events.isEnabled()&&(Blockly.Events.FIRE_QUEUE_.length||setTimeout(Blockly.Events.fireNow_,0),Blockly.Events.FIRE_QUEUE_.push(a))};Blockly.Events.fireNow_=function(){for(var a=Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_,!0),b=Blockly.Events.FIRE_QUEUE_.length=0,c;c=a[b];b++)if(c.workspaceId){var d=Blockly.Workspace.getById(c.workspaceId);d&&d.fireChangeListener(c)}};\nBlockly.Events.filter=function(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.isNull()){var g=[f.type,f.blockId,f.workspaceId].join(\" \"),h=d[g],k=h?h.event:null;if(!h)d[g]={event:f,index:e},c.push(f);else if(f.type==Blockly.Events.MOVE&&h.index==e-1)k.newParentId=f.newParentId,k.newInputName=f.newInputName,k.newCoordinate=f.newCoordinate,h.index=e;else if(f.type==Blockly.Events.CHANGE&&f.element==k.element&&f.name==k.name)k.newValue=f.newValue;else if(f.type!=\nBlockly.Events.UI||\"click\"!=f.element||\"commentOpen\"!=k.element&&\"mutatorOpen\"!=k.element&&\"warningOpen\"!=k.element)d[g]={event:f,index:1},c.push(f)}a=c.filter(function(l){return!l.isNull()});b||a.reverse();for(e=1;f=a[e];e++)f.type==Blockly.Events.CHANGE&&\"mutation\"==f.element&&a.unshift(a.splice(e,1)[0]);return a};Blockly.Events.clearPendingUndo=function(){for(var a=0,b;b=Blockly.Events.FIRE_QUEUE_[a];a++)b.recordUndo=!1};Blockly.Events.disable=function(){Blockly.Events.disabled_++};\nBlockly.Events.enable=function(){Blockly.Events.disabled_--};Blockly.Events.isEnabled=function(){return 0==Blockly.Events.disabled_};Blockly.Events.getGroup=function(){return Blockly.Events.group_};Blockly.Events.setGroup=function(a){Blockly.Events.group_=\"boolean\"==typeof a?a?Blockly.utils.genUid():\"\":a};Blockly.Events.getDescendantIds=function(a){var b=[];a=a.getDescendants(!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b};\nBlockly.Events.fromJson=function(a,b){var c=Blockly.registry.getClass(Blockly.registry.Type.EVENT,a.type);if(!c)throw Error(\"Unknown event type.\");c=new c;c.fromJson(a);c.workspaceId=b.id;return c};\nBlockly.Events.disableOrphans=function(a){if((a.type==Blockly.Events.MOVE||a.type==Blockly.Events.CREATE)&&a.workspaceId){var b=Blockly.Workspace.getById(a.workspaceId);if(a=b.getBlockById(a.blockId)){var c=a.getParent();if(c&&c.isEnabled())for(b=a.getDescendants(!1),a=0;c=b[a];a++)c.setEnabled(!0);else if((a.outputConnection||a.previousConnection)&&!b.isDragging()){do a.setEnabled(!1),a=a.getNextBlock();while(a)}}}};Blockly.Events.Abstract=function(){this.isBlank=null;this.workspaceId=void 0;this.group=Blockly.Events.getGroup();this.recordUndo=Blockly.Events.recordUndo};Blockly.Events.Abstract.prototype.toJson=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};Blockly.Events.Abstract.prototype.fromJson=function(a){this.isBlank=!1;this.group=a.group};Blockly.Events.Abstract.prototype.isNull=function(){return!1};Blockly.Events.Abstract.prototype.run=function(a){};\nBlockly.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var a=Blockly.Workspace.getById(this.workspaceId);if(!a)throw Error(\"Workspace is null. Event must have been generated from real Blockly events.\");return a};Blockly.utils.object={};Blockly.utils.object.inherits=function(a,b){a.superClass_=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a};Blockly.utils.object.mixin=function(a,b){for(var c in b)a[c]=b[c]};Blockly.utils.object.deepMerge=function(a,b){for(var c in b)a[c]=null!=b[c]&&\"object\"===typeof b[c]?Blockly.utils.object.deepMerge(a[c]||Object.create(null),b[c]):b[c];return a};Blockly.utils.object.values=function(a){return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};Blockly.Events.Ui=function(a,b,c,d){Blockly.Events.Ui.superClass_.constructor.call(this);this.isBlank=\"undefined\"==typeof a;this.blockId=a?a.id:null;this.workspaceId=a?a.workspace.id:void 0;this.element=\"undefined\"==typeof b?\"\":b;this.oldValue=\"undefined\"==typeof c?\"\":c;this.newValue=\"undefined\"==typeof d?\"\":d;this.recordUndo=!1};Blockly.utils.object.inherits(Blockly.Events.Ui,Blockly.Events.Abstract);Blockly.Events.Ui.prototype.type=Blockly.Events.UI;\nBlockly.Events.Ui.prototype.toJson=function(){var a=Blockly.Events.Ui.superClass_.toJson.call(this);a.element=this.element;void 0!==this.newValue&&(a.newValue=this.newValue);this.blockId&&(a.blockId=this.blockId);return a};Blockly.Events.Ui.prototype.fromJson=function(a){Blockly.Events.Ui.superClass_.fromJson.call(this,a);this.element=a.element;this.newValue=a.newValue;this.blockId=a.blockId};Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.UI,Blockly.Events.Ui);Blockly.utils.Svg=function(a){this.tagName_=a};Blockly.utils.Svg.prototype.toString=function(){return this.tagName_};Blockly.utils.Svg.ANIMATE=new Blockly.utils.Svg(\"animate\");Blockly.utils.Svg.CIRCLE=new Blockly.utils.Svg(\"circle\");Blockly.utils.Svg.CLIPPATH=new Blockly.utils.Svg(\"clipPath\");Blockly.utils.Svg.DEFS=new Blockly.utils.Svg(\"defs\");Blockly.utils.Svg.FECOMPOSITE=new Blockly.utils.Svg(\"feComposite\");Blockly.utils.Svg.FECOMPONENTTRANSFER=new Blockly.utils.Svg(\"feComponentTransfer\");\nBlockly.utils.Svg.FEFLOOD=new Blockly.utils.Svg(\"feFlood\");Blockly.utils.Svg.FEFUNCA=new Blockly.utils.Svg(\"feFuncA\");Blockly.utils.Svg.FEGAUSSIANBLUR=new Blockly.utils.Svg(\"feGaussianBlur\");Blockly.utils.Svg.FEPOINTLIGHT=new Blockly.utils.Svg(\"fePointLight\");Blockly.utils.Svg.FESPECULARLIGHTING=new Blockly.utils.Svg(\"feSpecularLighting\");Blockly.utils.Svg.FILTER=new Blockly.utils.Svg(\"filter\");Blockly.utils.Svg.FOREIGNOBJECT=new Blockly.utils.Svg(\"foreignObject\");Blockly.utils.Svg.G=new Blockly.utils.Svg(\"g\");\nBlockly.utils.Svg.IMAGE=new Blockly.utils.Svg(\"image\");Blockly.utils.Svg.LINE=new Blockly.utils.Svg(\"line\");Blockly.utils.Svg.PATH=new Blockly.utils.Svg(\"path\");Blockly.utils.Svg.PATTERN=new Blockly.utils.Svg(\"pattern\");Blockly.utils.Svg.POLYGON=new Blockly.utils.Svg(\"polygon\");Blockly.utils.Svg.RECT=new Blockly.utils.Svg(\"rect\");Blockly.utils.Svg.SVG=new Blockly.utils.Svg(\"svg\");Blockly.utils.Svg.TEXT=new Blockly.utils.Svg(\"text\");Blockly.utils.Svg.TSPAN=new Blockly.utils.Svg(\"tspan\");Blockly.utils.dom={};Blockly.utils.dom.SVG_NS=\"http://www.w3.org/2000/svg\";Blockly.utils.dom.HTML_NS=\"http://www.w3.org/1999/xhtml\";Blockly.utils.dom.XLINK_NS=\"http://www.w3.org/1999/xlink\";Blockly.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16};Blockly.utils.dom.cacheWidths_=null;Blockly.utils.dom.cacheReference_=0;Blockly.utils.dom.canvasContext_=null;\nBlockly.utils.dom.createSvgElement=function(a,b,c){a=document.createElementNS(Blockly.utils.dom.SVG_NS,String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a};Blockly.utils.dom.addClass=function(a,b){var c=a.getAttribute(\"class\")||\"\";if(-1!=(\" \"+c+\" \").indexOf(\" \"+b+\" \"))return!1;c&&(c+=\" \");a.setAttribute(\"class\",c+b);return!0};\nBlockly.utils.dom.removeClasses=function(a,b){b=b.split(\" \");for(var c=0;c<b.length;c++)Blockly.utils.dom.removeClass(a,b[c])};Blockly.utils.dom.removeClass=function(a,b){var c=a.getAttribute(\"class\");if(-1==(\" \"+c+\" \").indexOf(\" \"+b+\" \"))return!1;c=c.split(/\\s+/);for(var d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute(\"class\",c.join(\" \")):a.removeAttribute(\"class\");return!0};\nBlockly.utils.dom.hasClass=function(a,b){return-1!=(\" \"+a.getAttribute(\"class\")+\" \").indexOf(\" \"+b+\" \")};Blockly.utils.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};Blockly.utils.dom.insertAfter=function(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error(\"Reference node has no parent.\");c?b.insertBefore(a,c):b.appendChild(a)};Blockly.utils.dom.containsNode=function(a,b){return!!(a.compareDocumentPosition(b)&Blockly.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)};\nBlockly.utils.dom.setCssTransform=function(a,b){a.style.transform=b;a.style[\"-webkit-transform\"]=b};Blockly.utils.dom.startTextWidthCache=function(){Blockly.utils.dom.cacheReference_++;Blockly.utils.dom.cacheWidths_||(Blockly.utils.dom.cacheWidths_={})};Blockly.utils.dom.stopTextWidthCache=function(){Blockly.utils.dom.cacheReference_--;Blockly.utils.dom.cacheReference_||(Blockly.utils.dom.cacheWidths_=null)};\nBlockly.utils.dom.getTextWidth=function(a){var b=a.textContent+\"\\n\"+a.className.baseVal,c;if(Blockly.utils.dom.cacheWidths_&&(c=Blockly.utils.dom.cacheWidths_[b]))return c;try{c=Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE?a.getBBox().width:a.getComputedTextLength()}catch(d){return 8*a.textContent.length}Blockly.utils.dom.cacheWidths_&&(Blockly.utils.dom.cacheWidths_[b]=c);return c};\nBlockly.utils.dom.getFastTextWidth=function(a,b,c,d){return Blockly.utils.dom.getFastTextWidthWithSizeString(a,b+\"pt\",c,d)};\nBlockly.utils.dom.getFastTextWidthWithSizeString=function(a,b,c,d){var e=a.textContent;a=e+\"\\n\"+a.className.baseVal;var f;if(Blockly.utils.dom.cacheWidths_&&(f=Blockly.utils.dom.cacheWidths_[a]))return f;Blockly.utils.dom.canvasContext_||(f=document.createElement(\"canvas\"),f.className=\"blocklyComputeCanvas\",document.body.appendChild(f),Blockly.utils.dom.canvasContext_=f.getContext(\"2d\"));Blockly.utils.dom.canvasContext_.font=c+\" \"+b+\" \"+d;f=Blockly.utils.dom.canvasContext_.measureText(e).width;Blockly.utils.dom.cacheWidths_&&\n(Blockly.utils.dom.cacheWidths_[a]=f);return f};\nBlockly.utils.dom.measureFontMetrics=function(a,b,c,d){var e=document.createElement(\"span\");e.style.font=c+\" \"+b+\" \"+d;e.textContent=a;a=document.createElement(\"div\");a.style.width=\"1px\";a.style.height=\"0px\";b=document.createElement(\"div\");b.setAttribute(\"style\",\"position: fixed; top: 0; left: 0; display: flex;\");b.appendChild(e);b.appendChild(a);document.body.appendChild(b);try{c={},b.style.alignItems=\"baseline\",c.baseline=a.offsetTop-e.offsetTop,b.style.alignItems=\"flex-end\",c.height=a.offsetTop-\ne.offsetTop}finally{document.body.removeChild(b)}return c};Blockly.BlockDragSurfaceSvg=function(a){this.container_=a;this.createDom()};Blockly.BlockDragSurfaceSvg.prototype.SVG_=null;Blockly.BlockDragSurfaceSvg.prototype.dragGroup_=null;Blockly.BlockDragSurfaceSvg.prototype.container_=null;Blockly.BlockDragSurfaceSvg.prototype.scale_=1;Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_=null;\nBlockly.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,\"xmlns:html\":Blockly.utils.dom.HTML_NS,\"xmlns:xlink\":Blockly.utils.dom.XLINK_NS,version:\"1.1\",\"class\":\"blocklyBlockDragSurface\"},this.container_),this.dragGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},this.SVG_))};\nBlockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(a){if(this.dragGroup_.childNodes.length)throw Error(\"Already dragging a block.\");this.dragGroup_.appendChild(a);this.SVG_.style.display=\"block\";this.surfaceXY_=new Blockly.utils.Coordinate(0,0)};Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(a,b,c){this.scale_=c;a=a.toFixed(0);b=b.toFixed(0);this.dragGroup_.setAttribute(\"transform\",\"translate(\"+a+\",\"+b+\") scale(\"+c+\")\")};\nBlockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var a=this.surfaceXY_.x,b=this.surfaceXY_.y;a=a.toFixed(0);b=b.toFixed(0);this.SVG_.style.display=\"block\";Blockly.utils.dom.setCssTransform(this.SVG_,\"translate3d(\"+a+\"px, \"+b+\"px, 0px)\")};Blockly.BlockDragSurfaceSvg.prototype.translateSurface=function(a,b){this.surfaceXY_=new Blockly.utils.Coordinate(a*this.scale_,b*this.scale_);this.translateSurfaceInternal_()};\nBlockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var a=Blockly.utils.getRelativeXY(this.SVG_);return new Blockly.utils.Coordinate(a.x/this.scale_,a.y/this.scale_)};Blockly.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_};Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild};\nBlockly.BlockDragSurfaceSvg.prototype.clearAndHide=function(a){a?a.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock());this.SVG_.style.display=\"none\";if(this.dragGroup_.childNodes.length)throw Error(\"Drag group was not cleared.\");this.surfaceXY_=null};Blockly.utils.IdGenerator={};Blockly.utils.IdGenerator.nextId_=0;Blockly.utils.IdGenerator.getNextUniqueId=function(){return\"blockly-\"+(Blockly.utils.IdGenerator.nextId_++).toString(36)};Blockly.Component=function(){this.rightToLeft_=Blockly.Component.defaultRightToLeft;this.id_=null;this.inDocument_=!1;this.parent_=this.element_=null;this.children_=[];this.childIndex_={};this.disposed_=!1};Blockly.Component.defaultRightToLeft=!1;Blockly.Component.Error={ALREADY_RENDERED:\"Component already rendered\",PARENT_UNABLE_TO_BE_SET:\"Unable to set parent component\",CHILD_INDEX_OUT_OF_BOUNDS:\"Child component index out of bounds\",ABSTRACT_METHOD:\"Unimplemented abstract method\"};\nBlockly.Component.prototype.getId=function(){return this.id_||(this.id_=Blockly.utils.IdGenerator.getNextUniqueId())};Blockly.Component.prototype.getElement=function(){return this.element_};Blockly.Component.prototype.setElementInternal=function(a){this.element_=a};\nBlockly.Component.prototype.setParent=function(a){if(this==a)throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a};Blockly.Component.prototype.getParent=function(){return this.parent_};Blockly.Component.prototype.isInDocument=function(){return this.inDocument_};\nBlockly.Component.prototype.createDom=function(){throw Error(Blockly.Component.Error.ABSTRACT_METHOD);};Blockly.Component.prototype.render=function(a){this.render_(a)};Blockly.Component.prototype.render_=function(a,b){if(this.inDocument_)throw Error(Blockly.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,b||null):document.body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};\nBlockly.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};Blockly.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.inDocument_=!1};Blockly.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())};\nBlockly.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.forEachChild(function(a){a.dispose()});this.element_&&Blockly.utils.dom.removeNode(this.element_);this.parent_=this.element_=this.childIndex_=this.children_=null};Blockly.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};\nBlockly.Component.prototype.addChildAt=function(a,b,c){if(a.inDocument_&&(c||!this.inDocument_))throw Error(Blockly.Component.Error.ALREADY_RENDERED);if(0>b||b>this.getChildCount())throw Error(Blockly.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_[a.getId()]=a;if(a.getParent()==this){var d=this.children_.indexOf(a);-1<d&&this.children_.splice(d,1)}a.setParent(this);this.children_.splice(b,0,a);a.inDocument_&&this.inDocument_&&a.getParent()==this?(c=this.getContentElement(),b=c.childNodes[b]||\nnull,b!=a.getElement()&&c.insertBefore(a.getElement(),b)):c?(this.element_||this.createDom(),b=this.getChildAt(b+1),a.render_(this.getContentElement(),b?b.element_:null)):this.inDocument_&&!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&a.enterDocument()};Blockly.Component.prototype.getContentElement=function(){return this.element_};Blockly.Component.prototype.hasChildren=function(){return 0!=this.children_.length};\nBlockly.Component.prototype.getChildCount=function(){return this.children_.length};Blockly.Component.prototype.getChild=function(a){return a?this.childIndex_[a]||null:null};Blockly.Component.prototype.getChildAt=function(a){return this.children_[a]||null};Blockly.Component.prototype.forEachChild=function(a,b){for(var c=0;c<this.children_.length;c++)a.call(b,this.children_[c],c)};Blockly.Css={};Blockly.Css.injected_=!1;Blockly.Css.register=function(a){if(Blockly.Css.injected_)throw Error(\"CSS already injected\");Array.prototype.push.apply(Blockly.Css.CONTENT,a);a.length=0};\nBlockly.Css.inject=function(a,b){if(!Blockly.Css.injected_){Blockly.Css.injected_=!0;var c=Blockly.Css.CONTENT.join(\"\\n\");Blockly.Css.CONTENT.length=0;a&&(a=b.replace(/[\\\\/]$/,\"\"),c=c.replace(/<<<PATH>>>/g,a),a=document.createElement(\"style\"),a.id=\"blockly-common-style\",c=document.createTextNode(c),a.appendChild(c),document.head.insertBefore(a,document.head.firstChild))}};\nBlockly.Css.CONTENT=[\".blocklySvg {\",\"background-color: #fff;\",\"outline: none;\",\"overflow: hidden;\",\"position: absolute;\",\"display: block;\",\"}\",\".blocklyWidgetDiv {\",\"display: none;\",\"position: absolute;\",\"z-index: 99999;\",\"}\",\".injectionDiv {\",\"height: 100%;\",\"position: relative;\",\"overflow: hidden;\",\"touch-action: none;\",\"}\",\".blocklyNonSelectable {\",\"user-select: none;\",\"-ms-user-select: none;\",\"-webkit-user-select: none;\",\"}\",\".blocklyWsDragSurface {\",\"display: none;\",\"position: absolute;\",\"top: 0;\",\n\"left: 0;\",\"}\",\".blocklyWsDragSurface.blocklyOverflowVisible {\",\"overflow: visible;\",\"}\",\".blocklyBlockDragSurface {\",\"display: none;\",\"position: absolute;\",\"top: 0;\",\"left: 0;\",\"right: 0;\",\"bottom: 0;\",\"overflow: visible !important;\",\"z-index: 50;\",\"}\",\".blocklyBlockCanvas.blocklyCanvasTransitioning,\",\".blocklyBubbleCanvas.blocklyCanvasTransitioning {\",\"transition: transform .5s;\",\"}\",\".blocklyTooltipDiv {\",\"background-color: #ffffc7;\",\"border: 1px solid #ddc;\",\"box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\",\n\"color: #000;\",\"display: none;\",\"font: 9pt sans-serif;\",\"opacity: .9;\",\"padding: 2px;\",\"position: absolute;\",\"z-index: 100000;\",\"}\",\".blocklyDropDownDiv {\",\"position: absolute;\",\"left: 0;\",\"top: 0;\",\"z-index: 1000;\",\"display: none;\",\"border: 1px solid;\",\"border-color: #dadce0;\",\"background-color: #fff;\",\"border-radius: 2px;\",\"padding: 4px;\",\"box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\",\"}\",\".blocklyDropDownDiv.blocklyFocused {\",\"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\",\"}\",\".blocklyDropDownContent {\",\n\"max-height: 300px;\",\"overflow: auto;\",\"overflow-x: hidden;\",\"position: relative;\",\"}\",\".blocklyDropDownArrow {\",\"position: absolute;\",\"left: 0;\",\"top: 0;\",\"width: 16px;\",\"height: 16px;\",\"z-index: -1;\",\"background-color: inherit;\",\"border-color: inherit;\",\"}\",\".blocklyDropDownButton {\",\"display: inline-block;\",\"float: left;\",\"padding: 0;\",\"margin: 4px;\",\"border-radius: 4px;\",\"outline: none;\",\"border: 1px solid;\",\"transition: box-shadow .1s;\",\"cursor: pointer;\",\"}\",\".blocklyArrowTop {\",\"border-top: 1px solid;\",\n\"border-left: 1px solid;\",\"border-top-left-radius: 4px;\",\"border-color: inherit;\",\"}\",\".blocklyArrowBottom {\",\"border-bottom: 1px solid;\",\"border-right: 1px solid;\",\"border-bottom-right-radius: 4px;\",\"border-color: inherit;\",\"}\",\".blocklyResizeSE {\",\"cursor: se-resize;\",\"fill: #aaa;\",\"}\",\".blocklyResizeSW {\",\"cursor: sw-resize;\",\"fill: #aaa;\",\"}\",\".blocklyResizeLine {\",\"stroke: #515A5A;\",\"stroke-width: 1;\",\"}\",\".blocklyHighlightedConnectionPath {\",\"fill: none;\",\"stroke: #fc3;\",\"stroke-width: 4px;\",\n\"}\",\".blocklyPathLight {\",\"fill: none;\",\"stroke-linecap: round;\",\"stroke-width: 1;\",\"}\",\".blocklySelected>.blocklyPathLight {\",\"display: none;\",\"}\",\".blocklyDraggable {\",'cursor: url(\"<<<PATH>>>/handopen.cur\"), auto;',\"cursor: grab;\",\"cursor: -webkit-grab;\",\"}\",\".blocklyDragging {\",'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\"cursor: grabbing;\",\"cursor: -webkit-grabbing;\",\"}\",\".blocklyDraggable:active {\",'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\"cursor: grabbing;\",\"cursor: -webkit-grabbing;\",\n\"}\",\".blocklyBlockDragSurface .blocklyDraggable {\",'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\"cursor: grabbing;\",\"cursor: -webkit-grabbing;\",\"}\",\".blocklyDragging.blocklyDraggingDelete {\",'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\"}\",\".blocklyDragging>.blocklyPath,\",\".blocklyDragging>.blocklyPathLight {\",\"fill-opacity: .8;\",\"stroke-opacity: .8;\",\"}\",\".blocklyDragging>.blocklyPathDark {\",\"display: none;\",\"}\",\".blocklyDisabled>.blocklyPath {\",\"fill-opacity: .5;\",\"stroke-opacity: .5;\",\n\"}\",\".blocklyDisabled>.blocklyPathLight,\",\".blocklyDisabled>.blocklyPathDark {\",\"display: none;\",\"}\",\".blocklyInsertionMarker>.blocklyPath,\",\".blocklyInsertionMarker>.blocklyPathLight,\",\".blocklyInsertionMarker>.blocklyPathDark {\",\"fill-opacity: .2;\",\"stroke: none;\",\"}\",\".blocklyMultilineText {\",\"font-family: monospace;\",\"}\",\".blocklyNonEditableText>text {\",\"pointer-events: none;\",\"}\",\".blocklyFlyout {\",\"position: absolute;\",\"z-index: 20;\",\"}\",\".blocklyText text {\",\"cursor: default;\",\"}\",\".blocklySvg text,\",\n\".blocklyBlockDragSurface text {\",\"user-select: none;\",\"-ms-user-select: none;\",\"-webkit-user-select: none;\",\"cursor: inherit;\",\"}\",\".blocklyHidden {\",\"display: none;\",\"}\",\".blocklyFieldDropdown:not(.blocklyHidden) {\",\"display: block;\",\"}\",\".blocklyIconGroup {\",\"cursor: default;\",\"}\",\".blocklyIconGroup:not(:hover),\",\".blocklyIconGroupReadonly {\",\"opacity: .6;\",\"}\",\".blocklyIconShape {\",\"fill: #00f;\",\"stroke: #fff;\",\"stroke-width: 1px;\",\"}\",\".blocklyIconSymbol {\",\"fill: #fff;\",\"}\",\".blocklyMinimalBody {\",\n\"margin: 0;\",\"padding: 0;\",\"}\",\".blocklyHtmlInput {\",\"border: none;\",\"border-radius: 4px;\",\"height: 100%;\",\"margin: 0;\",\"outline: none;\",\"padding: 0;\",\"width: 100%;\",\"text-align: center;\",\"display: block;\",\"box-sizing: border-box;\",\"}\",\".blocklyHtmlInput::-ms-clear {\",\"display: none;\",\"}\",\".blocklyMainBackground {\",\"stroke-width: 1;\",\"stroke: #c6c6c6;\",\"}\",\".blocklyMutatorBackground {\",\"fill: #fff;\",\"stroke: #ddd;\",\"stroke-width: 1;\",\"}\",\".blocklyFlyoutBackground {\",\"fill: #ddd;\",\"fill-opacity: .8;\",\n\"}\",\".blocklyMainWorkspaceScrollbar {\",\"z-index: 20;\",\"}\",\".blocklyFlyoutScrollbar {\",\"z-index: 30;\",\"}\",\".blocklyScrollbarHorizontal,\",\".blocklyScrollbarVertical {\",\"position: absolute;\",\"outline: none;\",\"}\",\".blocklyScrollbarBackground {\",\"opacity: 0;\",\"}\",\".blocklyScrollbarHandle {\",\"fill: #ccc;\",\"}\",\".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\",\".blocklyScrollbarHandle:hover {\",\"fill: #bbb;\",\"}\",\".blocklyFlyout .blocklyScrollbarHandle {\",\"fill: #bbb;\",\"}\",\".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\",\n\".blocklyFlyout .blocklyScrollbarHandle:hover {\",\"fill: #aaa;\",\"}\",\".blocklyInvalidInput {\",\"background: #faa;\",\"}\",\".blocklyVerticalMarker {\",\"stroke-width: 3px;\",\"fill: rgba(255,255,255,.5);\",\"pointer-events: none;\",\"}\",\".blocklyComputeCanvas {\",\"position: absolute;\",\"width: 0;\",\"height: 0;\",\"}\",\".blocklyNoPointerEvents {\",\"pointer-events: none;\",\"}\",\".blocklyContextMenu {\",\"border-radius: 4px;\",\"max-height: 100%;\",\"}\",\".blocklyDropdownMenu {\",\"border-radius: 2px;\",\"padding: 0 !important;\",\"}\",\n\".blocklyDropdownMenu .blocklyMenuItem {\",\"padding-left: 28px;\",\"}\",\".blocklyDropdownMenu .blocklyMenuItemRtl {\",\"padding-left: 5px;\",\"padding-right: 28px;\",\"}\",\".blocklyWidgetDiv .blocklyMenu {\",\"background: #fff;\",\"border: 1px solid transparent;\",\"box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\",\"font: normal 13px Arial, sans-serif;\",\"margin: 0;\",\"outline: none;\",\"padding: 4px 0;\",\"position: absolute;\",\"overflow-y: auto;\",\"overflow-x: hidden;\",\"max-height: 100%;\",\"z-index: 20000;\",\"}\",\".blocklyWidgetDiv .blocklyMenu.blocklyFocused {\",\n\"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\",\"}\",\".blocklyDropDownDiv .blocklyMenu {\",'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\"outline: none;\",\"z-index: 20000;\",\"}\",\".blocklyMenuItem {\",\"border: none;\",\"color: #000;\",\"cursor: pointer;\",\"list-style: none;\",\"margin: 0;\",\"min-width: 7em;\",\"padding: 6px 15px;\",\"white-space: nowrap;\",\"}\",\".blocklyMenuItemDisabled {\",\"color: #ccc;\",\"cursor: inherit;\",\"}\",\".blocklyMenuItemHighlight {\",\"background-color: rgba(0,0,0,.1);\",\"}\",\".blocklyMenuItemCheckbox {\",\n\"height: 16px;\",\"position: absolute;\",\"width: 16px;\",\"}\",\".blocklyMenuItemSelected .blocklyMenuItemCheckbox {\",\"background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\",\"float: left;\",\"margin-left: -24px;\",\"position: static;\",\"}\",\".blocklyMenuItemRtl .blocklyMenuItemCheckbox {\",\"float: right;\",\"margin-right: -24px;\",\"}\"];Blockly.utils.math={};Blockly.utils.math.toRadians=function(a){return a*Math.PI/180};Blockly.utils.math.toDegrees=function(a){return 180*a/Math.PI};Blockly.utils.math.clamp=function(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};Blockly.DropDownDiv=function(){};Blockly.DropDownDiv.boundsElement_=null;Blockly.DropDownDiv.owner_=null;Blockly.DropDownDiv.positionToField_=null;Blockly.DropDownDiv.ARROW_SIZE=16;Blockly.DropDownDiv.BORDER_SIZE=1;Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING=12;Blockly.DropDownDiv.PADDING_Y=16;Blockly.DropDownDiv.ANIMATION_TIME=.25;Blockly.DropDownDiv.animateOutTimer_=null;Blockly.DropDownDiv.onHide_=null;Blockly.DropDownDiv.rendererClassName_=\"\";Blockly.DropDownDiv.themeClassName_=\"\";\nBlockly.DropDownDiv.createDom=function(){if(!Blockly.DropDownDiv.DIV_){var a=document.createElement(\"div\");a.className=\"blocklyDropDownDiv\";(Blockly.parentContainer||document.body).appendChild(a);Blockly.DropDownDiv.DIV_=a;var b=document.createElement(\"div\");b.className=\"blocklyDropDownContent\";a.appendChild(b);Blockly.DropDownDiv.content_=b;b=document.createElement(\"div\");b.className=\"blocklyDropDownArrow\";a.appendChild(b);Blockly.DropDownDiv.arrow_=b;Blockly.DropDownDiv.DIV_.style.opacity=0;Blockly.DropDownDiv.DIV_.style.transition=\n\"transform \"+Blockly.DropDownDiv.ANIMATION_TIME+\"s, opacity \"+Blockly.DropDownDiv.ANIMATION_TIME+\"s\";a.addEventListener(\"focusin\",function(){Blockly.utils.dom.addClass(a,\"blocklyFocused\")});a.addEventListener(\"focusout\",function(){Blockly.utils.dom.removeClass(a,\"blocklyFocused\")})}};Blockly.DropDownDiv.setBoundsElement=function(a){Blockly.DropDownDiv.boundsElement_=a};Blockly.DropDownDiv.getContentDiv=function(){return Blockly.DropDownDiv.content_};\nBlockly.DropDownDiv.clearContent=function(){Blockly.DropDownDiv.content_.textContent=\"\";Blockly.DropDownDiv.content_.style.width=\"\"};Blockly.DropDownDiv.setColour=function(a,b){Blockly.DropDownDiv.DIV_.style.backgroundColor=a;Blockly.DropDownDiv.DIV_.style.borderColor=b};Blockly.DropDownDiv.showPositionedByBlock=function(a,b,c,d){return Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfBlock_(b),a,c,d)};\nBlockly.DropDownDiv.showPositionedByField=function(a,b,c){Blockly.DropDownDiv.positionToField_=!0;return Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfField_(a),a,b,c)};Blockly.DropDownDiv.getScaledBboxOfBlock_=function(a){var b=a.getSvgRoot(),c=b.getBBox(),d=a.workspace.scale;a=c.height*d;c=c.width*d;b=Blockly.utils.style.getPageOffset(b);return new Blockly.utils.Rect(b.y,b.y+a,b.x,b.x+c)};\nBlockly.DropDownDiv.getScaledBboxOfField_=function(a){a=a.getScaledBBox();return new Blockly.utils.Rect(a.top,a.bottom,a.left,a.right)};Blockly.DropDownDiv.showPositionedByRect_=function(a,b,c,d){var e=a.left+(a.right-a.left)/2,f=a.bottom;a=a.top;d&&(a+=d);d=b.getSourceBlock();for(var g=d.workspace;g.options.parentWorkspace;)g=g.options.parentWorkspace;Blockly.DropDownDiv.setBoundsElement(g.getParentSvg().parentNode);return Blockly.DropDownDiv.show(b,d.RTL,e,f,e,a,c)};\nBlockly.DropDownDiv.show=function(a,b,c,d,e,f,g){Blockly.DropDownDiv.owner_=a;Blockly.DropDownDiv.onHide_=g||null;a=Blockly.DropDownDiv.DIV_;a.style.direction=b?\"rtl\":\"ltr\";b=Blockly.getMainWorkspace();Blockly.DropDownDiv.rendererClassName_=b.getRenderer().getClassName();Blockly.DropDownDiv.themeClassName_=b.getTheme().getClassName();Blockly.utils.dom.addClass(a,Blockly.DropDownDiv.rendererClassName_);Blockly.utils.dom.addClass(a,Blockly.DropDownDiv.themeClassName_);return Blockly.DropDownDiv.positionInternal_(c,\nd,e,f)};Blockly.DropDownDiv.getBoundsInfo_=function(){var a=Blockly.utils.style.getPageOffset(Blockly.DropDownDiv.boundsElement_),b=Blockly.utils.style.getSize(Blockly.DropDownDiv.boundsElement_);return{left:a.x,right:a.x+b.width,top:a.y,bottom:a.y+b.height,width:b.width,height:b.height}};\nBlockly.DropDownDiv.getPositionMetrics_=function(a,b,c,d){var e=Blockly.DropDownDiv.getBoundsInfo_(),f=Blockly.utils.style.getSize(Blockly.DropDownDiv.DIV_);return b+f.height<e.bottom?Blockly.DropDownDiv.getPositionBelowMetrics_(a,b,e,f):d-f.height>e.top?Blockly.DropDownDiv.getPositionAboveMetrics_(c,d,e,f):b+f.height<document.documentElement.clientHeight?Blockly.DropDownDiv.getPositionBelowMetrics_(a,b,e,f):d-f.height>document.documentElement.clientTop?Blockly.DropDownDiv.getPositionAboveMetrics_(c,\nd,e,f):Blockly.DropDownDiv.getPositionTopOfPageMetrics_(a,e,f)};Blockly.DropDownDiv.getPositionBelowMetrics_=function(a,b,c,d){a=Blockly.DropDownDiv.getPositionX(a,c.left,c.right,d.width);return{initialX:a.divX,initialY:b,finalX:a.divX,finalY:b+Blockly.DropDownDiv.PADDING_Y,arrowX:a.arrowX,arrowY:-(Blockly.DropDownDiv.ARROW_SIZE/2+Blockly.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}};\nBlockly.DropDownDiv.getPositionAboveMetrics_=function(a,b,c,d){a=Blockly.DropDownDiv.getPositionX(a,c.left,c.right,d.width);return{initialX:a.divX,initialY:b-d.height,finalX:a.divX,finalY:b-d.height-Blockly.DropDownDiv.PADDING_Y,arrowX:a.arrowX,arrowY:d.height-2*Blockly.DropDownDiv.BORDER_SIZE-Blockly.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}};\nBlockly.DropDownDiv.getPositionTopOfPageMetrics_=function(a,b,c){a=Blockly.DropDownDiv.getPositionX(a,b.left,b.right,c.width);return{initialX:a.divX,initialY:0,finalX:a.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}};\nBlockly.DropDownDiv.getPositionX=function(a,b,c,d){var e=a;a=Blockly.utils.math.clamp(b,a-d/2,c-d);e-=Blockly.DropDownDiv.ARROW_SIZE/2;b=Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING;d=Blockly.utils.math.clamp(b,e-a,d-b-Blockly.DropDownDiv.ARROW_SIZE);return{arrowX:d,divX:a}};Blockly.DropDownDiv.isVisible=function(){return!!Blockly.DropDownDiv.owner_};\nBlockly.DropDownDiv.hideIfOwner=function(a,b){return Blockly.DropDownDiv.owner_===a?(b?Blockly.DropDownDiv.hideWithoutAnimation():Blockly.DropDownDiv.hide(),!0):!1};\nBlockly.DropDownDiv.hide=function(){var a=Blockly.DropDownDiv.DIV_;a.style.transform=\"translate(0, 0)\";a.style.opacity=0;Blockly.DropDownDiv.animateOutTimer_=setTimeout(function(){Blockly.DropDownDiv.hideWithoutAnimation()},1E3*Blockly.DropDownDiv.ANIMATION_TIME);Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)};\nBlockly.DropDownDiv.hideWithoutAnimation=function(){if(Blockly.DropDownDiv.isVisible()){Blockly.DropDownDiv.animateOutTimer_&&clearTimeout(Blockly.DropDownDiv.animateOutTimer_);var a=Blockly.DropDownDiv.DIV_;a.style.transform=\"\";a.style.left=\"\";a.style.top=\"\";a.style.opacity=0;a.style.display=\"none\";a.style.backgroundColor=\"\";a.style.borderColor=\"\";Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null);Blockly.DropDownDiv.clearContent();Blockly.DropDownDiv.owner_=\nnull;Blockly.DropDownDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(a,Blockly.DropDownDiv.rendererClassName_),Blockly.DropDownDiv.rendererClassName_=\"\");Blockly.DropDownDiv.themeClassName_&&(Blockly.utils.dom.removeClass(a,Blockly.DropDownDiv.themeClassName_),Blockly.DropDownDiv.themeClassName_=\"\");Blockly.getMainWorkspace().markFocused()}};\nBlockly.DropDownDiv.positionInternal_=function(a,b,c,d){a=Blockly.DropDownDiv.getPositionMetrics_(a,b,c,d);a.arrowVisible?(Blockly.DropDownDiv.arrow_.style.display=\"\",Blockly.DropDownDiv.arrow_.style.transform=\"translate(\"+a.arrowX+\"px,\"+a.arrowY+\"px) rotate(45deg)\",Blockly.DropDownDiv.arrow_.setAttribute(\"class\",a.arrowAtTop?\"blocklyDropDownArrow blocklyArrowTop\":\"blocklyDropDownArrow blocklyArrowBottom\")):Blockly.DropDownDiv.arrow_.style.display=\"none\";b=Math.floor(a.initialX);c=Math.floor(a.initialY);\nd=Math.floor(a.finalX);var e=Math.floor(a.finalY),f=Blockly.DropDownDiv.DIV_;f.style.left=b+\"px\";f.style.top=c+\"px\";f.style.display=\"block\";f.style.opacity=1;f.style.transform=\"translate(\"+(d-b)+\"px,\"+(e-c)+\"px)\";return!!a.arrowAtTop};\nBlockly.DropDownDiv.repositionForWindowResize=function(){if(Blockly.DropDownDiv.owner_){var a=Blockly.DropDownDiv.owner_,b=a.getSourceBlock();a=Blockly.DropDownDiv.positionToField_?Blockly.DropDownDiv.getScaledBboxOfField_(a):Blockly.DropDownDiv.getScaledBboxOfBlock_(b);b=a.left+(a.right-a.left)/2;Blockly.DropDownDiv.positionInternal_(b,a.bottom,b,a.top)}else Blockly.DropDownDiv.hide()};Blockly.Grid=function(a,b){this.gridPattern_=a;this.spacing_=b.spacing;this.length_=b.length;this.line2_=(this.line1_=a.firstChild)&&this.line1_.nextSibling;this.snapToGrid_=b.snap};Blockly.Grid.prototype.scale_=1;Blockly.Grid.prototype.dispose=function(){this.gridPattern_=null};Blockly.Grid.prototype.shouldSnap=function(){return this.snapToGrid_};Blockly.Grid.prototype.getSpacing=function(){return this.spacing_};Blockly.Grid.prototype.getPatternId=function(){return this.gridPattern_.id};\nBlockly.Grid.prototype.update=function(a){this.scale_=a;var b=this.spacing_*a||100;this.gridPattern_.setAttribute(\"width\",b);this.gridPattern_.setAttribute(\"height\",b);b=Math.floor(this.spacing_/2)+.5;var c=b-this.length_/2,d=b+this.length_/2;b*=a;c*=a;d*=a;this.setLineAttributes_(this.line1_,a,c,d,b,b);this.setLineAttributes_(this.line2_,a,b,b,c,d)};\nBlockly.Grid.prototype.setLineAttributes_=function(a,b,c,d,e,f){a&&(a.setAttribute(\"stroke-width\",b),a.setAttribute(\"x1\",c),a.setAttribute(\"y1\",e),a.setAttribute(\"x2\",d),a.setAttribute(\"y2\",f))};Blockly.Grid.prototype.moveTo=function(a,b){this.gridPattern_.setAttribute(\"x\",a);this.gridPattern_.setAttribute(\"y\",b);(Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE)&&this.update(this.scale_)};\nBlockly.Grid.createDom=function(a,b,c){a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATTERN,{id:\"blocklyGridPattern\"+a,patternUnits:\"userSpaceOnUse\"},c);0<b.length&&0<b.spacing?(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{stroke:b.colour},a),1<b.length&&Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{stroke:b.colour},a)):Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{},a);return a};Blockly.Theme=function(a,b,c,d){this.name=a;this.blockStyles=b||Object.create(null);this.categoryStyles=c||Object.create(null);this.componentStyles=d||Object.create(null);this.fontStyle=Object.create(null);this.startHats=null;Blockly.registry.register(Blockly.registry.Type.THEME,a,this)};Blockly.Theme.prototype.getClassName=function(){return this.name+\"-theme\"};Blockly.Theme.prototype.setBlockStyle=function(a,b){this.blockStyles[a]=b};\nBlockly.Theme.prototype.setCategoryStyle=function(a,b){this.categoryStyles[a]=b};Blockly.Theme.prototype.getComponentStyle=function(a){return(a=this.componentStyles[a])&&\"string\"==typeof a&&this.getComponentStyle(a)?this.getComponentStyle(a):a?String(a):null};Blockly.Theme.prototype.setComponentStyle=function(a,b){this.componentStyles[a]=b};Blockly.Theme.prototype.setFontStyle=function(a){this.fontStyle=a};Blockly.Theme.prototype.setStartHats=function(a){this.startHats=a};\nBlockly.Theme.defineTheme=function(a,b){var c=new Blockly.Theme(a),d=b.base;d&&(\"string\"==typeof d&&(d=Blockly.registry.getObject(Blockly.registry.Type.THEME,d)),d instanceof Blockly.Theme&&(Blockly.utils.object.deepMerge(c,d),c.name=a));Blockly.utils.object.deepMerge(c.blockStyles,b.blockStyles);Blockly.utils.object.deepMerge(c.categoryStyles,b.categoryStyles);Blockly.utils.object.deepMerge(c.componentStyles,b.componentStyles);Blockly.utils.object.deepMerge(c.fontStyle,b.fontStyle);null!=b.startHats&&\n(c.startHats=b.startHats);return c};Blockly.Themes={};Blockly.Themes.Classic={};Blockly.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:\"20\"},list_blocks:{colourPrimary:\"260\"},logic_blocks:{colourPrimary:\"210\"},loop_blocks:{colourPrimary:\"120\"},math_blocks:{colourPrimary:\"230\"},procedure_blocks:{colourPrimary:\"290\"},text_blocks:{colourPrimary:\"160\"},variable_blocks:{colourPrimary:\"330\"},variable_dynamic_blocks:{colourPrimary:\"310\"},hat_blocks:{colourPrimary:\"330\",hat:\"cap\"}};\nBlockly.Themes.Classic.categoryStyles={colour_category:{colour:\"20\"},list_category:{colour:\"260\"},logic_category:{colour:\"210\"},loop_category:{colour:\"120\"},math_category:{colour:\"230\"},procedure_category:{colour:\"290\"},text_category:{colour:\"160\"},variable_category:{colour:\"330\"},variable_dynamic_category:{colour:\"310\"}};Blockly.Themes.Classic=new Blockly.Theme(\"classic\",Blockly.Themes.Classic.defaultBlockStyles,Blockly.Themes.Classic.categoryStyles);Blockly.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,\nN:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,\nPERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};Blockly.user={};Blockly.user.keyMap={};Blockly.user.keyMap.map_={};Blockly.user.keyMap.modifierKeys={SHIFT:\"Shift\",CONTROL:\"Control\",ALT:\"Alt\",META:\"Meta\"};Blockly.user.keyMap.setActionForKey=function(a,b){var c=Blockly.user.keyMap.getKeyByAction(b);c&&delete Blockly.user.keyMap.map_[c];Blockly.user.keyMap.map_[a]=b};Blockly.user.keyMap.setKeyMap=function(a){Blockly.user.keyMap.map_=a};Blockly.user.keyMap.getKeyMap=function(){var a={};Blockly.utils.object.mixin(a,Blockly.user.keyMap.map_);return a};\nBlockly.user.keyMap.getActionByKeyCode=function(a){return Blockly.user.keyMap.map_[a]};Blockly.user.keyMap.getKeyByAction=function(a){for(var b=Object.keys(Blockly.user.keyMap.map_),c=0,d;d=b[c];c++)if(Blockly.user.keyMap.map_[d].name===a.name)return d;return null};Blockly.user.keyMap.serializeKeyEvent=function(a){for(var b=Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys),c=\"\",d=0,e;e=b[d];d++)a.getModifierState(e)&&(c+=e);return c+=a.keyCode};\nBlockly.user.keyMap.checkModifiers_=function(a,b){for(var c=0,d;d=a[c];c++)if(0>b.indexOf(d))throw Error(d+\" is not a valid modifier key.\");};Blockly.user.keyMap.createSerializedKey=function(a,b){var c=\"\",d=Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys);Blockly.user.keyMap.checkModifiers_(b,d);for(var e=0,f;f=d[e];e++)-1<b.indexOf(f)&&(c+=f);return c+a};\nBlockly.user.keyMap.createDefaultKeyMap=function(){var a={},b=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.K,[Blockly.user.keyMap.modifierKeys.CONTROL,Blockly.user.keyMap.modifierKeys.SHIFT]),c=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.W,[Blockly.user.keyMap.modifierKeys.SHIFT]),d=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.A,[Blockly.user.keyMap.modifierKeys.SHIFT]),e=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.S,[Blockly.user.keyMap.modifierKeys.SHIFT]),\nf=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.D,[Blockly.user.keyMap.modifierKeys.SHIFT]);a[Blockly.utils.KeyCodes.W]=Blockly.navigation.ACTION_PREVIOUS;a[Blockly.utils.KeyCodes.A]=Blockly.navigation.ACTION_OUT;a[Blockly.utils.KeyCodes.S]=Blockly.navigation.ACTION_NEXT;a[Blockly.utils.KeyCodes.D]=Blockly.navigation.ACTION_IN;a[Blockly.utils.KeyCodes.I]=Blockly.navigation.ACTION_INSERT;a[Blockly.utils.KeyCodes.ENTER]=Blockly.navigation.ACTION_MARK;a[Blockly.utils.KeyCodes.X]=Blockly.navigation.ACTION_DISCONNECT;\na[Blockly.utils.KeyCodes.T]=Blockly.navigation.ACTION_TOOLBOX;a[Blockly.utils.KeyCodes.E]=Blockly.navigation.ACTION_EXIT;a[Blockly.utils.KeyCodes.ESC]=Blockly.navigation.ACTION_EXIT;a[b]=Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV;a[c]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP;a[d]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT;a[e]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN;a[f]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT;return a};Blockly.utils.Metrics=function(){};Blockly.utils.toolbox={};Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND=\"categoryToolbox\";Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND=\"flyoutToolbox\";Blockly.utils.toolbox.Position={TOP:Blockly.TOOLBOX_AT_TOP,BOTTOM:Blockly.TOOLBOX_AT_BOTTOM,LEFT:Blockly.TOOLBOX_AT_LEFT,RIGHT:Blockly.TOOLBOX_AT_RIGHT};\nBlockly.utils.toolbox.convertToolboxDefToJson=function(a){if(!a)return null;if(a instanceof Element||\"string\"==typeof a)a=Blockly.utils.toolbox.parseToolboxTree(a),a=Blockly.utils.toolbox.convertToToolboxJson_(a);Blockly.utils.toolbox.validateToolbox_(a);return a};\nBlockly.utils.toolbox.validateToolbox_=function(a){var b=a.kind;a=a.contents;if(b&&b!=Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND&&b!=Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error(\"Invalid toolbox kind \"+b+\". Please supply either \"+Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND+\" or \"+Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!a)throw Error(\"Toolbox must have a contents attribute.\");};\nBlockly.utils.toolbox.convertFlyoutDefToJsonArray=function(a){return a?a.contents?a.contents:Array.isArray(a)&&0<a.length&&!a[0].nodeType?a:Blockly.utils.toolbox.xmlToJsonArray_(a):[]};Blockly.utils.toolbox.hasCategories=function(a){if(!a)return!1;var b=a.kind;return b?b==Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!a.contents.filter(function(c){return\"CATEGORY\"==c.kind.toUpperCase()}).length};\nBlockly.utils.toolbox.isCategoryCollapsible=function(a){return a&&a.contents?!!a.contents.filter(function(b){return\"CATEGORY\"==b.kind.toUpperCase()}).length:!1};Blockly.utils.toolbox.convertToToolboxJson_=function(a){var b={contents:Blockly.utils.toolbox.xmlToJsonArray_(a)};a instanceof Node&&Blockly.utils.toolbox.addAttributes_(a,b);return b};\nBlockly.utils.toolbox.xmlToJsonArray_=function(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;\"BLOCK\"==f?e.blockxml=d:\"CATEGORY\"==f&&(e.contents=Blockly.utils.toolbox.xmlToJsonArray_(d));Blockly.utils.toolbox.addAttributes_(d,e);b.push(e)}return b};\nBlockly.utils.toolbox.addAttributes_=function(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];-1<d.nodeName.indexOf(\"css-\")?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace(\"css-\",\"\")]=d.value):b[d.nodeName]=d.value}};\nBlockly.utils.toolbox.parseToolboxTree=function(a){if(a){if(\"string\"!=typeof a&&(Blockly.utils.userAgent.IE&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),\"string\"==typeof a&&(a=Blockly.Xml.textToDom(a),\"xml\"!=a.nodeName.toLowerCase()))throw TypeError(\"Toolbox should be an <xml> document.\");}else a=null;return a};Blockly.utils.xml={};Blockly.utils.xml.NAME_SPACE=\"https://developers.google.com/blockly/xml\";Blockly.utils.xml.document=function(){return document};Blockly.utils.xml.createElement=function(a){return Blockly.utils.xml.document().createElementNS(Blockly.utils.xml.NAME_SPACE,a)};Blockly.utils.xml.createTextNode=function(a){return Blockly.utils.xml.document().createTextNode(a)};Blockly.utils.xml.textToDomDocument=function(a){return(new DOMParser).parseFromString(a,\"text/xml\")};\nBlockly.utils.xml.domToText=function(a){return(new XMLSerializer).serializeToString(a)};Blockly.Events.BlockBase=function(a){Blockly.Events.BlockBase.superClass_.constructor.call(this);this.blockId=(this.isBlank=\"undefined\"==typeof a)?\"\":a.id;this.workspaceId=this.isBlank?\"\":a.workspace.id};Blockly.utils.object.inherits(Blockly.Events.BlockBase,Blockly.Events.Abstract);Blockly.Events.BlockBase.prototype.toJson=function(){var a=Blockly.Events.BlockBase.superClass_.toJson.call(this);a.blockId=this.blockId;return a};\nBlockly.Events.BlockBase.prototype.fromJson=function(a){Blockly.Events.BlockBase.superClass_.fromJson.call(this,a);this.blockId=a.blockId};Blockly.Events.Change=function(a,b,c,d,e){Blockly.Events.Change.superClass_.constructor.call(this,a);a&&(this.element=\"undefined\"==typeof b?\"\":b,this.name=\"undefined\"==typeof c?\"\":c,this.oldValue=\"undefined\"==typeof d?\"\":d,this.newValue=\"undefined\"==typeof e?\"\":e)};Blockly.utils.object.inherits(Blockly.Events.Change,Blockly.Events.BlockBase);\nBlockly.Events.BlockChange=Blockly.Events.Change;Blockly.Events.Change.prototype.type=Blockly.Events.CHANGE;Blockly.Events.Change.prototype.toJson=function(){var a=Blockly.Events.Change.superClass_.toJson.call(this);a.element=this.element;this.name&&(a.name=this.name);a.newValue=this.newValue;return a};Blockly.Events.Change.prototype.fromJson=function(a){Blockly.Events.Change.superClass_.fromJson.call(this,a);this.element=a.element;this.name=a.name;this.newValue=a.newValue};\nBlockly.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue};\nBlockly.Events.Change.prototype.run=function(a){var b=this.getEventWorkspace_().getBlockById(this.blockId);if(b)switch(b.mutator&&b.mutator.setVisible(!1),a=a?this.newValue:this.oldValue,this.element){case \"field\":(b=b.getField(this.name))?b.setValue(a):console.warn(\"Can't set non-existent field: \"+this.name);break;case \"comment\":b.setCommentText(a||null);break;case \"collapsed\":b.setCollapsed(!!a);break;case \"disabled\":b.setEnabled(!a);break;case \"inline\":b.setInputsInline(!!a);break;case \"mutation\":var c=\n\"\";b.mutationToDom&&(c=(c=b.mutationToDom())&&Blockly.Xml.domToText(c));if(b.domToMutation){var d=Blockly.Xml.textToDom(a||\"<mutation/>\");b.domToMutation(d)}Blockly.Events.fire(new Blockly.Events.Change(b,\"mutation\",null,c,a));break;default:console.warn(\"Unknown change type: \"+this.element)}else console.warn(\"Can't change non-existent block: \"+this.blockId)};\nBlockly.Events.Create=function(a){Blockly.Events.Create.superClass_.constructor.call(this,a);a&&(a.isShadow()&&(this.recordUndo=!1),this.xml=a.workspace.rendered?Blockly.Xml.blockToDomWithXY(a):Blockly.Xml.blockToDom(a),this.ids=Blockly.Events.getDescendantIds(a))};Blockly.utils.object.inherits(Blockly.Events.Create,Blockly.Events.BlockBase);Blockly.Events.BlockCreate=Blockly.Events.Create;Blockly.Events.Create.prototype.type=Blockly.Events.CREATE;\nBlockly.Events.Create.prototype.toJson=function(){var a=Blockly.Events.Create.superClass_.toJson.call(this);a.xml=Blockly.Xml.domToText(this.xml);a.ids=this.ids;return a};Blockly.Events.Create.prototype.fromJson=function(a){Blockly.Events.Create.superClass_.fromJson.call(this,a);this.xml=Blockly.Xml.textToDom(a.xml);this.ids=a.ids};\nBlockly.Events.Create.prototype.run=function(a){var b=this.getEventWorkspace_();if(a)a=Blockly.utils.xml.createElement(\"xml\"),a.appendChild(this.xml),Blockly.Xml.domToWorkspace(a,b);else{a=0;for(var c;c=this.ids[a];a++){var d=b.getBlockById(c);d?d.dispose(!1):c==this.blockId&&console.warn(\"Can't uncreate non-existent block: \"+c)}}};\nBlockly.Events.Delete=function(a){Blockly.Events.Delete.superClass_.constructor.call(this,a);if(a){if(a.getParent())throw Error(\"Connected blocks cannot be deleted.\");a.isShadow()&&(this.recordUndo=!1);this.oldXml=a.workspace.rendered?Blockly.Xml.blockToDomWithXY(a):Blockly.Xml.blockToDom(a);this.ids=Blockly.Events.getDescendantIds(a)}};Blockly.utils.object.inherits(Blockly.Events.Delete,Blockly.Events.BlockBase);Blockly.Events.BlockDelete=Blockly.Events.Delete;\nBlockly.Events.Delete.prototype.type=Blockly.Events.DELETE;Blockly.Events.Delete.prototype.toJson=function(){var a=Blockly.Events.Delete.superClass_.toJson.call(this);a.ids=this.ids;return a};Blockly.Events.Delete.prototype.fromJson=function(a){Blockly.Events.Delete.superClass_.fromJson.call(this,a);this.ids=a.ids};\nBlockly.Events.Delete.prototype.run=function(a){var b=this.getEventWorkspace_();if(a){a=0;for(var c;c=this.ids[a];a++){var d=b.getBlockById(c);d?d.dispose(!1):c==this.blockId&&console.warn(\"Can't delete non-existent block: \"+c)}}else a=Blockly.utils.xml.createElement(\"xml\"),a.appendChild(this.oldXml),Blockly.Xml.domToWorkspace(a,b)};\nBlockly.Events.Move=function(a){Blockly.Events.Move.superClass_.constructor.call(this,a);a&&(a.isShadow()&&(this.recordUndo=!1),a=this.currentLocation_(),this.oldParentId=a.parentId,this.oldInputName=a.inputName,this.oldCoordinate=a.coordinate)};Blockly.utils.object.inherits(Blockly.Events.Move,Blockly.Events.BlockBase);Blockly.Events.BlockMove=Blockly.Events.Move;Blockly.Events.Move.prototype.type=Blockly.Events.MOVE;\nBlockly.Events.Move.prototype.toJson=function(){var a=Blockly.Events.Move.superClass_.toJson.call(this);this.newParentId&&(a.newParentId=this.newParentId);this.newInputName&&(a.newInputName=this.newInputName);this.newCoordinate&&(a.newCoordinate=Math.round(this.newCoordinate.x)+\",\"+Math.round(this.newCoordinate.y));return a};\nBlockly.Events.Move.prototype.fromJson=function(a){Blockly.Events.Move.superClass_.fromJson.call(this,a);this.newParentId=a.newParentId;this.newInputName=a.newInputName;a.newCoordinate&&(a=a.newCoordinate.split(\",\"),this.newCoordinate=new Blockly.utils.Coordinate(Number(a[0]),Number(a[1])))};Blockly.Events.Move.prototype.recordNew=function(){var a=this.currentLocation_();this.newParentId=a.parentId;this.newInputName=a.inputName;this.newCoordinate=a.coordinate};\nBlockly.Events.Move.prototype.currentLocation_=function(){var a=this.getEventWorkspace_().getBlockById(this.blockId),b={},c=a.getParent();if(c){if(b.parentId=c.id,a=c.getInputWithBlock(a))b.inputName=a.name}else b.coordinate=a.getRelativeToSurfaceXY();return b};Blockly.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&Blockly.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)};\nBlockly.Events.Move.prototype.run=function(a){var b=this.getEventWorkspace_(),c=b.getBlockById(this.blockId);if(c){var d=a?this.newParentId:this.oldParentId,e=a?this.newInputName:this.oldInputName;a=a?this.newCoordinate:this.oldCoordinate;var f=null;if(d&&(f=b.getBlockById(d),!f)){console.warn(\"Can't connect to non-existent block: \"+d);return}c.getParent()&&c.unplug();if(a)e=c.getRelativeToSurfaceXY(),c.moveBy(a.x-e.x,a.y-e.y);else{c=c.outputConnection||c.previousConnection;if(e){if(b=f.getInput(e))var g=\nb.connection}else c.type==Blockly.PREVIOUS_STATEMENT&&(g=f.nextConnection);g?c.connect(g):console.warn(\"Can't connect to non-existent input: \"+e)}}else console.warn(\"Can't move non-existent block: \"+this.blockId)};Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.CREATE,Blockly.Events.Create);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.DELETE,Blockly.Events.Delete);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.CHANGE,Blockly.Events.Change);\nBlockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.MOVE,Blockly.Events.Move);Blockly.Events.FinishedLoading=function(a){this.isBlank=\"undefined\"==typeof a;this.workspaceId=a?a.id:\"\";this.group=Blockly.Events.getGroup();this.recordUndo=!1};Blockly.utils.object.inherits(Blockly.Events.FinishedLoading,Blockly.Events.Ui);Blockly.Events.FinishedLoading.prototype.type=Blockly.Events.FINISHED_LOADING;Blockly.Events.FinishedLoading.prototype.toJson=function(){var a={type:this.type};this.group&&(a.group=this.group);this.workspaceId&&(a.workspaceId=this.workspaceId);return a};\nBlockly.Events.FinishedLoading.prototype.fromJson=function(a){this.isBlank=!1;this.workspaceId=a.workspaceId;this.group=a.group};Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.FINISHED_LOADING,Blockly.Events.FinishedLoading);Blockly.Events.VarBase=function(a){Blockly.Events.VarBase.superClass_.constructor.call(this);this.varId=(this.isBlank=\"undefined\"==typeof a)?\"\":a.getId();this.workspaceId=this.isBlank?\"\":a.workspace.id};Blockly.utils.object.inherits(Blockly.Events.VarBase,Blockly.Events.Abstract);Blockly.Events.VarBase.prototype.toJson=function(){var a=Blockly.Events.VarBase.superClass_.toJson.call(this);a.varId=this.varId;return a};\nBlockly.Events.VarBase.prototype.fromJson=function(a){Blockly.Events.VarBase.superClass_.toJson.call(this);this.varId=a.varId};Blockly.Events.VarCreate=function(a){Blockly.Events.VarCreate.superClass_.constructor.call(this,a);a&&(this.varType=a.type,this.varName=a.name)};Blockly.utils.object.inherits(Blockly.Events.VarCreate,Blockly.Events.VarBase);Blockly.Events.VarCreate.prototype.type=Blockly.Events.VAR_CREATE;\nBlockly.Events.VarCreate.prototype.toJson=function(){var a=Blockly.Events.VarCreate.superClass_.toJson.call(this);a.varType=this.varType;a.varName=this.varName;return a};Blockly.Events.VarCreate.prototype.fromJson=function(a){Blockly.Events.VarCreate.superClass_.fromJson.call(this,a);this.varType=a.varType;this.varName=a.varName};Blockly.Events.VarCreate.prototype.run=function(a){var b=this.getEventWorkspace_();a?b.createVariable(this.varName,this.varType,this.varId):b.deleteVariableById(this.varId)};\nBlockly.Events.VarDelete=function(a){Blockly.Events.VarDelete.superClass_.constructor.call(this,a);a&&(this.varType=a.type,this.varName=a.name)};Blockly.utils.object.inherits(Blockly.Events.VarDelete,Blockly.Events.VarBase);Blockly.Events.VarDelete.prototype.type=Blockly.Events.VAR_DELETE;Blockly.Events.VarDelete.prototype.toJson=function(){var a=Blockly.Events.VarDelete.superClass_.toJson.call(this);a.varType=this.varType;a.varName=this.varName;return a};\nBlockly.Events.VarDelete.prototype.fromJson=function(a){Blockly.Events.VarDelete.superClass_.fromJson.call(this,a);this.varType=a.varType;this.varName=a.varName};Blockly.Events.VarDelete.prototype.run=function(a){var b=this.getEventWorkspace_();a?b.deleteVariableById(this.varId):b.createVariable(this.varName,this.varType,this.varId)};Blockly.Events.VarRename=function(a,b){Blockly.Events.VarRename.superClass_.constructor.call(this,a);a&&(this.oldName=a.name,this.newName=\"undefined\"==typeof b?\"\":b)};\nBlockly.utils.object.inherits(Blockly.Events.VarRename,Blockly.Events.VarBase);Blockly.Events.VarRename.prototype.type=Blockly.Events.VAR_RENAME;Blockly.Events.VarRename.prototype.toJson=function(){var a=Blockly.Events.VarRename.superClass_.toJson.call(this);a.oldName=this.oldName;a.newName=this.newName;return a};Blockly.Events.VarRename.prototype.fromJson=function(a){Blockly.Events.VarRename.superClass_.fromJson.call(this,a);this.oldName=a.oldName;this.newName=a.newName};\nBlockly.Events.VarRename.prototype.run=function(a){var b=this.getEventWorkspace_();a?b.renameVariableById(this.varId,this.newName):b.renameVariableById(this.varId,this.oldName)};Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_RENAME,Blockly.Events.VarRename);Blockly.Xml={};Blockly.Xml.workspaceToDom=function(a,b){var c=Blockly.utils.xml.createElement(\"xml\"),d=Blockly.Xml.variablesToDom(Blockly.Variables.allUsedVarModels(a));d.hasChildNodes()&&c.appendChild(d);var e=a.getTopComments(!0);d=0;for(var f;f=e[d];d++)c.appendChild(f.toXmlWithXY(b));a=a.getTopBlocks(!0);for(d=0;e=a[d];d++)c.appendChild(Blockly.Xml.blockToDomWithXY(e,b));return c};\nBlockly.Xml.variablesToDom=function(a){for(var b=Blockly.utils.xml.createElement(\"variables\"),c=0,d;d=a[c];c++){var e=Blockly.utils.xml.createElement(\"variable\");e.appendChild(Blockly.utils.xml.createTextNode(d.name));d.type&&e.setAttribute(\"type\",d.type);e.id=d.getId();b.appendChild(e)}return b};\nBlockly.Xml.blockToDomWithXY=function(a,b){if(a.isInsertionMarker()&&(a=a.getChildren(!1)[0],!a))return new DocumentFragment;var c;a.workspace.RTL&&(c=a.workspace.getWidth());b=Blockly.Xml.blockToDom(a,b);var d=a.getRelativeToSurfaceXY();b.setAttribute(\"x\",Math.round(a.workspace.RTL?c-d.x:d.x));b.setAttribute(\"y\",Math.round(d.y));return b};Blockly.Xml.fieldToDom_=function(a){if(a.isSerializable()){var b=Blockly.utils.xml.createElement(\"field\");b.setAttribute(\"name\",a.name||\"\");return a.toXml(b)}return null};\nBlockly.Xml.allFieldsToDom_=function(a,b){for(var c=0,d;d=a.inputList[c];c++)for(var e=0,f;f=d.fieldRow[e];e++)(f=Blockly.Xml.fieldToDom_(f))&&b.appendChild(f)};\nBlockly.Xml.blockToDom=function(a,b){if(a.isInsertionMarker())return(a=a.getChildren(!1)[0])?Blockly.Xml.blockToDom(a):new DocumentFragment;var c=Blockly.utils.xml.createElement(a.isShadow()?\"shadow\":\"block\");c.setAttribute(\"type\",a.type);b||c.setAttribute(\"id\",a.id);if(a.mutationToDom){var d=a.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}Blockly.Xml.allFieldsToDom_(a,c);if(d=a.getCommentText()){var e=a.commentModel.size,f=a.commentModel.pinned,g=Blockly.utils.xml.createElement(\"comment\");\ng.appendChild(Blockly.utils.xml.createTextNode(d));g.setAttribute(\"pinned\",f);g.setAttribute(\"h\",e.height);g.setAttribute(\"w\",e.width);c.appendChild(g)}a.data&&(d=Blockly.utils.xml.createElement(\"data\"),d.appendChild(Blockly.utils.xml.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.inputList[d];d++){var h;f=!0;if(e.type!=Blockly.DUMMY_INPUT){var k=e.connection.targetBlock();e.type==Blockly.INPUT_VALUE?h=Blockly.utils.xml.createElement(\"value\"):e.type==Blockly.NEXT_STATEMENT&&(h=Blockly.utils.xml.createElement(\"statement\"));\ng=e.connection.getShadowDom();!g||k&&k.isShadow()||h.appendChild(Blockly.Xml.cloneShadow_(g,b));k&&(g=Blockly.Xml.blockToDom(k,b),g.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&(h.appendChild(g),f=!1));h.setAttribute(\"name\",e.name);f||c.appendChild(h)}}void 0!=a.inputsInline&&a.inputsInline!=a.inputsInlineDefault&&c.setAttribute(\"inline\",a.inputsInline);a.isCollapsed()&&c.setAttribute(\"collapsed\",!0);a.isEnabled()||c.setAttribute(\"disabled\",!0);a.isDeletable()||a.isShadow()||c.setAttribute(\"deletable\",\n!1);a.isMovable()||a.isShadow()||c.setAttribute(\"movable\",!1);a.isEditable()||c.setAttribute(\"editable\",!1);if(d=a.getNextBlock())g=Blockly.Xml.blockToDom(d,b),g.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&(h=Blockly.utils.xml.createElement(\"next\"),h.appendChild(g),c.appendChild(h));g=a.nextConnection&&a.nextConnection.getShadowDom();!g||d&&d.isShadow()||h.appendChild(Blockly.Xml.cloneShadow_(g,b));return c};\nBlockly.Xml.cloneShadow_=function(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&\"shadow\"==c.nodeName&&c.removeAttribute(\"id\"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Blockly.utils.dom.NodeType.TEXT_NODE&&\"\"==d.data.trim()&&c.firstChild!=d&&Blockly.utils.dom.removeNode(d);c&&(d=c,c=c.nextSibling,d.nodeType==Blockly.utils.dom.NodeType.TEXT_NODE&&\"\"==d.data.trim()&&Blockly.utils.dom.removeNode(d))}return a};\nBlockly.Xml.domToText=function(a){return Blockly.utils.xml.domToText(a).replace(/<(\\w+)([^<]*)\\/>/g,\"<$1$2></$1>\")};Blockly.Xml.domToPrettyText=function(a){a=Blockly.Xml.domToText(a).split(\"<\");for(var b=\"\",c=1;c<a.length;c++){var d=a[c];\"/\"==d[0]&&(b=b.substring(2));a[c]=b+\"<\"+d;\"/\"!=d[0]&&\"/>\"!=d.slice(-2)&&(b+=\"  \")}a=a.join(\"\\n\");a=a.replace(/(<(\\w+)\\b[^>]*>[^\\n]*)\\n *<\\/\\2>/g,\"$1</$2>\");return a.replace(/^\\n/,\"\")};\nBlockly.Xml.textToDom=function(a){var b=Blockly.utils.xml.textToDomDocument(a);if(!b||!b.documentElement||b.getElementsByTagName(\"parsererror\").length)throw Error(\"textToDom was unable to parse: \"+a);return b.documentElement};Blockly.Xml.clearWorkspaceAndLoadFromXml=function(a,b){b.setResizesEnabled(!1);b.clear();a=Blockly.Xml.domToWorkspace(a,b);b.setResizesEnabled(!0);return a};\nBlockly.Xml.domToWorkspace=function(a,b){if(a instanceof Blockly.Workspace){var c=a;a=b;b=c;console.warn(\"Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.\")}var d;b.RTL&&(d=b.getWidth());c=[];Blockly.utils.dom.startTextWidthCache();var e=Blockly.Events.getGroup();e||Blockly.Events.setGroup(!0);b.setResizesEnabled&&b.setResizesEnabled(!1);var f=!0;try{for(var g=0,h;h=a.childNodes[g];g++){var k=h.nodeName.toLowerCase(),l=h;if(\"block\"==k||\"shadow\"==k&&!Blockly.Events.recordUndo){var m=\nBlockly.Xml.domToBlock(l,b);c.push(m.id);var n=l.hasAttribute(\"x\")?parseInt(l.getAttribute(\"x\"),10):10,p=l.hasAttribute(\"y\")?parseInt(l.getAttribute(\"y\"),10):10;isNaN(n)||isNaN(p)||m.moveBy(b.RTL?d-n:n,p);f=!1}else{if(\"shadow\"==k)throw TypeError(\"Shadow block cannot be a top-level block.\");if(\"comment\"==k)b.rendered?Blockly.WorkspaceCommentSvg?Blockly.WorkspaceCommentSvg.fromXml(l,b,d):console.warn(\"Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment.\"):Blockly.WorkspaceComment?\nBlockly.WorkspaceComment.fromXml(l,b):console.warn(\"Missing require for Blockly.WorkspaceComment, ignoring workspace comment.\");else if(\"variables\"==k){if(f)Blockly.Xml.domToVariables(l,b);else throw Error(\"'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.\");f=!1}}}}finally{e||Blockly.Events.setGroup(!1),Blockly.utils.dom.stopTextWidthCache()}b.setResizesEnabled&&b.setResizesEnabled(!0);Blockly.Events.fire(new Blockly.Events.FinishedLoading(b));\nreturn c};Blockly.Xml.appendDomToWorkspace=function(a,b){var c;Object.prototype.hasOwnProperty.call(b,\"scale\")&&(c=b.getBlocksBoundingBox());a=Blockly.Xml.domToWorkspace(a,b);if(c&&c.top!=c.bottom){var d=c.bottom;var e=b.RTL?c.right:c.left;var f=Infinity,g=-Infinity,h=Infinity;for(c=0;c<a.length;c++){var k=b.getBlockById(a[c]).getRelativeToSurfaceXY();k.y<h&&(h=k.y);k.x<f&&(f=k.x);k.x>g&&(g=k.x)}d=d-h+10;e=b.RTL?e-g:e-f;for(c=0;c<a.length;c++)b.getBlockById(a[c]).moveBy(e,d)}return a};\nBlockly.Xml.domToBlock=function(a,b){if(a instanceof Blockly.Workspace){var c=a;a=b;b=c;console.warn(\"Deprecated call to Blockly.Xml.domToBlock, swap the arguments.\")}Blockly.Events.disable();c=b.getAllVariables();try{var d=Blockly.Xml.domToBlockHeadless_(a,b),e=d.getDescendants(!1);if(b.rendered){d.setConnectionTracking(!1);for(var f=e.length-1;0<=f;f--)e[f].initSvg();for(f=e.length-1;0<=f;f--)e[f].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1);d.updateDisabled();b.resizeContents()}else for(f=\ne.length-1;0<=f;f--)e[f].initModel()}finally{Blockly.Events.enable()}if(Blockly.Events.isEnabled()){a=Blockly.Variables.getAddedVariables(b,c);for(f=0;f<a.length;f++)Blockly.Events.fire(new Blockly.Events.VarCreate(a[f]));Blockly.Events.fire(new Blockly.Events.BlockCreate(d))}return d};\nBlockly.Xml.domToVariables=function(a,b){for(var c=0,d;d=a.childNodes[c];c++)if(d.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE){var e=d.getAttribute(\"type\"),f=d.getAttribute(\"id\");b.createVariable(d.textContent,e,f)}};\nBlockly.Xml.domToBlockHeadless_=function(a,b){var c=null,d=a.getAttribute(\"type\");if(!d)throw TypeError(\"Block type unspecified: \"+a.outerHTML);var e=a.getAttribute(\"id\");c=b.newBlock(d,e);var f=null;e=0;for(var g;g=a.childNodes[e];e++)if(g.nodeType!=Blockly.utils.dom.NodeType.TEXT_NODE){for(var h,k=f=null,l=0;h=g.childNodes[l];l++)h.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&(\"block\"==h.nodeName.toLowerCase()?f=h:\"shadow\"==h.nodeName.toLowerCase()&&(k=h));l=!1;var m=g.getAttribute(\"name\");\nh=g;switch(g.nodeName.toLowerCase()){case \"mutation\":c.domToMutation&&(c.domToMutation(h),c.initSvg&&(l=!0));break;case \"comment\":if(!Blockly.Comment){console.warn(\"Missing require for Blockly.Comment, ignoring block comment.\");break}k=h.textContent;f=\"true\"==h.getAttribute(\"pinned\");g=parseInt(h.getAttribute(\"w\"),10);h=parseInt(h.getAttribute(\"h\"),10);c.setCommentText(k);c.commentModel.pinned=f;isNaN(g)||isNaN(h)||(c.commentModel.size=new Blockly.utils.Size(g,h));f&&c.getCommentIcon&&!c.isInFlyout&&\nsetTimeout(function(){c.getCommentIcon().setVisible(!0)},1);break;case \"data\":c.data=g.textContent;break;case \"title\":case \"field\":Blockly.Xml.domToField_(c,m,h);break;case \"value\":case \"statement\":h=c.getInput(m);if(!h){console.warn(\"Ignoring non-existent input \"+m+\" in block \"+d);break}if(f)if(f=Blockly.Xml.domToBlockHeadless_(f,b),f.outputConnection)h.connection.connect(f.outputConnection);else if(f.previousConnection)h.connection.connect(f.previousConnection);else throw TypeError(\"Child block does not have output or previous statement.\");\nk&&h.connection.setShadowDom(k);break;case \"next\":if(f){if(!c.nextConnection)throw TypeError(\"Next statement does not exist.\");if(c.nextConnection.isConnected())throw TypeError(\"Next statement is already connected.\");f=Blockly.Xml.domToBlockHeadless_(f,b);if(!f.previousConnection)throw TypeError(\"Next block does not have previous statement.\");c.nextConnection.connect(f.previousConnection)}k&&c.nextConnection&&c.nextConnection.setShadowDom(k);break;default:console.warn(\"Ignoring unknown tag: \"+g.nodeName)}}l&&\nc.initSvg();(e=a.getAttribute(\"inline\"))&&c.setInputsInline(\"true\"==e);(e=a.getAttribute(\"disabled\"))&&c.setEnabled(\"true\"!=e&&\"disabled\"!=e);(e=a.getAttribute(\"deletable\"))&&c.setDeletable(\"true\"==e);(e=a.getAttribute(\"movable\"))&&c.setMovable(\"true\"==e);(e=a.getAttribute(\"editable\"))&&c.setEditable(\"true\"==e);(e=a.getAttribute(\"collapsed\"))&&c.setCollapsed(\"true\"==e);if(\"shadow\"==a.nodeName.toLowerCase()){a=c.getChildren(!1);for(e=0;b=a[e];e++)if(!b.isShadow())throw TypeError(\"Shadow block not allowed non-shadow child.\");\nif(c.getVarModels().length)throw TypeError(\"Shadow blocks cannot have variable references.\");c.setShadow(!0)}return c};Blockly.Xml.domToField_=function(a,b,c){var d=a.getField(b);d?d.fromXml(c):console.warn(\"Ignoring non-existent field \"+b+\" in block \"+a.type)};Blockly.Xml.deleteNext=function(a){for(var b=0,c;c=a.childNodes[b];b++)if(\"next\"==c.nodeName.toLowerCase()){a.removeChild(c);break}};Blockly.Options=function(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,g=!1,h=!1,k=!1;else{c=Blockly.utils.toolbox.convertToolboxDefToJson(a.toolbox);d=Blockly.utils.toolbox.hasCategories(c);e=a.trashcan;void 0===e&&(e=d);var l=a.maxTrashcanContents;e?void 0===l&&(l=32):l=0;f=a.collapse;void 0===f&&(f=d);g=a.comments;void 0===g&&(g=d);h=a.disable;void 0===h&&(h=d);k=a.sounds;void 0===k&&(k=!0)}var m=!!a.rtl,n=a.horizontalLayout;void 0===n&&(n=!1);var p=a.toolboxPosition;p=\"end\"!==p;p=n?p?Blockly.utils.toolbox.Position.TOP:\nBlockly.utils.toolbox.Position.BOTTOM:p==m?Blockly.utils.toolbox.Position.RIGHT:Blockly.utils.toolbox.Position.LEFT;var q=a.css;void 0===q&&(q=!0);var t=\"https://blockly-demo.appspot.com/static/media/\";a.media?t=a.media:a.path&&(t=a.path+\"media/\");var r=void 0===a.oneBasedIndex?!0:!!a.oneBasedIndex,u=a.keyMap||Blockly.user.keyMap.createDefaultKeyMap(),v=a.renderer||\"geras\",w=a.plugins||{};this.RTL=m;this.oneBasedIndex=r;this.collapse=f;this.comments=g;this.disable=h;this.readOnly=b;this.maxBlocks=\na.maxBlocks||Infinity;this.maxInstances=a.maxInstances;this.pathToMedia=t;this.hasCategories=d;this.moveOptions=Blockly.Options.parseMoveOptions_(a,d);this.hasScrollbars=this.moveOptions.scrollbars;this.hasTrashcan=e;this.maxTrashcanContents=l;this.hasSounds=k;this.hasCss=q;this.horizontalLayout=n;this.languageTree=c;this.gridOptions=Blockly.Options.parseGridOptions_(a);this.zoomOptions=Blockly.Options.parseZoomOptions_(a);this.toolboxPosition=p;this.theme=Blockly.Options.parseThemeOptions_(a);this.keyMap=\nu;this.renderer=v;this.rendererOverrides=a.rendererOverrides;this.gridPattern=null;this.parentWorkspace=a.parentWorkspace;this.plugins=w};Blockly.BlocklyOptions=function(){};Blockly.Options.parseMoveOptions_=function(a,b){var c=a.move||{},d={};d.scrollbars=void 0===c.scrollbars&&void 0===a.scrollbars?b:!!c.scrollbars||!!a.scrollbars;d.wheel=d.scrollbars&&void 0!==c.wheel?!!c.wheel:!1;d.drag=d.scrollbars?void 0===c.drag?!0:!!c.drag:!1;return d};\nBlockly.Options.parseZoomOptions_=function(a){a=a.zoom||{};var b={};b.controls=void 0===a.controls?!1:!!a.controls;b.wheel=void 0===a.wheel?!1:!!a.wheel;b.startScale=void 0===a.startScale?1:Number(a.startScale);b.maxScale=void 0===a.maxScale?3:Number(a.maxScale);b.minScale=void 0===a.minScale?.3:Number(a.minScale);b.scaleSpeed=void 0===a.scaleSpeed?1.2:Number(a.scaleSpeed);b.pinch=void 0===a.pinch?b.wheel||b.controls:!!a.pinch;return b};\nBlockly.Options.parseGridOptions_=function(a){a=a.grid||{};var b={};b.spacing=Number(a.spacing)||0;b.colour=a.colour||\"#888\";b.length=void 0===a.length?1:Number(a.length);b.snap=0<b.spacing&&!!a.snap;return b};Blockly.Options.parseThemeOptions_=function(a){a=a.theme||Blockly.Themes.Classic;return\"string\"==typeof a?Blockly.registry.getObject(Blockly.registry.Type.THEME,a):a instanceof Blockly.Theme?a:Blockly.Theme.defineTheme(a.name||\"builtin\"+Blockly.utils.IdGenerator.getNextUniqueId(),a)};\nBlockly.Options.parseToolboxTree=function(a){Blockly.utils.deprecation.warn(\"Blockly.Options.parseToolboxTree\",\"September 2020\",\"September 2021\",\"Blockly.utils.toolbox.parseToolboxTree\");return Blockly.utils.toolbox.parseToolboxTree(a)};Blockly.Touch={};Blockly.Touch.TOUCH_ENABLED=\"ontouchstart\"in Blockly.utils.global||!!(Blockly.utils.global.document&&document.documentElement&&\"ontouchstart\"in document.documentElement)||!(!Blockly.utils.global.navigator||!Blockly.utils.global.navigator.maxTouchPoints&&!Blockly.utils.global.navigator.msMaxTouchPoints);Blockly.Touch.touchIdentifier_=null;Blockly.Touch.TOUCH_MAP={};\nBlockly.utils.global.PointerEvent?Blockly.Touch.TOUCH_MAP={mousedown:[\"pointerdown\"],mouseenter:[\"pointerenter\"],mouseleave:[\"pointerleave\"],mousemove:[\"pointermove\"],mouseout:[\"pointerout\"],mouseover:[\"pointerover\"],mouseup:[\"pointerup\",\"pointercancel\"],touchend:[\"pointerup\"],touchcancel:[\"pointercancel\"]}:Blockly.Touch.TOUCH_ENABLED&&(Blockly.Touch.TOUCH_MAP={mousedown:[\"touchstart\"],mousemove:[\"touchmove\"],mouseup:[\"touchend\",\"touchcancel\"]});Blockly.longPid_=0;\nBlockly.longStart=function(a,b){Blockly.longStop_();a.changedTouches&&1!=a.changedTouches.length||(Blockly.longPid_=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&b.handleRightClick(a)},Blockly.LONGPRESS))};Blockly.longStop_=function(){Blockly.longPid_&&(clearTimeout(Blockly.longPid_),Blockly.longPid_=0)};Blockly.Touch.clearTouchIdentifier=function(){Blockly.Touch.touchIdentifier_=null};\nBlockly.Touch.shouldHandleEvent=function(a){return!Blockly.Touch.isMouseOrTouchEvent(a)||Blockly.Touch.checkTouchIdentifier(a)};Blockly.Touch.getTouchIdentifierFromEvent=function(a){return void 0!=a.pointerId?a.pointerId:a.changedTouches&&a.changedTouches[0]&&void 0!==a.changedTouches[0].identifier&&null!==a.changedTouches[0].identifier?a.changedTouches[0].identifier:\"mouse\"};\nBlockly.Touch.checkTouchIdentifier=function(a){var b=Blockly.Touch.getTouchIdentifierFromEvent(a);return void 0!==Blockly.Touch.touchIdentifier_&&null!==Blockly.Touch.touchIdentifier_?Blockly.Touch.touchIdentifier_==b:\"mousedown\"==a.type||\"touchstart\"==a.type||\"pointerdown\"==a.type?(Blockly.Touch.touchIdentifier_=b,!0):!1};Blockly.Touch.setClientFromTouch=function(a){if(Blockly.utils.string.startsWith(a.type,\"touch\")){var b=a.changedTouches[0];a.clientX=b.clientX;a.clientY=b.clientY}};\nBlockly.Touch.isMouseOrTouchEvent=function(a){return Blockly.utils.string.startsWith(a.type,\"touch\")||Blockly.utils.string.startsWith(a.type,\"mouse\")||Blockly.utils.string.startsWith(a.type,\"pointer\")};Blockly.Touch.isTouchEvent=function(a){return Blockly.utils.string.startsWith(a.type,\"touch\")||Blockly.utils.string.startsWith(a.type,\"pointer\")};\nBlockly.Touch.splitEventByTouches=function(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};Blockly.ScrollbarPair=function(a){this.workspace_=a;this.hScroll=new Blockly.Scrollbar(a,!0,!0,\"blocklyMainWorkspaceScrollbar\");this.vScroll=new Blockly.Scrollbar(a,!1,!0,\"blocklyMainWorkspaceScrollbar\");this.corner_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,\"class\":\"blocklyScrollbarBackground\"},null);Blockly.utils.dom.insertAfter(this.corner_,a.getBubbleCanvas());this.oldHostMetrics_=null};\nBlockly.ScrollbarPair.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.corner_);this.oldHostMetrics_=this.workspace_=this.corner_=null;this.hScroll.dispose();this.hScroll=null;this.vScroll.dispose();this.vScroll=null};\nBlockly.ScrollbarPair.prototype.resize=function(){var a=this.workspace_.getMetrics();if(a){var b=!1,c=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==a.viewWidth&&this.oldHostMetrics_.viewHeight==a.viewHeight&&this.oldHostMetrics_.absoluteTop==a.absoluteTop&&this.oldHostMetrics_.absoluteLeft==a.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==a.contentWidth&&this.oldHostMetrics_.viewLeft==a.viewLeft&&this.oldHostMetrics_.contentLeft==a.contentLeft||(b=!0),this.oldHostMetrics_&&\nthis.oldHostMetrics_.contentHeight==a.contentHeight&&this.oldHostMetrics_.viewTop==a.viewTop&&this.oldHostMetrics_.contentTop==a.contentTop||(c=!0)):c=b=!0;if(b||c){try{Blockly.Events.disable(),b&&this.hScroll.resize(a),c&&this.vScroll.resize(a)}finally{Blockly.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==a.viewWidth&&this.oldHostMetrics_.absoluteLeft==a.absoluteLeft||this.corner_.setAttribute(\"x\",this.vScroll.position.x);this.oldHostMetrics_&&\nthis.oldHostMetrics_.viewHeight==a.viewHeight&&this.oldHostMetrics_.absoluteTop==a.absoluteTop||this.corner_.setAttribute(\"y\",this.hScroll.position.y);this.oldHostMetrics_=a}};Blockly.ScrollbarPair.prototype.set=function(a,b){var c={};a*=this.hScroll.ratio;b*=this.vScroll.ratio;var d=this.vScroll.scrollViewSize_;c.x=this.getRatio_(a,this.hScroll.scrollViewSize_);c.y=this.getRatio_(b,d);this.workspace_.setMetrics(c);this.hScroll.setHandlePosition(a);this.vScroll.setHandlePosition(b)};\nBlockly.ScrollbarPair.prototype.getRatio_=function(a,b){a/=b;return isNaN(a)?0:a};\nBlockly.Scrollbar=function(a,b,c,d){this.workspace_=a;this.pair_=c||!1;this.horizontal_=b;this.ratio=this.oldHostMetrics_=null;this.createDom_(d);this.position=new Blockly.utils.Coordinate(0,0);a=Blockly.Scrollbar.scrollbarThickness;b?(this.svgBackground_.setAttribute(\"height\",a),this.outerSvg_.setAttribute(\"height\",a),this.svgHandle_.setAttribute(\"height\",a-5),this.svgHandle_.setAttribute(\"y\",2.5),this.lengthAttribute_=\"width\",this.positionAttribute_=\"x\"):(this.svgBackground_.setAttribute(\"width\",\na),this.outerSvg_.setAttribute(\"width\",a),this.svgHandle_.setAttribute(\"width\",a-5),this.svgHandle_.setAttribute(\"x\",2.5),this.lengthAttribute_=\"height\",this.positionAttribute_=\"y\");this.onMouseDownBarWrapper_=Blockly.bindEventWithChecks_(this.svgBackground_,\"mousedown\",this,this.onMouseDownBar_);this.onMouseDownHandleWrapper_=Blockly.bindEventWithChecks_(this.svgHandle_,\"mousedown\",this,this.onMouseDownHandle_)};Blockly.Scrollbar.prototype.origin_=new Blockly.utils.Coordinate(0,0);\nBlockly.Scrollbar.prototype.startDragMouse_=0;Blockly.Scrollbar.prototype.scrollViewSize_=0;Blockly.Scrollbar.prototype.handleLength_=0;Blockly.Scrollbar.prototype.handlePosition_=0;Blockly.Scrollbar.prototype.isVisible_=!0;Blockly.Scrollbar.prototype.containerVisible_=!0;Blockly.Scrollbar.scrollbarThickness=15;Blockly.Touch.TOUCH_ENABLED&&(Blockly.Scrollbar.scrollbarThickness=25);\nBlockly.Scrollbar.metricsAreEquivalent_=function(a,b){return a&&b&&a.viewWidth==b.viewWidth&&a.viewHeight==b.viewHeight&&a.viewLeft==b.viewLeft&&a.viewTop==b.viewTop&&a.absoluteTop==b.absoluteTop&&a.absoluteLeft==b.absoluteLeft&&a.contentWidth==b.contentWidth&&a.contentHeight==b.contentHeight&&a.contentLeft==b.contentLeft&&a.contentTop==b.contentTop?!0:!1};\nBlockly.Scrollbar.prototype.dispose=function(){this.cleanUp_();Blockly.unbindEvent_(this.onMouseDownBarWrapper_);this.onMouseDownBarWrapper_=null;Blockly.unbindEvent_(this.onMouseDownHandleWrapper_);this.onMouseDownHandleWrapper_=null;Blockly.utils.dom.removeNode(this.outerSvg_);this.svgBackground_=this.svgGroup_=this.outerSvg_=null;this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null);this.workspace_=null};\nBlockly.Scrollbar.prototype.setHandleLength_=function(a){this.handleLength_=a;this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)};Blockly.Scrollbar.prototype.setHandlePosition=function(a){this.handlePosition_=a;this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)};\nBlockly.Scrollbar.prototype.setScrollViewSize_=function(a){this.scrollViewSize_=a;this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_);this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)};Blockly.ScrollbarPair.prototype.setContainerVisible=function(a){this.hScroll.setContainerVisible(a);this.vScroll.setContainerVisible(a)};\nBlockly.Scrollbar.prototype.setPosition=function(a,b){this.position.x=a;this.position.y=b;Blockly.utils.dom.setCssTransform(this.outerSvg_,\"translate(\"+(this.position.x+this.origin_.x)+\"px,\"+(this.position.y+this.origin_.y)+\"px)\")};Blockly.Scrollbar.prototype.resize=function(a){if(!a&&(a=this.workspace_.getMetrics(),!a))return;Blockly.Scrollbar.metricsAreEquivalent_(a,this.oldHostMetrics_)||(this.oldHostMetrics_=a,this.horizontal_?this.resizeHorizontal_(a):this.resizeVertical_(a),this.onScroll_())};\nBlockly.Scrollbar.prototype.resizeHorizontal_=function(a){this.resizeViewHorizontal(a)};Blockly.Scrollbar.prototype.resizeViewHorizontal=function(a){var b=a.viewWidth-1;this.pair_&&(b-=Blockly.Scrollbar.scrollbarThickness);this.setScrollViewSize_(Math.max(0,b));b=a.absoluteLeft+.5;this.pair_&&this.workspace_.RTL&&(b+=Blockly.Scrollbar.scrollbarThickness);this.setPosition(b,a.absoluteTop+a.viewHeight-Blockly.Scrollbar.scrollbarThickness-.5);this.resizeContentHorizontal(a)};\nBlockly.Scrollbar.prototype.resizeContentHorizontal=function(a){this.pair_||this.setVisible(this.scrollViewSize_<a.contentWidth);this.ratio=this.scrollViewSize_/a.contentWidth;if(-Infinity==this.ratio||Infinity==this.ratio||isNaN(this.ratio))this.ratio=0;this.setHandleLength_(Math.max(0,a.viewWidth*this.ratio));this.setHandlePosition(this.constrainHandle_((a.viewLeft-a.contentLeft)*this.ratio))};Blockly.Scrollbar.prototype.resizeVertical_=function(a){this.resizeViewVertical(a)};\nBlockly.Scrollbar.prototype.resizeViewVertical=function(a){var b=a.viewHeight-1;this.pair_&&(b-=Blockly.Scrollbar.scrollbarThickness);this.setScrollViewSize_(Math.max(0,b));b=a.absoluteLeft+.5;this.workspace_.RTL||(b+=a.viewWidth-Blockly.Scrollbar.scrollbarThickness-1);this.setPosition(b,a.absoluteTop+.5);this.resizeContentVertical(a)};\nBlockly.Scrollbar.prototype.resizeContentVertical=function(a){this.pair_||this.setVisible(this.scrollViewSize_<a.contentHeight);this.ratio=this.scrollViewSize_/a.contentHeight;if(-Infinity==this.ratio||Infinity==this.ratio||isNaN(this.ratio))this.ratio=0;this.setHandleLength_(Math.max(0,a.viewHeight*this.ratio));this.setHandlePosition(this.constrainHandle_((a.viewTop-a.contentTop)*this.ratio))};\nBlockly.Scrollbar.prototype.createDom_=function(a){var b=\"blocklyScrollbar\"+(this.horizontal_?\"Horizontal\":\"Vertical\");a&&(b+=\" \"+a);this.outerSvg_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{\"class\":b},null);this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},this.outerSvg_);this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyScrollbarBackground\"},this.svgGroup_);a=Math.floor((Blockly.Scrollbar.scrollbarThickness-5)/2);\nthis.svgHandle_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyScrollbarHandle\",rx:a,ry:a},this.svgGroup_);this.workspace_.getThemeManager().subscribe(this.svgHandle_,\"scrollbarColour\",\"fill\");this.workspace_.getThemeManager().subscribe(this.svgHandle_,\"scrollbarOpacity\",\"fill-opacity\");Blockly.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())};Blockly.Scrollbar.prototype.isVisible=function(){return this.isVisible_};\nBlockly.Scrollbar.prototype.setContainerVisible=function(a){var b=a!=this.containerVisible_;this.containerVisible_=a;b&&this.updateDisplay_()};Blockly.Scrollbar.prototype.setVisible=function(a){var b=a!=this.isVisible();if(this.pair_)throw Error(\"Unable to toggle visibility of paired scrollbars.\");this.isVisible_=a;b&&this.updateDisplay_()};\nBlockly.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute(\"display\",\"block\"):this.outerSvg_.setAttribute(\"display\",\"none\")};\nBlockly.Scrollbar.prototype.onMouseDownBar_=function(a){this.workspace_.markFocused();Blockly.Touch.clearTouchIdentifier();this.cleanUp_();if(Blockly.utils.isRightButton(a))a.stopPropagation();else{var b=Blockly.utils.mouseToSvg(a,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());b=this.horizontal_?b.x:b.y;var c=Blockly.utils.getInjectionDivXY_(this.svgHandle_);c=this.horizontal_?c.x:c.y;var d=this.handlePosition_,e=.95*this.handleLength_;b<=c?d-=e:b>=c+this.handleLength_&&(d+=\ne);this.setHandlePosition(this.constrainHandle_(d));this.onScroll_();a.stopPropagation();a.preventDefault()}};\nBlockly.Scrollbar.prototype.onMouseDownHandle_=function(a){this.workspace_.markFocused();this.cleanUp_();Blockly.utils.isRightButton(a)?a.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?a.clientX:a.clientY,Blockly.Scrollbar.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,\"mouseup\",this,this.onMouseUpHandle_),Blockly.Scrollbar.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,\"mousemove\",this,this.onMouseMoveHandle_),\na.stopPropagation(),a.preventDefault())};Blockly.Scrollbar.prototype.onMouseMoveHandle_=function(a){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?a.clientX:a.clientY)-this.startDragMouse_)));this.onScroll_()};Blockly.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface();Blockly.Touch.clearTouchIdentifier();this.cleanUp_()};\nBlockly.Scrollbar.prototype.cleanUp_=function(){Blockly.hideChaff(!0);Blockly.Scrollbar.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_),Blockly.Scrollbar.onMouseUpWrapper_=null);Blockly.Scrollbar.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_),Blockly.Scrollbar.onMouseMoveWrapper_=null)};\nBlockly.Scrollbar.prototype.constrainHandle_=function(a){return a=0>=a||isNaN(a)||this.scrollViewSize_<this.handleLength_?0:Math.min(a,this.scrollViewSize_-this.handleLength_)};Blockly.Scrollbar.prototype.onScroll_=function(){var a=this.handlePosition_/this.scrollViewSize_;isNaN(a)&&(a=0);var b={};this.horizontal_?b.x=a:b.y=a;this.workspace_.setMetrics(b)};Blockly.Scrollbar.prototype.set=function(a){this.setHandlePosition(this.constrainHandle_(a*this.ratio));this.onScroll_()};\nBlockly.Scrollbar.prototype.setOrigin=function(a,b){this.origin_=new Blockly.utils.Coordinate(a,b)};Blockly.Tooltip={};Blockly.Tooltip.visible=!1;Blockly.Tooltip.blocked_=!1;Blockly.Tooltip.LIMIT=50;Blockly.Tooltip.mouseOutPid_=0;Blockly.Tooltip.showPid_=0;Blockly.Tooltip.lastX_=0;Blockly.Tooltip.lastY_=0;Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.OFFSET_X=0;Blockly.Tooltip.OFFSET_Y=10;Blockly.Tooltip.RADIUS_OK=10;Blockly.Tooltip.HOVER_MS=750;Blockly.Tooltip.MARGINS=5;Blockly.Tooltip.DIV=null;\nBlockly.Tooltip.getTooltipOfObject=function(a){if(a=Blockly.Tooltip.getTargetObject_(a)){for(a=a.tooltip;\"function\"==typeof a;)a=a();if(\"string\"!=typeof a)throw Error(\"Tooltip function must return a string.\");return a}return\"\"};Blockly.Tooltip.getTargetObject_=function(a){for(;a&&a.tooltip;){if(\"string\"==typeof a.tooltip||\"function\"==typeof a.tooltip)return a;a=a.tooltip}return null};\nBlockly.Tooltip.createDom=function(){Blockly.Tooltip.DIV||(Blockly.Tooltip.DIV=document.createElement(\"div\"),Blockly.Tooltip.DIV.className=\"blocklyTooltipDiv\",(Blockly.parentContainer||document.body).appendChild(Blockly.Tooltip.DIV))};\nBlockly.Tooltip.bindMouseEvents=function(a){a.mouseOverWrapper_=Blockly.bindEvent_(a,\"mouseover\",null,Blockly.Tooltip.onMouseOver_);a.mouseOutWrapper_=Blockly.bindEvent_(a,\"mouseout\",null,Blockly.Tooltip.onMouseOut_);a.addEventListener(\"mousemove\",Blockly.Tooltip.onMouseMove_,!1)};Blockly.Tooltip.unbindMouseEvents=function(a){a&&(Blockly.unbindEvent_(a.mouseOverWrapper_),Blockly.unbindEvent_(a.mouseOutWrapper_),a.removeEventListener(\"mousemove\",Blockly.Tooltip.onMouseMove_))};\nBlockly.Tooltip.onMouseOver_=function(a){Blockly.Tooltip.blocked_||(a=Blockly.Tooltip.getTargetObject_(a.currentTarget),Blockly.Tooltip.element_!=a&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=a),clearTimeout(Blockly.Tooltip.mouseOutPid_))};Blockly.Tooltip.onMouseOut_=function(a){Blockly.Tooltip.blocked_||(Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.hide()},1),clearTimeout(Blockly.Tooltip.showPid_))};\nBlockly.Tooltip.onMouseMove_=function(a){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!Blockly.Tooltip.blocked_)if(Blockly.Tooltip.visible){var b=Blockly.Tooltip.lastX_-a.pageX;a=Blockly.Tooltip.lastY_-a.pageY;Math.sqrt(b*b+a*a)>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=a.pageX,Blockly.Tooltip.lastY_=a.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,\nBlockly.Tooltip.HOVER_MS))};Blockly.Tooltip.dispose=function(){Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null;Blockly.Tooltip.hide()};Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV&&(Blockly.Tooltip.DIV.style.display=\"none\"));Blockly.Tooltip.showPid_&&clearTimeout(Blockly.Tooltip.showPid_)};Blockly.Tooltip.block=function(){Blockly.Tooltip.hide();Blockly.Tooltip.blocked_=!0};\nBlockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1};\nBlockly.Tooltip.show_=function(){if(!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV)){Blockly.Tooltip.DIV.textContent=\"\";var a=Blockly.Tooltip.getTooltipOfObject(Blockly.Tooltip.element_);a=Blockly.utils.string.wrap(a,Blockly.Tooltip.LIMIT);a=a.split(\"\\n\");for(var b=0;b<a.length;b++){var c=document.createElement(\"div\");c.appendChild(document.createTextNode(a[b]));Blockly.Tooltip.DIV.appendChild(c)}a=Blockly.Tooltip.element_.RTL;b=document.documentElement.clientWidth;\nc=document.documentElement.clientHeight;Blockly.Tooltip.DIV.style.direction=a?\"rtl\":\"ltr\";Blockly.Tooltip.DIV.style.display=\"block\";Blockly.Tooltip.visible=!0;var d=Blockly.Tooltip.lastX_;d=a?d-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):d+Blockly.Tooltip.OFFSET_X;var e=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;e+Blockly.Tooltip.DIV.offsetHeight>c+window.scrollY&&(e-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y);a?d=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,\nd):d+Blockly.Tooltip.DIV.offsetWidth>b+window.scrollX-2*Blockly.Tooltip.MARGINS&&(d=b-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS);Blockly.Tooltip.DIV.style.top=e+\"px\";Blockly.Tooltip.DIV.style.left=d+\"px\"}};Blockly.WorkspaceDragSurfaceSvg=function(a){this.container_=a;this.createDom()};Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null;Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null;\nBlockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,\"xmlns:html\":Blockly.utils.dom.HTML_NS,\"xmlns:xlink\":Blockly.utils.dom.XLINK_NS,version:\"1.1\",\"class\":\"blocklyWsDragSurface blocklyOverflowVisible\"},null),this.container_.appendChild(this.SVG_))};\nBlockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.SVG_.style.display=\"block\";Blockly.utils.dom.setCssTransform(this.SVG_,\"translate3d(\"+a+\"px, \"+b+\"px, 0px)\")};Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)};\nBlockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(a){if(!a)throw Error(\"Couldn't clear and hide the drag surface: missing new surface.\");var b=this.SVG_.childNodes[0],c=this.SVG_.childNodes[1];if(!(b&&c&&Blockly.utils.dom.hasClass(b,\"blocklyBlockCanvas\")&&Blockly.utils.dom.hasClass(c,\"blocklyBubbleCanvas\")))throw Error(\"Couldn't clear and hide the drag surface. A node was missing.\");null!=this.previousSibling_?Blockly.utils.dom.insertAfter(b,this.previousSibling_):a.insertBefore(b,a.firstChild);\nBlockly.utils.dom.insertAfter(c,b);this.SVG_.style.display=\"none\";if(this.SVG_.childNodes.length)throw Error(\"Drag surface was not cleared.\");Blockly.utils.dom.setCssTransform(this.SVG_,\"\");this.previousSibling_=null};\nBlockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(a,b,c,d,e,f){if(this.SVG_.childNodes.length)throw Error(\"Already dragging a block.\");this.previousSibling_=c;a.setAttribute(\"transform\",\"translate(0, 0) scale(\"+f+\")\");b.setAttribute(\"transform\",\"translate(0, 0) scale(\"+f+\")\");this.SVG_.setAttribute(\"width\",d);this.SVG_.setAttribute(\"height\",e);this.SVG_.appendChild(a);this.SVG_.appendChild(b);this.SVG_.style.display=\"block\"};Blockly.ASTNode=function(a,b,c){if(!b)throw Error(\"Cannot create a node without a location.\");this.type_=a;this.isConnection_=Blockly.ASTNode.isConnectionType_(a);this.location_=b;this.wsCoordinate_=null;this.processParams_(c||null)};Blockly.ASTNode.types={FIELD:\"field\",BLOCK:\"block\",INPUT:\"input\",OUTPUT:\"output\",NEXT:\"next\",PREVIOUS:\"previous\",STACK:\"stack\",WORKSPACE:\"workspace\"};Blockly.ASTNode.NAVIGATE_ALL_FIELDS=!1;Blockly.ASTNode.DEFAULT_OFFSET_Y=-20;Blockly.ASTNode.isConnectionType_=function(a){switch(a){case Blockly.ASTNode.types.PREVIOUS:case Blockly.ASTNode.types.NEXT:case Blockly.ASTNode.types.INPUT:case Blockly.ASTNode.types.OUTPUT:return!0}return!1};\nBlockly.ASTNode.createFieldNode=function(a){return a?new Blockly.ASTNode(Blockly.ASTNode.types.FIELD,a):null};\nBlockly.ASTNode.createConnectionNode=function(a){return a?a.type==Blockly.INPUT_VALUE||a.type==Blockly.NEXT_STATEMENT&&a.getParentInput()?Blockly.ASTNode.createInputNode(a.getParentInput()):a.type==Blockly.NEXT_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.NEXT,a):a.type==Blockly.OUTPUT_VALUE?new Blockly.ASTNode(Blockly.ASTNode.types.OUTPUT,a):a.type==Blockly.PREVIOUS_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.PREVIOUS,a):null:null};\nBlockly.ASTNode.createInputNode=function(a){return a&&a.connection?new Blockly.ASTNode(Blockly.ASTNode.types.INPUT,a.connection):null};Blockly.ASTNode.createBlockNode=function(a){return a?new Blockly.ASTNode(Blockly.ASTNode.types.BLOCK,a):null};Blockly.ASTNode.createStackNode=function(a){return a?new Blockly.ASTNode(Blockly.ASTNode.types.STACK,a):null};Blockly.ASTNode.createWorkspaceNode=function(a,b){return b&&a?new Blockly.ASTNode(Blockly.ASTNode.types.WORKSPACE,a,{wsCoordinate:b}):null};\nBlockly.ASTNode.createTopNode=function(a){var b=a.previousConnection||a.outputConnection;return b?Blockly.ASTNode.createConnectionNode(b):Blockly.ASTNode.createBlockNode(a)};Blockly.ASTNode.prototype.processParams_=function(a){a&&a.wsCoordinate&&(this.wsCoordinate_=a.wsCoordinate)};Blockly.ASTNode.prototype.getLocation=function(){return this.location_};Blockly.ASTNode.prototype.getType=function(){return this.type_};Blockly.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_};\nBlockly.ASTNode.prototype.isConnection=function(){return this.isConnection_};Blockly.ASTNode.prototype.findNextForInput_=function(){var a=this.location_.getParentInput(),b=a.getSourceBlock();a=b.inputList.indexOf(a)+1;for(var c;c=b.inputList[a];a++){for(var d=c.fieldRow,e=0,f;f=d[e];e++)if(f.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(f);if(c.connection)return Blockly.ASTNode.createInputNode(c)}return null};\nBlockly.ASTNode.prototype.findNextForField_=function(){var a=this.location_,b=a.getParentInput(),c=a.getSourceBlock(),d=c.inputList.indexOf(b);for(a=b.fieldRow.indexOf(a)+1;b=c.inputList[d];d++){for(var e=b.fieldRow;a<e.length;){if(e[a].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(e[a]);a++}a=0;if(b.connection)return Blockly.ASTNode.createInputNode(b)}return null};\nBlockly.ASTNode.prototype.findPrevForInput_=function(){for(var a=this.location_.getParentInput(),b=a.getSourceBlock(),c=b.inputList.indexOf(a),d;d=b.inputList[c];c--){if(d.connection&&d!==a)return Blockly.ASTNode.createInputNode(d);d=d.fieldRow;for(var e=d.length-1,f;f=d[e];e--)if(f.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(f)}return null};\nBlockly.ASTNode.prototype.findPrevForField_=function(){var a=this.location_,b=a.getParentInput(),c=a.getSourceBlock(),d=c.inputList.indexOf(b);a=b.fieldRow.indexOf(a)-1;for(var e;e=c.inputList[d];d--){if(e.connection&&e!==b)return Blockly.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<a;){if(e[a].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(e[a]);a--}0<=d-1&&(a=c.inputList[d-1].fieldRow.length-1)}return null};\nBlockly.ASTNode.prototype.navigateBetweenStacks_=function(a){var b=this.getLocation();b instanceof Blockly.Block||(b=b.getSourceBlock());if(!b||!b.workspace)return null;var c=b.getRootBlock();b=c.workspace.getTopBlocks(!0);for(var d=0,e;e=b[d];d++)if(c.id==e.id)return a=d+(a?1:-1),-1==a||a==b.length?null:Blockly.ASTNode.createStackNode(b[a]);throw Error(\"Couldn't find \"+(a?\"next\":\"previous\")+\" stack?!\");};\nBlockly.ASTNode.prototype.findTopASTNodeForBlock_=function(a){var b=a.previousConnection||a.outputConnection;return b?Blockly.ASTNode.createConnectionNode(b):Blockly.ASTNode.createBlockNode(a)};Blockly.ASTNode.prototype.getOutAstNodeForBlock_=function(a){if(!a)return null;a=a.getTopStackBlock();var b=a.previousConnection||a.outputConnection;return b&&b.targetConnection&&b.targetConnection.getParentInput()?Blockly.ASTNode.createInputNode(b.targetConnection.getParentInput()):Blockly.ASTNode.createStackNode(a)};\nBlockly.ASTNode.prototype.findFirstFieldOrInput_=function(a){a=a.inputList;for(var b=0,c;c=a[b];b++){for(var d=c.fieldRow,e=0,f;f=d[e];e++)if(f.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(f);if(c.connection)return Blockly.ASTNode.createInputNode(c)}return null};\nBlockly.ASTNode.prototype.getSourceBlock=function(){return this.getType()===Blockly.ASTNode.types.BLOCK?this.getLocation():this.getType()===Blockly.ASTNode.types.STACK?this.getLocation():this.getType()===Blockly.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()};\nBlockly.ASTNode.prototype.next=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case Blockly.ASTNode.types.OUTPUT:var a=this.location_;return Blockly.ASTNode.createBlockNode(a.getSourceBlock());case Blockly.ASTNode.types.FIELD:return this.findNextForField_();case Blockly.ASTNode.types.INPUT:return this.findNextForInput_();case Blockly.ASTNode.types.BLOCK:return Blockly.ASTNode.createConnectionNode(this.location_.nextConnection);case Blockly.ASTNode.types.PREVIOUS:return a=\nthis.location_,Blockly.ASTNode.createBlockNode(a.getSourceBlock());case Blockly.ASTNode.types.NEXT:return a=this.location_,Blockly.ASTNode.createConnectionNode(a.targetConnection)}return null};\nBlockly.ASTNode.prototype.in=function(){switch(this.type_){case Blockly.ASTNode.types.WORKSPACE:var a=this.location_.getTopBlocks(!0);if(0<a.length)return Blockly.ASTNode.createStackNode(a[0]);break;case Blockly.ASTNode.types.STACK:return a=this.location_,this.findTopASTNodeForBlock_(a);case Blockly.ASTNode.types.BLOCK:return a=this.location_,this.findFirstFieldOrInput_(a);case Blockly.ASTNode.types.INPUT:return Blockly.ASTNode.createConnectionNode(this.location_.targetConnection)}return null};\nBlockly.ASTNode.prototype.prev=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case Blockly.ASTNode.types.FIELD:return this.findPrevForField_();case Blockly.ASTNode.types.INPUT:return this.findPrevForInput_();case Blockly.ASTNode.types.BLOCK:var a=this.location_;return Blockly.ASTNode.createConnectionNode(a.previousConnection||a.outputConnection);case Blockly.ASTNode.types.PREVIOUS:a=this.location_;if((a=a.targetConnection)&&!a.getParentInput())return Blockly.ASTNode.createConnectionNode(a);\nbreak;case Blockly.ASTNode.types.NEXT:return a=this.location_,Blockly.ASTNode.createBlockNode(a.getSourceBlock())}return null};\nBlockly.ASTNode.prototype.out=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:var a=this.location_,b=a.getRelativeToSurfaceXY();b=new Blockly.utils.Coordinate(b.x,b.y+Blockly.ASTNode.DEFAULT_OFFSET_Y);return Blockly.ASTNode.createWorkspaceNode(a.workspace,b);case Blockly.ASTNode.types.OUTPUT:return a=this.location_,(b=a.targetConnection)?Blockly.ASTNode.createConnectionNode(b):Blockly.ASTNode.createStackNode(a.getSourceBlock());case Blockly.ASTNode.types.FIELD:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());\ncase Blockly.ASTNode.types.INPUT:return a=this.location_,Blockly.ASTNode.createBlockNode(a.getSourceBlock());case Blockly.ASTNode.types.BLOCK:return a=this.location_,this.getOutAstNodeForBlock_(a);case Blockly.ASTNode.types.PREVIOUS:return a=this.location_,this.getOutAstNodeForBlock_(a.getSourceBlock());case Blockly.ASTNode.types.NEXT:return a=this.location_,this.getOutAstNodeForBlock_(a.getSourceBlock())}return null};Blockly.Blocks=Object.create(null);Blockly.utils.deprecation={};Blockly.utils.deprecation.warn=function(a,b,c,d){a=a+\" was deprecated on \"+b+\" and will be deleted on \"+c+\".\";d&&(a+=\"\\nUse \"+d+\" instead.\");console.warn(a)};Blockly.Connection=function(a,b){this.sourceBlock_=a;this.type=b};Blockly.Connection.CAN_CONNECT=0;Blockly.Connection.REASON_SELF_CONNECTION=1;Blockly.Connection.REASON_WRONG_TYPE=2;Blockly.Connection.REASON_TARGET_NULL=3;Blockly.Connection.REASON_CHECKS_FAILED=4;Blockly.Connection.REASON_DIFFERENT_WORKSPACES=5;Blockly.Connection.REASON_SHADOW_PARENT=6;Blockly.Connection.REASON_DRAG_CHECKS_FAILED=7;Blockly.Connection.prototype.targetConnection=null;Blockly.Connection.prototype.disposed=!1;\nBlockly.Connection.prototype.check_=null;Blockly.Connection.prototype.shadowDom_=null;Blockly.Connection.prototype.x=0;Blockly.Connection.prototype.y=0;\nBlockly.Connection.prototype.connect_=function(a){var b=this,c=b.getSourceBlock(),d=a.getSourceBlock();a.isConnected()&&a.disconnect();if(b.isConnected()){var e=b.targetBlock(),f=b.getShadowDom();b.shadowDom_=null;if(e.isShadow())f=Blockly.Xml.blockToDom(e),e.dispose(!1),e=null;else if(b.type==Blockly.INPUT_VALUE){if(!e.outputConnection)throw Error(\"Orphan block does not have an output connection.\");var g=Blockly.Connection.lastConnectionInRow(d,e);g&&(e.outputConnection.connect(g),e=null)}else if(b.type==\nBlockly.NEXT_STATEMENT){if(!e.previousConnection)throw Error(\"Orphan block does not have a previous connection.\");for(g=d;g.nextConnection;){var h=g.getNextBlock();if(h&&!h.isShadow())g=h;else{e.workspace.connectionChecker.canConnect(e.previousConnection,g.nextConnection,!1)&&(g.nextConnection.connect(e.previousConnection),e=null);break}}}if(e&&(b.disconnect(),Blockly.Events.recordUndo)){var k=Blockly.Events.getGroup();setTimeout(function(){if(e.workspace&&!e.getParent()){Blockly.Events.setGroup(k);\nif(e.outputConnection)e.outputConnection.onFailedConnect(b);else if(e.previousConnection)e.previousConnection.onFailedConnect(b);Blockly.Events.setGroup(!1)}},Blockly.BUMP_DELAY)}b.shadowDom_=f}var l;Blockly.Events.isEnabled()&&(l=new Blockly.Events.BlockMove(d));Blockly.Connection.connectReciprocally_(b,a);d.setParent(c);l&&(l.recordNew(),Blockly.Events.fire(l))};\nBlockly.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var a=this.targetBlock();a&&a.unplug()}this.disposed=!0};Blockly.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_};Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT};Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection};\nBlockly.Connection.prototype.canConnectWithReason=function(a){Blockly.utils.deprecation.warn(\"Connection.prototype.canConnectWithReason\",\"July 2020\",\"July 2021\",\"the workspace's connection checker\");return this.getConnectionChecker().canConnectWithReason(this,a,!1)};\nBlockly.Connection.prototype.checkConnection=function(a){Blockly.utils.deprecation.warn(\"Connection.prototype.checkConnection\",\"July 2020\",\"July 2021\",\"the workspace's connection checker\");var b=this.getConnectionChecker(),c=b.canConnectWithReason(this,a,!1);if(c!=Blockly.Connection.CAN_CONNECT)throw Error(b.getErrorMessage(c,this,a));};Blockly.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker};\nBlockly.Connection.prototype.isConnectionAllowed=function(a){Blockly.utils.deprecation.warn(\"Connection.prototype.isConnectionAllowed\",\"July 2020\",\"July 2021\",\"the workspace's connection checker\");return this.getConnectionChecker().canConnect(this,a,!0)};Blockly.Connection.prototype.onFailedConnect=function(a){};\nBlockly.Connection.prototype.connect=function(a){if(this.targetConnection!=a&&this.getConnectionChecker().canConnect(this,a,!1)){var b=Blockly.Events.getGroup();b||Blockly.Events.setGroup(!0);this.isSuperior()?this.connect_(a):a.connect_(this);b||Blockly.Events.setGroup(!1)}};Blockly.Connection.connectReciprocally_=function(a,b){if(!a||!b)throw Error(\"Cannot connect null connections.\");a.targetConnection=b;b.targetConnection=a};\nBlockly.Connection.singleConnection_=function(a,b){var c=null;b=b.outputConnection;for(var d=0;d<a.inputList.length;d++){var e=a.inputList[d].connection,f=b.getConnectionChecker();if(e&&e.type==Blockly.INPUT_VALUE&&f.canConnect(b,e,!1)){if(c)return null;c=e}}return c};Blockly.Connection.lastConnectionInRow=function(a,b){for(var c;c=Blockly.Connection.singleConnection_(a,b);)if(a=c.targetBlock(),!a||a.isShadow())return c;return null};\nBlockly.Connection.prototype.disconnect=function(){var a=this.targetConnection;if(!a)throw Error(\"Source connection not connected.\");if(a.targetConnection!=this)throw Error(\"Target connection not connected to source connection.\");if(this.isSuperior()){var b=this.sourceBlock_;var c=a.getSourceBlock();a=this}else b=a.getSourceBlock(),c=this.sourceBlock_;var d=Blockly.Events.getGroup();d||Blockly.Events.setGroup(!0);this.disconnectInternal_(b,c);c.isShadow()||a.respawnShadow_();d||Blockly.Events.setGroup(!1)};\nBlockly.Connection.prototype.disconnectInternal_=function(a,b){var c;Blockly.Events.isEnabled()&&(c=new Blockly.Events.BlockMove(b));this.targetConnection=this.targetConnection.targetConnection=null;b.setParent(null);c&&(c.recordNew(),Blockly.Events.fire(c))};\nBlockly.Connection.prototype.respawnShadow_=function(){var a=this.getSourceBlock(),b=this.getShadowDom();if(a.workspace&&b)if(a=Blockly.Xml.domToBlock(b,a.workspace),a.outputConnection)this.connect(a.outputConnection);else if(a.previousConnection)this.connect(a.previousConnection);else throw Error(\"Child block does not have output or previous statement.\");};Blockly.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null};\nBlockly.Connection.prototype.checkType=function(a){Blockly.utils.deprecation.warn(\"Connection.prototype.checkType\",\"October 2019\",\"January 2021\",\"the workspace's connection checker\");return this.getConnectionChecker().canConnect(this,a,!1)};Blockly.Connection.prototype.checkType_=function(a){Blockly.utils.deprecation.warn(\"Connection.prototype.checkType_\",\"October 2019\",\"January 2021\",\"the workspace's connection checker\");return this.checkType(a)};\nBlockly.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()};Blockly.Connection.prototype.setCheck=function(a){a?(Array.isArray(a)||(a=[a]),this.check_=a,this.onCheckChanged_()):this.check_=null;return this};Blockly.Connection.prototype.getCheck=function(){return this.check_};\nBlockly.Connection.prototype.setShadowDom=function(a){this.shadowDom_=a;a=this.targetBlock();a?a.isShadow()&&(a.dispose(!1),this.respawnShadow_()):this.respawnShadow_()};Blockly.Connection.prototype.getShadowDom=function(){return this.shadowDom_};Blockly.Connection.prototype.neighbours=function(a){return[]};Blockly.Connection.prototype.getParentInput=function(){for(var a=null,b=this.sourceBlock_,c=b.inputList,d=0;d<b.inputList.length;d++)if(c[d].connection===this){a=c[d];break}return a};\nBlockly.Connection.prototype.toString=function(){var a=this.sourceBlock_;if(a)if(a.outputConnection==this)var b=\"Output Connection of \";else if(a.previousConnection==this)b=\"Previous Connection of \";else if(a.nextConnection==this)b=\"Next Connection of \";else{b=null;for(var c=0,d;d=a.inputList[c];c++)if(d.connection==this){b=d;break}if(b)b='Input \"'+b.name+'\" connection on ';else return console.warn(\"Connection not actually connected to sourceBlock_\"),\"Orphan Connection\"}else return\"Orphan Connection\";\nreturn b+a.toDevString()};Blockly.Extensions={};Blockly.Extensions.ALL_={};Blockly.Extensions.register=function(a,b){if(\"string\"!=typeof a||\"\"==a.trim())throw Error('Error: Invalid extension name \"'+a+'\"');if(Blockly.Extensions.ALL_[a])throw Error('Error: Extension \"'+a+'\" is already registered.');if(\"function\"!=typeof b)throw Error('Error: Extension \"'+a+'\" must be a function');Blockly.Extensions.ALL_[a]=b};\nBlockly.Extensions.registerMixin=function(a,b){if(!b||\"object\"!=typeof b)throw Error('Error: Mixin \"'+a+'\" must be a object');Blockly.Extensions.register(a,function(){this.mixin(b)})};\nBlockly.Extensions.registerMutator=function(a,b,c,d){var e='Error when registering mutator \"'+a+'\": ';Blockly.Extensions.checkHasFunction_(e,b.domToMutation,\"domToMutation\");Blockly.Extensions.checkHasFunction_(e,b.mutationToDom,\"mutationToDom\");var f=Blockly.Extensions.checkMutatorDialog_(b,e);if(c&&\"function\"!=typeof c)throw Error('Extension \"'+a+'\" is not a function');Blockly.Extensions.register(a,function(){if(f){if(!Blockly.Mutator)throw Error(e+\"Missing require for Blockly.Mutator\");this.setMutator(new Blockly.Mutator(d||\n[]))}this.mixin(b);c&&c.apply(this)})};Blockly.Extensions.unregister=function(a){Blockly.Extensions.ALL_[a]?delete Blockly.Extensions.ALL_[a]:console.warn('No extension mapping for name \"'+a+'\" found to unregister')};\nBlockly.Extensions.apply=function(a,b,c){var d=Blockly.Extensions.ALL_[a];if(\"function\"!=typeof d)throw Error('Error: Extension \"'+a+'\" not found.');if(c)Blockly.Extensions.checkNoMutatorProperties_(a,b);else var e=Blockly.Extensions.getMutatorProperties_(b);d.apply(b);if(c)Blockly.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator \"'+a+'\": ',b);else if(!Blockly.Extensions.mutatorPropertiesMatch_(e,b))throw Error('Error when applying extension \"'+a+'\": mutation properties changed when applying a non-mutator extension.');\n};Blockly.Extensions.checkHasFunction_=function(a,b,c){if(!b)throw Error(a+'missing required property \"'+c+'\"');if(\"function\"!=typeof b)throw Error(a+'\" required property \"'+c+'\" must be a function');};Blockly.Extensions.checkNoMutatorProperties_=function(a,b){if(Blockly.Extensions.getMutatorProperties_(b).length)throw Error('Error: tried to apply mutation \"'+a+'\" to a block that already has mutator functions.  Block id: '+b.id);};\nBlockly.Extensions.checkMutatorDialog_=function(a,b){var c=void 0!==a.compose,d=void 0!==a.decompose;if(c&&d){if(\"function\"!=typeof a.compose)throw Error(b+\"compose must be a function.\");if(\"function\"!=typeof a.decompose)throw Error(b+\"decompose must be a function.\");return!0}if(c||d)throw Error(b+'Must have both or neither of \"compose\" and \"decompose\"');return!1};\nBlockly.Extensions.checkBlockHasMutatorProperties_=function(a,b){if(\"function\"!=typeof b.domToMutation)throw Error(a+'Applying a mutator didn\\'t add \"domToMutation\"');if(\"function\"!=typeof b.mutationToDom)throw Error(a+'Applying a mutator didn\\'t add \"mutationToDom\"');Blockly.Extensions.checkMutatorDialog_(b,a)};\nBlockly.Extensions.getMutatorProperties_=function(a){var b=[];void 0!==a.domToMutation&&b.push(a.domToMutation);void 0!==a.mutationToDom&&b.push(a.mutationToDom);void 0!==a.compose&&b.push(a.compose);void 0!==a.decompose&&b.push(a.decompose);return b};Blockly.Extensions.mutatorPropertiesMatch_=function(a,b){b=Blockly.Extensions.getMutatorProperties_(b);if(b.length!=a.length)return!1;for(var c=0;c<b.length;c++)if(a[c]!=b[c])return!1;return!0};\nBlockly.Extensions.buildTooltipForDropdown=function(a,b){var c=[];\"object\"==typeof document&&Blockly.utils.runAfterPageLoad(function(){for(var d in b)Blockly.utils.checkMessageReferences(b[d])});return function(){this.type&&-1==c.indexOf(this.type)&&(Blockly.Extensions.checkDropdownOptionsInTable_(this,a,b),c.push(this.type));this.setTooltip(function(){var d=String(this.getFieldValue(a)),e=b[d];null==e?-1==c.indexOf(this.type)&&(d=\"No tooltip mapping for value \"+d+\" of field \"+a,null!=this.type&&\n(d+=\" of block type \"+this.type),console.warn(d+\".\")):e=Blockly.utils.replaceMessageReferences(e);return e}.bind(this))}};Blockly.Extensions.checkDropdownOptionsInTable_=function(a,b,c){var d=a.getField(b);if(!d.isOptionListDynamic()){d=d.getOptions();for(var e=0;e<d.length;++e){var f=d[e][1];null==c[f]&&console.warn(\"No tooltip mapping for value \"+f+\" of field \"+b+\" of block type \"+a.type)}}};\nBlockly.Extensions.buildTooltipWithFieldText=function(a,b){\"object\"==typeof document&&Blockly.utils.runAfterPageLoad(function(){Blockly.utils.checkMessageReferences(a)});return function(){this.setTooltip(function(){var c=this.getField(b);return Blockly.utils.replaceMessageReferences(a).replace(\"%1\",c?c.getText():\"\")}.bind(this))}};\nBlockly.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip;this.setTooltip(function(){var a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||this.tooltipWhenNotConnected_}.bind(this))};Blockly.Extensions.register(\"parent_tooltip_when_inline\",Blockly.Extensions.extensionParentTooltip_);Blockly.fieldRegistry={};Blockly.fieldRegistry.register=function(a,b){Blockly.registry.register(Blockly.registry.Type.FIELD,a,b)};Blockly.fieldRegistry.unregister=function(a){Blockly.registry.unregister(Blockly.registry.Type.FIELD,a)};\nBlockly.fieldRegistry.fromJson=function(a){var b=Blockly.registry.getObject(Blockly.registry.Type.FIELD,a.type);return b?b.fromJson(a):(console.warn(\"Blockly could not create a field of type \"+a.type+\". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached.\"),null)};Blockly.blockAnimations={};Blockly.blockAnimations.disconnectPid_=0;Blockly.blockAnimations.disconnectGroup_=null;Blockly.blockAnimations.disposeUiEffect=function(a){var b=a.workspace,c=a.getSvgRoot();b.getAudioManager().play(\"delete\");a=b.getSvgXY(c);c=c.cloneNode(!0);c.translateX_=a.x;c.translateY_=a.y;c.setAttribute(\"transform\",\"translate(\"+a.x+\",\"+a.y+\")\");b.getParentSvg().appendChild(c);c.bBox_=c.getBBox();Blockly.blockAnimations.disposeUiStep_(c,b.RTL,new Date,b.scale)};\nBlockly.blockAnimations.disposeUiStep_=function(a,b,c,d){var e=(new Date-c)/150;1<e?Blockly.utils.dom.removeNode(a):(a.setAttribute(\"transform\",\"translate(\"+(a.translateX_+(b?-1:1)*a.bBox_.width*d/2*e)+\",\"+(a.translateY_+a.bBox_.height*d*e)+\") scale(\"+(1-e)*d+\")\"),setTimeout(Blockly.blockAnimations.disposeUiStep_,10,a,b,c,d))};\nBlockly.blockAnimations.connectionUiEffect=function(a){var b=a.workspace,c=b.scale;b.getAudioManager().play(\"click\");if(!(1>c)){var d=b.getSvgXY(a.getSvgRoot());a.outputConnection?(d.x+=(a.RTL?3:-3)*c,d.y+=13*c):a.previousConnection&&(d.x+=(a.RTL?-23:23)*c,d.y+=3*c);a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:\"none\",stroke:\"#888\",\"stroke-width\":10},b.getParentSvg());Blockly.blockAnimations.connectionUiStep_(a,new Date,c)}};\nBlockly.blockAnimations.connectionUiStep_=function(a,b,c){var d=(new Date-b)/150;1<d?Blockly.utils.dom.removeNode(a):(a.setAttribute(\"r\",25*d*c),a.style.opacity=1-d,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.connectionUiStep_,10,a,b,c))};\nBlockly.blockAnimations.disconnectUiEffect=function(a){a.workspace.getAudioManager().play(\"disconnect\");if(!(1>a.workspace.scale)){var b=a.getHeightWidth().height;b=Math.atan(10/b)/Math.PI*180;a.RTL||(b*=-1);Blockly.blockAnimations.disconnectUiStep_(a.getSvgRoot(),b,new Date)}};\nBlockly.blockAnimations.disconnectUiStep_=function(a,b,c){var d=(new Date-c)/200;1<d?a.skew_=\"\":(a.skew_=\"skewX(\"+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+\")\",Blockly.blockAnimations.disconnectGroup_=a,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.disconnectUiStep_,10,a,b,c));a.setAttribute(\"transform\",a.translate_+a.skew_)};\nBlockly.blockAnimations.disconnectUiStop=function(){if(Blockly.blockAnimations.disconnectGroup_){clearTimeout(Blockly.blockAnimations.disconnectPid_);var a=Blockly.blockAnimations.disconnectGroup_;a.skew_=\"\";a.setAttribute(\"transform\",a.translate_);Blockly.blockAnimations.disconnectGroup_=null}};Blockly.InsertionMarkerManager=function(a){this.topBlock_=Blockly.selected=a;this.workspace_=a.workspace;this.lastMarker_=this.lastOnStack_=null;this.firstMarker_=this.createMarkerBlock_(this.topBlock_);this.localConnection_=this.closestConnection_=null;this.wouldDeleteBlock_=!1;this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null;this.availableConnections_=this.initAvailableConnections_()};Blockly.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2};\nBlockly.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0;Blockly.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{Blockly.Events.enable()}};Blockly.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()};Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_};\nBlockly.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_};\nBlockly.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(Blockly.Events.disable(),this.hidePreview_(),Blockly.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var a=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;Blockly.blockAnimations.connectionUiEffect(a.getSourceBlock());this.topBlock_.getRootBlock().bringToFront()}};\nBlockly.InsertionMarkerManager.prototype.update=function(a,b){var c=this.getCandidate_(a);if((this.wouldDeleteBlock_=this.shouldDelete_(c,b))||this.shouldUpdatePreviews_(c,a))Blockly.Events.disable(),this.maybeHidePreview_(c),this.maybeShowPreview_(c),Blockly.Events.enable()};\nBlockly.InsertionMarkerManager.prototype.createMarkerBlock_=function(a){var b=a.type;Blockly.Events.disable();try{var c=this.workspace_.newBlock(b);c.setInsertionMarker(!0);if(a.mutationToDom){var d=a.mutationToDom();d&&c.domToMutation(d)}for(b=0;b<a.inputList.length;b++){var e=a.inputList[b];if(e.name!=Blockly.Block.COLLAPSED_INPUT_NAME){var f=c.inputList[b];for(d=0;d<e.fieldRow.length;d++)f.fieldRow[d].setValue(e.fieldRow[d].getValue())}}c.setCollapsed(a.isCollapsed());c.setInputsInline(a.getInputsInline());\nc.initSvg();c.getSvgRoot().setAttribute(\"visibility\",\"hidden\")}finally{Blockly.Events.enable()}return c};Blockly.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var a=this.topBlock_.getConnections_(!1),b=this.topBlock_.lastConnectionInStack();if(b&&b!=this.topBlock_.nextConnection){a.push(b);this.lastOnStack_=b;if(this.lastMarker_){Blockly.Events.disable();try{this.lastMarker_.dispose()}finally{Blockly.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(b.getSourceBlock())}return a};\nBlockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(a,b){var c=a.local,d=a.closest;a=a.radius;if(c&&d){if(this.localConnection_&&this.closestConnection_){if(this.closestConnection_==d&&this.localConnection_==c)return!1;c=this.localConnection_.x+b.x-this.closestConnection_.x;b=this.localConnection_.y+b.y-this.closestConnection_.y;b=Math.sqrt(c*c+b*b);return!(d&&a>b-Blockly.CURRENT_CONNECTION_PREFERENCE)}if(this.localConnection_||this.closestConnection_)console.error(\"Only one of localConnection_ and closestConnection_ was set.\");\nelse return!0}else return!(!this.localConnection_||!this.closestConnection_);console.error(\"Returning true from shouldUpdatePreviews, but it's not clear why.\");return!0};Blockly.InsertionMarkerManager.prototype.getCandidate_=function(a){for(var b=this.getStartRadius_(),c=null,d=null,e=0;e<this.availableConnections_.length;e++){var f=this.availableConnections_[e],g=f.closest(b,a);g.connection&&(c=g.connection,d=f,b=g.radius)}return{closest:c,local:d,radius:b}};\nBlockly.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?Blockly.CONNECTING_SNAP_RADIUS:Blockly.SNAP_RADIUS};Blockly.InsertionMarkerManager.prototype.shouldDelete_=function(a,b){a=a&&!!a.closest&&b!=Blockly.DELETE_AREA_TOOLBOX;return!!b&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!a};\nBlockly.InsertionMarkerManager.prototype.maybeShowPreview_=function(a){if(!this.wouldDeleteBlock_){var b=a.closest;a=a.local;b&&(b==this.closestConnection_||b.getSourceBlock().isInsertionMarker()?console.log(\"Trying to connect to an insertion marker\"):(this.closestConnection_=b,this.localConnection_=a,this.showPreview_()))}};\nBlockly.InsertionMarkerManager.prototype.showPreview_=function(){var a=this.closestConnection_,b=this.workspace_.getRenderer();switch(b.getConnectionPreviewMethod(a,this.localConnection_,this.topBlock_)){case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}a&&\nb.shouldHighlightConnection(a)&&a.highlight()};Blockly.InsertionMarkerManager.prototype.maybeHidePreview_=function(a){if(a.closest){var b=this.closestConnection_!=a.closest;a=this.localConnection_!=a.local;this.closestConnection_&&this.localConnection_&&(b||a||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null};\nBlockly.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight();this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()};\nBlockly.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var a=this.localConnection_,b=this.closestConnection_,c=this.lastOnStack_&&a==this.lastOnStack_?this.lastMarker_:this.firstMarker_;a=c.getMatchingConnection(a.getSourceBlock(),a);if(a==this.markerConnection_)throw Error(\"Made it to showInsertionMarker_ even though the marker isn't changing\");c.render();c.rendered=!0;c.getSvgRoot().setAttribute(\"visibility\",\"visible\");a&&b&&c.positionNearConnection(a,b);b&&a.connect(b);this.markerConnection_=\na};\nBlockly.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var a=this.markerConnection_,b=a.getSourceBlock(),c=b.nextConnection,d=b.previousConnection,e=b.outputConnection;e=a.type==Blockly.INPUT_VALUE&&!(e&&e.targetConnection);!(a!=c||d&&d.targetConnection)||e?a.targetBlock().unplug(!1):a.type==Blockly.NEXT_STATEMENT&&a!=c?(c=a.targetConnection,c.getSourceBlock().unplug(!1),d=d?d.targetConnection:null,b.unplug(!0),d&&d.connect(c)):b.unplug(!0);if(a.targetConnection)throw Error(\"markerConnection_ still connected at the end of disconnectInsertionMarker\");this.markerConnection_=\nnull;b.getSvgRoot().setAttribute(\"visibility\",\"hidden\")}else console.log(\"No insertion marker connection to disconnect\")};Blockly.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var a=this.closestConnection_;this.highlightedBlock_=a.getSourceBlock();this.highlightedBlock_.highlightShapeForInput(a,!0)};\nBlockly.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1);this.highlightedBlock_=null};Blockly.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock();this.fadedBlock_.fadeForReplacement(!0)};Blockly.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1);this.fadedBlock_=null};\nBlockly.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var a=[];this.firstMarker_&&a.push(this.firstMarker_);this.lastMarker_&&a.push(this.lastMarker_);return a};Blockly.BlockDragger=function(a,b){this.draggingBlock_=a;this.workspace_=b;this.draggedConnectionManager_=new Blockly.InsertionMarkerManager(this.draggingBlock_);this.deleteArea_=null;this.wouldDeleteBlock_=!1;this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY();this.dragIconData_=Blockly.BlockDragger.initIconData_(a)};Blockly.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0;this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()};\nBlockly.BlockDragger.initIconData_=function(a){var b=[];a=a.getDescendants(!1);for(var c=0,d;d=a[c];c++){d=d.getIcons();for(var e=0;e<d.length;e++){var f={location:d[e].getIconLocation(),icon:d[e]};b.push(f)}}return b};\nBlockly.BlockDragger.prototype.startBlockDrag=function(a,b){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0);this.fireDragStartEvent_();this.workspace_.isMutator&&this.draggingBlock_.bringToFront();Blockly.utils.dom.startTextWidthCache();this.workspace_.setResizesEnabled(!1);Blockly.blockAnimations.disconnectUiStop();if(this.draggingBlock_.getParent()||b&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())this.draggingBlock_.unplug(b),a=this.pixelsToWorkspaceUnits_(a),\na=Blockly.utils.Coordinate.sum(this.startXY_,a),this.draggingBlock_.translate(a.x,a.y),Blockly.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections();this.draggingBlock_.setDragging(!0);this.draggingBlock_.moveToDragSurface();(a=this.workspace_.getToolbox())&&\"function\"==typeof a.addStyle&&(b=this.draggingBlock_.isDeletable()?\"blocklyToolboxDelete\":\"blocklyToolboxGrab\",a.addStyle(b))};\nBlockly.BlockDragger.prototype.fireDragStartEvent_=function(){var a=new Blockly.Events.Ui(this.draggingBlock_,\"dragStart\",null,this.draggingBlock_.getDescendants(!1));Blockly.Events.fire(a)};Blockly.BlockDragger.prototype.dragBlock=function(a,b){b=this.pixelsToWorkspaceUnits_(b);var c=Blockly.utils.Coordinate.sum(this.startXY_,b);this.draggingBlock_.moveDuringDrag(c);this.dragIcons_(b);this.deleteArea_=this.workspace_.isDeleteArea(a);this.draggedConnectionManager_.update(b,this.deleteArea_);this.updateCursorDuringBlockDrag_()};\nBlockly.BlockDragger.prototype.endBlockDrag=function(a,b){this.dragBlock(a,b);this.dragIconData_=[];this.fireDragEndEvent_();Blockly.utils.dom.stopTextWidthCache();Blockly.blockAnimations.disconnectUiStop();a=this.pixelsToWorkspaceUnits_(b);b=Blockly.utils.Coordinate.sum(this.startXY_,a);this.draggingBlock_.moveOffDragSurface(b);this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(a.x,a.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?\nthis.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump());this.workspace_.setResizesEnabled(!0);(a=this.workspace_.getToolbox())&&\"function\"==typeof a.removeStyle&&(b=this.draggingBlock_.isDeletable()?\"blocklyToolboxDelete\":\"blocklyToolboxGrab\",a.removeStyle(b));Blockly.Events.setGroup(!1)};\nBlockly.BlockDragger.prototype.fireDragEndEvent_=function(){var a=new Blockly.Events.Ui(this.draggingBlock_,\"dragStop\",this.draggingBlock_.getDescendants(!1),null);Blockly.Events.fire(a)};Blockly.BlockDragger.prototype.fireMoveEvent_=function(){var a=new Blockly.Events.BlockMove(this.draggingBlock_);a.oldCoordinate=this.startXY_;a.recordNew();Blockly.Events.fire(a)};\nBlockly.BlockDragger.prototype.maybeDeleteBlock_=function(){var a=this.workspace_.trashcan;this.wouldDeleteBlock_?(a&&setTimeout(a.closeLid.bind(a),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Blockly.draggingConnections=[]):a&&a.closeLid();return this.wouldDeleteBlock_};\nBlockly.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var a=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&a&&a.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),a&&a.setLidOpen(!1))};\nBlockly.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(a){a=new Blockly.utils.Coordinate(a.x/this.workspace_.scale,a.y/this.workspace_.scale);this.workspace_.isMutator&&a.scale(1/this.workspace_.options.parentWorkspace.scale);return a};Blockly.BlockDragger.prototype.dragIcons_=function(a){for(var b=0;b<this.dragIconData_.length;b++){var c=this.dragIconData_[b];c.icon.setIconLocation(Blockly.utils.Coordinate.sum(c.location,a))}};\nBlockly.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]};Blockly.ConnectionChecker=function(){};Blockly.ConnectionChecker.prototype.canConnect=function(a,b,c,d){return this.canConnectWithReason(a,b,c,d)==Blockly.Connection.CAN_CONNECT};Blockly.ConnectionChecker.prototype.canConnectWithReason=function(a,b,c,d){var e=this.doSafetyChecks(a,b);return e!=Blockly.Connection.CAN_CONNECT?e:this.doTypeChecks(a,b)?c&&!this.doDragChecks(a,b,d||0)?Blockly.Connection.REASON_DRAG_CHECKS_FAILED:Blockly.Connection.CAN_CONNECT:Blockly.Connection.REASON_CHECKS_FAILED};\nBlockly.ConnectionChecker.prototype.getErrorMessage=function(a,b,c){switch(a){case Blockly.Connection.REASON_SELF_CONNECTION:return\"Attempted to connect a block to itself.\";case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:return\"Blocks not on same workspace.\";case Blockly.Connection.REASON_WRONG_TYPE:return\"Attempt to connect incompatible types.\";case Blockly.Connection.REASON_TARGET_NULL:return\"Target connection is null.\";case Blockly.Connection.REASON_CHECKS_FAILED:return\"Connection checks failed. \"+\n(b+\" expected \"+b.getCheck()+\", found \"+c.getCheck());case Blockly.Connection.REASON_SHADOW_PARENT:return\"Connecting non-shadow to shadow block.\";case Blockly.Connection.REASON_DRAG_CHECKS_FAILED:return\"Drag checks failed.\";default:return\"Unknown connection failure: this should never happen!\"}};\nBlockly.ConnectionChecker.prototype.doSafetyChecks=function(a,b){if(!a||!b)return Blockly.Connection.REASON_TARGET_NULL;if(a.isSuperior())var c=a.getSourceBlock(),d=b.getSourceBlock();else d=a.getSourceBlock(),c=b.getSourceBlock();return c==d?Blockly.Connection.REASON_SELF_CONNECTION:b.type!=Blockly.OPPOSITE_TYPE[a.type]?Blockly.Connection.REASON_WRONG_TYPE:c.workspace!==d.workspace?Blockly.Connection.REASON_DIFFERENT_WORKSPACES:c.isShadow()&&!d.isShadow()?Blockly.Connection.REASON_SHADOW_PARENT:\nBlockly.Connection.CAN_CONNECT};Blockly.ConnectionChecker.prototype.doTypeChecks=function(a,b){a=a.getCheck();b=b.getCheck();if(!a||!b)return!0;for(var c=0;c<a.length;c++)if(-1!=b.indexOf(a[c]))return!0;return!1};\nBlockly.ConnectionChecker.prototype.doDragChecks=function(a,b,c){if(a.distanceFrom(b)>c||b.getSourceBlock().isInsertionMarker())return!1;switch(b.type){case Blockly.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(a,b);case Blockly.OUTPUT_VALUE:if(b.isConnected()&&!b.targetBlock().isInsertionMarker()||a.isConnected())return!1;break;case Blockly.INPUT_VALUE:if(b.isConnected()&&!b.targetBlock().isMovable()&&!b.targetBlock().isShadow())return!1;break;case Blockly.NEXT_STATEMENT:if(b.isConnected()&&\n!a.getSourceBlock().nextConnection&&!b.targetBlock().isShadow()&&b.targetBlock().nextConnection)return!1;break;default:return!1}return-1!=Blockly.draggingConnections.indexOf(b)?!1:!0};Blockly.ConnectionChecker.prototype.canConnectToPrevious_=function(a,b){if(a.targetConnection||-1!=Blockly.draggingConnections.indexOf(b))return!1;if(!b.targetConnection)return!0;a=b.targetBlock();return a.isInsertionMarker()?!a.getPreviousBlock():!1};\nBlockly.registry.register(Blockly.registry.Type.CONNECTION_CHECKER,Blockly.registry.DEFAULT,Blockly.ConnectionChecker);Blockly.VariableMap=function(a){this.variableMap_=Object.create(null);this.workspace=a};Blockly.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)};Blockly.VariableMap.prototype.renameVariable=function(a,b){var c=this.getVariable(b,a.type),d=this.workspace.getAllBlocks(!1);Blockly.Events.setGroup(!0);try{c&&c.getId()!=a.getId()?this.renameVariableWithConflict_(a,b,c,d):this.renameVariableAndUses_(a,b,d)}finally{Blockly.Events.setGroup(!1)}};\nBlockly.VariableMap.prototype.renameVariableById=function(a,b){var c=this.getVariableById(a);if(!c)throw Error(\"Tried to rename a variable that didn't exist. ID: \"+a);this.renameVariable(c,b)};Blockly.VariableMap.prototype.renameVariableAndUses_=function(a,b,c){Blockly.Events.fire(new Blockly.Events.VarRename(a,b));a.name=b;for(b=0;b<c.length;b++)c[b].updateVarName(a)};\nBlockly.VariableMap.prototype.renameVariableWithConflict_=function(a,b,c,d){var e=a.type;b!=c.name&&this.renameVariableAndUses_(c,b,d);for(b=0;b<d.length;b++)d[b].renameVarById(a.getId(),c.getId());Blockly.Events.fire(new Blockly.Events.VarDelete(a));a=this.getVariablesOfType(e).indexOf(a);this.variableMap_[e].splice(a,1)};\nBlockly.VariableMap.prototype.createVariable=function(a,b,c){var d=this.getVariable(a,b);if(d){if(c&&d.getId()!=c)throw Error('Variable \"'+a+'\" is already in use and its id is \"'+d.getId()+'\" which conflicts with the passed in id, \"'+c+'\".');return d}if(c&&this.getVariableById(c))throw Error('Variable id, \"'+c+'\", is already in use.');d=c||Blockly.utils.genUid();b=b||\"\";d=new Blockly.VariableModel(this.workspace,a,b,d);a=this.variableMap_[b]||[];a.push(d);delete this.variableMap_[b];this.variableMap_[b]=\na;return d};Blockly.VariableMap.prototype.deleteVariable=function(a){for(var b=this.variableMap_[a.type],c=0,d;d=b[c];c++)if(d.getId()==a.getId()){b.splice(c,1);Blockly.Events.fire(new Blockly.Events.VarDelete(a));break}};\nBlockly.VariableMap.prototype.deleteVariableById=function(a){var b=this.getVariableById(a);if(b){var c=b.name,d=this.getVariableUsesById(a);a=0;for(var e;e=d[a];a++)if(\"procedures_defnoreturn\"==e.type||\"procedures_defreturn\"==e.type){a=e.getFieldValue(\"NAME\");c=Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace(\"%1\",c).replace(\"%2\",a);Blockly.alert(c);return}var f=this;1<d.length?(c=Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace(\"%1\",String(d.length)).replace(\"%2\",c),Blockly.confirm(c,function(g){g&&\nb&&f.deleteVariableInternal(b,d)})):f.deleteVariableInternal(b,d)}else console.warn(\"Can't delete non-existent variable: \"+a)};Blockly.VariableMap.prototype.deleteVariableInternal=function(a,b){var c=Blockly.Events.getGroup();c||Blockly.Events.setGroup(!0);try{for(var d=0;d<b.length;d++)b[d].dispose(!0);this.deleteVariable(a)}finally{c||Blockly.Events.setGroup(!1)}};\nBlockly.VariableMap.prototype.getVariable=function(a,b){if(b=this.variableMap_[b||\"\"])for(var c=0,d;d=b[c];c++)if(Blockly.Names.equals(d.name,a))return d;return null};Blockly.VariableMap.prototype.getVariableById=function(a){for(var b=Object.keys(this.variableMap_),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.variableMap_[d][e];e++)if(f.getId()==a)return f;return null};Blockly.VariableMap.prototype.getVariablesOfType=function(a){return(a=this.variableMap_[a||\"\"])?a.slice():[]};\nBlockly.VariableMap.prototype.getVariableTypes=function(a){var b={};Blockly.utils.object.mixin(b,this.variableMap_);a&&a.getPotentialVariableMap()&&Blockly.utils.object.mixin(b,a.getPotentialVariableMap().variableMap_);a=Object.keys(b);b=!1;for(var c=0;c<a.length;c++)\"\"==a[c]&&(b=!0);b||a.push(\"\");return a};Blockly.VariableMap.prototype.getAllVariables=function(){var a=[],b;for(b in this.variableMap_)a=a.concat(this.variableMap_[b]);return a};\nBlockly.VariableMap.prototype.getAllVariableNames=function(){var a=[],b;for(b in this.variableMap_)for(var c=this.variableMap_[b],d=0,e;e=c[d];d++)a.push(e.name);return a};Blockly.VariableMap.prototype.getVariableUsesById=function(a){for(var b=[],c=this.workspace.getAllBlocks(!1),d=0;d<c.length;d++){var e=c[d].getVarModels();if(e)for(var f=0;f<e.length;f++)e[f].getId()==a&&b.push(c[d])}return b};Blockly.Workspace=function(a){this.id=Blockly.utils.genUid();Blockly.Workspace.WorkspaceDB_[this.id]=this;this.options=a||new Blockly.Options({});this.RTL=!!this.options.RTL;this.horizontalLayout=!!this.options.horizontalLayout;this.toolboxPosition=this.options.toolboxPosition;this.connectionChecker=new (Blockly.registry.getClassFromOptions(Blockly.registry.Type.CONNECTION_CHECKER,this.options))(this);this.topBlocks_=[];this.topComments_=[];this.commentDB_=Object.create(null);this.listeners_=[];this.undoStack_=\n[];this.redoStack_=[];this.blockDB_=Object.create(null);this.typedBlocksDB_=Object.create(null);this.variableMap_=new Blockly.VariableMap(this);this.potentialVariableMap_=null};Blockly.Workspace.prototype.rendered=!1;Blockly.Workspace.prototype.isClearing=!1;Blockly.Workspace.prototype.MAX_UNDO=1024;Blockly.Workspace.prototype.connectionDBList=null;Blockly.Workspace.prototype.dispose=function(){this.listeners_.length=0;this.clear();delete Blockly.Workspace.WorkspaceDB_[this.id]};\nBlockly.Workspace.SCAN_ANGLE=3;Blockly.Workspace.prototype.sortObjects_=function(a,b){a=a.getRelativeToSurfaceXY();b=b.getRelativeToSurfaceXY();return a.y+Blockly.Workspace.prototype.sortObjects_.offset*a.x-(b.y+Blockly.Workspace.prototype.sortObjects_.offset*b.x)};Blockly.Workspace.prototype.addTopBlock=function(a){this.topBlocks_.push(a)};\nBlockly.Workspace.prototype.removeTopBlock=function(a){if(!Blockly.utils.arrayRemove(this.topBlocks_,a))throw Error(\"Block not present in workspace's list of top-most blocks.\");};Blockly.Workspace.prototype.getTopBlocks=function(a){var b=[].concat(this.topBlocks_);a&&1<b.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),b.sort(this.sortObjects_));return b};\nBlockly.Workspace.prototype.addTypedBlock=function(a){this.typedBlocksDB_[a.type]||(this.typedBlocksDB_[a.type]=[]);this.typedBlocksDB_[a.type].push(a)};Blockly.Workspace.prototype.removeTypedBlock=function(a){this.typedBlocksDB_[a.type].splice(this.typedBlocksDB_[a.type].indexOf(a),1);this.typedBlocksDB_[a.type].length||delete this.typedBlocksDB_[a.type]};\nBlockly.Workspace.prototype.getBlocksByType=function(a,b){if(!this.typedBlocksDB_[a])return[];a=this.typedBlocksDB_[a].slice(0);b&&1<a.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),a.sort(this.sortObjects_));return a};\nBlockly.Workspace.prototype.addTopComment=function(a){this.topComments_.push(a);this.commentDB_[a.id]&&console.warn('Overriding an existing comment on this workspace, with id \"'+a.id+'\"');this.commentDB_[a.id]=a};Blockly.Workspace.prototype.removeTopComment=function(a){if(!Blockly.utils.arrayRemove(this.topComments_,a))throw Error(\"Comment not present in workspace's list of top-most comments.\");delete this.commentDB_[a.id]};\nBlockly.Workspace.prototype.getTopComments=function(a){var b=[].concat(this.topComments_);a&&1<b.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),b.sort(this.sortObjects_));return b};\nBlockly.Workspace.prototype.getAllBlocks=function(a){if(a){a=this.getTopBlocks(!0);for(var b=[],c=0;c<a.length;c++)b.push.apply(b,a[c].getDescendants(!0))}else for(b=this.getTopBlocks(!1),c=0;c<b.length;c++)b.push.apply(b,b[c].getChildren(!1));return b.filter(function(d){return!d.isInsertionMarker()})};\nBlockly.Workspace.prototype.clear=function(){this.isClearing=!0;try{var a=Blockly.Events.getGroup();for(a||Blockly.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);a||Blockly.Events.setGroup(!1);this.variableMap_.clear();this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}};\nBlockly.Workspace.prototype.renameVariableById=function(a,b){this.variableMap_.renameVariableById(a,b)};Blockly.Workspace.prototype.createVariable=function(a,b,c){return this.variableMap_.createVariable(a,b,c)};Blockly.Workspace.prototype.getVariableUsesById=function(a){return this.variableMap_.getVariableUsesById(a)};Blockly.Workspace.prototype.deleteVariableById=function(a){this.variableMap_.deleteVariableById(a)};\nBlockly.Workspace.prototype.getVariable=function(a,b){return this.variableMap_.getVariable(a,b)};Blockly.Workspace.prototype.getVariableById=function(a){return this.variableMap_.getVariableById(a)};Blockly.Workspace.prototype.getVariablesOfType=function(a){return this.variableMap_.getVariablesOfType(a)};Blockly.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)};Blockly.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()};\nBlockly.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()};Blockly.Workspace.prototype.getWidth=function(){return 0};Blockly.Workspace.prototype.newBlock=function(a,b){return new Blockly.Block(this,a,b)};Blockly.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?Infinity:this.options.maxBlocks-this.getAllBlocks(!1).length};\nBlockly.Workspace.prototype.remainingCapacityOfType=function(a){return this.options.maxInstances?(void 0!==this.options.maxInstances[a]?this.options.maxInstances[a]:Infinity)-this.getBlocksByType(a,!1).length:Infinity};Blockly.Workspace.prototype.isCapacityAvailable=function(a){if(!this.hasBlockLimits())return!0;var b=0,c;for(c in a){if(a[c]>this.remainingCapacityOfType(c))return!1;b+=a[c]}return b>this.remainingCapacity()?!1:!0};\nBlockly.Workspace.prototype.hasBlockLimits=function(){return Infinity!=this.options.maxBlocks||!!this.options.maxInstances};Blockly.Workspace.prototype.getUndoStack=function(){return this.undoStack_};Blockly.Workspace.prototype.getRedoStack=function(){return this.redoStack_};\nBlockly.Workspace.prototype.undo=function(a){var b=a?this.redoStack_:this.undoStack_,c=a?this.undoStack_:this.redoStack_,d=b.pop();if(d){for(var e=[d];b.length&&d.group&&d.group==b[b.length-1].group;)e.push(b.pop());for(b=0;d=e[b];b++)c.push(d);e=Blockly.Events.filter(e,a);Blockly.Events.recordUndo=!1;try{for(b=0;d=e[b];b++)d.run(a)}finally{Blockly.Events.recordUndo=!0}}};Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0;this.redoStack_.length=0;Blockly.Events.clearPendingUndo()};\nBlockly.Workspace.prototype.addChangeListener=function(a){this.listeners_.push(a);return a};Blockly.Workspace.prototype.removeChangeListener=function(a){Blockly.utils.arrayRemove(this.listeners_,a)};Blockly.Workspace.prototype.fireChangeListener=function(a){if(a.recordUndo)for(this.undoStack_.push(a),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var b=0,c;c=this.listeners_[b];b++)c(a)};\nBlockly.Workspace.prototype.getBlockById=function(a){return this.blockDB_[a]||null};Blockly.Workspace.prototype.setBlockById=function(a,b){this.blockDB_[a]=b};Blockly.Workspace.prototype.removeBlockById=function(a){delete this.blockDB_[a]};Blockly.Workspace.prototype.getCommentById=function(a){return this.commentDB_[a]||null};Blockly.Workspace.prototype.allInputsFilled=function(a){for(var b=this.getTopBlocks(!1),c=0,d;d=b[c];c++)if(!d.allInputsFilled(a))return!1;return!0};\nBlockly.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_};Blockly.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Blockly.VariableMap(this)};Blockly.Workspace.prototype.getVariableMap=function(){return this.variableMap_};Blockly.Workspace.prototype.setVariableMap=function(a){this.variableMap_=a};Blockly.Workspace.WorkspaceDB_=Object.create(null);\nBlockly.Workspace.getById=function(a){return Blockly.Workspace.WorkspaceDB_[a]||null};Blockly.Workspace.getAll=function(){var a=[],b;for(b in Blockly.Workspace.WorkspaceDB_)a.push(Blockly.Workspace.WorkspaceDB_[b]);return a};Blockly.Bubble=function(a,b,c,d,e,f){this.workspace_=a;this.content_=b;this.shape_=c;this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null;this.disposed=!1;c=Blockly.Bubble.ARROW_ANGLE;this.workspace_.RTL&&(c=-c);this.arrow_radians_=Blockly.utils.math.toRadians(c);a.getBubbleCanvas().appendChild(this.createDom_(b,!(!e||!f)));this.setAnchorLocation(d);e&&f||(a=this.content_.getBBox(),e=a.width+2*Blockly.Bubble.BORDER_WIDTH,f=a.height+2*Blockly.Bubble.BORDER_WIDTH);\nthis.setBubbleSize(e,f);this.positionBubble_();this.renderArrow_();this.rendered_=!0};Blockly.Bubble.BORDER_WIDTH=6;Blockly.Bubble.ARROW_THICKNESS=5;Blockly.Bubble.ARROW_ANGLE=20;Blockly.Bubble.ARROW_BEND=4;Blockly.Bubble.ANCHOR_RADIUS=8;Blockly.Bubble.onMouseUpWrapper_=null;Blockly.Bubble.onMouseMoveWrapper_=null;\nBlockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null);Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)};Blockly.Bubble.bubbleMouseUp_=function(a){Blockly.Touch.clearTouchIdentifier();Blockly.Bubble.unbindDragEvents_()};Blockly.Bubble.prototype.rendered_=!1;Blockly.Bubble.prototype.anchorXY_=null;\nBlockly.Bubble.prototype.relativeLeft_=0;Blockly.Bubble.prototype.relativeTop_=0;Blockly.Bubble.prototype.width_=0;Blockly.Bubble.prototype.height_=0;Blockly.Bubble.prototype.autoLayout_=!0;\nBlockly.Bubble.prototype.createDom_=function(a,b){this.bubbleGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null);var c={filter:\"url(#\"+this.workspace_.getRenderer().getConstants().embossFilterId+\")\"};Blockly.utils.userAgent.JAVA_FX&&(c={});c=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,c,this.bubbleGroup_);this.bubbleArrow_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{},c);this.bubbleBack_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyDraggable\",\nx:0,y:0,rx:Blockly.Bubble.BORDER_WIDTH,ry:Blockly.Bubble.BORDER_WIDTH},c);b?(this.resizeGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":this.workspace_.RTL?\"blocklyResizeSW\":\"blocklyResizeSE\"},this.bubbleGroup_),b=2*Blockly.Bubble.BORDER_WIDTH,Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.POLYGON,{points:\"0,x x,x x,0\".replace(/x/g,b.toString())},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{\"class\":\"blocklyResizeLine\",x1:b/3,y1:b-1,x2:b-\n1,y2:b/3},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{\"class\":\"blocklyResizeLine\",x1:2*b/3,y1:b-1,x2:b-1,y2:2*b/3},this.resizeGroup_)):this.resizeGroup_=null;this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=Blockly.bindEventWithChecks_(this.bubbleBack_,\"mousedown\",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=Blockly.bindEventWithChecks_(this.resizeGroup_,\"mousedown\",this,this.resizeMouseDown_)));this.bubbleGroup_.appendChild(a);\nreturn this.bubbleGroup_};Blockly.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_};Blockly.Bubble.prototype.setSvgId=function(a){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=a)};Blockly.Bubble.prototype.bubbleMouseDown_=function(a){var b=this.workspace_.getGesture(a);b&&b.handleBubbleStart(a,this)};Blockly.Bubble.prototype.showContextMenu=function(a){};Blockly.Bubble.prototype.isDeletable=function(){return!1};Blockly.Bubble.prototype.setDeleteStyle=function(a){};\nBlockly.Bubble.prototype.resizeMouseDown_=function(a){this.promote();Blockly.Bubble.unbindDragEvents_();Blockly.utils.isRightButton(a)||(this.workspace_.startDrag(a,new Blockly.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,\"mouseup\",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,\"mousemove\",this,this.resizeMouseMove_),Blockly.hideChaff());\na.stopPropagation()};Blockly.Bubble.prototype.resizeMouseMove_=function(a){this.autoLayout_=!1;a=this.workspace_.moveDrag(a);this.setBubbleSize(this.workspace_.RTL?-a.x:a.x,a.y);this.workspace_.RTL&&this.positionBubble_()};Blockly.Bubble.prototype.registerResizeEvent=function(a){this.resizeCallback_=a};Blockly.Bubble.prototype.registerMoveEvent=function(a){this.moveCallback_=a};\nBlockly.Bubble.prototype.promote=function(){var a=this.bubbleGroup_.parentNode;return a.lastChild!==this.bubbleGroup_?(a.appendChild(this.bubbleGroup_),!0):!1};Blockly.Bubble.prototype.setAnchorLocation=function(a){this.anchorXY_=a;this.rendered_&&this.positionBubble_()};\nBlockly.Bubble.prototype.layoutBubble_=function(){var a=this.workspace_.getMetrics();a.viewLeft/=this.workspace_.scale;a.viewWidth/=this.workspace_.scale;a.viewTop/=this.workspace_.scale;a.viewHeight/=this.workspace_.scale;var b=this.getOptimalRelativeLeft_(a),c=this.getOptimalRelativeTop_(a),d=this.shape_.getBBox(),e={x:b,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},f={x:-this.width_-30,y:c};c={x:d.width,y:c};var g={x:b,y:d.height};b=d.width<d.height?c:g;d=d.width<\nd.height?g:c;c=this.getOverlap_(e,a);g=this.getOverlap_(f,a);var h=this.getOverlap_(b,a);a=this.getOverlap_(d,a);a=Math.max(c,g,h,a);c==a?(this.relativeLeft_=e.x,this.relativeTop_=e.y):g==a?(this.relativeLeft_=f.x,this.relativeTop_=f.y):h==a?(this.relativeLeft_=b.x,this.relativeTop_=b.y):(this.relativeLeft_=d.x,this.relativeTop_=d.y)};\nBlockly.Bubble.prototype.getOverlap_=function(a,b){var c=this.workspace_.RTL?this.anchorXY_.x-a.x-this.width_:a.x+this.anchorXY_.x;a=a.y+this.anchorXY_.y;return Math.max(0,Math.min(1,(Math.min(c+this.width_,b.viewLeft+b.viewWidth)-Math.max(c,b.viewLeft))*(Math.min(a+this.height_,b.viewTop+b.viewHeight)-Math.max(a,b.viewTop))/(this.width_*this.height_)))};\nBlockly.Bubble.prototype.getOptimalRelativeLeft_=function(a){var b=-this.width_/4;if(this.width_>a.viewWidth)return b;if(this.workspace_.RTL)var c=this.anchorXY_.x-b,d=c-this.width_,e=a.viewLeft+a.viewWidth,f=a.viewLeft+Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;else d=b+this.anchorXY_.x,c=d+this.width_,f=a.viewLeft,e=a.viewLeft+a.viewWidth-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;this.workspace_.RTL?d<f?b=-(f-this.anchorXY_.x+this.width_):c>e&&(b=-(e-this.anchorXY_.x)):\nd<f?b=f-this.anchorXY_.x:c>e&&(b=e-this.anchorXY_.x-this.width_);return b};Blockly.Bubble.prototype.getOptimalRelativeTop_=function(a){var b=-this.height_/4;if(this.height_>a.viewHeight)return b;var c=this.anchorXY_.y+b,d=c+this.height_,e=a.viewTop;a=a.viewTop+a.viewHeight-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;var f=this.anchorXY_.y;c<e?b=e-f:d>a&&(b=a-f-this.height_);return b};\nBlockly.Bubble.prototype.positionBubble_=function(){var a=this.anchorXY_.x;a=this.workspace_.RTL?a-(this.relativeLeft_+this.width_):a+this.relativeLeft_;this.moveTo(a,this.relativeTop_+this.anchorXY_.y)};Blockly.Bubble.prototype.moveTo=function(a,b){this.bubbleGroup_.setAttribute(\"transform\",\"translate(\"+a+\",\"+b+\")\")};Blockly.Bubble.prototype.setDragging=function(a){!a&&this.moveCallback_&&this.moveCallback_()};\nBlockly.Bubble.prototype.getBubbleSize=function(){return new Blockly.utils.Size(this.width_,this.height_)};\nBlockly.Bubble.prototype.setBubbleSize=function(a,b){var c=2*Blockly.Bubble.BORDER_WIDTH;a=Math.max(a,c+45);b=Math.max(b,c+20);this.width_=a;this.height_=b;this.bubbleBack_.setAttribute(\"width\",a);this.bubbleBack_.setAttribute(\"height\",b);this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute(\"transform\",\"translate(\"+2*Blockly.Bubble.BORDER_WIDTH+\",\"+(b-c)+\") scale(-1 1)\"):this.resizeGroup_.setAttribute(\"transform\",\"translate(\"+(a-c)+\",\"+(b-c)+\")\"));this.autoLayout_&&this.layoutBubble_();\nthis.positionBubble_();this.renderArrow_();this.resizeCallback_&&this.resizeCallback_()};\nBlockly.Bubble.prototype.renderArrow_=function(){var a=[],b=this.width_/2,c=this.height_/2,d=-this.relativeLeft_,e=-this.relativeTop_;if(b==d&&c==e)a.push(\"M \"+b+\",\"+c);else{e-=c;d-=b;this.workspace_.RTL&&(d*=-1);var f=Math.sqrt(e*e+d*d),g=Math.acos(d/f);0>e&&(g=2*Math.PI-g);var h=g+Math.PI/2;h>2*Math.PI&&(h-=2*Math.PI);var k=Math.sin(h),l=Math.cos(h),m=this.getBubbleSize();h=(m.width+m.height)/Blockly.Bubble.ARROW_THICKNESS;h=Math.min(h,m.width,m.height)/4;m=1-Blockly.Bubble.ANCHOR_RADIUS/f;d=b+\nm*d;e=c+m*e;m=b+h*l;var n=c+h*k;b-=h*l;c-=h*k;k=g+this.arrow_radians_;k>2*Math.PI&&(k-=2*Math.PI);g=Math.sin(k)*f/Blockly.Bubble.ARROW_BEND;f=Math.cos(k)*f/Blockly.Bubble.ARROW_BEND;a.push(\"M\"+m+\",\"+n);a.push(\"C\"+(m+f)+\",\"+(n+g)+\" \"+d+\",\"+e+\" \"+d+\",\"+e);a.push(\"C\"+d+\",\"+e+\" \"+(b+f)+\",\"+(c+g)+\" \"+b+\",\"+c)}a.push(\"z\");this.bubbleArrow_.setAttribute(\"d\",a.join(\" \"))};Blockly.Bubble.prototype.setColour=function(a){this.bubbleBack_.setAttribute(\"fill\",a);this.bubbleArrow_.setAttribute(\"fill\",a)};\nBlockly.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&Blockly.unbindEvent_(this.onMouseDownBubbleWrapper_);this.onMouseDownResizeWrapper_&&Blockly.unbindEvent_(this.onMouseDownResizeWrapper_);Blockly.Bubble.unbindDragEvents_();Blockly.utils.dom.removeNode(this.bubbleGroup_);this.disposed=!0};\nBlockly.Bubble.prototype.moveDuringDrag=function(a,b){a?a.translateSurface(b.x,b.y):this.moveTo(b.x,b.y);this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-b.x-this.width_:b.x-this.anchorXY_.x;this.relativeTop_=b.y-this.anchorXY_.y;this.renderArrow_()};Blockly.Bubble.prototype.getRelativeToSurfaceXY=function(){return new Blockly.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)};\nBlockly.Bubble.prototype.setAutoLayout=function(a){this.autoLayout_=a};Blockly.Events.CommentBase=function(a){this.commentId=(this.isBlank=\"undefined\"==typeof a)?\"\":a.id;this.workspaceId=this.isBlank?\"\":a.workspace.id;this.group=Blockly.Events.getGroup();this.recordUndo=Blockly.Events.recordUndo};Blockly.utils.object.inherits(Blockly.Events.CommentBase,Blockly.Events.Abstract);Blockly.Events.CommentBase.prototype.toJson=function(){var a=Blockly.Events.CommentBase.superClass_.toJson.call(this);this.commentId&&(a.commentId=this.commentId);return a};\nBlockly.Events.CommentBase.prototype.fromJson=function(a){Blockly.Events.CommentBase.superClass_.fromJson.call(this,a);this.commentId=a.commentId};Blockly.Events.CommentChange=function(a,b,c){Blockly.Events.CommentChange.superClass_.constructor.call(this,a);a&&(this.oldContents_=\"undefined\"==typeof b?\"\":b,this.newContents_=\"undefined\"==typeof c?\"\":c)};Blockly.utils.object.inherits(Blockly.Events.CommentChange,Blockly.Events.CommentBase);Blockly.Events.CommentChange.prototype.type=Blockly.Events.COMMENT_CHANGE;\nBlockly.Events.CommentChange.prototype.toJson=function(){var a=Blockly.Events.CommentChange.superClass_.toJson.call(this);a.newContents=this.newContents_;return a};Blockly.Events.CommentChange.prototype.fromJson=function(a){Blockly.Events.CommentChange.superClass_.fromJson.call(this,a);this.newContents_=a.newValue};Blockly.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_};\nBlockly.Events.CommentChange.prototype.run=function(a){var b=this.getEventWorkspace_().getCommentById(this.commentId);b?b.setContent(a?this.newContents_:this.oldContents_):console.warn(\"Can't change non-existent comment: \"+this.commentId)};Blockly.Events.CommentCreate=function(a){Blockly.Events.CommentCreate.superClass_.constructor.call(this,a);a&&(this.xml=a.toXmlWithXY())};Blockly.utils.object.inherits(Blockly.Events.CommentCreate,Blockly.Events.CommentBase);\nBlockly.Events.CommentCreate.prototype.type=Blockly.Events.COMMENT_CREATE;Blockly.Events.CommentCreate.prototype.toJson=function(){var a=Blockly.Events.CommentCreate.superClass_.toJson.call(this);a.xml=Blockly.Xml.domToText(this.xml);return a};Blockly.Events.CommentCreate.prototype.fromJson=function(a){Blockly.Events.CommentCreate.superClass_.fromJson.call(this,a);this.xml=Blockly.Xml.textToDom(a.xml)};\nBlockly.Events.CommentCreate.prototype.run=function(a){Blockly.Events.CommentCreateDeleteHelper(this,a)};Blockly.Events.CommentCreateDeleteHelper=function(a,b){var c=a.getEventWorkspace_();b?(b=Blockly.utils.xml.createElement(\"xml\"),b.appendChild(a.xml),Blockly.Xml.domToWorkspace(b,c)):(c=c.getCommentById(a.commentId))?c.dispose(!1,!1):console.warn(\"Can't uncreate non-existent comment: \"+a.commentId)};\nBlockly.Events.CommentDelete=function(a){Blockly.Events.CommentDelete.superClass_.constructor.call(this,a);a&&(this.xml=a.toXmlWithXY())};Blockly.utils.object.inherits(Blockly.Events.CommentDelete,Blockly.Events.CommentBase);Blockly.Events.CommentDelete.prototype.type=Blockly.Events.COMMENT_DELETE;Blockly.Events.CommentDelete.prototype.toJson=function(){return Blockly.Events.CommentDelete.superClass_.toJson.call(this)};\nBlockly.Events.CommentDelete.prototype.fromJson=function(a){Blockly.Events.CommentDelete.superClass_.fromJson.call(this,a)};Blockly.Events.CommentDelete.prototype.run=function(a){Blockly.Events.CommentCreateDeleteHelper(this,!a)};Blockly.Events.CommentMove=function(a){Blockly.Events.CommentMove.superClass_.constructor.call(this,a);a&&(this.comment_=a,this.oldCoordinate_=a.getXY(),this.newCoordinate_=null)};Blockly.utils.object.inherits(Blockly.Events.CommentMove,Blockly.Events.CommentBase);\nBlockly.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error(\"Tried to record the new position of a comment on the same event twice.\");this.newCoordinate_=this.comment_.getXY();this.comment_=null};Blockly.Events.CommentMove.prototype.type=Blockly.Events.COMMENT_MOVE;Blockly.Events.CommentMove.prototype.setOldCoordinate=function(a){this.oldCoordinate_=a};\nBlockly.Events.CommentMove.prototype.toJson=function(){var a=Blockly.Events.CommentMove.superClass_.toJson.call(this);this.newCoordinate_&&(a.newCoordinate=Math.round(this.newCoordinate_.x)+\",\"+Math.round(this.newCoordinate_.y));return a};Blockly.Events.CommentMove.prototype.fromJson=function(a){Blockly.Events.CommentMove.superClass_.fromJson.call(this,a);a.newCoordinate&&(a=a.newCoordinate.split(\",\"),this.newCoordinate_=new Blockly.utils.Coordinate(Number(a[0]),Number(a[1])))};\nBlockly.Events.CommentMove.prototype.isNull=function(){return Blockly.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)};Blockly.Events.CommentMove.prototype.run=function(a){var b=this.getEventWorkspace_().getCommentById(this.commentId);if(b){a=a?this.newCoordinate_:this.oldCoordinate_;var c=b.getXY();b.moveBy(a.x-c.x,a.y-c.y)}else console.warn(\"Can't move non-existent comment: \"+this.commentId)};Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_CREATE,Blockly.Events.CommentCreate);\nBlockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_CHANGE,Blockly.Events.CommentChange);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_MOVE,Blockly.Events.CommentMove);Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_DELETE,Blockly.Events.CommentDelete);Blockly.BubbleDragger=function(a,b){this.draggingBubble_=a;this.workspace_=b;this.deleteArea_=null;this.wouldDeleteBubble_=!1;this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY();this.dragSurface_=Blockly.utils.is3dSupported()&&b.getBlockDragSurface()?b.getBlockDragSurface():null};Blockly.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null};\nBlockly.BubbleDragger.prototype.startBubbleDrag=function(){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0);this.workspace_.setResizesEnabled(!1);this.draggingBubble_.setAutoLayout(!1);this.dragSurface_&&this.moveToDragSurface_();this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var a=this.workspace_.getToolbox();if(a&&\"function\"==typeof a.addStyle){var b=this.draggingBubble_.isDeletable()?\"blocklyToolboxDelete\":\"blocklyToolboxGrab\";a.addStyle(b)}};\nBlockly.BubbleDragger.prototype.dragBubble=function(a,b){b=this.pixelsToWorkspaceUnits_(b);b=Blockly.utils.Coordinate.sum(this.startXY_,b);this.draggingBubble_.moveDuringDrag(this.dragSurface_,b);this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(a),this.updateCursorDuringBubbleDrag_())};\nBlockly.BubbleDragger.prototype.maybeDeleteBubble_=function(){var a=this.workspace_.trashcan;this.wouldDeleteBubble_?(a&&setTimeout(a.closeLid.bind(a),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):a&&a.closeLid();return this.wouldDeleteBubble_};\nBlockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=Blockly.DELETE_AREA_NONE;var a=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&a&&a.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),a&&a.setLidOpen(!1))};\nBlockly.BubbleDragger.prototype.endBubbleDrag=function(a,b){this.dragBubble(a,b);a=this.pixelsToWorkspaceUnits_(b);a=Blockly.utils.Coordinate.sum(this.startXY_,a);this.draggingBubble_.moveTo(a.x,a.y);this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_());this.workspace_.setResizesEnabled(!0);(a=this.workspace_.getToolbox())&&\"function\"==typeof a.removeStyle&&\n(b=this.draggingBubble_.isDeletable()?\"blocklyToolboxDelete\":\"blocklyToolboxGrab\",a.removeStyle(b));Blockly.Events.setGroup(!1)};Blockly.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var a=new Blockly.Events.CommentMove(this.draggingBubble_);a.setOldCoordinate(this.startXY_);a.recordNew();Blockly.Events.fire(a)}};\nBlockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(a){a=new Blockly.utils.Coordinate(a.x/this.workspace_.scale,a.y/this.workspace_.scale);this.workspace_.isMutator&&a.scale(1/this.workspace_.options.parentWorkspace.scale);return a};Blockly.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0);this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y);this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())};Blockly.WorkspaceDragger=function(a){this.workspace_=a;this.startScrollXY_=new Blockly.utils.Coordinate(a.scrollX,a.scrollY)};Blockly.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null};Blockly.WorkspaceDragger.prototype.startDrag=function(){Blockly.selected&&Blockly.selected.unselect();this.workspace_.setupDragSurface()};Blockly.WorkspaceDragger.prototype.endDrag=function(a){this.drag(a);this.workspace_.resetDragSurface()};\nBlockly.WorkspaceDragger.prototype.drag=function(a){a=Blockly.utils.Coordinate.sum(this.startScrollXY_,a);this.workspace_.scroll(a.x,a.y)};Blockly.FlyoutDragger=function(a){Blockly.FlyoutDragger.superClass_.constructor.call(this,a.getWorkspace());this.scrollbar_=a.scrollbar;this.horizontalLayout_=a.horizontalLayout};Blockly.utils.object.inherits(Blockly.FlyoutDragger,Blockly.WorkspaceDragger);Blockly.FlyoutDragger.prototype.drag=function(a){a=Blockly.utils.Coordinate.sum(this.startScrollXY_,a);this.horizontalLayout_?this.scrollbar_.set(-a.x):this.scrollbar_.set(-a.y)};Blockly.Action=function(a,b){this.name=a;this.desc=b};Blockly.navigation={};Blockly.navigation.loggingCallback=null;Blockly.navigation.STATE_FLYOUT=1;Blockly.navigation.STATE_WS=2;Blockly.navigation.STATE_TOOLBOX=3;Blockly.navigation.WS_MOVE_DISTANCE=40;Blockly.navigation.currentState_=Blockly.navigation.STATE_WS;\nBlockly.navigation.actionNames={PREVIOUS:\"previous\",NEXT:\"next\",IN:\"in\",OUT:\"out\",INSERT:\"insert\",MARK:\"mark\",DISCONNECT:\"disconnect\",TOOLBOX:\"toolbox\",EXIT:\"exit\",TOGGLE_KEYBOARD_NAV:\"toggle_keyboard_nav\",MOVE_WS_CURSOR_UP:\"move workspace cursor up\",MOVE_WS_CURSOR_DOWN:\"move workspace cursor down\",MOVE_WS_CURSOR_LEFT:\"move workspace cursor left\",MOVE_WS_CURSOR_RIGHT:\"move workspace cursor right\"};Blockly.navigation.MARKER_NAME=\"local_marker_1\";Blockly.navigation.getMarker=function(){return Blockly.navigation.getNavigationWorkspace().getMarker(Blockly.navigation.MARKER_NAME)};\nBlockly.navigation.getNavigationWorkspace=function(){return Blockly.getMainWorkspace()};Blockly.navigation.focusToolbox_=function(){var a=Blockly.navigation.getNavigationWorkspace().getToolbox();a&&(Blockly.navigation.currentState_=Blockly.navigation.STATE_TOOLBOX,Blockly.navigation.resetFlyout_(!1),Blockly.navigation.getMarker().getCurNode()||Blockly.navigation.markAtCursor_(),a.getSelectedItem()||a.selectItemByPosition(0))};\nBlockly.navigation.focusFlyout_=function(){Blockly.navigation.currentState_=Blockly.navigation.STATE_FLYOUT;var a=Blockly.navigation.getNavigationWorkspace();var b=a.getToolbox();a=b?b.getFlyout():a.getFlyout();Blockly.navigation.getMarker().getCurNode()||Blockly.navigation.markAtCursor_();a&&a.getWorkspace()&&(a=a.getWorkspace().getTopBlocks(!0),0<a.length&&(a=a[0],a=Blockly.ASTNode.createStackNode(a),Blockly.navigation.getFlyoutCursor_().setCurNode(a)))};\nBlockly.navigation.focusWorkspace_=function(){Blockly.hideChaff();var a=Blockly.navigation.getNavigationWorkspace(),b=a.getCursor(),c=!!a.getToolbox(),d=a.getTopBlocks(!0);Blockly.navigation.resetFlyout_(c);Blockly.navigation.currentState_=Blockly.navigation.STATE_WS;0<d.length?b.setCurNode(Blockly.ASTNode.createTopNode(d[0])):(c=new Blockly.utils.Coordinate(100,100),a=Blockly.ASTNode.createWorkspaceNode(a,c),b.setCurNode(a))};\nBlockly.navigation.getFlyoutCursor_=function(){var a=Blockly.navigation.getNavigationWorkspace(),b=null;a.rendered&&(b=(a=(b=a.getToolbox())?b.getFlyout():a.getFlyout())?a.getWorkspace().getCursor():null);return b};\nBlockly.navigation.insertFromFlyout=function(){var a=Blockly.navigation.getNavigationWorkspace(),b=a.getFlyout();if(b&&b.isVisible()){var c=Blockly.navigation.getFlyoutCursor_().getCurNode().getLocation();c.isEnabled()?(b=b.createBlock(c),b.render(),b.setConnectionTracking(!0),a.getCursor().setCurNode(Blockly.ASTNode.createBlockNode(b)),Blockly.navigation.modify_()||Blockly.navigation.warn_(\"Something went wrong while inserting a block from the flyout.\"),Blockly.navigation.focusWorkspace_(),a.getCursor().setCurNode(Blockly.ASTNode.createTopNode(b)),\nBlockly.navigation.removeMark_()):Blockly.navigation.warn_(\"Can't insert a disabled block.\")}else Blockly.navigation.warn_(\"Trying to insert from the flyout when the flyout does not  exist or is not visible\")};Blockly.navigation.resetFlyout_=function(a){Blockly.navigation.getFlyoutCursor_()&&(Blockly.navigation.getFlyoutCursor_().hide(),a&&Blockly.navigation.getNavigationWorkspace().getFlyout().hide())};\nBlockly.navigation.modifyWarn_=function(){var a=Blockly.navigation.getMarker().getCurNode(),b=Blockly.navigation.getNavigationWorkspace().getCursor().getCurNode();if(!a)return Blockly.navigation.warn_(\"Cannot insert with no marked node.\"),!1;if(!b)return Blockly.navigation.warn_(\"Cannot insert with no cursor node.\"),!1;a=a.getType();b=b.getType();return a==Blockly.ASTNode.types.FIELD?(Blockly.navigation.warn_(\"Should not have been able to mark a field.\"),!1):a==Blockly.ASTNode.types.BLOCK?(Blockly.navigation.warn_(\"Should not have been able to mark a block.\"),\n!1):a==Blockly.ASTNode.types.STACK?(Blockly.navigation.warn_(\"Should not have been able to mark a stack.\"),!1):b==Blockly.ASTNode.types.FIELD?(Blockly.navigation.warn_(\"Cannot attach a field to anything else.\"),!1):b==Blockly.ASTNode.types.WORKSPACE?(Blockly.navigation.warn_(\"Cannot attach a workspace to anything else.\"),!1):!0};\nBlockly.navigation.moveBlockToWorkspace_=function(a,b){if(!a)return!1;if(a.isShadow())return Blockly.navigation.warn_(\"Cannot move a shadow block to the workspace.\"),!1;a.getParent()&&a.unplug(!1);a.moveTo(b.getWsCoordinate());return!0};\nBlockly.navigation.modify_=function(){var a=Blockly.navigation.getMarker().getCurNode(),b=Blockly.navigation.getNavigationWorkspace().getCursor().getCurNode();if(!Blockly.navigation.modifyWarn_())return!1;var c=a.getType(),d=b.getType(),e=b.getLocation(),f=a.getLocation();if(a.isConnection()&&b.isConnection())return Blockly.navigation.connect_(e,f);if(a.isConnection()&&(d==Blockly.ASTNode.types.BLOCK||d==Blockly.ASTNode.types.STACK))return Blockly.navigation.insertBlock(e,f);if(c==Blockly.ASTNode.types.WORKSPACE)return b=\nb?b.getSourceBlock():null,Blockly.navigation.moveBlockToWorkspace_(b,a);Blockly.navigation.warn_(\"Unexpected state in Blockly.navigation.modify_.\");return!1};Blockly.navigation.disconnectChild_=function(a,b){var c=a.getSourceBlock(),d=b.getSourceBlock();c.getRootBlock()==d.getRootBlock()&&(-1<c.getDescendants(!1).indexOf(d)?Blockly.navigation.getInferiorConnection_(b).disconnect():Blockly.navigation.getInferiorConnection_(a).disconnect())};\nBlockly.navigation.moveAndConnect_=function(a,b){if(!a||!b)return!1;var c=a.getSourceBlock();return a.getConnectionChecker().canConnect(a,b,!1)?(Blockly.navigation.disconnectChild_(a,b),b.isSuperior()||c.getRootBlock().positionNearConnection(a,b),b.connect(a),!0):!1};Blockly.navigation.getInferiorConnection_=function(a){var b=a.getSourceBlock();return a.isSuperior()?b.previousConnection?b.previousConnection:b.outputConnection?b.outputConnection:null:a};\nBlockly.navigation.getSuperiorConnection_=function(a){return a.isSuperior()?a:a.targetConnection?a.targetConnection:null};\nBlockly.navigation.connect_=function(a,b){if(!a||!b)return!1;var c=Blockly.navigation.getInferiorConnection_(a),d=Blockly.navigation.getSuperiorConnection_(b),e=Blockly.navigation.getSuperiorConnection_(a),f=Blockly.navigation.getInferiorConnection_(b);if(c&&d&&Blockly.navigation.moveAndConnect_(c,d)||e&&f&&Blockly.navigation.moveAndConnect_(e,f)||Blockly.navigation.moveAndConnect_(a,b))return!0;c=a.getConnectionChecker();d=c.canConnectWithReason(a,b,!1);Blockly.navigation.warn_(\"Connection failed with error: \"+\nc.getErrorMessage(d,a,b));return!1};\nBlockly.navigation.insertBlock=function(a,b){switch(b.type){case Blockly.PREVIOUS_STATEMENT:if(Blockly.navigation.connect_(a.nextConnection,b))return!0;break;case Blockly.NEXT_STATEMENT:if(Blockly.navigation.connect_(a.previousConnection,b))return!0;break;case Blockly.INPUT_VALUE:if(Blockly.navigation.connect_(a.outputConnection,b))return!0;break;case Blockly.OUTPUT_VALUE:for(var c=0;c<a.inputList.length;c++){var d=a.inputList[c].connection;if(d&&d.type===Blockly.INPUT_VALUE&&Blockly.navigation.connect_(d,\nb))return!0}if(a.outputConnection&&Blockly.navigation.connect_(a.outputConnection,b))return!0}Blockly.navigation.warn_(\"This block can not be inserted at the marked location.\");return!1};\nBlockly.navigation.disconnectBlocks_=function(){var a=Blockly.navigation.getNavigationWorkspace(),b=a.getCursor().getCurNode();if(b.isConnection()){var c=b.getLocation();c.isConnected()?(b=c.isSuperior()?c:c.targetConnection,c=c.isSuperior()?c.targetConnection:c,c.getSourceBlock().isShadow()?Blockly.navigation.log_(\"Cannot disconnect a shadow block\"):(b.disconnect(),c.bumpAwayFrom(b),b.getSourceBlock().getRootBlock().bringToFront(),b=Blockly.ASTNode.createConnectionNode(b),a.getCursor().setCurNode(b))):\nBlockly.navigation.log_(\"Cannot disconnect unconnected connection\")}else Blockly.navigation.log_(\"Cannot disconnect blocks when the cursor is not on a connection\")};Blockly.navigation.markAtCursor_=function(){Blockly.navigation.getMarker().setCurNode(Blockly.navigation.getNavigationWorkspace().getCursor().getCurNode())};Blockly.navigation.removeMark_=function(){var a=Blockly.navigation.getMarker();a.setCurNode(null);a.hide()};\nBlockly.navigation.setState=function(a){Blockly.navigation.currentState_=a};\nBlockly.navigation.moveCursorOnBlockDelete=function(a){var b=Blockly.navigation.getNavigationWorkspace();if(b&&(b=b.getCursor())){var c=b.getCurNode();c=c?c.getSourceBlock():null;c===a?c.getParent()?(a=c.previousConnection||c.outputConnection)&&b.setCurNode(Blockly.ASTNode.createConnectionNode(a.targetConnection)):b.setCurNode(Blockly.ASTNode.createWorkspaceNode(c.workspace,c.getRelativeToSurfaceXY())):c&&-1<a.getChildren(!1).indexOf(c)&&b.setCurNode(Blockly.ASTNode.createWorkspaceNode(c.workspace,\nc.getRelativeToSurfaceXY()))}};Blockly.navigation.moveCursorOnBlockMutation=function(a){var b=Blockly.navigation.getNavigationWorkspace().getCursor();if(b){var c=b.getCurNode();c=c?c.getSourceBlock():null;c===a&&b.setCurNode(Blockly.ASTNode.createBlockNode(c))}};Blockly.navigation.enableKeyboardAccessibility=function(){var a=Blockly.navigation.getNavigationWorkspace();a.keyboardAccessibilityMode||(a.keyboardAccessibilityMode=!0,Blockly.navigation.focusWorkspace_())};\nBlockly.navigation.disableKeyboardAccessibility=function(){var a=Blockly.navigation.getNavigationWorkspace();a.keyboardAccessibilityMode&&(a.keyboardAccessibilityMode=!1,a.getCursor().hide(),Blockly.navigation.getMarker().hide(),Blockly.navigation.getFlyoutCursor_()&&Blockly.navigation.getFlyoutCursor_().hide())};Blockly.navigation.log_=function(a){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback(\"log\",a):console.log(a)};\nBlockly.navigation.warn_=function(a){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback(\"warn\",a):console.warn(a)};Blockly.navigation.error_=function(a){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback(\"error\",a):console.error(a)};Blockly.navigation.onKeyPress=function(a){a=Blockly.user.keyMap.serializeKeyEvent(a);return(a=Blockly.user.keyMap.getActionByKeyCode(a))?Blockly.navigation.onBlocklyAction(a):!1};\nBlockly.navigation.onBlocklyAction=function(a){var b=Blockly.navigation.getNavigationWorkspace(),c=b.options.readOnly,d=!1;b.keyboardAccessibilityMode?c?-1<Blockly.navigation.READONLY_ACTION_LIST.indexOf(a)&&(d=Blockly.navigation.handleActions_(a)):d=Blockly.navigation.handleActions_(a):a.name===Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(Blockly.navigation.enableKeyboardAccessibility(),d=!0);return d};\nBlockly.navigation.handleActions_=function(a){return a.name==Blockly.navigation.actionNames.TOOLBOX||Blockly.navigation.currentState_==Blockly.navigation.STATE_TOOLBOX?Blockly.navigation.toolboxOnAction_(a):a.name==Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV?(Blockly.navigation.disableKeyboardAccessibility(),!0):Blockly.navigation.currentState_==Blockly.navigation.STATE_WS?Blockly.navigation.workspaceOnAction_(a):Blockly.navigation.currentState_==Blockly.navigation.STATE_FLYOUT?Blockly.navigation.flyoutOnAction_(a):\n!1};Blockly.navigation.flyoutOnAction_=function(a){var b=Blockly.navigation.getNavigationWorkspace(),c=b.getToolbox();if((b=c?c.getFlyout():b.getFlyout())&&b.onBlocklyAction(a))return!0;switch(a.name){case Blockly.navigation.actionNames.OUT:return Blockly.navigation.focusToolbox_(),!0;case Blockly.navigation.actionNames.MARK:return Blockly.navigation.insertFromFlyout(),!0;case Blockly.navigation.actionNames.EXIT:return Blockly.navigation.focusWorkspace_(),!0;default:return!1}};\nBlockly.navigation.toolboxOnAction_=function(a){var b=Blockly.navigation.getNavigationWorkspace(),c=b.getToolbox();return c&&\"function\"==typeof c.onBlocklyAction&&c.onBlocklyAction(a)?!0:a.name===Blockly.navigation.actionNames.TOOLBOX?(b.getToolbox()?Blockly.navigation.focusToolbox_():Blockly.navigation.focusFlyout_(),!0):a.name===Blockly.navigation.actionNames.IN?(Blockly.navigation.focusFlyout_(),!0):a.name===Blockly.navigation.actionNames.EXIT?(Blockly.navigation.focusWorkspace_(),!0):!1};\nBlockly.navigation.moveWSCursor_=function(a,b){var c=Blockly.navigation.getNavigationWorkspace(),d=c.getCursor(),e=c.getCursor().getCurNode();if(e.getType()!==Blockly.ASTNode.types.WORKSPACE)return!1;e=e.getWsCoordinate();d.setCurNode(Blockly.ASTNode.createWorkspaceNode(c,new Blockly.utils.Coordinate(a*Blockly.navigation.WS_MOVE_DISTANCE+e.x,b*Blockly.navigation.WS_MOVE_DISTANCE+e.y)));return!0};\nBlockly.navigation.workspaceOnAction_=function(a){if(Blockly.navigation.getNavigationWorkspace().getCursor().onBlocklyAction(a))return!0;switch(a.name){case Blockly.navigation.actionNames.INSERT:return Blockly.navigation.modify_(),!0;case Blockly.navigation.actionNames.MARK:return Blockly.navigation.handleEnterForWS_(),!0;case Blockly.navigation.actionNames.DISCONNECT:return Blockly.navigation.disconnectBlocks_(),!0;case Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP:return Blockly.navigation.moveWSCursor_(0,\n-1);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN:return Blockly.navigation.moveWSCursor_(0,1);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT:return Blockly.navigation.moveWSCursor_(-1,0);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:return Blockly.navigation.moveWSCursor_(1,0);default:return!1}};\nBlockly.navigation.handleEnterForWS_=function(){var a=Blockly.navigation.getNavigationWorkspace().getCursor().getCurNode(),b=a.getType();b==Blockly.ASTNode.types.FIELD?a.getLocation().showEditor():a.isConnection()||b==Blockly.ASTNode.types.WORKSPACE?Blockly.navigation.markAtCursor_():b==Blockly.ASTNode.types.BLOCK?Blockly.navigation.warn_(\"Cannot mark a block.\"):b==Blockly.ASTNode.types.STACK&&Blockly.navigation.warn_(\"Cannot mark a stack.\")};\nBlockly.navigation.ACTION_PREVIOUS=new Blockly.Action(Blockly.navigation.actionNames.PREVIOUS,\"Go to the previous location.\");Blockly.navigation.ACTION_OUT=new Blockly.Action(Blockly.navigation.actionNames.OUT,\"Go to the parent of the current location.\");Blockly.navigation.ACTION_NEXT=new Blockly.Action(Blockly.navigation.actionNames.NEXT,\"Go to the next location.\");Blockly.navigation.ACTION_IN=new Blockly.Action(Blockly.navigation.actionNames.IN,\"Go to the first child of the current location.\");\nBlockly.navigation.ACTION_INSERT=new Blockly.Action(Blockly.navigation.actionNames.INSERT,\"Connect the current location to the marked location.\");Blockly.navigation.ACTION_MARK=new Blockly.Action(Blockly.navigation.actionNames.MARK,\"Mark the current location.\");Blockly.navigation.ACTION_DISCONNECT=new Blockly.Action(Blockly.navigation.actionNames.DISCONNECT,\"Disconnect the block at the current location from its parent.\");\nBlockly.navigation.ACTION_TOOLBOX=new Blockly.Action(Blockly.navigation.actionNames.TOOLBOX,\"Open the toolbox.\");Blockly.navigation.ACTION_EXIT=new Blockly.Action(Blockly.navigation.actionNames.EXIT,\"Close the current modal, such as a toolbox or field editor.\");Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new Blockly.Action(Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV,\"Turns on and off keyboard navigation.\");\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT,\"Move the workspace cursor to the lefts.\");Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,\"Move the workspace cursor to the right.\");Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP,\"Move the workspace cursor up.\");\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN,\"Move the workspace cursor down.\");Blockly.navigation.READONLY_ACTION_LIST=[Blockly.navigation.ACTION_PREVIOUS,Blockly.navigation.ACTION_OUT,Blockly.navigation.ACTION_IN,Blockly.navigation.ACTION_NEXT,Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV];Blockly.Gesture=function(a,b){this.mouseDownXY_=null;this.currentDragDeltaXY_=new Blockly.utils.Coordinate(0,0);this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null;this.creatorWorkspace_=b;this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1;this.mostRecentEvent_=a;this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null;this.isEnding_=this.hasStarted_=\nthis.calledUpdateIsDragging_=!1;this.healStack_=!Blockly.DRAG_STACK};Blockly.Gesture.prototype.dispose=function(){Blockly.Touch.clearTouchIdentifier();Blockly.Tooltip.unblock();this.creatorWorkspace_.clearGesture();this.onMoveWrapper_&&Blockly.unbindEvent_(this.onMoveWrapper_);this.onUpWrapper_&&Blockly.unbindEvent_(this.onUpWrapper_);this.blockDragger_&&this.blockDragger_.dispose();this.workspaceDragger_&&this.workspaceDragger_.dispose();this.bubbleDragger_&&this.bubbleDragger_.dispose()};\nBlockly.Gesture.prototype.updateFromEvent_=function(a){var b=new Blockly.utils.Coordinate(a.clientX,a.clientY);this.updateDragDelta_(b)&&(this.updateIsDragging_(),Blockly.longStop_());this.mostRecentEvent_=a};\nBlockly.Gesture.prototype.updateDragDelta_=function(a){this.currentDragDeltaXY_=Blockly.utils.Coordinate.difference(a,this.mouseDownXY_);return this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=Blockly.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?Blockly.FLYOUT_DRAG_RADIUS:Blockly.DRAG_RADIUS)};\nBlockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return this.targetBlock_&&this.flyout_.isBlockCreatable_(this.targetBlock_)?!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),\n!0):!1:!1};Blockly.Gesture.prototype.updateIsDraggingBubble_=function(){if(!this.startBubble_)return!1;this.isDraggingBubble_=!0;this.startDraggingBubble_();return!0};Blockly.Gesture.prototype.updateIsDraggingBlock_=function(){if(!this.targetBlock_)return!1;this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0);return this.isDraggingBlock_?(this.startDraggingBlock_(),!0):!1};\nBlockly.Gesture.prototype.updateIsDraggingWorkspace_=function(){if(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())this.workspaceDragger_=this.flyout_?new Blockly.FlyoutDragger(this.flyout_):new Blockly.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag()};\nBlockly.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error(\"updateIsDragging_ should only be called once per gesture.\");this.calledUpdateIsDragging_=!0;this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()};\nBlockly.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new Blockly.BlockDragger(this.targetBlock_,this.startWorkspace_);this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_);this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)};\nBlockly.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new Blockly.BubbleDragger(this.startBubble_,this.startWorkspace_);this.bubbleDragger_.startBubbleDrag();this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)};\nBlockly.Gesture.prototype.doStart=function(a){Blockly.utils.isTargetInput(a)?this.cancel():(this.hasStarted_=!0,Blockly.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),Blockly.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=a,Blockly.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&a.shiftKey&&this.targetBlock_.workspace.keyboardAccessibilityMode?\nthis.creatorWorkspace_.getCursor().setCurNode(Blockly.ASTNode.createTopNode(this.targetBlock_)):this.targetBlock_.select()),Blockly.utils.isRightButton(a)?this.handleRightClick(a):(\"touchstart\"!=a.type.toLowerCase()&&\"pointerdown\"!=a.type.toLowerCase()||\"mouse\"==a.pointerType||Blockly.longStart(a,this),this.mouseDownXY_=new Blockly.utils.Coordinate(a.clientX,a.clientY),this.healStack_=a.altKey||a.ctrlKey||a.metaKey,this.bindMouseEvents(a)))};\nBlockly.Gesture.prototype.bindMouseEvents=function(a){this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,\"mousemove\",null,this.handleMove.bind(this));this.onUpWrapper_=Blockly.bindEventWithChecks_(document,\"mouseup\",null,this.handleUp.bind(this));a.preventDefault();a.stopPropagation()};\nBlockly.Gesture.prototype.handleMove=function(a){this.updateFromEvent_(a);this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_);a.preventDefault();a.stopPropagation()};\nBlockly.Gesture.prototype.handleUp=function(a){this.updateFromEvent_(a);Blockly.longStop_();this.isEnding_?console.log(\"Trying to end a gesture recursively.\"):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(a,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(a,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():\nthis.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(a),a.preventDefault(),a.stopPropagation(),this.dispose())};\nBlockly.Gesture.prototype.cancel=function(){this.isEnding_||(Blockly.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())};\nBlockly.Gesture.prototype.handleRightClick=function(a){this.targetBlock_?(this.bringBlockToFront_(),Blockly.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(a)):this.startBubble_?this.startBubble_.showContextMenu(a):this.startWorkspace_&&!this.flyout_&&(Blockly.hideChaff(),this.startWorkspace_.showContextMenu(a));a.preventDefault();a.stopPropagation();this.dispose()};\nBlockly.Gesture.prototype.handleWsStart=function(a,b){if(this.hasStarted_)throw Error(\"Tried to call gesture.handleWsStart, but the gesture had already been started.\");this.setStartWorkspace_(b);this.mostRecentEvent_=a;this.doStart(a);this.startWorkspace_.keyboardAccessibilityMode&&Blockly.navigation.setState(Blockly.navigation.STATE_WS)};Blockly.Gesture.prototype.fireWorkspaceClick_=function(a){var b=new Blockly.Events.Ui(null,\"click\",null,\"workspace\");b.workspaceId=a.id;Blockly.Events.fire(b)};\nBlockly.Gesture.prototype.handleFlyoutStart=function(a,b){if(this.hasStarted_)throw Error(\"Tried to call gesture.handleFlyoutStart, but the gesture had already been started.\");this.setStartFlyout_(b);this.handleWsStart(a,b.getWorkspace())};Blockly.Gesture.prototype.handleBlockStart=function(a,b){if(this.hasStarted_)throw Error(\"Tried to call gesture.handleBlockStart, but the gesture had already been started.\");this.setStartBlock(b);this.mostRecentEvent_=a};\nBlockly.Gesture.prototype.handleBubbleStart=function(a,b){if(this.hasStarted_)throw Error(\"Tried to call gesture.handleBubbleStart, but the gesture had already been started.\");this.setStartBubble(b);this.mostRecentEvent_=a};Blockly.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus();this.startBubble_.select&&this.startBubble_.select()};Blockly.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_);this.bringBlockToFront_()};\nBlockly.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):Blockly.Events.fire(new Blockly.Events.Ui(this.startBlock_,\"click\",void 0,\"block\"));this.bringBlockToFront_();Blockly.Events.setGroup(!1)};\nBlockly.Gesture.prototype.doWorkspaceClick_=function(a){var b=this.creatorWorkspace_;a.shiftKey&&b.keyboardAccessibilityMode?(a=new Blockly.utils.Coordinate(a.clientX,a.clientY),a=Blockly.utils.screenToWsCoordinates(b,a),a=Blockly.ASTNode.createWorkspaceNode(b,a),b.getCursor().setCurNode(a)):Blockly.selected&&Blockly.selected.unselect();this.fireWorkspaceClick_(this.startWorkspace_||b)};Blockly.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()};\nBlockly.Gesture.prototype.setStartField=function(a){if(this.hasStarted_)throw Error(\"Tried to call gesture.setStartField, but the gesture had already been started.\");this.startField_||(this.startField_=a)};Blockly.Gesture.prototype.setStartBubble=function(a){this.startBubble_||(this.startBubble_=a)};Blockly.Gesture.prototype.setStartBlock=function(a){this.startBlock_||this.startBubble_||(this.startBlock_=a,a.isInFlyout&&a!=a.getRootBlock()?this.setTargetBlock_(a.getRootBlock()):this.setTargetBlock_(a))};\nBlockly.Gesture.prototype.setTargetBlock_=function(a){a.isShadow()?this.setTargetBlock_(a.getParent()):this.targetBlock_=a};Blockly.Gesture.prototype.setStartWorkspace_=function(a){this.startWorkspace_||(this.startWorkspace_=a)};Blockly.Gesture.prototype.setStartFlyout_=function(a){this.flyout_||(this.flyout_=a)};Blockly.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_};\nBlockly.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()};Blockly.Gesture.prototype.isFieldClick_=function(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)};Blockly.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_};\nBlockly.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_};Blockly.Gesture.prototype.hasStarted=function(){return this.hasStarted_};Blockly.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]};Blockly.Gesture.inProgress=function(){for(var a=Blockly.Workspace.getAll(),b=0,c;c=a[b];b++)if(c.currentGesture_)return!0;return!1};Blockly.Field=function(a,b,c){this.value_=this.DEFAULT_VALUE;this.tooltip_=this.validator_=null;this.size_=new Blockly.utils.Size(0,0);this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null;c&&this.configure_(c);this.setValue(a);b&&this.setValidator(b)};Blockly.Field.prototype.DEFAULT_VALUE=null;Blockly.Field.prototype.name=void 0;Blockly.Field.prototype.disposed=!1;\nBlockly.Field.prototype.maxDisplayLength=50;Blockly.Field.prototype.sourceBlock_=null;Blockly.Field.prototype.isDirty_=!0;Blockly.Field.prototype.visible_=!0;Blockly.Field.prototype.clickTarget_=null;Blockly.Field.NBSP=\"\\u00a0\";Blockly.Field.prototype.EDITABLE=!0;Blockly.Field.prototype.SERIALIZABLE=!1;Blockly.Field.prototype.configure_=function(a){var b=a.tooltip;\"string\"==typeof b&&(b=Blockly.utils.replaceMessageReferences(a.tooltip));b&&this.setTooltip(b)};\nBlockly.Field.prototype.setSourceBlock=function(a){if(this.sourceBlock_)throw Error(\"Field already bound to a block.\");this.sourceBlock_=a};Blockly.Field.prototype.getConstants=function(){!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants());return this.constants_};Blockly.Field.prototype.getSourceBlock=function(){return this.sourceBlock_};\nBlockly.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display=\"none\"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())};Blockly.Field.prototype.initView=function(){this.createBorderRect_();this.createTextElement_()};Blockly.Field.prototype.initModel=function(){};\nBlockly.Field.prototype.createBorderRect_=function(){this.borderRect_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,\"class\":\"blocklyFieldRect\"},this.fieldGroup_)};\nBlockly.Field.prototype.createTextElement_=function(){this.textElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{\"class\":\"blocklyText\"},this.fieldGroup_);this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute(\"dominant-baseline\",\"central\");this.textContent_=document.createTextNode(\"\");this.textElement_.appendChild(this.textContent_)};\nBlockly.Field.prototype.bindEvents_=function(){Blockly.Tooltip.bindMouseEvents(this.getClickTarget_());this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),\"mousedown\",this,this.onMouseDown_)};Blockly.Field.prototype.fromXml=function(a){this.setValue(a.textContent)};Blockly.Field.prototype.toXml=function(a){a.textContent=this.getValue();return a};\nBlockly.Field.prototype.dispose=function(){Blockly.DropDownDiv.hideIfOwner(this);Blockly.WidgetDiv.hideIfOwner(this);Blockly.Tooltip.unbindMouseEvents(this.getClickTarget_());this.mouseDownWrapper_&&Blockly.unbindEvent_(this.mouseDownWrapper_);Blockly.utils.dom.removeNode(this.fieldGroup_);this.disposed=!0};\nBlockly.Field.prototype.updateEditable=function(){var a=this.fieldGroup_;this.EDITABLE&&a&&(this.sourceBlock_.isEditable()?(Blockly.utils.dom.addClass(a,\"blocklyEditableText\"),Blockly.utils.dom.removeClass(a,\"blocklyNonEditableText\"),a.style.cursor=this.CURSOR):(Blockly.utils.dom.addClass(a,\"blocklyNonEditableText\"),Blockly.utils.dom.removeClass(a,\"blocklyEditableText\"),a.style.cursor=\"\"))};\nBlockly.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&\"function\"===typeof this.showEditor_};Blockly.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()};\nBlockly.Field.prototype.isSerializable=function(){var a=!1;this.name&&(this.SERIALIZABLE?a=!0:this.EDITABLE&&(console.warn(\"Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization.\"),a=!0));return a};Blockly.Field.prototype.isVisible=function(){return this.visible_};\nBlockly.Field.prototype.setVisible=function(a){if(this.visible_!=a){this.visible_=a;var b=this.getSvgRoot();b&&(b.style.display=a?\"block\":\"none\")}};Blockly.Field.prototype.setValidator=function(a){this.validator_=a};Blockly.Field.prototype.getValidator=function(){return this.validator_};Blockly.Field.prototype.classValidator=function(a){Blockly.utils.deprecation.warn(\"Field.prototype.classValidator\",\"May 2019\",\"December 2020\",\"Blockly.Field.prototype.doClassValidation_\");return a};\nBlockly.Field.prototype.callValidator=function(a){Blockly.utils.deprecation.warn(\"Field.prototype.callValidator\",\"May 2019\",\"December 2020\");var b=this.classValidator(a);if(null===b)return null;void 0!==b&&(a=b);if(b=this.getValidator()){b=b.call(this,a);if(null===b)return null;void 0!==b&&(a=b)}return a};Blockly.Field.prototype.getSvgRoot=function(){return this.fieldGroup_};Blockly.Field.prototype.applyColour=function(){};\nBlockly.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_());this.updateSize_()};Blockly.Field.prototype.showEditor=function(a){this.isClickable()&&this.showEditor_(a)};Blockly.Field.prototype.updateWidth=function(){Blockly.utils.deprecation.warn(\"Field.prototype.updateWidth\",\"May 2019\",\"December 2020\",\"Blockly.Field.prototype.updateSize_ or Blockly.utils.dom.getTextWidth\");this.updateSize_()};\nBlockly.Field.prototype.updateSize_=function(a){var b=this.getConstants();a=void 0!=a?a:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=2*a,d=b.FIELD_TEXT_HEIGHT,e=0;this.textElement_&&(e=Blockly.utils.dom.getFastTextWidth(this.textElement_,b.FIELD_TEXT_FONTSIZE,b.FIELD_TEXT_FONTWEIGHT,b.FIELD_TEXT_FONTFAMILY),c+=e);this.borderRect_&&(d=Math.max(d,b.FIELD_BORDER_RECT_HEIGHT));this.size_.height=d;this.size_.width=c;this.positionTextElement_(a,e);this.positionBorderRect_()};\nBlockly.Field.prototype.positionTextElement_=function(a,b){if(this.textElement_){var c=this.getConstants(),d=this.size_.height/2;this.textElement_.setAttribute(\"x\",this.sourceBlock_.RTL?this.size_.width-b-a:a);this.textElement_.setAttribute(\"y\",c.FIELD_TEXT_BASELINE_CENTER?d:d-c.FIELD_TEXT_HEIGHT/2+c.FIELD_TEXT_BASELINE)}};\nBlockly.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute(\"width\",this.size_.width),this.borderRect_.setAttribute(\"height\",this.size_.height),this.borderRect_.setAttribute(\"rx\",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute(\"ry\",this.getConstants().FIELD_BORDER_RECT_RADIUS))};\nBlockly.Field.prototype.getSize=function(){if(!this.isVisible())return new Blockly.utils.Size(0,0);this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn(\"Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.\"),this.render_());return this.size_};\nBlockly.Field.prototype.getScaledBBox=function(){if(this.borderRect_)a=this.borderRect_.getBoundingClientRect(),c=Blockly.utils.style.getPageOffset(this.borderRect_),d=a.width,a=a.height;else{var a=this.sourceBlock_.getHeightWidth(),b=this.sourceBlock_.workspace.scale,c=this.getAbsoluteXY_(),d=a.width*b;a=a.height*b;Blockly.utils.userAgent.GECKO?(c.x+=1.5*b,c.y+=1.5*b):Blockly.utils.userAgent.EDGE||Blockly.utils.userAgent.IE||(c.x-=.5*b,c.y-=.5*b);d+=1*b;a+=1*b}return new Blockly.utils.Rect(c.y,c.y+\na,c.x,c.x+d)};Blockly.Field.prototype.getDisplayText_=function(){var a=this.getText();if(!a)return Blockly.Field.NBSP;a.length>this.maxDisplayLength&&(a=a.substring(0,this.maxDisplayLength-2)+\"\\u2026\");a=a.replace(/\\s/g,Blockly.Field.NBSP);this.sourceBlock_&&this.sourceBlock_.RTL&&(a+=\"\\u200f\");return a};Blockly.Field.prototype.getText=function(){if(this.getText_){var a=this.getText_.call(this);if(null!==a)return String(a)}return String(this.getValue())};\nBlockly.Field.prototype.setText=function(a){Blockly.utils.deprecation.warn(\"Field.prototype.setText\",\"May 2019\",\"December 2020\",\"Blockly.Field.prototype.setValue\");throw Error(\"setText method is deprecated\");};Blockly.Field.prototype.markDirty=function(){this.isDirty_=!0;this.constants_=null};Blockly.Field.prototype.forceRerender=function(){this.isDirty_=!0;this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())};\nBlockly.Field.prototype.setValue=function(a){if(null!==a){var b=this.doClassValidation_(a);a=this.processValidation_(a,b);if(!(a instanceof Error)){if(b=this.getValidator())if(b=b.call(this,a),a=this.processValidation_(a,b),a instanceof Error)return;b=this.sourceBlock_;if(!b||!b.disposed){var c=this.getValue();c!==a&&(b&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(b,\"field\",this.name||null,c,a)),this.doValueUpdate_(a),this.isDirty_&&this.forceRerender())}}}};\nBlockly.Field.prototype.processValidation_=function(a,b){if(null===b)return this.doValueInvalid_(a),this.isDirty_&&this.forceRerender(),Error();void 0!==b&&(a=b);return a};Blockly.Field.prototype.getValue=function(){return this.value_};Blockly.Field.prototype.doClassValidation_=function(a){return null===a||void 0===a?null:a=this.classValidator(a)};Blockly.Field.prototype.doValueUpdate_=function(a){this.value_=a;this.isDirty_=!0};Blockly.Field.prototype.doValueInvalid_=function(a){};\nBlockly.Field.prototype.onMouseDown_=function(a){this.sourceBlock_&&this.sourceBlock_.workspace&&(a=this.sourceBlock_.workspace.getGesture(a))&&a.setStartField(this)};Blockly.Field.prototype.setTooltip=function(a){a||\"\"===a||(a=this.sourceBlock_);var b=this.getClickTarget_();b?b.tooltip=a:this.tooltip_=a};Blockly.Field.prototype.getTooltip=function(){var a=this.getClickTarget_();return a?Blockly.Tooltip.getTooltipOfObject(a):Blockly.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})};\nBlockly.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()};Blockly.Field.prototype.getAbsoluteXY_=function(){return Blockly.utils.style.getPageOffset(this.getClickTarget_())};Blockly.Field.prototype.referencesVariables=function(){return!1};Blockly.Field.prototype.getParentInput=function(){for(var a=null,b=this.sourceBlock_,c=b.inputList,d=0;d<b.inputList.length;d++)for(var e=c[d],f=e.fieldRow,g=0;g<f.length;g++)if(f[g]===this){a=e;break}return a};\nBlockly.Field.prototype.getFlipRtl=function(){return!1};Blockly.Field.prototype.isTabNavigable=function(){return!1};Blockly.Field.prototype.onBlocklyAction=function(a){return!1};Blockly.Field.prototype.setCursorSvg=function(a){a?(this.fieldGroup_.appendChild(a),this.cursorSvg_=a):this.cursorSvg_=null};Blockly.Field.prototype.setMarkerSvg=function(a){a?(this.fieldGroup_.appendChild(a),this.markerSvg_=a):this.markerSvg_=null};\nBlockly.Field.prototype.updateMarkers_=function(){var a=this.sourceBlock_.workspace;a.keyboardAccessibilityMode&&this.cursorSvg_&&a.getCursor().draw();a.keyboardAccessibilityMode&&this.markerSvg_&&a.getMarker(Blockly.navigation.MARKER_NAME).draw()};Blockly.FieldLabel=function(a,b,c){this.class_=null;Blockly.FieldLabel.superClass_.constructor.call(this,a,null,c);c||(this.class_=b||null)};Blockly.utils.object.inherits(Blockly.FieldLabel,Blockly.Field);Blockly.FieldLabel.prototype.DEFAULT_VALUE=\"\";Blockly.FieldLabel.fromJson=function(a){var b=Blockly.utils.replaceMessageReferences(a.text);return new Blockly.FieldLabel(b,void 0,a)};Blockly.FieldLabel.prototype.EDITABLE=!1;\nBlockly.FieldLabel.prototype.configure_=function(a){Blockly.FieldLabel.superClass_.configure_.call(this,a);this.class_=a[\"class\"]};Blockly.FieldLabel.prototype.initView=function(){this.createTextElement_();this.class_&&Blockly.utils.dom.addClass(this.textElement_,this.class_)};Blockly.FieldLabel.prototype.doClassValidation_=function(a){return null===a||void 0===a?null:String(a)};\nBlockly.FieldLabel.prototype.setClass=function(a){this.textElement_&&(this.class_&&Blockly.utils.dom.removeClass(this.textElement_,this.class_),a&&Blockly.utils.dom.addClass(this.textElement_,a));this.class_=a};Blockly.fieldRegistry.register(\"field_label\",Blockly.FieldLabel);Blockly.Input=function(a,b,c,d){if(a!=Blockly.DUMMY_INPUT&&!b)throw Error(\"Value inputs and statement inputs must have non-empty name.\");this.type=a;this.name=b;this.sourceBlock_=c;this.connection=d;this.fieldRow=[]};Blockly.Input.prototype.align=Blockly.ALIGN_LEFT;Blockly.Input.prototype.visible_=!0;Blockly.Input.prototype.getSourceBlock=function(){return this.sourceBlock_};Blockly.Input.prototype.appendField=function(a,b){this.insertFieldAt(this.fieldRow.length,a,b);return this};\nBlockly.Input.prototype.insertFieldAt=function(a,b,c){if(0>a||a>this.fieldRow.length)throw Error(\"index \"+a+\" out of bounds.\");if(!(b||\"\"==b&&c))return a;\"string\"==typeof b&&(b=new Blockly.FieldLabel(b));b.setSourceBlock(this.sourceBlock_);this.sourceBlock_.rendered&&(b.init(),b.applyColour());b.name=c;b.setVisible(this.isVisible());c=b;c.prefixField&&(a=this.insertFieldAt(a,c.prefixField));this.fieldRow.splice(a,0,b);++a;c.suffixField&&(a=this.insertFieldAt(a,c.suffixField));this.sourceBlock_.rendered&&\n(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours());return a};Blockly.Input.prototype.removeField=function(a,b){for(var c=0,d;d=this.fieldRow[c];c++)if(d.name===a)return d.dispose(),this.fieldRow.splice(c,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(b)return!1;throw Error('Field \"'+a+'\" not found.');};Blockly.Input.prototype.isVisible=function(){return this.visible_};\nBlockly.Input.prototype.setVisible=function(a){var b=[];if(this.visible_==a)return b;this.visible_=a;for(var c=0,d;d=this.fieldRow[c];c++)d.setVisible(a);this.connection&&(this.connection=this.connection,a?b=this.connection.startTrackingAll():this.connection.stopTrackingAll(),c=this.connection.targetBlock())&&(c.getSvgRoot().style.display=a?\"block\":\"none\");return b};Blockly.Input.prototype.markDirty=function(){for(var a=0,b;b=this.fieldRow[a];a++)b.markDirty()};\nBlockly.Input.prototype.setCheck=function(a){if(!this.connection)throw Error(\"This input does not have a connection.\");this.connection.setCheck(a);return this};Blockly.Input.prototype.setAlign=function(a){this.align=a;this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render());return this};Blockly.Input.prototype.setShadowDom=function(a){if(!this.connection)throw Error(\"This input does not have a connection.\");this.connection.setShadowDom(a);return this};\nBlockly.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error(\"This input does not have a connection.\");return this.connection.getShadowDom()};Blockly.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var a=0;a<this.fieldRow.length;a++)this.fieldRow[a].init()};Blockly.Input.prototype.dispose=function(){for(var a=0,b;b=this.fieldRow[a];a++)b.dispose();this.connection&&this.connection.dispose();this.sourceBlock_=null};Blockly.Block=function(a,b,c){if(Blockly.Generator&&\"undefined\"!=typeof Blockly.Generator.prototype[b])throw Error('Block prototypeName \"'+b+'\" conflicts with Blockly.Generator members.');this.id=c&&!a.getBlockById(c)?c:Blockly.utils.genUid();a.setBlockById(this.id,this);this.previousConnection=this.nextConnection=this.outputConnection=null;this.inputList=[];this.inputsInline=void 0;this.disabled=!1;this.tooltip=\"\";this.contextMenu=!0;this.parentBlock_=null;this.childBlocks_=[];this.editable_=this.movable_=\nthis.deletable_=!0;this.collapsed_=this.isShadow_=!1;this.comment=this.outputShape_=null;this.commentModel={text:null,pinned:!1,size:new Blockly.utils.Size(160,80)};this.xy_=new Blockly.utils.Coordinate(0,0);this.workspace=a;this.isInFlyout=a.isFlyout;this.isInMutator=a.isMutator;this.RTL=a.RTL;this.isInsertionMarker_=!1;this.hat=void 0;this.rendered=null;this.statementInputCount=0;if(b){this.type=b;c=Blockly.Blocks[b];if(!c||\"object\"!=typeof c)throw TypeError(\"Unknown block type: \"+b);Blockly.utils.object.mixin(this,\nc)}a.addTopBlock(this);a.addTypedBlock(this);(a=Blockly.Events.getGroup())||Blockly.Events.setGroup(!0);b=Blockly.Events.recordUndo;try{\"function\"==typeof this.init&&(Blockly.Events.recordUndo=!1,this.init(),Blockly.Events.recordUndo=b),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(this))}finally{a||Blockly.Events.setGroup(!1),Blockly.Events.recordUndo=b}this.inputsInlineDefault=this.inputsInline;\"function\"==typeof this.onchange&&this.setOnChange(this.onchange)};\nBlockly.Block.COLLAPSED_INPUT_NAME=\"_TEMP_COLLAPSED_INPUT\";Blockly.Block.COLLAPSED_FIELD_NAME=\"_TEMP_COLLAPSED_FIELD\";Blockly.Block.prototype.data=null;Blockly.Block.prototype.disposed=!1;Blockly.Block.prototype.hue_=null;Blockly.Block.prototype.colour_=\"#000000\";Blockly.Block.prototype.styleName_=null;\nBlockly.Block.prototype.dispose=function(a){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_);this.unplug(a);Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockDelete(this));Blockly.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null);Blockly.selected==this&&(Blockly.selected=null);for(var b=this.childBlocks_.length-\n1;0<=b;b--)this.childBlocks_[b].dispose(!1);b=0;for(var c;c=this.inputList[b];b++)c.dispose();this.inputList.length=0;var d=this.getConnections_(!0);b=0;for(var e;e=d[b];b++)e.dispose()}finally{Blockly.Events.enable(),this.disposed=!0}}};Blockly.Block.prototype.initModel=function(){for(var a=0,b;b=this.inputList[a];a++)for(var c=0,d;d=b.fieldRow[c];c++)d.initModel&&d.initModel()};Blockly.Block.prototype.unplug=function(a){this.outputConnection?this.unplugFromRow_(a):this.previousConnection&&this.unplugFromStack_(a)};\nBlockly.Block.prototype.unplugFromRow_=function(a){var b=null;this.outputConnection.isConnected()&&(b=this.outputConnection.targetConnection,this.outputConnection.disconnect());if(b&&a&&(a=this.getOnlyValueConnection_())&&a.isConnected()&&!a.targetBlock().isShadow())if(a=a.targetConnection,a.disconnect(),this.workspace.connectionChecker.canConnect(a,b,!1))b.connect(a);else a.onFailedConnect(b)};\nBlockly.Block.prototype.getOnlyValueConnection_=function(){for(var a=null,b=0;b<this.inputList.length;b++){var c=this.inputList[b].connection;if(c&&c.type==Blockly.INPUT_VALUE&&c.targetConnection){if(a)return null;a=c}}return a};\nBlockly.Block.prototype.unplugFromStack_=function(a){var b=null;this.previousConnection.isConnected()&&(b=this.previousConnection.targetConnection,this.previousConnection.disconnect());var c=this.getNextBlock();a&&c&&!c.isShadow()&&(a=this.nextConnection.targetConnection,a.disconnect(),b&&this.workspace.connectionChecker.canConnect(b,a,!1)&&b.connect(a))};\nBlockly.Block.prototype.getConnections_=function(a){a=[];this.outputConnection&&a.push(this.outputConnection);this.previousConnection&&a.push(this.previousConnection);this.nextConnection&&a.push(this.nextConnection);for(var b=0,c;c=this.inputList[b];b++)c.connection&&a.push(c.connection);return a};Blockly.Block.prototype.lastConnectionInStack=function(){for(var a=this.nextConnection;a;){var b=a.targetBlock();if(!b)return a;a=b.nextConnection}return null};Blockly.Block.prototype.bumpNeighbours=function(){console.warn(\"Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.\")};\nBlockly.Block.prototype.getParent=function(){return this.parentBlock_};Blockly.Block.prototype.getInputWithBlock=function(a){for(var b=0,c;c=this.inputList[b];b++)if(c.connection&&c.connection.targetBlock()==a)return c;return null};Blockly.Block.prototype.getSurroundParent=function(){var a=this;do{var b=a;a=a.getParent();if(!a)return null}while(a.getNextBlock()==b);return a};Blockly.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()};\nBlockly.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()};Blockly.Block.prototype.getFirstStatementConnection=function(){for(var a=0,b;b=this.inputList[a];a++)if(b.connection&&b.connection.type==Blockly.NEXT_STATEMENT)return b.connection;return null};Blockly.Block.prototype.getRootBlock=function(){var a=this;do{var b=a;a=b.parentBlock_}while(a);return b};\nBlockly.Block.prototype.getTopStackBlock=function(){var a=this;do var b=a.getPreviousBlock();while(b&&b.getNextBlock()==a&&(a=b));return a};Blockly.Block.prototype.getChildren=function(a){if(!a)return this.childBlocks_;a=[];for(var b=0,c;c=this.inputList[b];b++)c.connection&&(c=c.connection.targetBlock())&&a.push(c);(b=this.getNextBlock())&&a.push(b);return a};\nBlockly.Block.prototype.setParent=function(a){if(a!=this.parentBlock_){if(this.parentBlock_){Blockly.utils.arrayRemove(this.parentBlock_.childBlocks_,this);if(this.previousConnection&&this.previousConnection.isConnected())throw Error(\"Still connected to previous block.\");if(this.outputConnection&&this.outputConnection.isConnected())throw Error(\"Still connected to parent block.\");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=a)?a.childBlocks_.push(this):this.workspace.addTopBlock(this)}};\nBlockly.Block.prototype.getDescendants=function(a){for(var b=[this],c=this.getChildren(a),d,e=0;d=c[e];e++)b.push.apply(b,d.getDescendants(a));return b};Blockly.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)};Blockly.Block.prototype.setDeletable=function(a){this.deletable_=a};Blockly.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)};\nBlockly.Block.prototype.setMovable=function(a){this.movable_=a};Blockly.Block.prototype.isDuplicatable=function(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(this,!0)):!0};Blockly.Block.prototype.isShadow=function(){return this.isShadow_};Blockly.Block.prototype.setShadow=function(a){this.isShadow_=a};Blockly.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_};\nBlockly.Block.prototype.setInsertionMarker=function(a){this.isInsertionMarker_=a};Blockly.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)};Blockly.Block.prototype.setEditable=function(a){this.editable_=a;a=0;for(var b;b=this.inputList[a];a++)for(var c=0,d;d=b.fieldRow[c];c++)d.updateEditable()};Blockly.Block.prototype.isDisposed=function(){return this.disposed};\nBlockly.Block.prototype.getMatchingConnection=function(a,b){var c=this.getConnections_(!0);a=a.getConnections_(!0);if(c.length!=a.length)throw Error(\"Connection lists did not match in length.\");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};Blockly.Block.prototype.setHelpUrl=function(a){this.helpUrl=a};Blockly.Block.prototype.setTooltip=function(a){this.tooltip=a};Blockly.Block.prototype.getTooltip=function(){return Blockly.Tooltip.getTooltipOfObject(this)};\nBlockly.Block.prototype.getColour=function(){return this.colour_};Blockly.Block.prototype.getStyleName=function(){return this.styleName_};Blockly.Block.prototype.getHue=function(){return this.hue_};Blockly.Block.prototype.setColour=function(a){a=Blockly.utils.parseBlockColour(a);this.hue_=a.hue;this.colour_=a.hex};Blockly.Block.prototype.setStyle=function(a){this.styleName_=a};\nBlockly.Block.prototype.setOnChange=function(a){if(a&&\"function\"!=typeof a)throw Error(\"onchange must be a function.\");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_);if(this.onchange=a)this.onchangeWrapper_=a.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)};Blockly.Block.prototype.getField=function(a){for(var b=0,c;c=this.inputList[b];b++)for(var d=0,e;e=c.fieldRow[d];d++)if(e.name==a)return e;return null};\nBlockly.Block.prototype.getVars=function(){for(var a=[],b=0,c;c=this.inputList[b];b++)for(var d=0,e;e=c.fieldRow[d];d++)e.referencesVariables()&&a.push(e.getValue());return a};Blockly.Block.prototype.getVarModels=function(){for(var a=[],b=0,c;c=this.inputList[b];b++)for(var d=0,e;e=c.fieldRow[d];d++)e.referencesVariables()&&(e=this.workspace.getVariableById(e.getValue()))&&a.push(e);return a};\nBlockly.Block.prototype.updateVarName=function(a){for(var b=0,c;c=this.inputList[b];b++)for(var d=0,e;e=c.fieldRow[d];d++)e.referencesVariables()&&a.getId()==e.getValue()&&e.refreshVariableName()};Blockly.Block.prototype.renameVarById=function(a,b){for(var c=0,d;d=this.inputList[c];c++)for(var e=0,f;f=d.fieldRow[e];e++)f.referencesVariables()&&a==f.getValue()&&f.setValue(b)};Blockly.Block.prototype.getFieldValue=function(a){return(a=this.getField(a))?a.getValue():null};\nBlockly.Block.prototype.setFieldValue=function(a,b){var c=this.getField(b);if(!c)throw Error('Field \"'+b+'\" not found.');c.setValue(a)};\nBlockly.Block.prototype.setPreviousStatement=function(a,b){if(a){void 0===b&&(b=null);if(!this.previousConnection){if(this.outputConnection)throw Error(\"Remove output connection prior to adding previous connection.\");this.previousConnection=this.makeConnection_(Blockly.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(b)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error(\"Must disconnect previous statement before removing connection.\");this.previousConnection.dispose();\nthis.previousConnection=null}};Blockly.Block.prototype.setNextStatement=function(a,b){if(a)void 0===b&&(b=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Blockly.NEXT_STATEMENT)),this.nextConnection.setCheck(b);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error(\"Must disconnect next statement before removing connection.\");this.nextConnection.dispose();this.nextConnection=null}};\nBlockly.Block.prototype.setOutput=function(a,b){if(a){void 0===b&&(b=null);if(!this.outputConnection){if(this.previousConnection)throw Error(\"Remove previous connection prior to adding output connection.\");this.outputConnection=this.makeConnection_(Blockly.OUTPUT_VALUE)}this.outputConnection.setCheck(b)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error(\"Must disconnect output value before removing connection.\");this.outputConnection.dispose();this.outputConnection=\nnull}};Blockly.Block.prototype.setInputsInline=function(a){this.inputsInline!=a&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,\"inline\",null,this.inputsInline,a)),this.inputsInline=a)};\nBlockly.Block.prototype.getInputsInline=function(){if(void 0!=this.inputsInline)return this.inputsInline;for(var a=1;a<this.inputList.length;a++)if(this.inputList[a-1].type==Blockly.DUMMY_INPUT&&this.inputList[a].type==Blockly.DUMMY_INPUT)return!1;for(a=1;a<this.inputList.length;a++)if(this.inputList[a-1].type==Blockly.INPUT_VALUE&&this.inputList[a].type==Blockly.DUMMY_INPUT)return!0;return!1};Blockly.Block.prototype.setOutputShape=function(a){this.outputShape_=a};\nBlockly.Block.prototype.getOutputShape=function(){return this.outputShape_};Blockly.Block.prototype.setDisabled=function(a){Blockly.utils.deprecation.warn(\"Block.prototype.setDisabled\",\"May 2019\",\"May 2020\",\"Block.prototype.setEnabled\");this.setEnabled(!a)};Blockly.Block.prototype.isEnabled=function(){return!this.disabled};Blockly.Block.prototype.setEnabled=function(a){this.isEnabled()!=a&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,\"disabled\",null,this.disabled,!a)),this.disabled=!a)};\nBlockly.Block.prototype.getInheritedDisabled=function(){for(var a=this.getSurroundParent();a;){if(a.disabled)return!0;a=a.getSurroundParent()}return!1};Blockly.Block.prototype.isCollapsed=function(){return this.collapsed_};Blockly.Block.prototype.setCollapsed=function(a){this.collapsed_!=a&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,\"collapsed\",null,this.collapsed_,a)),this.collapsed_=a)};\nBlockly.Block.prototype.toString=function(a,b){function c(l){var m=l.getCheck();!m&&l.targetConnection&&(m=l.targetConnection.getCheck());return!!m&&(-1!=m.indexOf(\"Boolean\")||-1!=m.indexOf(\"Number\"))}function d(){g&&g.getType()==h.getType()&&g.getLocation()==h.getLocation()&&(g=null)}var e=[];b=b||\"?\";var f=Blockly.ASTNode.NAVIGATE_ALL_FIELDS;Blockly.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var g=Blockly.ASTNode.createBlockNode(this),h=g;g;){switch(g.getType()){case Blockly.ASTNode.types.INPUT:var k=g.getLocation();\ng.in()?c(k)&&e.push(\"(\"):e.push(b);break;case Blockly.ASTNode.types.FIELD:k=g.getLocation(),k.name!=Blockly.Block.COLLAPSED_FIELD_NAME&&e.push(k.getText())}k=g;g=k.in()||k.next();if(!g){g=k.out();for(d();g&&!g.next();)g=g.out(),d(),g&&g.getType()==Blockly.ASTNode.types.INPUT&&c(g.getLocation())&&e.push(\")\");g&&(g=g.next())}}Blockly.ASTNode.NAVIGATE_ALL_FIELDS=f;b=2;for(f=e.length;b<f;b++)\"(\"==e[b-2]&&\")\"==e[b]&&(e[b-2]=e[b-1],e.splice(b-1,2),f-=2);e=e.join(\" \").replace(/(\\() | (\\))/gmi,\"$1$2\").trim()||\n\"???\";a&&e.length>a&&(e=e.substring(0,a-3)+\"...\");return e};Blockly.Block.prototype.appendValueInput=function(a){return this.appendInput_(Blockly.INPUT_VALUE,a)};Blockly.Block.prototype.appendStatementInput=function(a){return this.appendInput_(Blockly.NEXT_STATEMENT,a)};Blockly.Block.prototype.appendDummyInput=function(a){return this.appendInput_(Blockly.DUMMY_INPUT,a||\"\")};\nBlockly.Block.prototype.jsonInit=function(a){var b=a.type?'Block \"'+a.type+'\": ':\"\";if(a.output&&a.previousStatement)throw Error(b+\"Must not have both an output and a previousStatement.\");a.style&&a.style.hat&&(this.hat=a.style.hat,a.style=null);if(a.style&&a.colour)throw Error(b+\"Must not have both a colour and a style.\");a.style?this.jsonInitStyle_(a,b):this.jsonInitColour_(a,b);for(var c=0;void 0!==a[\"message\"+c];)this.interpolate_(a[\"message\"+c],a[\"args\"+c]||[],a[\"lastDummyAlign\"+c],b),c++;void 0!==\na.inputsInline&&this.setInputsInline(a.inputsInline);void 0!==a.output&&this.setOutput(!0,a.output);void 0!==a.outputShape&&this.setOutputShape(a.outputShape);void 0!==a.previousStatement&&this.setPreviousStatement(!0,a.previousStatement);void 0!==a.nextStatement&&this.setNextStatement(!0,a.nextStatement);void 0!==a.tooltip&&(c=a.tooltip,c=Blockly.utils.replaceMessageReferences(c),this.setTooltip(c));void 0!==a.enableContextMenu&&(c=a.enableContextMenu,this.contextMenu=!!c);void 0!==a.helpUrl&&(c=\na.helpUrl,c=Blockly.utils.replaceMessageReferences(c),this.setHelpUrl(c));\"string\"==typeof a.extensions&&(console.warn(b+\"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '\"+a.type+\"' block.\"),a.extensions=[a.extensions]);void 0!==a.mutator&&Blockly.Extensions.apply(a.mutator,this,!0);if(Array.isArray(a.extensions))for(a=a.extensions,b=0;b<a.length;++b)Blockly.Extensions.apply(a[b],this,!1)};\nBlockly.Block.prototype.jsonInitColour_=function(a,b){if(\"colour\"in a)if(void 0===a.colour)console.warn(b+\"Undefined colour value.\");else{a=a.colour;try{this.setColour(a)}catch(c){console.warn(b+\"Illegal colour value: \",a)}}};Blockly.Block.prototype.jsonInitStyle_=function(a,b){a=a.style;try{this.setStyle(a)}catch(c){console.warn(b+\"Style does not exist: \",a)}};\nBlockly.Block.prototype.mixin=function(a,b){if(void 0!==b&&\"boolean\"!=typeof b)throw Error(\"opt_disableCheck must be a boolean if provided\");if(!b){b=[];for(var c in a)void 0!==this[c]&&b.push(c);if(b.length)throw Error(\"Mixin will overwrite block members: \"+JSON.stringify(b));}Blockly.utils.object.mixin(this,a)};\nBlockly.Block.prototype.interpolate_=function(a,b,c,d){var e=Blockly.utils.tokenizeInterpolation(a),f=[],g=0;a=[];for(var h=0;h<e.length;h++){var k=e[h];if(\"number\"==typeof k){if(0>=k||k>b.length)throw Error('Block \"'+this.type+'\": Message index %'+k+\" out of range.\");if(f[k])throw Error('Block \"'+this.type+'\": Message index %'+k+\" duplicated.\");f[k]=!0;g++;a.push(b[k-1])}else(k=k.trim())&&a.push(k)}if(g!=b.length)throw Error('Block \"'+this.type+'\": Message does not reference all '+b.length+\" arg(s).\");\na.length&&(\"string\"==typeof a[a.length-1]||Blockly.utils.string.startsWith(a[a.length-1].type,\"field_\"))&&(h={type:\"input_dummy\"},c&&(h.align=c),a.push(h));c={LEFT:Blockly.ALIGN_LEFT,RIGHT:Blockly.ALIGN_RIGHT,CENTRE:Blockly.ALIGN_CENTRE,CENTER:Blockly.ALIGN_CENTRE};b=[];for(h=0;h<a.length;h++)if(f=a[h],\"string\"==typeof f)b.push([f,void 0]);else{e=g=null;do if(k=!1,\"string\"==typeof f)g=new Blockly.FieldLabel(f);else switch(f.type){case \"input_value\":e=this.appendValueInput(f.name);break;case \"input_statement\":e=\nthis.appendStatementInput(f.name);break;case \"input_dummy\":e=this.appendDummyInput(f.name);break;default:g=Blockly.fieldRegistry.fromJson(f),!g&&f.alt&&(f=f.alt,k=!0)}while(k);if(g)b.push([g,f.name]);else if(e){f.check&&e.setCheck(f.check);f.align&&(g=c[f.align.toUpperCase()],void 0===g?console.warn(d+\"Illegal align value: \",f.align):e.setAlign(g));for(f=0;f<b.length;f++)e.appendField(b[f][0],b[f][1]);b.length=0}}};\nBlockly.Block.prototype.appendInput_=function(a,b){var c=null;if(a==Blockly.INPUT_VALUE||a==Blockly.NEXT_STATEMENT)c=this.makeConnection_(a);a==Blockly.NEXT_STATEMENT&&this.statementInputCount++;a=new Blockly.Input(a,b,this,c);this.inputList.push(a);return a};\nBlockly.Block.prototype.moveInputBefore=function(a,b){if(a!=b){for(var c=-1,d=b?-1:this.inputList.length,e=0,f;f=this.inputList[e];e++)if(f.name==a){if(c=e,-1!=d)break}else if(b&&f.name==b&&(d=e,-1!=c))break;if(-1==c)throw Error('Named input \"'+a+'\" not found.');if(-1==d)throw Error('Reference input \"'+b+'\" not found.');this.moveNumberedInputBefore(c,d)}};\nBlockly.Block.prototype.moveNumberedInputBefore=function(a,b){if(a==b)throw Error(\"Can't move input to itself.\");if(a>=this.inputList.length)throw RangeError(\"Input index \"+a+\" out of bounds.\");if(b>this.inputList.length)throw RangeError(\"Reference input \"+b+\" out of bounds.\");var c=this.inputList[a];this.inputList.splice(a,1);a<b&&b--;this.inputList.splice(b,0,c)};\nBlockly.Block.prototype.removeInput=function(a,b){for(var c=0,d;d=this.inputList[c];c++)if(d.name==a)return d.type==Blockly.NEXT_STATEMENT&&this.statementInputCount--,d.dispose(),this.inputList.splice(c,1),!0;if(b)return!1;throw Error(\"Input not found: \"+a);};Blockly.Block.prototype.getInput=function(a){for(var b=0,c;c=this.inputList[b];b++)if(c.name==a)return c;return null};Blockly.Block.prototype.getInputTargetBlock=function(a){return(a=this.getInput(a))&&a.connection&&a.connection.targetBlock()};\nBlockly.Block.prototype.getCommentText=function(){return this.commentModel.text};Blockly.Block.prototype.setCommentText=function(a){this.commentModel.text!=a&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,\"comment\",null,this.commentModel.text,a)),this.comment=this.commentModel.text=a)};Blockly.Block.prototype.setWarningText=function(a,b){};Blockly.Block.prototype.setMutator=function(a){};Blockly.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_};\nBlockly.Block.prototype.moveBy=function(a,b){if(this.parentBlock_)throw Error(\"Block has parent.\");var c=new Blockly.Events.BlockMove(this);this.xy_.translate(a,b);c.recordNew();Blockly.Events.fire(c)};Blockly.Block.prototype.makeConnection_=function(a){return new Blockly.Connection(this,a)};\nBlockly.Block.prototype.allInputsFilled=function(a){void 0===a&&(a=!0);if(!a&&this.isShadow())return!1;for(var b=0,c;c=this.inputList[b];b++)if(c.connection&&(c=c.connection.targetBlock(),!c||!c.allInputsFilled(a)))return!1;return(b=this.getNextBlock())?b.allInputsFilled(a):!0};Blockly.Block.prototype.toDevString=function(){var a=this.type?'\"'+this.type+'\" block':\"Block\";this.id&&(a+=' (id=\"'+this.id+'\")');return a};Blockly.blockRendering={};Blockly.blockRendering.IPathObject=function(a,b){};Blockly.utils.aria={};Blockly.utils.aria.ARIA_PREFIX_=\"aria-\";Blockly.utils.aria.ROLE_ATTRIBUTE_=\"role\";Blockly.utils.aria.Role={GRID:\"grid\",GRIDCELL:\"gridcell\",GROUP:\"group\",LISTBOX:\"listbox\",MENU:\"menu\",MENUITEM:\"menuitem\",MENUITEMCHECKBOX:\"menuitemcheckbox\",OPTION:\"option\",PRESENTATION:\"presentation\",ROW:\"row\",TREE:\"tree\",TREEITEM:\"treeitem\"};\nBlockly.utils.aria.State={ACTIVEDESCENDANT:\"activedescendant\",COLCOUNT:\"colcount\",DISABLED:\"disabled\",EXPANDED:\"expanded\",INVALID:\"invalid\",LABEL:\"label\",LABELLEDBY:\"labelledby\",LEVEL:\"level\",ORIENTATION:\"orientation\",POSINSET:\"posinset\",ROWCOUNT:\"rowcount\",SELECTED:\"selected\",SETSIZE:\"setsize\",VALUEMAX:\"valuemax\",VALUEMIN:\"valuemin\"};Blockly.utils.aria.setRole=function(a,b){a.setAttribute(Blockly.utils.aria.ROLE_ATTRIBUTE_,b)};\nBlockly.utils.aria.setState=function(a,b,c){Array.isArray(c)&&(c=c.join(\" \"));a.setAttribute(Blockly.utils.aria.ARIA_PREFIX_+b,c)};Blockly.Menu=function(){this.menuItems_=[];this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null};Blockly.Menu.prototype.addChild=function(a){this.menuItems_.push(a)};\nBlockly.Menu.prototype.render=function(a){var b=document.createElement(\"div\");b.className=\"blocklyMenu goog-menu blocklyNonSelectable\";b.tabIndex=0;this.roleName_&&Blockly.utils.aria.setRole(b,this.roleName_);this.element_=b;for(var c=0,d;d=this.menuItems_[c];c++)b.appendChild(d.createDom());this.mouseOverHandler_=Blockly.bindEventWithChecks_(b,\"mouseover\",this,this.handleMouseOver_,!0);this.clickHandler_=Blockly.bindEventWithChecks_(b,\"click\",this,this.handleClick_,!0);this.mouseEnterHandler_=Blockly.bindEventWithChecks_(b,\n\"mouseenter\",this,this.handleMouseEnter_,!0);this.mouseLeaveHandler_=Blockly.bindEventWithChecks_(b,\"mouseleave\",this,this.handleMouseLeave_,!0);this.onKeyDownHandler_=Blockly.bindEventWithChecks_(b,\"keydown\",this,this.handleKeyEvent_);a.appendChild(b)};Blockly.Menu.prototype.getElement=function(){return this.element_};Blockly.Menu.prototype.focus=function(){var a=this.getElement();a&&(a.focus({preventScroll:!0}),Blockly.utils.dom.addClass(a,\"blocklyFocused\"))};\nBlockly.Menu.prototype.blur_=function(){var a=this.getElement();a&&(a.blur(),Blockly.utils.dom.removeClass(a,\"blocklyFocused\"))};Blockly.Menu.prototype.setRole=function(a){this.roleName_=a};\nBlockly.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(Blockly.unbindEvent_(this.mouseOverHandler_),this.mouseOverHandler_=null);this.clickHandler_&&(Blockly.unbindEvent_(this.clickHandler_),this.clickHandler_=null);this.mouseEnterHandler_&&(Blockly.unbindEvent_(this.mouseEnterHandler_),this.mouseEnterHandler_=null);this.mouseLeaveHandler_&&(Blockly.unbindEvent_(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null);this.onKeyDownHandler_&&(Blockly.unbindEvent_(this.onKeyDownHandler_),\nthis.onKeyDownHandler_=null);for(var a=0,b;b=this.menuItems_[a];a++)b.dispose();this.element_=null};Blockly.Menu.prototype.getMenuItem_=function(a){for(var b=this.getElement();a&&a!=b;){if(Blockly.utils.dom.hasClass(a,\"blocklyMenuItem\"))for(var c=0,d;d=this.menuItems_[c];c++)if(d.getElement()==a)return d;a=a.parentElement}return null};\nBlockly.Menu.prototype.setHighlighted=function(a){var b=this.highlightedItem_;b&&(b.setHighlighted(!1),this.highlightedItem_=null);a&&(a.setHighlighted(!0),this.highlightedItem_=a,b=this.getElement(),Blockly.utils.style.scrollIntoContainerView(a.getElement(),b),Blockly.utils.aria.setState(b,Blockly.utils.aria.State.ACTIVEDESCENDANT,a.getId()))};Blockly.Menu.prototype.highlightNext=function(){var a=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(a,1)};\nBlockly.Menu.prototype.highlightPrevious=function(){var a=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>a?this.menuItems_.length:a,-1)};Blockly.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)};Blockly.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)};Blockly.Menu.prototype.highlightHelper_=function(a,b){a+=b;for(var c;c=this.menuItems_[a];){if(c.isEnabled()){this.setHighlighted(c);break}a+=b}};\nBlockly.Menu.prototype.handleMouseOver_=function(a){(a=this.getMenuItem_(a.target))&&(a.isEnabled()?this.highlightedItem_!=a&&this.setHighlighted(a):this.setHighlighted(null))};Blockly.Menu.prototype.handleClick_=function(a){var b=this.openingCoords;this.openingCoords=null;if(b&&\"number\"==typeof a.clientX){var c=new Blockly.utils.Coordinate(a.clientX,a.clientY);if(1>Blockly.utils.Coordinate.distance(b,c))return}(a=this.getMenuItem_(a.target))&&a.performAction()};\nBlockly.Menu.prototype.handleMouseEnter_=function(a){this.focus()};Blockly.Menu.prototype.handleMouseLeave_=function(a){this.getElement()&&(this.blur_(),this.setHighlighted(null))};\nBlockly.Menu.prototype.handleKeyEvent_=function(a){if(this.menuItems_.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.highlightedItem_;switch(a.keyCode){case Blockly.utils.KeyCodes.ENTER:case Blockly.utils.KeyCodes.SPACE:b&&b.performAction();break;case Blockly.utils.KeyCodes.UP:this.highlightPrevious();break;case Blockly.utils.KeyCodes.DOWN:this.highlightNext();break;case Blockly.utils.KeyCodes.PAGE_UP:case Blockly.utils.KeyCodes.HOME:this.highlightFirst_();break;case Blockly.utils.KeyCodes.PAGE_DOWN:case Blockly.utils.KeyCodes.END:this.highlightLast_();\nbreak;default:return}a.preventDefault();a.stopPropagation()}};Blockly.Menu.prototype.getSize=function(){var a=this.getElement(),b=Blockly.utils.style.getSize(a);b.height=a.scrollHeight;return b};Blockly.MenuItem=function(a,b){this.content_=a;this.value_=b;this.enabled_=!0;this.element_=null;this.rightToLeft_=!1;this.roleName_=null;this.highlight_=this.checked_=this.checkable_=!1;this.actionHandler_=null};\nBlockly.MenuItem.prototype.createDom=function(){var a=document.createElement(\"div\");a.id=Blockly.utils.IdGenerator.getNextUniqueId();this.element_=a;a.className=\"blocklyMenuItem goog-menuitem \"+(this.enabled_?\"\":\"blocklyMenuItemDisabled goog-menuitem-disabled \")+(this.checked_?\"blocklyMenuItemSelected goog-option-selected \":\"\")+(this.highlight_?\"blocklyMenuItemHighlight goog-menuitem-highlight \":\"\")+(this.rightToLeft_?\"blocklyMenuItemRtl goog-menuitem-rtl \":\"\");var b=document.createElement(\"div\");\nb.className=\"blocklyMenuItemContent goog-menuitem-content\";if(this.checkable_){var c=document.createElement(\"div\");c.className=\"blocklyMenuItemCheckbox goog-menuitem-checkbox\";b.appendChild(c)}c=this.content_;\"string\"==typeof this.content_&&(c=document.createTextNode(this.content_));b.appendChild(c);a.appendChild(b);this.roleName_&&Blockly.utils.aria.setRole(a,this.roleName_);Blockly.utils.aria.setState(a,Blockly.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1);Blockly.utils.aria.setState(a,\nBlockly.utils.aria.State.DISABLED,!this.enabled_);return a};Blockly.MenuItem.prototype.dispose=function(){this.element_=null};Blockly.MenuItem.prototype.getElement=function(){return this.element_};Blockly.MenuItem.prototype.getId=function(){return this.element_.id};Blockly.MenuItem.prototype.getValue=function(){return this.value_};Blockly.MenuItem.prototype.setRightToLeft=function(a){this.rightToLeft_=a};Blockly.MenuItem.prototype.setRole=function(a){this.roleName_=a};\nBlockly.MenuItem.prototype.setCheckable=function(a){this.checkable_=a};Blockly.MenuItem.prototype.setChecked=function(a){this.checked_=a};Blockly.MenuItem.prototype.setHighlighted=function(a){this.highlight_=a;var b=this.getElement();b&&this.isEnabled()&&(a?(Blockly.utils.dom.addClass(b,\"blocklyMenuItemHighlight\"),Blockly.utils.dom.addClass(b,\"goog-menuitem-highlight\")):(Blockly.utils.dom.removeClass(b,\"blocklyMenuItemHighlight\"),Blockly.utils.dom.removeClass(b,\"goog-menuitem-highlight\")))};\nBlockly.MenuItem.prototype.isEnabled=function(){return this.enabled_};Blockly.MenuItem.prototype.setEnabled=function(a){this.enabled_=a};Blockly.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)};Blockly.MenuItem.prototype.onAction=function(a,b){this.actionHandler_=a.bind(b)};Blockly.ContextMenu={};Blockly.ContextMenu.currentBlock=null;Blockly.ContextMenu.menu_=null;Blockly.ContextMenu.show=function(a,b,c){Blockly.WidgetDiv.show(Blockly.ContextMenu,c,Blockly.ContextMenu.dispose);if(b.length){var d=Blockly.ContextMenu.populate_(b,c);Blockly.ContextMenu.menu_=d;Blockly.ContextMenu.position_(d,a,c);setTimeout(function(){d.focus()},1);Blockly.ContextMenu.currentBlock=null}else Blockly.ContextMenu.hide()};\nBlockly.ContextMenu.populate_=function(a,b){var c=new Blockly.Menu;c.setRole(Blockly.utils.aria.Role.MENU);for(var d=0,e;e=a[d];d++){var f=new Blockly.MenuItem(e.text);f.setRightToLeft(b);f.setRole(Blockly.utils.aria.Role.MENUITEM);c.addChild(f);f.setEnabled(e.enabled);if(e.enabled)f.onAction(function(g){Blockly.ContextMenu.hide();this.callback(this.scope)},e)}return c};\nBlockly.ContextMenu.position_=function(a,b,c){var d=Blockly.utils.getViewportBBox();b=new Blockly.utils.Rect(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);Blockly.ContextMenu.createWidget_(a);var e=a.getSize();c&&(b.left+=e.width,b.right+=e.width,d.left+=e.width,d.right+=e.width);Blockly.WidgetDiv.positionWithAnchor(d,b,e,c);a.focus()};\nBlockly.ContextMenu.createWidget_=function(a){a.render(Blockly.WidgetDiv.DIV);var b=a.getElement();Blockly.utils.dom.addClass(b,\"blocklyContextMenu\");Blockly.bindEventWithChecks_(b,\"contextmenu\",null,Blockly.utils.noEvent);a.focus()};Blockly.ContextMenu.hide=function(){Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu);Blockly.ContextMenu.currentBlock=null};Blockly.ContextMenu.dispose=function(){Blockly.ContextMenu.menu_&&(Blockly.ContextMenu.menu_.dispose(),Blockly.ContextMenu.menu_=null)};\nBlockly.ContextMenu.callbackFactory=function(a,b){return function(){Blockly.Events.disable();try{var c=Blockly.Xml.domToBlock(b,a.workspace),d=a.getRelativeToSurfaceXY();d.x=a.RTL?d.x-Blockly.SNAP_RADIUS:d.x+Blockly.SNAP_RADIUS;d.y+=2*Blockly.SNAP_RADIUS;c.moveBy(d.x,d.y)}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!c.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(c));c.select()}};\nBlockly.ContextMenu.commentDeleteOption=function(a){return{text:Blockly.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){Blockly.Events.setGroup(!0);a.dispose(!0,!0);Blockly.Events.setGroup(!1)}}};Blockly.ContextMenu.commentDuplicateOption=function(a){return{text:Blockly.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){Blockly.duplicate(a)}}};\nBlockly.ContextMenu.workspaceCommentOption=function(a,b){if(!Blockly.WorkspaceCommentSvg)throw Error(\"Missing require for Blockly.WorkspaceCommentSvg\");var c={enabled:!Blockly.utils.userAgent.IE};c.text=Blockly.Msg.ADD_COMMENT;c.callback=function(){var d=new Blockly.WorkspaceCommentSvg(a,Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE),e=a.getInjectionDiv().getBoundingClientRect();e=new Blockly.utils.Coordinate(b.clientX-\ne.left,b.clientY-e.top);var f=a.getOriginOffsetInPixels();e=Blockly.utils.Coordinate.difference(e,f);e.scale(1/a.scale);d.moveBy(e.x,e.y);a.rendered&&(d.initSvg(),d.render(),d.select())};return c};Blockly.ContextMenuItems={};Blockly.ContextMenuItems.registerUndo=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.UNDO},preconditionFn:function(a){return 0<a.workspace.getUndoStack().length?\"enabled\":\"disabled\"},callback:function(a){a.workspace.undo(!1)},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:\"undoWorkspace\",weight:0})};\nBlockly.ContextMenuItems.registerRedo=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.REDO},preconditionFn:function(a){return 0<a.workspace.getRedoStack().length?\"enabled\":\"disabled\"},callback:function(a){a.workspace.undo(!0)},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:\"redoWorkspace\",weight:0})};\nBlockly.ContextMenuItems.registerCleanup=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.CLEAN_UP},preconditionFn:function(a){return a.workspace.isMovable()?1<a.workspace.getTopBlocks(!1).length?\"enabled\":\"disabled\":\"hidden\"},callback:function(a){a.workspace.cleanUp()},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:\"cleanWorkspace\",weight:0})};\nBlockly.ContextMenuItems.toggleOption_=function(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.setCollapsed.bind(e,a),c),e=e.getNextBlock(),c+=10};\nBlockly.ContextMenuItems.registerCollapse=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.COLLAPSE_ALL},preconditionFn:function(a){if(a.workspace.options.collapse){a=a.workspace.getTopBlocks(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return\"enabled\";c=c.getNextBlock()}return\"disabled\"}return\"hidden\"},callback:function(a){Blockly.ContextMenuItems.toggleOption_(!0,a.workspace.getTopBlocks(!0))},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\nid:\"collapseWorkspace\",weight:0})};\nBlockly.ContextMenuItems.registerExpand=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.EXPAND_ALL},preconditionFn:function(a){if(a.workspace.options.collapse){a=a.workspace.getTopBlocks(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return\"enabled\";c=c.getNextBlock()}return\"disabled\"}return\"hidden\"},callback:function(a){Blockly.ContextMenuItems.toggleOption_(!1,a.workspace.getTopBlocks(!0))},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\nid:\"expandWorkspace\",weight:0})};Blockly.ContextMenuItems.addDeletableBlocks_=function(a,b){if(a.isDeletable())Array.prototype.push.apply(b,a.getDescendants(!1));else{a=a.getChildren(!1);for(var c=0;c<a.length;c++)Blockly.ContextMenuItems.addDeletableBlocks_(a[c],b)}};Blockly.ContextMenuItems.getDeletableBlocks_=function(a){var b=[];a=a.getTopBlocks(!0);for(var c=0;c<a.length;c++)Blockly.ContextMenuItems.addDeletableBlocks_(a[c],b);return b};\nBlockly.ContextMenuItems.deleteNext_=function(a,b){Blockly.Events.setGroup(b);var c=a.shift();c&&(c.workspace?(c.dispose(!1,!0),setTimeout(Blockly.ContextMenuItems.deleteNext_,10,a,b)):Blockly.ContextMenuItems.deleteNext_(a,b));Blockly.Events.setGroup(!1)};\nBlockly.ContextMenuItems.registerDeleteAll=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){if(a.workspace)return a=Blockly.ContextMenuItems.getDeletableBlocks_(a.workspace).length,1==a?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace(\"%1\",String(a))},preconditionFn:function(a){if(a.workspace)return 0<Blockly.ContextMenuItems.getDeletableBlocks_(a.workspace).length?\"enabled\":\"disabled\"},callback:function(a){if(a.workspace){a.workspace.cancelCurrentGesture();\nvar b=Blockly.ContextMenuItems.getDeletableBlocks_(a.workspace),c=Blockly.utils.genUid();2>b.length?Blockly.ContextMenuItems.deleteNext_(b,c):Blockly.confirm(Blockly.Msg.DELETE_ALL_BLOCKS.replace(\"%1\",b.length),function(d){d&&Blockly.ContextMenuItems.deleteNext_(b,c)})}},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:\"workspaceDelete\",weight:0})};\nBlockly.ContextMenuItems.registerWorkspaceOptions_=function(){Blockly.ContextMenuItems.registerUndo();Blockly.ContextMenuItems.registerRedo();Blockly.ContextMenuItems.registerCleanup();Blockly.ContextMenuItems.registerCollapse();Blockly.ContextMenuItems.registerExpand();Blockly.ContextMenuItems.registerDeleteAll()};\nBlockly.ContextMenuItems.registerDuplicate=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.DUPLICATE_BLOCK},preconditionFn:function(a){a=a.block;return!a.isInFlyout&&a.isDeletable()&&a.isMovable()?a.isDuplicatable()?\"enabled\":\"disabled\":\"hidden\"},callback:function(a){a.block&&Blockly.duplicate(a.block)},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:\"blockDuplicate\",weight:0})};\nBlockly.ContextMenuItems.registerComment=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){return a.block.getCommentIcon()?Blockly.Msg.REMOVE_COMMENT:Blockly.Msg.ADD_COMMENT},preconditionFn:function(a){a=a.block;return Blockly.utils.userAgent.IE||a.isInFlyout||!a.workspace.options.comments||a.isCollapsed()||!a.isEditable()?\"hidden\":\"enabled\"},callback:function(a){a=a.block;a.getCommentIcon()?a.setCommentText(null):a.setCommentText(\"\")},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,\nid:\"blockComment\",weight:0})};\nBlockly.ContextMenuItems.registerInline=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){return a.block.getInputsInline()?Blockly.Msg.EXTERNAL_INPUTS:Blockly.Msg.INLINE_INPUTS},preconditionFn:function(a){a=a.block;if(!a.isInFlyout&&a.isMovable()&&!a.isCollapsed())for(var b=1;b<a.inputList.length;b++)if(a.inputList[b-1].type!=Blockly.NEXT_STATEMENT&&a.inputList[b].type!=Blockly.NEXT_STATEMENT)return\"enabled\";return\"hidden\"},callback:function(a){a.block.setInputsInline(!a.block.getInputsInline())},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,\nid:\"blockInline\",weight:0})};Blockly.ContextMenuItems.registerCollapseExpandBlock=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){return a.block.isCollapsed()?Blockly.Msg.EXPAND_BLOCK:Blockly.Msg.COLLAPSE_BLOCK},preconditionFn:function(a){a=a.block;return!a.isInFlyout&&a.isMovable()?\"enabled\":\"hidden\"},callback:function(a){a.block.setCollapsed(!a.block.isCollapsed())},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:\"blockCollapseExpand\",weight:0})};\nBlockly.ContextMenuItems.registerDisable=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){return a.block.isEnabled()?Blockly.Msg.DISABLE_BLOCK:Blockly.Msg.ENABLE_BLOCK},preconditionFn:function(a){a=a.block;return!a.isInFlyout&&a.workspace.options.disable&&a.isEditable()?a.getInheritedDisabled()?\"disabled\":\"enabled\":\"hidden\"},callback:function(a){a=a.block;var b=Blockly.Events.getGroup();b||Blockly.Events.setGroup(!0);a.setEnabled(!a.isEnabled());b||Blockly.Events.setGroup(!1)},\nscopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:\"blockDisable\",weight:0})};\nBlockly.ContextMenuItems.registerDelete=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){var b=a.block;a=b.getDescendants(!1).length;(b=b.getNextBlock())&&(a-=b.getDescendants(!1).length);return 1==a?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace(\"%1\",String(a))},preconditionFn:function(a){return!a.block.isInFlyout&&a.block.isDeletable()?\"enabled\":\"hidden\"},callback:function(a){Blockly.Events.setGroup(!0);a.block.dispose(!0,!0);Blockly.Events.setGroup(!1)},\nscopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:\"blockDelete\",weight:0})};Blockly.ContextMenuItems.registerHelp=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.HELP},preconditionFn:function(a){a=a.block;return(\"function\"==typeof a.helpUrl?a.helpUrl():a.helpUrl)?\"enabled\":\"hidden\"},callback:function(a){a.block.showHelp()},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:\"blockHelp\",weight:0})};\nBlockly.ContextMenuItems.registerBlockOptions_=function(){Blockly.ContextMenuItems.registerDuplicate();Blockly.ContextMenuItems.registerComment();Blockly.ContextMenuItems.registerInline();Blockly.ContextMenuItems.registerCollapseExpandBlock();Blockly.ContextMenuItems.registerDisable();Blockly.ContextMenuItems.registerDelete();Blockly.ContextMenuItems.registerHelp()};Blockly.ContextMenuItems.registerDefaultOptions=function(){Blockly.ContextMenuItems.registerWorkspaceOptions_();Blockly.ContextMenuItems.registerBlockOptions_()};Blockly.ContextMenuRegistry=function(){Blockly.ContextMenuRegistry.registry=this;this.registry_={};Blockly.ContextMenuItems.registerDefaultOptions()};Blockly.ContextMenuRegistry.ScopeType={BLOCK:\"block\",WORKSPACE:\"workspace\"};Blockly.ContextMenuRegistry.registry=null;Blockly.ContextMenuRegistry.prototype.register=function(a){if(this.registry_[a.id])throw Error('Menu item with id \"'+a.id+'\" is already registered.');this.registry_[a.id]=a};\nBlockly.ContextMenuRegistry.prototype.unregister=function(a){if(this.registry_[a])delete this.registry_[a];else throw Error('Menu item with id \"'+a+'\" not found.');};Blockly.ContextMenuRegistry.prototype.getItem=function(a){return this.registry_[a]?this.registry_[a]:null};\nBlockly.ContextMenuRegistry.prototype.getContextMenuOptions=function(a,b){var c=[],d=this.registry_;Object.keys(d).forEach(function(e){e=d[e];if(a==e.scopeType){var f=e.preconditionFn(b);\"hidden\"!=f&&(e={text:\"function\"==typeof e.displayText?e.displayText(b):e.displayText,enabled:\"enabled\"==f,callback:e.callback,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c};new Blockly.ContextMenuRegistry;Blockly.RenderedConnection=function(a,b){Blockly.RenderedConnection.superClass_.constructor.call(this,a,b);this.db_=a.workspace.connectionDBList[b];this.dbOpposite_=a.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[b]];this.offsetInBlock_=new Blockly.utils.Coordinate(0,0);this.trackedState_=Blockly.RenderedConnection.TrackedState.WILL_TRACK;this.targetConnection=null};Blockly.utils.object.inherits(Blockly.RenderedConnection,Blockly.Connection);\nBlockly.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1};Blockly.RenderedConnection.prototype.dispose=function(){Blockly.RenderedConnection.superClass_.dispose.call(this);this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)};Blockly.RenderedConnection.prototype.getSourceBlock=function(){return Blockly.RenderedConnection.superClass_.getSourceBlock.call(this)};Blockly.RenderedConnection.prototype.targetBlock=function(){return Blockly.RenderedConnection.superClass_.targetBlock.call(this)};\nBlockly.RenderedConnection.prototype.distanceFrom=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};\nBlockly.RenderedConnection.prototype.bumpAwayFrom=function(a){if(!this.sourceBlock_.workspace.isDragging()){var b=this.sourceBlock_.getRootBlock();if(!b.isInFlyout){var c=!1;if(!b.isMovable()){b=a.getSourceBlock().getRootBlock();if(!b.isMovable())return;a=this;c=!0}var d=Blockly.selected==b;d||b.addSelect();var e=a.x+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x,f=a.y+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.y;c&&(f=-f);b.RTL&&(e=a.x-\nBlockly.SNAP_RADIUS-Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x);b.moveBy(e,f);d||b.removeSelect()}}};\nBlockly.RenderedConnection.prototype.moveTo=function(a,b){this.trackedState_==Blockly.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,b),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,b));this.x=a;this.y=b};Blockly.RenderedConnection.prototype.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};\nBlockly.RenderedConnection.prototype.moveToOffset=function(a){this.moveTo(a.x+this.offsetInBlock_.x,a.y+this.offsetInBlock_.y)};Blockly.RenderedConnection.prototype.setOffsetInBlock=function(a,b){this.offsetInBlock_.x=a;this.offsetInBlock_.y=b};Blockly.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_};\nBlockly.RenderedConnection.prototype.tighten=function(){var a=this.targetConnection.x-this.x,b=this.targetConnection.y-this.y;if(0!=a||0!=b){var c=this.targetBlock(),d=c.getSvgRoot();if(!d)throw Error(\"block is not rendered.\");d=Blockly.utils.getRelativeXY(d);c.getSvgRoot().setAttribute(\"transform\",\"translate(\"+(d.x-a)+\",\"+(d.y-b)+\")\");c.moveConnections(-a,-b)}};Blockly.RenderedConnection.prototype.closest=function(a,b){return this.dbOpposite_.searchForClosest(this,a,b)};\nBlockly.RenderedConnection.prototype.highlight=function(){var a=this.sourceBlock_.workspace.getRenderer().getConstants();var b=a.shapeFor(this);this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE?(a=a.TAB_OFFSET_FROM_TOP,b=Blockly.utils.svgPaths.moveBy(0,-a)+Blockly.utils.svgPaths.lineOnAxis(\"v\",a)+b.pathDown+Blockly.utils.svgPaths.lineOnAxis(\"v\",a)):(a=a.NOTCH_OFFSET_LEFT-a.CORNER_RADIUS,b=Blockly.utils.svgPaths.moveBy(-a,0)+Blockly.utils.svgPaths.lineOnAxis(\"h\",a)+b.pathLeft+Blockly.utils.svgPaths.lineOnAxis(\"h\",\na));a=this.sourceBlock_.getRelativeToSurfaceXY();Blockly.Connection.highlightedPath_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyHighlightedConnectionPath\",d:b,transform:\"translate(\"+(this.x-a.x)+\",\"+(this.y-a.y)+\")\"+(this.sourceBlock_.RTL?\" scale(-1 1)\":\"\")},this.sourceBlock_.getSvgRoot())};Blockly.RenderedConnection.prototype.unhighlight=function(){Blockly.utils.dom.removeNode(Blockly.Connection.highlightedPath_);delete Blockly.Connection.highlightedPath_};\nBlockly.RenderedConnection.prototype.setTracking=function(a){a&&this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED||!a&&this.trackedState_==Blockly.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(a?(this.db_.addConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.UNTRACKED))};\nBlockly.RenderedConnection.prototype.stopTrackingAll=function(){this.setTracking(!1);if(this.targetConnection)for(var a=this.targetBlock().getDescendants(!1),b=0;b<a.length;b++){for(var c=a[b],d=c.getConnections_(!0),e=0;e<d.length;e++)d[e].setTracking(!1);c=c.getIcons();for(e=0;e<c.length;e++)c[e].setVisible(!1)}};\nBlockly.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var a=[];if(this.type!=Blockly.INPUT_VALUE&&this.type!=Blockly.NEXT_STATEMENT)return a;var b=this.targetBlock();if(b){if(b.isCollapsed()){var c=[];b.outputConnection&&c.push(b.outputConnection);b.nextConnection&&c.push(b.nextConnection);b.previousConnection&&c.push(b.previousConnection)}else c=b.getConnections_(!0);for(var d=0;d<c.length;d++)a.push.apply(a,c[d].startTrackingAll());a.length||(a[0]=b)}return a};\nBlockly.RenderedConnection.prototype.isConnectionAllowed=function(a,b){Blockly.utils.deprecation.warn(\"RenderedConnection.prototype.isConnectionAllowed\",\"July 2020\",\"July 2021\",\"Blockly.Workspace.prototype.getConnectionChecker().canConnect\");return this.distanceFrom(a)>b?!1:Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,a)};Blockly.RenderedConnection.prototype.onFailedConnect=function(a){this.bumpAwayFrom(a)};\nBlockly.RenderedConnection.prototype.disconnectInternal_=function(a,b){Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,a,b);a.rendered&&a.render();b.rendered&&(b.updateDisabled(),b.render(),b.getSvgRoot().style.display=\"block\")};Blockly.RenderedConnection.prototype.respawnShadow_=function(){Blockly.RenderedConnection.superClass_.respawnShadow_.call(this);var a=this.targetBlock();a&&(a.initSvg(),a.render(!1),a=this.getSourceBlock(),a.rendered&&a.render())};\nBlockly.RenderedConnection.prototype.neighbours=function(a){return this.dbOpposite_.getNeighbours(this,a)};\nBlockly.RenderedConnection.prototype.connect_=function(a){Blockly.RenderedConnection.superClass_.connect_.call(this,a);var b=this.getSourceBlock();a=a.getSourceBlock();var c=b.rendered,d=a.rendered;c&&b.updateDisabled();d&&a.updateDisabled();c&&d&&(this.type==Blockly.NEXT_STATEMENT||this.type==Blockly.PREVIOUS_STATEMENT?a.render():b.render());if(b=b.getInputWithBlock(a))b=b.isVisible(),a.getSvgRoot().style.display=b?\"block\":\"none\"};\nBlockly.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())};Blockly.Marker=function(){this.drawer_=this.curNode_=this.colour=null;this.type=\"marker\"};Blockly.Marker.prototype.setDrawer=function(a){this.drawer_=a};Blockly.Marker.prototype.getDrawer=function(){return this.drawer_};Blockly.Marker.prototype.getCurNode=function(){return this.curNode_};Blockly.Marker.prototype.setCurNode=function(a){var b=this.curNode_;this.curNode_=a;this.drawer_&&this.drawer_.draw(b,this.curNode_)};\nBlockly.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)};Blockly.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()};Blockly.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()};Blockly.Cursor=function(){Blockly.Cursor.superClass_.constructor.call(this);this.type=\"cursor\"};Blockly.utils.object.inherits(Blockly.Cursor,Blockly.Marker);Blockly.Cursor.prototype.next=function(){var a=this.getCurNode();if(!a)return null;for(a=a.next();a&&a.next()&&(a.getType()==Blockly.ASTNode.types.NEXT||a.getType()==Blockly.ASTNode.types.BLOCK);)a=a.next();a&&this.setCurNode(a);return a};\nBlockly.Cursor.prototype.in=function(){var a=this.getCurNode();if(!a)return null;if(a.getType()==Blockly.ASTNode.types.PREVIOUS||a.getType()==Blockly.ASTNode.types.OUTPUT)a=a.next();(a=a.in())&&this.setCurNode(a);return a};Blockly.Cursor.prototype.prev=function(){var a=this.getCurNode();if(!a)return null;for(a=a.prev();a&&a.prev()&&(a.getType()==Blockly.ASTNode.types.NEXT||a.getType()==Blockly.ASTNode.types.BLOCK);)a=a.prev();a&&this.setCurNode(a);return a};\nBlockly.Cursor.prototype.out=function(){var a=this.getCurNode();if(!a)return null;(a=a.out())&&a.getType()==Blockly.ASTNode.types.BLOCK&&(a=a.prev()||a);a&&this.setCurNode(a);return a};\nBlockly.Cursor.prototype.onBlocklyAction=function(a){if(this.getCurNode()&&this.getCurNode().getType()===Blockly.ASTNode.types.FIELD&&this.getCurNode().getLocation().onBlocklyAction(a))return!0;switch(a.name){case Blockly.navigation.actionNames.PREVIOUS:return this.prev(),!0;case Blockly.navigation.actionNames.OUT:return this.out(),!0;case Blockly.navigation.actionNames.NEXT:return this.next(),!0;case Blockly.navigation.actionNames.IN:return this.in(),!0;default:return!1}};Blockly.BasicCursor=function(){Blockly.BasicCursor.superClass_.constructor.call(this)};Blockly.utils.object.inherits(Blockly.BasicCursor,Blockly.Cursor);Blockly.BasicCursor.prototype.next=function(){var a=this.getCurNode();if(!a)return null;(a=this.getNextNode_(a,this.validNode_))&&this.setCurNode(a);return a};Blockly.BasicCursor.prototype.in=function(){return this.next()};\nBlockly.BasicCursor.prototype.prev=function(){var a=this.getCurNode();if(!a)return null;(a=this.getPreviousNode_(a,this.validNode_))&&this.setCurNode(a);return a};Blockly.BasicCursor.prototype.out=function(){return this.prev()};Blockly.BasicCursor.prototype.getNextNode_=function(a,b){if(!a)return null;var c=a.in()||a.next();if(b(c))return c;if(c)return this.getNextNode_(c,b);a=this.findSiblingOrParent_(a.out());return b(a)?a:a?this.getNextNode_(a,b):null};\nBlockly.BasicCursor.prototype.getPreviousNode_=function(a,b){if(!a)return null;var c=a.prev();c=c?this.getRightMostChild_(c):a.out();return b(c)?c:c?this.getPreviousNode_(c,b):null};Blockly.BasicCursor.prototype.validNode_=function(a){var b=!1;a=a&&a.getType();if(a==Blockly.ASTNode.types.OUTPUT||a==Blockly.ASTNode.types.INPUT||a==Blockly.ASTNode.types.FIELD||a==Blockly.ASTNode.types.NEXT||a==Blockly.ASTNode.types.PREVIOUS||a==Blockly.ASTNode.types.WORKSPACE)b=!0;return b};\nBlockly.BasicCursor.prototype.findSiblingOrParent_=function(a){if(!a)return null;var b=a.next();return b?b:this.findSiblingOrParent_(a.out())};Blockly.BasicCursor.prototype.getRightMostChild_=function(a){if(!a.in())return a;for(a=a.in();a.next();)a=a.next();return this.getRightMostChild_(a)};Blockly.TabNavigateCursor=function(){Blockly.TabNavigateCursor.superClass_.constructor.call(this)};Blockly.utils.object.inherits(Blockly.TabNavigateCursor,Blockly.BasicCursor);Blockly.TabNavigateCursor.prototype.validNode_=function(a){var b=!1,c=a&&a.getType();a&&(a=a.getLocation(),c==Blockly.ASTNode.types.FIELD&&a&&a.isTabNavigable()&&a.isClickable()&&(b=!0));return b};Blockly.BlockSvg=function(a,b,c){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null);this.svgGroup_.translate_=\"\";this.style=a.getRenderer().getConstants().getBlockStyle(null);this.pathObject=a.getRenderer().makePathObject(this.svgGroup_,this.style);this.renderIsInProgress_=this.rendered=!1;this.workspace=a;this.previousConnection=this.nextConnection=this.outputConnection=null;this.useDragSurface_=Blockly.utils.is3dSupported()&&!!a.getBlockDragSurface();var d=this.pathObject.svgPath;\nd.tooltip=this;Blockly.Tooltip.bindMouseEvents(d);Blockly.BlockSvg.superClass_.constructor.call(this,a,b,c);this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id)};Blockly.utils.object.inherits(Blockly.BlockSvg,Blockly.Block);Blockly.BlockSvg.prototype.height=0;Blockly.BlockSvg.prototype.width=0;Blockly.BlockSvg.prototype.warningTextDb_=null;Blockly.BlockSvg.INLINE=-1;Blockly.BlockSvg.COLLAPSED_WARNING_ID=\"TEMP_COLLAPSED_WARNING_\";\nBlockly.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError(\"Workspace is headless.\");for(var a=0,b;b=this.inputList[a];a++)b.init();b=this.getIcons();for(a=0;a<b.length;a++)b[a].createIcon();this.applyColour();this.pathObject.updateMovable(this.isMovable());a=this.getSvgRoot();this.workspace.options.readOnly||this.eventsInit_||!a||Blockly.bindEventWithChecks_(a,\"mousedown\",this,this.onMouseDown_);this.eventsInit_=!0;a.parentNode||this.workspace.getCanvas().appendChild(a)};\nBlockly.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary};Blockly.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary};Blockly.BlockSvg.prototype.getColourShadow=function(){Blockly.utils.deprecation.warn(\"BlockSvg.prototype.getColourShadow\",\"January 2020\",\"January 2021\",\"style.colourSecondary\");return this.getColourSecondary()};\nBlockly.BlockSvg.prototype.getColourBorder=function(){Blockly.utils.deprecation.warn(\"BlockSvg.prototype.getColourBorder\",\"January 2020\",\"January 2021\",\"style.colourTertiary\");return{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}};\nBlockly.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Blockly.selected!=this){var a=null;if(Blockly.selected){a=Blockly.selected.id;Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}a=new Blockly.Events.Ui(null,\"selected\",a,this.id);a.workspaceId=this.workspace.id;Blockly.Events.fire(a);Blockly.selected=this;this.addSelect()}};\nBlockly.BlockSvg.prototype.unselect=function(){if(Blockly.selected==this){var a=new Blockly.Events.Ui(null,\"selected\",this.id,null);a.workspaceId=this.workspace.id;Blockly.Events.fire(a);Blockly.selected=null;this.removeSelect()}};Blockly.BlockSvg.prototype.mutator=null;Blockly.BlockSvg.prototype.comment=null;Blockly.BlockSvg.prototype.commentIcon_=null;Blockly.BlockSvg.prototype.warning=null;\nBlockly.BlockSvg.prototype.getIcons=function(){var a=[];this.mutator&&a.push(this.mutator);this.commentIcon_&&a.push(this.commentIcon_);this.warning&&a.push(this.warning);return a};\nBlockly.BlockSvg.prototype.setParent=function(a){var b=this.parentBlock_;if(a!=b){Blockly.utils.dom.startTextWidthCache();Blockly.BlockSvg.superClass_.setParent.call(this,a);Blockly.utils.dom.stopTextWidthCache();var c=this.getSvgRoot();if(!this.workspace.isClearing&&c){var d=this.getRelativeToSurfaceXY();a?(a.getSvgRoot().appendChild(c),a=this.getRelativeToSurfaceXY(),this.moveConnections(a.x-d.x,a.y-d.y)):b&&(this.workspace.getCanvas().appendChild(c),this.translate(d.x,d.y));this.applyColour()}}};\nBlockly.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var a=0,b=0,c=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d){do{var e=Blockly.utils.getRelativeXY(d);a+=e.x;b+=e.y;this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==d&&(e=this.workspace.getBlockDragSurface().getSurfaceTranslation(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.workspace.getCanvas()&&d!=c)}return new Blockly.utils.Coordinate(a,b)};\nBlockly.BlockSvg.prototype.moveBy=function(a,b){if(this.parentBlock_)throw Error(\"Block has parent.\");var c=Blockly.Events.isEnabled();if(c)var d=new Blockly.Events.BlockMove(this);var e=this.getRelativeToSurfaceXY();this.translate(e.x+a,e.y+b);this.moveConnections(a,b);c&&(d.recordNew(),Blockly.Events.fire(d));this.workspace.resizeContents()};Blockly.BlockSvg.prototype.translate=function(a,b){this.getSvgRoot().setAttribute(\"transform\",\"translate(\"+a+\",\"+b+\")\")};\nBlockly.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var a=this.getRelativeToSurfaceXY();this.clearTransformAttributes_();this.workspace.getBlockDragSurface().translateSurface(a.x,a.y);(a=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(a)}};Blockly.BlockSvg.prototype.moveTo=function(a){var b=this.getRelativeToSurfaceXY();this.moveBy(a.x-b.x,a.y-b.y)};\nBlockly.BlockSvg.prototype.moveOffDragSurface=function(a){this.useDragSurface_&&(this.translate(a.x,a.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))};Blockly.BlockSvg.prototype.moveDuringDrag=function(a){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(a.x,a.y):(this.svgGroup_.translate_=\"translate(\"+a.x+\",\"+a.y+\")\",this.svgGroup_.setAttribute(\"transform\",this.svgGroup_.translate_+this.svgGroup_.skew_))};\nBlockly.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute(\"transform\")};Blockly.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var a=this.workspace.getGrid();if(a&&a.shouldSnap()){var b=a.getSpacing(),c=b/2,d=this.getRelativeToSurfaceXY();a=Math.round((d.x-c)/b)*b+c-d.x;b=Math.round((d.y-c)/b)*b+c-d.y;a=Math.round(a);b=Math.round(b);0==a&&0==b||this.moveBy(a,b)}}};\nBlockly.BlockSvg.prototype.getBoundingRectangle=function(){var a=this.getRelativeToSurfaceXY(),b=this.getHeightWidth();if(this.RTL){var c=a.x-b.width;var d=a.x}else c=a.x,d=a.x+b.width;return new Blockly.utils.Rect(a.y,a.y+b.height,c,d)};Blockly.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var a=0,b;b=this.inputList[a];a++)b.markDirty()};\nBlockly.BlockSvg.prototype.setCollapsed=function(a){this.collapsed_!=a&&(Blockly.BlockSvg.superClass_.setCollapsed.call(this,a),a?this.rendered&&this.render():this.updateCollapsed_())};\nBlockly.BlockSvg.prototype.updateCollapsed_=function(){for(var a=this.isCollapsed(),b=Blockly.Block.COLLAPSED_INPUT_NAME,c=Blockly.Block.COLLAPSED_FIELD_NAME,d=0,e;e=this.inputList[d];d++)e.name!=b&&e.setVisible(!a);if(a){e=this.getIcons();for(d=0;a=e[d];d++)a.setVisible(!1);d=this.toString(Blockly.COLLAPSE_CHARS);(e=this.getField(c))?e.setValue(d):(e=this.getInput(b)||this.appendDummyInput(b),e.appendField(new Blockly.FieldLabel(d),c))}else this.removeInput(b)};\nBlockly.BlockSvg.prototype.tab=function(a,b){var c=new Blockly.TabNavigateCursor;c.setCurNode(Blockly.ASTNode.createFieldNode(a));a=c.getCurNode();c.onBlocklyAction(b?Blockly.navigation.ACTION_NEXT:Blockly.navigation.ACTION_PREVIOUS);(b=c.getCurNode())&&b!==a&&(b.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(b))};\nBlockly.BlockSvg.prototype.onMouseDown_=function(a){var b=this.workspace&&this.workspace.getGesture(a);b&&b.handleBlockStart(a,this)};Blockly.BlockSvg.prototype.showHelp=function(){var a=\"function\"==typeof this.helpUrl?this.helpUrl():this.helpUrl;a&&window.open(a)};\nBlockly.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var a=Blockly.ContextMenuRegistry.registry.getContextMenuOptions(Blockly.ContextMenuRegistry.ScopeType.BLOCK,{block:this});this.customContextMenu&&this.customContextMenu(a);return a};Blockly.BlockSvg.prototype.showContextMenu=function(a){var b=this.generateContextMenu();b&&b.length&&(Blockly.ContextMenu.show(a,b,this.RTL),Blockly.ContextMenu.currentBlock=this)};\nBlockly.BlockSvg.prototype.moveConnections=function(a,b){if(this.rendered){for(var c=this.getConnections_(!1),d=0;d<c.length;d++)c[d].moveBy(a,b);c=this.getIcons();for(d=0;d<c.length;d++)c[d].computeIconLocation();for(d=0;d<this.childBlocks_.length;d++)this.childBlocks_[d].moveConnections(a,b)}};\nBlockly.BlockSvg.prototype.setDragging=function(a){if(a){var b=this.getSvgRoot();b.translate_=\"\";b.skew_=\"\";Blockly.draggingConnections=Blockly.draggingConnections.concat(this.getConnections_(!0));Blockly.utils.dom.addClass(this.svgGroup_,\"blocklyDragging\")}else Blockly.draggingConnections=[],Blockly.utils.dom.removeClass(this.svgGroup_,\"blocklyDragging\");for(b=0;b<this.childBlocks_.length;b++)this.childBlocks_[b].setDragging(a)};\nBlockly.BlockSvg.prototype.setMovable=function(a){Blockly.BlockSvg.superClass_.setMovable.call(this,a);this.pathObject.updateMovable(a)};Blockly.BlockSvg.prototype.setEditable=function(a){Blockly.BlockSvg.superClass_.setEditable.call(this,a);a=this.getIcons();for(var b=0;b<a.length;b++)a[b].updateEditable()};Blockly.BlockSvg.prototype.setShadow=function(a){Blockly.BlockSvg.superClass_.setShadow.call(this,a);this.applyColour()};\nBlockly.BlockSvg.prototype.setInsertionMarker=function(a){this.isInsertionMarker_!=a&&(this.isInsertionMarker_=a)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))};Blockly.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_};\nBlockly.BlockSvg.prototype.dispose=function(a,b){if(this.workspace){Blockly.Tooltip.dispose();Blockly.Tooltip.unbindMouseEvents(this.pathObject.svgPath);Blockly.utils.dom.startTextWidthCache();var c=this.workspace;Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture());Blockly.ContextMenu.currentBlock==this&&Blockly.ContextMenu.hide();this.workspace.keyboardAccessibilityMode&&Blockly.navigation.moveCursorOnBlockDelete(this);b&&this.rendered&&(this.unplug(a),Blockly.blockAnimations.disposeUiEffect(this));\nthis.rendered=!1;if(this.warningTextDb_){for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]);this.warningTextDb_=null}b=this.getIcons();for(d=0;d<b.length;d++)b[d].dispose();Blockly.BlockSvg.superClass_.dispose.call(this,!!a);Blockly.utils.dom.removeNode(this.svgGroup_);c.resizeContents();this.svgGroup_=null;Blockly.utils.dom.stopTextWidthCache()}};\nBlockly.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var a=Blockly.Xml.blockToDom(this,!0);Blockly.Xml.deleteNext(a);var b=this.getRelativeToSurfaceXY();a.setAttribute(\"x\",this.RTL?-b.x:b.x);a.setAttribute(\"y\",b.y);return{xml:a,source:this.workspace,typeCounts:Blockly.utils.getBlockTypeCounts(this,!0)}};\nBlockly.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var a=this.getIcons(),b=0;b<a.length;b++)a[b].applyColour();for(a=0;b=this.inputList[a];a++)for(var c=0,d;d=b.fieldRow[c];c++)d.applyColour()};Blockly.BlockSvg.prototype.updateDisabled=function(){var a=this.getChildren(!1);this.applyColour();if(!this.isCollapsed())for(var b=0,c;c=a[b];b++)c.rendered&&c.updateDisabled()};Blockly.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_};\nBlockly.BlockSvg.prototype.setCommentText=function(a){if(!Blockly.Comment)throw Error(\"Missing require for Blockly.Comment\");this.commentModel.text!=a&&(Blockly.BlockSvg.superClass_.setCommentText.call(this,a),a=null!=a,!!this.commentIcon_==a?this.commentIcon_.updateText():(a?this.comment=this.commentIcon_=new Blockly.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))};\nBlockly.BlockSvg.prototype.setWarningText=function(a,b){if(!Blockly.Warning)throw Error(\"Missing require for Blockly.Warning\");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var c=b||\"\";if(c)this.warningTextDb_[c]&&(clearTimeout(this.warningTextDb_[c]),delete this.warningTextDb_[c]);else for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d];if(this.workspace.isDragging()){var e=this;this.warningTextDb_[c]=setTimeout(function(){e.workspace&&\n(delete e.warningTextDb_[c],e.setWarningText(a,c))},100)}else{this.isInFlyout&&(a=null);b=!1;if(\"string\"==typeof a){d=this.getSurroundParent();for(var f=null;d;)d.isCollapsed()&&(f=d),d=d.getSurroundParent();f&&f.setWarningText(Blockly.Msg.COLLAPSED_WARNINGS_WARNING,Blockly.BlockSvg.COLLAPSED_WARNING_ID);this.warning||(this.warning=new Blockly.Warning(this),b=!0);this.warning.setText(a,c)}else this.warning&&!c?(this.warning.dispose(),b=!0):this.warning&&(b=this.warning.getText(),this.warning.setText(\"\",\nc),(d=this.warning.getText())||this.warning.dispose(),b=b!=d);b&&this.rendered&&(this.render(),this.bumpNeighbours())}};Blockly.BlockSvg.prototype.setMutator=function(a){this.mutator&&this.mutator!==a&&this.mutator.dispose();a&&(a.setBlock(this),this.mutator=a,a.createIcon());this.rendered&&(this.render(),this.bumpNeighbours())};\nBlockly.BlockSvg.prototype.setDisabled=function(a){Blockly.utils.deprecation.warn(\"BlockSvg.prototype.setDisabled\",\"May 2019\",\"May 2020\",\"BlockSvg.prototype.setEnabled\");this.setEnabled(!a)};Blockly.BlockSvg.prototype.setEnabled=function(a){this.isEnabled()!=a&&(Blockly.BlockSvg.superClass_.setEnabled.call(this,a),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())};Blockly.BlockSvg.prototype.setHighlighted=function(a){this.rendered&&this.pathObject.updateHighlighted(a)};\nBlockly.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)};Blockly.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)};Blockly.BlockSvg.prototype.setDeleteStyle=function(a){this.pathObject.updateDraggingDelete(a)};Blockly.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary};\nBlockly.BlockSvg.prototype.setColour=function(a){Blockly.BlockSvg.superClass_.setColour.call(this,a);a=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);this.pathObject.setStyle(a.style);this.style=a.style;this.styleName_=a.name;this.applyColour()};\nBlockly.BlockSvg.prototype.setStyle=function(a){var b=this.workspace.getRenderer().getConstants().getBlockStyle(a);this.styleName_=a;if(b)this.hat=b.hat,this.pathObject.setStyle(b),this.colour_=b.colourPrimary,this.style=b,this.applyColour();else throw Error(\"Invalid style name: \"+a);};Blockly.BlockSvg.prototype.bringToFront=function(){var a=this;do{var b=a.getSvgRoot(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)};\nBlockly.BlockSvg.prototype.setPreviousStatement=function(a,b){Blockly.BlockSvg.superClass_.setPreviousStatement.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours())};Blockly.BlockSvg.prototype.setNextStatement=function(a,b){Blockly.BlockSvg.superClass_.setNextStatement.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours())};Blockly.BlockSvg.prototype.setOutput=function(a,b){Blockly.BlockSvg.superClass_.setOutput.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours())};\nBlockly.BlockSvg.prototype.setInputsInline=function(a){Blockly.BlockSvg.superClass_.setInputsInline.call(this,a);this.rendered&&(this.render(),this.bumpNeighbours())};Blockly.BlockSvg.prototype.removeInput=function(a,b){a=Blockly.BlockSvg.superClass_.removeInput.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours());return a};\nBlockly.BlockSvg.prototype.moveNumberedInputBefore=function(a,b){Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours())};Blockly.BlockSvg.prototype.appendInput_=function(a,b){a=Blockly.BlockSvg.superClass_.appendInput_.call(this,a,b);this.rendered&&(this.render(),this.bumpNeighbours());return a};\nBlockly.BlockSvg.prototype.setConnectionTracking=function(a){this.previousConnection&&this.previousConnection.setTracking(a);this.outputConnection&&this.outputConnection.setTracking(a);if(this.nextConnection){this.nextConnection.setTracking(a);var b=this.nextConnection.targetBlock();b&&b.setConnectionTracking(a)}if(!this.collapsed_)for(b=0;b<this.inputList.length;b++){var c=this.inputList[b].connection;c&&(c.setTracking(a),(c=c.targetBlock())&&c.setConnectionTracking(a))}};\nBlockly.BlockSvg.prototype.getConnections_=function(a){var b=[];if(a||this.rendered)if(this.outputConnection&&b.push(this.outputConnection),this.previousConnection&&b.push(this.previousConnection),this.nextConnection&&b.push(this.nextConnection),a||!this.collapsed_){a=0;for(var c;c=this.inputList[a];a++)c.connection&&b.push(c.connection)}return b};Blockly.BlockSvg.prototype.lastConnectionInStack=function(){return Blockly.BlockSvg.superClass_.lastConnectionInStack.call(this)};\nBlockly.BlockSvg.prototype.getMatchingConnection=function(a,b){return Blockly.BlockSvg.superClass_.getMatchingConnection.call(this,a,b)};Blockly.BlockSvg.prototype.makeConnection_=function(a){return new Blockly.RenderedConnection(this,a)};\nBlockly.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var a=this.getRootBlock();if(!a.isInFlyout)for(var b=this.getConnections_(!1),c=0,d;d=b[c];c++){d.isConnected()&&d.isSuperior()&&d.targetBlock().bumpNeighbours();for(var e=d.neighbours(Blockly.SNAP_RADIUS),f=0,g;g=e[f];f++)d.isConnected()&&g.isConnected()||g.getSourceBlock().getRootBlock()!=a&&(d.isSuperior()?g.bumpAwayFrom(d):d.bumpAwayFrom(g))}}};\nBlockly.BlockSvg.prototype.scheduleSnapAndBump=function(){var a=this,b=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(b);a.snapToGrid();Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY/2);setTimeout(function(){Blockly.Events.setGroup(b);a.bumpNeighbours();Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)};Blockly.BlockSvg.prototype.positionNearConnection=function(a,b){a.type!=Blockly.NEXT_STATEMENT&&a.type!=Blockly.INPUT_VALUE||this.moveBy(b.x-a.x,b.y-a.y)};\nBlockly.BlockSvg.prototype.getParent=function(){return Blockly.BlockSvg.superClass_.getParent.call(this)};Blockly.BlockSvg.prototype.getRootBlock=function(){return Blockly.BlockSvg.superClass_.getRootBlock.call(this)};\nBlockly.BlockSvg.prototype.render=function(a){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{this.rendered=!0;Blockly.utils.dom.startTextWidthCache();this.isCollapsed()&&this.updateCollapsed_();this.workspace.getRenderer().render(this);this.updateConnectionLocations_();if(!1!==a){var b=this.getParent();b?b.render(!0):this.workspace.resizeContents()}Blockly.utils.dom.stopTextWidthCache();this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}};\nBlockly.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw();this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Blockly.navigation.MARKER_NAME).draw()};\nBlockly.BlockSvg.prototype.updateConnectionLocations_=function(){var a=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(a);this.outputConnection&&this.outputConnection.moveToOffset(a);for(var b=0;b<this.inputList.length;b++){var c=this.inputList[b].connection;c&&(c.moveToOffset(a),c.isConnected()&&c.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(a),this.nextConnection.isConnected()&&this.nextConnection.tighten())};\nBlockly.BlockSvg.prototype.setCursorSvg=function(a){this.pathObject.setCursorSvg(a)};Blockly.BlockSvg.prototype.setMarkerSvg=function(a){this.pathObject.setMarkerSvg(a)};Blockly.BlockSvg.prototype.getHeightWidth=function(){var a=this.height,b=this.width,c=this.getNextBlock();if(c){c=c.getHeightWidth();var d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;a+=c.height-d;b=Math.max(b,c.width)}return{height:a,width:b}};Blockly.BlockSvg.prototype.fadeForReplacement=function(a){this.pathObject.updateReplacementFade(a)};\nBlockly.BlockSvg.prototype.highlightShapeForInput=function(a,b){this.pathObject.updateShapeForInputHighlight(a,b)};Blockly.blockRendering.useDebugger=!1;Blockly.blockRendering.register=function(a,b){Blockly.registry.register(Blockly.registry.Type.RENDERER,a,b)};Blockly.blockRendering.unregister=function(a){Blockly.registry.unregister(Blockly.registry.Type.RENDERER,a)};Blockly.blockRendering.startDebugger=function(){Blockly.blockRendering.useDebugger=!0};Blockly.blockRendering.stopDebugger=function(){Blockly.blockRendering.useDebugger=!1};\nBlockly.blockRendering.init=function(a,b,c){a=new (Blockly.registry.getClass(Blockly.registry.Type.RENDERER,a))(a);a.init(b,c);return a};Blockly.ConnectionDB=function(a){this.connections_=[];this.connectionChecker_=a};Blockly.ConnectionDB.prototype.addConnection=function(a,b){b=this.calculateIndexForYPos_(b);this.connections_.splice(b,0,a)};\nBlockly.ConnectionDB.prototype.findIndexOfConnection_=function(a,b){if(!this.connections_.length)return-1;var c=this.calculateIndexForYPos_(b);if(c>=this.connections_.length)return-1;b=a.y;for(var d=c;0<=d&&this.connections_[d].y==b;){if(this.connections_[d]==a)return d;d--}for(;c<this.connections_.length&&this.connections_[c].y==b;){if(this.connections_[c]==a)return c;c++}return-1};\nBlockly.ConnectionDB.prototype.calculateIndexForYPos_=function(a){if(!this.connections_.length)return 0;for(var b=0,c=this.connections_.length;b<c;){var d=Math.floor((b+c)/2);if(this.connections_[d].y<a)b=d+1;else if(this.connections_[d].y>a)c=d;else{b=d;break}}return b};Blockly.ConnectionDB.prototype.removeConnection=function(a,b){a=this.findIndexOfConnection_(a,b);if(-1==a)throw Error(\"Unable to find connection in connectionDB.\");this.connections_.splice(a,1)};\nBlockly.ConnectionDB.prototype.getNeighbours=function(a,b){function c(l){var m=e-d[l].x,n=f-d[l].y;Math.sqrt(m*m+n*n)<=b&&k.push(d[l]);return n<b}var d=this.connections_,e=a.x,f=a.y;a=0;for(var g=d.length-2,h=g;a<h;)d[h].y<f?a=h:g=h,h=Math.floor((a+g)/2);var k=[];g=a=h;if(d.length){for(;0<=a&&c(a);)a--;do g++;while(g<d.length&&c(g))}return k};Blockly.ConnectionDB.prototype.isInYRange_=function(a,b,c){return Math.abs(this.connections_[a].y-b)<=c};\nBlockly.ConnectionDB.prototype.searchForClosest=function(a,b,c){if(!this.connections_.length)return{connection:null,radius:b};var d=a.y,e=a.x;a.x=e+c.x;a.y=d+c.y;var f=this.calculateIndexForYPos_(a.y);c=null;for(var g=b,h,k=f-1;0<=k&&this.isInYRange_(k,a.y,b);)h=this.connections_[k],this.connectionChecker_.canConnect(a,h,!0,g)&&(c=h,g=h.distanceFrom(a)),k--;for(;f<this.connections_.length&&this.isInYRange_(f,a.y,b);)h=this.connections_[f],this.connectionChecker_.canConnect(a,h,!0,g)&&(c=h,g=h.distanceFrom(a)),\nf++;a.x=e;a.y=d;return{connection:c,radius:g}};Blockly.ConnectionDB.init=function(a){var b=[];b[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB(a);b[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB(a);b[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB(a);b[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB(a);return b};Blockly.MarkerManager=function(a){this.cursorSvg_=this.cursor_=null;this.markers_={};this.workspace_=a};Blockly.MarkerManager.prototype.registerMarker=function(a,b){this.markers_[a]&&this.unregisterMarker(a);b.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,b));this.setMarkerSvg(b.getDrawer().createDom());this.markers_[a]=b};\nBlockly.MarkerManager.prototype.unregisterMarker=function(a){var b=this.markers_[a];if(b)b.dispose(),delete this.markers_[a];else throw Error(\"Marker with id \"+a+\" does not exist. Can only unregistermarkers that exist.\");};Blockly.MarkerManager.prototype.getCursor=function(){return this.cursor_};Blockly.MarkerManager.prototype.getMarker=function(a){return this.markers_[a]};\nBlockly.MarkerManager.prototype.setCursor=function(a){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose();if(this.cursor_=a)a=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(a),this.setCursorSvg(this.cursor_.getDrawer().createDom())};Blockly.MarkerManager.prototype.setCursorSvg=function(a){a?(this.workspace_.getBlockCanvas().appendChild(a),this.cursorSvg_=a):this.cursorSvg_=null};\nBlockly.MarkerManager.prototype.setMarkerSvg=function(a){a?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(a,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(a)):this.markerSvg_=null};Blockly.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()};\nBlockly.MarkerManager.prototype.dispose=function(){for(var a=Object.keys(this.markers_),b=0,c;c=a[b];b++)this.unregisterMarker(c);this.markers_=null;this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)};Blockly.ThemeManager=function(a,b){this.workspace_=a;this.theme_=b;this.subscribedWorkspaces_=[];this.componentDB_=Object.create(null)};Blockly.ThemeManager.prototype.getTheme=function(){return this.theme_};\nBlockly.ThemeManager.prototype.setTheme=function(a){var b=this.theme_;this.theme_=a;if(a=this.workspace_.getInjectionDiv())b&&Blockly.utils.dom.removeClass(a,b.getClassName()),Blockly.utils.dom.addClass(a,this.theme_.getClassName());for(b=0;a=this.subscribedWorkspaces_[b];b++)a.refreshTheme();b=0;a=Object.keys(this.componentDB_);for(var c;c=a[b];b++)for(var d=0,e;e=this.componentDB_[c][d];d++){var f=e.element;e=e.propertyName;var g=this.theme_&&this.theme_.getComponentStyle(c);f.style[e]=g||\"\"}Blockly.hideChaff()};\nBlockly.ThemeManager.prototype.subscribeWorkspace=function(a){this.subscribedWorkspaces_.push(a)};Blockly.ThemeManager.prototype.unsubscribeWorkspace=function(a){a=this.subscribedWorkspaces_.indexOf(a);if(0>a)throw Error(\"Cannot unsubscribe a workspace that hasn't been subscribed.\");this.subscribedWorkspaces_.splice(a,1)};\nBlockly.ThemeManager.prototype.subscribe=function(a,b,c){this.componentDB_[b]||(this.componentDB_[b]=[]);this.componentDB_[b].push({element:a,propertyName:c});b=this.theme_&&this.theme_.getComponentStyle(b);a.style[c]=b||\"\"};Blockly.ThemeManager.prototype.unsubscribe=function(a){if(a)for(var b=Object.keys(this.componentDB_),c=0,d;d=b[c];c++){for(var e=this.componentDB_[d],f=e.length-1;0<=f;f--)e[f].element===a&&e.splice(f,1);this.componentDB_[d].length||delete this.componentDB_[d]}};\nBlockly.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null};Blockly.TouchGesture=function(a,b){Blockly.TouchGesture.superClass_.constructor.call(this,a,b);this.isMultiTouch_=!1;this.cachedPoints_=Object.create(null);this.startDistance_=this.previousScale_=0;this.isPinchZoomEnabled_=this.onStartWrapper_=null};Blockly.utils.object.inherits(Blockly.TouchGesture,Blockly.Gesture);Blockly.TouchGesture.ZOOM_IN_MULTIPLIER=5;Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER=6;\nBlockly.TouchGesture.prototype.doStart=function(a){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch;Blockly.TouchGesture.superClass_.doStart.call(this,a);!this.isEnding_&&Blockly.Touch.isTouchEvent(a)&&this.handleTouchStart(a)};\nBlockly.TouchGesture.prototype.bindMouseEvents=function(a){this.onStartWrapper_=Blockly.bindEventWithChecks_(document,\"mousedown\",null,this.handleStart.bind(this),!0);this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,\"mousemove\",null,this.handleMove.bind(this),!0);this.onUpWrapper_=Blockly.bindEventWithChecks_(document,\"mouseup\",null,this.handleUp.bind(this),!0);a.preventDefault();a.stopPropagation()};\nBlockly.TouchGesture.prototype.handleStart=function(a){!this.isDragging()&&Blockly.Touch.isTouchEvent(a)&&(this.handleTouchStart(a),this.isMultiTouch()&&Blockly.longStop_())};Blockly.TouchGesture.prototype.handleMove=function(a){this.isDragging()?Blockly.Touch.shouldHandleEvent(a)&&Blockly.TouchGesture.superClass_.handleMove.call(this,a):this.isMultiTouch()?(Blockly.Touch.isTouchEvent(a)&&this.handleTouchMove(a),Blockly.longStop_()):Blockly.TouchGesture.superClass_.handleMove.call(this,a)};\nBlockly.TouchGesture.prototype.handleUp=function(a){Blockly.Touch.isTouchEvent(a)&&!this.isDragging()&&this.handleTouchEnd(a);!this.isMultiTouch()||this.isDragging()?Blockly.Touch.shouldHandleEvent(a)&&Blockly.TouchGesture.superClass_.handleUp.call(this,a):(a.preventDefault(),a.stopPropagation(),this.dispose())};Blockly.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_};\nBlockly.TouchGesture.prototype.dispose=function(){Blockly.TouchGesture.superClass_.dispose.call(this);this.onStartWrapper_&&Blockly.unbindEvent_(this.onStartWrapper_)};Blockly.TouchGesture.prototype.handleTouchStart=function(a){var b=Blockly.Touch.getTouchIdentifierFromEvent(a);this.cachedPoints_[b]=this.getTouchPoint(a);b=Object.keys(this.cachedPoints_);2==b.length&&(this.startDistance_=Blockly.utils.Coordinate.distance(this.cachedPoints_[b[0]],this.cachedPoints_[b[1]]),this.isMultiTouch_=!0,a.preventDefault())};\nBlockly.TouchGesture.prototype.handleTouchMove=function(a){var b=Blockly.Touch.getTouchIdentifierFromEvent(a);this.cachedPoints_[b]=this.getTouchPoint(a);b=Object.keys(this.cachedPoints_);this.isPinchZoomEnabled_&&2===b.length?this.handlePinch_(a):Blockly.TouchGesture.superClass_.handleMove.call(this,a)};\nBlockly.TouchGesture.prototype.handlePinch_=function(a){var b=Object.keys(this.cachedPoints_);b=Blockly.utils.Coordinate.distance(this.cachedPoints_[b[0]],this.cachedPoints_[b[1]])/this.startDistance_;if(0<this.previousScale_&&Infinity>this.previousScale_){var c=b-this.previousScale_;c=0<c?c*Blockly.TouchGesture.ZOOM_IN_MULTIPLIER:c*Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER;var d=this.startWorkspace_,e=Blockly.utils.mouseToSvg(a,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(e.x,e.y,c)}this.previousScale_=\nb;a.preventDefault()};Blockly.TouchGesture.prototype.handleTouchEnd=function(a){a=Blockly.Touch.getTouchIdentifierFromEvent(a);this.cachedPoints_[a]&&delete this.cachedPoints_[a];2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)};Blockly.TouchGesture.prototype.getTouchPoint=function(a){return this.startWorkspace_?new Blockly.utils.Coordinate(a.pageX?a.pageX:a.changedTouches[0].pageX,a.pageY?a.pageY:a.changedTouches[0].pageY):null};Blockly.WorkspaceAudio=function(a){this.parentWorkspace_=a;this.SOUNDS_=Object.create(null)};Blockly.WorkspaceAudio.prototype.lastSound_=null;Blockly.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null};\nBlockly.WorkspaceAudio.prototype.load=function(a,b){if(a.length){try{var c=new Blockly.utils.global.Audio}catch(h){return}for(var d,e=0;e<a.length;e++){var f=a[e],g=f.match(/\\.(\\w+)$/);if(g&&c.canPlayType(\"audio/\"+g[1])){d=new Blockly.utils.global.Audio(f);break}}d&&d.play&&(this.SOUNDS_[b]=d)}};\nBlockly.WorkspaceAudio.prototype.preload=function(){for(var a in this.SOUNDS_){var b=this.SOUNDS_[a];b.volume=.01;var c=b.play();void 0!==c?c.then(b.pause).catch(function(){}):b.pause();if(Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.IPHONE)break}};\nBlockly.WorkspaceAudio.prototype.play=function(a,b){var c=this.SOUNDS_[a];c?(a=new Date,null!=this.lastSound_&&a-this.lastSound_<Blockly.SOUND_LIMIT||(this.lastSound_=a,c=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID?c:c.cloneNode(),c.volume=void 0===b?1:b,c.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(a,b)};Blockly.WorkspaceSvg=function(a,b,c){Blockly.WorkspaceSvg.superClass_.constructor.call(this,a);this.getMetrics=a.getMetrics||Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_;this.setMetrics=a.setMetrics||Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_;this.connectionDBList=Blockly.ConnectionDB.init(this.connectionChecker);b&&(this.blockDragSurface_=b);c&&(this.workspaceDragSurface_=c);this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&Blockly.utils.is3dSupported();this.highlightedBlocks_=\n[];this.audioManager_=new Blockly.WorkspaceAudio(a.parentWorkspace);this.grid_=this.options.gridPattern?new Blockly.Grid(this.options.gridPattern,a.gridOptions):null;this.markerManager_=new Blockly.MarkerManager(this);this.toolboxCategoryCallbacks_={};this.flyoutButtonCallbacks_={};Blockly.Variables&&Blockly.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.flyoutCategory);Blockly.VariablesDynamic&&Blockly.VariablesDynamic.flyoutCategory&&\nthis.registerToolboxCategoryCallback(Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,Blockly.VariablesDynamic.flyoutCategory);Blockly.Procedures&&Blockly.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.flyoutCategory),this.addChangeListener(Blockly.Procedures.mutatorOpenListener));this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Blockly.ThemeManager(this,this.options.theme||Blockly.Themes.Classic);\nthis.themeManager_.subscribeWorkspace(this);this.renderer_=Blockly.blockRendering.init(this.options.renderer||\"geras\",this.getTheme(),this.options.rendererOverrides);this.cachedParentSvg_=null;this.keyboardAccessibilityMode=!1;this.topBoundedElements_=[]};Blockly.utils.object.inherits(Blockly.WorkspaceSvg,Blockly.Workspace);Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_=null;Blockly.WorkspaceSvg.prototype.rendered=!0;Blockly.WorkspaceSvg.prototype.isVisible_=!0;\nBlockly.WorkspaceSvg.prototype.isFlyout=!1;Blockly.WorkspaceSvg.prototype.isMutator=!1;Blockly.WorkspaceSvg.prototype.resizesEnabled_=!0;Blockly.WorkspaceSvg.prototype.scrollX=0;Blockly.WorkspaceSvg.prototype.scrollY=0;Blockly.WorkspaceSvg.prototype.startScrollX=0;Blockly.WorkspaceSvg.prototype.startScrollY=0;Blockly.WorkspaceSvg.prototype.dragDeltaXY_=null;Blockly.WorkspaceSvg.prototype.scale=1;Blockly.WorkspaceSvg.prototype.trashcan=null;Blockly.WorkspaceSvg.prototype.scrollbar=null;\nBlockly.WorkspaceSvg.prototype.flyout_=null;Blockly.WorkspaceSvg.prototype.toolbox_=null;Blockly.WorkspaceSvg.prototype.currentGesture_=null;Blockly.WorkspaceSvg.prototype.blockDragSurface_=null;Blockly.WorkspaceSvg.prototype.workspaceDragSurface_=null;Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1;Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_=!1;Blockly.WorkspaceSvg.prototype.injectionDiv_=null;Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_=null;\nBlockly.WorkspaceSvg.prototype.targetWorkspace=null;Blockly.WorkspaceSvg.prototype.inverseScreenCTM_=null;Blockly.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0;Blockly.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_};Blockly.WorkspaceSvg.prototype.setCursorSvg=function(a){this.markerManager_.setCursorSvg(a)};Blockly.WorkspaceSvg.prototype.setMarkerSvg=function(a){this.markerManager_.setMarkerSvg(a)};\nBlockly.WorkspaceSvg.prototype.getMarker=function(a){return this.markerManager_?this.markerManager_.getMarker(a):null};Blockly.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null};Blockly.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_};Blockly.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_};Blockly.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()};\nBlockly.WorkspaceSvg.prototype.setTheme=function(a){a||(a=Blockly.Themes.Classic);this.themeManager_.setTheme(a)};\nBlockly.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme());this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(b){return void 0!==b.getStyleName()}));this.refreshToolboxSelection();this.toolbox_&&this.toolbox_.refreshTheme();this.isVisible()&&this.setVisible(!0);var a=new Blockly.Events.Ui(null,\"theme\",null,null);a.workspaceId=this.id;Blockly.Events.fire(a)};\nBlockly.WorkspaceSvg.prototype.updateBlockStyles_=function(a){for(var b=0,c;c=a[b];b++){var d=c.getStyleName();d&&(c.setStyle(d),c.mutator&&c.mutator.updateBlockStyle())}};Blockly.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var a=this.getParentSvg().getScreenCTM();a&&(this.inverseScreenCTM_=a.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_};\nBlockly.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0};Blockly.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_};\nBlockly.WorkspaceSvg.prototype.getSvgXY=function(a){var b=0,c=0,d=1;if(Blockly.utils.dom.containsNode(this.getCanvas(),a)||Blockly.utils.dom.containsNode(this.getBubbleCanvas(),a))d=this.scale;do{var e=Blockly.utils.getRelativeXY(a);if(a==this.getCanvas()||a==this.getBubbleCanvas())d=1;b+=e.x*d;c+=e.y*d;a=a.parentNode}while(a&&a!=this.getParentSvg());return new Blockly.utils.Coordinate(b,c)};Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return Blockly.utils.getInjectionDivXY_(this.getCanvas())};\nBlockly.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var a=this.svgGroup_;a;){if(-1!=(\" \"+(a.getAttribute(\"class\")||\"\")+\" \").indexOf(\" injectionDiv \")){this.injectionDiv_=a;break}a=a.parentNode}return this.injectionDiv_};Blockly.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_};Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(a){this.resizeHandlerWrapper_=a};\nBlockly.WorkspaceSvg.prototype.createDom=function(a){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyWorkspace\"},null);a&&(this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{height:\"100%\",width:\"100%\",\"class\":a},this.svgGroup_),\"blocklyMainBackground\"==a&&this.grid_?this.svgBackground_.style.fill=\"url(#\"+this.grid_.getPatternId()+\")\":this.themeManager_.subscribe(this.svgBackground_,\"workspaceBackgroundColour\",\"fill\"));this.svgBlockCanvas_=\nBlockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyBlockCanvas\"},this.svgGroup_);this.svgBubbleCanvas_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyBubbleCanvas\"},this.svgGroup_);this.isFlyout||(Blockly.bindEventWithChecks_(this.svgGroup_,\"mousedown\",this,this.onMouseDown_,!1,!0),Blockly.bindEventWithChecks_(this.svgGroup_,\"wheel\",this,this.onMouseWheel_));if(this.options.hasCategories){if(!Blockly.Toolbox)throw Error(\"Missing require for Blockly.Toolbox\");\nthis.toolbox_=new (Blockly.registry.getClassFromOptions(Blockly.registry.Type.TOOLBOX,this.options))(this)}this.grid_&&this.grid_.update(this.scale);this.recordDeleteAreas();this.markerManager_.setCursor(new Blockly.Cursor);this.markerManager_.registerMarker(Blockly.navigation.MARKER_NAME,new Blockly.Marker);this.renderer_.createDom(this.svgGroup_,this.getTheme());return this.svgGroup_};\nBlockly.WorkspaceSvg.prototype.dispose=function(){this.rendered=!1;this.currentGesture_&&this.currentGesture_.cancel();this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.svgBubbleCanvas_=this.svgBlockCanvas_=null;this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null);this.flyout_&&(this.flyout_.dispose(),this.flyout_=null);this.trashcan&&(this.trashcan.dispose(),this.trashcan=null);this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null);this.zoomControls_&&\n(this.zoomControls_.dispose(),this.zoomControls_=null);this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null);this.grid_&&(this.grid_.dispose(),this.grid_=null);this.renderer_.dispose();this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null);Blockly.WorkspaceSvg.superClass_.dispose.call(this);this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),\nthis.themeManager_=null));this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null;if(!this.options.parentWorkspace){var a=this.getParentSvg();a&&a.parentNode&&Blockly.utils.dom.removeNode(a.parentNode)}this.resizeHandlerWrapper_&&(Blockly.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)};Blockly.WorkspaceSvg.prototype.newBlock=function(a,b){return new Blockly.BlockSvg(this,a,b)};\nBlockly.WorkspaceSvg.prototype.addTrashcan=function(){if(!Blockly.Trashcan)throw Error(\"Missing require for Blockly.Trashcan\");this.trashcan=new Blockly.Trashcan(this);var a=this.trashcan.createDom();this.svgGroup_.insertBefore(a,this.svgBlockCanvas_)};Blockly.WorkspaceSvg.prototype.addZoomControls=function(){if(!Blockly.ZoomControls)throw Error(\"Missing require for Blockly.ZoomControls\");this.zoomControls_=new Blockly.ZoomControls(this);var a=this.zoomControls_.createDom();this.svgGroup_.appendChild(a)};\nBlockly.WorkspaceSvg.prototype.addFlyout=function(a){var b=new Blockly.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides});b.toolboxPosition=this.options.toolboxPosition;if(this.horizontalLayout){if(!Blockly.HorizontalFlyout)throw Error(\"Missing require for Blockly.HorizontalFlyout\");this.flyout_=new Blockly.HorizontalFlyout(b)}else{if(!Blockly.VerticalFlyout)throw Error(\"Missing require for Blockly.VerticalFlyout\");\nthis.flyout_=new Blockly.VerticalFlyout(b)}this.flyout_.autoClose=!1;this.flyout_.getWorkspace().setVisible(!0);return this.flyout_.createDom(a)};Blockly.WorkspaceSvg.prototype.getFlyout=function(a){return this.flyout_||a?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null};Blockly.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_};Blockly.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM();this.recordDeleteAreas()};\nBlockly.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())};Blockly.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position();this.flyout_&&this.flyout_.position();this.trashcan&&this.trashcan.position();this.zoomControls_&&this.zoomControls_.position();this.scrollbar&&this.scrollbar.resize();this.updateScreenCalculations_()};\nBlockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var a=Blockly.utils.getDocumentScroll();Blockly.utils.Coordinate.equals(this.lastRecordedPageScroll_,a)||(this.lastRecordedPageScroll_=a,this.updateScreenCalculations_())};Blockly.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_};Blockly.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_};\nBlockly.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var a=this.svgGroup_;a;){if(\"svg\"==a.tagName){this.cachedParentSvg_=a;break}a=a.parentNode}return this.cachedParentSvg_};Blockly.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){};\nBlockly.WorkspaceSvg.prototype.translate=function(a,b){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(a,b);else{var c=\"translate(\"+a+\",\"+b+\") scale(\"+this.scale+\")\";this.svgBlockCanvas_.setAttribute(\"transform\",c);this.svgBubbleCanvas_.setAttribute(\"transform\",c)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(a,b,this.scale);this.grid_&&this.grid_.moveTo(a,b);this.maybeFireViewportChangeEvent()};\nBlockly.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var a=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_);a=\"translate(\"+a.x+\",\"+a.y+\") scale(\"+this.scale+\")\";this.svgBlockCanvas_.setAttribute(\"transform\",a);this.svgBubbleCanvas_.setAttribute(\"transform\",a)}};\nBlockly.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var a=this.svgBlockCanvas_.previousSibling,b=parseInt(this.getParentSvg().getAttribute(\"width\"),10),c=parseInt(this.getParentSvg().getAttribute(\"height\"),10),d=Blockly.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),a,b,c,this.scale);this.workspaceDragSurface_.translateSurface(d.x,\nd.y)}};Blockly.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_};Blockly.WorkspaceSvg.prototype.getWidth=function(){var a=this.getMetrics();return a?a.viewWidth/this.scale:0};\nBlockly.WorkspaceSvg.prototype.setVisible=function(a){this.isVisible_=a;if(this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(a),this.getFlyout()&&this.getFlyout().setContainerVisible(a),this.getParentSvg().style.display=a?\"block\":\"none\",this.toolbox_&&this.toolbox_.setVisible(a),a){a=this.getAllBlocks(!1);for(var b=a.length-1;0<=b;b--)a[b].markDirty();this.render();this.toolbox_&&this.toolbox_.position()}else Blockly.hideChaff(!0)};\nBlockly.WorkspaceSvg.prototype.render=function(){for(var a=this.getAllBlocks(!1),b=a.length-1;0<=b;b--)a[b].render(!1);if(this.currentGesture_)for(a=this.currentGesture_.getInsertionMarkers(),b=0;b<a.length;b++)a[b].render(!1);this.markerManager_.updateMarkers()};\nBlockly.WorkspaceSvg.prototype.highlightBlock=function(a,b){if(void 0===b){for(var c=0,d;d=this.highlightedBlocks_[c];c++)d.setHighlighted(!1);this.highlightedBlocks_.length=0}if(d=a?this.getBlockById(a):null)(a=void 0===b||b)?-1==this.highlightedBlocks_.indexOf(d)&&this.highlightedBlocks_.push(d):Blockly.utils.arrayRemove(this.highlightedBlocks_,d),d.setHighlighted(a)};\nBlockly.WorkspaceSvg.prototype.paste=function(a){!this.rendered||!a.tagName||a.getElementsByTagName(\"block\").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),\"comment\"==a.tagName.toLowerCase()?this.pasteWorkspaceComment_(a):this.pasteBlock_(a))};\nBlockly.WorkspaceSvg.prototype.pasteBlock_=function(a){Blockly.Events.disable();try{var b=Blockly.Xml.domToBlock(a,this),c=this.getMarker(Blockly.navigation.MARKER_NAME).getCurNode();if(this.keyboardAccessibilityMode&&c&&c.isConnection()){var d=c.getLocation();Blockly.navigation.insertBlock(b,d);return}var e=parseInt(a.getAttribute(\"x\"),10),f=parseInt(a.getAttribute(\"y\"),10);if(!isNaN(e)&&!isNaN(f)){this.RTL&&(e=-e);do{a=!1;var g=this.getAllBlocks(!1);c=0;for(var h;h=g[c];c++){var k=h.getRelativeToSurfaceXY();\nif(1>=Math.abs(e-k.x)&&1>=Math.abs(f-k.y)){a=!0;break}}if(!a){var l=b.getConnections_(!1);c=0;for(var m;m=l[c];c++)if(m.closest(Blockly.SNAP_RADIUS,new Blockly.utils.Coordinate(e,f)).connection){a=!0;break}}a&&(e=this.RTL?e-Blockly.SNAP_RADIUS:e+Blockly.SNAP_RADIUS,f+=2*Blockly.SNAP_RADIUS)}while(a);b.moveBy(e,f)}}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!b.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(b));b.select()};\nBlockly.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(a){Blockly.Events.disable();try{var b=Blockly.WorkspaceCommentSvg.fromXml(a,this),c=parseInt(a.getAttribute(\"x\"),10),d=parseInt(a.getAttribute(\"y\"),10);isNaN(c)||isNaN(d)||(this.RTL&&(c=-c),b.moveBy(c+50,d+50))}finally{Blockly.Events.enable()}Blockly.Events.isEnabled();b.select()};\nBlockly.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var a=this.isFlyout?this.targetWorkspace:this;a&&!a.currentGesture_&&a.toolbox_&&a.toolbox_.getFlyout()&&a.toolbox_.refreshSelection()};Blockly.WorkspaceSvg.prototype.renameVariableById=function(a,b){Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this,a,b);this.refreshToolboxSelection()};Blockly.WorkspaceSvg.prototype.deleteVariableById=function(a){Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this,a);this.refreshToolboxSelection()};\nBlockly.WorkspaceSvg.prototype.createVariable=function(a,b,c){a=Blockly.WorkspaceSvg.superClass_.createVariable.call(this,a,b,c);this.refreshToolboxSelection();return a};Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null;this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&\"function\"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null};\nBlockly.WorkspaceSvg.prototype.isDeleteArea=function(a){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(a.clientX,a.clientY)?Blockly.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(a.clientX,a.clientY)?Blockly.DELETE_AREA_TOOLBOX:Blockly.DELETE_AREA_NONE};Blockly.WorkspaceSvg.prototype.onMouseDown_=function(a){var b=this.getGesture(a);b&&b.handleWsStart(a,this)};\nBlockly.WorkspaceSvg.prototype.startDrag=function(a,b){a=Blockly.utils.mouseToSvg(a,this.getParentSvg(),this.getInverseScreenCTM());a.x/=this.scale;a.y/=this.scale;this.dragDeltaXY_=Blockly.utils.Coordinate.difference(b,a)};Blockly.WorkspaceSvg.prototype.moveDrag=function(a){a=Blockly.utils.mouseToSvg(a,this.getParentSvg(),this.getInverseScreenCTM());a.x/=this.scale;a.y/=this.scale;return Blockly.utils.Coordinate.sum(this.dragDeltaXY_,a)};\nBlockly.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()};Blockly.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag};\nBlockly.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch};\nBlockly.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch};\nBlockly.WorkspaceSvg.prototype.onMouseWheel_=function(a){if(Blockly.Gesture.inProgress())a.preventDefault(),a.stopPropagation();else{var b=this.options.zoomOptions&&this.options.zoomOptions.wheel,c=this.options.moveOptions&&this.options.moveOptions.wheel;if(b||c){var d=Blockly.utils.getScrollDeltaPixels(a);!b||!a.ctrlKey&&c?(b=this.scrollX-d.x,c=this.scrollY-d.y,a.shiftKey&&!d.x&&(b=this.scrollX-d.y,c=this.scrollY),this.scroll(b,c)):(d=-d.y/50,b=Blockly.utils.mouseToSvg(a,this.getParentSvg(),this.getInverseScreenCTM()),\nthis.zoom(b.x,b.y,d));a.preventDefault()}}};Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var a=this.getTopBoundedElements();if(!a.length)return new Blockly.utils.Rect(0,0,0,0);for(var b=a[0].getBoundingRectangle(),c=1;c<a.length;c++){var d=a[c].getBoundingRectangle();d.top<b.top&&(b.top=d.top);d.bottom>b.bottom&&(b.bottom=d.bottom);d.left<b.left&&(b.left=d.left);d.right>b.right&&(b.right=d.right)}return b};\nBlockly.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1);Blockly.Events.setGroup(!0);for(var a=this.getTopBlocks(!0),b=0,c=0,d;d=a[c];c++)if(d.isMovable()){var e=d.getRelativeToSurfaceXY();d.moveBy(-e.x,b-e.y);d.snapToGrid();b=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}Blockly.Events.setGroup(!1);this.setResizesEnabled(!0)};\nBlockly.WorkspaceSvg.prototype.showContextMenu=function(a){if(!this.options.readOnly&&!this.isFlyout){var b=Blockly.ContextMenuRegistry.registry.getContextMenuOptions(Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(b,a);Blockly.ContextMenu.show(a,b,this.RTL)}};\nBlockly.WorkspaceSvg.prototype.updateToolbox=function(a){if(a=Blockly.utils.toolbox.convertToolboxDefToJson(a)){if(!this.options.languageTree)throw Error(\"Existing toolbox is null.  Can't create new toolbox.\");if(Blockly.utils.toolbox.hasCategories(a)){if(!this.toolbox_)throw Error(\"Existing toolbox has no categories.  Can't change mode.\");this.options.languageTree=a;this.toolbox_.render(a)}else{if(!this.flyout_)throw Error(\"Existing toolbox has categories.  Can't change mode.\");this.options.languageTree=\na;this.flyout_.show(a)}}else if(this.options.languageTree)throw Error(\"Can't nullify an existing toolbox.\");};Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Blockly.mainWorkspace=this,this.setBrowserFocus())};Blockly.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(a){try{this.getParentSvg().parentNode.setActive()}catch(b){this.getParentSvg().parentNode.focus({preventScroll:!0})}}};\nBlockly.WorkspaceSvg.prototype.zoom=function(a,b,c){c=Math.pow(this.options.zoomOptions.scaleSpeed,c);var d=this.scale*c;if(this.scale!=d){d>this.options.zoomOptions.maxScale?c=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(c=this.options.zoomOptions.minScale/this.scale);var e=this.getCanvas().getCTM(),f=this.getParentSvg().createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=\ne.f;this.setScale(d)}};Blockly.WorkspaceSvg.prototype.zoomCenter=function(a){var b=this.getMetrics();if(this.flyout_){var c=b.svgWidth?b.svgWidth/2:0;b=b.svgHeight?b.svgHeight/2:0}else c=b.viewWidth/2+b.absoluteLeft,b=b.viewHeight/2+b.absoluteTop;this.zoom(c,b,a)};\nBlockly.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var a=this.getMetrics(),b=a.viewWidth;a=a.viewHeight;var c=this.getBlocksBoundingBox(),d=c.right-c.left;c=c.bottom-c.top;if(d){this.flyout_&&(this.horizontalLayout?(a+=this.flyout_.getHeight(),c+=this.flyout_.getHeight()/this.scale):(b+=this.flyout_.getWidth(),d+=this.flyout_.getWidth()/this.scale));b/=d;a/=c;Blockly.Events.disable();try{this.setScale(Math.min(b,a)),this.scrollCenter()}finally{Blockly.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn(\"Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.\")};\nBlockly.WorkspaceSvg.prototype.beginCanvasTransition=function(){Blockly.utils.dom.addClass(this.svgBlockCanvas_,\"blocklyCanvasTransitioning\");Blockly.utils.dom.addClass(this.svgBubbleCanvas_,\"blocklyCanvasTransitioning\")};Blockly.WorkspaceSvg.prototype.endCanvasTransition=function(){Blockly.utils.dom.removeClass(this.svgBlockCanvas_,\"blocklyCanvasTransitioning\");Blockly.utils.dom.removeClass(this.svgBubbleCanvas_,\"blocklyCanvasTransitioning\")};\nBlockly.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var a=this.getMetrics(),b=(a.contentWidth-a.viewWidth)/2,c=(a.contentHeight-a.viewHeight)/2;b=-b-a.contentLeft;c=-c-a.contentTop;this.scroll(b,c)}else console.warn(\"Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.\")};\nBlockly.WorkspaceSvg.prototype.centerOnBlock=function(a){if(this.isMovable()){if(a=a?this.getBlockById(a):null){var b=a.getRelativeToSurfaceXY(),c=a.getHeightWidth(),d=this.scale;a=(b.x+(this.RTL?-1:1)*c.width/2)*d;b=(b.y+c.height/2)*d;c=this.getMetrics();this.scroll(-(a-c.viewWidth/2),-(b-c.viewHeight/2))}}else console.warn(\"Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.\")};\nBlockly.WorkspaceSvg.prototype.setScale=function(a){this.options.zoomOptions.maxScale&&a>this.options.zoomOptions.maxScale?a=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&a<this.options.zoomOptions.minScale&&(a=this.options.zoomOptions.minScale);this.scale=a;Blockly.hideChaff(!1);this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas());this.grid_&&this.grid_.update(this.scale);a=this.getMetrics();this.scrollX-=a.absoluteLeft;this.scrollY-=a.absoluteTop;a.viewLeft+=a.absoluteLeft;\na.viewTop+=a.absoluteTop;this.scroll(this.scrollX,this.scrollY);this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(a),this.scrollbar.vScroll.resizeViewVertical(a)):(this.scrollbar.hScroll.resizeContentHorizontal(a),this.scrollbar.vScroll.resizeContentVertical(a)))};Blockly.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale};\nBlockly.WorkspaceSvg.prototype.scroll=function(a,b){Blockly.hideChaff(!0);var c=this.getMetrics(),d=c.contentWidth+c.contentLeft-c.viewWidth,e=c.contentHeight+c.contentTop-c.viewHeight;a=Math.min(a,-c.contentLeft);b=Math.min(b,-c.contentTop);a=Math.max(a,-d);b=Math.max(b,-e);this.scrollX=a;this.scrollY=b;this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(a+c.contentLeft)*this.scrollbar.hScroll.ratio),this.scrollbar.vScroll.setHandlePosition(-(b+c.contentTop)*this.scrollbar.vScroll.ratio));\na+=c.absoluteLeft;b+=c.absoluteTop;this.translate(a,b)};Blockly.WorkspaceSvg.getDimensionsPx_=function(a){var b=0,c=0;a&&(b=a.getWidth(),c=a.getHeight());return new Blockly.utils.Size(b,c)};Blockly.WorkspaceSvg.getContentDimensions_=function(a,b){return a.isContentBounded()?Blockly.WorkspaceSvg.getContentDimensionsBounded_(a,b):Blockly.WorkspaceSvg.getContentDimensionsExact_(a)};\nBlockly.WorkspaceSvg.getContentDimensionsExact_=function(a){var b=a.getBlocksBoundingBox(),c=a.scale;a=b.top*c;var d=b.bottom*c,e=b.left*c;b=b.right*c;return{top:a,bottom:d,left:e,right:b,width:b-e,height:d-a}};\nBlockly.WorkspaceSvg.getContentDimensionsBounded_=function(a,b){a=Blockly.WorkspaceSvg.getContentDimensionsExact_(a);var c=b.width;b=b.height;var d=c/2,e=b/2,f=Math.min(a.left-d,a.right-c),g=Math.min(a.top-e,a.bottom-b);return{left:f,top:g,height:Math.max(a.bottom+e,a.top+b)-g,width:Math.max(a.right+d,a.left+c)-f}};\nBlockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var a=Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),b=Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),c=Blockly.svgSize(this.getParentSvg()),d={height:c.height,width:c.width};if(this.toolbox_)if(this.toolboxPosition==Blockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM)d.height-=a.height;else{if(this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT)d.width-=a.width}else if(this.flyout_)if(this.toolboxPosition==\nBlockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM)d.height-=b.height;else if(this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT)d.width-=b.width;var e=Blockly.WorkspaceSvg.getContentDimensions_(this,d),f=0;this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?f=a.width:this.flyout_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(f=b.width);var g=0;this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?g=a.height:this.flyout_&&\nthis.toolboxPosition==Blockly.TOOLBOX_AT_TOP&&(g=b.height);return{contentHeight:e.height,contentWidth:e.width,contentTop:e.top,contentLeft:e.left,viewHeight:d.height,viewWidth:d.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:g,absoluteLeft:f,svgHeight:c.height,svgWidth:c.width,toolboxWidth:a.width,toolboxHeight:a.height,toolboxPosition:this.toolboxPosition,flyoutWidth:b.width,flyoutHeight:b.height}};\nBlockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(a){var b=this.getMetrics();\"number\"==typeof a.x&&(this.scrollX=-b.contentWidth*a.x-b.contentLeft);\"number\"==typeof a.y&&(this.scrollY=-b.contentHeight*a.y-b.contentTop);this.translate(this.scrollX+b.absoluteLeft,this.scrollY+b.absoluteTop)};Blockly.WorkspaceSvg.prototype.getBlockById=function(a){return Blockly.WorkspaceSvg.superClass_.getBlockById.call(this,a)};\nBlockly.WorkspaceSvg.prototype.getTopBlocks=function(a){return Blockly.WorkspaceSvg.superClass_.getTopBlocks.call(this,a)};Blockly.WorkspaceSvg.prototype.addTopBlock=function(a){this.addTopBoundedElement(a);Blockly.WorkspaceSvg.superClass_.addTopBlock.call(this,a)};Blockly.WorkspaceSvg.prototype.removeTopBlock=function(a){this.removeTopBoundedElement(a);Blockly.WorkspaceSvg.superClass_.removeTopBlock.call(this,a)};\nBlockly.WorkspaceSvg.prototype.addTopComment=function(a){this.addTopBoundedElement(a);Blockly.WorkspaceSvg.superClass_.addTopComment.call(this,a)};Blockly.WorkspaceSvg.prototype.removeTopComment=function(a){this.removeTopBoundedElement(a);Blockly.WorkspaceSvg.superClass_.removeTopComment.call(this,a)};Blockly.WorkspaceSvg.prototype.addTopBoundedElement=function(a){this.topBoundedElements_.push(a)};\nBlockly.WorkspaceSvg.prototype.removeTopBoundedElement=function(a){Blockly.utils.arrayRemove(this.topBoundedElements_,a)};Blockly.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)};Blockly.WorkspaceSvg.prototype.setResizesEnabled=function(a){var b=!this.resizesEnabled_&&a;this.resizesEnabled_=a;b&&this.resizeContents()};\nBlockly.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1);Blockly.WorkspaceSvg.superClass_.clear.call(this);this.topBoundedElements_=[];this.setResizesEnabled(!0)};Blockly.WorkspaceSvg.prototype.registerButtonCallback=function(a,b){if(\"function\"!=typeof b)throw TypeError(\"Button callbacks must be functions.\");this.flyoutButtonCallbacks_[a]=b};Blockly.WorkspaceSvg.prototype.getButtonCallback=function(a){return(a=this.flyoutButtonCallbacks_[a])?a:null};\nBlockly.WorkspaceSvg.prototype.removeButtonCallback=function(a){this.flyoutButtonCallbacks_[a]=null};Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(a,b){if(\"function\"!=typeof b)throw TypeError(\"Toolbox category callbacks must be functions.\");this.toolboxCategoryCallbacks_[a]=b};Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(a){return this.toolboxCategoryCallbacks_[a]||null};\nBlockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(a){this.toolboxCategoryCallbacks_[a]=null};Blockly.WorkspaceSvg.prototype.getGesture=function(a){var b=\"mousedown\"==a.type||\"touchstart\"==a.type||\"pointerdown\"==a.type,c=this.currentGesture_;return c?b&&c.hasStarted()?(console.warn(\"Tried to start the same gesture twice.\"),c.cancel(),null):c:b?this.currentGesture_=new Blockly.TouchGesture(a,this):null};\nBlockly.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null};Blockly.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()};Blockly.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_};Blockly.WorkspaceSvg.prototype.getGrid=function(){return this.grid_};Blockly.inject=function(a,b){Blockly.checkBlockColourConstants();\"string\"==typeof a&&(a=document.getElementById(a)||document.querySelector(a));if(!a||!Blockly.utils.dom.containsNode(document,a))throw Error(\"Error: container is not in current document.\");b=new Blockly.Options(b||{});var c=document.createElement(\"div\");c.className=\"injectionDiv\";c.tabIndex=0;Blockly.utils.aria.setState(c,Blockly.utils.aria.State.LABEL,Blockly.Msg.WORKSPACE_ARIA_LABEL);a.appendChild(c);a=Blockly.createDom_(c,b);var d=\nnew Blockly.BlockDragSurfaceSvg(c),e=new Blockly.WorkspaceDragSurfaceSvg(c),f=Blockly.createMainWorkspace_(a,b,d,e);Blockly.user.keyMap.setKeyMap(b.keyMap);Blockly.init_(f);Blockly.mainWorkspace=f;Blockly.svgResize(f);c.addEventListener(\"focusin\",function(){Blockly.mainWorkspace=f});return f};\nBlockly.createDom_=function(a,b){a.setAttribute(\"dir\",\"LTR\");Blockly.Component.defaultRightToLeft=b.RTL;Blockly.Css.inject(b.hasCss,b.pathToMedia);a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,\"xmlns:html\":Blockly.utils.dom.HTML_NS,\"xmlns:xlink\":Blockly.utils.dom.XLINK_NS,version:\"1.1\",\"class\":\"blocklySvg\",tabindex:\"0\"},a);var c=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},a),d=String(Math.random()).substring(2);b.gridPattern=Blockly.Grid.createDom(d,\nb.gridOptions,c);return a};\nBlockly.createMainWorkspace_=function(a,b,c,d){b.parentWorkspace=null;var e=new Blockly.WorkspaceSvg(b,c,d);b=e.options;e.scale=b.zoomOptions.startScale;a.appendChild(e.createDom(\"blocklyMainBackground\"));Blockly.utils.dom.addClass(e.getInjectionDiv(),e.getRenderer().getClassName());Blockly.utils.dom.addClass(e.getInjectionDiv(),e.getTheme().getClassName());!b.hasCategories&&b.languageTree&&(c=e.addFlyout(Blockly.utils.Svg.SVG),Blockly.utils.dom.insertAfter(c,a));b.hasTrashcan&&e.addTrashcan();b.zoomOptions&&\nb.zoomOptions.controls&&e.addZoomControls();e.getThemeManager().subscribe(a,\"workspaceBackgroundColour\",\"background-color\");e.translate(0,0);b.readOnly||e.isMovable()||e.addChangeListener(function(f){if(!e.isDragging()&&!e.isMovable()&&-1!=Blockly.Events.BUMP_EVENTS.indexOf(f.type)){var g=Object.create(null),h=e.getMetrics(),k=e.scale;g.RTL=e.RTL;g.viewLeft=h.viewLeft/k;g.viewTop=h.viewTop/k;g.viewRight=(h.viewLeft+h.viewWidth)/k;g.viewBottom=(h.viewTop+h.viewHeight)/k;e.isContentBounded()?(h=e.getBlocksBoundingBox(),\ng.contentLeft=h.left,g.contentTop=h.top,g.contentRight=h.right,g.contentBottom=h.bottom):(g.contentLeft=h.contentLeft/k,g.contentTop=h.contentTop/k,g.contentRight=(h.contentLeft+h.contentWidth)/k,g.contentBottom=(h.contentTop+h.contentHeight)/k);if(g.contentTop<g.viewTop||g.contentBottom>g.viewBottom||g.contentLeft<g.viewLeft||g.contentRight>g.viewRight){h=null;f&&(h=Blockly.Events.getGroup(),Blockly.Events.setGroup(f.group));switch(f.type){case Blockly.Events.BLOCK_CREATE:case Blockly.Events.BLOCK_MOVE:var l=\ne.getBlockById(f.blockId);l&&(l=l.getRootBlock());break;case Blockly.Events.COMMENT_CREATE:case Blockly.Events.COMMENT_MOVE:l=e.getCommentById(f.commentId)}if(l){k=l.getBoundingRectangle();k.height=k.bottom-k.top;k.width=k.right-k.left;var m=g.viewTop,n=g.viewBottom-k.height;n=Math.max(m,n);m=Blockly.utils.math.clamp(m,k.top,n)-k.top;n=g.viewLeft;var p=g.viewRight-k.width;g.RTL?n=Math.min(p,n):p=Math.max(n,p);g=Blockly.utils.math.clamp(n,k.left,p)-k.left;l.moveBy(g,m)}f&&(!f.group&&l&&console.warn(\"Moved object in bounds but there was no event group. This may break undo.\"),\nnull!==h&&Blockly.Events.setGroup(h))}}});Blockly.svgResize(e);Blockly.WidgetDiv.createDom();Blockly.DropDownDiv.createDom();Blockly.Tooltip.createDom();return e};\nBlockly.init_=function(a){var b=a.options,c=a.getParentSvg();Blockly.bindEventWithChecks_(c.parentNode,\"contextmenu\",null,function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()});c=Blockly.bindEventWithChecks_(window,\"resize\",null,function(){Blockly.hideChaff(!0);Blockly.svgResize(a)});a.setResizeHandlerWrapper(c);Blockly.inject.bindDocumentEvents_();if(b.languageTree){c=a.getToolbox();var d=a.getFlyout(!0);c?c.init():d&&(d.init(a),d.show(b.languageTree),\"function\"==typeof d.scrollToStart&&\nd.scrollToStart())}c=Blockly.Scrollbar.scrollbarThickness;b.hasTrashcan&&(c=a.trashcan.init(c));b.zoomOptions&&b.zoomOptions.controls&&a.zoomControls_.init(c);b.moveOptions&&b.moveOptions.scrollbars?(a.scrollbar=new Blockly.ScrollbarPair(a),a.scrollbar.resize()):a.setMetrics({x:.5,y:.5});b.hasSounds&&Blockly.inject.loadSounds_(b.pathToMedia,a)};\nBlockly.inject.bindDocumentEvents_=function(){Blockly.documentEventsBound_||(Blockly.bindEventWithChecks_(document,\"scroll\",null,function(){for(var a=Blockly.Workspace.getAll(),b=0,c;c=a[b];b++)c.updateInverseScreenCTM&&c.updateInverseScreenCTM()}),Blockly.bindEventWithChecks_(document,\"keydown\",null,Blockly.onKeyDown),Blockly.bindEvent_(document,\"touchend\",null,Blockly.longStop_),Blockly.bindEvent_(document,\"touchcancel\",null,Blockly.longStop_),Blockly.utils.userAgent.IPAD&&Blockly.bindEventWithChecks_(window,\n\"orientationchange\",document,function(){Blockly.svgResize(Blockly.getMainWorkspace())}));Blockly.documentEventsBound_=!0};\nBlockly.inject.loadSounds_=function(a,b){var c=b.getAudioManager();c.load([a+\"click.mp3\",a+\"click.wav\",a+\"click.ogg\"],\"click\");c.load([a+\"disconnect.wav\",a+\"disconnect.mp3\",a+\"disconnect.ogg\"],\"disconnect\");c.load([a+\"delete.mp3\",a+\"delete.ogg\",a+\"delete.wav\"],\"delete\");var d=[];a=function(){for(;d.length;)Blockly.unbindEvent_(d.pop());c.preload()};d.push(Blockly.bindEventWithChecks_(document,\"mousemove\",null,a,!0));d.push(Blockly.bindEventWithChecks_(document,\"touchstart\",null,a,!0))};Blockly.Names=function(a,b){this.variablePrefix_=b||\"\";this.reservedDict_=Object.create(null);if(a)for(a=a.split(\",\"),b=0;b<a.length;b++)this.reservedDict_[a[b]]=!0;this.reset()};Blockly.Names.DEVELOPER_VARIABLE_TYPE=\"DEVELOPER_VARIABLE\";Blockly.Names.prototype.reset=function(){this.db_=Object.create(null);this.dbReverse_=Object.create(null);this.variableMap_=null};Blockly.Names.prototype.setVariableMap=function(a){this.variableMap_=a};\nBlockly.Names.prototype.getNameForUserVariable_=function(a){return this.variableMap_?(a=this.variableMap_.getVariableById(a))?a.name:null:(console.log(\"Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());\"),null)};\nBlockly.Names.prototype.getName=function(a,b){if(b==Blockly.VARIABLE_CATEGORY_NAME){var c=this.getNameForUserVariable_(a);c&&(a=c)}c=a.toLowerCase()+\"_\"+b;var d=b==Blockly.VARIABLE_CATEGORY_NAME||b==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:\"\";if(c in this.db_)return d+this.db_[c];a=this.getDistinctName(a,b);this.db_[c]=a.substr(d.length);return a};\nBlockly.Names.prototype.getDistinctName=function(a,b){a=this.safeName_(a);for(var c=\"\";this.dbReverse_[a+c]||a+c in this.reservedDict_;)c=c?c+1:2;a+=c;this.dbReverse_[a]=!0;return(b==Blockly.VARIABLE_CATEGORY_NAME||b==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:\"\")+a};Blockly.Names.prototype.safeName_=function(a){a?(a=encodeURI(a.replace(/ /g,\"_\")).replace(/[^\\w]/g,\"_\"),-1!=\"0123456789\".indexOf(a[0])&&(a=\"my_\"+a)):a=Blockly.Msg.UNNAMED_KEY||\"unnamed\";return a};\nBlockly.Names.equals=function(a,b){return a.toLowerCase()==b.toLowerCase()};Blockly.Procedures={};Blockly.Procedures.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME;Blockly.Procedures.DEFAULT_ARG=\"x\";Blockly.Procedures.allProcedures=function(a){var b=a.getBlocksByType(\"procedures_defnoreturn\",!1).map(function(c){return c.getProcedureDef()});a=a.getBlocksByType(\"procedures_defreturn\",!1).map(function(c){return c.getProcedureDef()});b.sort(Blockly.Procedures.procTupleComparator_);a.sort(Blockly.Procedures.procTupleComparator_);return[b,a]};\nBlockly.Procedures.procTupleComparator_=function(a,b){return a[0].toLowerCase().localeCompare(b[0].toLowerCase())};Blockly.Procedures.findLegalName=function(a,b){if(b.isInFlyout)return a;for(a=a||Blockly.Msg.UNNAMED_KEY||\"unnamed\";!Blockly.Procedures.isLegalName_(a,b.workspace,b);){var c=a.match(/^(.*?)(\\d+)$/);a=c?c[1]+(parseInt(c[2],10)+1):a+\"2\"}return a};Blockly.Procedures.isLegalName_=function(a,b,c){return!Blockly.Procedures.isNameUsed(a,b,c)};\nBlockly.Procedures.isNameUsed=function(a,b,c){b=b.getAllBlocks(!1);for(var d=0;d<b.length;d++)if(b[d]!=c&&b[d].getProcedureDef){var e=b[d].getProcedureDef();if(Blockly.Names.equals(e[0],a))return!0}return!1};Blockly.Procedures.rename=function(a){a=a.trim();var b=Blockly.Procedures.findLegalName(a,this.getSourceBlock()),c=this.getValue();if(c!=a&&c!=b){a=this.getSourceBlock().workspace.getAllBlocks(!1);for(var d=0;d<a.length;d++)a[d].renameProcedure&&a[d].renameProcedure(c,b)}return b};\nBlockly.Procedures.flyoutCategory=function(a){function b(f,g){for(var h=0;h<f.length;h++){var k=f[h][0],l=f[h][1],m=Blockly.utils.xml.createElement(\"block\");m.setAttribute(\"type\",g);m.setAttribute(\"gap\",16);var n=Blockly.utils.xml.createElement(\"mutation\");n.setAttribute(\"name\",k);m.appendChild(n);for(k=0;k<l.length;k++){var p=Blockly.utils.xml.createElement(\"arg\");p.setAttribute(\"name\",l[k]);n.appendChild(p)}c.push(m)}}var c=[];if(Blockly.Blocks.procedures_defnoreturn){var d=Blockly.utils.xml.createElement(\"block\");\nd.setAttribute(\"type\",\"procedures_defnoreturn\");d.setAttribute(\"gap\",16);var e=Blockly.utils.xml.createElement(\"field\");e.setAttribute(\"name\",\"NAME\");e.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE));d.appendChild(e);c.push(d)}Blockly.Blocks.procedures_defreturn&&(d=Blockly.utils.xml.createElement(\"block\"),d.setAttribute(\"type\",\"procedures_defreturn\"),d.setAttribute(\"gap\",16),e=Blockly.utils.xml.createElement(\"field\"),e.setAttribute(\"name\",\"NAME\"),e.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),\nd.appendChild(e),c.push(d));Blockly.Blocks.procedures_ifreturn&&(d=Blockly.utils.xml.createElement(\"block\"),d.setAttribute(\"type\",\"procedures_ifreturn\"),d.setAttribute(\"gap\",16),c.push(d));c.length&&c[c.length-1].setAttribute(\"gap\",24);a=Blockly.Procedures.allProcedures(a);b(a[0],\"procedures_callnoreturn\");b(a[1],\"procedures_callreturn\");return c};\nBlockly.Procedures.updateMutatorFlyout_=function(a){for(var b=[],c=a.getBlocksByType(\"procedures_mutatorarg\",!1),d=0,e;e=c[d];d++)b.push(e.getFieldValue(\"NAME\"));c=Blockly.utils.xml.createElement(\"xml\");d=Blockly.utils.xml.createElement(\"block\");d.setAttribute(\"type\",\"procedures_mutatorarg\");e=Blockly.utils.xml.createElement(\"field\");e.setAttribute(\"name\",\"NAME\");b=Blockly.Variables.generateUniqueNameFromOptions(Blockly.Procedures.DEFAULT_ARG,b);b=Blockly.utils.xml.createTextNode(b);e.appendChild(b);\nd.appendChild(e);c.appendChild(d);a.updateToolbox(c)};Blockly.Procedures.mutatorOpenListener=function(a){if(a.type==Blockly.Events.UI&&\"mutatorOpen\"==a.element&&a.newValue){a=Blockly.Workspace.getById(a.workspaceId).getBlockById(a.blockId);var b=a.type;if(\"procedures_defnoreturn\"==b||\"procedures_defreturn\"==b)a=a.mutator.getWorkspace(),Blockly.Procedures.updateMutatorFlyout_(a),a.addChangeListener(Blockly.Procedures.mutatorChangeListener_)}};\nBlockly.Procedures.mutatorChangeListener_=function(a){if(a.type==Blockly.Events.BLOCK_CREATE||a.type==Blockly.Events.BLOCK_DELETE||a.type==Blockly.Events.BLOCK_CHANGE)a=Blockly.Workspace.getById(a.workspaceId),Blockly.Procedures.updateMutatorFlyout_(a)};Blockly.Procedures.getCallers=function(a,b){var c=[];b=b.getAllBlocks(!1);for(var d=0;d<b.length;d++)if(b[d].getProcedureCall){var e=b[d].getProcedureCall();e&&Blockly.Names.equals(e,a)&&c.push(b[d])}return c};\nBlockly.Procedures.mutateCallers=function(a){var b=Blockly.Events.recordUndo,c=a.getProcedureDef()[0],d=a.mutationToDom(!0);a=Blockly.Procedures.getCallers(c,a.workspace);c=0;for(var e;e=a[c];c++){var f=e.mutationToDom();f=f&&Blockly.Xml.domToText(f);e.domToMutation(d);var g=e.mutationToDom();g=g&&Blockly.Xml.domToText(g);f!=g&&(Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(e,\"mutation\",null,f,g)),Blockly.Events.recordUndo=b)}};\nBlockly.Procedures.getDefinition=function(a,b){b=b.getTopBlocks(!1);for(var c=0;c<b.length;c++)if(b[c].getProcedureDef){var d=b[c].getProcedureDef();if(d&&Blockly.Names.equals(d[0],a))return b[c]}return null};Blockly.VariableModel=function(a,b,c,d){this.workspace=a;this.name=b;this.type=c||\"\";this.id_=d||Blockly.utils.genUid();Blockly.Events.fire(new Blockly.Events.VarCreate(this))};Blockly.VariableModel.prototype.getId=function(){return this.id_};Blockly.VariableModel.compareByName=function(a,b){a=a.name.toLowerCase();b=b.name.toLowerCase();return a<b?-1:a==b?0:1};Blockly.Variables={};Blockly.Variables.NAME_TYPE=Blockly.VARIABLE_CATEGORY_NAME;Blockly.Variables.allUsedVarModels=function(a){var b=a.getAllBlocks(!1);a=Object.create(null);for(var c=0;c<b.length;c++){var d=b[c].getVarModels();if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.getId();g&&(a[g]=f)}}b=[];for(g in a)b.push(a[g]);return b};Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={};\nBlockly.Variables.allDeveloperVariables=function(a){a=a.getAllBlocks(!1);for(var b=Object.create(null),c=0,d;d=a[c];c++){var e=d.getDeveloperVariables;!e&&d.getDeveloperVars&&(e=d.getDeveloperVars,Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]||(console.warn(\"Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '\"+d.type+\"')\"),Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]=!0));if(e)for(d=e(),e=0;e<d.length;e++)b[d[e]]=!0}return Object.keys(b)};\nBlockly.Variables.flyoutCategory=function(a){var b=[],c=document.createElement(\"button\");c.setAttribute(\"text\",\"%{BKY_NEW_VARIABLE}\");c.setAttribute(\"callbackKey\",\"CREATE_VARIABLE\");a.registerButtonCallback(\"CREATE_VARIABLE\",function(d){Blockly.Variables.createVariableButtonHandler(d.getTargetWorkspace())});b.push(c);a=Blockly.Variables.flyoutCategoryBlocks(a);return b=b.concat(a)};\nBlockly.Variables.flyoutCategoryBlocks=function(a){a=a.getVariablesOfType(\"\");var b=[];if(0<a.length){var c=a[a.length-1];if(Blockly.Blocks.variables_set){var d=Blockly.utils.xml.createElement(\"block\");d.setAttribute(\"type\",\"variables_set\");d.setAttribute(\"gap\",Blockly.Blocks.math_change?8:24);d.appendChild(Blockly.Variables.generateVariableFieldDom(c));b.push(d)}Blockly.Blocks.math_change&&(d=Blockly.utils.xml.createElement(\"block\"),d.setAttribute(\"type\",\"math_change\"),d.setAttribute(\"gap\",Blockly.Blocks.variables_get?\n20:8),d.appendChild(Blockly.Variables.generateVariableFieldDom(c)),c=Blockly.Xml.textToDom('<value name=\"DELTA\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(Blockly.Blocks.variables_get){a.sort(Blockly.VariableModel.compareByName);c=0;for(var e;e=a[c];c++)d=Blockly.utils.xml.createElement(\"block\"),d.setAttribute(\"type\",\"variables_get\"),d.setAttribute(\"gap\",8),d.appendChild(Blockly.Variables.generateVariableFieldDom(e)),b.push(d)}}return b};\nBlockly.Variables.VAR_LETTER_OPTIONS=\"ijkmnopqrstuvwxyzabcdefgh\";Blockly.Variables.generateUniqueName=function(a){return Blockly.Variables.generateUniqueNameFromOptions(Blockly.Variables.VAR_LETTER_OPTIONS.charAt(0),a.getAllVariableNames())};\nBlockly.Variables.generateUniqueNameFromOptions=function(a,b){if(!b.length)return a;for(var c=Blockly.Variables.VAR_LETTER_OPTIONS,d=\"\",e=c.indexOf(a);;){for(var f=!1,g=0;g<b.length;g++)if(b[g].toLowerCase()==a){f=!0;break}if(!f)return a;e++;e==c.length&&(e=0,d=Number(d)+1);a=c.charAt(e)+d}};\nBlockly.Variables.createVariableButtonHandler=function(a,b,c){var d=c||\"\",e=function(f){Blockly.Variables.promptName(Blockly.Msg.NEW_VARIABLE_TITLE,f,function(g){if(g){var h=Blockly.Variables.nameUsedWithAnyType(g,a);if(h){if(h.type==d)var k=Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace(\"%1\",h.name);else k=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,k=k.replace(\"%1\",h.name).replace(\"%2\",h.type);Blockly.alert(k,function(){e(g)})}else a.createVariable(g,d),b&&b(g)}else b&&b(null)})};e(\"\")};\nBlockly.Variables.createVariable=Blockly.Variables.createVariableButtonHandler;\nBlockly.Variables.renameVariable=function(a,b,c){var d=function(e){var f=Blockly.Msg.RENAME_VARIABLE_TITLE.replace(\"%1\",b.name);Blockly.Variables.promptName(f,e,function(g){if(g){var h=Blockly.Variables.nameUsedWithOtherType_(g,b.type,a);h?(h=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace(\"%1\",h.name).replace(\"%2\",h.type),Blockly.alert(h,function(){d(g)})):(a.renameVariableById(b.getId(),g),c&&c(g))}else c&&c(null)})};d(\"\")};\nBlockly.Variables.promptName=function(a,b,c){Blockly.prompt(a,b,function(d){d&&(d=d.replace(/[\\s\\xa0]+/g,\" \").trim(),d==Blockly.Msg.RENAME_VARIABLE||d==Blockly.Msg.NEW_VARIABLE)&&(d=null);c(d)})};Blockly.Variables.nameUsedWithOtherType_=function(a,b,c){c=c.getVariableMap().getAllVariables();a=a.toLowerCase();for(var d=0,e;e=c[d];d++)if(e.name.toLowerCase()==a&&e.type!=b)return e;return null};\nBlockly.Variables.nameUsedWithAnyType=function(a,b){b=b.getVariableMap().getAllVariables();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null};Blockly.Variables.generateVariableFieldDom=function(a){var b=Blockly.utils.xml.createElement(\"field\");b.setAttribute(\"name\",\"VAR\");b.setAttribute(\"id\",a.getId());b.setAttribute(\"variabletype\",a.type);a=Blockly.utils.xml.createTextNode(a.name);b.appendChild(a);return b};\nBlockly.Variables.getOrCreateVariablePackage=function(a,b,c,d){var e=Blockly.Variables.getVariable(a,b,c,d);e||(e=Blockly.Variables.createVariable_(a,b,c,d));return e};Blockly.Variables.getVariable=function(a,b,c,d){var e=a.getPotentialVariableMap(),f=null;if(b&&(f=a.getVariableById(b),!f&&e&&(f=e.getVariableById(b)),f))return f;if(c){if(void 0==d)throw Error(\"Tried to look up a variable by name without a type\");f=a.getVariable(c,d);!f&&e&&(f=e.getVariable(c,d))}return f};\nBlockly.Variables.createVariable_=function(a,b,c,d){var e=a.getPotentialVariableMap();c||(c=Blockly.Variables.generateUniqueName(a.isFlyout?a.targetWorkspace:a));return e?e.createVariable(c,d,b):a.createVariable(c,d,b)};Blockly.Variables.getAddedVariables=function(a,b){a=a.getAllVariables();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];-1==b.indexOf(e)&&c.push(e)}return c};Blockly.WidgetDiv={};Blockly.WidgetDiv.owner_=null;Blockly.WidgetDiv.dispose_=null;Blockly.WidgetDiv.rendererClassName_=\"\";Blockly.WidgetDiv.themeClassName_=\"\";Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=document.createElement(\"div\"),Blockly.WidgetDiv.DIV.className=\"blocklyWidgetDiv\",(Blockly.parentContainer||document.body).appendChild(Blockly.WidgetDiv.DIV))};\nBlockly.WidgetDiv.show=function(a,b,c){Blockly.WidgetDiv.hide();Blockly.WidgetDiv.owner_=a;Blockly.WidgetDiv.dispose_=c;a=Blockly.WidgetDiv.DIV;a.style.direction=b?\"rtl\":\"ltr\";a.style.display=\"block\";b=Blockly.getMainWorkspace();Blockly.WidgetDiv.rendererClassName_=b.getRenderer().getClassName();Blockly.WidgetDiv.themeClassName_=b.getTheme().getClassName();Blockly.utils.dom.addClass(a,Blockly.WidgetDiv.rendererClassName_);Blockly.utils.dom.addClass(a,Blockly.WidgetDiv.themeClassName_)};\nBlockly.WidgetDiv.hide=function(){if(Blockly.WidgetDiv.isVisible()){Blockly.WidgetDiv.owner_=null;var a=Blockly.WidgetDiv.DIV;a.style.display=\"none\";a.style.left=\"\";a.style.top=\"\";Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_();Blockly.WidgetDiv.dispose_=null;a.textContent=\"\";Blockly.WidgetDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(a,Blockly.WidgetDiv.rendererClassName_),Blockly.WidgetDiv.rendererClassName_=\"\");Blockly.WidgetDiv.themeClassName_&&(Blockly.utils.dom.removeClass(a,\nBlockly.WidgetDiv.themeClassName_),Blockly.WidgetDiv.themeClassName_=\"\");Blockly.getMainWorkspace().markFocused()}};Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_};Blockly.WidgetDiv.hideIfOwner=function(a){Blockly.WidgetDiv.owner_==a&&Blockly.WidgetDiv.hide()};Blockly.WidgetDiv.positionInternal_=function(a,b,c){Blockly.WidgetDiv.DIV.style.left=a+\"px\";Blockly.WidgetDiv.DIV.style.top=b+\"px\";Blockly.WidgetDiv.DIV.style.height=c+\"px\"};\nBlockly.WidgetDiv.positionWithAnchor=function(a,b,c,d){var e=Blockly.WidgetDiv.calculateY_(a,b,c);a=Blockly.WidgetDiv.calculateX_(a,b,c,d);0>e?Blockly.WidgetDiv.positionInternal_(a,0,c.height+e):Blockly.WidgetDiv.positionInternal_(a,e,c.height)};Blockly.WidgetDiv.calculateX_=function(a,b,c,d){if(d)return b=Math.max(b.right-c.width,a.left),Math.min(b,a.right-c.width);b=Math.min(b.left,a.right-c.width);return Math.max(b,a.left)};\nBlockly.WidgetDiv.calculateY_=function(a,b,c){return b.bottom+c.height>=a.bottom?b.top-c.height:b.bottom};Blockly.VERSION=\"3.20200924.4\";Blockly.mainWorkspace=null;Blockly.selected=null;Blockly.draggingConnections=[];Blockly.clipboardXml_=null;Blockly.clipboardSource_=null;Blockly.clipboardTypeCounts_=null;Blockly.cache3dSupported_=null;Blockly.parentContainer=null;Blockly.svgSize=function(a){return new Blockly.utils.Size(a.cachedWidth_,a.cachedHeight_)};Blockly.resizeSvgContents=function(a){a.resizeContents()};\nBlockly.svgResize=function(a){for(;a.options.parentWorkspace;)a=a.options.parentWorkspace;var b=a.getParentSvg(),c=b.parentNode;if(c){var d=c.offsetWidth;c=c.offsetHeight;b.cachedWidth_!=d&&(b.setAttribute(\"width\",d+\"px\"),b.cachedWidth_=d);b.cachedHeight_!=c&&(b.setAttribute(\"height\",c+\"px\"),b.cachedHeight_=c);a.resize()}};\nBlockly.onKeyDown=function(a){var b=Blockly.mainWorkspace;if(b&&!(Blockly.utils.isTargetInput(a)||b.rendered&&!b.isVisible()))if(b.options.readOnly)Blockly.navigation.onKeyPress(a);else{var c=!1;if(a.keyCode==Blockly.utils.KeyCodes.ESC)Blockly.hideChaff(),Blockly.navigation.onBlocklyAction(Blockly.navigation.ACTION_EXIT);else{if(!Blockly.Gesture.inProgress()&&Blockly.navigation.onKeyPress(a))return;if(a.keyCode==Blockly.utils.KeyCodes.BACKSPACE||a.keyCode==Blockly.utils.KeyCodes.DELETE){a.preventDefault();\nif(Blockly.Gesture.inProgress())return;Blockly.selected&&Blockly.selected.isDeletable()&&(c=!0)}else if(a.altKey||a.ctrlKey||a.metaKey){if(Blockly.Gesture.inProgress())return;Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&(a.keyCode==Blockly.utils.KeyCodes.C?(Blockly.hideChaff(),Blockly.copy_(Blockly.selected)):a.keyCode!=Blockly.utils.KeyCodes.X||Blockly.selected.workspace.isFlyout||(Blockly.copy_(Blockly.selected),c=!0));a.keyCode==Blockly.utils.KeyCodes.V?Blockly.clipboardXml_&&\n(a=Blockly.clipboardSource_,a.isFlyout&&(a=a.targetWorkspace),Blockly.clipboardTypeCounts_&&a.isCapacityAvailable(Blockly.clipboardTypeCounts_)&&(Blockly.Events.setGroup(!0),a.paste(Blockly.clipboardXml_),Blockly.Events.setGroup(!1))):a.keyCode==Blockly.utils.KeyCodes.Z?(Blockly.hideChaff(),b.undo(a.shiftKey)):a.ctrlKey&&a.keyCode==Blockly.utils.KeyCodes.Y&&(Blockly.hideChaff(),b.undo(!0))}}c&&!Blockly.selected.workspace.isFlyout&&(Blockly.Events.setGroup(!0),Blockly.hideChaff(),Blockly.selected.dispose(!0,\n!0),Blockly.Events.setGroup(!1))}};Blockly.copy_=function(a){if(a=a.toCopyData())Blockly.clipboardXml_=a.xml,Blockly.clipboardSource_=a.source,Blockly.clipboardTypeCounts_=a.typeCounts};Blockly.duplicate=function(a){var b=Blockly.clipboardXml_,c=Blockly.clipboardSource_;Blockly.copy_(a);a.workspace.paste(Blockly.clipboardXml_);Blockly.clipboardXml_=b;Blockly.clipboardSource_=c};Blockly.onContextMenu_=function(a){Blockly.utils.isTargetInput(a)||a.preventDefault()};\nBlockly.hideChaff=function(a){Blockly.Tooltip.hide();Blockly.WidgetDiv.hide();Blockly.DropDownDiv.hideWithoutAnimation();a||(a=Blockly.getMainWorkspace(),a.trashcan&&a.trashcan.flyout&&a.trashcan.closeFlyout(),(a=a.getToolbox())&&a.getFlyout()&&a.getFlyout().autoClose&&a.clearSelection())};Blockly.getMainWorkspace=function(){return Blockly.mainWorkspace};Blockly.alert=function(a,b){alert(a);b&&b()};Blockly.confirm=function(a,b){b(confirm(a))};Blockly.prompt=function(a,b,c){c(prompt(a,b))};\nBlockly.jsonInitFactory_=function(a){return function(){this.jsonInit(a)}};\nBlockly.defineBlocksWithJsonArray=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.type;null==d||\"\"===d?console.warn(\"Block definition #\"+b+\" in JSON array is missing a type attribute. Skipping.\"):(Blockly.Blocks[d]&&console.warn(\"Block definition #\"+b+' in JSON array overwrites prior definition of \"'+d+'\".'),Blockly.Blocks[d]={init:Blockly.jsonInitFactory_(c)})}else console.warn(\"Block definition #\"+b+\" in JSON array is \"+c+\". Skipping.\")}};\nBlockly.bindEventWithChecks_=function(a,b,c,d,e,f){var g=!1,h=function(p){var q=!e;p=Blockly.Touch.splitEventByTouches(p);for(var t=0,r;r=p[t];t++)if(!q||Blockly.Touch.shouldHandleEvent(r))Blockly.Touch.setClientFromTouch(r),c?d.call(c,r):d(r),g=!0},k=[];if(Blockly.utils.global.PointerEvent&&b in Blockly.Touch.TOUCH_MAP)for(var l=0,m;m=Blockly.Touch.TOUCH_MAP[b][l];l++)a.addEventListener(m,h,!1),k.push([a,m,h]);else if(a.addEventListener(b,h,!1),k.push([a,b,h]),b in Blockly.Touch.TOUCH_MAP){var n=\nfunction(p){h(p);var q=!f;g&&q&&p.preventDefault()};for(l=0;m=Blockly.Touch.TOUCH_MAP[b][l];l++)a.addEventListener(m,n,!1),k.push([a,m,n])}return k};\nBlockly.bindEvent_=function(a,b,c,d){var e=function(l){c?d.call(c,l):d(l)},f=[];if(Blockly.utils.global.PointerEvent&&b in Blockly.Touch.TOUCH_MAP)for(var g=0,h;h=Blockly.Touch.TOUCH_MAP[b][g];g++)a.addEventListener(h,e,!1),f.push([a,h,e]);else if(a.addEventListener(b,e,!1),f.push([a,b,e]),b in Blockly.Touch.TOUCH_MAP){var k=function(l){if(l.changedTouches&&1==l.changedTouches.length){var m=l.changedTouches[0];l.clientX=m.clientX;l.clientY=m.clientY}e(l);l.preventDefault()};for(g=0;h=Blockly.Touch.TOUCH_MAP[b][g];g++)a.addEventListener(h,\nk,!1),f.push([a,h,k])}return f};Blockly.unbindEvent_=function(a){for(;a.length;){var b=a.pop(),c=b[2];b[0].removeEventListener(b[1],c,!1)}return c};Blockly.isNumber=function(a){return/^\\s*-?\\d+(\\.\\d+)?\\s*$/.test(a)};Blockly.hueToHex=function(a){return Blockly.utils.colour.hsvToHex(a,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)};\nBlockly.checkBlockColourConstants=function(){Blockly.checkBlockColourConstant_(\"LOGIC_HUE\",[\"Blocks\",\"logic\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"LOGIC_HUE\",[\"Constants\",\"Logic\",\"HUE\"],210);Blockly.checkBlockColourConstant_(\"LOOPS_HUE\",[\"Blocks\",\"loops\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"LOOPS_HUE\",[\"Constants\",\"Loops\",\"HUE\"],120);Blockly.checkBlockColourConstant_(\"MATH_HUE\",[\"Blocks\",\"math\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"MATH_HUE\",[\"Constants\",\"Math\",\n\"HUE\"],230);Blockly.checkBlockColourConstant_(\"TEXTS_HUE\",[\"Blocks\",\"texts\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"TEXTS_HUE\",[\"Constants\",\"Text\",\"HUE\"],160);Blockly.checkBlockColourConstant_(\"LISTS_HUE\",[\"Blocks\",\"lists\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"LISTS_HUE\",[\"Constants\",\"Lists\",\"HUE\"],260);Blockly.checkBlockColourConstant_(\"COLOUR_HUE\",[\"Blocks\",\"colour\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"COLOUR_HUE\",[\"Constants\",\"Colour\",\"HUE\"],20);Blockly.checkBlockColourConstant_(\"VARIABLES_HUE\",\n[\"Blocks\",\"variables\",\"HUE\"],void 0);Blockly.checkBlockColourConstant_(\"VARIABLES_HUE\",[\"Constants\",\"Variables\",\"HUE\"],330);Blockly.checkBlockColourConstant_(\"VARIABLES_DYNAMIC_HUE\",[\"Constants\",\"VariablesDynamic\",\"HUE\"],310);Blockly.checkBlockColourConstant_(\"PROCEDURES_HUE\",[\"Blocks\",\"procedures\",\"HUE\"],void 0)};\nBlockly.checkBlockColourConstant_=function(a,b,c){for(var d=\"Blockly\",e=Blockly,f=0;f<b.length;++f)d+=\".\"+b[f],e&&(e=e[b[f]]);e&&e!==c&&(a=(void 0===c?'%1 has been removed. Use Blockly.Msg[\"%2\"].':'%1 is deprecated and unused. Override Blockly.Msg[\"%2\"].').replace(\"%1\",d).replace(\"%2\",a),console.warn(a))};Blockly.setParentContainer=function(a){Blockly.parentContainer=a};Blockly.Icon=function(a){this.block_=a;this.iconGroup_=null};Blockly.Icon.prototype.collapseHidden=!0;Blockly.Icon.prototype.SIZE=17;Blockly.Icon.prototype.bubble_=null;Blockly.Icon.prototype.iconXY_=null;\nBlockly.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyIconGroup\"},null),this.block_.isInFlyout&&Blockly.utils.dom.addClass(this.iconGroup_,\"blocklyIconGroupReadonly\"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,\"mouseup\",this,this.iconClick_),this.updateEditable())};\nBlockly.Icon.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.iconGroup_);this.iconGroup_=null;this.setVisible(!1);this.block_=null};Blockly.Icon.prototype.updateEditable=function(){};Blockly.Icon.prototype.isVisible=function(){return!!this.bubble_};Blockly.Icon.prototype.iconClick_=function(a){this.block_.workspace.isDragging()||this.block_.isInFlyout||Blockly.utils.isRightButton(a)||this.setVisible(!this.isVisible())};\nBlockly.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)};Blockly.Icon.prototype.setIconLocation=function(a){this.iconXY_=a;this.isVisible()&&this.bubble_.setAnchorLocation(a)};\nBlockly.Icon.prototype.computeIconLocation=function(){var a=this.block_.getRelativeToSurfaceXY(),b=Blockly.utils.getRelativeXY(this.iconGroup_);a=new Blockly.utils.Coordinate(a.x+b.x+this.SIZE/2,a.y+b.y+this.SIZE/2);Blockly.utils.Coordinate.equals(this.getIconLocation(),a)||this.setIconLocation(a)};Blockly.Icon.prototype.getIconLocation=function(){return this.iconXY_};\nBlockly.Icon.prototype.getCorrectedSize=function(){return new Blockly.utils.Size(Blockly.Icon.prototype.SIZE,Blockly.Icon.prototype.SIZE-2)};Blockly.Warning=function(a){Blockly.Warning.superClass_.constructor.call(this,a);this.createIcon();this.text_={}};Blockly.utils.object.inherits(Blockly.Warning,Blockly.Icon);Blockly.Warning.prototype.collapseHidden=!1;\nBlockly.Warning.prototype.drawIcon_=function(a){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyIconShape\",d:\"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyIconSymbol\",d:\"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyIconSymbol\",x:\"7\",y:\"11\",height:\"2\",width:\"2\"},a)};\nBlockly.Warning.textToDom_=function(a){var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{\"class\":\"blocklyText blocklyBubbleText blocklyNoPointerEvents\",y:Blockly.Bubble.BORDER_WIDTH},null);a=a.split(\"\\n\");for(var c=0;c<a.length;c++){var d=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{dy:\"1em\",x:Blockly.Bubble.BORDER_WIDTH},b),e=document.createTextNode(a[c]);d.appendChild(e)}return b};\nBlockly.Warning.prototype.setVisible=function(a){a!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,\"warningOpen\",!a,a)),a?this.createBubble():this.disposeBubble())};\nBlockly.Warning.prototype.createBubble=function(){this.paragraphElement_=Blockly.Warning.textToDom_(this.getText());this.bubble_=new Blockly.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.pathObject.svgPath,this.iconXY_,null,null);this.bubble_.setSvgId(this.block_.id);if(this.block_.RTL)for(var a=this.paragraphElement_.getBBox().width,b=0,c;c=this.paragraphElement_.childNodes[b];b++)c.setAttribute(\"text-anchor\",\"end\"),c.setAttribute(\"x\",a+Blockly.Bubble.BORDER_WIDTH);this.applyColour()};\nBlockly.Warning.prototype.disposeBubble=function(){this.bubble_.dispose();this.paragraphElement_=this.body_=this.bubble_=null};Blockly.Warning.prototype.setText=function(a,b){this.text_[b]!=a&&(a?this.text_[b]=a:delete this.text_[b],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))};Blockly.Warning.prototype.getText=function(){var a=[],b;for(b in this.text_)a.push(this.text_[b]);return a.join(\"\\n\")};Blockly.Warning.prototype.dispose=function(){this.block_.warning=null;Blockly.Icon.prototype.dispose.call(this)};Blockly.Comment=function(a){Blockly.Comment.superClass_.constructor.call(this,a);this.model_=a.commentModel;this.model_.text=this.model_.text||\"\";this.cachedText_=\"\";this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null;this.createIcon()};Blockly.utils.object.inherits(Blockly.Comment,Blockly.Icon);\nBlockly.Comment.prototype.drawIcon_=function(a){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{\"class\":\"blocklyIconShape\",r:\"8\",cx:\"8\",cy:\"8\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyIconSymbol\",d:\"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyIconSymbol\",\nx:\"6.8\",y:\"10.78\",height:\"2\",width:\"2\"},a)};\nBlockly.Comment.prototype.createEditor_=function(){this.foreignObject_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FOREIGNOBJECT,{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null);var a=document.createElementNS(Blockly.utils.dom.HTML_NS,\"body\");a.setAttribute(\"xmlns\",Blockly.utils.dom.HTML_NS);a.className=\"blocklyMinimalBody\";var b=this.textarea_=document.createElementNS(Blockly.utils.dom.HTML_NS,\"textarea\");b.className=\"blocklyCommentTextarea\";b.setAttribute(\"dir\",this.block_.RTL?\n\"RTL\":\"LTR\");b.value=this.model_.text;this.resizeTextarea_();a.appendChild(b);this.foreignObject_.appendChild(a);this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(b,\"mouseup\",this,this.startEdit_,!0,!0);this.onWheelWrapper_=Blockly.bindEventWithChecks_(b,\"wheel\",this,function(c){c.stopPropagation()});this.onChangeWrapper_=Blockly.bindEventWithChecks_(b,\"change\",this,function(c){this.cachedText_!=this.model_.text&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,\"comment\",null,this.cachedText_,\nthis.model_.text))});this.onInputWrapper_=Blockly.bindEventWithChecks_(b,\"input\",this,function(c){this.model_.text=b.value});setTimeout(b.focus.bind(b),0);return this.foreignObject_};Blockly.Comment.prototype.updateEditable=function(){Blockly.Comment.superClass_.updateEditable.call(this);this.isVisible()&&(this.disposeBubble_(),this.createBubble_())};Blockly.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())};\nBlockly.Comment.prototype.resizeTextarea_=function(){var a=this.model_.size,b=2*Blockly.Bubble.BORDER_WIDTH,c=a.width-b;a=a.height-b;this.foreignObject_.setAttribute(\"width\",c);this.foreignObject_.setAttribute(\"height\",a);this.textarea_.style.width=c-4+\"px\";this.textarea_.style.height=a-4+\"px\"};Blockly.Comment.prototype.setVisible=function(a){a!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,\"commentOpen\",!a,a)),(this.model_.pinned=a)?this.createBubble_():this.disposeBubble_())};\nBlockly.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||Blockly.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()};Blockly.Comment.prototype.createEditableBubble_=function(){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height);this.bubble_.setSvgId(this.block_.id);this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this));this.applyColour()};\nBlockly.Comment.prototype.createNonEditableBubble_=function(){Blockly.Warning.prototype.createBubble.call(this)};\nBlockly.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?Blockly.Warning.prototype.disposeBubble.call(this):(this.onMouseUpWrapper_&&(Blockly.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(Blockly.unbindEvent_(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(Blockly.unbindEvent_(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(Blockly.unbindEvent_(this.onInputWrapper_),this.onInputWrapper_=\nnull),this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)};Blockly.Comment.prototype.startEdit_=function(a){this.bubble_.promote()&&this.textarea_.focus();this.cachedText_=this.model_.text};Blockly.Comment.prototype.getBubbleSize=function(){return this.model_.size};Blockly.Comment.prototype.setBubbleSize=function(a,b){this.bubble_?this.bubble_.setBubbleSize(a,b):(this.model_.size.width=a,this.model_.size.height=b)};\nBlockly.Comment.prototype.getText=function(){Blockly.utils.deprecation.warn(\"Comment.prototype.getText\",\"August 2019\",\"December 2020\",\"block.getCommentText\");return this.model_.text||\"\"};Blockly.Comment.prototype.setText=function(a){Blockly.utils.deprecation.warn(\"Comment.prototype.setText\",\"August 2019\",\"December 2020\",\"block.setCommentText\");this.model_.text!=a&&(this.model_.text=a,this.updateText())};\nBlockly.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)};Blockly.Comment.prototype.dispose=function(){this.block_.comment=null;Blockly.Icon.prototype.dispose.call(this)};Blockly.Css.register(\".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,overflow: hidden;,}\".split(\",\"));Blockly.FlyoutCursor=function(){Blockly.FlyoutCursor.superClass_.constructor.call(this)};Blockly.utils.object.inherits(Blockly.FlyoutCursor,Blockly.Cursor);Blockly.FlyoutCursor.prototype.onBlocklyAction=function(a){switch(a.name){case Blockly.navigation.actionNames.PREVIOUS:return this.prev(),!0;case Blockly.navigation.actionNames.NEXT:return this.next(),!0;default:return!1}};\nBlockly.FlyoutCursor.prototype.next=function(){var a=this.getCurNode();if(!a)return null;(a=a.next())&&this.setCurNode(a);return a};Blockly.FlyoutCursor.prototype.in=function(){return null};Blockly.FlyoutCursor.prototype.prev=function(){var a=this.getCurNode();if(!a)return null;(a=a.prev())&&this.setCurNode(a);return a};Blockly.FlyoutCursor.prototype.out=function(){return null};Blockly.Flyout=function(a){a.getMetrics=this.getMetrics_.bind(this);a.setMetrics=this.setMetrics_.bind(this);this.workspace_=new Blockly.WorkspaceSvg(a);this.workspace_.isFlyout=!0;this.workspace_.setVisible(this.isVisible_);this.RTL=!!a.RTL;this.horizontalLayout=!1;this.toolboxPosition_=a.toolboxPosition;this.eventWrappers_=[];this.mats_=[];this.buttons_=[];this.listeners_=[];this.permanentlyDisabled_=[];this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH;this.targetWorkspace=null};\nBlockly.Flyout.prototype.autoClose=!0;Blockly.Flyout.prototype.isVisible_=!1;Blockly.Flyout.prototype.containerVisible_=!0;Blockly.Flyout.prototype.CORNER_RADIUS=8;Blockly.Flyout.prototype.MARGIN=Blockly.Flyout.prototype.CORNER_RADIUS;Blockly.Flyout.prototype.GAP_X=3*Blockly.Flyout.prototype.MARGIN;Blockly.Flyout.prototype.GAP_Y=3*Blockly.Flyout.prototype.MARGIN;Blockly.Flyout.prototype.SCROLLBAR_PADDING=2;Blockly.Flyout.prototype.width_=0;Blockly.Flyout.prototype.height_=0;\nBlockly.Flyout.prototype.dragAngleRange_=70;\nBlockly.Flyout.prototype.createDom=function(a){this.svgGroup_=Blockly.utils.dom.createSvgElement(a,{\"class\":\"blocklyFlyout\",style:\"display: none\"},null);this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyFlyoutBackground\"},this.svgGroup_);this.svgGroup_.appendChild(this.workspace_.createDom());this.workspace_.getThemeManager().subscribe(this.svgBackground_,\"flyoutBackgroundColour\",\"fill\");this.workspace_.getThemeManager().subscribe(this.svgBackground_,\"flyoutOpacity\",\n\"fill-opacity\");this.workspace_.getMarkerManager().setCursor(new Blockly.FlyoutCursor);return this.svgGroup_};\nBlockly.Flyout.prototype.init=function(a){this.targetWorkspace=a;this.workspace_.targetWorkspace=a;this.scrollbar=new Blockly.Scrollbar(this.workspace_,this.horizontalLayout,!1,\"blocklyFlyoutScrollbar\");this.hide();Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgGroup_,\"wheel\",this,this.wheel_));this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_));Array.prototype.push.apply(this.eventWrappers_,\nBlockly.bindEventWithChecks_(this.svgBackground_,\"mousedown\",this,this.onMouseDown_));this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace);this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap());this.workspace_.createPotentialVariableMap()};\nBlockly.Flyout.prototype.dispose=function(){this.hide();Blockly.unbindEvent_(this.eventWrappers_);this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null);this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null);this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null);this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),\nthis.svgGroup_=null);this.targetWorkspace=this.svgBackground_=null};Blockly.Flyout.prototype.getWidth=function(){return this.width_};Blockly.Flyout.prototype.getHeight=function(){return this.height_};Blockly.Flyout.prototype.getWorkspace=function(){return this.workspace_};Blockly.Flyout.prototype.isVisible=function(){return this.isVisible_};Blockly.Flyout.prototype.setVisible=function(a){var b=a!=this.isVisible();this.isVisible_=a;b&&this.updateDisplay_()};\nBlockly.Flyout.prototype.setContainerVisible=function(a){var b=a!=this.containerVisible_;this.containerVisible_=a;b&&this.updateDisplay_()};Blockly.Flyout.prototype.updateDisplay_=function(){var a=this.containerVisible_?this.isVisible():!1;this.svgGroup_.style.display=a?\"block\":\"none\";this.scrollbar.setContainerVisible(a)};\nBlockly.Flyout.prototype.positionAt_=function(a,b,c,d){this.svgGroup_.setAttribute(\"width\",a);this.svgGroup_.setAttribute(\"height\",b);\"svg\"==this.svgGroup_.tagName?Blockly.utils.dom.setCssTransform(this.svgGroup_,\"translate(\"+c+\"px,\"+d+\"px)\"):this.svgGroup_.setAttribute(\"transform\",\"translate(\"+c+\",\"+d+\")\");this.scrollbar&&(this.scrollbar.setOrigin(c,d),this.scrollbar.resize(),this.scrollbar.setPosition(this.scrollbar.position.x,this.scrollbar.position.y))};\nBlockly.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var a=0,b;b=this.listeners_[a];a++)Blockly.unbindEvent_(b);this.listeners_.length=0;this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}};\nBlockly.Flyout.prototype.show=function(a){this.workspace_.setResizesEnabled(!1);this.hide();this.clearOldBlocks_();\"string\"==typeof a&&(a=this.getDynamicCategoryContents_(a));this.setVisible(!0);a=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(a);a=this.createFlyoutInfo_(a);this.layout_(a.contents,a.gaps);this.listeners_.push(Blockly.bindEventWithChecks_(this.svgBackground_,\"mouseover\",this,function(){for(var b=this.workspace_.getTopBlocks(!1),c=0,d;d=b[c];c++)d.removeSelect()}));this.horizontalLayout?\nthis.height_=0:this.width_=0;this.workspace_.setResizesEnabled(!0);this.reflow();this.filterForCapacity_();this.position();this.reflowWrapper_=this.reflow.bind(this);this.workspace_.addChangeListener(this.reflowWrapper_)};\nBlockly.Flyout.prototype.createFlyoutInfo_=function(a){var b=[],c=[];this.permanentlyDisabled_.length=0;for(var d=this.horizontalLayout?this.GAP_X:this.GAP_Y,e=0,f;f=a[e];e++)switch(f.custom&&(f=this.getDynamicCategoryContents_(f.custom),f=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(f),a.splice.apply(a,[e,1].concat(f)),f=a[e]),f.kind.toUpperCase()){case \"BLOCK\":var g=f,h=this.getBlockXml_(g);f=this.createBlock_(h);g=parseInt(g.gap||h.getAttribute(\"gap\"),10);c.push(isNaN(g)?d:g);b.push({type:\"block\",\nblock:f});break;case \"SEP\":this.addSeparatorGap_(f,c,d);break;case \"LABEL\":f=this.createButton_(f,!0);b.push({type:\"button\",button:f});c.push(d);break;case \"BUTTON\":f=this.createButton_(f,!1),b.push({type:\"button\",button:f}),c.push(d)}return{contents:b,gaps:c}};\nBlockly.Flyout.prototype.getDynamicCategoryContents_=function(a){a=this.workspace_.targetWorkspace.getToolboxCategoryCallback(a);if(\"function\"!=typeof a)throw TypeError(\"Couldn't find a callback function when opening a toolbox category.\");a=a(this.workspace_.targetWorkspace);if(!Array.isArray(a))throw new TypeError(\"Result of toolbox category callback must be an array.\");return a};\nBlockly.Flyout.prototype.createButton_=function(a,b){if(!Blockly.FlyoutButton)throw Error(\"Missing require for Blockly.FlyoutButton\");return new Blockly.FlyoutButton(this.workspace_,this.targetWorkspace,a,b)};Blockly.Flyout.prototype.createBlock_=function(a){a=Blockly.Xml.domToBlock(a,this.workspace_);a.isEnabled()||this.permanentlyDisabled_.push(a);return a};\nBlockly.Flyout.prototype.getBlockXml_=function(a){var b=null,c=a.blockxml;c&&\"string\"!=typeof c?b=c:c&&\"string\"==typeof c?(b=Blockly.Xml.textToDom(c),a.blockxml=b):a.type&&(b=Blockly.utils.xml.createElement(\"xml\"),b.setAttribute(\"type\",a.type),b.setAttribute(\"disabled\",a.disabled),a.blockxml=b);if(!b)throw Error(\"Error: Invalid block definition. Block definition must have blockxml or type.\");return b};\nBlockly.Flyout.prototype.addSeparatorGap_=function(a,b,c){a=parseInt(a.gap,10);!isNaN(a)&&0<b.length?b[b.length-1]=a:b.push(c)};Blockly.Flyout.prototype.clearOldBlocks_=function(){for(var a=this.workspace_.getTopBlocks(!1),b=0,c;c=a[b];b++)c.workspace==this.workspace_&&c.dispose(!1,!1);for(b=0;b<this.mats_.length;b++)if(a=this.mats_[b])Blockly.Tooltip.unbindMouseEvents(a),Blockly.utils.dom.removeNode(a);for(b=this.mats_.length=0;a=this.buttons_[b];b++)a.dispose();this.buttons_.length=0;this.workspace_.getPotentialVariableMap().clear()};\nBlockly.Flyout.prototype.addBlockListeners_=function(a,b,c){this.listeners_.push(Blockly.bindEventWithChecks_(a,\"mousedown\",null,this.blockMouseDown_(b)));this.listeners_.push(Blockly.bindEventWithChecks_(c,\"mousedown\",null,this.blockMouseDown_(b)));this.listeners_.push(Blockly.bindEvent_(a,\"mouseenter\",b,b.addSelect));this.listeners_.push(Blockly.bindEvent_(a,\"mouseleave\",b,b.removeSelect));this.listeners_.push(Blockly.bindEvent_(c,\"mouseenter\",b,b.addSelect));this.listeners_.push(Blockly.bindEvent_(c,\n\"mouseleave\",b,b.removeSelect))};Blockly.Flyout.prototype.blockMouseDown_=function(a){var b=this;return function(c){var d=b.targetWorkspace.getGesture(c);d&&(d.setStartBlock(a),d.handleFlyoutStart(c,b))}};Blockly.Flyout.prototype.onMouseDown_=function(a){var b=this.targetWorkspace.getGesture(a);b&&b.handleFlyoutStart(a,this)};Blockly.Flyout.prototype.isBlockCreatable_=function(a){return a.isEnabled()};\nBlockly.Flyout.prototype.createBlock=function(a){var b=null;Blockly.Events.disable();var c=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{b=this.placeNewBlock_(a)}finally{Blockly.Events.enable()}Blockly.hideChaff();a=Blockly.Variables.getAddedVariables(this.targetWorkspace,c);if(Blockly.Events.isEnabled()){Blockly.Events.setGroup(!0);for(c=0;c<a.length;c++)Blockly.Events.fire(new Blockly.Events.VarCreate(a[c]));Blockly.Events.fire(new Blockly.Events.Create(b))}this.autoClose?\nthis.hide():this.filterForCapacity_();return b};Blockly.Flyout.prototype.initFlyoutButton_=function(a,b,c){var d=a.createDom();a.moveTo(b,c);a.show();this.listeners_.push(Blockly.bindEventWithChecks_(d,\"mousedown\",this,this.onMouseDown_));this.buttons_.push(a)};\nBlockly.Flyout.prototype.createRect_=function(a,b,c,d,e){b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"fill-opacity\":0,x:b,y:c,height:d.height,width:d.width},null);b.tooltip=a;Blockly.Tooltip.bindMouseEvents(b);this.workspace_.getCanvas().insertBefore(b,a.getSvgRoot());a.flyoutRect_=b;return this.mats_[e]=b};\nBlockly.Flyout.prototype.moveRectToBlock_=function(a,b){var c=b.getHeightWidth();a.setAttribute(\"width\",c.width);a.setAttribute(\"height\",c.height);b=b.getRelativeToSurfaceXY();a.setAttribute(\"y\",b.y);a.setAttribute(\"x\",this.RTL?b.x-c.width:b.x)};\nBlockly.Flyout.prototype.filterForCapacity_=function(){for(var a=this.workspace_.getTopBlocks(!1),b=0,c;c=a[b];b++)if(-1==this.permanentlyDisabled_.indexOf(c))for(var d=this.targetWorkspace.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(c));c;)c.setEnabled(d),c=c.getNextBlock()};Blockly.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_);this.reflowInternal_();this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)};\nBlockly.Flyout.prototype.isScrollable=function(){return this.scrollbar?this.scrollbar.isVisible():!1};\nBlockly.Flyout.prototype.placeNewBlock_=function(a){var b=this.targetWorkspace;if(!a.getSvgRoot())throw Error(\"oldBlock is not rendered.\");var c=Blockly.Xml.blockToDom(a,!0);b.setResizesEnabled(!1);c=Blockly.Xml.domToBlock(c,b);if(!c.getSvgRoot())throw Error(\"block is not rendered.\");var d=b.getOriginOffsetInPixels(),e=this.workspace_.getOriginOffsetInPixels();a=a.getRelativeToSurfaceXY();a.scale(this.workspace_.scale);a=Blockly.utils.Coordinate.sum(e,a);d=Blockly.utils.Coordinate.difference(a,d);\nd.scale(1/b.scale);c.moveBy(d.x,d.y);return c};Blockly.Flyout.prototype.onBlocklyAction=function(a){return this.workspace_.getCursor().onBlocklyAction(a)};Blockly.HorizontalFlyout=function(a){Blockly.HorizontalFlyout.superClass_.constructor.call(this,a);this.horizontalLayout=!0};Blockly.utils.object.inherits(Blockly.HorizontalFlyout,Blockly.Flyout);\nBlockly.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var a=this.workspace_.getCanvas().getBBox()}catch(e){a={height:0,y:0,width:0,x:0}}var b=this.SCROLLBAR_PADDING,c=this.SCROLLBAR_PADDING;this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(b=0);var d=this.height_;this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP&&(d-=this.SCROLLBAR_PADDING);return{contentHeight:(a.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(a.width+2*this.MARGIN)*this.workspace_.scale,\ncontentTop:0,contentLeft:0,viewHeight:d,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,absoluteTop:b,absoluteLeft:c}};Blockly.HorizontalFlyout.prototype.setMetrics_=function(a){var b=this.getMetrics_();b&&(\"number\"==typeof a.x&&(this.workspace_.scrollX=-b.contentWidth*a.x),this.workspace_.translate(this.workspace_.scrollX+b.absoluteLeft,this.workspace_.scrollY+b.absoluteTop))};\nBlockly.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var a=this.targetWorkspace.getMetrics();a&&(this.width_=a.viewWidth,this.setBackgroundPath_(a.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?a.toolboxHeight?this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?a.toolboxHeight:a.viewHeight-this.height_:this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?0:a.viewHeight:\nthis.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?0:a.viewHeight+a.absoluteTop-this.height_))}};\nBlockly.HorizontalFlyout.prototype.setBackgroundPath_=function(a,b){var c=this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP,d=[\"M 0,\"+(c?0:this.CORNER_RADIUS)];c?(d.push(\"h\",a+2*this.CORNER_RADIUS),d.push(\"v\",b),d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push(\"h\",-a),d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),\nd.push(\"h\",a),d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push(\"v\",b),d.push(\"h\",-a-2*this.CORNER_RADIUS));d.push(\"z\");this.svgBackground_.setAttribute(\"d\",d.join(\" \"))};Blockly.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(this.RTL?Infinity:0)};\nBlockly.HorizontalFlyout.prototype.wheel_=function(a){var b=Blockly.utils.getScrollDeltaPixels(a),c=b.x||b.y;c&&(b=this.getMetrics_(),c=b.viewLeft+c,c=Math.min(c,b.contentWidth-b.viewWidth),c=Math.max(c,0),this.scrollbar.set(c),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation());a.preventDefault();a.stopPropagation()};\nBlockly.HorizontalFlyout.prototype.layout_=function(a,b){this.workspace_.scale=this.targetWorkspace.scale;var c=this.MARGIN,d=c+this.tabWidth_;this.RTL&&(a=a.reverse());for(var e=0,f;f=a[e];e++)if(\"block\"==f.type){f=f.block;for(var g=f.getDescendants(!1),h=0,k;k=g[h];h++)k.isInFlyout=!0;f.render();g=f.getSvgRoot();h=f.getHeightWidth();k=f.outputConnection?this.tabWidth_:0;k=this.RTL?d+h.width:d-k;f.moveBy(k,c);k=this.createRect_(f,k,c,h,e);d+=h.width+b[e];this.addBlockListeners_(g,f,k)}else\"button\"==\nf.type&&(this.initFlyoutButton_(f.button,d,c),d+=f.button.width+b[e])};Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace=function(a){a=Math.atan2(a.y,a.x)/Math.PI*180;var b=this.dragAngleRange_;return a<90+b&&a>90-b||a>-90-b&&a<-90+b?!0:!1};\nBlockly.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var a=this.svgGroup_.getBoundingClientRect(),b=a.top;return this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?new Blockly.utils.Rect(-1E9,b+a.height,-1E9,1E9):new Blockly.utils.Rect(b,1E9,-1E9,1E9)};\nBlockly.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var a=0,b=this.workspace_.getTopBlocks(!1),c=0,d;d=b[c];c++)a=Math.max(a,d.getHeightWidth().height);a+=1.5*this.MARGIN;a*=this.workspace_.scale;a+=Blockly.Scrollbar.scrollbarThickness;if(this.height_!=a){for(c=0;d=b[c];c++)d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=Blockly.TOOLBOX_AT_TOP||this.targetWorkspace.getToolbox()||\nthis.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+a);this.height_=a;this.position()}};Blockly.registry.register(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,Blockly.registry.DEFAULT,Blockly.HorizontalFlyout);Blockly.VerticalFlyout=function(a){Blockly.VerticalFlyout.superClass_.constructor.call(this,a)};Blockly.utils.object.inherits(Blockly.VerticalFlyout,Blockly.Flyout);Blockly.VerticalFlyout.registryName=\"verticalFlyout\";\nBlockly.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var a=this.workspace_.getCanvas().getBBox()}catch(e){a={height:0,y:0,width:0,x:0}}var b=this.SCROLLBAR_PADDING,c=this.height_-2*this.SCROLLBAR_PADDING,d=this.width_;this.RTL||(d-=this.SCROLLBAR_PADDING);return{contentHeight:a.height*this.workspace_.scale+2*this.MARGIN,contentWidth:a.width*this.workspace_.scale+2*this.MARGIN,contentTop:a.y,contentLeft:a.x,viewHeight:c,viewWidth:d,viewTop:-this.workspace_.scrollY+\na.y,viewLeft:-this.workspace_.scrollX,absoluteTop:b,absoluteLeft:0}};Blockly.VerticalFlyout.prototype.setMetrics_=function(a){var b=this.getMetrics_();b&&(\"number\"==typeof a.y&&(this.workspace_.scrollY=-b.contentHeight*a.y),this.workspace_.translate(this.workspace_.scrollX+b.absoluteLeft,this.workspace_.scrollY+b.absoluteTop))};\nBlockly.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var a=this.targetWorkspace.getMetrics();a&&(this.height_=a.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,a.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?a.toolboxWidth?this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?a.toolboxWidth:a.viewWidth-this.width_:this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?0:a.viewWidth:this.toolboxPosition_==\nBlockly.TOOLBOX_AT_LEFT?0:a.viewWidth+a.absoluteLeft-this.width_,0))}};\nBlockly.VerticalFlyout.prototype.setBackgroundPath_=function(a,b){var c=this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT,d=a+this.CORNER_RADIUS;d=[\"M \"+(c?d:0)+\",0\"];d.push(\"h\",c?-a:a);d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,c?0:1,c?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS);d.push(\"v\",Math.max(0,b));d.push(\"a\",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,c?0:1,c?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS);d.push(\"h\",c?a:-a);d.push(\"z\");this.svgBackground_.setAttribute(\"d\",\nd.join(\" \"))};Blockly.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(0)};Blockly.VerticalFlyout.prototype.wheel_=function(a){var b=Blockly.utils.getScrollDeltaPixels(a);if(b.y){var c=this.getMetrics_();b=c.viewTop-c.contentTop+b.y;b=Math.min(b,c.contentHeight-c.viewHeight);b=Math.max(b,0);this.scrollbar.set(b);Blockly.WidgetDiv.hide();Blockly.DropDownDiv.hideWithoutAnimation()}a.preventDefault();a.stopPropagation()};\nBlockly.VerticalFlyout.prototype.layout_=function(a,b){this.workspace_.scale=this.targetWorkspace.scale;for(var c=this.MARGIN,d=this.RTL?c:c+this.tabWidth_,e=0,f;f=a[e];e++)if(\"block\"==f.type){f=f.block;for(var g=f.getDescendants(!1),h=0,k;k=g[h];h++)k.isInFlyout=!0;f.render();g=f.getSvgRoot();h=f.getHeightWidth();k=f.outputConnection?d-this.tabWidth_:d;f.moveBy(k,c);k=this.createRect_(f,this.RTL?k-h.width:k,c,h,e);this.addBlockListeners_(g,f,k);c+=h.height+b[e]}else\"button\"==f.type&&(this.initFlyoutButton_(f.button,\nd,c),c+=f.button.height+b[e])};Blockly.VerticalFlyout.prototype.isDragTowardWorkspace=function(a){a=Math.atan2(a.y,a.x)/Math.PI*180;var b=this.dragAngleRange_;return a<b&&a>-b||a<-180+b||a>180-b?!0:!1};Blockly.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var a=this.svgGroup_.getBoundingClientRect(),b=a.left;return this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?new Blockly.utils.Rect(-1E9,1E9,-1E9,b+a.width):new Blockly.utils.Rect(-1E9,1E9,b,1E9)};\nBlockly.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var a=0,b=this.workspace_.getTopBlocks(!1),c=0,d;d=b[c];c++){var e=d.getHeightWidth().width;d.outputConnection&&(e-=this.tabWidth_);a=Math.max(a,e)}for(c=0;d=this.buttons_[c];c++)a=Math.max(a,d.width);a+=1.5*this.MARGIN+this.tabWidth_;a*=this.workspace_.scale;a+=Blockly.Scrollbar.scrollbarThickness;if(this.width_!=a){for(c=0;d=b[c];c++){if(this.RTL){e=d.getRelativeToSurfaceXY().x;var f=\na/this.workspace_.scale-this.MARGIN;d.outputConnection||(f-=this.tabWidth_);d.moveBy(f-e,0)}d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d)}if(this.RTL)for(c=0;d=this.buttons_[c];c++)b=d.getPosition().y,d.moveTo(a/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,b);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=Blockly.TOOLBOX_AT_LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+a,this.targetWorkspace.scrollY);\nthis.width_=a;this.position()}};Blockly.registry.register(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,Blockly.registry.DEFAULT,Blockly.VerticalFlyout);Blockly.FlyoutButton=function(a,b,c,d){this.workspace_=a;this.targetWorkspace_=b;this.text_=c.text;this.position_=new Blockly.utils.Coordinate(0,0);this.isLabel_=d;this.callbackKey_=c.callbackKey||c.callbackkey;this.cssClass_=c[\"web-class\"]||null;this.onMouseUpWrapper_=null;this.info=c};Blockly.FlyoutButton.MARGIN_X=5;Blockly.FlyoutButton.MARGIN_Y=2;Blockly.FlyoutButton.prototype.width=0;Blockly.FlyoutButton.prototype.height=0;\nBlockly.FlyoutButton.prototype.createDom=function(){var a=this.isLabel_?\"blocklyFlyoutLabel\":\"blocklyFlyoutButton\";this.cssClass_&&(a+=\" \"+this.cssClass_);this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":a},this.workspace_.getCanvas());if(!this.isLabel_)var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyFlyoutButtonShadow\",rx:4,ry:4,x:1,y:1},this.svgGroup_);a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":this.isLabel_?\n\"blocklyFlyoutLabelBackground\":\"blocklyFlyoutButtonBackground\",rx:4,ry:4},this.svgGroup_);var c=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{\"class\":this.isLabel_?\"blocklyFlyoutLabelText\":\"blocklyText\",x:0,y:0,\"text-anchor\":\"middle\"},this.svgGroup_),d=Blockly.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(d+=\"\\u200f\");c.textContent=d;this.isLabel_&&(this.svgText_=c,this.workspace_.getThemeManager().subscribe(this.svgText_,\"flyoutForegroundColour\",\"fill\"));var e=Blockly.utils.style.getComputedStyle(c,\n\"fontSize\"),f=Blockly.utils.style.getComputedStyle(c,\"fontWeight\"),g=Blockly.utils.style.getComputedStyle(c,\"fontFamily\");this.width=Blockly.utils.dom.getFastTextWidthWithSizeString(c,e,f,g);d=Blockly.utils.dom.measureFontMetrics(d,e,f,g);this.height=d.height;this.isLabel_||(this.width+=2*Blockly.FlyoutButton.MARGIN_X,this.height+=2*Blockly.FlyoutButton.MARGIN_Y,b.setAttribute(\"width\",this.width),b.setAttribute(\"height\",this.height));a.setAttribute(\"width\",this.width);a.setAttribute(\"height\",this.height);\nc.setAttribute(\"x\",this.width/2);c.setAttribute(\"y\",this.height/2-d.height/2+d.baseline);this.updateTransform_();this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(this.svgGroup_,\"mouseup\",this,this.onMouseUp_);return this.svgGroup_};Blockly.FlyoutButton.prototype.show=function(){this.updateTransform_();this.svgGroup_.setAttribute(\"display\",\"block\")};\nBlockly.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute(\"transform\",\"translate(\"+this.position_.x+\",\"+this.position_.y+\")\")};Blockly.FlyoutButton.prototype.moveTo=function(a,b){this.position_.x=a;this.position_.y=b;this.updateTransform_()};Blockly.FlyoutButton.prototype.isLabel=function(){return this.isLabel_};Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_};Blockly.FlyoutButton.prototype.getButtonText=function(){return this.text_};\nBlockly.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_};Blockly.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&Blockly.unbindEvent_(this.onMouseUpWrapper_);this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_);this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)};\nBlockly.FlyoutButton.prototype.onMouseUp_=function(a){(a=this.targetWorkspace_.getGesture(a))&&a.cancel();this.isLabel_&&this.callbackKey_?console.warn(\"Labels should not have callbacks. Label text: \"+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn(\"Buttons should have callbacks. Button text: \"+this.text_)};Blockly.Css.register(\".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}\".split(\",\"));Blockly.Generator=function(a){this.name_=a;this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,\"g\")};Blockly.Generator.NAME_TYPE=\"generated_function\";Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null;Blockly.Generator.prototype.STATEMENT_PREFIX=null;Blockly.Generator.prototype.STATEMENT_SUFFIX=null;Blockly.Generator.prototype.INDENT=\"  \";Blockly.Generator.prototype.COMMENT_WRAP=60;Blockly.Generator.prototype.ORDER_OVERRIDES=[];\nBlockly.Generator.prototype.workspaceToCode=function(a){a||(console.warn(\"No workspace specified in workspaceToCode call.  Guessing.\"),a=Blockly.getMainWorkspace());var b=[];this.init(a);a=a.getTopBlocks(!0);for(var c=0,d;d=a[c];c++){var e=this.blockToCode(d);Array.isArray(e)&&(e=e[0]);e&&(d.outputConnection&&(e=this.scrubNakedValue(e),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(e=this.injectId(this.STATEMENT_PREFIX,d)+e),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(e+=this.injectId(this.STATEMENT_SUFFIX,\nd))),b.push(e))}b=b.join(\"\\n\");b=this.finish(b);b=b.replace(/^\\s+\\n/,\"\");b=b.replace(/\\n\\s+$/,\"\\n\");return b=b.replace(/[ \\t]+\\n/g,\"\\n\")};Blockly.Generator.prototype.prefixLines=function(a,b){return b+a.replace(/(?!\\n$)\\n/g,\"\\n\"+b)};Blockly.Generator.prototype.allNestedComments=function(a){var b=[];a=a.getDescendants(!0);for(var c=0;c<a.length;c++){var d=a[c].getCommentText();d&&b.push(d)}b.length&&b.push(\"\");return b.join(\"\\n\")};\nBlockly.Generator.prototype.blockToCode=function(a,b){if(!a)return\"\";if(!a.isEnabled())return b?\"\":this.blockToCode(a.getNextBlock());if(a.isInsertionMarker())return b?\"\":this.blockToCode(a.getChildren(!1)[0]);var c=this[a.type];if(\"function\"!=typeof c)throw Error('Language \"'+this.name_+'\" does not know how to generate  code for block type \"'+a.type+'\".');c=c.call(a,a);if(Array.isArray(c)){if(!a.outputConnection)throw TypeError(\"Expecting string from statement block: \"+a.type);return[this.scrub_(a,\nc[0],b),c[1]]}if(\"string\"==typeof c)return this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,a)+c),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,a)),this.scrub_(a,c,b);if(null===c)return\"\";throw SyntaxError(\"Invalid code generated: \"+c);};\nBlockly.Generator.prototype.valueToCode=function(a,b,c){if(isNaN(c))throw TypeError(\"Expecting valid order from block: \"+a.type);var d=a.getInputTargetBlock(b);if(!d)return\"\";b=this.blockToCode(d);if(\"\"===b)return\"\";if(!Array.isArray(b))throw TypeError(\"Expecting tuple from value block: \"+d.type);a=b[0];b=b[1];if(isNaN(b))throw TypeError(\"Expecting valid order from value block: \"+d.type);if(!a)return\"\";d=!1;var e=Math.floor(c),f=Math.floor(b);if(e<=f&&(e!=f||0!=e&&99!=e))for(d=!0,e=0;e<this.ORDER_OVERRIDES.length;e++)if(this.ORDER_OVERRIDES[e][0]==\nc&&this.ORDER_OVERRIDES[e][1]==b){d=!1;break}d&&(a=\"(\"+a+\")\");return a};Blockly.Generator.prototype.statementToCode=function(a,b){a=a.getInputTargetBlock(b);b=this.blockToCode(a);if(\"string\"!=typeof b)throw TypeError(\"Expecting code from statement block: \"+(a&&a.type));b&&(b=this.prefixLines(b,this.INDENT));return b};\nBlockly.Generator.prototype.addLoopTrap=function(a,b){this.INFINITE_LOOP_TRAP&&(a=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,b),this.INDENT)+a);this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix&&(a=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,b),this.INDENT)+a);this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix&&(a+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,b),this.INDENT));return a};\nBlockly.Generator.prototype.injectId=function(a,b){b=b.id.replace(/\\$/g,\"$$$$\");return a.replace(/%1/g,\"'\"+b+\"'\")};Blockly.Generator.prototype.RESERVED_WORDS_=\"\";Blockly.Generator.prototype.addReservedWords=function(a){this.RESERVED_WORDS_+=a+\",\"};Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_=\"{leCUI8hutHZI4480Dc}\";\nBlockly.Generator.prototype.provideFunction_=function(a,b){if(!this.definitions_[a]){var c=this.variableDB_.getDistinctName(a,Blockly.PROCEDURE_CATEGORY_NAME);this.functionNames_[a]=c;b=b.join(\"\\n\").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,c);for(var d;d!=b;)d=b,b=b.replace(/^(( {2})*) {2}/gm,\"$1\\x00\");b=b.replace(/\\0/g,this.INDENT);this.definitions_[a]=b}return this.functionNames_[a]};Blockly.Generator.prototype.init=function(a){};Blockly.Generator.prototype.scrub_=function(a,b,c){return b};\nBlockly.Generator.prototype.finish=function(a){return a};Blockly.Generator.prototype.scrubNakedValue=function(a){return a};Blockly.ToolboxItem=function(a,b,c){this.id_=a.toolboxitemid||Blockly.utils.IdGenerator.getNextUniqueId();this.level_=(this.parent_=c||null)?this.parent_.getLevel()+1:0;this.toolboxItemDef_=a;this.parentToolbox_=b;this.workspace_=this.parentToolbox_.getWorkspace()};Blockly.ToolboxItem.prototype.init=function(){};Blockly.ToolboxItem.prototype.getDiv=function(){return null};Blockly.ToolboxItem.prototype.getId=function(){return this.id_};Blockly.ToolboxItem.prototype.getParent=function(){return null};\nBlockly.ToolboxItem.prototype.getLevel=function(){return this.level_};Blockly.ToolboxItem.prototype.isSelectable=function(){return!1};Blockly.ToolboxItem.prototype.isCollapsible=function(){return!1};Blockly.ToolboxItem.prototype.dispose=function(){};Blockly.ToolboxCategory=function(a,b,c){Blockly.ToolboxCategory.superClass_.constructor.call(this,a,b,c);this.name_=Blockly.utils.replaceMessageReferences(a.name);this.colour_=this.getColour_(a);this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null;this.cssConfig_=this.makeDefaultCssConfig_();Blockly.utils.object.mixin(this.cssConfig_,a.cssconfig||a.cssConfig);this.isDisabled_=this.isHidden_=!1;this.flyoutItems_=[];this.parseContents_(a)};\nBlockly.utils.object.inherits(Blockly.ToolboxCategory,Blockly.ToolboxItem);Blockly.ToolboxCategory.registrationName=\"category\";Blockly.ToolboxCategory.nestedPadding=19;Blockly.ToolboxCategory.borderWidth=8;Blockly.ToolboxCategory.defaultBackgroundColour=\"#57e\";\nBlockly.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:\"blocklyToolboxCategory\",row:\"blocklyTreeRow\",rowcontentcontainer:\"blocklyTreeRowContentContainer\",icon:\"blocklyTreeIcon\",label:\"blocklyTreeLabel\",contents:\"blocklyToolboxContents\",selected:\"blocklyTreeSelected\",openicon:\"blocklyTreeIconOpen\",closedicon:\"blocklyTreeIconClosed\"}};\nBlockly.ToolboxCategory.prototype.parseContents_=function(a){var b=a.contents;if(a.custom)this.flyoutItems_=a.custom;else if(b){a=0;for(var c;c=b[a];a++)this.flyoutItems_.push(c)}};Blockly.ToolboxCategory.prototype.init=function(){this.createDom_();\"true\"==this.toolboxItemDef_.hidden&&this.hide()};\nBlockly.ToolboxCategory.prototype.createDom_=function(){this.htmlDiv_=this.createContainer_();Blockly.utils.aria.setRole(this.htmlDiv_,Blockly.utils.aria.Role.TREEITEM);Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.SELECTED,!1);Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.LEVEL,this.level_);this.rowDiv_=this.createRowContainer_();this.rowDiv_.setAttribute(\"id\",this.id_);this.rowDiv_.style.pointerEvents=\"auto\";this.htmlDiv_.appendChild(this.rowDiv_);this.rowContents_=\nthis.createRowContentsContainer_();this.rowContents_.style.pointerEvents=\"none\";this.rowDiv_.appendChild(this.rowContents_);this.iconDom_=this.createIconDom_();Blockly.utils.aria.setRole(this.iconDom_,Blockly.utils.aria.Role.PRESENTATION);this.rowContents_.appendChild(this.iconDom_);var a=this.createLabelDom_(this.name_);this.rowContents_.appendChild(a);Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.LABELLEDBY,a.getAttribute(\"id\"));this.addColourBorder_(this.colour_);return this.htmlDiv_};\nBlockly.ToolboxCategory.prototype.createContainer_=function(){var a=document.createElement(\"div\");Blockly.utils.dom.addClass(a,this.cssConfig_.container);return a};Blockly.ToolboxCategory.prototype.createRowContainer_=function(){var a=document.createElement(\"div\");Blockly.utils.dom.addClass(a,this.cssConfig_.row);var b=Blockly.ToolboxCategory.nestedPadding*this.getLevel();b=b.toString()+\"px\";this.workspace_.RTL?a.style.paddingRight=b:a.style.paddingLeft=b;return a};\nBlockly.ToolboxCategory.prototype.createRowContentsContainer_=function(){var a=document.createElement(\"div\");Blockly.utils.dom.addClass(a,this.cssConfig_.rowcontentcontainer);return a};Blockly.ToolboxCategory.prototype.createIconDom_=function(){var a=document.createElement(\"span\");this.parentToolbox_.isHorizontal()||Blockly.utils.dom.addClass(a,this.cssConfig_.icon);a.style.display=\"inline-block\";return a};\nBlockly.ToolboxCategory.prototype.createLabelDom_=function(a){var b=document.createElement(\"span\");b.setAttribute(\"id\",this.getId()+\".label\");b.textContent=a;Blockly.utils.dom.addClass(b,this.cssConfig_.label);return b};Blockly.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_);this.addColourBorder_(this.colour_)};\nBlockly.ToolboxCategory.prototype.addColourBorder_=function(a){a&&(a=Blockly.ToolboxCategory.borderWidth+\"px solid \"+(a||\"#ddd\"),this.workspace_.RTL?this.rowDiv_.style.borderRight=a:this.rowDiv_.style.borderLeft=a)};Blockly.ToolboxCategory.prototype.getColour_=function(a){var b=a.categorystyle||a.categoryStyle;if((a=a.colour)&&b)console.warn('Toolbox category \"'+this.name_+'\" must not have both a style and a colour');else return b?this.getColourfromStyle_(b):this.parseColour_(a);return\"\"};\nBlockly.ToolboxCategory.prototype.getColourfromStyle_=function(a){var b=this.workspace_.getTheme();if(a&&b){if((b=b.categoryStyles[a])&&b.colour)return this.parseColour_(b.colour);console.warn('Style \"'+a+'\" must exist and contain a colour value')}return\"\"};\nBlockly.ToolboxCategory.prototype.parseColour_=function(a){a=Blockly.utils.replaceMessageReferences(a);if(null==a||\"\"===a)return\"\";var b=Number(a);if(isNaN(b)){if(b=Blockly.utils.colour.parse(a))return b;console.warn('Toolbox category \"'+this.name_+'\" has unrecognized colour attribute: '+a);return\"\"}return Blockly.hueToHex(b)};Blockly.ToolboxCategory.prototype.openIcon_=function(a){a&&(Blockly.utils.dom.removeClasses(a,this.cssConfig_.closedicon),Blockly.utils.dom.addClass(a,this.cssConfig_.openicon))};\nBlockly.ToolboxCategory.prototype.closeIcon_=function(a){a&&(Blockly.utils.dom.removeClasses(a,this.cssConfig_.openicon),Blockly.utils.dom.addClass(a,this.cssConfig_.closedicon))};Blockly.ToolboxCategory.prototype.setVisible_=function(a){this.htmlDiv_.style.display=a?\"block\":\"none\";this.isHidden_=!a;this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()};Blockly.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)};Blockly.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)};\nBlockly.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()};Blockly.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var a=this;a.getParent();)if(a=a.getParent(),!a.isExpanded())return!1;return!0};Blockly.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_};Blockly.ToolboxCategory.prototype.onClick=function(a){};\nBlockly.ToolboxCategory.prototype.setSelected=function(a){if(a){var b=this.parseColour_(Blockly.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||b;Blockly.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor=\"\",Blockly.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.SELECTED,a)};\nBlockly.ToolboxCategory.prototype.setDisabled=function(a){this.isDisabled_=a;this.getDiv().setAttribute(\"disabled\",a);a?this.getDiv().setAttribute(\"disabled\",\"true\"):this.getDiv().removeAttribute(\"disabled\")};Blockly.ToolboxCategory.prototype.getName=function(){return this.name_};Blockly.ToolboxCategory.prototype.getParent=function(){return this.parent_};Blockly.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_};Blockly.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_};\nBlockly.ToolboxCategory.prototype.updateFlyoutContents=function(a){this.flyoutItems_=[];\"string\"==typeof a?this.toolboxItemDef_.custom=a:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(a));this.parseContents_(this.toolboxItemDef_)};Blockly.ToolboxCategory.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.htmlDiv_)};\nBlockly.Css.register([\".blocklyTreeRow:not(.blocklyTreeSelected):hover {\",\"background-color: rgba(255, 255, 255, 0.2);\",\"}\",'.blocklyToolboxDiv[layout=\"h\"] .blocklyToolboxCategory {',\"margin: 1px 5px 1px 0;\",\"}\",'.blocklyToolboxDiv[dir=\"RTL\"][layout=\"h\"] .blocklyToolboxCategory {',\"margin: 1px 0 1px 5px;\",\"}\",\".blocklyTreeRow {\",\"height: 22px;\",\"line-height: 22px;\",\"margin-bottom: 3px;\",\"padding-right: 8px;\",\"white-space: nowrap;\",\"}\",'.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeRow {',\"margin-left: 8px;\",\n\"padding-right: 0px\",\"}\",\".blocklyTreeIcon {\",\"background-image: url(<<<PATH>>>/sprites.png);\",\"height: 16px;\",\"vertical-align: middle;\",\"visibility: hidden;\",\"width: 16px;\",\"}\",\".blocklyTreeIconClosed {\",\"background-position: -32px -1px;\",\"}\",'.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeIconClosed {',\"background-position: 0 -1px;\",\"}\",\".blocklyTreeSelected>.blocklyTreeIconClosed {\",\"background-position: -32px -17px;\",\"}\",'.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeSelected>.blocklyTreeIconClosed {',\n\"background-position: 0 -17px;\",\"}\",\".blocklyTreeIconOpen {\",\"background-position: -16px -1px;\",\"}\",\".blocklyTreeSelected>.blocklyTreeIconOpen {\",\"background-position: -16px -17px;\",\"}\",\".blocklyTreeLabel {\",\"cursor: default;\",\"font: 16px sans-serif;\",\"padding: 0 3px;\",\"vertical-align: middle;\",\"}\",\".blocklyToolboxDelete .blocklyTreeLabel {\",'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\"}\",\".blocklyTreeSelected .blocklyTreeLabel {\",\"color: #fff;\",\"}\"]);\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.ToolboxCategory.registrationName,Blockly.ToolboxCategory);Blockly.ToolboxSeparator=function(a,b){Blockly.ToolboxSeparator.superClass_.constructor.call(this,a,b);this.cssConfig_={container:\"blocklyTreeSeparator\"};Blockly.utils.object.mixin(this.cssConfig_,a.cssconfig||a.cssConfig)};Blockly.utils.object.inherits(Blockly.ToolboxSeparator,Blockly.ToolboxItem);Blockly.ToolboxSeparator.registrationName=\"sep\";Blockly.ToolboxSeparator.prototype.init=function(){this.createDom_()};\nBlockly.ToolboxSeparator.prototype.createDom_=function(){var a=document.createElement(\"div\");Blockly.utils.dom.addClass(a,this.cssConfig_.container);return this.htmlDiv_=a};Blockly.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_};Blockly.ToolboxSeparator.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.htmlDiv_)};Blockly.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout=\"h\"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(\",\"));\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.ToolboxSeparator.registrationName,Blockly.ToolboxSeparator);Blockly.CollapsibleToolboxCategory=function(a,b,c){this.subcategoriesDiv_=null;this.expanded_=!1;this.toolboxItems_=[];Blockly.CollapsibleToolboxCategory.superClass_.constructor.call(this,a,b,c)};Blockly.utils.object.inherits(Blockly.CollapsibleToolboxCategory,Blockly.ToolboxCategory);Blockly.CollapsibleToolboxCategory.registrationName=\"collapsibleCategory\";\nBlockly.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var a=Blockly.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);a.contents=\"blocklyToolboxContents\";return a};\nBlockly.CollapsibleToolboxCategory.prototype.parseContents_=function(a){var b=a.contents,c=!0;if(a.custom)this.flyoutItems_=a.custom;else if(b){a=0;for(var d;d=b[a];a++)!Blockly.registry.hasItem(Blockly.registry.Type.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()==Blockly.ToolboxSeparator.registrationName&&c?(this.flyoutItems_.push(d),c=!0):(this.createToolboxItem_(d),c=!1)}};\nBlockly.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(a){var b=a.kind;\"CATEGORY\"==b.toUpperCase()&&Blockly.utils.toolbox.isCategoryCollapsible(a)&&(b=Blockly.CollapsibleToolboxCategory.registrationName);a=new (Blockly.registry.getClass(Blockly.registry.Type.TOOLBOX_ITEM,b))(a,this.parentToolbox_,this);this.toolboxItems_.push(a)};\nBlockly.CollapsibleToolboxCategory.prototype.init=function(){Blockly.CollapsibleToolboxCategory.superClass_.init.call(this);this.setExpanded(\"true\"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)};\nBlockly.CollapsibleToolboxCategory.prototype.createDom_=function(){Blockly.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var a=this.getChildToolboxItems();this.subcategoriesDiv_=this.createSubCategoriesDom_(a);Blockly.utils.aria.setRole(this.subcategoriesDiv_,Blockly.utils.aria.Role.GROUP);this.htmlDiv_.appendChild(this.subcategoriesDiv_);return this.htmlDiv_};\nBlockly.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var a=document.createElement(\"span\");this.parentToolbox_.isHorizontal()||(Blockly.utils.dom.addClass(a,this.cssConfig_.icon),a.style.visibility=\"visible\");a.style.display=\"inline-block\";return a};Blockly.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(a){var b=document.createElement(\"div\");Blockly.utils.dom.addClass(b,this.cssConfig_.contents);for(var c=0;c<a.length;c++){var d=a[c];d.init();d=d.getDiv();b.appendChild(d)}return b};\nBlockly.CollapsibleToolboxCategory.prototype.setExpanded=function(a){this.expanded_!=a&&((this.expanded_=a)?(this.subcategoriesDiv_.style.display=\"block\",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display=\"none\",this.closeIcon_(this.iconDom_)),Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.EXPANDED,a),this.parentToolbox_.handleToolboxItemResize())};\nBlockly.CollapsibleToolboxCategory.prototype.setVisible_=function(a){this.htmlDiv_.style.display=a?\"block\":\"none\";for(var b=0,c;c=this.getChildToolboxItems()[b];b++)c.setVisible_(a);this.isHidden_=!a;this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()};Blockly.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_};Blockly.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0};\nBlockly.CollapsibleToolboxCategory.prototype.onClick=function(a){this.toggleExpanded()};Blockly.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)};Blockly.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_};Blockly.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_};Blockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.CollapsibleToolboxCategory.registrationName,Blockly.CollapsibleToolboxCategory);Blockly.Toolbox=function(a){this.workspace_=a;this.toolboxDef_=a.options.languageTree||{contents:[]};this.horizontalLayout_=a.options.horizontalLayout;this.contentsDiv_=this.HtmlDiv=null;this.contents_=[];this.height_=this.width_=0;this.RTL=a.options.RTL;this.flyout_=null;this.contentMap_={};this.toolboxPosition=a.options.toolboxPosition;this.previouslySelectedItem_=this.selectedItem_=null;this.boundEvents_=[]};\nBlockly.Toolbox.prototype.init=function(){var a=this.workspace_,b=a.getParentSvg();this.flyout_=this.createFlyout_();this.HtmlDiv=this.createDom_(this.workspace_);Blockly.utils.dom.insertAfter(this.flyout_.createDom(\"svg\"),b);this.flyout_.init(a);this.render(this.toolboxDef_);a=a.getThemeManager();a.subscribe(this.HtmlDiv,\"toolboxBackgroundColour\",\"background-color\");a.subscribe(this.HtmlDiv,\"toolboxForegroundColour\",\"color\")};\nBlockly.Toolbox.prototype.createDom_=function(a){a=a.getParentSvg();var b=this.createContainer_();this.contentsDiv_=this.createContentsContainer_();this.contentsDiv_.tabIndex=0;Blockly.utils.aria.setRole(this.contentsDiv_,Blockly.utils.aria.Role.TREE);b.appendChild(this.contentsDiv_);a.parentNode.insertBefore(b,a);this.attachEvents_(b,this.contentsDiv_);return b};\nBlockly.Toolbox.prototype.createContainer_=function(){var a=document.createElement(\"div\");a.setAttribute(\"layout\",this.isHorizontal()?\"h\":\"v\");Blockly.utils.dom.addClass(a,\"blocklyToolboxDiv\");Blockly.utils.dom.addClass(a,\"blocklyNonSelectable\");a.setAttribute(\"dir\",this.RTL?\"RTL\":\"LTR\");return a};\nBlockly.Toolbox.prototype.createContentsContainer_=function(){var a=document.createElement(\"div\");Blockly.utils.dom.addClass(a,\"blocklyToolboxContents\");this.isHorizontal()&&(a.style.flexDirection=\"row\");return a};Blockly.Toolbox.prototype.attachEvents_=function(a,b){a=Blockly.bindEventWithChecks_(a,\"mousedown\",this,this.onClick_,!1,!0);this.boundEvents_.push(a);b=Blockly.bindEventWithChecks_(b,\"keydown\",this,this.onKeyDown_,!1,!0);this.boundEvents_.push(b)};\nBlockly.Toolbox.prototype.onClick_=function(a){if(Blockly.utils.isRightButton(a)||a.target==this.HtmlDiv)Blockly.hideChaff(!1);else{var b=a.srcElement.getAttribute(\"id\");b&&(b=this.getToolboxItemById(b),b.isSelectable()&&(this.setSelectedItem(b),b.onClick(a)));Blockly.hideChaff(!0)}Blockly.Touch.clearTouchIdentifier()};\nBlockly.Toolbox.prototype.onKeyDown_=function(a){var b=!1;switch(a.keyCode){case Blockly.utils.KeyCodes.DOWN:b=this.selectNext_();break;case Blockly.utils.KeyCodes.UP:b=this.selectPrevious_();break;case Blockly.utils.KeyCodes.LEFT:b=this.selectParent_();break;case Blockly.utils.KeyCodes.RIGHT:b=this.selectChild_();break;case Blockly.utils.KeyCodes.ENTER:case Blockly.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),b=!0);break;default:b=\n!1}b&&a.preventDefault()};\nBlockly.Toolbox.prototype.createFlyout_=function(){var a=this.workspace_,b=new Blockly.Options({parentWorkspace:a,rtl:a.RTL,oneBasedIndex:a.options.oneBasedIndex,horizontalLayout:a.horizontalLayout,renderer:a.options.renderer,rendererOverrides:a.options.rendererOverrides});b.toolboxPosition=a.options.toolboxPosition;a=a.horizontalLayout?Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,a.options):Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,a.options);\nif(!a)throw Error(\"Blockly.VerticalFlyout, Blockly.HorizontalFlyout or your own custom flyout must be required.\");return new a(b)};Blockly.Toolbox.prototype.render=function(a){this.toolboxDef_=a;for(var b=0;b<this.contents_.length;b++){var c=this.contents_[b];c&&c.dispose()}this.contents_=[];this.contentMap_={};this.renderContents_(a.contents);this.position()};\nBlockly.Toolbox.prototype.renderContents_=function(a){for(var b=document.createDocumentFragment(),c=0,d;d=a[c];c++)this.createToolboxItem_(d,b);this.contentsDiv_.appendChild(b)};\nBlockly.Toolbox.prototype.createToolboxItem_=function(a,b){var c=a.kind;\"CATEGORY\"==c.toUpperCase()&&Blockly.utils.toolbox.isCategoryCollapsible(a)&&(c=Blockly.CollapsibleToolboxCategory.registrationName);if(c=Blockly.registry.getClass(Blockly.registry.Type.TOOLBOX_ITEM,c.toLowerCase()))a=new c(a,this),this.addToolboxItem_(a),a.init(),(a=a.getDiv())&&b.appendChild(a)};\nBlockly.Toolbox.prototype.addToolboxItem_=function(a){this.contents_.push(a);this.contentMap_[a.getId()]=a;if(a.isCollapsible())for(var b=0,c;c=a.getChildToolboxItems()[b];b++)this.addToolboxItem_(c)};Blockly.Toolbox.prototype.getToolboxItems=function(){return this.contents_};Blockly.Toolbox.prototype.addStyle=function(a){Blockly.utils.dom.addClass(this.HtmlDiv,a)};Blockly.Toolbox.prototype.removeStyle=function(a){Blockly.utils.dom.removeClass(this.HtmlDiv,a)};\nBlockly.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var a=this.HtmlDiv.getBoundingClientRect(),b=a.top,c=b+a.height,d=a.left;a=d+a.width;return this.toolboxPosition==Blockly.utils.toolbox.Position.TOP?new Blockly.utils.Rect(-1E7,c,-1E7,1E7):this.toolboxPosition==Blockly.utils.toolbox.Position.BOTTOM?new Blockly.utils.Rect(b,1E7,-1E7,1E7):this.toolboxPosition==Blockly.utils.toolbox.Position.LEFT?new Blockly.utils.Rect(-1E7,1E7,-1E7,a):new Blockly.utils.Rect(-1E7,1E7,d,1E7)};\nBlockly.Toolbox.prototype.getToolboxItemById=function(a){return this.contentMap_[a]};Blockly.Toolbox.prototype.getWidth=function(){return this.width_};Blockly.Toolbox.prototype.getHeight=function(){return this.height_};Blockly.Toolbox.prototype.getFlyout=function(){return this.flyout_};Blockly.Toolbox.prototype.getWorkspace=function(){return this.workspace_};Blockly.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_};Blockly.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_};\nBlockly.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_};Blockly.Toolbox.prototype.position=function(){var a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left=\"0\",a.style.height=\"auto\",a.style.width=\"100%\",this.height_=a.offsetHeight,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?a.style.top=\"0\":a.style.bottom=\"0\"):(this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?a.style.right=\"0\":a.style.left=\"0\",a.style.height=\"100%\",this.width_=a.offsetWidth),this.flyout_.position())};\nBlockly.Toolbox.prototype.handleToolboxItemResize=function(){var a=this.workspace_,b=this.HtmlDiv.getBoundingClientRect();a.translate(this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?a.scrollX+b.width:a.scrollX,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?a.scrollY+b.height:a.scrollY);Blockly.svgResize(a)};Blockly.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)};\nBlockly.Toolbox.prototype.refreshTheme=function(){for(var a=0;a<this.contents_.length;a++){var b=this.contents_[a];b.refreshTheme&&b.refreshTheme()}};Blockly.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())};Blockly.Toolbox.prototype.setVisible=function(a){this.HtmlDiv.style.display=a?\"block\":\"none\"};\nBlockly.Toolbox.prototype.setSelectedItem=function(a){var b=this.selectedItem_;!a&&!b||a&&!a.isSelectable()||(this.shouldDeselectItem_(b,a)&&null!=b&&this.deselectItem_(b),this.shouldSelectItem_(b,a)&&null!=a&&this.selectItem_(b,a),this.updateFlyout_(b,a),this.fireSelectEvent_(b,a))};Blockly.Toolbox.prototype.shouldDeselectItem_=function(a,b){return null!=a&&(!a.isCollapsible()||a!=b)};Blockly.Toolbox.prototype.shouldSelectItem_=function(a,b){return null!=b&&b!=a};\nBlockly.Toolbox.prototype.deselectItem_=function(a){this.selectedItem_=null;this.previouslySelectedItem_=a;a.setSelected(!1);Blockly.utils.aria.setState(this.contentsDiv_,Blockly.utils.aria.State.ACTIVEDESCENDANT,\"\")};Blockly.Toolbox.prototype.selectItem_=function(a,b){this.selectedItem_=b;this.previouslySelectedItem_=a;b.setSelected(!0);Blockly.utils.aria.setState(this.contentsDiv_,Blockly.utils.aria.State.ACTIVEDESCENDANT,b.getId())};\nBlockly.Toolbox.prototype.selectItemByPosition=function(a){-1<a&&a<this.contents_.length&&(a=this.contents_[a],a.isSelectable()&&this.setSelectedItem(a))};Blockly.Toolbox.prototype.updateFlyout_=function(a,b){(a!=b||b.isCollapsible())&&b&&b.getContents().length?(this.flyout_.show(b.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()};\nBlockly.Toolbox.prototype.fireSelectEvent_=function(a,b){var c=a&&a.getName(),d=b&&b.getName();a==b&&(d=null);a=new Blockly.Events.Ui(null,\"category\",c,d);a.workspaceId=this.workspace_.id;Blockly.Events.fire(a)};\nBlockly.Toolbox.prototype.onBlocklyAction=function(a){if(!this.selectedItem_)return!1;switch(a.name){case Blockly.navigation.actionNames.PREVIOUS:return this.selectPrevious_();case Blockly.navigation.actionNames.OUT:return this.selectParent_();case Blockly.navigation.actionNames.NEXT:return this.selectNext_();case Blockly.navigation.actionNames.IN:return this.selectChild_();default:return!1}};\nBlockly.Toolbox.prototype.selectParent_=function(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1};\nBlockly.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var a=this.selectedItem_;a.isExpanded()?this.selectNext_():a.setExpanded(!0);return!0};Blockly.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var a=this.contents_.indexOf(this.selectedItem_)+1;if(-1<a&&a<this.contents_.length){for(var b=this.contents_[a];b&&!b.isSelectable();)b=this.contents_[++a];if(b&&b.isSelectable())return this.setSelectedItem(b),!0}return!1};\nBlockly.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var a=this.contents_.indexOf(this.selectedItem_)-1;if(-1<a&&a<this.contents_.length){for(var b=this.contents_[a];b&&!b.isSelectable();)b=this.contents_[--a];if(b&&b.isSelectable())return this.setSelectedItem(b),!0}return!1};\nBlockly.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var a=0;a<this.contents_.length;a++)this.contents_[a].dispose();for(a=0;a<this.boundEvents_.length;a++)Blockly.unbindEvent_(this.boundEvents_[a]);this.boundEvents_=[];this.contents_=[];this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv);Blockly.utils.dom.removeNode(this.HtmlDiv)};\nBlockly.Css.register([\".blocklyToolboxDelete {\",'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\"}\",\".blocklyToolboxGrab {\",'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\"cursor: grabbing;\",\"cursor: -webkit-grabbing;\",\"}\",\".blocklyToolboxDiv {\",\"background-color: #ddd;\",\"overflow-x: visible;\",\"overflow-y: auto;\",\"padding: 4px 0 4px 0;\",\"position: absolute;\",\"z-index: 70;\",\"-webkit-tap-highlight-color: transparent;\",\"}\",\".blocklyToolboxContents {\",\"display: flex;\",\"flex-wrap: wrap;\",\"flex-direction: column;\",\n\"}\",\".blocklyToolboxContents:focus {\",\"outline: none;\",\"}\"]);Blockly.registry.register(Blockly.registry.Type.TOOLBOX,Blockly.registry.DEFAULT,Blockly.Toolbox);Blockly.Trashcan=function(a){this.workspace_=a;this.contents_=[];this.flyout=null;if(!(0>=this.workspace_.options.maxTrashcanContents)){a=new Blockly.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides});if(this.workspace_.horizontalLayout){a.toolboxPosition=this.workspace_.toolboxPosition==Blockly.utils.toolbox.Position.TOP?\nBlockly.utils.toolbox.Position.BOTTOM:Blockly.utils.toolbox.Position.TOP;if(!Blockly.HorizontalFlyout)throw Error(\"Missing require for Blockly.HorizontalFlyout\");this.flyout=new Blockly.HorizontalFlyout(a)}else{a.toolboxPosition=this.workspace_.toolboxPosition==Blockly.utils.toolbox.Position.RIGHT?Blockly.utils.toolbox.Position.LEFT:Blockly.utils.toolbox.Position.RIGHT;if(!Blockly.VerticalFlyout)throw Error(\"Missing require for Blockly.VerticalFlyout\");this.flyout=new Blockly.VerticalFlyout(a)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}};\nBlockly.Trashcan.prototype.WIDTH_=47;Blockly.Trashcan.prototype.BODY_HEIGHT_=44;Blockly.Trashcan.prototype.LID_HEIGHT_=16;Blockly.Trashcan.prototype.MARGIN_BOTTOM_=20;Blockly.Trashcan.prototype.MARGIN_SIDE_=20;Blockly.Trashcan.prototype.MARGIN_HOTSPOT_=10;Blockly.Trashcan.prototype.SPRITE_LEFT_=0;Blockly.Trashcan.prototype.SPRITE_TOP_=32;Blockly.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1;Blockly.Trashcan.ANIMATION_LENGTH_=80;Blockly.Trashcan.ANIMATION_FRAMES_=4;Blockly.Trashcan.OPACITY_MIN_=.4;\nBlockly.Trashcan.OPACITY_MAX_=.8;Blockly.Trashcan.MAX_LID_ANGLE_=45;Blockly.Trashcan.prototype.isLidOpen=!1;Blockly.Trashcan.prototype.minOpenness_=0;Blockly.Trashcan.prototype.svgGroup_=null;Blockly.Trashcan.prototype.svgLid_=null;Blockly.Trashcan.prototype.lidTask_=0;Blockly.Trashcan.prototype.lidOpen_=0;Blockly.Trashcan.prototype.left_=0;Blockly.Trashcan.prototype.top_=0;\nBlockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyTrash\"},null);var a=String(Math.random()).substring(2);var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:\"blocklyTrashBodyClipPath\"+a},this.svgGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},b);var c=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,\nx:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,\"clip-path\":\"url(#blocklyTrashBodyClipPath\"+a+\")\"},this.svgGroup_);c.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.workspace_.options.pathToMedia+Blockly.SPRITE.url);b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:\"blocklyTrashLidClipPath\"+a},this.svgGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},b);this.svgLid_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,\n{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,\"clip-path\":\"url(#blocklyTrashLidClipPath\"+a+\")\"},this.svgGroup_);this.svgLid_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.workspace_.options.pathToMedia+Blockly.SPRITE.url);Blockly.bindEventWithChecks_(this.svgGroup_,\"mouseup\",this,this.click);Blockly.bindEvent_(c,\"mouseover\",this,this.mouseOver_);Blockly.bindEvent_(c,\"mouseout\",this,this.mouseOut_);this.animateLid_();return this.svgGroup_};\nBlockly.Trashcan.prototype.init=function(a){0<this.workspace_.options.maxTrashcanContents&&(Blockly.utils.dom.insertAfter(this.flyout.createDom(Blockly.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_));this.verticalSpacing_=this.MARGIN_BOTTOM_+a;this.setLidOpen(!1);return this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_};\nBlockly.Trashcan.prototype.dispose=function(){this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.workspace_=this.svgLid_=null;clearTimeout(this.lidTask_)};Blockly.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length};Blockly.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()};\nBlockly.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var a=[],b=0,c;c=this.contents_[b];b++)a[b]=Blockly.Xml.textToDom(c);this.flyout.show(a);this.fireUiEvent_(!0)}};Blockly.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))};Blockly.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())};\nBlockly.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var a=this.workspace_.getMetrics();a&&(this.left_=a.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?a.viewWidth+a.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,this.top_=a.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:a.viewHeight+a.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-\nthis.verticalSpacing_,this.svgGroup_.setAttribute(\"transform\",\"translate(\"+this.left_+\",\"+this.top_+\")\"))}};Blockly.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var a=this.svgGroup_.getBoundingClientRect(),b=a.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;a=a.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_;return new Blockly.utils.Rect(b,b+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,a,a+this.WIDTH_+2*this.MARGIN_HOTSPOT_)};\nBlockly.Trashcan.prototype.setLidOpen=function(a){this.isLidOpen!=a&&(clearTimeout(this.lidTask_),this.isLidOpen=a,this.animateLid_())};\nBlockly.Trashcan.prototype.animateLid_=function(){var a=Blockly.Trashcan.ANIMATION_FRAMES_,b=1/(a+1);this.lidOpen_+=this.isLidOpen?b:-b;this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1);this.setLidAngle_(this.lidOpen_*Blockly.Trashcan.MAX_LID_ANGLE_);b=Blockly.Trashcan.OPACITY_MIN_;this.svgGroup_.style.opacity=b+this.lidOpen_*(Blockly.Trashcan.OPACITY_MAX_-b);this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Blockly.Trashcan.ANIMATION_LENGTH_/\na))};Blockly.Trashcan.prototype.setLidAngle_=function(a){var b=this.workspace_.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute(\"transform\",\"rotate(\"+(b?-a:a)+\",\"+(b?4:this.WIDTH_-4)+\",\"+(this.LID_HEIGHT_-2)+\")\")};Blockly.Trashcan.prototype.setMinOpenness_=function(a){this.minOpenness_=a;this.isLidOpen||this.setLidAngle_(a*Blockly.Trashcan.MAX_LID_ANGLE_)};Blockly.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)};\nBlockly.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()};Blockly.Trashcan.prototype.fireUiEvent_=function(a){a=new Blockly.Events.Ui(null,\"trashcanOpen\",null,a);a.workspaceId=this.workspace_.id;Blockly.Events.fire(a)};Blockly.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)};Blockly.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)};\nBlockly.Trashcan.prototype.onDelete_=function(a){if(!(0>=this.workspace_.options.maxTrashcanContents)&&a.type==Blockly.Events.BLOCK_DELETE&&a.oldXml.tagName&&\"shadow\"!=a.oldXml.tagName.toLowerCase()&&(a=this.cleanBlockXML_(a.oldXml),-1==this.contents_.indexOf(a))){for(this.contents_.unshift(a);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}};\nBlockly.Trashcan.prototype.cleanBlockXML_=function(a){for(var b=a=a.cloneNode(!0);b;){b.removeAttribute&&(b.removeAttribute(\"x\"),b.removeAttribute(\"y\"),b.removeAttribute(\"id\"),b.removeAttribute(\"disabled\"),\"comment\"==b.nodeName&&(b.removeAttribute(\"h\"),b.removeAttribute(\"w\"),b.removeAttribute(\"pinned\")));var c=b.firstChild||b.nextSibling;if(!c)for(c=b.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}b=c}return Blockly.Xml.domToText(a)};Blockly.VariablesDynamic={};Blockly.VariablesDynamic.onCreateVariableButtonClick_String=function(a){Blockly.Variables.createVariableButtonHandler(a.getTargetWorkspace(),void 0,\"String\")};Blockly.VariablesDynamic.onCreateVariableButtonClick_Number=function(a){Blockly.Variables.createVariableButtonHandler(a.getTargetWorkspace(),void 0,\"Number\")};Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour=function(a){Blockly.Variables.createVariableButtonHandler(a.getTargetWorkspace(),void 0,\"Colour\")};\nBlockly.VariablesDynamic.flyoutCategory=function(a){var b=[],c=document.createElement(\"button\");c.setAttribute(\"text\",Blockly.Msg.NEW_STRING_VARIABLE);c.setAttribute(\"callbackKey\",\"CREATE_VARIABLE_STRING\");b.push(c);c=document.createElement(\"button\");c.setAttribute(\"text\",Blockly.Msg.NEW_NUMBER_VARIABLE);c.setAttribute(\"callbackKey\",\"CREATE_VARIABLE_NUMBER\");b.push(c);c=document.createElement(\"button\");c.setAttribute(\"text\",Blockly.Msg.NEW_COLOUR_VARIABLE);c.setAttribute(\"callbackKey\",\"CREATE_VARIABLE_COLOUR\");\nb.push(c);a.registerButtonCallback(\"CREATE_VARIABLE_STRING\",Blockly.VariablesDynamic.onCreateVariableButtonClick_String);a.registerButtonCallback(\"CREATE_VARIABLE_NUMBER\",Blockly.VariablesDynamic.onCreateVariableButtonClick_Number);a.registerButtonCallback(\"CREATE_VARIABLE_COLOUR\",Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour);a=Blockly.VariablesDynamic.flyoutCategoryBlocks(a);return b=b.concat(a)};\nBlockly.VariablesDynamic.flyoutCategoryBlocks=function(a){a=a.getAllVariables();var b=[];if(0<a.length){if(Blockly.Blocks.variables_set_dynamic){var c=a[a.length-1],d=Blockly.utils.xml.createElement(\"block\");d.setAttribute(\"type\",\"variables_set_dynamic\");d.setAttribute(\"gap\",24);d.appendChild(Blockly.Variables.generateVariableFieldDom(c));b.push(d)}if(Blockly.Blocks.variables_get_dynamic){a.sort(Blockly.VariableModel.compareByName);c=0;for(var e;e=a[c];c++)d=Blockly.utils.xml.createElement(\"block\"),\nd.setAttribute(\"type\",\"variables_get_dynamic\"),d.setAttribute(\"gap\",8),d.appendChild(Blockly.Variables.generateVariableFieldDom(e)),b.push(d)}}return b};Blockly.ZoomControls=function(a){this.workspace_=a;this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null};Blockly.ZoomControls.prototype.WIDTH_=32;Blockly.ZoomControls.prototype.HEIGHT_=110;Blockly.ZoomControls.prototype.MARGIN_BOTTOM_=20;Blockly.ZoomControls.prototype.MARGIN_SIDE_=20;Blockly.ZoomControls.prototype.svgGroup_=null;Blockly.ZoomControls.prototype.left_=0;\nBlockly.ZoomControls.prototype.top_=0;Blockly.ZoomControls.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null);var a=String(Math.random()).substring(2);this.createZoomOutSvg_(a);this.createZoomInSvg_(a);this.workspace_.isMovable()&&this.createZoomResetSvg_(a);return this.svgGroup_};Blockly.ZoomControls.prototype.init=function(a){this.verticalSpacing_=this.MARGIN_BOTTOM_+a;return this.verticalSpacing_+this.HEIGHT_};\nBlockly.ZoomControls.prototype.dispose=function(){this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_);this.onZoomResetWrapper_&&Blockly.unbindEvent_(this.onZoomResetWrapper_);this.onZoomInWrapper_&&Blockly.unbindEvent_(this.onZoomInWrapper_);this.onZoomOutWrapper_&&Blockly.unbindEvent_(this.onZoomOutWrapper_)};\nBlockly.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var a=this.workspace_.getMetrics();a&&(this.left_=a.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?a.viewWidth+a.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,a.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute(\"transform\",\"translate(0, 34)\"),\nthis.zoomResetGroup_&&this.zoomResetGroup_.setAttribute(\"transform\",\"translate(0, 77)\")):(this.top_=a.viewHeight+a.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute(\"transform\",\"translate(0, 43)\"),this.zoomOutGroup_.setAttribute(\"transform\",\"translate(0, 77)\")),this.svgGroup_.setAttribute(\"transform\",\"translate(\"+this.left_+\",\"+this.top_+\")\"))}};\nBlockly.ZoomControls.prototype.createZoomOutSvg_=function(a){this.zoomOutGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyZoom\"},this.svgGroup_);var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:\"blocklyZoomoutClipPath\"+a},this.zoomOutGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-64,y:-92,\n\"clip-path\":\"url(#blocklyZoomoutClipPath\"+a+\")\"},this.zoomOutGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.workspace_.options.pathToMedia+Blockly.SPRITE.url);this.onZoomOutWrapper_=Blockly.bindEventWithChecks_(this.zoomOutGroup_,\"mousedown\",null,this.zoom_.bind(this,-1))};\nBlockly.ZoomControls.prototype.createZoomInSvg_=function(a){this.zoomInGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyZoom\"},this.svgGroup_);var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:\"blocklyZoominClipPath\"+a},this.zoomInGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-32,y:-92,\n\"clip-path\":\"url(#blocklyZoominClipPath\"+a+\")\"},this.zoomInGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.workspace_.options.pathToMedia+Blockly.SPRITE.url);this.onZoomInWrapper_=Blockly.bindEventWithChecks_(this.zoomInGroup_,\"mousedown\",null,this.zoom_.bind(this,1))};\nBlockly.ZoomControls.prototype.zoom_=function(a,b){this.workspace_.markFocused();var c=this.workspace_.scale;this.workspace_.zoomCenter(a);this.fireZoomEvent_(c);Blockly.Touch.clearTouchIdentifier();b.stopPropagation();b.preventDefault()};\nBlockly.ZoomControls.prototype.createZoomResetSvg_=function(a){this.zoomResetGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyZoom\"},this.svgGroup_);var b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:\"blocklyZoomresetClipPath\"+a},this.zoomResetGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,\ny:-92,\"clip-path\":\"url(#blocklyZoomresetClipPath\"+a+\")\"},this.zoomResetGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.workspace_.options.pathToMedia+Blockly.SPRITE.url);this.onZoomResetWrapper_=Blockly.bindEventWithChecks_(this.zoomResetGroup_,\"mousedown\",null,this.resetZoom_.bind(this))};\nBlockly.ZoomControls.prototype.resetZoom_=function(a){this.workspace_.markFocused();var b=this.workspace_.scale;this.workspace_.setScale(this.workspace_.options.zoomOptions.startScale);this.workspace_.beginCanvasTransition();this.workspace_.scrollCenter();setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500);this.fireZoomEvent_(b);Blockly.Touch.clearTouchIdentifier();a.stopPropagation();a.preventDefault()};\nBlockly.ZoomControls.prototype.fireZoomEvent_=function(a){a=new Blockly.Events.Ui(null,\"zoom\",a,this.workspace_.scale);a.workspaceId=this.workspace_.id;Blockly.Events.fire(a)};Blockly.Css.register([\".blocklyZoom>image, .blocklyZoom>svg>image {\",\"opacity: .4;\",\"}\",\".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\",\"opacity: .6;\",\"}\",\".blocklyZoom>image:active, .blocklyZoom>svg>image:active {\",\"opacity: .8;\",\"}\"]);Blockly.Mutator=function(a){Blockly.Mutator.superClass_.constructor.call(this,null);this.quarkNames_=a};Blockly.utils.object.inherits(Blockly.Mutator,Blockly.Icon);Blockly.Mutator.prototype.workspaceWidth_=0;Blockly.Mutator.prototype.workspaceHeight_=0;Blockly.Mutator.prototype.setBlock=function(a){this.block_=a};Blockly.Mutator.prototype.getWorkspace=function(){return this.workspace_};\nBlockly.Mutator.prototype.drawIcon_=function(a){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{\"class\":\"blocklyIconShape\",rx:\"4\",ry:\"4\",height:\"16\",width:\"16\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyIconSymbol\",d:\"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z\"},\na);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{\"class\":\"blocklyIconShape\",r:\"2.7\",cx:\"8\",cy:\"8\"},a)};Blockly.Mutator.prototype.iconClick_=function(a){this.block_.isEditable()&&Blockly.Icon.prototype.iconClick_.call(this,a)};\nBlockly.Mutator.prototype.createEditor_=function(){this.svgDialog_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null);if(this.quarkNames_.length)for(var a=Blockly.utils.xml.createElement(\"xml\"),b=0,c;c=this.quarkNames_[b];b++){var d=Blockly.utils.xml.createElement(\"block\");d.setAttribute(\"type\",c);a.appendChild(d)}else a=null;b=new Blockly.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,\nrtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides});b.toolboxPosition=this.block_.RTL?Blockly.utils.toolbox.Position.RIGHT:Blockly.utils.toolbox.Position.LEFT;if(c=!!a)b.languageTree=Blockly.utils.toolbox.convertToolboxDefToJson(a),b.getMetrics=this.getFlyoutMetrics_.bind(this);this.workspace_=new Blockly.WorkspaceSvg(b);this.workspace_.isMutator=!0;this.workspace_.addChangeListener(Blockly.Events.disableOrphans);\na=c?this.workspace_.addFlyout(Blockly.utils.Svg.G):null;b=this.workspace_.createDom(\"blocklyMutatorBackground\");a&&b.insertBefore(a,this.workspace_.svgBlockCanvas_);this.svgDialog_.appendChild(b);return this.svgDialog_};\nBlockly.Mutator.prototype.updateEditable=function(){Blockly.Mutator.superClass_.updateEditable.call(this);this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&Blockly.utils.dom.removeClass(this.iconGroup_,\"blocklyIconGroupReadonly\"):(this.setVisible(!1),this.iconGroup_&&Blockly.utils.dom.addClass(this.iconGroup_,\"blocklyIconGroupReadonly\")))};\nBlockly.Mutator.prototype.resizeBubble_=function(){var a=2*Blockly.Bubble.BORDER_WIDTH,b=this.workspace_.getCanvas().getBBox(),c=b.width+b.x,d=b.height+3*a,e=this.workspace_.getFlyout();if(e){var f=e.getMetrics_();d=Math.max(d,f.contentHeight+20);c+=e.getWidth()}this.block_.RTL&&(c=-b.x);c+=3*a;if(Math.abs(this.workspaceWidth_-c)>a||Math.abs(this.workspaceHeight_-d)>a)this.workspaceWidth_=c,this.workspaceHeight_=d,this.bubble_.setBubbleSize(c+a,d+a),this.svgDialog_.setAttribute(\"width\",this.workspaceWidth_),\nthis.svgDialog_.setAttribute(\"height\",this.workspaceHeight_);this.block_.RTL&&(a=\"translate(\"+this.workspaceWidth_+\",0)\",this.workspace_.getCanvas().setAttribute(\"transform\",a));this.workspace_.resize()};Blockly.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()};\nBlockly.Mutator.prototype.setVisible=function(a){if(a!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,\"mutatorOpen\",!a,a)),a){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null);this.bubble_.setSvgId(this.block_.id);this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var b=this.workspace_.options.languageTree;a=this.workspace_.getFlyout();b&&(a.init(this.workspace_),a.show(b));this.rootBlock_=\nthis.block_.decompose(this.workspace_);b=this.rootBlock_.getDescendants(!1);for(var c=0,d;d=b[c];c++)d.render();this.rootBlock_.setMovable(!1);this.rootBlock_.setDeletable(!1);a?(b=2*a.CORNER_RADIUS,a=this.rootBlock_.RTL?a.getWidth()+b:b):a=b=16;this.block_.RTL&&(a=-a);this.rootBlock_.moveBy(a,b);if(this.block_.saveConnections){var e=this,f=this.block_;f.saveConnections(this.rootBlock_);this.sourceListener_=function(){f.saveConnections(e.rootBlock_)};this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_();\nthis.workspace_.addChangeListener(this.workspaceChanged_.bind(this));this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)};\nBlockly.Mutator.prototype.workspaceChanged_=function(a){if(a.type!=Blockly.Events.UI&&(a.type!=Blockly.Events.CHANGE||\"disabled\"!=a.element)){if(!this.workspace_.isDragging())for(var b=this.workspace_.getTopBlocks(!1),c=0;a=b[c];c++){var d=a.getRelativeToSurfaceXY();20>d.y&&a.moveBy(0,20-d.y);if(a.RTL){var e=-20,f=this.workspace_.getFlyout();f&&(e-=f.getWidth());d.x>e&&a.moveBy(e-d.x,0)}else 20>d.x&&a.moveBy(20-d.x,0)}this.rootBlock_.workspace==this.workspace_&&(Blockly.Events.setGroup(!0),a=this.block_,\nb=(b=a.mutationToDom())&&Blockly.Xml.domToText(b),c=a.rendered,a.rendered=!1,a.compose(this.rootBlock_),a.rendered=c,a.initSvg(),Blockly.getMainWorkspace().keyboardAccessibilityMode&&Blockly.navigation.moveCursorOnBlockMutation(a),a.rendered&&a.render(),c=(c=a.mutationToDom())&&Blockly.Xml.domToText(c),b!=c&&Blockly.Events.fire(new Blockly.Events.BlockChange(a,\"mutation\",null,b,c)),this.workspace_.isDragging()||this.resizeBubble_(),Blockly.Events.setGroup(!1))}};\nBlockly.Mutator.prototype.getFlyoutMetrics_=function(){var a=this.workspace_.getFlyout();a=a?a.getWidth():0;return{contentHeight:0,contentWidth:0,contentTop:0,contentLeft:0,viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-a,viewTop:0,viewLeft:0,absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:a}};Blockly.Mutator.prototype.dispose=function(){this.block_.mutator=null;Blockly.Icon.prototype.dispose.call(this)};\nBlockly.Mutator.prototype.updateBlockStyle=function(){var a=this.workspace_;if(a&&a.getAllBlocks(!1)){for(var b=a.getAllBlocks(!1),c=0;c<b.length;c++){var d=b[c];d.setStyle(d.getStyleName())}if(c=a.getFlyout())for(a=c.workspace_.getAllBlocks(!1),c=0;c<a.length;c++)d=a[c],d.setStyle(d.getStyleName())}};\nBlockly.Mutator.reconnect=function(a,b,c){if(!a||!a.getSourceBlock().workspace)return!1;c=b.getInput(c).connection;var d=a.targetBlock();return d&&d!=b||c.targetConnection==a?!1:(c.isConnected()&&c.disconnect(),c.connect(a),!0)};Blockly.Mutator.findParentWs=function(a){var b=null;if(a&&a.options){var c=a.options.parentWorkspace;a.isFlyout?c&&c.options&&(b=c.options.parentWorkspace):c&&(b=c)}return b};Blockly.FieldTextInput=function(a,b,c){this.spellcheck_=!0;Blockly.FieldTextInput.superClass_.constructor.call(this,a,b,c);this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null;this.fullBlockClickTarget_=!1;this.workspace_=null};Blockly.utils.object.inherits(Blockly.FieldTextInput,Blockly.Field);Blockly.FieldTextInput.prototype.DEFAULT_VALUE=\"\";\nBlockly.FieldTextInput.fromJson=function(a){var b=Blockly.utils.replaceMessageReferences(a.text);return new Blockly.FieldTextInput(b,void 0,a)};Blockly.FieldTextInput.prototype.SERIALIZABLE=!0;Blockly.FieldTextInput.BORDERRADIUS=4;Blockly.FieldTextInput.prototype.CURSOR=\"text\";Blockly.FieldTextInput.prototype.configure_=function(a){Blockly.FieldTextInput.superClass_.configure_.call(this,a);\"boolean\"==typeof a.spellcheck&&(this.spellcheck_=a.spellcheck)};\nBlockly.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var a=0,b=0,c=0,d;d=this.sourceBlock_.inputList[c];c++){for(var e=0;d.fieldRow[e];e++)a++;d.connection&&b++}this.fullBlockClickTarget_=1>=a&&this.sourceBlock_.outputConnection&&!b}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_();this.createTextElement_()};\nBlockly.FieldTextInput.prototype.doClassValidation_=function(a){return null===a||void 0===a?null:String(a)};Blockly.FieldTextInput.prototype.doValueInvalid_=function(a){this.isBeingEdited_&&(this.isTextValid_=!1,a=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,\"field\",this.name||null,a,this.value_)))};\nBlockly.FieldTextInput.prototype.doValueUpdate_=function(a){this.isTextValid_=!0;this.value_=a;this.isBeingEdited_||(this.isDirty_=!0)};Blockly.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute(\"stroke\",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute(\"fill\",this.getConstants().FIELD_BORDER_RECT_COLOUR))};\nBlockly.FieldTextInput.prototype.render_=function(){Blockly.FieldTextInput.superClass_.render_.call(this);if(this.isBeingEdited_){this.resizeEditor_();var a=this.htmlInput_;this.isTextValid_?(Blockly.utils.dom.removeClass(a,\"blocklyInvalidInput\"),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(a,\"blocklyInvalidInput\"),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.INVALID,!0))}};\nBlockly.FieldTextInput.prototype.setSpellcheck=function(a){a!=this.spellcheck_&&(this.spellcheck_=a,this.htmlInput_&&this.htmlInput_.setAttribute(\"spellcheck\",this.spellcheck_))};Blockly.FieldTextInput.prototype.showEditor_=function(a,b){this.workspace_=this.sourceBlock_.workspace;a=b||!1;!a&&(Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(a)};\nBlockly.FieldTextInput.prototype.showPromptEditor_=function(){var a=this;Blockly.prompt(Blockly.Msg.CHANGE_VALUE_TITLE,this.getText(),function(b){a.setValue(b)})};Blockly.FieldTextInput.prototype.showInlineEditor_=function(a){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this));this.htmlInput_=this.widgetCreate_();this.isBeingEdited_=!0;a||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())};\nBlockly.FieldTextInput.prototype.widgetCreate_=function(){var a=Blockly.WidgetDiv.DIV;Blockly.utils.dom.addClass(this.getClickTarget_(),\"editing\");var b=document.createElement(\"input\");b.className=\"blocklyHtmlInput\";b.setAttribute(\"spellcheck\",this.spellcheck_);var c=this.workspace_.getScale(),d=this.getConstants().FIELD_TEXT_FONTSIZE*c+\"pt\";a.style.fontSize=d;b.style.fontSize=d;d=Blockly.FieldTextInput.BORDERRADIUS*c+\"px\";if(this.fullBlockClickTarget_){d=this.getScaledBBox();d=(d.bottom-d.top)/2+\n\"px\";var e=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;b.style.border=1*c+\"px solid \"+e;a.style.borderRadius=d;a.style.transition=\"box-shadow 0.25s ease 0s\";this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow=\"rgba(255, 255, 255, 0.3) 0px 0px 0px \"+4*c+\"px\")}b.style.borderRadius=d;a.appendChild(b);b.value=b.defaultValue=this.getEditorText_(this.value_);b.untypedDefaultValue_=this.value_;b.oldValue_=null;this.resizeEditor_();\nthis.bindInputEvents_(b);return b};Blockly.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1;this.isTextValid_=!0;this.forceRerender();if(this.onFinishEditing_)this.onFinishEditing_(this.value_);this.unbindInputEvents_();var a=Blockly.WidgetDiv.DIV.style;a.width=\"auto\";a.height=\"auto\";a.fontSize=\"\";a.transition=\"\";a.boxShadow=\"\";this.htmlInput_=null;Blockly.utils.dom.removeClass(this.getClickTarget_(),\"editing\")};\nBlockly.FieldTextInput.prototype.bindInputEvents_=function(a){this.onKeyDownWrapper_=Blockly.bindEventWithChecks_(a,\"keydown\",this,this.onHtmlInputKeyDown_);this.onKeyInputWrapper_=Blockly.bindEventWithChecks_(a,\"input\",this,this.onHtmlInputChange_)};\nBlockly.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(Blockly.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null);this.onKeyInputWrapper_&&(Blockly.unbindEvent_(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)};\nBlockly.FieldTextInput.prototype.onHtmlInputKeyDown_=function(a){a.keyCode==Blockly.utils.KeyCodes.ENTER?(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):a.keyCode==Blockly.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):a.keyCode==Blockly.utils.KeyCodes.TAB&&(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!a.shiftKey),a.preventDefault())};\nBlockly.FieldTextInput.prototype.onHtmlInputChange_=function(a){a=this.htmlInput_.value;a!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=a,Blockly.Events.setGroup(!0),a=this.getValueFromEditorText_(a),this.setValue(a),this.forceRerender(),this.resizeEditor_(),Blockly.Events.setGroup(!1))};Blockly.FieldTextInput.prototype.setEditorValue_=function(a){this.isDirty_=!0;this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(a));this.setValue(a)};\nBlockly.FieldTextInput.prototype.resizeEditor_=function(){var a=Blockly.WidgetDiv.DIV,b=this.getScaledBBox();a.style.width=b.right-b.left+\"px\";a.style.height=b.bottom-b.top+\"px\";b=new Blockly.utils.Coordinate(this.sourceBlock_.RTL?b.right-a.offsetWidth:b.left,b.top);a.style.left=b.x+\"px\";a.style.top=b.y+\"px\"};\nBlockly.FieldTextInput.numberValidator=function(a){console.warn(\"Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead.\");if(null===a)return null;a=String(a);a=a.replace(/O/ig,\"0\");a=a.replace(/,/g,\"\");a=Number(a||0);return isNaN(a)?null:String(a)};Blockly.FieldTextInput.nonnegativeIntegerValidator=function(a){(a=Blockly.FieldTextInput.numberValidator(a))&&(a=String(Math.max(0,Math.floor(a))));return a};Blockly.FieldTextInput.prototype.isTabNavigable=function(){return!0};\nBlockly.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null};Blockly.FieldTextInput.prototype.getEditorText_=function(a){return String(a)};Blockly.FieldTextInput.prototype.getValueFromEditorText_=function(a){return a};Blockly.fieldRegistry.register(\"field_input\",Blockly.FieldTextInput);Blockly.FieldAngle=function(a,b,c){this.clockwise_=Blockly.FieldAngle.CLOCKWISE;this.offset_=Blockly.FieldAngle.OFFSET;this.wrap_=Blockly.FieldAngle.WRAP;this.round_=Blockly.FieldAngle.ROUND;Blockly.FieldAngle.superClass_.constructor.call(this,a,b,c);this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null};Blockly.utils.object.inherits(Blockly.FieldAngle,Blockly.FieldTextInput);Blockly.FieldAngle.prototype.DEFAULT_VALUE=0;\nBlockly.FieldAngle.fromJson=function(a){return new Blockly.FieldAngle(a.angle,void 0,a)};Blockly.FieldAngle.prototype.SERIALIZABLE=!0;Blockly.FieldAngle.ROUND=15;Blockly.FieldAngle.HALF=50;Blockly.FieldAngle.CLOCKWISE=!1;Blockly.FieldAngle.OFFSET=0;Blockly.FieldAngle.WRAP=360;Blockly.FieldAngle.RADIUS=Blockly.FieldAngle.HALF-1;\nBlockly.FieldAngle.prototype.configure_=function(a){Blockly.FieldAngle.superClass_.configure_.call(this,a);switch(a.mode){case \"compass\":this.clockwise_=!0;this.offset_=90;break;case \"protractor\":this.clockwise_=!1,this.offset_=0}var b=a.clockwise;\"boolean\"==typeof b&&(this.clockwise_=b);b=a.offset;null!=b&&(b=Number(b),isNaN(b)||(this.offset_=b));b=a.wrap;null!=b&&(b=Number(b),isNaN(b)||(this.wrap_=b));a=a.round;null!=a&&(a=Number(a),isNaN(a)||(this.round_=a))};\nBlockly.FieldAngle.prototype.initView=function(){Blockly.FieldAngle.superClass_.initView.call(this);this.symbol_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{},null);this.symbol_.appendChild(document.createTextNode(\"\\u00b0\"));this.textElement_.appendChild(this.symbol_)};Blockly.FieldAngle.prototype.render_=function(){Blockly.FieldAngle.superClass_.render_.call(this);this.updateGraph_()};\nBlockly.FieldAngle.prototype.showEditor_=function(a){Blockly.FieldAngle.superClass_.showEditor_.call(this,a,Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD);a=this.dropdownCreate_();Blockly.DropDownDiv.getContentDiv().appendChild(a);Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary);Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.updateGraph_()};\nBlockly.FieldAngle.prototype.dropdownCreate_=function(){var a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,\"xmlns:html\":Blockly.utils.dom.HTML_NS,\"xmlns:xlink\":Blockly.utils.dom.XLINK_NS,version:\"1.1\",height:2*Blockly.FieldAngle.HALF+\"px\",width:2*Blockly.FieldAngle.HALF+\"px\",style:\"touch-action: none\"},null),b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.RADIUS,\"class\":\"blocklyAngleCircle\"},\na);this.gauge_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyAngleGauge\"},a);this.line_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,\"class\":\"blocklyAngleLine\"},a);for(var c=0;360>c;c+=15)Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-(0==c%45?10:5),y2:Blockly.FieldAngle.HALF,\n\"class\":\"blocklyAngleMarks\",transform:\"rotate(\"+c+\",\"+Blockly.FieldAngle.HALF+\",\"+Blockly.FieldAngle.HALF+\")\"},a);this.clickWrapper_=Blockly.bindEventWithChecks_(a,\"click\",this,this.hide_);this.clickSurfaceWrapper_=Blockly.bindEventWithChecks_(b,\"click\",this,this.onMouseMove_,!0,!0);this.moveSurfaceWrapper_=Blockly.bindEventWithChecks_(b,\"mousemove\",this,this.onMouseMove_,!0,!0);return a};\nBlockly.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(Blockly.unbindEvent_(this.clickWrapper_),this.clickWrapper_=null);this.clickSurfaceWrapper_&&(Blockly.unbindEvent_(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null);this.moveSurfaceWrapper_&&(Blockly.unbindEvent_(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null);this.line_=this.gauge_=null};Blockly.FieldAngle.prototype.hide_=function(){Blockly.DropDownDiv.hideIfOwner(this);Blockly.WidgetDiv.hide()};\nBlockly.FieldAngle.prototype.onMouseMove_=function(a){var b=this.gauge_.ownerSVGElement.getBoundingClientRect(),c=a.clientX-b.left-Blockly.FieldAngle.HALF;a=a.clientY-b.top-Blockly.FieldAngle.HALF;b=Math.atan(-a/c);isNaN(b)||(b=Blockly.utils.math.toDegrees(b),0>c?b+=180:0<a&&(b+=360),b=this.clockwise_?this.offset_+360-b:360-(this.offset_-b),this.displayMouseOrKeyboardValue_(b))};\nBlockly.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(a){this.round_&&(a=Math.round(a/this.round_)*this.round_);a=this.wrapValue_(a);a!=this.value_&&this.setEditorValue_(a)};\nBlockly.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var a=Number(this.getText())+this.offset_,b=Blockly.utils.math.toRadians(a%360);a=[\"M \",Blockly.FieldAngle.HALF,\",\",Blockly.FieldAngle.HALF];var c=Blockly.FieldAngle.HALF,d=Blockly.FieldAngle.HALF;if(!isNaN(b)){var e=Number(this.clockwise_),f=Blockly.utils.math.toRadians(this.offset_),g=Math.cos(f)*Blockly.FieldAngle.RADIUS,h=Math.sin(f)*-Blockly.FieldAngle.RADIUS;e&&(b=2*f-b);c+=Math.cos(b)*Blockly.FieldAngle.RADIUS;d-=Math.sin(b)*\nBlockly.FieldAngle.RADIUS;b=Math.abs(Math.floor((b-f)/Math.PI)%2);e&&(b=1-b);a.push(\" l \",g,\",\",h,\" A \",Blockly.FieldAngle.RADIUS,\",\",Blockly.FieldAngle.RADIUS,\" 0 \",b,\" \",e,\" \",c,\",\",d,\" z\")}this.gauge_.setAttribute(\"d\",a.join(\"\"));this.line_.setAttribute(\"x2\",c);this.line_.setAttribute(\"y2\",d)}};\nBlockly.FieldAngle.prototype.onHtmlInputKeyDown_=function(a){Blockly.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,a);var b;a.keyCode===Blockly.utils.KeyCodes.LEFT?b=this.sourceBlock_.RTL?1:-1:a.keyCode===Blockly.utils.KeyCodes.RIGHT?b=this.sourceBlock_.RTL?-1:1:a.keyCode===Blockly.utils.KeyCodes.DOWN?b=-1:a.keyCode===Blockly.utils.KeyCodes.UP&&(b=1);if(b){var c=this.getValue();this.displayMouseOrKeyboardValue_(c+b*this.round_);a.preventDefault();a.stopPropagation()}};\nBlockly.FieldAngle.prototype.doClassValidation_=function(a){a=Number(a);return isNaN(a)||!isFinite(a)?null:this.wrapValue_(a)};Blockly.FieldAngle.prototype.wrapValue_=function(a){a%=360;0>a&&(a+=360);a>this.wrap_&&(a-=360);return a};Blockly.Css.register(\".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}\".split(\",\"));\nBlockly.fieldRegistry.register(\"field_angle\",Blockly.FieldAngle);Blockly.FieldCheckbox=function(a,b,c){this.checkChar_=null;Blockly.FieldCheckbox.superClass_.constructor.call(this,a,b,c)};Blockly.utils.object.inherits(Blockly.FieldCheckbox,Blockly.Field);Blockly.FieldCheckbox.prototype.DEFAULT_VALUE=!1;Blockly.FieldCheckbox.fromJson=function(a){return new Blockly.FieldCheckbox(a.checked,void 0,a)};Blockly.FieldCheckbox.CHECK_CHAR=\"\\u2713\";Blockly.FieldCheckbox.prototype.SERIALIZABLE=!0;Blockly.FieldCheckbox.prototype.CURSOR=\"default\";\nBlockly.FieldCheckbox.prototype.configure_=function(a){Blockly.FieldCheckbox.superClass_.configure_.call(this,a);a.checkCharacter&&(this.checkChar_=a.checkCharacter)};Blockly.FieldCheckbox.prototype.initView=function(){Blockly.FieldCheckbox.superClass_.initView.call(this);Blockly.utils.dom.addClass(this.textElement_,\"blocklyCheckbox\");this.textElement_.style.display=this.value_?\"block\":\"none\"};\nBlockly.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_());this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)};Blockly.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||Blockly.FieldCheckbox.CHECK_CHAR};Blockly.FieldCheckbox.prototype.setCheckCharacter=function(a){this.checkChar_=a;this.forceRerender()};Blockly.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)};\nBlockly.FieldCheckbox.prototype.doClassValidation_=function(a){return!0===a||\"TRUE\"===a?\"TRUE\":!1===a||\"FALSE\"===a?\"FALSE\":null};Blockly.FieldCheckbox.prototype.doValueUpdate_=function(a){this.value_=this.convertValueToBool_(a);this.textElement_&&(this.textElement_.style.display=this.value_?\"block\":\"none\")};Blockly.FieldCheckbox.prototype.getValue=function(){return this.value_?\"TRUE\":\"FALSE\"};Blockly.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_};\nBlockly.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))};Blockly.FieldCheckbox.prototype.convertValueToBool_=function(a){return\"string\"==typeof a?\"TRUE\"==a:!!a};Blockly.fieldRegistry.register(\"field_checkbox\",Blockly.FieldCheckbox);Blockly.FieldColour=function(a,b,c){Blockly.FieldColour.superClass_.constructor.call(this,a,b,c);this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null};Blockly.utils.object.inherits(Blockly.FieldColour,Blockly.Field);Blockly.FieldColour.fromJson=function(a){return new Blockly.FieldColour(a.colour,void 0,a)};Blockly.FieldColour.prototype.SERIALIZABLE=!0;Blockly.FieldColour.prototype.CURSOR=\"default\";\nBlockly.FieldColour.prototype.isDirty_=!1;Blockly.FieldColour.prototype.colours_=null;Blockly.FieldColour.prototype.titles_=null;Blockly.FieldColour.prototype.columns_=0;Blockly.FieldColour.prototype.configure_=function(a){Blockly.FieldColour.superClass_.configure_.call(this,a);a.colourOptions&&(this.colours_=a.colourOptions,this.titles_=a.colourTitles);a.columns&&(this.columns_=a.columns)};\nBlockly.FieldColour.prototype.initView=function(){this.size_=new Blockly.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT);this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity=\"1\")};\nBlockly.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute(\"fill\",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute(\"stroke\",\"#fff\")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())};Blockly.FieldColour.prototype.doClassValidation_=function(a){return\"string\"!=typeof a?null:Blockly.utils.colour.parse(a)};\nBlockly.FieldColour.prototype.doValueUpdate_=function(a){this.value_=a;this.borderRect_?this.borderRect_.style.fill=a:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute(\"fill\",a),this.sourceBlock_.pathObject.svgPath.setAttribute(\"stroke\",\"#fff\"))};Blockly.FieldColour.prototype.getText=function(){var a=this.value_;/^#(.)\\1(.)\\2(.)\\3$/.test(a)&&(a=\"#\"+a[1]+a[3]+a[5]);return a};Blockly.FieldColour.COLOURS=\"#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033\".split(\" \");\nBlockly.FieldColour.prototype.DEFAULT_VALUE=Blockly.FieldColour.COLOURS[0];Blockly.FieldColour.TITLES=[];Blockly.FieldColour.COLUMNS=7;Blockly.FieldColour.prototype.setColours=function(a,b){this.colours_=a;b&&(this.titles_=b);return this};Blockly.FieldColour.prototype.setColumns=function(a){this.columns_=a;return this};\nBlockly.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_();Blockly.DropDownDiv.getContentDiv().appendChild(this.picker_);Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.picker_.focus({preventScroll:!0})};Blockly.FieldColour.prototype.onClick_=function(a){a=(a=a.target)&&a.label;null!==a&&(this.setValue(a),Blockly.DropDownDiv.hideIfOwner(this))};\nBlockly.FieldColour.prototype.onKeyDown_=function(a){var b=!1;if(a.keyCode===Blockly.utils.KeyCodes.UP)this.moveHighlightBy_(0,-1),b=!0;else if(a.keyCode===Blockly.utils.KeyCodes.DOWN)this.moveHighlightBy_(0,1),b=!0;else if(a.keyCode===Blockly.utils.KeyCodes.LEFT)this.moveHighlightBy_(-1,0),b=!0;else if(a.keyCode===Blockly.utils.KeyCodes.RIGHT)this.moveHighlightBy_(1,0),b=!0;else if(a.keyCode===Blockly.utils.KeyCodes.ENTER){if(b=this.getHighlighted_())b=b&&b.label,null!==b&&this.setValue(b);Blockly.DropDownDiv.hideWithoutAnimation();\nb=!0}b&&a.stopPropagation()};Blockly.FieldColour.prototype.onBlocklyAction=function(a){if(this.picker_){if(a===Blockly.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(a===Blockly.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(a===Blockly.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(a===Blockly.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return Blockly.FieldColour.superClass_.onBlocklyAction.call(this,a)};\nBlockly.FieldColour.prototype.moveHighlightBy_=function(a,b){var c=this.colours_||Blockly.FieldColour.COLOURS,d=this.columns_||Blockly.FieldColour.COLUMNS,e=this.highlightedIndex_%d,f=Math.floor(this.highlightedIndex_/d);e+=a;f+=b;0>a?0>e&&0<f?(e=d-1,f--):0>e&&(e=0):0<a?e>d-1&&f<Math.floor(c.length/d)-1?(e=0,f++):e>d-1&&e--:0>b?0>f&&(f=0):0<b&&f>Math.floor(c.length/d)-1&&(f=Math.floor(c.length/d)-1);this.setHighlightedCell_(this.picker_.childNodes[f].childNodes[e],f*d+e)};\nBlockly.FieldColour.prototype.onMouseMove_=function(a){var b=(a=a.target)&&Number(a.getAttribute(\"data-index\"));null!==b&&b!==this.highlightedIndex_&&this.setHighlightedCell_(a,b)};Blockly.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})};Blockly.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var a=this.getHighlighted_();a&&Blockly.utils.dom.removeClass(a,\"blocklyColourHighlighted\")};\nBlockly.FieldColour.prototype.getHighlighted_=function(){var a=this.columns_||Blockly.FieldColour.COLUMNS,b=this.picker_.childNodes[Math.floor(this.highlightedIndex_/a)];return b?b.childNodes[this.highlightedIndex_%a]:null};\nBlockly.FieldColour.prototype.setHighlightedCell_=function(a,b){var c=this.getHighlighted_();c&&Blockly.utils.dom.removeClass(c,\"blocklyColourHighlighted\");Blockly.utils.dom.addClass(a,\"blocklyColourHighlighted\");this.highlightedIndex_=b;Blockly.utils.aria.setState(this.picker_,Blockly.utils.aria.State.ACTIVEDESCENDANT,a.getAttribute(\"id\"))};\nBlockly.FieldColour.prototype.dropdownCreate_=function(){var a=this.columns_||Blockly.FieldColour.COLUMNS,b=this.colours_||Blockly.FieldColour.COLOURS,c=this.titles_||Blockly.FieldColour.TITLES,d=this.getValue(),e=document.createElement(\"table\");e.className=\"blocklyColourTable\";e.tabIndex=0;e.dir=\"ltr\";Blockly.utils.aria.setRole(e,Blockly.utils.aria.Role.GRID);Blockly.utils.aria.setState(e,Blockly.utils.aria.State.EXPANDED,!0);Blockly.utils.aria.setState(e,Blockly.utils.aria.State.ROWCOUNT,Math.floor(b.length/\na));Blockly.utils.aria.setState(e,Blockly.utils.aria.State.COLCOUNT,a);for(var f,g=0;g<b.length;g++){0==g%a&&(f=document.createElement(\"tr\"),Blockly.utils.aria.setRole(f,Blockly.utils.aria.Role.ROW),e.appendChild(f));var h=document.createElement(\"td\");f.appendChild(h);h.label=b[g];h.title=c[g]||b[g];h.id=Blockly.utils.IdGenerator.getNextUniqueId();h.setAttribute(\"data-index\",g);Blockly.utils.aria.setRole(h,Blockly.utils.aria.Role.GRIDCELL);Blockly.utils.aria.setState(h,Blockly.utils.aria.State.LABEL,\nb[g]);Blockly.utils.aria.setState(h,Blockly.utils.aria.State.SELECTED,b[g]==d);h.style.backgroundColor=b[g];b[g]==d&&(h.className=\"blocklyColourSelected\",this.highlightedIndex_=g)}this.onClickWrapper_=Blockly.bindEventWithChecks_(e,\"click\",this,this.onClick_,!0);this.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(e,\"mousemove\",this,this.onMouseMove_,!0);this.onMouseEnterWrapper_=Blockly.bindEventWithChecks_(e,\"mouseenter\",this,this.onMouseEnter_,!0);this.onMouseLeaveWrapper_=Blockly.bindEventWithChecks_(e,\n\"mouseleave\",this,this.onMouseLeave_,!0);this.onKeyDownWrapper_=Blockly.bindEventWithChecks_(e,\"keydown\",this,this.onKeyDown_);return e};\nBlockly.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(Blockly.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null);this.onMouseMoveWrapper_&&(Blockly.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null);this.onMouseEnterWrapper_&&(Blockly.unbindEvent_(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null);this.onMouseLeaveWrapper_&&(Blockly.unbindEvent_(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null);this.onKeyDownWrapper_&&(Blockly.unbindEvent_(this.onKeyDownWrapper_),\nthis.onKeyDownWrapper_=null);this.highlightedIndex_=this.picker_=null};\nBlockly.Css.register([\".blocklyColourTable {\",\"border-collapse: collapse;\",\"display: block;\",\"outline: none;\",\"padding: 1px;\",\"}\",\".blocklyColourTable>tr>td {\",\"border: .5px solid #888;\",\"box-sizing: border-box;\",\"cursor: pointer;\",\"display: inline-block;\",\"height: 20px;\",\"padding: 0;\",\"width: 20px;\",\"}\",\".blocklyColourTable>tr>td.blocklyColourHighlighted {\",\"border-color: #eee;\",\"box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);\",\"position: relative;\",\"}\",\".blocklyColourSelected, .blocklyColourSelected:hover {\",\n\"border-color: #eee !important;\",\"outline: 1px solid #333;\",\"position: relative;\",\"}\"]);Blockly.fieldRegistry.register(\"field_colour\",Blockly.FieldColour);Blockly.FieldDropdown=function(a,b,c){\"function\"!=typeof a&&Blockly.FieldDropdown.validateOptions_(a);this.menuGenerator_=a;this.suffixField=this.prefixField=this.generatedOptions_=null;this.trimOptions_();this.selectedOption_=this.getOptions(!1)[0];Blockly.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],b,c);this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null};Blockly.utils.object.inherits(Blockly.FieldDropdown,Blockly.Field);\nBlockly.FieldDropdown.fromJson=function(a){return new Blockly.FieldDropdown(a.options,void 0,a)};Blockly.FieldDropdown.prototype.SERIALIZABLE=!0;Blockly.FieldDropdown.CHECKMARK_OVERHANG=25;Blockly.FieldDropdown.MAX_MENU_HEIGHT_VH=.45;Blockly.FieldDropdown.IMAGE_Y_OFFSET=5;Blockly.FieldDropdown.IMAGE_Y_PADDING=2*Blockly.FieldDropdown.IMAGE_Y_OFFSET;Blockly.FieldDropdown.ARROW_CHAR=Blockly.utils.userAgent.ANDROID?\"\\u25bc\":\"\\u25be\";Blockly.FieldDropdown.prototype.CURSOR=\"default\";\nBlockly.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot();this.createTextElement_();this.imageElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{},this.fieldGroup_);this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_();this.borderRect_&&Blockly.utils.dom.addClass(this.borderRect_,\"blocklyDropdownRect\")};\nBlockly.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()};\nBlockly.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{},this.textElement_);this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?Blockly.FieldDropdown.ARROW_CHAR+\" \":\" \"+Blockly.FieldDropdown.ARROW_CHAR));this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)};\nBlockly.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+\"px\",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+\"px\"},this.fieldGroup_);this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)};\nBlockly.FieldDropdown.prototype.showEditor_=function(a){this.menu_=this.dropdownCreate_();this.menu_.openingCoords=a&&\"number\"===typeof a.clientX?new Blockly.utils.Coordinate(a.clientX,a.clientY):null;this.menu_.render(Blockly.DropDownDiv.getContentDiv());a=this.menu_.getElement();Blockly.utils.dom.addClass(a,\"blocklyDropdownMenu\");if(this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){a=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var b=this.sourceBlock_.isShadow()?\nthis.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;Blockly.DropDownDiv.setColour(a,b)}Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.menu_.focus();this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_);this.applyColour()};\nBlockly.FieldDropdown.prototype.dropdownCreate_=function(){var a=new Blockly.Menu;a.setRole(Blockly.utils.aria.Role.LISTBOX);var b=this.getOptions(!1);this.selectedMenuItem_=null;for(var c=0;c<b.length;c++){var d=b[c][0],e=b[c][1];if(\"object\"==typeof d){var f=new Image(d.width,d.height);f.src=d.src;f.alt=d.alt||\"\";d=f}d=new Blockly.MenuItem(d,e);d.setRole(Blockly.utils.aria.Role.OPTION);d.setRightToLeft(this.sourceBlock_.RTL);d.setCheckable(!0);a.addChild(d);d.setChecked(e==this.value_);e==this.value_&&\n(this.selectedMenuItem_=d);d.onAction(this.handleMenuActionEvent_,this)}return a};Blockly.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose();this.selectedMenuItem_=this.menu_=null;this.applyColour()};Blockly.FieldDropdown.prototype.handleMenuActionEvent_=function(a){Blockly.DropDownDiv.hideIfOwner(this,!0);this.onItemSelected_(this.menu_,a)};Blockly.FieldDropdown.prototype.onItemSelected_=function(a,b){this.setValue(b.getValue())};\nBlockly.FieldDropdown.prototype.trimOptions_=function(){var a=this.menuGenerator_;if(Array.isArray(a)){for(var b=!1,c=0;c<a.length;c++){var d=a[c][0];\"string\"==typeof d?a[c][0]=Blockly.utils.replaceMessageReferences(d):(null!=d.alt&&(a[c][0].alt=Blockly.utils.replaceMessageReferences(d.alt)),b=!0)}if(!(b||2>a.length)){b=[];for(c=0;c<a.length;c++)b.push(a[c][0]);c=Blockly.utils.string.shortestStringLength(b);d=Blockly.utils.string.commonWordPrefix(b,c);var e=Blockly.utils.string.commonWordSuffix(b,\nc);!d&&!e||c<=d+e||(d&&(this.prefixField=b[0].substring(0,d-1)),e&&(this.suffixField=b[0].substr(1-e)),this.menuGenerator_=Blockly.FieldDropdown.applyTrim_(a,d,e))}}};Blockly.FieldDropdown.applyTrim_=function(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];f=f.substring(b,f.length-c);d[e]=[f,g]}return d};Blockly.FieldDropdown.prototype.isOptionListDynamic=function(){return\"function\"==typeof this.menuGenerator_};\nBlockly.FieldDropdown.prototype.getOptions=function(a){return this.isOptionListDynamic()?(this.generatedOptions_&&a||(this.generatedOptions_=this.menuGenerator_.call(this),Blockly.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_};\nBlockly.FieldDropdown.prototype.doClassValidation_=function(a){for(var b=!1,c=this.getOptions(!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.sourceBlock_&&console.warn(\"Cannot set the dropdown's value to an unavailable option. Block type: \"+this.sourceBlock_.type+\", Field name: \"+this.name+\", Value: \"+a),null)};\nBlockly.FieldDropdown.prototype.doValueUpdate_=function(a){Blockly.FieldDropdown.superClass_.doValueUpdate_.call(this,a);a=this.getOptions(!0);for(var b=0,c;c=a[b];b++)c[1]==this.value_&&(this.selectedOption_=c)};\nBlockly.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute(\"stroke\",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute(\"fill\",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute(\"fill\",\"transparent\"));this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)};\nBlockly.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue=\"\";this.imageElement_.style.display=\"none\";var a=this.selectedOption_&&this.selectedOption_[0];a&&\"object\"==typeof a?this.renderSelectedImage_(a):this.renderSelectedText_();this.positionBorderRect_()};\nBlockly.FieldDropdown.prototype.renderSelectedImage_=function(a){this.imageElement_.style.display=\"\";this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",a.src);this.imageElement_.setAttribute(\"height\",a.height);this.imageElement_.setAttribute(\"width\",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.borderRect_,d=Math.max(c?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,b+Blockly.FieldDropdown.IMAGE_Y_PADDING);c=c?this.getConstants().FIELD_BORDER_RECT_X_PADDING:\n0;var e=this.svgArrow_?this.positionSVGArrow_(a+c,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Blockly.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=a+e+2*c;this.size_.height=d;var f=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute(\"x\",c+e):(f=a+e,this.textElement_.setAttribute(\"text-anchor\",\"end\"),this.imageElement_.setAttribute(\"x\",c));this.imageElement_.setAttribute(\"y\",\nd/2-b/2);this.positionTextElement_(f+c,a+e)};\nBlockly.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_();Blockly.utils.dom.addClass(this.textElement_,\"blocklyDropdownText\");this.textElement_.setAttribute(\"text-anchor\",\"start\");var a=!!this.borderRect_,b=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),c=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,\nthis.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var d=0;this.svgArrow_&&(d=this.positionSVGArrow_(c+a,b/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2));this.size_.width=c+d+2*a;this.size_.height=b;this.positionTextElement_(a,c)};\nBlockly.FieldDropdown.prototype.positionSVGArrow_=function(a,b){if(!this.svgArrow_)return 0;var c=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,e=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;this.svgArrow_.setAttribute(\"transform\",\"translate(\"+(this.sourceBlock_.RTL?c:a+d)+\",\"+b+\")\");return e+d};\nBlockly.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var a=this.selectedOption_[0];return\"object\"==typeof a?a.alt:a};\nBlockly.FieldDropdown.validateOptions_=function(a){if(!Array.isArray(a))throw TypeError(\"FieldDropdown options must be an array.\");if(!a.length)throw TypeError(\"FieldDropdown options must not be an empty array.\");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?\"string\"!=typeof d[1]?(b=!0,console.error(\"Invalid option[\"+c+\"]: Each FieldDropdown option id must be a string. Found \"+d[1]+\" in: \",d)):d[0]&&\"string\"!=typeof d[0]&&\"string\"!=typeof d[0].src&&(b=!0,console.error(\"Invalid option[\"+\nc+\"]: Each FieldDropdown option must have a string label or image description. Found\"+d[0]+\" in: \",d)):(b=!0,console.error(\"Invalid option[\"+c+\"]: Each FieldDropdown option must be an array. Found: \",d))}if(b)throw TypeError(\"Found invalid FieldDropdown options.\");};\nBlockly.FieldDropdown.prototype.onBlocklyAction=function(a){if(this.menu_){if(a===Blockly.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(a===Blockly.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return Blockly.FieldDropdown.superClass_.onBlocklyAction.call(this,a)};Blockly.fieldRegistry.register(\"field_dropdown\",Blockly.FieldDropdown);Blockly.FieldLabelSerializable=function(a,b,c){Blockly.FieldLabelSerializable.superClass_.constructor.call(this,a,b,c)};Blockly.utils.object.inherits(Blockly.FieldLabelSerializable,Blockly.FieldLabel);Blockly.FieldLabelSerializable.fromJson=function(a){var b=Blockly.utils.replaceMessageReferences(a.text);return new Blockly.FieldLabelSerializable(b,void 0,a)};Blockly.FieldLabelSerializable.prototype.EDITABLE=!1;Blockly.FieldLabelSerializable.prototype.SERIALIZABLE=!0;\nBlockly.fieldRegistry.register(\"field_label_serializable\",Blockly.FieldLabelSerializable);Blockly.FieldImage=function(a,b,c,d,e,f,g){if(!a)throw Error(\"Src value of an image field is required\");a=Blockly.utils.replaceMessageReferences(a);c=Number(Blockly.utils.replaceMessageReferences(c));b=Number(Blockly.utils.replaceMessageReferences(b));if(isNaN(c)||isNaN(b))throw Error(\"Height and width values of an image field must cast to numbers.\");if(0>=c||0>=b)throw Error(\"Height and width values of an image field must be greater than 0.\");this.flipRtl_=!1;this.altText_=\"\";Blockly.FieldImage.superClass_.constructor.call(this,\na,null,g);g||(this.flipRtl_=!!f,this.altText_=Blockly.utils.replaceMessageReferences(d)||\"\");this.size_=new Blockly.utils.Size(b,c+Blockly.FieldImage.Y_PADDING);this.imageHeight_=c;this.clickHandler_=null;\"function\"==typeof e&&(this.clickHandler_=e);this.imageElement_=null};Blockly.utils.object.inherits(Blockly.FieldImage,Blockly.Field);Blockly.FieldImage.prototype.DEFAULT_VALUE=\"\";Blockly.FieldImage.fromJson=function(a){return new Blockly.FieldImage(a.src,a.width,a.height,void 0,void 0,void 0,a)};\nBlockly.FieldImage.Y_PADDING=1;Blockly.FieldImage.prototype.EDITABLE=!1;Blockly.FieldImage.prototype.isDirty_=!1;Blockly.FieldImage.prototype.configure_=function(a){Blockly.FieldImage.superClass_.configure_.call(this,a);this.flipRtl_=!!a.flipRtl;this.altText_=Blockly.utils.replaceMessageReferences(a.alt)||\"\"};\nBlockly.FieldImage.prototype.initView=function(){this.imageElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{height:this.imageHeight_+\"px\",width:this.size_.width+\"px\",alt:this.altText_},this.fieldGroup_);this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",this.value_);this.clickHandler_&&(this.imageElement_.style.cursor=\"pointer\")};Blockly.FieldImage.prototype.updateSize_=function(){};\nBlockly.FieldImage.prototype.doClassValidation_=function(a){return\"string\"!=typeof a?null:a};Blockly.FieldImage.prototype.doValueUpdate_=function(a){this.value_=a;this.imageElement_&&this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\"xlink:href\",String(this.value_))};Blockly.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_};Blockly.FieldImage.prototype.setAlt=function(a){a!=this.altText_&&(this.altText_=a||\"\",this.imageElement_&&this.imageElement_.setAttribute(\"alt\",this.altText_))};\nBlockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)};Blockly.FieldImage.prototype.setOnClickHandler=function(a){this.clickHandler_=a};Blockly.FieldImage.prototype.getText_=function(){return this.altText_};Blockly.fieldRegistry.register(\"field_image\",Blockly.FieldImage);Blockly.FieldMultilineInput=function(a,b,c){Blockly.FieldMultilineInput.superClass_.constructor.call(this,a,b,c);this.textGroup_=null};Blockly.utils.object.inherits(Blockly.FieldMultilineInput,Blockly.FieldTextInput);Blockly.FieldMultilineInput.fromJson=function(a){var b=Blockly.utils.replaceMessageReferences(a.text);return new Blockly.FieldMultilineInput(b,void 0,a)};Blockly.FieldMultilineInput.prototype.toXml=function(a){a.textContent=this.getValue().replace(/\\n/g,\"&#10;\");return a};\nBlockly.FieldMultilineInput.prototype.fromXml=function(a){this.setValue(a.textContent.replace(/&#10;/g,\"\\n\"))};Blockly.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_();this.textGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":\"blocklyEditableText\"},this.fieldGroup_)};\nBlockly.FieldMultilineInput.prototype.getDisplayText_=function(){var a=this.value_;if(!a)return Blockly.Field.NBSP;var b=a.split(\"\\n\");a=\"\";for(var c=0;c<b.length;c++){var d=b[c];d.length>this.maxDisplayLength&&(d=d.substring(0,this.maxDisplayLength-4)+\"...\");d=d.replace(/\\s/g,Blockly.Field.NBSP);a+=d;c!==b.length-1&&(a+=\"\\n\")}this.sourceBlock_.RTL&&(a+=\"\\u200f\");return a};\nBlockly.FieldMultilineInput.prototype.render_=function(){for(var a;a=this.textGroup_.firstChild;)this.textGroup_.removeChild(a);a=this.getDisplayText_().split(\"\\n\");for(var b=0,c=0;c<a.length;c++){var d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{\"class\":\"blocklyText blocklyMultilineText\",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:b+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},\nthis.textGroup_).appendChild(document.createTextNode(a[c]));b+=d}this.updateSize_();this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),a=this.htmlInput_,this.isTextValid_?(Blockly.utils.dom.removeClass(a,\"blocklyInvalidInput\"),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(a,\"blocklyInvalidInput\"),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.INVALID,!0)))};\nBlockly.FieldMultilineInput.prototype.updateSize_=function(){for(var a=this.textGroup_.childNodes,b=0,c=0,d=0;d<a.length;d++){var e=Blockly.utils.dom.getTextWidth(a[d]);e>b&&(b=e);c+=this.getConstants().FIELD_TEXT_HEIGHT+(0<d?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}this.borderRect_&&(c+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,b+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute(\"width\",b),this.borderRect_.setAttribute(\"height\",c));this.size_.width=\nb;this.size_.height=c;this.positionBorderRect_()};\nBlockly.FieldMultilineInput.prototype.widgetCreate_=function(){var a=Blockly.WidgetDiv.DIV,b=this.workspace_.getScale(),c=document.createElement(\"textarea\");c.className=\"blocklyHtmlInput blocklyHtmlTextAreaInput\";c.setAttribute(\"spellcheck\",this.spellcheck_);var d=this.getConstants().FIELD_TEXT_FONTSIZE*b+\"pt\";a.style.fontSize=d;c.style.fontSize=d;c.style.borderRadius=Blockly.FieldTextInput.BORDERRADIUS*b+\"px\";d=this.getConstants().FIELD_BORDER_RECT_X_PADDING*b;var e=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*\nb/2;c.style.padding=e+\"px \"+d+\"px \"+e+\"px \"+d+\"px\";d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;c.style.lineHeight=d*b+\"px\";a.appendChild(c);c.value=c.defaultValue=this.getEditorText_(this.value_);c.untypedDefaultValue_=this.value_;c.oldValue_=null;Blockly.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();this.bindInputEvents_(c);return c};\nBlockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(a){a.keyCode!==Blockly.utils.KeyCodes.ENTER&&Blockly.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,a)};Blockly.Css.register(\".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}\".split(\",\"));Blockly.fieldRegistry.register(\"field_multilinetext\",Blockly.FieldMultilineInput);Blockly.FieldNumber=function(a,b,c,d,e,f){this.min_=-Infinity;this.max_=Infinity;this.precision_=0;this.decimalPlaces_=null;Blockly.FieldNumber.superClass_.constructor.call(this,a,e,f);f||this.setConstraints(b,c,d)};Blockly.utils.object.inherits(Blockly.FieldNumber,Blockly.FieldTextInput);Blockly.FieldNumber.prototype.DEFAULT_VALUE=0;Blockly.FieldNumber.fromJson=function(a){return new Blockly.FieldNumber(a.value,void 0,void 0,void 0,void 0,a)};Blockly.FieldNumber.prototype.SERIALIZABLE=!0;\nBlockly.FieldNumber.prototype.configure_=function(a){Blockly.FieldNumber.superClass_.configure_.call(this,a);this.setMinInternal_(a.min);this.setMaxInternal_(a.max);this.setPrecisionInternal_(a.precision)};Blockly.FieldNumber.prototype.setConstraints=function(a,b,c){this.setMinInternal_(a);this.setMaxInternal_(b);this.setPrecisionInternal_(c);this.setValue(this.getValue())};Blockly.FieldNumber.prototype.setMin=function(a){this.setMinInternal_(a);this.setValue(this.getValue())};\nBlockly.FieldNumber.prototype.setMinInternal_=function(a){null==a?this.min_=-Infinity:(a=Number(a),isNaN(a)||(this.min_=a))};Blockly.FieldNumber.prototype.getMin=function(){return this.min_};Blockly.FieldNumber.prototype.setMax=function(a){this.setMaxInternal_(a);this.setValue(this.getValue())};Blockly.FieldNumber.prototype.setMaxInternal_=function(a){null==a?this.max_=Infinity:(a=Number(a),isNaN(a)||(this.max_=a))};Blockly.FieldNumber.prototype.getMax=function(){return this.max_};\nBlockly.FieldNumber.prototype.setPrecision=function(a){this.setPrecisionInternal_(a);this.setValue(this.getValue())};Blockly.FieldNumber.prototype.setPrecisionInternal_=function(a){null==a?this.precision_=0:(a=Number(a),isNaN(a)||(this.precision_=a));var b=this.precision_.toLocaleString(\"en-US\",{maximumFractionDigits:20}),c=b.indexOf(\".\");this.decimalPlaces_=-1==c?a?0:null:b.length-c-1};Blockly.FieldNumber.prototype.getPrecision=function(){return this.precision_};\nBlockly.FieldNumber.prototype.doClassValidation_=function(a){if(null===a)return null;a=String(a);a=a.replace(/O/ig,\"0\");a=a.replace(/,/g,\"\");a=a.replace(/infinity/i,\"Infinity\");a=Number(a||0);if(isNaN(a))return null;a=Math.min(Math.max(a,this.min_),this.max_);this.precision_&&isFinite(a)&&(a=Math.round(a/this.precision_)*this.precision_);null!=this.decimalPlaces_&&(a=Number(a.toFixed(this.decimalPlaces_)));return a};\nBlockly.FieldNumber.prototype.widgetCreate_=function(){var a=Blockly.FieldNumber.superClass_.widgetCreate_.call(this);-Infinity<this.min_&&Blockly.utils.aria.setState(a,Blockly.utils.aria.State.VALUEMIN,this.min_);Infinity>this.max_&&Blockly.utils.aria.setState(a,Blockly.utils.aria.State.VALUEMAX,this.max_);return a};Blockly.fieldRegistry.register(\"field_number\",Blockly.FieldNumber);Blockly.FieldVariable=function(a,b,c,d,e){this.menuGenerator_=Blockly.FieldVariable.dropdownCreate;this.defaultVariableName=a||\"\";this.size_=new Blockly.utils.Size(0,0);e&&this.configure_(e);b&&this.setValidator(b);e||this.setTypes_(c,d)};Blockly.utils.object.inherits(Blockly.FieldVariable,Blockly.FieldDropdown);Blockly.FieldVariable.fromJson=function(a){var b=Blockly.utils.replaceMessageReferences(a.variable);return new Blockly.FieldVariable(b,void 0,void 0,void 0,a)};\nBlockly.FieldVariable.prototype.SERIALIZABLE=!0;Blockly.FieldVariable.prototype.configure_=function(a){Blockly.FieldVariable.superClass_.configure_.call(this,a);this.setTypes_(a.variableTypes,a.defaultType)};Blockly.FieldVariable.prototype.initModel=function(){if(!this.variable_){var a=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(a.getId())}};\nBlockly.FieldVariable.prototype.shouldAddBorderRect_=function(){return Blockly.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||\"variables_get\"!=this.sourceBlock_.type)};\nBlockly.FieldVariable.prototype.fromXml=function(a){var b=a.getAttribute(\"id\"),c=a.textContent,d=a.getAttribute(\"variabletype\")||a.getAttribute(\"variableType\")||\"\";b=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,b,c,d);if(null!=d&&d!==b.type)throw Error(\"Serialized variable type with id '\"+b.getId()+\"' had type \"+b.type+\", and does not match variable field that references it: \"+Blockly.Xml.domToText(a)+\".\");this.setValue(b.getId())};\nBlockly.FieldVariable.prototype.toXml=function(a){this.initModel();a.id=this.variable_.getId();a.textContent=this.variable_.name;this.variable_.type&&a.setAttribute(\"variabletype\",this.variable_.type);return a};Blockly.FieldVariable.prototype.setSourceBlock=function(a){if(a.isShadow())throw Error(\"Variable fields are not allowed to exist on shadow blocks.\");Blockly.FieldVariable.superClass_.setSourceBlock.call(this,a)};\nBlockly.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null};Blockly.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:\"\"};Blockly.FieldVariable.prototype.getVariable=function(){return this.variable_};Blockly.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null};\nBlockly.FieldVariable.prototype.doClassValidation_=function(a){if(null===a)return null;var b=Blockly.Variables.getVariable(this.sourceBlock_.workspace,a);if(!b)return console.warn(\"Variable id doesn't point to a real variable! ID was \"+a),null;b=b.type;return this.typeIsAllowed_(b)?a:(console.warn(\"Variable type doesn't match this field!  Type was \"+b),null)};\nBlockly.FieldVariable.prototype.doValueUpdate_=function(a){this.variable_=Blockly.Variables.getVariable(this.sourceBlock_.workspace,a);Blockly.FieldVariable.superClass_.doValueUpdate_.call(this,a)};Blockly.FieldVariable.prototype.typeIsAllowed_=function(a){var b=this.getVariableTypes_();if(!b)return!0;for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1};\nBlockly.FieldVariable.prototype.getVariableTypes_=function(){var a=this.variableTypes;if(null===a&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();a=a||[\"\"];if(0==a.length)throw a=this.getText(),Error(\"'variableTypes' of field variable \"+a+\" was an empty list\");return a};\nBlockly.FieldVariable.prototype.setTypes_=function(a,b){b=b||\"\";if(null==a||void 0==a)a=null;else if(Array.isArray(a)){for(var c=!1,d=0;d<a.length;d++)a[d]==b&&(c=!0);if(!c)throw Error(\"Invalid default type '\"+b+\"' in the definition of a FieldVariable\");}else throw Error(\"'variableTypes' was not an array in the definition of a FieldVariable\");this.defaultType_=b;this.variableTypes=a};Blockly.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()};\nBlockly.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error(\"Tried to call dropdownCreate on a variable field with no variable selected.\");var a=this.getText(),b=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var c=this.getVariableTypes_(),d=0;d<c.length;d++){var e=this.sourceBlock_.workspace.getVariablesOfType(c[d]);b=b.concat(e)}b.sort(Blockly.VariableModel.compareByName);c=[];for(d=0;d<b.length;d++)c[d]=[b[d].name,b[d].getId()];c.push([Blockly.Msg.RENAME_VARIABLE,Blockly.RENAME_VARIABLE_ID]);\nBlockly.Msg.DELETE_VARIABLE&&c.push([Blockly.Msg.DELETE_VARIABLE.replace(\"%1\",a),Blockly.DELETE_VARIABLE_ID]);return c};Blockly.FieldVariable.prototype.onItemSelected_=function(a,b){a=b.getValue();if(this.sourceBlock_&&this.sourceBlock_.workspace){if(a==Blockly.RENAME_VARIABLE_ID){Blockly.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);return}if(a==Blockly.DELETE_VARIABLE_ID){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(a)};\nBlockly.FieldVariable.prototype.referencesVariables=function(){return!0};Blockly.fieldRegistry.register(\"field_variable\",Blockly.FieldVariable);Blockly.utils.svgPaths={};Blockly.utils.svgPaths.point=function(a,b){return\" \"+a+\",\"+b+\" \"};Blockly.utils.svgPaths.curve=function(a,b){return\" \"+a+b.join(\"\")};Blockly.utils.svgPaths.moveTo=function(a,b){return\" M \"+a+\",\"+b+\" \"};Blockly.utils.svgPaths.moveBy=function(a,b){return\" m \"+a+\",\"+b+\" \"};Blockly.utils.svgPaths.lineTo=function(a,b){return\" l \"+a+\",\"+b+\" \"};Blockly.utils.svgPaths.line=function(a){return\" l\"+a.join(\"\")};Blockly.utils.svgPaths.lineOnAxis=function(a,b){return\" \"+a+\" \"+b+\" \"};\nBlockly.utils.svgPaths.arc=function(a,b,c,d){return a+\" \"+c+\" \"+c+\" \"+b+d};Blockly.blockRendering.ConstantProvider=function(){this.NO_PADDING=0;this.SMALL_PADDING=3;this.MEDIUM_PADDING=5;this.MEDIUM_LARGE_PADDING=8;this.LARGE_PADDING=10;this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING;this.TAB_HEIGHT=15;this.TAB_OFFSET_FROM_TOP=5;this.TAB_VERTICAL_OVERLAP=2.5;this.TAB_WIDTH=8;this.NOTCH_WIDTH=15;this.NOTCH_HEIGHT=4;this.MIN_BLOCK_WIDTH=12;this.EMPTY_BLOCK_SPACER_HEIGHT=16;this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT;this.CORNER_RADIUS=\n8;this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15;this.STATEMENT_BOTTOM_SPACER=0;this.STATEMENT_INPUT_PADDING_LEFT=20;this.BETWEEN_STATEMENT_PADDING_Y=4;this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING;this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING;this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.ADD_START_HATS=!1;this.START_HAT_HEIGHT=15;this.START_HAT_WIDTH=100;this.SPACER_DEFAULT_HEIGHT=15;this.MIN_BLOCK_HEIGHT=\n24;this.EMPTY_INLINE_INPUT_PADDING=14.5;this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11;this.EXTERNAL_VALUE_INPUT_PADDING=2;this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT;this.START_POINT=Blockly.utils.svgPaths.moveBy(0,0);this.JAGGED_TEETH_HEIGHT=12;this.JAGGED_TEETH_WIDTH=6;this.FIELD_TEXT_FONTSIZE=11;this.FIELD_TEXT_FONTWEIGHT=\"normal\";this.FIELD_TEXT_FONTFAMILY=\"sans-serif\";this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1;this.FIELD_BORDER_RECT_RADIUS=4;this.FIELD_BORDER_RECT_HEIGHT=\n16;this.FIELD_BORDER_RECT_X_PADDING=5;this.FIELD_BORDER_RECT_Y_PADDING=3;this.FIELD_BORDER_RECT_COLOUR=\"#fff\";this.FIELD_TEXT_BASELINE_CENTER=!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE;this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT;this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1;this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING;this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12;this.FIELD_DROPDOWN_SVG_ARROW_DATAURI=\n\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=\";\nthis.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1;this.FIELD_COLOUR_DEFAULT_WIDTH=26;this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT;this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3;this.randomIdentifier=String(Math.random()).substring(2);this.embossFilterId=\"\";this.embossFilter_=null;this.disabledPatternId=\"\";this.disabledPattern_=null;this.debugFilterId=\"\";this.cssNode_=this.debugFilter_=null;this.CURSOR_COLOUR=\"#cc0a0a\";this.MARKER_COLOUR=\"#4286f4\";this.CURSOR_WS_WIDTH=\n100;this.WS_CURSOR_HEIGHT=5;this.CURSOR_STACK_PADDING=10;this.CURSOR_BLOCK_PADDING=2;this.CURSOR_STROKE_WIDTH=4;this.FULL_BLOCK_FIELDS=!1;this.INSERTION_MARKER_COLOUR=\"#000000\";this.INSERTION_MARKER_OPACITY=.2;this.SHAPES={PUZZLE:1,NOTCH:2}};\nBlockly.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth();this.NOTCH=this.makeNotch();this.START_HAT=this.makeStartHat();this.PUZZLE_TAB=this.makePuzzleTab();this.INSIDE_CORNERS=this.makeInsideCorners();this.OUTSIDE_CORNERS=this.makeOutsideCorners()};Blockly.blockRendering.ConstantProvider.prototype.setTheme=function(a){this.blockStyles={};var b=a.blockStyles,c;for(c in b)this.blockStyles[c]=this.validatedBlockStyle_(b[c]);this.setDynamicProperties_(a)};\nBlockly.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(a){this.setFontConstants_(a);this.setComponentConstants_(a);this.ADD_START_HATS=null!=a.startHats?a.startHats:this.ADD_START_HATS};\nBlockly.blockRendering.ConstantProvider.prototype.setFontConstants_=function(a){this.FIELD_TEXT_FONTFAMILY=a.fontStyle&&void 0!=a.fontStyle.family?a.fontStyle.family:this.FIELD_TEXT_FONTFAMILY;this.FIELD_TEXT_FONTWEIGHT=a.fontStyle&&void 0!=a.fontStyle.weight?a.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT;this.FIELD_TEXT_FONTSIZE=a.fontStyle&&void 0!=a.fontStyle.size?a.fontStyle.size:this.FIELD_TEXT_FONTSIZE;a=Blockly.utils.dom.measureFontMetrics(\"Hg\",this.FIELD_TEXT_FONTSIZE+\"pt\",this.FIELD_TEXT_FONTWEIGHT,\nthis.FIELD_TEXT_FONTFAMILY);this.FIELD_TEXT_HEIGHT=a.height;this.FIELD_TEXT_BASELINE=a.baseline};\nBlockly.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(a){this.CURSOR_COLOUR=a.getComponentStyle(\"cursorColour\")||this.CURSOR_COLOUR;this.MARKER_COLOUR=a.getComponentStyle(\"markerColour\")||this.MARKER_COLOUR;this.INSERTION_MARKER_COLOUR=a.getComponentStyle(\"insertionMarkerColour\")||this.INSERTION_MARKER_COLOUR;this.INSERTION_MARKER_OPACITY=Number(a.getComponentStyle(\"insertionMarkerOpacity\"))||this.INSERTION_MARKER_OPACITY};\nBlockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(a){var b=\"auto_\"+a;this.blockStyles[b]||(this.blockStyles[b]=this.createBlockStyle_(a));return{style:this.blockStyles[b],name:b}};Blockly.blockRendering.ConstantProvider.prototype.getBlockStyle=function(a){return this.blockStyles[a||\"\"]||(a&&0==a.indexOf(\"auto_\")?this.getBlockStyleForColour(a.substring(5)).style:this.createBlockStyle_(\"#000000\"))};Blockly.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(a){return this.validatedBlockStyle_({colourPrimary:a})};\nBlockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(a){var b={};a&&Blockly.utils.object.mixin(b,a);a=Blockly.utils.parseBlockColour(b.colourPrimary||\"#000\");b.colourPrimary=a.hex;b.colourSecondary=b.colourSecondary?Blockly.utils.parseBlockColour(b.colourSecondary).hex:this.generateSecondaryColour_(b.colourPrimary);b.colourTertiary=b.colourTertiary?Blockly.utils.parseBlockColour(b.colourTertiary).hex:this.generateTertiaryColour_(b.colourPrimary);b.hat=b.hat||\"\";return b};\nBlockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(a){return Blockly.utils.colour.blend(\"#fff\",a,.6)||a};Blockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(a){return Blockly.utils.colour.blend(\"#fff\",a,.3)||a};\nBlockly.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&Blockly.utils.dom.removeNode(this.embossFilter_);this.disabledPattern_&&Blockly.utils.dom.removeNode(this.disabledPattern_);this.debugFilter_&&Blockly.utils.dom.removeNode(this.debugFilter_);this.cssNode_=null};\nBlockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var a=this.JAGGED_TEETH_HEIGHT,b=this.JAGGED_TEETH_WIDTH,c=Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(b,a/4),Blockly.utils.svgPaths.point(2*-b,a/2),Blockly.utils.svgPaths.point(b,a/4)]);return{height:a,width:b,path:c}};\nBlockly.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var a=this.START_HAT_HEIGHT,b=this.START_HAT_WIDTH,c=Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(30,-a),Blockly.utils.svgPaths.point(70,-a),Blockly.utils.svgPaths.point(b,0)]);return{height:a,width:b,path:c}};\nBlockly.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function a(f){f=f?-1:1;var g=-f,h=c/2,k=h+2.5,l=h+.5,m=Blockly.utils.svgPaths.point(-b,f*h);h=Blockly.utils.svgPaths.point(b,f*h);return Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(0,f*k),Blockly.utils.svgPaths.point(-b,g*l),m])+Blockly.utils.svgPaths.curve(\"s\",[Blockly.utils.svgPaths.point(b,2.5*g),h])}var b=this.TAB_WIDTH,c=this.TAB_HEIGHT,d=a(!0),e=a(!1);return{type:this.SHAPES.PUZZLE,width:b,height:c,\npathDown:e,pathUp:d}};Blockly.blockRendering.ConstantProvider.prototype.makeNotch=function(){function a(g){return Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(g*d,c),Blockly.utils.svgPaths.point(3*g,0),Blockly.utils.svgPaths.point(g*d,-c)])}var b=this.NOTCH_WIDTH,c=this.NOTCH_HEIGHT,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.SHAPES.NOTCH,width:b,height:c,pathLeft:e,pathRight:f}};\nBlockly.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var a=this.CORNER_RADIUS,b=Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a,Blockly.utils.svgPaths.point(-a,a)),c=Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a,Blockly.utils.svgPaths.point(a,a));return{width:a,height:a,pathTop:b,pathBottom:c}};\nBlockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var a=this.CORNER_RADIUS,b=Blockly.utils.svgPaths.moveBy(0,a)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(a,-a)),c=Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(a,a)),d=Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(-a,-a)),e=Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(-a,a));return{topLeft:b,topRight:c,bottomRight:e,bottomLeft:d,\nrightHeight:a}};Blockly.blockRendering.ConstantProvider.prototype.shapeFor=function(a){switch(a.type){case Blockly.INPUT_VALUE:case Blockly.OUTPUT_VALUE:return this.PUZZLE_TAB;case Blockly.PREVIOUS_STATEMENT:case Blockly.NEXT_STATEMENT:return this.NOTCH;default:throw Error(\"Unknown connection type\");}};\nBlockly.blockRendering.ConstantProvider.prototype.createDom=function(a,b,c){this.injectCSS_(b,c);a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},a);b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:\"blocklyEmbossFilter\"+this.randomIdentifier},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{\"in\":\"SourceAlpha\",stdDeviation:1,result:\"blur\"},b);c=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FESPECULARLIGHTING,{\"in\":\"blur\",surfaceScale:1,specularConstant:.5,\nspecularExponent:10,\"lighting-color\":\"white\",result:\"specOut\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEPOINTLIGHT,{x:-5E3,y:-1E4,z:2E4},c);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"specOut\",in2:\"SourceAlpha\",operator:\"in\",result:\"specOut\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"SourceGraphic\",in2:\"specOut\",operator:\"arithmetic\",k1:0,k2:1,k3:1,k4:0},b);this.embossFilterId=b.id;this.embossFilter_=b;b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATTERN,\n{id:\"blocklyDisabledPattern\"+this.randomIdentifier,patternUnits:\"userSpaceOnUse\",width:10,height:10},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:10,height:10,fill:\"#aaa\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{d:\"M 0 0 L 10 10 M 10 0 L 0 10\",stroke:\"#cc0\"},b);this.disabledPatternId=b.id;this.disabledPattern_=b;Blockly.blockRendering.Debug&&(a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:\"blocklyDebugFilter\"+this.randomIdentifier,height:\"160%\",\nwidth:\"180%\",y:\"-30%\",x:\"-40%\"},a),b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:\"outBlur\"},a),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:\"table\",tableValues:\"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\"},b),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{\"flood-color\":\"#ff0000\",\"flood-opacity\":.5,result:\"outColor\"},a),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"outColor\",in2:\"outBlur\",operator:\"in\",result:\"outGlow\"},\na),this.debugFilterId=a.id,this.debugFilter_=a)};Blockly.blockRendering.ConstantProvider.prototype.injectCSS_=function(a,b){b=this.getCSS_(b);a=\"blockly-renderer-style-\"+a;this.cssNode_=document.getElementById(a);var c=b.join(\"\\n\");this.cssNode_?this.cssNode_.firstChild.textContent=c:(b=document.createElement(\"style\"),b.id=a,a=document.createTextNode(c),b.appendChild(a),document.head.insertBefore(b,document.head.firstChild),this.cssNode_=b)};\nBlockly.blockRendering.ConstantProvider.prototype.getCSS_=function(a){return[a+\" .blocklyText, \",a+\" .blocklyFlyoutLabelText {\",\"font: \"+this.FIELD_TEXT_FONTWEIGHT+\" \"+this.FIELD_TEXT_FONTSIZE+\"pt \"+this.FIELD_TEXT_FONTFAMILY+\";\",\"}\",a+\" .blocklyText {\",\"fill: #fff;\",\"}\",a+\" .blocklyNonEditableText>rect,\",a+\" .blocklyEditableText>rect {\",\"fill: \"+this.FIELD_BORDER_RECT_COLOUR+\";\",\"fill-opacity: .6;\",\"stroke: none;\",\"}\",a+\" .blocklyNonEditableText>text,\",a+\" .blocklyEditableText>text {\",\"fill: #000;\",\n\"}\",a+\" .blocklyFlyoutLabelText {\",\"fill: #000;\",\"}\",a+\" .blocklyText.blocklyBubbleText {\",\"fill: #000;\",\"}\",a+\" .blocklyEditableText:not(.editing):hover>rect {\",\"stroke: #fff;\",\"stroke-width: 2;\",\"}\",a+\" .blocklyHtmlInput {\",\"font-family: \"+this.FIELD_TEXT_FONTFAMILY+\";\",\"font-weight: \"+this.FIELD_TEXT_FONTWEIGHT+\";\",\"}\",a+\" .blocklySelected>.blocklyPath {\",\"stroke: #fc3;\",\"stroke-width: 3px;\",\"}\",a+\" .blocklyHighlightedConnectionPath {\",\"stroke: #fc3;\",\"}\",a+\" .blocklyReplaceable .blocklyPath {\",\n\"fill-opacity: .5;\",\"}\",a+\" .blocklyReplaceable .blocklyPathLight,\",a+\" .blocklyReplaceable .blocklyPathDark {\",\"display: none;\",\"}\",a+\" .blocklyInsertionMarker>.blocklyPath {\",\"fill-opacity: \"+this.INSERTION_MARKER_OPACITY+\";\",\"stroke: none;\",\"}\"]};Blockly.blockRendering.MarkerSvg=function(a,b,c){this.workspace_=a;this.marker_=c;this.parent_=null;this.constants_=b;this.currentMarkerSvg=null;a=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=c.colour||a};Blockly.blockRendering.MarkerSvg.CURSOR_CLASS=\"blocklyCursor\";Blockly.blockRendering.MarkerSvg.MARKER_CLASS=\"blocklyMarker\";Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75;Blockly.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_};\nBlockly.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_};Blockly.blockRendering.MarkerSvg.prototype.isCursor=function(){return\"cursor\"==this.marker_.type};Blockly.blockRendering.MarkerSvg.prototype.createDom=function(){var a=this.isCursor()?Blockly.blockRendering.MarkerSvg.CURSOR_CLASS:Blockly.blockRendering.MarkerSvg.MARKER_CLASS;this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{\"class\":a},null);this.createDomInternal_();return this.svgGroup_};\nBlockly.blockRendering.MarkerSvg.prototype.setParent_=function(a){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),a.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),a.setMarkerSvg(this.getSvgRoot()));this.parent_=a};\nBlockly.blockRendering.MarkerSvg.prototype.draw=function(a,b){if(b){this.constants_=this.workspace_.getRenderer().getConstants();var c=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||c;this.applyColour_(b);this.showAtLocation_(b);this.fireMarkerEvent_(a,b);a=this.currentMarkerSvg.childNodes[0];void 0!==a&&a.beginElement&&a.beginElement()}else this.hide()};\nBlockly.blockRendering.MarkerSvg.prototype.showAtLocation_=function(a){var b=a.getLocation();a.getType()==Blockly.ASTNode.types.BLOCK?this.showWithBlock_(a):a.getType()==Blockly.ASTNode.types.OUTPUT?this.showWithOutput_(a):b.type==Blockly.INPUT_VALUE?this.showWithInput_(a):b.type==Blockly.NEXT_STATEMENT?this.showWithNext_(a):a.getType()==Blockly.ASTNode.types.PREVIOUS?this.showWithPrevious_(a):a.getType()==Blockly.ASTNode.types.FIELD?this.showWithField_(a):a.getType()==Blockly.ASTNode.types.WORKSPACE?\nthis.showWithCoordinates_(a):a.getType()==Blockly.ASTNode.types.STACK&&this.showWithStack_(a)};\nBlockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(a){a=a.getSourceBlock();var b=a.width,c=a.height,d=c*Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,e=this.constants_.CURSOR_BLOCK_PADDING;if(a.previousConnection){var f=this.constants_.shapeFor(a.previousConnection);this.positionPrevious_(b,e,d,f)}else a.outputConnection?(f=this.constants_.shapeFor(a.outputConnection),this.positionOutput_(b,c,f)):this.positionBlock_(b,e,d);this.setParent_(a);this.showCurrent_()};\nBlockly.blockRendering.MarkerSvg.prototype.showWithBlock_=function(a){this.showWithBlockPrevOutput_(a)};Blockly.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(a){this.showWithBlockPrevOutput_(a)};Blockly.blockRendering.MarkerSvg.prototype.showWithOutput_=function(a){this.showWithBlockPrevOutput_(a)};\nBlockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(a){var b=a.getWsCoordinate();a=b.x;b=b.y;this.workspace_.RTL&&(a-=this.constants_.CURSOR_WS_WIDTH);this.positionLine_(a,b,this.constants_.CURSOR_WS_WIDTH);this.setParent_(this.workspace_);this.showCurrent_()};Blockly.blockRendering.MarkerSvg.prototype.showWithField_=function(a){a=a.getLocation();var b=a.getSize().width,c=a.getSize().height;this.positionRect_(0,0,b,c);this.setParent_(a);this.showCurrent_()};\nBlockly.blockRendering.MarkerSvg.prototype.showWithInput_=function(a){a=a.getLocation();var b=a.getSourceBlock();this.positionInput_(a);this.setParent_(b);this.showCurrent_()};Blockly.blockRendering.MarkerSvg.prototype.showWithNext_=function(a){var b=a.getLocation();a=b.getSourceBlock();var c=0;b=b.getOffsetInBlock().y;var d=a.getHeightWidth().width;this.workspace_.RTL&&(c=-d);this.positionLine_(c,b,d);this.setParent_(a);this.showCurrent_()};\nBlockly.blockRendering.MarkerSvg.prototype.showWithStack_=function(a){a=a.getLocation();var b=a.getHeightWidth(),c=b.width+this.constants_.CURSOR_STACK_PADDING;b=b.height+this.constants_.CURSOR_STACK_PADDING;var d=-this.constants_.CURSOR_STACK_PADDING/2,e=-this.constants_.CURSOR_STACK_PADDING/2,f=d;this.workspace_.RTL&&(f=-(c+d));this.positionRect_(f,e,c,b);this.setParent_(a);this.showCurrent_()};\nBlockly.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide();this.currentMarkerSvg.style.display=\"\"};Blockly.blockRendering.MarkerSvg.prototype.positionBlock_=function(a,b,c){a=Blockly.utils.svgPaths.moveBy(-b,c)+Blockly.utils.svgPaths.lineOnAxis(\"V\",-b)+Blockly.utils.svgPaths.lineOnAxis(\"H\",a+2*b)+Blockly.utils.svgPaths.lineOnAxis(\"V\",c);this.markerBlock_.setAttribute(\"d\",a);this.workspace_.RTL&&this.flipRtl_(this.markerBlock_);this.currentMarkerSvg=this.markerBlock_};\nBlockly.blockRendering.MarkerSvg.prototype.positionInput_=function(a){var b=a.getOffsetInBlock().x,c=a.getOffsetInBlock().y;a=Blockly.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(a).pathDown;this.markerInput_.setAttribute(\"d\",a);this.markerInput_.setAttribute(\"transform\",\"translate(\"+b+\",\"+c+\")\"+(this.workspace_.RTL?\" scale(-1 1)\":\"\"));this.currentMarkerSvg=this.markerInput_};\nBlockly.blockRendering.MarkerSvg.prototype.positionLine_=function(a,b,c){this.markerSvgLine_.setAttribute(\"x\",a);this.markerSvgLine_.setAttribute(\"y\",b);this.markerSvgLine_.setAttribute(\"width\",c);this.currentMarkerSvg=this.markerSvgLine_};\nBlockly.blockRendering.MarkerSvg.prototype.positionOutput_=function(a,b,c){a=Blockly.utils.svgPaths.moveBy(a,0)+Blockly.utils.svgPaths.lineOnAxis(\"h\",-(a-c.width))+Blockly.utils.svgPaths.lineOnAxis(\"v\",this.constants_.TAB_OFFSET_FROM_TOP)+c.pathDown+Blockly.utils.svgPaths.lineOnAxis(\"V\",b)+Blockly.utils.svgPaths.lineOnAxis(\"H\",a);this.markerBlock_.setAttribute(\"d\",a);this.workspace_.RTL&&this.flipRtl_(this.markerBlock_);this.currentMarkerSvg=this.markerBlock_};\nBlockly.blockRendering.MarkerSvg.prototype.positionPrevious_=function(a,b,c,d){a=Blockly.utils.svgPaths.moveBy(-b,c)+Blockly.utils.svgPaths.lineOnAxis(\"V\",-b)+Blockly.utils.svgPaths.lineOnAxis(\"H\",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+Blockly.utils.svgPaths.lineOnAxis(\"H\",a+2*b)+Blockly.utils.svgPaths.lineOnAxis(\"V\",c);this.markerBlock_.setAttribute(\"d\",a);this.workspace_.RTL&&this.flipRtl_(this.markerBlock_);this.currentMarkerSvg=this.markerBlock_};\nBlockly.blockRendering.MarkerSvg.prototype.positionRect_=function(a,b,c,d){this.markerSvgRect_.setAttribute(\"x\",a);this.markerSvgRect_.setAttribute(\"y\",b);this.markerSvgRect_.setAttribute(\"width\",c);this.markerSvgRect_.setAttribute(\"height\",d);this.currentMarkerSvg=this.markerSvgRect_};Blockly.blockRendering.MarkerSvg.prototype.flipRtl_=function(a){a.setAttribute(\"transform\",\"scale(-1 1)\")};\nBlockly.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display=\"none\";this.markerSvgRect_.style.display=\"none\";this.markerInput_.style.display=\"none\";this.markerBlock_.style.display=\"none\"};Blockly.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(a,b){var c=b.getSourceBlock(),d=this.isCursor()?\"cursorMove\":\"markerMove\";a=new Blockly.Events.Ui(c,d,a,b);b.getType()==Blockly.ASTNode.types.WORKSPACE&&(a.workspaceId=b.getLocation().id);Blockly.Events.fire(a)};\nBlockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:\"XML\",attributeName:\"fill\",dur:\"1s\",values:this.colour_+\";transparent;transparent;\",repeatCount:\"indefinite\"}};\nBlockly.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){this.markerSvg_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_);this.markerSvgLine_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:\"display: none\"},this.markerSvg_);this.markerSvgRect_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,\n{\"class\":\"blocklyVerticalMarker\",rx:10,ry:10,style:\"display: none\"},this.markerSvg_);this.markerInput_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{transform:\"\",style:\"display: none\"},this.markerSvg_);this.markerBlock_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{transform:\"\",style:\"display: none\",fill:\"none\",\"stroke-width\":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_);if(this.isCursor()){var a=this.getBlinkProperties_();Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,\na,this.markerSvgLine_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,a,this.markerInput_);a.attributeName=\"stroke\";Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,a,this.markerBlock_)}return this.markerSvg_};\nBlockly.blockRendering.MarkerSvg.prototype.applyColour_=function(a){this.markerSvgLine_.setAttribute(\"fill\",this.colour_);this.markerSvgRect_.setAttribute(\"stroke\",this.colour_);this.markerInput_.setAttribute(\"fill\",this.colour_);this.markerBlock_.setAttribute(\"stroke\",this.colour_);this.isCursor()&&(a=this.colour_+\";transparent;transparent;\",this.markerSvgLine_.firstChild.setAttribute(\"values\",a),this.markerInput_.firstChild.setAttribute(\"values\",a),this.markerBlock_.firstChild.setAttribute(\"values\",\na))};Blockly.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_)};Blockly.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608};\nBlockly.blockRendering.Types.LEFT_CORNER=Blockly.blockRendering.Types.LEFT_SQUARE_CORNER|Blockly.blockRendering.Types.LEFT_ROUND_CORNER;Blockly.blockRendering.Types.RIGHT_CORNER=Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER|Blockly.blockRendering.Types.RIGHT_ROUND_CORNER;Blockly.blockRendering.Types.nextTypeValue_=16777216;\nBlockly.blockRendering.Types.getType=function(a){Object.prototype.hasOwnProperty.call(Blockly.blockRendering.Types,a)||(Blockly.blockRendering.Types[a]=Blockly.blockRendering.Types.nextTypeValue_,Blockly.blockRendering.Types.nextTypeValue_<<=1);return Blockly.blockRendering.Types[a]};Blockly.blockRendering.Types.isField=function(a){return a.type&Blockly.blockRendering.Types.FIELD};Blockly.blockRendering.Types.isHat=function(a){return a.type&Blockly.blockRendering.Types.HAT};\nBlockly.blockRendering.Types.isIcon=function(a){return a.type&Blockly.blockRendering.Types.ICON};Blockly.blockRendering.Types.isSpacer=function(a){return a.type&Blockly.blockRendering.Types.SPACER};Blockly.blockRendering.Types.isInRowSpacer=function(a){return a.type&Blockly.blockRendering.Types.IN_ROW_SPACER};Blockly.blockRendering.Types.isInput=function(a){return a.type&Blockly.blockRendering.Types.INPUT};Blockly.blockRendering.Types.isExternalInput=function(a){return a.type&Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT};\nBlockly.blockRendering.Types.isInlineInput=function(a){return a.type&Blockly.blockRendering.Types.INLINE_INPUT};Blockly.blockRendering.Types.isStatementInput=function(a){return a.type&Blockly.blockRendering.Types.STATEMENT_INPUT};Blockly.blockRendering.Types.isPreviousConnection=function(a){return a.type&Blockly.blockRendering.Types.PREVIOUS_CONNECTION};Blockly.blockRendering.Types.isNextConnection=function(a){return a.type&Blockly.blockRendering.Types.NEXT_CONNECTION};\nBlockly.blockRendering.Types.isPreviousOrNextConnection=function(a){return a.type&(Blockly.blockRendering.Types.PREVIOUS_CONNECTION|Blockly.blockRendering.Types.NEXT_CONNECTION)};Blockly.blockRendering.Types.isLeftRoundedCorner=function(a){return a.type&Blockly.blockRendering.Types.LEFT_ROUND_CORNER};Blockly.blockRendering.Types.isRightRoundedCorner=function(a){return a.type&Blockly.blockRendering.Types.RIGHT_ROUND_CORNER};\nBlockly.blockRendering.Types.isLeftSquareCorner=function(a){return a.type&Blockly.blockRendering.Types.LEFT_SQUARE_CORNER};Blockly.blockRendering.Types.isRightSquareCorner=function(a){return a.type&Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER};Blockly.blockRendering.Types.isCorner=function(a){return a.type&Blockly.blockRendering.Types.CORNER};Blockly.blockRendering.Types.isJaggedEdge=function(a){return a.type&Blockly.blockRendering.Types.JAGGED_EDGE};\nBlockly.blockRendering.Types.isRow=function(a){return a.type&Blockly.blockRendering.Types.ROW};Blockly.blockRendering.Types.isBetweenRowSpacer=function(a){return a.type&Blockly.blockRendering.Types.BETWEEN_ROW_SPACER};Blockly.blockRendering.Types.isTopRow=function(a){return a.type&Blockly.blockRendering.Types.TOP_ROW};Blockly.blockRendering.Types.isBottomRow=function(a){return a.type&Blockly.blockRendering.Types.BOTTOM_ROW};\nBlockly.blockRendering.Types.isTopOrBottomRow=function(a){return a.type&(Blockly.blockRendering.Types.TOP_ROW|Blockly.blockRendering.Types.BOTTOM_ROW)};Blockly.blockRendering.Types.isInputRow=function(a){return a.type&Blockly.blockRendering.Types.INPUT_ROW};Blockly.blockRendering.Measurable=function(a){this.height=this.width=0;this.type=Blockly.blockRendering.Types.NONE;this.centerline=this.xPos=0;this.constants_=a;this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT};Blockly.blockRendering.Connection=function(a,b){Blockly.blockRendering.Connection.superClass_.constructor.call(this,a);this.connectionModel=b;this.shape=this.constants_.shapeFor(b);this.isDynamicShape=!!this.shape.isDynamic;this.type|=Blockly.blockRendering.Types.CONNECTION};Blockly.utils.object.inherits(Blockly.blockRendering.Connection,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.OutputConnection=function(a,b){Blockly.blockRendering.OutputConnection.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.OUTPUT_CONNECTION;this.height=this.isDynamicShape?0:this.shape.height;this.startX=this.width=this.isDynamicShape?0:this.shape.width;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.connectionOffsetX=0};Blockly.utils.object.inherits(Blockly.blockRendering.OutputConnection,Blockly.blockRendering.Connection);\nBlockly.blockRendering.PreviousConnection=function(a,b){Blockly.blockRendering.PreviousConnection.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.PREVIOUS_CONNECTION;this.height=this.shape.height;this.width=this.shape.width};Blockly.utils.object.inherits(Blockly.blockRendering.PreviousConnection,Blockly.blockRendering.Connection);\nBlockly.blockRendering.NextConnection=function(a,b){Blockly.blockRendering.NextConnection.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.NEXT_CONNECTION;this.height=this.shape.height;this.width=this.shape.width};Blockly.utils.object.inherits(Blockly.blockRendering.NextConnection,Blockly.blockRendering.Connection);Blockly.blockRendering.InputConnection=function(a,b){Blockly.blockRendering.InputConnection.superClass_.constructor.call(this,a,b.connection);this.type|=Blockly.blockRendering.Types.INPUT;this.input=b;this.align=b.align;(this.connectedBlock=b.connection&&b.connection.targetBlock()?b.connection.targetBlock():null)?(a=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=a.width,this.connectedBlockHeight=a.height):this.connectedBlockHeight=this.connectedBlockWidth=0;this.connectionOffsetY=this.connectionOffsetX=\n0};Blockly.utils.object.inherits(Blockly.blockRendering.InputConnection,Blockly.blockRendering.Connection);\nBlockly.blockRendering.InlineInput=function(a,b){Blockly.blockRendering.InlineInput.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.INLINE_INPUT;this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING);this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height;this.connectionWidth=this.isDynamicShape?\nthis.shape.width(this.height):this.shape.width;this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1));this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP;this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0};Blockly.utils.object.inherits(Blockly.blockRendering.InlineInput,Blockly.blockRendering.InputConnection);\nBlockly.blockRendering.StatementInput=function(a,b){Blockly.blockRendering.StatementInput.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.STATEMENT_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT;this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width};Blockly.utils.object.inherits(Blockly.blockRendering.StatementInput,Blockly.blockRendering.InputConnection);\nBlockly.blockRendering.ExternalValueInput=function(a,b){Blockly.blockRendering.ExternalValueInput.superClass_.constructor.call(this,a,b);this.type|=Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height;this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.connectionHeight=this.shape.height;\nthis.connectionWidth=this.shape.width};Blockly.utils.object.inherits(Blockly.blockRendering.ExternalValueInput,Blockly.blockRendering.InputConnection);Blockly.blockRendering.Icon=function(a,b){Blockly.blockRendering.Icon.superClass_.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=Blockly.blockRendering.Types.ICON;a=b.getCorrectedSize();this.height=a.height;this.width=a.width};Blockly.utils.object.inherits(Blockly.blockRendering.Icon,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.JaggedEdge=function(a){Blockly.blockRendering.JaggedEdge.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.JAGGED_EDGE;this.height=this.constants_.JAGGED_TEETH.height;this.width=this.constants_.JAGGED_TEETH.width};Blockly.utils.object.inherits(Blockly.blockRendering.JaggedEdge,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.Field=function(a,b,c){Blockly.blockRendering.Field.superClass_.constructor.call(this,a);this.field=b;this.isEditable=b.EDITABLE;this.flipRtl=b.getFlipRtl();this.type|=Blockly.blockRendering.Types.FIELD;a=this.field.getSize();this.height=a.height;this.width=a.width;this.parentInput=c};Blockly.utils.object.inherits(Blockly.blockRendering.Field,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.Hat=function(a){Blockly.blockRendering.Hat.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.HAT;this.height=this.constants_.START_HAT.height;this.width=this.constants_.START_HAT.width;this.ascenderHeight=this.height};Blockly.utils.object.inherits(Blockly.blockRendering.Hat,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.SquareCorner=function(a,b){Blockly.blockRendering.SquareCorner.superClass_.constructor.call(this,a);this.type=(b&&\"left\"!=b?Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER:Blockly.blockRendering.Types.LEFT_SQUARE_CORNER)|Blockly.blockRendering.Types.CORNER;this.width=this.height=this.constants_.NO_PADDING};Blockly.utils.object.inherits(Blockly.blockRendering.SquareCorner,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.RoundCorner=function(a,b){Blockly.blockRendering.RoundCorner.superClass_.constructor.call(this,a);this.type=(b&&\"left\"!=b?Blockly.blockRendering.Types.RIGHT_ROUND_CORNER:Blockly.blockRendering.Types.LEFT_ROUND_CORNER)|Blockly.blockRendering.Types.CORNER;this.width=this.constants_.CORNER_RADIUS;this.height=this.constants_.CORNER_RADIUS/2};Blockly.utils.object.inherits(Blockly.blockRendering.RoundCorner,Blockly.blockRendering.Measurable);\nBlockly.blockRendering.InRowSpacer=function(a,b){Blockly.blockRendering.InRowSpacer.superClass_.constructor.call(this,a);this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.IN_ROW_SPACER;this.width=b;this.height=this.constants_.SPACER_DEFAULT_HEIGHT};Blockly.utils.object.inherits(Blockly.blockRendering.InRowSpacer,Blockly.blockRendering.Measurable);Blockly.blockRendering.Row=function(a){this.type=Blockly.blockRendering.Types.ROW;this.elements=[];this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0;this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1;this.constants_=a;this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT;this.align=null};\nBlockly.blockRendering.Row.prototype.measure=function(){throw Error(\"Unexpected attempt to measure a base Row.\");};Blockly.blockRendering.Row.prototype.getLastInput=function(){for(var a=this.elements.length-1,b;b=this.elements[a];a--)if(Blockly.blockRendering.Types.isInput(b))return b;return null};Blockly.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0};Blockly.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0};\nBlockly.blockRendering.Row.prototype.getFirstSpacer=function(){for(var a=0,b;b=this.elements[a];a++)if(Blockly.blockRendering.Types.isSpacer(b))return b;return null};Blockly.blockRendering.Row.prototype.getLastSpacer=function(){for(var a=this.elements.length-1,b;b=this.elements[a];a--)if(Blockly.blockRendering.Types.isSpacer(b))return b;return null};\nBlockly.blockRendering.TopRow=function(a){Blockly.blockRendering.TopRow.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.TOP_ROW;this.ascenderHeight=this.capline=0;this.hasPreviousConnection=!1;this.connection=null};Blockly.utils.object.inherits(Blockly.blockRendering.TopRow,Blockly.blockRendering.Row);\nBlockly.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(a){var b=(a.hat?\"cap\"===a.hat:this.constants_.ADD_START_HATS)&&!a.outputConnection&&!a.previousConnection,c=a.getPreviousBlock();return!!a.outputConnection||b||(c?c.getNextBlock()==a:!1)};Blockly.blockRendering.TopRow.prototype.hasRightSquareCorner=function(a){return!0};\nBlockly.blockRendering.TopRow.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isHat(e)?c=Math.max(c,e.ascenderHeight):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.capline=this.ascenderHeight=c;this.widthWithConnectedBlocks=this.width};Blockly.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1};\nBlockly.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1};Blockly.blockRendering.BottomRow=function(a){Blockly.blockRendering.BottomRow.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.BOTTOM_ROW;this.hasNextConnection=!1;this.connection=null;this.baseline=this.descenderHeight=0};Blockly.utils.object.inherits(Blockly.blockRendering.BottomRow,Blockly.blockRendering.Row);\nBlockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(a){return!!a.outputConnection||!!a.getNextBlock()};Blockly.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(a){return!0};\nBlockly.blockRendering.BottomRow.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isNextConnection(e)?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.descenderHeight=c;this.widthWithConnectedBlocks=this.width};Blockly.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1};\nBlockly.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1};Blockly.blockRendering.SpacerRow=function(a,b,c){Blockly.blockRendering.SpacerRow.superClass_.constructor.call(this,a);this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.BETWEEN_ROW_SPACER;this.width=c;this.height=b;this.followsStatement=!1;this.widthWithConnectedBlocks=0;this.elements=[new Blockly.blockRendering.InRowSpacer(this.constants_,c)]};\nBlockly.utils.object.inherits(Blockly.blockRendering.SpacerRow,Blockly.blockRendering.Row);Blockly.blockRendering.SpacerRow.prototype.measure=function(){};Blockly.blockRendering.InputRow=function(a){Blockly.blockRendering.InputRow.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.INPUT_ROW;this.connectedBlockWidths=0};Blockly.utils.object.inherits(Blockly.blockRendering.InputRow,Blockly.blockRendering.Row);\nBlockly.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,Blockly.blockRendering.Types.isInput(c)&&(Blockly.blockRendering.Types.isStatementInput(c)?a+=c.connectedBlockWidth:Blockly.blockRendering.Types.isExternalInput(c)&&0!=c.connectedBlockWidth&&(a+=c.connectedBlockWidth-c.connectionWidth)),Blockly.blockRendering.Types.isSpacer(c)||(this.height=Math.max(this.height,c.height));this.connectedBlockWidths=\na;this.widthWithConnectedBlocks=this.width+a};Blockly.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement};Blockly.blockRendering.RenderInfo=function(a,b){this.block_=b;this.renderer_=a;this.constants_=this.renderer_.getConstants();this.outputConnection=b.outputConnection?new Blockly.blockRendering.OutputConnection(this.constants_,b.outputConnection):null;this.isInline=b.getInputsInline()&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.isInsertionMarker=b.isInsertionMarker();this.RTL=b.RTL;this.statementEdge=this.width=this.widthWithChildren=this.height=0;this.rows=[];this.inputRows=[];this.hiddenIcons=\n[];this.topRow=new Blockly.blockRendering.TopRow(this.constants_);this.bottomRow=new Blockly.blockRendering.BottomRow(this.constants_);this.startY=this.startX=0};Blockly.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_};Blockly.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_();this.addElemSpacing_();this.addRowSpacing_();this.computeBounds_();this.alignRowElements_();this.finalize_()};\nBlockly.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_();this.rows.push(this.topRow);var a=new Blockly.blockRendering.InputRow(this.constants_);this.inputRows.push(a);var b=this.block_.getIcons();if(b.length)for(var c=0,d;d=b[c];c++){var e=new Blockly.blockRendering.Icon(this.constants_,d);this.isCollapsed&&d.collapseHidden?this.hiddenIcons.push(e):a.elements.push(e)}d=null;for(c=0;b=this.block_.inputList[c];c++)if(b.isVisible()){this.shouldStartNewRow_(b,d)&&(this.rows.push(a),\na=new Blockly.blockRendering.InputRow(this.constants_),this.inputRows.push(a));for(d=0;e=b.fieldRow[d];d++)a.elements.push(new Blockly.blockRendering.Field(this.constants_,e,b));this.addInput_(b,a);d=b}this.isCollapsed&&(a.hasJaggedEdge=!0,a.elements.push(new Blockly.blockRendering.JaggedEdge(this.constants_)));(a.elements.length||a.hasDummyInput)&&this.rows.push(a);this.populateBottomRow_();this.rows.push(this.bottomRow)};\nBlockly.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var a=!!this.block_.previousConnection,b=(this.block_.hat?\"cap\"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!a;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_));b?(a=new Blockly.blockRendering.Hat(this.constants_),this.topRow.elements.push(a),\nthis.topRow.capline=a.ascenderHeight):a&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Blockly.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection));this.block_.inputList.length&&this.block_.inputList[0].type==Blockly.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT;this.topRow.hasRightSquareCorner(this.block_)?\nthis.topRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_,\"right\")):this.topRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_,\"right\"))};\nBlockly.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection;this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==Blockly.NEXT_STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT;this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_)):\nthis.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_));this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Blockly.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection));this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_,\"right\")):this.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_,\n\"right\"))};\nBlockly.blockRendering.RenderInfo.prototype.addInput_=function(a,b){this.isInline&&a.type==Blockly.INPUT_VALUE?(b.elements.push(new Blockly.blockRendering.InlineInput(this.constants_,a)),b.hasInlineInput=!0):a.type==Blockly.NEXT_STATEMENT?(b.elements.push(new Blockly.blockRendering.StatementInput(this.constants_,a)),b.hasStatement=!0):a.type==Blockly.INPUT_VALUE?(b.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,a)),b.hasExternalInput=!0):a.type==Blockly.DUMMY_INPUT&&(b.minHeight=\nMath.max(b.minHeight,a.getSourceBlock()&&a.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),b.hasDummyInput=!0);null==b.align&&(b.align=a.align)};Blockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(a,b){return b?a.type==Blockly.NEXT_STATEMENT||b.type==Blockly.NEXT_STATEMENT?!0:a.type==Blockly.INPUT_VALUE||a.type==Blockly.DUMMY_INPUT?!this.isInline:!1:!1};\nBlockly.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.startsWithElemSpacer()&&b.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++){b.elements.push(c[d]);var e=this.getInRowSpacing_(c[d],c[d+1]);b.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,e))}b.elements.push(c[c.length-1]);b.endsWithElemSpacer()&&\nb.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(c[c.length-1],null)))}}};\nBlockly.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(a,b){if(!a&&b&&Blockly.blockRendering.Types.isStatementInput(b))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(a&&Blockly.blockRendering.Types.isInput(a)&&!b){if(Blockly.blockRendering.Types.isExternalInput(a))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(a))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(a))return this.constants_.NO_PADDING}return a&&\nBlockly.blockRendering.Types.isLeftSquareCorner(a)&&b&&(Blockly.blockRendering.Types.isPreviousConnection(b)||Blockly.blockRendering.Types.isNextConnection(b))?b.notchOffset:a&&Blockly.blockRendering.Types.isLeftRoundedCorner(a)&&b&&(Blockly.blockRendering.Types.isPreviousConnection(b)||Blockly.blockRendering.Types.isNextConnection(b))?b.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING};\nBlockly.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var a=0,b=0,c=0,d=0,e;e=this.rows[d];d++){e.measure();b=Math.max(b,e.width);if(e.hasStatement){var f=e.getLastInput();a=Math.max(a,e.width-f.width)}c=Math.max(c,e.widthWithConnectedBlocks)}this.statementEdge=a;this.width=b;for(d=0;e=this.rows[d];d++)e.hasStatement&&(e.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(b,c);this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,\nthis.widthWithChildren+=this.outputConnection.width)};Blockly.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var a=0,b;b=this.rows[a];a++)if(b.hasStatement)this.alignStatementRow_(b);else{var c=b.width;c=this.getDesiredRowWidth_(b)-c;0<c&&this.addAlignmentPadding_(b,c);Blockly.blockRendering.Types.isTopOrBottomRow(b)&&(b.widthWithConnectedBlocks=b.width)}};Blockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(a){return this.width-this.startX};\nBlockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(a,b){var c=a.getFirstSpacer(),d=a.getLastSpacer();if(a.hasExternalInput||a.hasStatement)a.widthWithConnectedBlocks+=b;a.align==Blockly.ALIGN_LEFT?d.width+=b:a.align==Blockly.ALIGN_CENTRE?(c.width+=b/2,d.width+=b/2):a.align==Blockly.ALIGN_RIGHT?c.width+=b:d.width+=b;a.width+=b};\nBlockly.blockRendering.RenderInfo.prototype.alignStatementRow_=function(a){var b=a.getLastInput(),c=a.width-b.width,d=this.statementEdge;c=d-c;0<c&&this.addAlignmentPadding_(a,c);c=a.width;d=this.getDesiredRowWidth_(a);b.width+=d-c;b.height=Math.max(b.height,a.height);a.width+=d-c;a.widthWithConnectedBlocks=Math.max(a.width,this.statementEdge+a.connectedBlockWidths)};\nBlockly.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var a=this.rows;this.rows=[];for(var b=0;b<a.length;b++)this.rows.push(a[b]),b!=a.length-1&&this.rows.push(this.makeSpacerRow_(a[b],a[b+1]))};Blockly.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(a,b){var c=this.getSpacerRowHeight_(a,b),d=this.getSpacerRowWidth_(a,b);c=new Blockly.blockRendering.SpacerRow(this.constants_,c,d);a.hasStatement&&(c.followsStatement=!0);b.hasStatement&&(c.precedesStatement=!0);return c};\nBlockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(a,b){return this.width-this.startX};Blockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(a,b){return this.constants_.MEDIUM_PADDING};\nBlockly.blockRendering.RenderInfo.prototype.getElemCenterline_=function(a,b){return Blockly.blockRendering.Types.isSpacer(b)?a.yPos+b.height/2:Blockly.blockRendering.Types.isBottomRow(a)?(a=a.yPos+a.height-a.descenderHeight,Blockly.blockRendering.Types.isNextConnection(b)?a+b.height/2:a-b.height/2):Blockly.blockRendering.Types.isTopRow(a)?Blockly.blockRendering.Types.isHat(b)?a.capline-b.height/2:a.capline+b.height/2:a.yPos+a.height/2};\nBlockly.blockRendering.RenderInfo.prototype.recordElemPositions_=function(a){for(var b=a.xPos,c=0,d;d=a.elements[c];c++)Blockly.blockRendering.Types.isSpacer(d)&&(d.height=a.height),d.xPos=b,d.centerline=this.getElemCenterline_(a,d),b+=d.width};\nBlockly.blockRendering.RenderInfo.prototype.finalize_=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.yPos=b,d.xPos=this.startX,b+=d.height,a=Math.max(a,d.widthWithConnectedBlocks),this.recordElemPositions_(d);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(a=Math.max(a,this.block_.nextConnection.targetBlock().getHeightWidth().width));this.widthWithChildren=a+this.startX;this.height=b;this.startY=this.topRow.capline;this.bottomRow.baseline=b-this.bottomRow.descenderHeight};Blockly.blockRendering.Drawer=function(a,b){this.block_=a;this.info_=b;this.topLeft_=a.getRelativeToSurfaceXY();this.inlinePath_=this.outlinePath_=\"\";this.constants_=b.getRenderer().getConstants()};\nBlockly.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_();this.drawOutline_();this.drawInternals_();this.block_.pathObject.setPath(this.outlinePath_+\"\\n\"+this.inlinePath_);this.info_.RTL&&this.block_.pathObject.flipRTL();Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_);this.recordSizeOnBlock_()};Blockly.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height;this.block_.width=this.info_.widthWithChildren};\nBlockly.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var a=0,b;b=this.info_.hiddenIcons[a];a++)b.icon.iconGroup_.setAttribute(\"display\",\"none\")};Blockly.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var a=1;a<this.info_.rows.length-1;a++){var b=this.info_.rows[a];b.hasJaggedEdge?this.drawJaggedEdge_(b):b.hasStatement?this.drawStatementInput_(b):b.hasExternalInput?this.drawValueInput_(b):this.drawRightSideRow_(b)}this.drawBottom_();this.drawLeft_()};\nBlockly.blockRendering.Drawer.prototype.drawTop_=function(){var a=this.info_.topRow,b=a.elements;this.positionPreviousConnection_();this.outlinePath_+=Blockly.utils.svgPaths.moveBy(a.xPos,this.info_.startY);for(var c=0,d;d=b[c];c++)Blockly.blockRendering.Types.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Blockly.blockRendering.Types.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Blockly.blockRendering.Types.isPreviousConnection(d)?\nthis.outlinePath_+=d.shape.pathLeft:Blockly.blockRendering.Types.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:Blockly.blockRendering.Types.isSpacer(d)&&(this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"h\",d.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"v\",a.height)};Blockly.blockRendering.Drawer.prototype.drawJaggedEdge_=function(a){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Blockly.utils.svgPaths.lineOnAxis(\"v\",a.height-this.constants_.JAGGED_TEETH.height)};\nBlockly.blockRendering.Drawer.prototype.drawValueInput_=function(a){var b=a.getLastInput();this.positionExternalValueConnection_(a);var c=\"function\"==typeof b.shape.pathDown?b.shape.pathDown(b.height):b.shape.pathDown;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",b.xPos+b.width)+c+Blockly.utils.svgPaths.lineOnAxis(\"v\",a.height-b.connectionHeight)};\nBlockly.blockRendering.Drawer.prototype.drawStatementInput_=function(a){var b=a.getLastInput(),c=b.xPos+b.notchOffset+b.shape.width;b=b.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis(\"h\",-(b.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=a.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",c)+b+Blockly.utils.svgPaths.lineOnAxis(\"v\",d)+this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis(\"H\",\na.xPos+a.width);this.positionStatementInputConnection_(a)};Blockly.blockRendering.Drawer.prototype.drawRightSideRow_=function(a){this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.yPos+a.height)};\nBlockly.blockRendering.Drawer.prototype.drawBottom_=function(){var a=this.info_.bottomRow,b=a.elements;this.positionNextConnection_();for(var c=0,d=\"\",e=b.length-1,f;f=b[e];e--)Blockly.blockRendering.Types.isNextConnection(f)?d+=f.shape.pathRight:Blockly.blockRendering.Types.isLeftSquareCorner(f)?d+=Blockly.utils.svgPaths.lineOnAxis(\"H\",a.xPos):Blockly.blockRendering.Types.isLeftRoundedCorner(f)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Blockly.blockRendering.Types.isRightRoundedCorner(f)?(d+=\nthis.constants_.OUTSIDE_CORNERS.bottomRight,c=this.constants_.OUTSIDE_CORNERS.rightHeight):Blockly.blockRendering.Types.isSpacer(f)&&(d+=Blockly.utils.svgPaths.lineOnAxis(\"h\",-1*f.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.baseline-c);this.outlinePath_+=d};\nBlockly.blockRendering.Drawer.prototype.drawLeft_=function(){var a=this.info_.outputConnection;this.positionOutputConnection_();if(a){var b=a.connectionOffsetY+a.height;a=\"function\"==typeof a.shape.pathUp?a.shape.pathUp(a.height):a.shape.pathUp;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",b)+a}this.outlinePath_+=\"z\"};\nBlockly.blockRendering.Drawer.prototype.drawInternals_=function(){for(var a=0,b;b=this.info_.rows[a];a++)for(var c=0,d;d=b.elements[c];c++)Blockly.blockRendering.Types.isInlineInput(d)?this.drawInlineInput_(d):(Blockly.blockRendering.Types.isIcon(d)||Blockly.blockRendering.Types.isField(d))&&this.layoutField_(d)};\nBlockly.blockRendering.Drawer.prototype.layoutField_=function(a){if(Blockly.blockRendering.Types.isField(a))var b=a.field.getSvgRoot();else Blockly.blockRendering.Types.isIcon(a)&&(b=a.icon.iconGroup_);var c=a.centerline-a.height/2,d=a.xPos,e=\"\";this.info_.RTL&&(d=-(d+a.width),a.flipRtl&&(d+=a.width,e=\"scale(-1 1)\"));Blockly.blockRendering.Types.isIcon(a)?(b.setAttribute(\"display\",\"block\"),b.setAttribute(\"transform\",\"translate(\"+d+\",\"+c+\")\"),a.icon.computeIconLocation()):b.setAttribute(\"transform\",\n\"translate(\"+d+\",\"+c+\")\"+e);this.info_.isInsertionMarker&&b.setAttribute(\"display\",\"none\")};\nBlockly.blockRendering.Drawer.prototype.drawInlineInput_=function(a){var b=a.width,c=a.height,d=a.connectionOffsetY,e=a.connectionHeight+d;this.inlinePath_+=Blockly.utils.svgPaths.moveTo(a.xPos+a.connectionWidth,a.centerline-c/2)+Blockly.utils.svgPaths.lineOnAxis(\"v\",d)+a.shape.pathDown+Blockly.utils.svgPaths.lineOnAxis(\"v\",c-e)+Blockly.utils.svgPaths.lineOnAxis(\"h\",b-a.connectionWidth)+Blockly.utils.svgPaths.lineOnAxis(\"v\",-c)+\"z\";this.positionInlineInputConnection_(a)};\nBlockly.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(a){var b=a.centerline-a.height/2;if(a.connectionModel){var c=a.xPos+a.connectionWidth+a.connectionOffsetX;this.info_.RTL&&(c*=-1);a.connectionModel.setOffsetInBlock(c,b+a.connectionOffsetY)}};\nBlockly.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(a){var b=a.getLastInput();if(b.connectionModel){var c=a.xPos+a.statementEdge+b.notchOffset;this.info_.RTL&&(c*=-1);b.connectionModel.setOffsetInBlock(c,a.yPos)}};Blockly.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(a){var b=a.getLastInput();if(b.connectionModel){var c=a.xPos+a.width;this.info_.RTL&&(c*=-1);b.connectionModel.setOffsetInBlock(c,a.yPos)}};\nBlockly.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var a=this.info_.topRow;if(a.connection){var b=a.xPos+a.notchOffset;a.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-b:b,0)}};Blockly.blockRendering.Drawer.prototype.positionNextConnection_=function(){var a=this.info_.bottomRow;if(a.connection){var b=a.connection,c=b.xPos;b.connectionModel.setOffsetInBlock(this.info_.RTL?-c:c,a.baseline)}};\nBlockly.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var a=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-a:a,this.info_.outputConnection.connectionOffsetY)}};Blockly.blockRendering.PathObject=function(a,b,c){this.constants=c;this.svgRoot=a;this.svgPath=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyPath\"},this.svgRoot);this.style=b;this.markerSvg=this.cursorSvg=null};Blockly.blockRendering.PathObject.prototype.setPath=function(a){this.svgPath.setAttribute(\"d\",a)};Blockly.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute(\"transform\",\"scale(-1 1)\")};\nBlockly.blockRendering.PathObject.prototype.setCursorSvg=function(a){a?(this.svgRoot.appendChild(a),this.cursorSvg=a):this.cursorSvg=null};Blockly.blockRendering.PathObject.prototype.setMarkerSvg=function(a){a?(this.cursorSvg?this.svgRoot.insertBefore(a,this.cursorSvg):this.svgRoot.appendChild(a),this.markerSvg=a):this.markerSvg=null};\nBlockly.blockRendering.PathObject.prototype.applyColour=function(a){this.svgPath.setAttribute(\"stroke\",this.style.colourTertiary);this.svgPath.setAttribute(\"fill\",this.style.colourPrimary);this.updateShadow_(a.isShadow());this.updateDisabled_(!a.isEnabled()||a.getInheritedDisabled())};Blockly.blockRendering.PathObject.prototype.setStyle=function(a){this.style=a};\nBlockly.blockRendering.PathObject.prototype.setClass_=function(a,b){b?Blockly.utils.dom.addClass(this.svgRoot,a):Blockly.utils.dom.removeClass(this.svgRoot,a)};Blockly.blockRendering.PathObject.prototype.updateHighlighted=function(a){a?this.svgPath.setAttribute(\"filter\",\"url(#\"+this.constants.embossFilterId+\")\"):this.svgPath.setAttribute(\"filter\",\"none\")};\nBlockly.blockRendering.PathObject.prototype.updateShadow_=function(a){a&&(this.svgPath.setAttribute(\"stroke\",\"none\"),this.svgPath.setAttribute(\"fill\",this.style.colourSecondary))};Blockly.blockRendering.PathObject.prototype.updateDisabled_=function(a){this.setClass_(\"blocklyDisabled\",a);a&&this.svgPath.setAttribute(\"fill\",\"url(#\"+this.constants.disabledPatternId+\")\")};Blockly.blockRendering.PathObject.prototype.updateSelected=function(a){this.setClass_(\"blocklySelected\",a)};\nBlockly.blockRendering.PathObject.prototype.updateDraggingDelete=function(a){this.setClass_(\"blocklyDraggingDelete\",a)};Blockly.blockRendering.PathObject.prototype.updateInsertionMarker=function(a){this.setClass_(\"blocklyInsertionMarker\",a)};Blockly.blockRendering.PathObject.prototype.updateMovable=function(a){this.setClass_(\"blocklyDraggable\",a)};Blockly.blockRendering.PathObject.prototype.updateReplacementFade=function(a){this.setClass_(\"blocklyReplaceable\",a)};\nBlockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(a,b){};Blockly.blockRendering.Renderer=function(a){this.name=a;this.overrides=this.constants_=null};Blockly.blockRendering.Renderer.prototype.getClassName=function(){return this.name+\"-renderer\"};Blockly.blockRendering.Renderer.prototype.init=function(a,b){this.constants_=this.makeConstants_();b&&(this.overrides=b,Blockly.utils.object.mixin(this.constants_,b));this.constants_.setTheme(a);this.constants_.init()};\nBlockly.blockRendering.Renderer.prototype.createDom=function(a,b){this.constants_.createDom(a,this.name+\"-\"+b.name,\".\"+this.getClassName()+\".\"+b.getClassName())};Blockly.blockRendering.Renderer.prototype.refreshDom=function(a,b){var c=this.getConstants();c.dispose();this.constants_=this.makeConstants_();this.overrides&&Blockly.utils.object.mixin(this.constants_,this.overrides);this.constants_.randomIdentifier=c.randomIdentifier;this.constants_.setTheme(b);this.constants_.init();this.createDom(a,b)};\nBlockly.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()};Blockly.blockRendering.Renderer.prototype.makeConstants_=function(){return new Blockly.blockRendering.ConstantProvider};Blockly.blockRendering.Renderer.prototype.makeRenderInfo_=function(a){return new Blockly.blockRendering.RenderInfo(this,a)};Blockly.blockRendering.Renderer.prototype.makeDrawer_=function(a,b){return new Blockly.blockRendering.Drawer(a,b)};\nBlockly.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!Blockly.blockRendering.Debug)throw Error(\"Missing require for Blockly.blockRendering.Debug\");return new Blockly.blockRendering.Debug(this.getConstants())};Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer=function(a,b){return new Blockly.blockRendering.MarkerSvg(a,this.getConstants(),b)};Blockly.blockRendering.Renderer.prototype.makePathObject=function(a,b){return new Blockly.blockRendering.PathObject(a,b,this.constants_)};\nBlockly.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_};Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection=function(a){return!0};Blockly.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(a,b,c){c==Blockly.OUTPUT_VALUE?(c=b.outputConnection,a=Blockly.Connection.lastConnectionInRow(a,b)):(c=b.previousConnection,a=a.lastConnectionInStack());return a?c.getConnectionChecker().canConnect(a,c,!1):!1};\nBlockly.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(a,b,c){return b.type==Blockly.OUTPUT_VALUE||b.type==Blockly.PREVIOUS_STATEMENT?!a.isConnected()||this.orphanCanConnectAtEnd(c,a.targetBlock(),b.type)?Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER};\nBlockly.blockRendering.Renderer.prototype.render=function(a){Blockly.blockRendering.useDebugger&&!a.renderingDebugger&&(a.renderingDebugger=this.makeDebugger_());var b=this.makeRenderInfo_(a);b.measure();this.makeDrawer_(a,b).draw()};Blockly.geras={};Blockly.geras.ConstantProvider=function(){Blockly.geras.ConstantProvider.superClass_.constructor.call(this);this.FIELD_TEXT_BASELINE_CENTER=!1;this.DARK_PATH_OFFSET=1;this.MAX_BOTTOM_WIDTH=30};Blockly.utils.object.inherits(Blockly.geras.ConstantProvider,Blockly.blockRendering.ConstantProvider);\nBlockly.geras.ConstantProvider.prototype.getCSS_=function(a){return Blockly.geras.ConstantProvider.superClass_.getCSS_.call(this,a).concat([a+\" .blocklyInsertionMarker>.blocklyPathLight,\",a+\" .blocklyInsertionMarker>.blocklyPathDark {\",\"fill-opacity: \"+this.INSERTION_MARKER_OPACITY+\";\",\"stroke: none;\",\"}\"])};Blockly.geras.Highlighter=function(a){this.info_=a;this.inlineSteps_=this.steps_=\"\";this.RTL_=this.info_.RTL;a=a.getRenderer();this.constants_=a.getConstants();this.highlightConstants_=a.getHighlightConstants();this.highlightOffset_=this.highlightConstants_.OFFSET;this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER;this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER;this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB;this.notchPaths_=this.highlightConstants_.NOTCH;this.startPaths_=\nthis.highlightConstants_.START_HAT;this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH};Blockly.geras.Highlighter.prototype.getPath=function(){return this.steps_+\"\\n\"+this.inlineSteps_};\nBlockly.geras.Highlighter.prototype.drawTopCorner=function(a){this.steps_+=Blockly.utils.svgPaths.moveBy(a.xPos,this.info_.startY);for(var b=0,c;c=a.elements[b];b++)Blockly.blockRendering.Types.isLeftSquareCorner(c)?this.steps_+=this.highlightConstants_.START_POINT:Blockly.blockRendering.Types.isLeftRoundedCorner(c)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Blockly.blockRendering.Types.isPreviousConnection(c)?this.steps_+=this.notchPaths_.pathLeft:Blockly.blockRendering.Types.isHat(c)?\nthis.steps_+=this.startPaths_.path(this.RTL_):Blockly.blockRendering.Types.isSpacer(c)&&0!=c.width&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",c.xPos+c.width-this.highlightOffset_));this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",a.xPos+a.width-this.highlightOffset_)};Blockly.geras.Highlighter.prototype.drawJaggedEdge_=function(a){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Blockly.utils.svgPaths.lineOnAxis(\"v\",a.height-this.jaggedTeethPaths_.height-this.highlightOffset_))};\nBlockly.geras.Highlighter.prototype.drawValueInput=function(a){var b=a.getLastInput();if(this.RTL_){var c=a.height-b.connectionHeight;this.steps_+=Blockly.utils.svgPaths.moveTo(b.xPos+b.width-this.highlightOffset_,a.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis(\"v\",c)}else this.steps_+=Blockly.utils.svgPaths.moveTo(b.xPos+b.width,a.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)};\nBlockly.geras.Highlighter.prototype.drawStatementInput=function(a){var b=a.getLastInput();if(this.RTL_){var c=a.height-2*this.insideCornerPaths_.height;this.steps_+=Blockly.utils.svgPaths.moveTo(b.xPos,a.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis(\"v\",c)+this.insideCornerPaths_.pathBottom(this.RTL_)+Blockly.utils.svgPaths.lineTo(a.width-b.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Blockly.utils.svgPaths.moveTo(b.xPos,a.yPos+a.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+\nBlockly.utils.svgPaths.lineTo(a.width-b.xPos-this.insideCornerPaths_.width,0)};Blockly.geras.Highlighter.prototype.drawRightSideRow=function(a){var b=a.xPos+a.width-this.highlightOffset_;a.followsStatement&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",b));this.RTL_&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",b),a.height>this.highlightOffset_&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.yPos+a.height-this.highlightOffset_)))};\nBlockly.geras.Highlighter.prototype.drawBottomRow=function(a){if(this.RTL_)this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.baseline-this.highlightOffset_);else{var b=this.info_.bottomRow.elements[0];Blockly.blockRendering.Types.isLeftSquareCorner(b)?this.steps_+=Blockly.utils.svgPaths.moveTo(a.xPos+this.highlightOffset_,a.baseline-this.highlightOffset_):Blockly.blockRendering.Types.isLeftRoundedCorner(b)&&(this.steps_+=Blockly.utils.svgPaths.moveTo(a.xPos,a.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}};\nBlockly.geras.Highlighter.prototype.drawLeft=function(){var a=this.info_.outputConnection;a&&(a=a.connectionOffsetY+a.height,this.RTL_?this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX,a):(this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_));this.RTL_||(a=this.info_.topRow,Blockly.blockRendering.Types.isLeftRoundedCorner(a.elements[0])?\nthis.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",this.outsideCornerPaths_.height):this.steps_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.capline+this.highlightOffset_))};\nBlockly.geras.Highlighter.prototype.drawInlineInput=function(a){var b=this.highlightOffset_,c=a.xPos+a.connectionWidth,d=a.centerline-a.height/2,e=a.width-a.connectionWidth,f=d+b;this.RTL_?(d=a.connectionOffsetY-b,a=a.height-(a.connectionOffsetY+a.connectionHeight)+b,this.inlineSteps_+=Blockly.utils.svgPaths.moveTo(c-b,f)+Blockly.utils.svgPaths.lineOnAxis(\"v\",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis(\"v\",a)+Blockly.utils.svgPaths.lineOnAxis(\"h\",e)):this.inlineSteps_+=\nBlockly.utils.svgPaths.moveTo(a.xPos+a.width+b,f)+Blockly.utils.svgPaths.lineOnAxis(\"v\",a.height)+Blockly.utils.svgPaths.lineOnAxis(\"h\",-e)+Blockly.utils.svgPaths.moveTo(c,d+a.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)};Blockly.geras.InlineInput=function(a,b){Blockly.geras.InlineInput.superClass_.constructor.call(this,a,b);this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)};Blockly.utils.object.inherits(Blockly.geras.InlineInput,Blockly.blockRendering.InlineInput);Blockly.geras.StatementInput=function(a,b){Blockly.geras.StatementInput.superClass_.constructor.call(this,a,b);this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)};\nBlockly.utils.object.inherits(Blockly.geras.StatementInput,Blockly.blockRendering.StatementInput);Blockly.geras.RenderInfo=function(a,b){Blockly.geras.RenderInfo.superClass_.constructor.call(this,a,b)};Blockly.utils.object.inherits(Blockly.geras.RenderInfo,Blockly.blockRendering.RenderInfo);Blockly.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_};\nBlockly.geras.RenderInfo.prototype.populateBottomRow_=function(){Blockly.geras.RenderInfo.superClass_.populateBottomRow_.call(this);this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==Blockly.NEXT_STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)};\nBlockly.geras.RenderInfo.prototype.addInput_=function(a,b){this.isInline&&a.type==Blockly.INPUT_VALUE?(b.elements.push(new Blockly.geras.InlineInput(this.constants_,a)),b.hasInlineInput=!0):a.type==Blockly.NEXT_STATEMENT?(b.elements.push(new Blockly.geras.StatementInput(this.constants_,a)),b.hasStatement=!0):a.type==Blockly.INPUT_VALUE?(b.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,a)),b.hasExternalInput=!0):a.type==Blockly.DUMMY_INPUT&&(b.minHeight=Math.max(b.minHeight,\nthis.constants_.DUMMY_INPUT_MIN_HEIGHT),b.hasDummyInput=!0);this.isInline||null!=b.align||(b.align=a.align)};\nBlockly.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.hasExternalInput&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.startsWithElemSpacer()&&c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.getInRowSpacing_(d[e],d[e+1]);c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,f))}c.elements.push(d[d.length-\n1]);c.endsWithElemSpacer()&&(f=this.getInRowSpacing_(d[d.length-1],null),a&&c.hasDummyInput&&(f+=this.constants_.TAB_WIDTH),c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,f)))}}};\nBlockly.geras.RenderInfo.prototype.getInRowSpacing_=function(a,b){if(!a)return b&&Blockly.blockRendering.Types.isField(b)&&b.isEditable?this.constants_.MEDIUM_PADDING:b&&Blockly.blockRendering.Types.isInlineInput(b)?this.constants_.MEDIUM_LARGE_PADDING:b&&Blockly.blockRendering.Types.isStatementInput(b)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Blockly.blockRendering.Types.isInput(a)&&(!b||Blockly.blockRendering.Types.isStatementInput(b)))return Blockly.blockRendering.Types.isField(a)&&\na.isEditable?this.constants_.MEDIUM_PADDING:Blockly.blockRendering.Types.isIcon(a)?2*this.constants_.LARGE_PADDING+1:Blockly.blockRendering.Types.isHat(a)?this.constants_.NO_PADDING:Blockly.blockRendering.Types.isPreviousOrNextConnection(a)?this.constants_.LARGE_PADDING:Blockly.blockRendering.Types.isLeftRoundedCorner(a)?this.constants_.MIN_BLOCK_WIDTH:Blockly.blockRendering.Types.isJaggedEdge(a)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInput(a)&&\n!b){if(Blockly.blockRendering.Types.isExternalInput(a))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(a))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(a))return this.constants_.NO_PADDING}if(!Blockly.blockRendering.Types.isInput(a)&&b&&Blockly.blockRendering.Types.isInput(b)){if(Blockly.blockRendering.Types.isField(a)&&a.isEditable){if(Blockly.blockRendering.Types.isInlineInput(b)||Blockly.blockRendering.Types.isExternalInput(b))return this.constants_.SMALL_PADDING}else{if(Blockly.blockRendering.Types.isInlineInput(b)||\nBlockly.blockRendering.Types.isExternalInput(b))return this.constants_.MEDIUM_LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(b))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Blockly.blockRendering.Types.isIcon(a)&&b&&!Blockly.blockRendering.Types.isInput(b))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInlineInput(a)&&b&&Blockly.blockRendering.Types.isField(b))return b.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;\nif(Blockly.blockRendering.Types.isLeftSquareCorner(a)&&b){if(Blockly.blockRendering.Types.isHat(b))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isPreviousConnection(b))return b.notchOffset;if(Blockly.blockRendering.Types.isNextConnection(b))return a=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,b.notchOffset+a}if(Blockly.blockRendering.Types.isLeftRoundedCorner(a)&&b){if(Blockly.blockRendering.Types.isPreviousConnection(b))return b.notchOffset-this.constants_.CORNER_RADIUS;\nif(Blockly.blockRendering.Types.isNextConnection(b))return a=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,b.notchOffset-this.constants_.CORNER_RADIUS+a}return Blockly.blockRendering.Types.isField(a)&&b&&Blockly.blockRendering.Types.isField(b)&&a.isEditable==b.isEditable||b&&Blockly.blockRendering.Types.isJaggedEdge(b)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};\nBlockly.geras.RenderInfo.prototype.getSpacerRowHeight_=function(a,b){return Blockly.blockRendering.Types.isTopRow(a)&&Blockly.blockRendering.Types.isBottomRow(b)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Blockly.blockRendering.Types.isTopRow(a)||Blockly.blockRendering.Types.isBottomRow(b)?this.constants_.NO_PADDING:a.hasExternalInput&&b.hasExternalInput?this.constants_.LARGE_PADDING:!a.hasStatement&&b.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:a.hasStatement&&b.hasStatement||!a.hasStatement&&\nb.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};\nBlockly.geras.RenderInfo.prototype.getElemCenterline_=function(a,b){if(Blockly.blockRendering.Types.isSpacer(b))return a.yPos+b.height/2;if(Blockly.blockRendering.Types.isBottomRow(a))return a=a.yPos+a.height-a.descenderHeight,Blockly.blockRendering.Types.isNextConnection(b)?a+b.height/2:a-b.height/2;if(Blockly.blockRendering.Types.isTopRow(a))return Blockly.blockRendering.Types.isHat(b)?a.capline-b.height/2:a.capline+b.height/2;var c=a.yPos;Blockly.blockRendering.Types.isField(b)||Blockly.blockRendering.Types.isIcon(b)?\n(c+=b.height/2,(a.hasInlineInput||a.hasStatement)&&b.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=a.height&&(c+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):c=Blockly.blockRendering.Types.isInlineInput(b)?c+b.height/2:c+a.height/2;return c};\nBlockly.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.nextRightEdge=a,Blockly.blockRendering.Types.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),b&&b.hasStatement&&d.width<b.width?d.nextRightEdge=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.hasStatement?a=this.getDesiredRowWidth_(d):Blockly.blockRendering.Types.isSpacer(d)?d.width=Math.max(a,d.nextRightEdge):(a=Math.max(a,d.nextRightEdge)-\nd.width,0<a&&this.addAlignmentPadding_(d,a),a=d.width)}else Blockly.geras.RenderInfo.superClass_.alignRowElements_.call(this)};Blockly.geras.RenderInfo.prototype.getDesiredRowWidth_=function(a){return this.isInline&&a.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:Blockly.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,a)};\nBlockly.geras.RenderInfo.prototype.finalize_=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.yPos=b;d.xPos=this.startX;b+=d.height;a=Math.max(a,d.widthWithConnectedBlocks);var e=b-this.topRow.ascenderHeight;d==this.bottomRow&&e<this.constants_.MIN_BLOCK_HEIGHT&&(e=this.constants_.MIN_BLOCK_HEIGHT-e,this.bottomRow.height+=e,b+=e);this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(a=Math.max(a,this.block_.nextConnection.targetBlock().getHeightWidth().width-\nthis.constants_.DARK_PATH_OFFSET));this.bottomRow.baseline=b-this.bottomRow.descenderHeight;this.widthWithChildren=a+this.startX+this.constants_.DARK_PATH_OFFSET;this.width+=this.constants_.DARK_PATH_OFFSET;this.height=b+this.constants_.DARK_PATH_OFFSET;this.startY=this.topRow.capline};Blockly.geras.Drawer=function(a,b){Blockly.geras.Drawer.superClass_.constructor.call(this,a,b);this.highlighter_=new Blockly.geras.Highlighter(b)};Blockly.utils.object.inherits(Blockly.geras.Drawer,Blockly.blockRendering.Drawer);\nBlockly.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_();this.drawOutline_();this.drawInternals_();var a=this.block_.pathObject;a.setPath(this.outlinePath_+\"\\n\"+this.inlinePath_);a.setHighlightPath(this.highlighter_.getPath());this.info_.RTL&&a.flipRTL();Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_);this.recordSizeOnBlock_()};\nBlockly.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow);this.highlighter_.drawRightSideRow(this.info_.topRow);Blockly.geras.Drawer.superClass_.drawTop_.call(this)};Blockly.geras.Drawer.prototype.drawJaggedEdge_=function(a){this.highlighter_.drawJaggedEdge_(a);Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this,a)};\nBlockly.geras.Drawer.prototype.drawValueInput_=function(a){this.highlighter_.drawValueInput(a);Blockly.geras.Drawer.superClass_.drawValueInput_.call(this,a)};Blockly.geras.Drawer.prototype.drawStatementInput_=function(a){this.highlighter_.drawStatementInput(a);Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this,a)};\nBlockly.geras.Drawer.prototype.drawRightSideRow_=function(a){this.highlighter_.drawRightSideRow(a);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",a.xPos+a.width)+Blockly.utils.svgPaths.lineOnAxis(\"V\",a.yPos+a.height)};Blockly.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow);Blockly.geras.Drawer.superClass_.drawBottom_.call(this)};Blockly.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft();Blockly.geras.Drawer.superClass_.drawLeft_.call(this)};\nBlockly.geras.Drawer.prototype.drawInlineInput_=function(a){this.highlighter_.drawInlineInput(a);Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this,a)};Blockly.geras.Drawer.prototype.positionInlineInputConnection_=function(a){var b=a.centerline-a.height/2;if(a.connectionModel){var c=a.xPos+a.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(c*=-1);a.connectionModel.setOffsetInBlock(c,b+a.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}};\nBlockly.geras.Drawer.prototype.positionStatementInputConnection_=function(a){var b=a.getLastInput();if(b.connectionModel){var c=a.xPos+a.statementEdge+b.notchOffset;c=this.info_.RTL?-1*c:c+this.constants_.DARK_PATH_OFFSET;b.connectionModel.setOffsetInBlock(c,a.yPos+this.constants_.DARK_PATH_OFFSET)}};\nBlockly.geras.Drawer.prototype.positionExternalValueConnection_=function(a){var b=a.getLastInput();if(b.connectionModel){var c=a.xPos+a.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(c*=-1);b.connectionModel.setOffsetInBlock(c,a.yPos)}};Blockly.geras.Drawer.prototype.positionNextConnection_=function(){var a=this.info_.bottomRow;if(a.connection){var b=a.connection,c=b.xPos;b.connectionModel.setOffsetInBlock((this.info_.RTL?-c:c)+this.constants_.DARK_PATH_OFFSET/2,a.baseline+this.constants_.DARK_PATH_OFFSET)}};Blockly.geras.HighlightConstantProvider=function(a){this.constantProvider=a;this.OFFSET=.5;this.START_POINT=Blockly.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)};Blockly.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner();this.OUTSIDE_CORNER=this.makeOutsideCorner();this.PUZZLE_TAB=this.makePuzzleTab();this.NOTCH=this.makeNotch();this.JAGGED_TEETH=this.makeJaggedTeeth();this.START_HAT=this.makeStartHat()};\nBlockly.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var a=this.constantProvider.CORNER_RADIUS,b=this.OFFSET,c=(1-Math.SQRT1_2)*(a+b)-b,d=Blockly.utils.svgPaths.moveBy(c,c)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a,Blockly.utils.svgPaths.point(-c-b,a-c)),e=Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a+b,Blockly.utils.svgPaths.point(a+b,a+b)),f=Blockly.utils.svgPaths.moveBy(c,-c)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a+b,Blockly.utils.svgPaths.point(a-c,c+b));return{width:a+b,height:a,\npathTop:function(g){return g?d:\"\"},pathBottom:function(g){return g?e:f}}};\nBlockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var a=this.constantProvider.CORNER_RADIUS,b=this.OFFSET,c=(1-Math.SQRT1_2)*(a-b)+b,d=Blockly.utils.svgPaths.moveBy(c,c)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a-b,Blockly.utils.svgPaths.point(a-c,-c+b)),e=Blockly.utils.svgPaths.moveBy(b,a)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a-b,Blockly.utils.svgPaths.point(a,-a+b)),f=-c,g=Blockly.utils.svgPaths.moveBy(c,f)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a-b,Blockly.utils.svgPaths.point(-c+\nb,-f-a));return{height:a,topLeft:function(h){return h?d:e},bottomLeft:function(){return g}}};\nBlockly.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var a=this.constantProvider.TAB_WIDTH,b=this.constantProvider.TAB_HEIGHT,c=Blockly.utils.svgPaths.moveBy(-2,-b+3.4)+Blockly.utils.svgPaths.lineTo(-.45*a,-2.1),d=Blockly.utils.svgPaths.lineOnAxis(\"v\",2.5)+Blockly.utils.svgPaths.moveBy(.97*-a,2.5)+Blockly.utils.svgPaths.curve(\"q\",[Blockly.utils.svgPaths.point(.05*-a,10),Blockly.utils.svgPaths.point(.3*a,9.5)])+Blockly.utils.svgPaths.moveBy(.67*a,-1.9)+Blockly.utils.svgPaths.lineOnAxis(\"v\",\n2.5),e=Blockly.utils.svgPaths.lineOnAxis(\"v\",-1.5)+Blockly.utils.svgPaths.moveBy(-.92*a,-.5)+Blockly.utils.svgPaths.curve(\"q\",[Blockly.utils.svgPaths.point(-.19*a,-5.5),Blockly.utils.svgPaths.point(0,-11)])+Blockly.utils.svgPaths.moveBy(.92*a,1),f=Blockly.utils.svgPaths.moveBy(-5,b-.7)+Blockly.utils.svgPaths.lineTo(.46*a,-2.1);return{width:a,height:b,pathUp:function(g){return g?c:e},pathDown:function(g){return g?d:f}}};\nBlockly.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:Blockly.utils.svgPaths.lineOnAxis(\"h\",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}};Blockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:Blockly.utils.svgPaths.lineTo(5.1,2.6)+Blockly.utils.svgPaths.moveBy(-10.2,6.8)+Blockly.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}};\nBlockly.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var a=this.constantProvider.START_HAT.height,b=Blockly.utils.svgPaths.moveBy(25,-8.7)+Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(29.7,-6.2),Blockly.utils.svgPaths.point(57.2,-.5),Blockly.utils.svgPaths.point(75,8.7)]),c=Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(17.8,-9.2),Blockly.utils.svgPaths.point(45.3,-14.9),Blockly.utils.svgPaths.point(75,-8.7)])+Blockly.utils.svgPaths.moveTo(100.5,\na+.5);return{path:function(d){return d?b:c}}};Blockly.geras.PathObject=function(a,b,c){this.constants=c;this.svgRoot=a;this.svgPathDark=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyPathDark\",transform:\"translate(1,1)\"},this.svgRoot);this.svgPath=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyPath\"},this.svgRoot);this.svgPathLight=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyPathLight\"},this.svgRoot);this.colourDark=\"#000000\";this.style=b};\nBlockly.utils.object.inherits(Blockly.geras.PathObject,Blockly.blockRendering.PathObject);Blockly.geras.PathObject.prototype.setPath=function(a){this.svgPath.setAttribute(\"d\",a);this.svgPathDark.setAttribute(\"d\",a)};Blockly.geras.PathObject.prototype.setHighlightPath=function(a){this.svgPathLight.setAttribute(\"d\",a)};\nBlockly.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute(\"transform\",\"scale(-1 1)\");this.svgPathLight.setAttribute(\"transform\",\"scale(-1 1)\");this.svgPathDark.setAttribute(\"transform\",\"translate(1,1) scale(-1 1)\")};\nBlockly.geras.PathObject.prototype.applyColour=function(a){this.svgPathLight.style.display=\"\";this.svgPathDark.style.display=\"\";this.svgPathLight.setAttribute(\"stroke\",this.style.colourTertiary);this.svgPathDark.setAttribute(\"fill\",this.colourDark);Blockly.geras.PathObject.superClass_.applyColour.call(this,a);this.svgPath.setAttribute(\"stroke\",\"none\")};\nBlockly.geras.PathObject.prototype.setStyle=function(a){this.style=a;this.colourDark=Blockly.utils.colour.blend(\"#000\",this.style.colourPrimary,.2)||this.colourDark};Blockly.geras.PathObject.prototype.updateHighlighted=function(a){a?(this.svgPath.setAttribute(\"filter\",\"url(#\"+this.constants.embossFilterId+\")\"),this.svgPathLight.style.display=\"none\"):(this.svgPath.setAttribute(\"filter\",\"none\"),this.svgPathLight.style.display=\"inline\")};\nBlockly.geras.PathObject.prototype.updateShadow_=function(a){a&&(this.svgPathLight.style.display=\"none\",this.svgPathDark.setAttribute(\"fill\",this.style.colourSecondary),this.svgPath.setAttribute(\"stroke\",\"none\"),this.svgPath.setAttribute(\"fill\",this.style.colourSecondary))};Blockly.geras.PathObject.prototype.updateDisabled_=function(a){Blockly.geras.PathObject.superClass_.updateDisabled_.call(this,a);a&&this.svgPath.setAttribute(\"stroke\",\"none\")};Blockly.geras.Renderer=function(a){Blockly.geras.Renderer.superClass_.constructor.call(this,a);this.highlightConstants_=null};Blockly.utils.object.inherits(Blockly.geras.Renderer,Blockly.blockRendering.Renderer);Blockly.geras.Renderer.prototype.init=function(a,b){Blockly.geras.Renderer.superClass_.init.call(this,a,b);this.highlightConstants_=this.makeHighlightConstants_();this.highlightConstants_.init()};\nBlockly.geras.Renderer.prototype.refreshDom=function(a,b){Blockly.geras.Renderer.superClass_.refreshDom.call(this,a,b);this.getHighlightConstants().init()};Blockly.geras.Renderer.prototype.makeConstants_=function(){return new Blockly.geras.ConstantProvider};Blockly.geras.Renderer.prototype.makeRenderInfo_=function(a){return new Blockly.geras.RenderInfo(this,a)};Blockly.geras.Renderer.prototype.makeDrawer_=function(a,b){return new Blockly.geras.Drawer(a,b)};\nBlockly.geras.Renderer.prototype.makePathObject=function(a,b){return new Blockly.geras.PathObject(a,b,this.getConstants())};Blockly.geras.Renderer.prototype.makeHighlightConstants_=function(){return new Blockly.geras.HighlightConstantProvider(this.getConstants())};Blockly.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_};Blockly.blockRendering.register(\"geras\",Blockly.geras.Renderer);Blockly.thrasos={};Blockly.thrasos.RenderInfo=function(a,b){Blockly.thrasos.RenderInfo.superClass_.constructor.call(this,a,b)};Blockly.utils.object.inherits(Blockly.thrasos.RenderInfo,Blockly.blockRendering.RenderInfo);Blockly.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_};\nBlockly.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.hasExternalInput&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.startsWithElemSpacer()&&c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.getInRowSpacing_(d[e],d[e+1]);c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,f))}c.elements.push(d[d.length-\n1]);c.endsWithElemSpacer()&&(f=this.getInRowSpacing_(d[d.length-1],null),a&&c.hasDummyInput&&(f+=this.constants_.TAB_WIDTH),c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,f)))}};\nBlockly.thrasos.RenderInfo.prototype.getInRowSpacing_=function(a,b){if(!a)return b&&Blockly.blockRendering.Types.isField(b)&&b.isEditable?this.constants_.MEDIUM_PADDING:b&&Blockly.blockRendering.Types.isInlineInput(b)?this.constants_.MEDIUM_LARGE_PADDING:b&&Blockly.blockRendering.Types.isStatementInput(b)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Blockly.blockRendering.Types.isInput(a)&&!b)return Blockly.blockRendering.Types.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:\nBlockly.blockRendering.Types.isIcon(a)?2*this.constants_.LARGE_PADDING+1:Blockly.blockRendering.Types.isHat(a)?this.constants_.NO_PADDING:Blockly.blockRendering.Types.isPreviousOrNextConnection(a)?this.constants_.LARGE_PADDING:Blockly.blockRendering.Types.isLeftRoundedCorner(a)?this.constants_.MIN_BLOCK_WIDTH:Blockly.blockRendering.Types.isJaggedEdge(a)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInput(a)&&!b){if(Blockly.blockRendering.Types.isExternalInput(a))return this.constants_.NO_PADDING;\nif(Blockly.blockRendering.Types.isInlineInput(a))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(a))return this.constants_.NO_PADDING}if(!Blockly.blockRendering.Types.isInput(a)&&b&&Blockly.blockRendering.Types.isInput(b)){if(Blockly.blockRendering.Types.isField(a)&&a.isEditable){if(Blockly.blockRendering.Types.isInlineInput(b)||Blockly.blockRendering.Types.isExternalInput(b))return this.constants_.SMALL_PADDING}else{if(Blockly.blockRendering.Types.isInlineInput(b)||\nBlockly.blockRendering.Types.isExternalInput(b))return this.constants_.MEDIUM_LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(b))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Blockly.blockRendering.Types.isIcon(a)&&b&&!Blockly.blockRendering.Types.isInput(b))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInlineInput(a)&&b&&Blockly.blockRendering.Types.isField(b))return b.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;\nif(Blockly.blockRendering.Types.isLeftSquareCorner(a)&&b){if(Blockly.blockRendering.Types.isHat(b))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isPreviousConnection(b)||Blockly.blockRendering.Types.isNextConnection(b))return b.notchOffset}return Blockly.blockRendering.Types.isLeftRoundedCorner(a)&&b?b.notchOffset-this.constants_.CORNER_RADIUS:Blockly.blockRendering.Types.isField(a)&&b&&Blockly.blockRendering.Types.isField(b)&&a.isEditable==b.isEditable||b&&Blockly.blockRendering.Types.isJaggedEdge(b)?\nthis.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};\nBlockly.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(a,b){return Blockly.blockRendering.Types.isTopRow(a)&&Blockly.blockRendering.Types.isBottomRow(b)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Blockly.blockRendering.Types.isTopRow(a)||Blockly.blockRendering.Types.isBottomRow(b)?this.constants_.NO_PADDING:a.hasExternalInput&&b.hasExternalInput?this.constants_.LARGE_PADDING:!a.hasStatement&&b.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:a.hasStatement&&b.hasStatement||a.hasDummyInput||\nb.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};\nBlockly.thrasos.RenderInfo.prototype.getElemCenterline_=function(a,b){if(Blockly.blockRendering.Types.isSpacer(b))return a.yPos+b.height/2;if(Blockly.blockRendering.Types.isBottomRow(a))return a=a.yPos+a.height-a.descenderHeight,Blockly.blockRendering.Types.isNextConnection(b)?a+b.height/2:a-b.height/2;if(Blockly.blockRendering.Types.isTopRow(a))return Blockly.blockRendering.Types.isHat(b)?a.capline-b.height/2:a.capline+b.height/2;var c=a.yPos;return c=Blockly.blockRendering.Types.isField(b)&&a.hasStatement?\nc+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+b.height/2):c+a.height/2};\nBlockly.thrasos.RenderInfo.prototype.finalize_=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.yPos=b;d.xPos=this.startX;b+=d.height;a=Math.max(a,d.widthWithConnectedBlocks);var e=b-this.topRow.ascenderHeight;d==this.bottomRow&&e<this.constants_.MIN_BLOCK_HEIGHT&&(e=this.constants_.MIN_BLOCK_HEIGHT-e,this.bottomRow.height+=e,b+=e);this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(a=Math.max(a,this.block_.nextConnection.targetBlock().getHeightWidth().width));\nthis.bottomRow.baseline=b-this.bottomRow.descenderHeight;this.widthWithChildren=a+this.startX;this.height=b;this.startY=this.topRow.capline};Blockly.thrasos.Renderer=function(a){Blockly.thrasos.Renderer.superClass_.constructor.call(this,a)};Blockly.utils.object.inherits(Blockly.thrasos.Renderer,Blockly.blockRendering.Renderer);Blockly.thrasos.Renderer.prototype.makeRenderInfo_=function(a){return new Blockly.thrasos.RenderInfo(this,a)};Blockly.blockRendering.register(\"thrasos\",Blockly.thrasos.Renderer);Blockly.zelos={};\nBlockly.zelos.ConstantProvider=function(){Blockly.zelos.ConstantProvider.superClass_.constructor.call(this);this.SMALL_PADDING=this.GRID_UNIT=4;this.MEDIUM_PADDING=2*this.GRID_UNIT;this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT;this.LARGE_PADDING=4*this.GRID_UNIT;this.CORNER_RADIUS=1*this.GRID_UNIT;this.NOTCH_WIDTH=9*this.GRID_UNIT;this.NOTCH_HEIGHT=2*this.GRID_UNIT;this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT;this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT;this.MIN_BLOCK_HEIGHT=12*\nthis.GRID_UNIT;this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT;this.TAB_OFFSET_FROM_TOP=0;this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS;this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS;this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT;this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT;this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT;this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT;this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT;\nthis.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT;this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT;this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT;this.CURSOR_WS_WIDTH=20*this.GRID_UNIT;this.CURSOR_COLOUR=\"#ffa200\";this.CURSOR_RADIUS=5;this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0;this.START_HAT_HEIGHT=22;this.START_HAT_WIDTH=96;this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5};this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},\n2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}};this.FULL_BLOCK_FIELDS=!0;this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT;this.FIELD_TEXT_FONTWEIGHT=\"bold\";this.FIELD_TEXT_FONTFAMILY='\"Helvetica Neue\", \"Segoe UI\", Helvetica, sans-serif';this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS;this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT;this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT;this.FIELD_BORDER_RECT_HEIGHT=\n8*this.GRID_UNIT;this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT;this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0;this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING;this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0;this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT;this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT;this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT;this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=\n12*this.GRID_UNIT;this.SELECTED_GLOW_COLOUR=\"#fff200\";this.SELECTED_GLOW_SIZE=.5;this.REPLACEMENT_GLOW_COLOUR=\"#fff200\";this.REPLACEMENT_GLOW_SIZE=2;this.selectedGlowFilterId=\"\";this.selectedGlowFilter_=null;this.replacementGlowFilterId=\"\";this.replacementGlowFilter_=null};Blockly.utils.object.inherits(Blockly.zelos.ConstantProvider,Blockly.blockRendering.ConstantProvider);\nBlockly.zelos.ConstantProvider.prototype.setFontConstants_=function(a){Blockly.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,a);this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING};\nBlockly.zelos.ConstantProvider.prototype.init=function(){Blockly.zelos.ConstantProvider.superClass_.init.call(this);this.HEXAGONAL=this.makeHexagonal();this.ROUNDED=this.makeRounded();this.SQUARED=this.makeSquared();this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth};\nBlockly.zelos.ConstantProvider.prototype.setDynamicProperties_=function(a){Blockly.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,a);this.SELECTED_GLOW_COLOUR=a.getComponentStyle(\"selectedGlowColour\")||this.SELECTED_GLOW_COLOUR;var b=Number(a.getComponentStyle(\"selectedGlowSize\"));this.SELECTED_GLOW_SIZE=b&&!isNaN(b)?b:this.SELECTED_GLOW_SIZE;this.REPLACEMENT_GLOW_COLOUR=a.getComponentStyle(\"replacementGlowColour\")||this.REPLACEMENT_GLOW_COLOUR;this.REPLACEMENT_GLOW_SIZE=(a=Number(a.getComponentStyle(\"replacementGlowSize\")))&&\n!isNaN(a)?a:this.REPLACEMENT_GLOW_SIZE};Blockly.zelos.ConstantProvider.prototype.dispose=function(){Blockly.zelos.ConstantProvider.superClass_.dispose.call(this);this.selectedGlowFilter_&&Blockly.utils.dom.removeNode(this.selectedGlowFilter_);this.replacementGlowFilter_&&Blockly.utils.dom.removeNode(this.replacementGlowFilter_)};\nBlockly.zelos.ConstantProvider.prototype.makeStartHat=function(){var a=this.START_HAT_HEIGHT,b=this.START_HAT_WIDTH,c=Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(25,-a),Blockly.utils.svgPaths.point(71,-a),Blockly.utils.svgPaths.point(b,0)]);return{height:a,width:b,path:c}};\nBlockly.zelos.ConstantProvider.prototype.makeHexagonal=function(){function a(c,d,e){var f=c/2;f=f>b?b:f;e=e?-1:1;c=(d?-1:1)*c/2;return Blockly.utils.svgPaths.lineTo(-e*f,c)+Blockly.utils.svgPaths.lineTo(e*f,c)}var b=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(c){c/=2;return c>b?b:c},height:function(c){return c},connectionOffsetY:function(c){return c/2},connectionOffsetX:function(c){return-c},pathDown:function(c){return a(c,!1,!1)},pathUp:function(c){return a(c,\n!0,!1)},pathRightDown:function(c){return a(c,!1,!0)},pathRightUp:function(c){return a(c,!1,!0)}}};\nBlockly.zelos.ConstantProvider.prototype.makeRounded=function(){function a(d,e,f){var g=d>c?d-c:0;d=(d>c?c:d)/2;return Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",d,Blockly.utils.svgPaths.point((e?-1:1)*d,(e?-1:1)*d))+Blockly.utils.svgPaths.lineOnAxis(\"v\",(f?1:-1)*g)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",d,Blockly.utils.svgPaths.point((e?1:-1)*d,(e?-1:1)*d))}var b=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,c=2*b;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(d){d/=2;return d>b?b:d},height:function(d){return d},\nconnectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return a(d,!1,!1)},pathUp:function(d){return a(d,!0,!1)},pathRightDown:function(d){return a(d,!1,!0)},pathRightUp:function(d){return a(d,!1,!0)}}};\nBlockly.zelos.ConstantProvider.prototype.makeSquared=function(){function a(c,d,e){c-=2*b;return Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",b,Blockly.utils.svgPaths.point((d?-1:1)*b,(d?-1:1)*b))+Blockly.utils.svgPaths.lineOnAxis(\"v\",(e?1:-1)*c)+Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",b,Blockly.utils.svgPaths.point((d?1:-1)*b,(d?-1:1)*b))}var b=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(c){return b},height:function(c){return c},connectionOffsetY:function(c){return c/2},\nconnectionOffsetX:function(c){return-c},pathDown:function(c){return a(c,!1,!1)},pathUp:function(c){return a(c,!0,!1)},pathRightDown:function(c){return a(c,!1,!0)},pathRightUp:function(c){return a(c,!1,!0)}}};\nBlockly.zelos.ConstantProvider.prototype.shapeFor=function(a){var b=a.getCheck();!b&&a.targetConnection&&(b=a.targetConnection.getCheck());switch(a.type){case Blockly.INPUT_VALUE:case Blockly.OUTPUT_VALUE:a=a.getSourceBlock().getOutputShape();if(null!=a)switch(a){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}if(b&&-1!=b.indexOf(\"Boolean\"))return this.HEXAGONAL;if(b&&-1!=b.indexOf(\"Number\"))return this.ROUNDED;\nb&&b.indexOf(\"String\");return this.ROUNDED;case Blockly.PREVIOUS_STATEMENT:case Blockly.NEXT_STATEMENT:return this.NOTCH;default:throw Error(\"Unknown type\");}};\nBlockly.zelos.ConstantProvider.prototype.makeNotch=function(){function a(l){return Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(l*e/2,0),Blockly.utils.svgPaths.point(l*e*3/4,g/2),Blockly.utils.svgPaths.point(l*e,g)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(l*e,f)])+Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(l*e/4,g/2),Blockly.utils.svgPaths.point(l*e/2,g),Blockly.utils.svgPaths.point(l*e,g)])+Blockly.utils.svgPaths.lineOnAxis(\"h\",l*d)+Blockly.utils.svgPaths.curve(\"c\",\n[Blockly.utils.svgPaths.point(l*e/2,0),Blockly.utils.svgPaths.point(l*e*3/4,-(g/2)),Blockly.utils.svgPaths.point(l*e,-g)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(l*e,-f)])+Blockly.utils.svgPaths.curve(\"c\",[Blockly.utils.svgPaths.point(l*e/4,-(g/2)),Blockly.utils.svgPaths.point(l*e/2,-g),Blockly.utils.svgPaths.point(l*e,-g)])}var b=this.NOTCH_WIDTH,c=this.NOTCH_HEIGHT,d=b/3,e=d/3,f=c/2,g=f/2,h=a(1),k=a(-1);return{type:this.SHAPES.NOTCH,width:b,height:c,pathLeft:h,pathRight:k}};\nBlockly.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var a=this.CORNER_RADIUS,b=Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a,Blockly.utils.svgPaths.point(-a,a)),c=Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(-a,a)),d=Blockly.utils.svgPaths.arc(\"a\",\"0 0,0\",a,Blockly.utils.svgPaths.point(a,a)),e=Blockly.utils.svgPaths.arc(\"a\",\"0 0,1\",a,Blockly.utils.svgPaths.point(a,a));return{width:a,height:a,pathTop:b,pathBottom:d,rightWidth:a,rightHeight:a,pathTopRight:c,pathBottomRight:e}};\nBlockly.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(a){return Blockly.utils.colour.blend(\"#000\",a,.15)||a};Blockly.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(a){return Blockly.utils.colour.blend(\"#000\",a,.25)||a};\nBlockly.zelos.ConstantProvider.prototype.createDom=function(a,b,c){Blockly.zelos.ConstantProvider.superClass_.createDom.call(this,a,b,c);a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},a);b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:\"blocklySelectedGlowFilter\"+this.randomIdentifier,height:\"160%\",width:\"180%\",y:\"-30%\",x:\"-40%\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{\"in\":\"SourceGraphic\",stdDeviation:this.SELECTED_GLOW_SIZE},b);c=\nBlockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:\"outBlur\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:\"table\",tableValues:\"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\"},c);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{\"flood-color\":this.SELECTED_GLOW_COLOUR,\"flood-opacity\":1,result:\"outColor\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"outColor\",in2:\"outBlur\",operator:\"in\",result:\"outGlow\"},b);this.selectedGlowFilterId=\nb.id;this.selectedGlowFilter_=b;a=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:\"blocklyReplacementGlowFilter\"+this.randomIdentifier,height:\"160%\",width:\"180%\",y:\"-30%\",x:\"-40%\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{\"in\":\"SourceGraphic\",stdDeviation:this.REPLACEMENT_GLOW_SIZE},a);b=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:\"outBlur\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:\"table\",\ntableValues:\"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\"},b);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{\"flood-color\":this.REPLACEMENT_GLOW_COLOUR,\"flood-opacity\":1,result:\"outColor\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"outColor\",in2:\"outBlur\",operator:\"in\",result:\"outGlow\"},a);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{\"in\":\"SourceGraphic\",in2:\"outGlow\",operator:\"over\"},a);this.replacementGlowFilterId=a.id;this.replacementGlowFilter_=\na};\nBlockly.zelos.ConstantProvider.prototype.getCSS_=function(a){return[a+\" .blocklyText,\",a+\" .blocklyFlyoutLabelText {\",\"font: \"+this.FIELD_TEXT_FONTWEIGHT+\" \"+this.FIELD_TEXT_FONTSIZE+\"pt \"+this.FIELD_TEXT_FONTFAMILY+\";\",\"}\",a+\" .blocklyText {\",\"fill: #fff;\",\"}\",a+\" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),\",a+\" .blocklyEditableText>rect:not(.blocklyDropdownRect) {\",\"fill: \"+this.FIELD_BORDER_RECT_COLOUR+\";\",\"}\",a+\" .blocklyNonEditableText>text,\",a+\" .blocklyEditableText>text,\",a+\" .blocklyNonEditableText>g>text,\",\na+\" .blocklyEditableText>g>text {\",\"fill: #575E75;\",\"}\",a+\" .blocklyFlyoutLabelText {\",\"fill: #575E75;\",\"}\",a+\" .blocklyText.blocklyBubbleText {\",\"fill: #575E75;\",\"}\",a+\" .blocklyDraggable:not(.blocklyDisabled)\",\" .blocklyEditableText:not(.editing):hover>rect,\",a+\" .blocklyDraggable:not(.blocklyDisabled)\",\" .blocklyEditableText:not(.editing):hover>.blocklyPath {\",\"stroke: #fff;\",\"stroke-width: 2;\",\"}\",a+\" .blocklyHtmlInput {\",\"font-family: \"+this.FIELD_TEXT_FONTFAMILY+\";\",\"font-weight: \"+this.FIELD_TEXT_FONTWEIGHT+\n\";\",\"color: #575E75;\",\"}\",a+\" .blocklyDropdownText {\",\"fill: #fff !important;\",\"}\",a+\".blocklyWidgetDiv .goog-menuitem,\",a+\".blocklyDropDownDiv .goog-menuitem {\",\"font-family: \"+this.FIELD_TEXT_FONTFAMILY+\";\",\"}\",a+\".blocklyDropDownDiv .goog-menuitem-content {\",\"color: #fff;\",\"}\",a+\" .blocklyHighlightedConnectionPath {\",\"stroke: \"+this.SELECTED_GLOW_COLOUR+\";\",\"}\",a+\" .blocklyDisabled > .blocklyOutlinePath {\",\"fill: url(#blocklyDisabledPattern\"+this.randomIdentifier+\")\",\"}\",a+\" .blocklyInsertionMarker>.blocklyPath {\",\n\"fill-opacity: \"+this.INSERTION_MARKER_OPACITY+\";\",\"stroke: none;\",\"}\"]};Blockly.zelos.TopRow=function(a){Blockly.zelos.TopRow.superClass_.constructor.call(this,a)};Blockly.utils.object.inherits(Blockly.zelos.TopRow,Blockly.blockRendering.TopRow);Blockly.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1};Blockly.zelos.TopRow.prototype.hasLeftSquareCorner=function(a){var b=(a.hat?\"cap\"===a.hat:this.constants_.ADD_START_HATS)&&!a.outputConnection&&!a.previousConnection;return!!a.outputConnection||b};\nBlockly.zelos.TopRow.prototype.hasRightSquareCorner=function(a){return!!a.outputConnection&&!a.statementInputCount&&!a.nextConnection};Blockly.zelos.BottomRow=function(a){Blockly.zelos.BottomRow.superClass_.constructor.call(this,a)};Blockly.utils.object.inherits(Blockly.zelos.BottomRow,Blockly.blockRendering.BottomRow);Blockly.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1};Blockly.zelos.BottomRow.prototype.hasLeftSquareCorner=function(a){return!!a.outputConnection};\nBlockly.zelos.BottomRow.prototype.hasRightSquareCorner=function(a){return!!a.outputConnection&&!a.statementInputCount&&!a.nextConnection};Blockly.zelos.RightConnectionShape=function(a){Blockly.zelos.RightConnectionShape.superClass_.constructor.call(this,a);this.type|=Blockly.blockRendering.Types.getType(\"RIGHT_CONNECTION\");this.width=this.height=0};Blockly.utils.object.inherits(Blockly.zelos.RightConnectionShape,Blockly.blockRendering.Measurable);Blockly.zelos.StatementInput=function(a,b){Blockly.zelos.StatementInput.superClass_.constructor.call(this,a,b);if(this.connectedBlock){for(a=this.connectedBlock;a.getNextBlock();)a=a.getNextBlock();a.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}};Blockly.utils.object.inherits(Blockly.zelos.StatementInput,Blockly.blockRendering.StatementInput);Blockly.zelos.RenderInfo=function(a,b){Blockly.zelos.RenderInfo.superClass_.constructor.call(this,a,b);this.topRow=new Blockly.zelos.TopRow(this.constants_);this.bottomRow=new Blockly.zelos.BottomRow(this.constants_);this.isInline=!0;this.isMultiRow=!b.getInputsInline()||b.isCollapsed();this.hasStatementInput=0<b.statementInputCount;this.rightSide=this.outputConnection?new Blockly.zelos.RightConnectionShape(this.constants_):null};Blockly.utils.object.inherits(Blockly.zelos.RenderInfo,Blockly.blockRendering.RenderInfo);\nBlockly.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_};Blockly.zelos.RenderInfo.prototype.measure=function(){this.createRows_();this.addElemSpacing_();this.addRowSpacing_();this.adjustXPosition_();this.computeBounds_();this.alignRowElements_();this.finalize_()};\nBlockly.zelos.RenderInfo.prototype.shouldStartNewRow_=function(a,b){return b?a.type==Blockly.NEXT_STATEMENT||b.type==Blockly.NEXT_STATEMENT?!0:a.type==Blockly.INPUT_VALUE||a.type==Blockly.DUMMY_INPUT?!this.isInline||this.isMultiRow:!1:!1};Blockly.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(a){return a.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):Blockly.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,a)};\nBlockly.zelos.RenderInfo.prototype.getInRowSpacing_=function(a,b){return a&&b||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!a&&b&&Blockly.blockRendering.Types.isStatementInput(b)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:a&&Blockly.blockRendering.Types.isLeftRoundedCorner(a)&&b&&(Blockly.blockRendering.Types.isPreviousConnection(b)||Blockly.blockRendering.Types.isNextConnection(b))?b.notchOffset-this.constants_.CORNER_RADIUS:\na&&Blockly.blockRendering.Types.isLeftSquareCorner(a)&&b&&Blockly.blockRendering.Types.isHat(b)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING};\nBlockly.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(a,b){if(Blockly.blockRendering.Types.isTopRow(a)&&Blockly.blockRendering.Types.isBottomRow(b))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var c=Blockly.blockRendering.Types.isInputRow(a)&&a.hasStatement,d=Blockly.blockRendering.Types.isInputRow(b)&&b.hasStatement;return d||c?(a=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&c?Math.max(a,this.constants_.DUMMY_INPUT_MIN_HEIGHT):a):Blockly.blockRendering.Types.isTopRow(a)?\na.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Blockly.blockRendering.Types.isBottomRow(b)?this.outputConnection?!b.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:\nthis.constants_.MEDIUM_PADDING};Blockly.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(a,b){var c=this.width-this.startX;return Blockly.blockRendering.Types.isInputRow(a)&&a.hasStatement||Blockly.blockRendering.Types.isInputRow(b)&&b.hasStatement?Math.max(c,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):c};\nBlockly.zelos.RenderInfo.prototype.getElemCenterline_=function(a,b){if(a.hasStatement&&!Blockly.blockRendering.Types.isSpacer(b)&&!Blockly.blockRendering.Types.isStatementInput(b))return a.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Blockly.blockRendering.Types.isInlineInput(b)){var c=b.connectedBlock;if(c&&c.outputConnection&&c.nextConnection)return a.yPos+c.height/2}return Blockly.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,a,b)};\nBlockly.zelos.RenderInfo.prototype.addInput_=function(a,b){a.type==Blockly.DUMMY_INPUT&&b.hasDummyInput&&b.align==Blockly.ALIGN_LEFT&&a.align==Blockly.ALIGN_RIGHT&&(b.rightAlignedDummyInput=a);Blockly.zelos.RenderInfo.superClass_.addInput_.call(this,a,b)};\nBlockly.zelos.RenderInfo.prototype.addAlignmentPadding_=function(a,b){if(a.rightAlignedDummyInput){for(var c,d=0,e;(e=a.elements[d])&&(Blockly.blockRendering.Types.isSpacer(e)&&(c=e),!Blockly.blockRendering.Types.isField(e)||e.parentInput!=a.rightAlignedDummyInput);d++);if(c){c.width+=b;a.width+=b;return}}Blockly.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,a,b)};\nBlockly.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var a=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,b=a,c=2;c<this.rows.length-1;c+=2){var d=this.rows[c-1],e=this.rows[c],f=this.rows[c+1];d=2==c?!!this.topRow.hasPreviousConnection:!!d.followsStatement;f=c+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!f.precedesStatement;if(Blockly.blockRendering.Types.isInputRow(e)&&e.hasStatement)e.measure(),b=e.width-e.getLastInput().width+a;else if(d&&(2==c||f)&&\nBlockly.blockRendering.Types.isInputRow(e)&&!e.hasStatement){f=e.xPos;d=null;for(var g=0,h;h=e.elements[g];g++)Blockly.blockRendering.Types.isSpacer(h)&&(d=h),!(d&&(Blockly.blockRendering.Types.isField(h)||Blockly.blockRendering.Types.isInput(h))&&f<b)||Blockly.blockRendering.Types.isField(h)&&(h.field instanceof Blockly.FieldLabel||h.field instanceof Blockly.FieldImage)||(d.width+=b-f),f+=h.width}}};\nBlockly.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var a=0,b=0,c;c=this.rows[b];b++)c.yPos=a,a+=c.height;this.height=a;b=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height;a=this.outputConnection.shape.height(b);b=this.outputConnection.shape.width(b);this.outputConnection.height=a;this.outputConnection.width=b;this.outputConnection.startX=b;this.outputConnection.connectionOffsetY=\nthis.outputConnection.shape.connectionOffsetY(a);this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(b);c=0;this.hasStatementInput||this.bottomRow.hasNextConnection||(c=b,this.rightSide.height=a,this.rightSide.width=c,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+c);this.startX=b;this.width+=b+c;this.widthWithChildren+=b+c}};\nBlockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var a=0,b=0,c;c=this.rows[b];b++)if(Blockly.blockRendering.Types.isInputRow(c)){a=c.elements[c.elements.length-2];var d=this.getNegativeSpacing_(c.elements[1]),e=this.getNegativeSpacing_(a);a=d+e;var f=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-a<f&&(a=this.width-f,d=a/2,e=a/2);c.elements.unshift(new Blockly.blockRendering.InRowSpacer(this.constants_,\n-d));c.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,-e))}if(a)for(this.width-=a,this.widthWithChildren-=a,this.rightSide.xPos-=a,b=0;c=this.rows[b];b++)Blockly.blockRendering.Types.isTopOrBottomRow(c)&&(c.elements[1].width-=a,c.elements[1].widthWithConnectedBlocks-=a),c.width-=a,c.widthWithConnectedBlocks-=a}};\nBlockly.zelos.RenderInfo.prototype.getNegativeSpacing_=function(a){if(!a)return 0;var b=this.outputConnection.width,c=this.outputConnection.shape.type,d=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(c){case d.SHAPES.ROUND:return c=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,c=this.height/2>c?c:this.height/2,b-c*(1-Math.sin(Math.acos((c-this.constants_.SMALL_PADDING)/c)));default:return 0}if(Blockly.blockRendering.Types.isInlineInput(a)){var e=a.connectedBlock;a=e?e.pathObject.outputShapeType:\na.shape.type;return e&&e.outputConnection&&(e.statementInputCount||e.nextConnection)||c==d.SHAPES.HEXAGONAL&&c!=a?0:b-this.constants_.SHAPE_IN_SHAPE_PADDING[c][a]}return Blockly.blockRendering.Types.isField(a)?c==d.SHAPES.ROUND&&a.field instanceof Blockly.FieldTextInput?b-2.75*d.GRID_UNIT:b-this.constants_.SHAPE_IN_SHAPE_PADDING[c][0]:Blockly.blockRendering.Types.isIcon(a)?this.constants_.SMALL_PADDING:0};\nBlockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var a=2;a<this.rows.length-1;a+=2){var b=this.rows[a-1],c=this.rows[a],d=this.rows[a+1],e=2==a,f=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement;if(e?this.topRow.hasPreviousConnection:b.followsStatement){var g=3==c.elements.length&&(c.elements[1].field instanceof Blockly.FieldLabel||c.elements[1].field instanceof Blockly.FieldImage);if(!e&&g)b.height-=this.constants_.SMALL_PADDING,\nd.height-=this.constants_.SMALL_PADDING,c.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!f)b.height+=this.constants_.SMALL_PADDING;else if(f){e=!1;for(f=0;g=c.elements[f];f++)if(Blockly.blockRendering.Types.isInlineInput(g)&&g.connectedBlock&&!g.connectedBlock.isShadow()&&40<=g.connectedBlock.getHeightWidth().height){e=!0;break}e&&(b.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING)}}}};\nBlockly.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_();this.finalizeHorizontalAlignment_();this.finalizeVerticalAlignment_();Blockly.zelos.RenderInfo.superClass_.finalize_.call(this);this.rightSide&&(this.widthWithChildren+=this.rightSide.width)};Blockly.zelos.Drawer=function(a,b){Blockly.zelos.Drawer.superClass_.constructor.call(this,a,b)};Blockly.utils.object.inherits(Blockly.zelos.Drawer,Blockly.blockRendering.Drawer);\nBlockly.zelos.Drawer.prototype.draw=function(){var a=this.block_.pathObject;a.beginDrawing();this.hideHiddenIcons_();this.drawOutline_();this.drawInternals_();a.setPath(this.outlinePath_+\"\\n\"+this.inlinePath_);this.info_.RTL&&a.flipRTL();Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_);this.recordSizeOnBlock_();this.info_.outputConnection&&(a.outputShapeType=this.info_.outputConnection.shape.type);a.endDrawing()};\nBlockly.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):Blockly.zelos.Drawer.superClass_.drawOutline_.call(this)};\nBlockly.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():Blockly.zelos.Drawer.superClass_.drawLeft_.call(this)};\nBlockly.zelos.Drawer.prototype.drawRightSideRow_=function(a){if(!(0>=a.height))if(a.precedesStatement||a.followsStatement){var b=this.constants_.INSIDE_CORNERS.rightHeight;b=a.height-(a.precedesStatement?b:0);this.outlinePath_+=(a.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:\"\")+(0<b?Blockly.utils.svgPaths.lineOnAxis(\"V\",a.yPos+b):\"\")+(a.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:\"\")}else this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.yPos+a.height)};\nBlockly.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)};Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_();this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height);this.outlinePath_+=\"z\"};\nBlockly.zelos.Drawer.prototype.drawFlatTop_=function(){var a=this.info_.topRow;this.positionPreviousConnection_();this.outlinePath_+=Blockly.utils.svgPaths.moveBy(a.xPos,this.info_.startY);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"h\",a.width)};Blockly.zelos.Drawer.prototype.drawFlatBottom_=function(){var a=this.info_.bottomRow;this.positionNextConnection_();this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"V\",a.baseline);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"h\",-a.width)};\nBlockly.zelos.Drawer.prototype.drawInlineInput_=function(a){this.positionInlineInputConnection_(a);var b=a.input.name;if(!a.connectedBlock&&!this.info_.isInsertionMarker){var c=a.width-2*a.connectionWidth;a=Blockly.utils.svgPaths.moveTo(a.xPos+a.connectionWidth,a.centerline-a.height/2)+Blockly.utils.svgPaths.lineOnAxis(\"h\",c)+a.shape.pathRightDown(a.height)+Blockly.utils.svgPaths.lineOnAxis(\"h\",-c)+a.shape.pathUp(a.height)+\"z\";this.block_.pathObject.setOutlinePath(b,a)}};\nBlockly.zelos.Drawer.prototype.drawStatementInput_=function(a){var b=a.getLastInput(),c=b.xPos+b.notchOffset+b.shape.width,d=b.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis(\"h\",-(b.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,e=a.height-2*this.constants_.INSIDE_CORNERS.height;b=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis(\"h\",b.notchOffset-this.constants_.INSIDE_CORNERS.width)+(b.connectedBottomNextConnection?\"\":b.shape.pathLeft);\nthis.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis(\"H\",c)+d+Blockly.utils.svgPaths.lineOnAxis(\"v\",e)+b+Blockly.utils.svgPaths.lineOnAxis(\"H\",a.xPos+a.width);this.positionStatementInputConnection_(a)};Blockly.zelos.PathObject=function(a,b,c){Blockly.zelos.PathObject.superClass_.constructor.call(this,a,b,c);this.constants=c;this.svgPathSelected_=null;this.outlines_={};this.outputShapeType=this.remainingOutlines_=null};Blockly.utils.object.inherits(Blockly.zelos.PathObject,Blockly.blockRendering.PathObject);Blockly.zelos.PathObject.prototype.setPath=function(a){Blockly.zelos.PathObject.superClass_.setPath.call(this,a);this.svgPathSelected_&&this.svgPathSelected_.setAttribute(\"d\",a)};\nBlockly.zelos.PathObject.prototype.applyColour=function(a){Blockly.zelos.PathObject.superClass_.applyColour.call(this,a);a.isShadow()&&a.getParent()&&this.svgPath.setAttribute(\"stroke\",a.getParent().style.colourTertiary);a=0;for(var b=Object.keys(this.outlines_),c;c=b[a];a++)this.outlines_[c].setAttribute(\"fill\",this.style.colourTertiary)};\nBlockly.zelos.PathObject.prototype.flipRTL=function(){Blockly.zelos.PathObject.superClass_.flipRTL.call(this);for(var a=0,b=Object.keys(this.outlines_),c;c=b[a];a++)this.outlines_[c].setAttribute(\"transform\",\"scale(-1 1)\")};\nBlockly.zelos.PathObject.prototype.updateSelected=function(a){this.setClass_(\"blocklySelected\",a);a?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute(\"fill\",\"none\"),this.svgPathSelected_.setAttribute(\"filter\",\"url(#\"+this.constants.selectedGlowFilterId+\")\"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)};\nBlockly.zelos.PathObject.prototype.updateReplacementFade=function(a){this.setClass_(\"blocklyReplaceable\",a);a?this.svgPath.setAttribute(\"filter\",\"url(#\"+this.constants.replacementGlowFilterId+\")\"):this.svgPath.removeAttribute(\"filter\")};Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight=function(a,b){a=a.getParentInput().name;(a=this.getOutlinePath_(a))&&(b?a.setAttribute(\"filter\",\"url(#\"+this.constants.replacementGlowFilterId+\")\"):a.removeAttribute(\"filter\"))};\nBlockly.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var a=0,b=Object.keys(this.outlines_),c;c=b[a];a++)this.remainingOutlines_[c]=1};Blockly.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var a=0,b=Object.keys(this.remainingOutlines_),c;c=b[a];a++)this.removeOutlinePath_(c);this.remainingOutlines_=null};\nBlockly.zelos.PathObject.prototype.setOutlinePath=function(a,b){a=this.getOutlinePath_(a);a.setAttribute(\"d\",b);a.setAttribute(\"fill\",this.style.colourTertiary)};Blockly.zelos.PathObject.prototype.getOutlinePath_=function(a){this.outlines_[a]||(this.outlines_[a]=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{\"class\":\"blocklyOutlinePath\",d:\"\"},this.svgRoot));this.remainingOutlines_&&delete this.remainingOutlines_[a];return this.outlines_[a]};\nBlockly.zelos.PathObject.prototype.removeOutlinePath_=function(a){this.outlines_[a].parentNode.removeChild(this.outlines_[a]);delete this.outlines_[a]};Blockly.zelos.MarkerSvg=function(a,b,c){Blockly.zelos.MarkerSvg.superClass_.constructor.call(this,a,b,c)};Blockly.utils.object.inherits(Blockly.zelos.MarkerSvg,Blockly.blockRendering.MarkerSvg);Blockly.zelos.MarkerSvg.prototype.showWithInputOutput_=function(a){var b=a.getSourceBlock();a=a.getLocation().getOffsetInBlock();this.positionCircle_(a.x,a.y);this.setParent_(b);this.showCurrent_()};Blockly.zelos.MarkerSvg.prototype.showWithOutput_=function(a){this.showWithInputOutput_(a)};\nBlockly.zelos.MarkerSvg.prototype.showWithInput_=function(a){this.showWithInputOutput_(a)};Blockly.zelos.MarkerSvg.prototype.showWithBlock_=function(a){a=a.getLocation();var b=a.getHeightWidth();this.positionRect_(0,0,b.width,b.height);this.setParent_(a);this.showCurrent_()};Blockly.zelos.MarkerSvg.prototype.positionCircle_=function(a,b){this.markerCircle_.setAttribute(\"cx\",a);this.markerCircle_.setAttribute(\"cy\",b);this.currentMarkerSvg=this.markerCircle_};\nBlockly.zelos.MarkerSvg.prototype.hide=function(){Blockly.zelos.MarkerSvg.superClass_.hide.call(this);this.markerCircle_.style.display=\"none\"};\nBlockly.zelos.MarkerSvg.prototype.createDomInternal_=function(){Blockly.zelos.MarkerSvg.superClass_.createDomInternal_.call(this);this.markerCircle_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:\"display: none\",\"stroke-width\":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_);if(this.isCursor()){var a=this.getBlinkProperties_();Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,a,this.markerCircle_)}return this.markerSvg_};\nBlockly.zelos.MarkerSvg.prototype.applyColour_=function(a){Blockly.zelos.MarkerSvg.superClass_.applyColour_.call(this,a);this.markerCircle_.setAttribute(\"fill\",this.colour_);this.markerCircle_.setAttribute(\"stroke\",this.colour_);this.isCursor()&&this.markerCircle_.firstChild.setAttribute(\"values\",this.colour_+\";transparent;transparent;\")};Blockly.zelos.Renderer=function(a){Blockly.zelos.Renderer.superClass_.constructor.call(this,a)};Blockly.utils.object.inherits(Blockly.zelos.Renderer,Blockly.blockRendering.Renderer);Blockly.zelos.Renderer.prototype.makeConstants_=function(){return new Blockly.zelos.ConstantProvider};Blockly.zelos.Renderer.prototype.makeRenderInfo_=function(a){return new Blockly.zelos.RenderInfo(this,a)};Blockly.zelos.Renderer.prototype.makeDrawer_=function(a,b){return new Blockly.zelos.Drawer(a,b)};\nBlockly.zelos.Renderer.prototype.makeMarkerDrawer=function(a,b){return new Blockly.zelos.MarkerSvg(a,this.getConstants(),b)};Blockly.zelos.Renderer.prototype.makePathObject=function(a,b){return new Blockly.zelos.PathObject(a,b,this.getConstants())};Blockly.zelos.Renderer.prototype.shouldHighlightConnection=function(a){return a.type!=Blockly.INPUT_VALUE&&a.type!==Blockly.OUTPUT_VALUE};\nBlockly.zelos.Renderer.prototype.getConnectionPreviewMethod=function(a,b,c){return b.type==Blockly.OUTPUT_VALUE?a.isConnected()?Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:Blockly.zelos.Renderer.superClass_.getConnectionPreviewMethod(a,b,c)};Blockly.blockRendering.register(\"zelos\",Blockly.zelos.Renderer);Blockly.Themes.Dark=Blockly.Theme.defineTheme(\"dark\",{base:Blockly.Themes.Classic,componentStyles:{workspaceBackgroundColour:\"#1e1e1e\",toolboxBackgroundColour:\"blackBackground\",toolboxForegroundColour:\"#fff\",flyoutBackgroundColour:\"#252526\",flyoutForegroundColour:\"#ccc\",flyoutOpacity:1,scrollbarColour:\"#797979\",insertionMarkerColour:\"#fff\",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:\"#d0d0d0\",blackBackground:\"#333\"}});Blockly.Themes.Deuteranopia={};\nBlockly.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:\"#f2a72c\",colourSecondary:\"#f1c172\",colourTertiary:\"#da921c\"},list_blocks:{colourPrimary:\"#7d65ab\",colourSecondary:\"#a88be0\",colourTertiary:\"#66518e\"},logic_blocks:{colourPrimary:\"#9fd2f1\",colourSecondary:\"#c0e0f4\",colourTertiary:\"#74bae5\"},loop_blocks:{colourPrimary:\"#795a07\",colourSecondary:\"#ac8726\",colourTertiary:\"#c4a03f\"},math_blocks:{colourPrimary:\"#e6da39\",colourSecondary:\"#f3ec8e\",colourTertiary:\"#f2eeb7\"},procedure_blocks:{colourPrimary:\"#590721\",\ncolourSecondary:\"#8c475d\",colourTertiary:\"#885464\"},text_blocks:{colourPrimary:\"#058863\",colourSecondary:\"#5ecfaf\",colourTertiary:\"#04684c\"},variable_blocks:{colourPrimary:\"#47025a\",colourSecondary:\"#820fa1\",colourTertiary:\"#8e579d\"},variable_dynamic_blocks:{colourPrimary:\"#47025a\",colourSecondary:\"#820fa1\",colourTertiary:\"#8e579d\"}};\nBlockly.Themes.Deuteranopia.categoryStyles={colour_category:{colour:\"#f2a72c\"},list_category:{colour:\"#7d65ab\"},logic_category:{colour:\"#9fd2f1\"},loop_category:{colour:\"#795a07\"},math_category:{colour:\"#e6da39\"},procedure_category:{colour:\"#590721\"},text_category:{colour:\"#058863\"},variable_category:{colour:\"#47025a\"},variable_dynamic_category:{colour:\"#47025a\"}};Blockly.Themes.Deuteranopia=new Blockly.Theme(\"deuteranopia\",Blockly.Themes.Deuteranopia.defaultBlockStyles,Blockly.Themes.Deuteranopia.categoryStyles);Blockly.Themes.HighContrast={};\nBlockly.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:\"#a52714\",colourSecondary:\"#FB9B8C\",colourTertiary:\"#FBE1DD\"},list_blocks:{colourPrimary:\"#4a148c\",colourSecondary:\"#AD7BE9\",colourTertiary:\"#CDB6E9\"},logic_blocks:{colourPrimary:\"#01579b\",colourSecondary:\"#64C7FF\",colourTertiary:\"#C5EAFF\"},loop_blocks:{colourPrimary:\"#33691e\",colourSecondary:\"#9AFF78\",colourTertiary:\"#E1FFD7\"},math_blocks:{colourPrimary:\"#1a237e\",colourSecondary:\"#8A9EFF\",colourTertiary:\"#DCE2FF\"},procedure_blocks:{colourPrimary:\"#006064\",\ncolourSecondary:\"#77E6EE\",colourTertiary:\"#CFECEE\"},text_blocks:{colourPrimary:\"#004d40\",colourSecondary:\"#5ae27c\",colourTertiary:\"#D2FFDD\"},variable_blocks:{colourPrimary:\"#880e4f\",colourSecondary:\"#FF73BE\",colourTertiary:\"#FFD4EB\"},variable_dynamic_blocks:{colourPrimary:\"#880e4f\",colourSecondary:\"#FF73BE\",colourTertiary:\"#FFD4EB\"},hat_blocks:{colourPrimary:\"#880e4f\",colourSecondary:\"#FF73BE\",colourTertiary:\"#FFD4EB\",hat:\"cap\"}};\nBlockly.Themes.HighContrast.categoryStyles={colour_category:{colour:\"#a52714\"},list_category:{colour:\"#4a148c\"},logic_category:{colour:\"#01579b\"},loop_category:{colour:\"#33691e\"},math_category:{colour:\"#1a237e\"},procedure_category:{colour:\"#006064\"},text_category:{colour:\"#004d40\"},variable_category:{colour:\"#880e4f\"},variable_dynamic_category:{colour:\"#880e4f\"}};Blockly.Themes.HighContrast=new Blockly.Theme(\"highcontrast\",Blockly.Themes.HighContrast.defaultBlockStyles,Blockly.Themes.HighContrast.categoryStyles);\nBlockly.Themes.HighContrast.setComponentStyle(\"selectedGlowColour\",\"#000000\");Blockly.Themes.HighContrast.setComponentStyle(\"selectedGlowSize\",1);Blockly.Themes.HighContrast.setComponentStyle(\"replacementGlowColour\",\"#000000\");Blockly.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16});Blockly.Themes.Tritanopia={};\nBlockly.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:\"#05427f\",colourSecondary:\"#2974c0\",colourTertiary:\"#2d74bb\"},list_blocks:{colourPrimary:\"#b69ce8\",colourSecondary:\"#ccbaef\",colourTertiary:\"#9176c5\"},logic_blocks:{colourPrimary:\"#9fd2f1\",colourSecondary:\"#c0e0f4\",colourTertiary:\"#74bae5\"},loop_blocks:{colourPrimary:\"#aa1846\",colourSecondary:\"#d36185\",colourTertiary:\"#7c1636\"},math_blocks:{colourPrimary:\"#e6da39\",colourSecondary:\"#f3ec8e\",colourTertiary:\"#f2eeb7\"},procedure_blocks:{colourPrimary:\"#590721\",\ncolourSecondary:\"#8c475d\",colourTertiary:\"#885464\"},text_blocks:{colourPrimary:\"#058863\",colourSecondary:\"#5ecfaf\",colourTertiary:\"#04684c\"},variable_blocks:{colourPrimary:\"#4b2d84\",colourSecondary:\"#816ea7\",colourTertiary:\"#83759e\"},variable_dynamic_blocks:{colourPrimary:\"#4b2d84\",colourSecondary:\"#816ea7\",colourTertiary:\"#83759e\"}};\nBlockly.Themes.Tritanopia.categoryStyles={colour_category:{colour:\"#05427f\"},list_category:{colour:\"#b69ce8\"},logic_category:{colour:\"#9fd2f1\"},loop_category:{colour:\"#aa1846\"},math_category:{colour:\"#e6da39\"},procedure_category:{colour:\"#590721\"},text_category:{colour:\"#058863\"},variable_category:{colour:\"#4b2d84\"},variable_dynamic_category:{colour:\"#4b2d84\"}};Blockly.Themes.Tritanopia=new Blockly.Theme(\"tritanopia\",Blockly.Themes.Tritanopia.defaultBlockStyles,Blockly.Themes.Tritanopia.categoryStyles);Blockly.requires={};\nreturn Blockly;\n}));\n\n\n//# sourceMappingURL=blockly_compressed.js.map\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"yLpj\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNlk4Ly5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ibG9ja2x5L2Jsb2NrbHlfY29tcHJlc3NlZC5qcz9lOThmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERvIG5vdCBlZGl0IHRoaXMgZmlsZTsgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgZ3VscC5cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbjsoZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7IC8vIEFNRFxuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7IC8vIE5vZGUuanNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHsgLy8gQnJvd3NlclxuICAgIHJvb3QuQmxvY2tseSA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO3ZhciBCbG9ja2x5PXtjb25zdGFudHM6e30sTElORV9NT0RFX01VTFRJUExJRVI6NDAsUEFHRV9NT0RFX01VTFRJUExJRVI6MTI1LERSQUdfUkFESVVTOjUsRkxZT1VUX0RSQUdfUkFESVVTOjEwLFNOQVBfUkFESVVTOjI4fTtCbG9ja2x5LkNPTk5FQ1RJTkdfU05BUF9SQURJVVM9QmxvY2tseS5TTkFQX1JBRElVUztCbG9ja2x5LkNVUlJFTlRfQ09OTkVDVElPTl9QUkVGRVJFTkNFPTg7QmxvY2tseS5CVU1QX0RFTEFZPTI1MDtCbG9ja2x5LkJVTVBfUkFORE9NTkVTUz0xMDtCbG9ja2x5LkNPTExBUFNFX0NIQVJTPTMwO0Jsb2NrbHkuTE9OR1BSRVNTPTc1MDtCbG9ja2x5LlNPVU5EX0xJTUlUPTEwMDtCbG9ja2x5LkRSQUdfU1RBQ0s9ITA7QmxvY2tseS5IU1ZfU0FUVVJBVElPTj0uNDU7QmxvY2tseS5IU1ZfVkFMVUU9LjY1O0Jsb2NrbHkuU1BSSVRFPXt3aWR0aDo5NixoZWlnaHQ6MTI0LHVybDpcInNwcml0ZXMucG5nXCJ9O0Jsb2NrbHkuSU5QVVRfVkFMVUU9MTtcbkJsb2NrbHkuT1VUUFVUX1ZBTFVFPTI7QmxvY2tseS5ORVhUX1NUQVRFTUVOVD0zO0Jsb2NrbHkuUFJFVklPVVNfU1RBVEVNRU5UPTQ7QmxvY2tseS5EVU1NWV9JTlBVVD01O0Jsb2NrbHkuQUxJR05fTEVGVD0tMTtCbG9ja2x5LkFMSUdOX0NFTlRSRT0wO0Jsb2NrbHkuQUxJR05fUklHSFQ9MTtCbG9ja2x5LkRSQUdfTk9ORT0wO0Jsb2NrbHkuRFJBR19TVElDS1k9MTtCbG9ja2x5LkRSQUdfQkVHSU49MTtCbG9ja2x5LkRSQUdfRlJFRT0yO0Jsb2NrbHkuT1BQT1NJVEVfVFlQRT1bXTtCbG9ja2x5Lk9QUE9TSVRFX1RZUEVbQmxvY2tseS5JTlBVVF9WQUxVRV09QmxvY2tseS5PVVRQVVRfVkFMVUU7QmxvY2tseS5PUFBPU0lURV9UWVBFW0Jsb2NrbHkuT1VUUFVUX1ZBTFVFXT1CbG9ja2x5LklOUFVUX1ZBTFVFO0Jsb2NrbHkuT1BQT1NJVEVfVFlQRVtCbG9ja2x5Lk5FWFRfU1RBVEVNRU5UXT1CbG9ja2x5LlBSRVZJT1VTX1NUQVRFTUVOVDtcbkJsb2NrbHkuT1BQT1NJVEVfVFlQRVtCbG9ja2x5LlBSRVZJT1VTX1NUQVRFTUVOVF09QmxvY2tseS5ORVhUX1NUQVRFTUVOVDtCbG9ja2x5LlRPT0xCT1hfQVRfVE9QPTA7QmxvY2tseS5UT09MQk9YX0FUX0JPVFRPTT0xO0Jsb2NrbHkuVE9PTEJPWF9BVF9MRUZUPTI7QmxvY2tseS5UT09MQk9YX0FUX1JJR0hUPTM7QmxvY2tseS5ERUxFVEVfQVJFQV9OT05FPW51bGw7QmxvY2tseS5ERUxFVEVfQVJFQV9UUkFTSD0xO0Jsb2NrbHkuREVMRVRFX0FSRUFfVE9PTEJPWD0yO0Jsb2NrbHkuVkFSSUFCTEVfQ0FURUdPUllfTkFNRT1cIlZBUklBQkxFXCI7QmxvY2tseS5WQVJJQUJMRV9EWU5BTUlDX0NBVEVHT1JZX05BTUU9XCJWQVJJQUJMRV9EWU5BTUlDXCI7QmxvY2tseS5QUk9DRURVUkVfQ0FURUdPUllfTkFNRT1cIlBST0NFRFVSRVwiO0Jsb2NrbHkuUkVOQU1FX1ZBUklBQkxFX0lEPVwiUkVOQU1FX1ZBUklBQkxFX0lEXCI7QmxvY2tseS5ERUxFVEVfVkFSSUFCTEVfSUQ9XCJERUxFVEVfVkFSSUFCTEVfSURcIjtCbG9ja2x5LnJlZ2lzdHJ5PXt9O0Jsb2NrbHkucmVnaXN0cnkudHlwZU1hcF89e307QmxvY2tseS5yZWdpc3RyeS5ERUZBVUxUPVwiZGVmYXVsdFwiO0Jsb2NrbHkucmVnaXN0cnkuVHlwZT1mdW5jdGlvbihhKXt0aGlzLm5hbWVfPWF9O0Jsb2NrbHkucmVnaXN0cnkuVHlwZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lX307QmxvY2tseS5yZWdpc3RyeS5UeXBlLkNPTk5FQ1RJT05fQ0hFQ0tFUj1uZXcgQmxvY2tseS5yZWdpc3RyeS5UeXBlKFwiY29ubmVjdGlvbkNoZWNrZXJcIik7QmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5UPW5ldyBCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUoXCJldmVudFwiKTtCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRklFTEQ9bmV3IEJsb2NrbHkucmVnaXN0cnkuVHlwZShcImZpZWxkXCIpO0Jsb2NrbHkucmVnaXN0cnkuVHlwZS5SRU5ERVJFUj1uZXcgQmxvY2tseS5yZWdpc3RyeS5UeXBlKFwicmVuZGVyZXJcIik7XG5CbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVE9PTEJPWD1uZXcgQmxvY2tseS5yZWdpc3RyeS5UeXBlKFwidG9vbGJveFwiKTtCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVEhFTUU9bmV3IEJsb2NrbHkucmVnaXN0cnkuVHlwZShcInRoZW1lXCIpO0Jsb2NrbHkucmVnaXN0cnkuVHlwZS5UT09MQk9YX0lURU09bmV3IEJsb2NrbHkucmVnaXN0cnkuVHlwZShcInRvb2xib3hJdGVtXCIpO0Jsb2NrbHkucmVnaXN0cnkuVHlwZS5GTFlPVVRTX1ZFUlRJQ0FMX1RPT0xCT1g9bmV3IEJsb2NrbHkucmVnaXN0cnkuVHlwZShcImZseW91dHNWZXJ0aWNhbFRvb2xib3hcIik7QmxvY2tseS5yZWdpc3RyeS5UeXBlLkZMWU9VVFNfSE9SSVpPTlRBTF9UT09MQk9YPW5ldyBCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUoXCJmbHlvdXRzSG9yaXpvbnRhbFRvb2xib3hcIik7XG5CbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyPWZ1bmN0aW9uKGEsYixjLGQpe2lmKCEoYSBpbnN0YW5jZW9mIEJsb2NrbHkucmVnaXN0cnkuVHlwZSkmJlwic3RyaW5nXCIhPXR5cGVvZiBhfHxcIlwiPT1TdHJpbmcoYSkudHJpbSgpKXRocm93IEVycm9yKCdJbnZhbGlkIHR5cGUgXCInK2ErJ1wiLiBUaGUgdHlwZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIEJsb2NrbHkucmVnaXN0cnkuVHlwZS4nKTthPVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBifHxcIlwiPT1iLnRyaW0oKSl0aHJvdyBFcnJvcignSW52YWxpZCBuYW1lIFwiJytiKydcIi4gVGhlIG5hbWUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyk7Yj1iLnRvTG93ZXJDYXNlKCk7aWYoIWMpdGhyb3cgRXJyb3IoXCJDYW4gbm90IHJlZ2lzdGVyIGEgbnVsbCB2YWx1ZVwiKTt2YXIgZT1CbG9ja2x5LnJlZ2lzdHJ5LnR5cGVNYXBfW2FdO2V8fChlPUJsb2NrbHkucmVnaXN0cnkudHlwZU1hcF9bYV09XG57fSk7QmxvY2tseS5yZWdpc3RyeS52YWxpZGF0ZV8oYSxjKTtpZighZCYmZVtiXSl0aHJvdyBFcnJvcignTmFtZSBcIicrYisnXCIgd2l0aCB0eXBlIFwiJythKydcIiBhbHJlYWR5IHJlZ2lzdGVyZWQuJyk7ZVtiXT1jfTtCbG9ja2x5LnJlZ2lzdHJ5LnZhbGlkYXRlXz1mdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIFN0cmluZyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRklFTEQpOmlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIuZnJvbUpzb24pdGhyb3cgRXJyb3IoJ1R5cGUgXCInK2ErJ1wiIG11c3QgaGF2ZSBhIGZyb21Kc29uIGZ1bmN0aW9uJyk7fX07XG5CbG9ja2x5LnJlZ2lzdHJ5LnVucmVnaXN0ZXI9ZnVuY3Rpb24oYSxiKXthPVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpO2I9Yi50b0xvd2VyQ2FzZSgpO3ZhciBjPUJsb2NrbHkucmVnaXN0cnkudHlwZU1hcF9bYV07Yz9jW2JdP2RlbGV0ZSBCbG9ja2x5LnJlZ2lzdHJ5LnR5cGVNYXBfW2FdW2JdOmNvbnNvbGUud2FybignTm8gbmFtZSBcIicrYisnXCIgd2l0aCB0eXBlIFwiJythKydcIiBmb3VuZCcpOmNvbnNvbGUud2FybignTm8gdHlwZSBcIicrYSsnXCIgZm91bmQnKX07XG5CbG9ja2x5LnJlZ2lzdHJ5LmdldEl0ZW1fPWZ1bmN0aW9uKGEsYil7YT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKTtiPWIudG9Mb3dlckNhc2UoKTt2YXIgYz1CbG9ja2x5LnJlZ2lzdHJ5LnR5cGVNYXBfW2FdO3JldHVybiBjP2NbYl0/Y1tiXTooY29uc29sZS53YXJuKCdObyBuYW1lIFwiJytiKydcIiB3aXRoIHR5cGUgXCInK2ErJ1wiIGZvdW5kJyksbnVsbCk6KGNvbnNvbGUud2FybignTm8gdHlwZSBcIicrYSsnXCIgZm91bmQnKSxudWxsKX07QmxvY2tseS5yZWdpc3RyeS5oYXNJdGVtPWZ1bmN0aW9uKGEsYil7YT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKTtiPWIudG9Mb3dlckNhc2UoKTtyZXR1cm4oYT1CbG9ja2x5LnJlZ2lzdHJ5LnR5cGVNYXBfW2FdKT8hIWFbYl06ITF9O0Jsb2NrbHkucmVnaXN0cnkuZ2V0Q2xhc3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQmxvY2tseS5yZWdpc3RyeS5nZXRJdGVtXyhhLGIpfTtcbkJsb2NrbHkucmVnaXN0cnkuZ2V0T2JqZWN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIEJsb2NrbHkucmVnaXN0cnkuZ2V0SXRlbV8oYSxiKX07QmxvY2tseS5yZWdpc3RyeS5nZXRDbGFzc0Zyb21PcHRpb25zPWZ1bmN0aW9uKGEsYil7Yj1iLnBsdWdpbnNbYS50b1N0cmluZygpXXx8QmxvY2tseS5yZWdpc3RyeS5ERUZBVUxUO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGI/YjpCbG9ja2x5LnJlZ2lzdHJ5LmdldENsYXNzKGEsYil9O0Jsb2NrbHkudXRpbHM9e307QmxvY2tseS51dGlscy5nbG9iYWw9ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiPT09dHlwZW9mIHNlbGY/c2VsZjpcIm9iamVjdFwiPT09dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJvYmplY3RcIj09PXR5cGVvZiBnbG9iYWw/Z2xvYmFsOnRoaXN9KCk7QmxvY2tseS5Nc2c9e307QmxvY2tseS51dGlscy5nbG9iYWwuQmxvY2tseXx8KEJsb2NrbHkudXRpbHMuZ2xvYmFsLkJsb2NrbHk9e30pO0Jsb2NrbHkudXRpbHMuZ2xvYmFsLkJsb2NrbHkuTXNnfHwoQmxvY2tseS51dGlscy5nbG9iYWwuQmxvY2tseS5Nc2c9QmxvY2tseS5Nc2cpO0Jsb2NrbHkudXRpbHMuY29sb3VyPXt9O1xuQmxvY2tseS51dGlscy5jb2xvdXIucGFyc2U9ZnVuY3Rpb24oYSl7YT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKS50cmltKCk7dmFyIGI9QmxvY2tseS51dGlscy5jb2xvdXIubmFtZXNbYV07aWYoYilyZXR1cm4gYjtiPVwiMHhcIj09YS5zdWJzdHJpbmcoMCwyKT9cIiNcIithLnN1YnN0cmluZygyKTphO2I9XCIjXCI9PWJbMF0/YjpcIiNcIitiO2lmKC9eI1swLTlhLWZdezZ9JC8udGVzdChiKSlyZXR1cm4gYjtpZigvXiNbMC05YS1mXXszfSQvLnRlc3QoYikpcmV0dXJuW1wiI1wiLGJbMV0sYlsxXSxiWzJdLGJbMl0sYlszXSxiWzNdXS5qb2luKFwiXCIpO3ZhciBjPWEubWF0Y2goL14oPzpyZ2IpP1xccypcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKSQvKTtyZXR1cm4gYyYmKGE9TnVtYmVyKGNbMV0pLGI9TnVtYmVyKGNbMl0pLGM9TnVtYmVyKGNbM10pLDA8PWEmJjI1Nj5hJiYwPD1iJiYyNTY+YiYmMDw9YyYmMjU2PmMpP0Jsb2NrbHkudXRpbHMuY29sb3VyLnJnYlRvSGV4KGEsYixcbmMpOm51bGx9O0Jsb2NrbHkudXRpbHMuY29sb3VyLnJnYlRvSGV4PWZ1bmN0aW9uKGEsYixjKXtiPWE8PDE2fGI8PDh8YztyZXR1cm4gMTY+YT9cIiNcIisoMTY3NzcyMTZ8YikudG9TdHJpbmcoMTYpLnN1YnN0cigxKTpcIiNcIitiLnRvU3RyaW5nKDE2KX07QmxvY2tseS51dGlscy5jb2xvdXIuaGV4VG9SZ2I9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnV0aWxzLmNvbG91ci5wYXJzZShhKTtpZighYSlyZXR1cm5bMCwwLDBdO2E9cGFyc2VJbnQoYS5zdWJzdHIoMSksMTYpO3JldHVyblthPj4xNixhPj44JjI1NSxhJjI1NV19O1xuQmxvY2tseS51dGlscy5jb2xvdXIuaHN2VG9IZXg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPTAsZT0wLGY9MDtpZigwPT1iKWY9ZT1kPWM7ZWxzZXt2YXIgZz1NYXRoLmZsb29yKGEvNjApLGg9YS82MC1nO2E9YyooMS1iKTt2YXIgaz1jKigxLWIqaCk7Yj1jKigxLWIqKDEtaCkpO3N3aXRjaChnKXtjYXNlIDE6ZD1rO2U9YztmPWE7YnJlYWs7Y2FzZSAyOmQ9YTtlPWM7Zj1iO2JyZWFrO2Nhc2UgMzpkPWE7ZT1rO2Y9YzticmVhaztjYXNlIDQ6ZD1iO2U9YTtmPWM7YnJlYWs7Y2FzZSA1OmQ9YztlPWE7Zj1rO2JyZWFrO2Nhc2UgNjpjYXNlIDA6ZD1jLGU9YixmPWF9fXJldHVybiBCbG9ja2x5LnV0aWxzLmNvbG91ci5yZ2JUb0hleChNYXRoLmZsb29yKGQpLE1hdGguZmxvb3IoZSksTWF0aC5mbG9vcihmKSl9O1xuQmxvY2tseS51dGlscy5jb2xvdXIuYmxlbmQ9ZnVuY3Rpb24oYSxiLGMpe2E9QmxvY2tseS51dGlscy5jb2xvdXIucGFyc2UoYSk7aWYoIWEpcmV0dXJuIG51bGw7Yj1CbG9ja2x5LnV0aWxzLmNvbG91ci5wYXJzZShiKTtpZighYilyZXR1cm4gbnVsbDthPUJsb2NrbHkudXRpbHMuY29sb3VyLmhleFRvUmdiKGEpO2I9QmxvY2tseS51dGlscy5jb2xvdXIuaGV4VG9SZ2IoYik7cmV0dXJuIEJsb2NrbHkudXRpbHMuY29sb3VyLnJnYlRvSGV4KE1hdGgucm91bmQoYlswXStjKihhWzBdLWJbMF0pKSxNYXRoLnJvdW5kKGJbMV0rYyooYVsxXS1iWzFdKSksTWF0aC5yb3VuZChiWzJdK2MqKGFbMl0tYlsyXSkpKX07XG5CbG9ja2x5LnV0aWxzLmNvbG91ci5uYW1lcz17YXF1YTpcIiMwMGZmZmZcIixibGFjazpcIiMwMDAwMDBcIixibHVlOlwiIzAwMDBmZlwiLGZ1Y2hzaWE6XCIjZmYwMGZmXCIsZ3JheTpcIiM4MDgwODBcIixncmVlbjpcIiMwMDgwMDBcIixsaW1lOlwiIzAwZmYwMFwiLG1hcm9vbjpcIiM4MDAwMDBcIixuYXZ5OlwiIzAwMDA4MFwiLG9saXZlOlwiIzgwODAwMFwiLHB1cnBsZTpcIiM4MDAwODBcIixyZWQ6XCIjZmYwMDAwXCIsc2lsdmVyOlwiI2MwYzBjMFwiLHRlYWw6XCIjMDA4MDgwXCIsd2hpdGU6XCIjZmZmZmZmXCIseWVsbG93OlwiI2ZmZmYwMFwifTtCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGU9ZnVuY3Rpb24oYSxiKXt0aGlzLng9YTt0aGlzLnk9Yn07QmxvY2tseS51dGlscy5Db29yZGluYXRlLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBhPT1iPyEwOmEmJmI/YS54PT1iLngmJmEueT09Yi55OiExfTtCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlzdGFuY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngtYi54O2E9YS55LWIueTtyZXR1cm4gTWF0aC5zcXJ0KGMqYythKmEpfTtCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUubWFnbml0dWRlPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoYS54KmEueCthLnkqYS55KX07QmxvY2tseS51dGlscy5Db29yZGluYXRlLmRpZmZlcmVuY2U9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShhLngtYi54LGEueS1iLnkpfTtcbkJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5zdW09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShhLngrYi54LGEueStiLnkpfTtCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUucHJvdG90eXBlLnNjYWxlPWZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7cmV0dXJuIHRoaXN9O0Jsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hO3RoaXMueSs9YjtyZXR1cm4gdGhpc307QmxvY2tseS51dGlscy5SZWN0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudG9wPWE7dGhpcy5ib3R0b209Yjt0aGlzLmxlZnQ9Yzt0aGlzLnJpZ2h0PWR9O0Jsb2NrbHkudXRpbHMuUmVjdC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49dGhpcy5sZWZ0JiZhPD10aGlzLnJpZ2h0JiZiPj10aGlzLnRvcCYmYjw9dGhpcy5ib3R0b219O0Jsb2NrbHkudXRpbHMuc3RyaW5nPXt9O0Jsb2NrbHkudXRpbHMuc3RyaW5nLnN0YXJ0c1dpdGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMD09YS5sYXN0SW5kZXhPZihiLDApfTtCbG9ja2x5LnV0aWxzLnN0cmluZy5zaG9ydGVzdFN0cmluZ0xlbmd0aD1mdW5jdGlvbihhKXtyZXR1cm4gYS5sZW5ndGg/YS5yZWR1Y2UoZnVuY3Rpb24oYixjKXtyZXR1cm4gYi5sZW5ndGg8Yy5sZW5ndGg/YjpjfSkubGVuZ3RoOjB9O1xuQmxvY2tseS51dGlscy5zdHJpbmcuY29tbW9uV29yZFByZWZpeD1mdW5jdGlvbihhLGIpe2lmKCFhLmxlbmd0aClyZXR1cm4gMDtpZigxPT1hLmxlbmd0aClyZXR1cm4gYVswXS5sZW5ndGg7dmFyIGM9MDtiPWJ8fEJsb2NrbHkudXRpbHMuc3RyaW5nLnNob3J0ZXN0U3RyaW5nTGVuZ3RoKGEpO2Zvcih2YXIgZD0wO2Q8YjtkKyspe2Zvcih2YXIgZT1hWzBdW2RdLGY9MTtmPGEubGVuZ3RoO2YrKylpZihlIT1hW2ZdW2RdKXJldHVybiBjO1wiIFwiPT1lJiYoYz1kKzEpfWZvcihmPTE7ZjxhLmxlbmd0aDtmKyspaWYoKGU9YVtmXVtkXSkmJlwiIFwiIT1lKXJldHVybiBjO3JldHVybiBifTtcbkJsb2NrbHkudXRpbHMuc3RyaW5nLmNvbW1vbldvcmRTdWZmaXg9ZnVuY3Rpb24oYSxiKXtpZighYS5sZW5ndGgpcmV0dXJuIDA7aWYoMT09YS5sZW5ndGgpcmV0dXJuIGFbMF0ubGVuZ3RoO3ZhciBjPTA7Yj1ifHxCbG9ja2x5LnV0aWxzLnN0cmluZy5zaG9ydGVzdFN0cmluZ0xlbmd0aChhKTtmb3IodmFyIGQ9MDtkPGI7ZCsrKXtmb3IodmFyIGU9YVswXS5zdWJzdHIoLWQtMSwxKSxmPTE7ZjxhLmxlbmd0aDtmKyspaWYoZSE9YVtmXS5zdWJzdHIoLWQtMSwxKSlyZXR1cm4gYztcIiBcIj09ZSYmKGM9ZCsxKX1mb3IoZj0xO2Y8YS5sZW5ndGg7ZisrKWlmKChlPWFbZl0uY2hhckF0KGFbZl0ubGVuZ3RoLWQtMSkpJiZcIiBcIiE9ZSlyZXR1cm4gYztyZXR1cm4gYn07QmxvY2tseS51dGlscy5zdHJpbmcud3JhcD1mdW5jdGlvbihhLGIpe2E9YS5zcGxpdChcIlxcblwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdPUJsb2NrbHkudXRpbHMuc3RyaW5nLndyYXBMaW5lXyhhW2NdLGIpO3JldHVybiBhLmpvaW4oXCJcXG5cIil9O1xuQmxvY2tseS51dGlscy5zdHJpbmcud3JhcExpbmVfPWZ1bmN0aW9uKGEsYil7aWYoYS5sZW5ndGg8PWIpcmV0dXJuIGE7Zm9yKHZhciBjPWEudHJpbSgpLnNwbGl0KC9cXHMrLyksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0ubGVuZ3RoPmImJihiPWNbZF0ubGVuZ3RoKTtkPS1JbmZpbml0eTt2YXIgZT0xO2Rve3ZhciBmPWQ7dmFyIGc9YTthPVtdO3ZhciBoPWMubGVuZ3RoL2Usaz0xO2ZvcihkPTA7ZDxjLmxlbmd0aC0xO2QrKylrPChkKzEuNSkvaD8oaysrLGFbZF09ITApOmFbZF09ITE7YT1CbG9ja2x5LnV0aWxzLnN0cmluZy53cmFwTXV0YXRlXyhjLGEsYik7ZD1CbG9ja2x5LnV0aWxzLnN0cmluZy53cmFwU2NvcmVfKGMsYSxiKTthPUJsb2NrbHkudXRpbHMuc3RyaW5nLndyYXBUb1RleHRfKGMsYSk7ZSsrfXdoaWxlKGQ+Zik7cmV0dXJuIGd9O1xuQmxvY2tseS51dGlscy5zdHJpbmcud3JhcFNjb3JlXz1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPVswXSxlPVtdLGY9MDtmPGEubGVuZ3RoO2YrKylkW2QubGVuZ3RoLTFdKz1hW2ZdLmxlbmd0aCwhMD09PWJbZl0/KGQucHVzaCgwKSxlLnB1c2goYVtmXS5jaGFyQXQoYVtmXS5sZW5ndGgtMSkpKTohMT09PWJbZl0mJmRbZC5sZW5ndGgtMV0rKzthPU1hdGgubWF4LmFwcGx5KE1hdGgsZCk7Zm9yKGY9Yj0wO2Y8ZC5sZW5ndGg7ZisrKWItPTIqTWF0aC5wb3coTWF0aC5hYnMoYy1kW2ZdKSwxLjUpLGItPU1hdGgucG93KGEtZFtmXSwxLjUpLC0xIT1cIi4/IVwiLmluZGV4T2YoZVtmXSk/Yis9Yy8zOi0xIT1cIiw7KV19XCIuaW5kZXhPZihlW2ZdKSYmKGIrPWMvNCk7MTxkLmxlbmd0aCYmZFtkLmxlbmd0aC0xXTw9ZFtkLmxlbmd0aC0yXSYmKGIrPS41KTtyZXR1cm4gYn07XG5CbG9ja2x5LnV0aWxzLnN0cmluZy53cmFwTXV0YXRlXz1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPUJsb2NrbHkudXRpbHMuc3RyaW5nLndyYXBTY29yZV8oYSxiLGMpLGUsZj0wO2Y8Yi5sZW5ndGgtMTtmKyspaWYoYltmXSE9YltmKzFdKXt2YXIgZz1bXS5jb25jYXQoYik7Z1tmXT0hZ1tmXTtnW2YrMV09IWdbZisxXTt2YXIgaD1CbG9ja2x5LnV0aWxzLnN0cmluZy53cmFwU2NvcmVfKGEsZyxjKTtoPmQmJihkPWgsZT1nKX1yZXR1cm4gZT9CbG9ja2x5LnV0aWxzLnN0cmluZy53cmFwTXV0YXRlXyhhLGUsYyk6Yn07QmxvY2tseS51dGlscy5zdHJpbmcud3JhcFRvVGV4dF89ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKSx2b2lkIDAhPT1iW2RdJiZjLnB1c2goYltkXT9cIlxcblwiOlwiIFwiKTtyZXR1cm4gYy5qb2luKFwiXCIpfTtCbG9ja2x5LnV0aWxzLlNpemU9ZnVuY3Rpb24oYSxiKXt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yn07QmxvY2tseS51dGlscy5TaXplLmVxdWFscz1mdW5jdGlvbihhLGIpe3JldHVybiBhPT1iPyEwOmEmJmI/YS53aWR0aD09Yi53aWR0aCYmYS5oZWlnaHQ9PWIuaGVpZ2h0OiExfTtCbG9ja2x5LnV0aWxzLnN0eWxlPXt9O0Jsb2NrbHkudXRpbHMuc3R5bGUuZ2V0U2l6ZT1mdW5jdGlvbihhKXtpZihcIm5vbmVcIiE9QmxvY2tseS51dGlscy5zdHlsZS5nZXRTdHlsZV8oYSxcImRpc3BsYXlcIikpcmV0dXJuIEJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0U2l6ZVdpdGhEaXNwbGF5XyhhKTt2YXIgYj1hLnN0eWxlLGM9Yi5kaXNwbGF5LGQ9Yi52aXNpYmlsaXR5LGU9Yi5wb3NpdGlvbjtiLnZpc2liaWxpdHk9XCJoaWRkZW5cIjtiLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjtiLmRpc3BsYXk9XCJpbmxpbmVcIjt2YXIgZj1hLm9mZnNldFdpZHRoO2E9YS5vZmZzZXRIZWlnaHQ7Yi5kaXNwbGF5PWM7Yi5wb3NpdGlvbj1lO2IudmlzaWJpbGl0eT1kO3JldHVybiBuZXcgQmxvY2tseS51dGlscy5TaXplKGYsYSl9O0Jsb2NrbHkudXRpbHMuc3R5bGUuZ2V0U2l6ZVdpdGhEaXNwbGF5Xz1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuU2l6ZShhLm9mZnNldFdpZHRoLGEub2Zmc2V0SGVpZ2h0KX07XG5CbG9ja2x5LnV0aWxzLnN0eWxlLmdldFN0eWxlXz1mdW5jdGlvbihhLGIpe3JldHVybiBCbG9ja2x5LnV0aWxzLnN0eWxlLmdldENvbXB1dGVkU3R5bGUoYSxiKXx8QmxvY2tseS51dGlscy5zdHlsZS5nZXRDYXNjYWRlZFN0eWxlKGEsYil8fGEuc3R5bGUmJmEuc3R5bGVbYl19O0Jsb2NrbHkudXRpbHMuc3R5bGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBkb2N1bWVudC5kZWZhdWx0VmlldyYmZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSYmKGE9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9hW2JdfHxhLmdldFByb3BlcnR5VmFsdWUoYil8fFwiXCI6XCJcIn07QmxvY2tseS51dGlscy5zdHlsZS5nZXRDYXNjYWRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlW2JdOm51bGx9O1xuQmxvY2tseS51dGlscy5zdHlsZS5nZXRQYWdlT2Zmc2V0PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoMCwwKTthPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIGM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2M9bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZSh3aW5kb3cucGFnZVhPZmZzZXR8fGMuc2Nyb2xsTGVmdCx3aW5kb3cucGFnZVlPZmZzZXR8fGMuc2Nyb2xsVG9wKTtiLng9YS5sZWZ0K2MueDtiLnk9YS50b3ArYy55O3JldHVybiBifTtCbG9ja2x5LnV0aWxzLnN0eWxlLmdldFZpZXdwb3J0UGFnZU9mZnNldD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmJvZHksYj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS5zY3JvbGxMZWZ0fHxiLnNjcm9sbExlZnQsYS5zY3JvbGxUb3B8fGIuc2Nyb2xsVG9wKX07XG5CbG9ja2x5LnV0aWxzLnN0eWxlLnNldEVsZW1lbnRTaG93bj1mdW5jdGlvbihhLGIpe2Euc3R5bGUuZGlzcGxheT1iP1wiXCI6XCJub25lXCJ9O0Jsb2NrbHkudXRpbHMuc3R5bGUuaXNSaWdodFRvTGVmdD1mdW5jdGlvbihhKXtyZXR1cm5cInJ0bFwiPT1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldFN0eWxlXyhhLFwiZGlyZWN0aW9uXCIpfTtcbkJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0Qm9yZGVyQm94PWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0Q29tcHV0ZWRTdHlsZShhLFwiYm9yZGVyTGVmdFdpZHRoXCIpLGM9QmxvY2tseS51dGlscy5zdHlsZS5nZXRDb21wdXRlZFN0eWxlKGEsXCJib3JkZXJSaWdodFdpZHRoXCIpLGQ9QmxvY2tseS51dGlscy5zdHlsZS5nZXRDb21wdXRlZFN0eWxlKGEsXCJib3JkZXJUb3BXaWR0aFwiKTthPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0Q29tcHV0ZWRTdHlsZShhLFwiYm9yZGVyQm90dG9tV2lkdGhcIik7cmV0dXJue3RvcDpwYXJzZUZsb2F0KGQpLHJpZ2h0OnBhcnNlRmxvYXQoYyksYm90dG9tOnBhcnNlRmxvYXQoYSksbGVmdDpwYXJzZUZsb2F0KGIpfX07XG5CbG9ja2x5LnV0aWxzLnN0eWxlLnNjcm9sbEludG9Db250YWluZXJWaWV3PWZ1bmN0aW9uKGEsYixjKXthPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0Q29udGFpbmVyT2Zmc2V0VG9TY3JvbGxJbnRvKGEsYixjKTtiLnNjcm9sbExlZnQ9YS54O2Iuc2Nyb2xsVG9wPWEueX07XG5CbG9ja2x5LnV0aWxzLnN0eWxlLmdldENvbnRhaW5lck9mZnNldFRvU2Nyb2xsSW50bz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9QmxvY2tseS51dGlscy5zdHlsZS5nZXRQYWdlT2Zmc2V0KGEpLGU9QmxvY2tseS51dGlscy5zdHlsZS5nZXRQYWdlT2Zmc2V0KGIpLGY9QmxvY2tseS51dGlscy5zdHlsZS5nZXRCb3JkZXJCb3goYiksZz1kLngtZS54LWYubGVmdDtkPWQueS1lLnktZi50b3A7ZT1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldFNpemVXaXRoRGlzcGxheV8oYSk7YT1iLmNsaWVudFdpZHRoLWUud2lkdGg7ZT1iLmNsaWVudEhlaWdodC1lLmhlaWdodDtmPWIuc2Nyb2xsTGVmdDtiPWIuc2Nyb2xsVG9wO2M/KGYrPWctYS8yLGIrPWQtZS8yKTooZis9TWF0aC5taW4oZyxNYXRoLm1heChnLWEsMCkpLGIrPU1hdGgubWluKGQsTWF0aC5tYXgoZC1lLDApKSk7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoZixiKX07QmxvY2tseS51dGlscy51c2VyQWdlbnQ9e307XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihkKXtyZXR1cm4tMSE9Yy5pbmRleE9mKGQudG9VcHBlckNhc2UoKSl9QmxvY2tseS51dGlscy51c2VyQWdlbnQucmF3PWE7dmFyIGM9QmxvY2tseS51dGlscy51c2VyQWdlbnQucmF3LnRvVXBwZXJDYXNlKCk7QmxvY2tseS51dGlscy51c2VyQWdlbnQuSUU9YihcIlRyaWRlbnRcIil8fGIoXCJNU0lFXCIpO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LkVER0U9YihcIkVkZ2VcIik7QmxvY2tseS51dGlscy51c2VyQWdlbnQuSkFWQV9GWD1iKFwiSmF2YUZYXCIpO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LkNIUk9NRT0oYihcIkNocm9tZVwiKXx8YihcIkNyaU9TXCIpKSYmIUJsb2NrbHkudXRpbHMudXNlckFnZW50LkVER0U7QmxvY2tseS51dGlscy51c2VyQWdlbnQuV0VCS0lUPWIoXCJXZWJLaXRcIikmJiFCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5FREdFO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LkdFQ0tPPWIoXCJHZWNrb1wiKSYmIUJsb2NrbHkudXRpbHMudXNlckFnZW50LldFQktJVCYmXG4hQmxvY2tseS51dGlscy51c2VyQWdlbnQuSUUmJiFCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5FREdFO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LkFORFJPSUQ9YihcIkFuZHJvaWRcIik7QmxvY2tseS51dGlscy51c2VyQWdlbnQuSVBBRD1iKFwiaVBhZFwiKTtCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JUE9EPWIoXCJpUG9kXCIpO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LklQSE9ORT1iKFwiaVBob25lXCIpJiYhQmxvY2tseS51dGlscy51c2VyQWdlbnQuSVBBRCYmIUJsb2NrbHkudXRpbHMudXNlckFnZW50LklQT0Q7QmxvY2tseS51dGlscy51c2VyQWdlbnQuTUFDPWIoXCJNYWNpbnRvc2hcIik7QmxvY2tseS51dGlscy51c2VyQWdlbnQuVEFCTEVUPUJsb2NrbHkudXRpbHMudXNlckFnZW50LklQQUR8fEJsb2NrbHkudXRpbHMudXNlckFnZW50LkFORFJPSUQmJiFiKFwiTW9iaWxlXCIpfHxiKFwiU2lsa1wiKTtCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5NT0JJTEU9IUJsb2NrbHkudXRpbHMudXNlckFnZW50LlRBQkxFVCYmXG4oQmxvY2tseS51dGlscy51c2VyQWdlbnQuSVBPRHx8QmxvY2tseS51dGlscy51c2VyQWdlbnQuSVBIT05FfHxCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5BTkRST0lEfHxiKFwiSUVNb2JpbGVcIikpfSkoQmxvY2tseS51dGlscy5nbG9iYWwubmF2aWdhdG9yJiZCbG9ja2x5LnV0aWxzLmdsb2JhbC5uYXZpZ2F0b3IudXNlckFnZW50fHxcIlwiKTtCbG9ja2x5LnV0aWxzLm5vRXZlbnQ9ZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9O0Jsb2NrbHkudXRpbHMuaXNUYXJnZXRJbnB1dD1mdW5jdGlvbihhKXtyZXR1cm5cInRleHRhcmVhXCI9PWEudGFyZ2V0LnR5cGV8fFwidGV4dFwiPT1hLnRhcmdldC50eXBlfHxcIm51bWJlclwiPT1hLnRhcmdldC50eXBlfHxcImVtYWlsXCI9PWEudGFyZ2V0LnR5cGV8fFwicGFzc3dvcmRcIj09YS50YXJnZXQudHlwZXx8XCJzZWFyY2hcIj09YS50YXJnZXQudHlwZXx8XCJ0ZWxcIj09YS50YXJnZXQudHlwZXx8XCJ1cmxcIj09YS50YXJnZXQudHlwZXx8YS50YXJnZXQuaXNDb250ZW50RWRpdGFibGV8fGEudGFyZ2V0LmRhdGFzZXQmJlwidHJ1ZVwiPT1hLnRhcmdldC5kYXRhc2V0LmlzVGV4dElucHV0fTtcbkJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKDAsMCksYz1hLmdldEF0dHJpYnV0ZShcInhcIik7YyYmKGIueD1wYXJzZUludChjLDEwKSk7aWYoYz1hLmdldEF0dHJpYnV0ZShcInlcIikpYi55PXBhcnNlSW50KGMsMTApO2lmKGM9KGM9YS5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIikpJiZjLm1hdGNoKEJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWS5YWV9SRUdFWF8pKWIueCs9TnVtYmVyKGNbMV0pLGNbM10mJihiLnkrPU51bWJlcihjWzNdKSk7KGE9YS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSkmJi0xPGEuaW5kZXhPZihcInRyYW5zbGF0ZVwiKSYmKGE9YS5tYXRjaChCbG9ja2x5LnV0aWxzLmdldFJlbGF0aXZlWFkuWFlfU1RZTEVfUkVHRVhfKSkmJihiLngrPU51bWJlcihhWzFdKSxhWzNdJiYoYi55Kz1OdW1iZXIoYVszXSkpKTtyZXR1cm4gYn07XG5CbG9ja2x5LnV0aWxzLmdldEluamVjdGlvbkRpdlhZXz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTA7YTspe3ZhciBkPUJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWShhKTtiKz1kLng7Yys9ZC55O2lmKC0xIT0oXCIgXCIrKGEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5pbmRleE9mKFwiIGluamVjdGlvbkRpdiBcIikpYnJlYWs7YT1hLnBhcmVudE5vZGV9cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYixjKX07QmxvY2tseS51dGlscy5nZXRSZWxhdGl2ZVhZLlhZX1JFR0VYXz0vdHJhbnNsYXRlXFwoXFxzKihbLStcXGQuZV0rKShbICxdXFxzKihbLStcXGQuZV0rKVxccyopPy87QmxvY2tseS51dGlscy5nZXRSZWxhdGl2ZVhZLlhZX1NUWUxFX1JFR0VYXz0vdHJhbnNmb3JtOlxccyp0cmFuc2xhdGUoPzozZCk/XFwoXFxzKihbLStcXGQuZV0rKVxccypweChbICxdXFxzKihbLStcXGQuZV0rKVxccypweCk/LztcbkJsb2NrbHkudXRpbHMuaXNSaWdodEJ1dHRvbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdHJsS2V5JiZCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5NQUM/ITA6Mj09YS5idXR0b259O0Jsb2NrbHkudXRpbHMubW91c2VUb1N2Zz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5jcmVhdGVTVkdQb2ludCgpO2QueD1hLmNsaWVudFg7ZC55PWEuY2xpZW50WTtjfHwoYz1iLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7cmV0dXJuIGQubWF0cml4VHJhbnNmb3JtKGMpfTtcbkJsb2NrbHkudXRpbHMuZ2V0U2Nyb2xsRGVsdGFQaXhlbHM9ZnVuY3Rpb24oYSl7c3dpdGNoKGEuZGVsdGFNb2RlKXtkZWZhdWx0OnJldHVybnt4OmEuZGVsdGFYLHk6YS5kZWx0YVl9O2Nhc2UgMTpyZXR1cm57eDphLmRlbHRhWCpCbG9ja2x5LkxJTkVfTU9ERV9NVUxUSVBMSUVSLHk6YS5kZWx0YVkqQmxvY2tseS5MSU5FX01PREVfTVVMVElQTElFUn07Y2FzZSAyOnJldHVybnt4OmEuZGVsdGFYKkJsb2NrbHkuUEFHRV9NT0RFX01VTFRJUExJRVIseTphLmRlbHRhWSpCbG9ja2x5LlBBR0VfTU9ERV9NVUxUSVBMSUVSfX19O0Jsb2NrbHkudXRpbHMudG9rZW5pemVJbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LnV0aWxzLnRva2VuaXplSW50ZXJwb2xhdGlvbl8oYSwhMCl9O1xuQmxvY2tseS51dGlscy5yZXBsYWNlTWVzc2FnZVJlZmVyZW5jZXM9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIGE7YT1CbG9ja2x5LnV0aWxzLnRva2VuaXplSW50ZXJwb2xhdGlvbl8oYSwhMSk7cmV0dXJuIGEubGVuZ3RoP1N0cmluZyhhWzBdKTpcIlwifTtCbG9ja2x5LnV0aWxzLmNoZWNrTWVzc2FnZVJlZmVyZW5jZXM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSEwLGM9QmxvY2tseS5Nc2csZD1hLm1hdGNoKC8le0JLWV9bQS1aXVxcdyp9L2lnKSxlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV0udG9VcHBlckNhc2UoKTt2b2lkIDA9PWNbZi5zbGljZSg2LC0xKV0mJihjb25zb2xlLndhcm4oXCJObyBtZXNzYWdlIHN0cmluZyBmb3IgXCIrZFtlXStcIiBpbiBcIithKSxiPSExKX1yZXR1cm4gYn07XG5CbG9ja2x5LnV0aWxzLnRva2VuaXplSW50ZXJwb2xhdGlvbl89ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuc3BsaXQoXCJcIik7ZC5wdXNoKFwiXCIpO3ZhciBlPTA7YT1bXTtmb3IodmFyIGY9bnVsbCxnPTA7ZzxkLmxlbmd0aDtnKyspe3ZhciBoPWRbZ107MD09ZT9cIiVcIj09aD8oKGg9YS5qb2luKFwiXCIpKSYmYy5wdXNoKGgpLGEubGVuZ3RoPTAsZT0xKTphLnB1c2goaCk6MT09ZT9cIiVcIj09aD8oYS5wdXNoKGgpLGU9MCk6YiYmXCIwXCI8PWgmJlwiOVwiPj1oPyhlPTIsZj1oLChoPWEuam9pbihcIlwiKSkmJmMucHVzaChoKSxhLmxlbmd0aD0wKTpcIntcIj09aD9lPTM6KGEucHVzaChcIiVcIixoKSxlPTApOjI9PWU/XCIwXCI8PWgmJlwiOVwiPj1oP2YrPWg6KGMucHVzaChwYXJzZUludChmLDEwKSksZy0tLGU9MCk6Mz09ZSYmKFwiXCI9PWg/KGEuc3BsaWNlKDAsMCxcIiV7XCIpLGctLSxlPTApOlwifVwiIT1oP2EucHVzaChoKTooZT1hLmpvaW4oXCJcIiksL1tBLVpdXFx3Ki9pLnRlc3QoZSk/KGg9ZS50b1VwcGVyQ2FzZSgpLFxuKGg9QmxvY2tseS51dGlscy5zdHJpbmcuc3RhcnRzV2l0aChoLFwiQktZX1wiKT9oLnN1YnN0cmluZyg0KTpudWxsKSYmaCBpbiBCbG9ja2x5Lk1zZz8oZT1CbG9ja2x5Lk1zZ1toXSxcInN0cmluZ1wiPT10eXBlb2YgZT9BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLEJsb2NrbHkudXRpbHMudG9rZW5pemVJbnRlcnBvbGF0aW9uXyhlLGIpKTpiP2MucHVzaChTdHJpbmcoZSkpOmMucHVzaChlKSk6Yy5wdXNoKFwiJXtcIitlK1wifVwiKSk6Yy5wdXNoKFwiJXtcIitlK1wifVwiKSxlPWEubGVuZ3RoPTApKX0oaD1hLmpvaW4oXCJcIikpJiZjLnB1c2goaCk7Yj1bXTtmb3IoZz1hLmxlbmd0aD0wO2c8Yy5sZW5ndGg7KytnKVwic3RyaW5nXCI9PXR5cGVvZiBjW2ddP2EucHVzaChjW2ddKTooKGg9YS5qb2luKFwiXCIpKSYmYi5wdXNoKGgpLGEubGVuZ3RoPTAsYi5wdXNoKGNbZ10pKTsoaD1hLmpvaW4oXCJcIikpJiZiLnB1c2goaCk7YS5sZW5ndGg9MDtyZXR1cm4gYn07XG5CbG9ja2x5LnV0aWxzLmdlblVpZD1mdW5jdGlvbigpe2Zvcih2YXIgYT1CbG9ja2x5LnV0aWxzLmdlblVpZC5zb3VwXy5sZW5ndGgsYj1bXSxjPTA7MjA+YztjKyspYltjXT1CbG9ja2x5LnV0aWxzLmdlblVpZC5zb3VwXy5jaGFyQXQoTWF0aC5yYW5kb20oKSphKTtyZXR1cm4gYi5qb2luKFwiXCIpfTtCbG9ja2x5LnV0aWxzLmdlblVpZC5zb3VwXz1cIiEjJCUoKSorLC0uLzo7PT9AW11eX2B7fH1+QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcbkJsb2NrbHkudXRpbHMuaXMzZFN1cHBvcnRlZD1mdW5jdGlvbigpe2lmKHZvaWQgMCE9PUJsb2NrbHkudXRpbHMuaXMzZFN1cHBvcnRlZC5jYWNoZWRfKXJldHVybiBCbG9ja2x5LnV0aWxzLmlzM2RTdXBwb3J0ZWQuY2FjaGVkXztpZighQmxvY2tseS51dGlscy5nbG9iYWwuZ2V0Q29tcHV0ZWRTdHlsZSlyZXR1cm4hMTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKSxiPVwibm9uZVwiLGM9e3dlYmtpdFRyYW5zZm9ybTpcIi13ZWJraXQtdHJhbnNmb3JtXCIsT1RyYW5zZm9ybTpcIi1vLXRyYW5zZm9ybVwiLG1zVHJhbnNmb3JtOlwiLW1zLXRyYW5zZm9ybVwiLE1velRyYW5zZm9ybTpcIi1tb3otdHJhbnNmb3JtXCIsdHJhbnNmb3JtOlwidHJhbnNmb3JtXCJ9O2RvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGEsbnVsbCk7Zm9yKHZhciBkIGluIGMpaWYodm9pZCAwIT09YS5zdHlsZVtkXSl7YS5zdHlsZVtkXT1cInRyYW5zbGF0ZTNkKDFweCwxcHgsMXB4KVwiO2I9QmxvY2tseS51dGlscy5nbG9iYWwuZ2V0Q29tcHV0ZWRTdHlsZShhKTtcbmlmKCFiKXJldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpLCExO2I9Yi5nZXRQcm9wZXJ0eVZhbHVlKGNbZF0pfWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7QmxvY2tseS51dGlscy5pczNkU3VwcG9ydGVkLmNhY2hlZF89XCJub25lXCIhPT1iO3JldHVybiBCbG9ja2x5LnV0aWxzLmlzM2RTdXBwb3J0ZWQuY2FjaGVkX307QmxvY2tseS51dGlscy5ydW5BZnRlclBhZ2VMb2FkPWZ1bmN0aW9uKGEpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBkb2N1bWVudCl0aHJvdyBFcnJvcihcIkJsb2NrbHkudXRpbHMucnVuQWZ0ZXJQYWdlTG9hZCgpIHJlcXVpcmVzIGJyb3dzZXIgZG9jdW1lbnQuXCIpO2lmKFwiY29tcGxldGVcIj09ZG9jdW1lbnQucmVhZHlTdGF0ZSlhKCk7ZWxzZSB2YXIgYj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe1wiY29tcGxldGVcIj09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmKGNsZWFySW50ZXJ2YWwoYiksYSgpKX0sMTApfTtcbkJsb2NrbHkudXRpbHMuZ2V0Vmlld3BvcnRCQm94PWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS51dGlscy5zdHlsZS5nZXRWaWV3cG9ydFBhZ2VPZmZzZXQoKTtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuUmVjdChhLnksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCthLnksYS54LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCthLngpfTtCbG9ja2x5LnV0aWxzLmFycmF5UmVtb3ZlPWZ1bmN0aW9uKGEsYil7Yj1hLmluZGV4T2YoYik7aWYoLTE9PWIpcmV0dXJuITE7YS5zcGxpY2UoYiwxKTtyZXR1cm4hMH07XG5CbG9ja2x5LnV0aWxzLmdldERvY3VtZW50U2Nyb2xsPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGI9d2luZG93O3JldHVybiBCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JRSYmYi5wYWdlWU9mZnNldCE9YS5zY3JvbGxUb3A/bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShhLnNjcm9sbExlZnQsYS5zY3JvbGxUb3ApOm5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYi5wYWdlWE9mZnNldHx8YS5zY3JvbGxMZWZ0LGIucGFnZVlPZmZzZXR8fGEuc2Nyb2xsVG9wKX07QmxvY2tseS51dGlscy5nZXRCbG9ja1R5cGVDb3VudHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1PYmplY3QuY3JlYXRlKG51bGwpLGQ9YS5nZXREZXNjZW5kYW50cyghMCk7YiYmKGE9YS5nZXROZXh0QmxvY2soKSkmJihhPWQuaW5kZXhPZihhKSxkLnNwbGljZShhLGQubGVuZ3RoLWEpKTtmb3IoYT0wO2I9ZFthXTthKyspY1tiLnR5cGVdP2NbYi50eXBlXSsrOmNbYi50eXBlXT0xO3JldHVybiBjfTtcbkJsb2NrbHkudXRpbHMuc2NyZWVuVG9Xc0Nvb3JkaW5hdGVzPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi54O2I9Yi55O3ZhciBkPWEuZ2V0SW5qZWN0aW9uRGl2KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Yz1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGMtZC5sZWZ0LGItZC50b3ApO2I9YS5nZXRPcmlnaW5PZmZzZXRJblBpeGVscygpO3JldHVybiBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlmZmVyZW5jZShjLGIpLnNjYWxlKDEvYS5zY2FsZSl9O1xuQmxvY2tseS51dGlscy5wYXJzZUJsb2NrQ29sb3VyPWZ1bmN0aW9uKGEpe3ZhciBiPVwic3RyaW5nXCI9PXR5cGVvZiBhP0Jsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEpOmEsYz1OdW1iZXIoYik7aWYoIWlzTmFOKGMpJiYwPD1jJiYzNjA+PWMpcmV0dXJue2h1ZTpjLGhleDpCbG9ja2x5LnV0aWxzLmNvbG91ci5oc3ZUb0hleChjLEJsb2NrbHkuSFNWX1NBVFVSQVRJT04sMjU1KkJsb2NrbHkuSFNWX1ZBTFVFKX07aWYoYz1CbG9ja2x5LnV0aWxzLmNvbG91ci5wYXJzZShiKSlyZXR1cm57aHVlOm51bGwsaGV4OmN9O2M9J0ludmFsaWQgY29sb3VyOiBcIicrYisnXCInO2EhPWImJihjKz0nIChmcm9tIFwiJythKydcIiknKTt0aHJvdyBFcnJvcihjKTt9O0Jsb2NrbHkuRXZlbnRzPXt9O0Jsb2NrbHkuRXZlbnRzLmdyb3VwXz1cIlwiO0Jsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG89ITA7QmxvY2tseS5FdmVudHMuZGlzYWJsZWRfPTA7QmxvY2tseS5FdmVudHMuQ1JFQVRFPVwiY3JlYXRlXCI7QmxvY2tseS5FdmVudHMuQkxPQ0tfQ1JFQVRFPUJsb2NrbHkuRXZlbnRzLkNSRUFURTtCbG9ja2x5LkV2ZW50cy5ERUxFVEU9XCJkZWxldGVcIjtCbG9ja2x5LkV2ZW50cy5CTE9DS19ERUxFVEU9QmxvY2tseS5FdmVudHMuREVMRVRFO0Jsb2NrbHkuRXZlbnRzLkNIQU5HRT1cImNoYW5nZVwiO0Jsb2NrbHkuRXZlbnRzLkJMT0NLX0NIQU5HRT1CbG9ja2x5LkV2ZW50cy5DSEFOR0U7QmxvY2tseS5FdmVudHMuTU9WRT1cIm1vdmVcIjtCbG9ja2x5LkV2ZW50cy5CTE9DS19NT1ZFPUJsb2NrbHkuRXZlbnRzLk1PVkU7QmxvY2tseS5FdmVudHMuVkFSX0NSRUFURT1cInZhcl9jcmVhdGVcIjtCbG9ja2x5LkV2ZW50cy5WQVJfREVMRVRFPVwidmFyX2RlbGV0ZVwiO1xuQmxvY2tseS5FdmVudHMuVkFSX1JFTkFNRT1cInZhcl9yZW5hbWVcIjtCbG9ja2x5LkV2ZW50cy5VST1cInVpXCI7QmxvY2tseS5FdmVudHMuQ09NTUVOVF9DUkVBVEU9XCJjb21tZW50X2NyZWF0ZVwiO0Jsb2NrbHkuRXZlbnRzLkNPTU1FTlRfREVMRVRFPVwiY29tbWVudF9kZWxldGVcIjtCbG9ja2x5LkV2ZW50cy5DT01NRU5UX0NIQU5HRT1cImNvbW1lbnRfY2hhbmdlXCI7QmxvY2tseS5FdmVudHMuQ09NTUVOVF9NT1ZFPVwiY29tbWVudF9tb3ZlXCI7QmxvY2tseS5FdmVudHMuRklOSVNIRURfTE9BRElORz1cImZpbmlzaGVkX2xvYWRpbmdcIjtCbG9ja2x5LkV2ZW50cy5CVU1QX0VWRU5UUz1bQmxvY2tseS5FdmVudHMuQkxPQ0tfQ1JFQVRFLEJsb2NrbHkuRXZlbnRzLkJMT0NLX01PVkUsQmxvY2tseS5FdmVudHMuQ09NTUVOVF9DUkVBVEUsQmxvY2tseS5FdmVudHMuQ09NTUVOVF9NT1ZFXTtCbG9ja2x5LkV2ZW50cy5GSVJFX1FVRVVFXz1bXTtcbkJsb2NrbHkuRXZlbnRzLmZpcmU9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuaXNFbmFibGVkKCkmJihCbG9ja2x5LkV2ZW50cy5GSVJFX1FVRVVFXy5sZW5ndGh8fHNldFRpbWVvdXQoQmxvY2tseS5FdmVudHMuZmlyZU5vd18sMCksQmxvY2tseS5FdmVudHMuRklSRV9RVUVVRV8ucHVzaChhKSl9O0Jsb2NrbHkuRXZlbnRzLmZpcmVOb3dfPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPUJsb2NrbHkuRXZlbnRzLmZpbHRlcihCbG9ja2x5LkV2ZW50cy5GSVJFX1FVRVVFXywhMCksYj1CbG9ja2x5LkV2ZW50cy5GSVJFX1FVRVVFXy5sZW5ndGg9MCxjO2M9YVtiXTtiKyspaWYoYy53b3Jrc3BhY2VJZCl7dmFyIGQ9QmxvY2tseS5Xb3Jrc3BhY2UuZ2V0QnlJZChjLndvcmtzcGFjZUlkKTtkJiZkLmZpcmVDaGFuZ2VMaXN0ZW5lcihjKX19O1xuQmxvY2tseS5FdmVudHMuZmlsdGVyPWZ1bmN0aW9uKGEsYil7YT1hLnNsaWNlKCk7Ynx8YS5yZXZlcnNlKCk7Zm9yKHZhciBjPVtdLGQ9T2JqZWN0LmNyZWF0ZShudWxsKSxlPTAsZjtmPWFbZV07ZSsrKWlmKCFmLmlzTnVsbCgpKXt2YXIgZz1bZi50eXBlLGYuYmxvY2tJZCxmLndvcmtzcGFjZUlkXS5qb2luKFwiIFwiKSxoPWRbZ10saz1oP2guZXZlbnQ6bnVsbDtpZighaClkW2ddPXtldmVudDpmLGluZGV4OmV9LGMucHVzaChmKTtlbHNlIGlmKGYudHlwZT09QmxvY2tseS5FdmVudHMuTU9WRSYmaC5pbmRleD09ZS0xKWsubmV3UGFyZW50SWQ9Zi5uZXdQYXJlbnRJZCxrLm5ld0lucHV0TmFtZT1mLm5ld0lucHV0TmFtZSxrLm5ld0Nvb3JkaW5hdGU9Zi5uZXdDb29yZGluYXRlLGguaW5kZXg9ZTtlbHNlIGlmKGYudHlwZT09QmxvY2tseS5FdmVudHMuQ0hBTkdFJiZmLmVsZW1lbnQ9PWsuZWxlbWVudCYmZi5uYW1lPT1rLm5hbWUpay5uZXdWYWx1ZT1mLm5ld1ZhbHVlO2Vsc2UgaWYoZi50eXBlIT1cbkJsb2NrbHkuRXZlbnRzLlVJfHxcImNsaWNrXCIhPWYuZWxlbWVudHx8XCJjb21tZW50T3BlblwiIT1rLmVsZW1lbnQmJlwibXV0YXRvck9wZW5cIiE9ay5lbGVtZW50JiZcIndhcm5pbmdPcGVuXCIhPWsuZWxlbWVudClkW2ddPXtldmVudDpmLGluZGV4OjF9LGMucHVzaChmKX1hPWMuZmlsdGVyKGZ1bmN0aW9uKGwpe3JldHVybiFsLmlzTnVsbCgpfSk7Ynx8YS5yZXZlcnNlKCk7Zm9yKGU9MTtmPWFbZV07ZSsrKWYudHlwZT09QmxvY2tseS5FdmVudHMuQ0hBTkdFJiZcIm11dGF0aW9uXCI9PWYuZWxlbWVudCYmYS51bnNoaWZ0KGEuc3BsaWNlKGUsMSlbMF0pO3JldHVybiBhfTtCbG9ja2x5LkV2ZW50cy5jbGVhclBlbmRpbmdVbmRvPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYjtiPUJsb2NrbHkuRXZlbnRzLkZJUkVfUVVFVUVfW2FdO2ErKyliLnJlY29yZFVuZG89ITF9O0Jsb2NrbHkuRXZlbnRzLmRpc2FibGU9ZnVuY3Rpb24oKXtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlZF8rK307XG5CbG9ja2x5LkV2ZW50cy5lbmFibGU9ZnVuY3Rpb24oKXtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlZF8tLX07QmxvY2tseS5FdmVudHMuaXNFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PUJsb2NrbHkuRXZlbnRzLmRpc2FibGVkX307QmxvY2tseS5FdmVudHMuZ2V0R3JvdXA9ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5FdmVudHMuZ3JvdXBffTtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cD1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5ncm91cF89XCJib29sZWFuXCI9PXR5cGVvZiBhP2E/QmxvY2tseS51dGlscy5nZW5VaWQoKTpcIlwiOmF9O0Jsb2NrbHkuRXZlbnRzLmdldERlc2NlbmRhbnRJZHM9ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hLmdldERlc2NlbmRhbnRzKCExKTtmb3IodmFyIGM9MCxkO2Q9YVtjXTtjKyspYltjXT1kLmlkO3JldHVybiBifTtcbkJsb2NrbHkuRXZlbnRzLmZyb21Kc29uPWZ1bmN0aW9uKGEsYil7dmFyIGM9QmxvY2tseS5yZWdpc3RyeS5nZXRDbGFzcyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsYS50eXBlKTtpZighYyl0aHJvdyBFcnJvcihcIlVua25vd24gZXZlbnQgdHlwZS5cIik7Yz1uZXcgYztjLmZyb21Kc29uKGEpO2Mud29ya3NwYWNlSWQ9Yi5pZDtyZXR1cm4gY307XG5CbG9ja2x5LkV2ZW50cy5kaXNhYmxlT3JwaGFucz1mdW5jdGlvbihhKXtpZigoYS50eXBlPT1CbG9ja2x5LkV2ZW50cy5NT1ZFfHxhLnR5cGU9PUJsb2NrbHkuRXZlbnRzLkNSRUFURSkmJmEud29ya3NwYWNlSWQpe3ZhciBiPUJsb2NrbHkuV29ya3NwYWNlLmdldEJ5SWQoYS53b3Jrc3BhY2VJZCk7aWYoYT1iLmdldEJsb2NrQnlJZChhLmJsb2NrSWQpKXt2YXIgYz1hLmdldFBhcmVudCgpO2lmKGMmJmMuaXNFbmFibGVkKCkpZm9yKGI9YS5nZXREZXNjZW5kYW50cyghMSksYT0wO2M9YlthXTthKyspYy5zZXRFbmFibGVkKCEwKTtlbHNlIGlmKChhLm91dHB1dENvbm5lY3Rpb258fGEucHJldmlvdXNDb25uZWN0aW9uKSYmIWIuaXNEcmFnZ2luZygpKXtkbyBhLnNldEVuYWJsZWQoITEpLGE9YS5nZXROZXh0QmxvY2soKTt3aGlsZShhKX19fX07QmxvY2tseS5FdmVudHMuQWJzdHJhY3Q9ZnVuY3Rpb24oKXt0aGlzLmlzQmxhbms9bnVsbDt0aGlzLndvcmtzcGFjZUlkPXZvaWQgMDt0aGlzLmdyb3VwPUJsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCk7dGhpcy5yZWNvcmRVbmRvPUJsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG99O0Jsb2NrbHkuRXZlbnRzLkFic3RyYWN0LnByb3RvdHlwZS50b0pzb249ZnVuY3Rpb24oKXt2YXIgYT17dHlwZTp0aGlzLnR5cGV9O3RoaXMuZ3JvdXAmJihhLmdyb3VwPXRoaXMuZ3JvdXApO3JldHVybiBhfTtCbG9ja2x5LkV2ZW50cy5BYnN0cmFjdC5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7dGhpcy5pc0JsYW5rPSExO3RoaXMuZ3JvdXA9YS5ncm91cH07QmxvY2tseS5FdmVudHMuQWJzdHJhY3QucHJvdG90eXBlLmlzTnVsbD1mdW5jdGlvbigpe3JldHVybiExfTtCbG9ja2x5LkV2ZW50cy5BYnN0cmFjdC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGEpe307XG5CbG9ja2x5LkV2ZW50cy5BYnN0cmFjdC5wcm90b3R5cGUuZ2V0RXZlbnRXb3Jrc3BhY2VfPWZ1bmN0aW9uKCl7aWYodGhpcy53b3Jrc3BhY2VJZCl2YXIgYT1CbG9ja2x5LldvcmtzcGFjZS5nZXRCeUlkKHRoaXMud29ya3NwYWNlSWQpO2lmKCFhKXRocm93IEVycm9yKFwiV29ya3NwYWNlIGlzIG51bGwuIEV2ZW50IG11c3QgaGF2ZSBiZWVuIGdlbmVyYXRlZCBmcm9tIHJlYWwgQmxvY2tseSBldmVudHMuXCIpO3JldHVybiBhfTtCbG9ja2x5LnV0aWxzLm9iamVjdD17fTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cz1mdW5jdGlvbihhLGIpe2Euc3VwZXJDbGFzc189Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YX07QmxvY2tseS51dGlscy5vYmplY3QubWl4aW49ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY119O0Jsb2NrbHkudXRpbHMub2JqZWN0LmRlZXBNZXJnZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBiKWFbY109bnVsbCE9YltjXSYmXCJvYmplY3RcIj09PXR5cGVvZiBiW2NdP0Jsb2NrbHkudXRpbHMub2JqZWN0LmRlZXBNZXJnZShhW2NdfHxPYmplY3QuY3JlYXRlKG51bGwpLGJbY10pOmJbY107cmV0dXJuIGF9O0Jsb2NrbHkudXRpbHMub2JqZWN0LnZhbHVlcz1mdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnZhbHVlcz9PYmplY3QudmFsdWVzKGEpOk9iamVjdC5rZXlzKGEpLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0pfTtCbG9ja2x5LkV2ZW50cy5VaT1mdW5jdGlvbihhLGIsYyxkKXtCbG9ja2x5LkV2ZW50cy5VaS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaXNCbGFuaz1cInVuZGVmaW5lZFwiPT10eXBlb2YgYTt0aGlzLmJsb2NrSWQ9YT9hLmlkOm51bGw7dGhpcy53b3Jrc3BhY2VJZD1hP2Eud29ya3NwYWNlLmlkOnZvaWQgMDt0aGlzLmVsZW1lbnQ9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/XCJcIjpiO3RoaXMub2xkVmFsdWU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGM/XCJcIjpjO3RoaXMubmV3VmFsdWU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGQ/XCJcIjpkO3RoaXMucmVjb3JkVW5kbz0hMX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5FdmVudHMuVWksQmxvY2tseS5FdmVudHMuQWJzdHJhY3QpO0Jsb2NrbHkuRXZlbnRzLlVpLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLlVJO1xuQmxvY2tseS5FdmVudHMuVWkucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRXZlbnRzLlVpLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpO2EuZWxlbWVudD10aGlzLmVsZW1lbnQ7dm9pZCAwIT09dGhpcy5uZXdWYWx1ZSYmKGEubmV3VmFsdWU9dGhpcy5uZXdWYWx1ZSk7dGhpcy5ibG9ja0lkJiYoYS5ibG9ja0lkPXRoaXMuYmxvY2tJZCk7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLlVpLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5VaS5zdXBlckNsYXNzXy5mcm9tSnNvbi5jYWxsKHRoaXMsYSk7dGhpcy5lbGVtZW50PWEuZWxlbWVudDt0aGlzLm5ld1ZhbHVlPWEubmV3VmFsdWU7dGhpcy5ibG9ja0lkPWEuYmxvY2tJZH07QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsQmxvY2tseS5FdmVudHMuVUksQmxvY2tseS5FdmVudHMuVWkpO0Jsb2NrbHkudXRpbHMuU3ZnPWZ1bmN0aW9uKGEpe3RoaXMudGFnTmFtZV89YX07QmxvY2tseS51dGlscy5TdmcucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFnTmFtZV99O0Jsb2NrbHkudXRpbHMuU3ZnLkFOSU1BVEU9bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwiYW5pbWF0ZVwiKTtCbG9ja2x5LnV0aWxzLlN2Zy5DSVJDTEU9bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwiY2lyY2xlXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLkNMSVBQQVRIPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImNsaXBQYXRoXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLkRFRlM9bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwiZGVmc1wiKTtCbG9ja2x5LnV0aWxzLlN2Zy5GRUNPTVBPU0lURT1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJmZUNvbXBvc2l0ZVwiKTtCbG9ja2x5LnV0aWxzLlN2Zy5GRUNPTVBPTkVOVFRSQU5TRkVSPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImZlQ29tcG9uZW50VHJhbnNmZXJcIik7XG5CbG9ja2x5LnV0aWxzLlN2Zy5GRUZMT09EPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImZlRmxvb2RcIik7QmxvY2tseS51dGlscy5TdmcuRkVGVU5DQT1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJmZUZ1bmNBXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLkZFR0FVU1NJQU5CTFVSPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImZlR2F1c3NpYW5CbHVyXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLkZFUE9JTlRMSUdIVD1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJmZVBvaW50TGlnaHRcIik7QmxvY2tseS51dGlscy5TdmcuRkVTUEVDVUxBUkxJR0hUSU5HPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImZlU3BlY3VsYXJMaWdodGluZ1wiKTtCbG9ja2x5LnV0aWxzLlN2Zy5GSUxURVI9bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwiZmlsdGVyXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLkZPUkVJR05PQkpFQ1Q9bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwiZm9yZWlnbk9iamVjdFwiKTtCbG9ja2x5LnV0aWxzLlN2Zy5HPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImdcIik7XG5CbG9ja2x5LnV0aWxzLlN2Zy5JTUFHRT1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJpbWFnZVwiKTtCbG9ja2x5LnV0aWxzLlN2Zy5MSU5FPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcImxpbmVcIik7QmxvY2tseS51dGlscy5TdmcuUEFUSD1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJwYXRoXCIpO0Jsb2NrbHkudXRpbHMuU3ZnLlBBVFRFUk49bmV3IEJsb2NrbHkudXRpbHMuU3ZnKFwicGF0dGVyblwiKTtCbG9ja2x5LnV0aWxzLlN2Zy5QT0xZR09OPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcInBvbHlnb25cIik7QmxvY2tseS51dGlscy5TdmcuUkVDVD1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJyZWN0XCIpO0Jsb2NrbHkudXRpbHMuU3ZnLlNWRz1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJzdmdcIik7QmxvY2tseS51dGlscy5TdmcuVEVYVD1uZXcgQmxvY2tseS51dGlscy5TdmcoXCJ0ZXh0XCIpO0Jsb2NrbHkudXRpbHMuU3ZnLlRTUEFOPW5ldyBCbG9ja2x5LnV0aWxzLlN2ZyhcInRzcGFuXCIpO0Jsb2NrbHkudXRpbHMuZG9tPXt9O0Jsb2NrbHkudXRpbHMuZG9tLlNWR19OUz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7QmxvY2tseS51dGlscy5kb20uSFRNTF9OUz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtCbG9ja2x5LnV0aWxzLmRvbS5YTElOS19OUz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIjtCbG9ja2x5LnV0aWxzLmRvbS5Ob2RlVHlwZT17RUxFTUVOVF9OT0RFOjEsVEVYVF9OT0RFOjMsQ09NTUVOVF9OT0RFOjgsRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZOjE2fTtCbG9ja2x5LnV0aWxzLmRvbS5jYWNoZVdpZHRoc189bnVsbDtCbG9ja2x5LnV0aWxzLmRvbS5jYWNoZVJlZmVyZW5jZV89MDtCbG9ja2x5LnV0aWxzLmRvbS5jYW52YXNDb250ZXh0Xz1udWxsO1xuQmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudD1mdW5jdGlvbihhLGIsYyl7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoQmxvY2tseS51dGlscy5kb20uU1ZHX05TLFN0cmluZyhhKSk7Zm9yKHZhciBkIGluIGIpYS5zZXRBdHRyaWJ1dGUoZCxiW2RdKTtkb2N1bWVudC5ib2R5LnJ1bnRpbWVTdHlsZSYmKGEucnVudGltZVN0eWxlPWEuY3VycmVudFN0eWxlPWEuc3R5bGUpO2MmJmMuYXBwZW5kQ2hpbGQoYSk7cmV0dXJuIGF9O0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIjtpZigtMSE9KFwiIFwiK2MrXCIgXCIpLmluZGV4T2YoXCIgXCIrYitcIiBcIikpcmV0dXJuITE7YyYmKGMrPVwiIFwiKTthLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYytiKTtyZXR1cm4hMH07XG5CbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzc2VzPWZ1bmN0aW9uKGEsYil7Yj1iLnNwbGl0KFwiIFwiKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLGJbY10pfTtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcz1mdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7aWYoLTE9PShcIiBcIitjK1wiIFwiKS5pbmRleE9mKFwiIFwiK2IrXCIgXCIpKXJldHVybiExO2M9Yy5zcGxpdCgvXFxzKy8pO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0mJmNbZF0hPWJ8fChjLnNwbGljZShkLDEpLGQtLSk7Yy5sZW5ndGg/YS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGMuam9pbihcIiBcIikpOmEucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik7cmV0dXJuITB9O1xuQmxvY2tseS51dGlscy5kb20uaGFzQ2xhc3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9KFwiIFwiK2EuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikrXCIgXCIpLmluZGV4T2YoXCIgXCIrYitcIiBcIil9O0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEucGFyZW50Tm9kZT9hLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk6bnVsbH07QmxvY2tseS51dGlscy5kb20uaW5zZXJ0QWZ0ZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLm5leHRTaWJsaW5nO2I9Yi5wYXJlbnROb2RlO2lmKCFiKXRocm93IEVycm9yKFwiUmVmZXJlbmNlIG5vZGUgaGFzIG5vIHBhcmVudC5cIik7Yz9iLmluc2VydEJlZm9yZShhLGMpOmIuYXBwZW5kQ2hpbGQoYSl9O0Jsb2NrbHkudXRpbHMuZG9tLmNvbnRhaW5zTm9kZT1mdW5jdGlvbihhLGIpe3JldHVybiEhKGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYikmQmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZKX07XG5CbG9ja2x5LnV0aWxzLmRvbS5zZXRDc3NUcmFuc2Zvcm09ZnVuY3Rpb24oYSxiKXthLnN0eWxlLnRyYW5zZm9ybT1iO2Euc3R5bGVbXCItd2Via2l0LXRyYW5zZm9ybVwiXT1ifTtCbG9ja2x5LnV0aWxzLmRvbS5zdGFydFRleHRXaWR0aENhY2hlPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20uY2FjaGVSZWZlcmVuY2VfKys7QmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNffHwoQmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNfPXt9KX07QmxvY2tseS51dGlscy5kb20uc3RvcFRleHRXaWR0aENhY2hlPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20uY2FjaGVSZWZlcmVuY2VfLS07QmxvY2tseS51dGlscy5kb20uY2FjaGVSZWZlcmVuY2VffHwoQmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNfPW51bGwpfTtcbkJsb2NrbHkudXRpbHMuZG9tLmdldFRleHRXaWR0aD1mdW5jdGlvbihhKXt2YXIgYj1hLnRleHRDb250ZW50K1wiXFxuXCIrYS5jbGFzc05hbWUuYmFzZVZhbCxjO2lmKEJsb2NrbHkudXRpbHMuZG9tLmNhY2hlV2lkdGhzXyYmKGM9QmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNfW2JdKSlyZXR1cm4gYzt0cnl7Yz1CbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JRXx8QmxvY2tseS51dGlscy51c2VyQWdlbnQuRURHRT9hLmdldEJCb3goKS53aWR0aDphLmdldENvbXB1dGVkVGV4dExlbmd0aCgpfWNhdGNoKGQpe3JldHVybiA4KmEudGV4dENvbnRlbnQubGVuZ3RofUJsb2NrbHkudXRpbHMuZG9tLmNhY2hlV2lkdGhzXyYmKEJsb2NrbHkudXRpbHMuZG9tLmNhY2hlV2lkdGhzX1tiXT1jKTtyZXR1cm4gY307XG5CbG9ja2x5LnV0aWxzLmRvbS5nZXRGYXN0VGV4dFdpZHRoPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBCbG9ja2x5LnV0aWxzLmRvbS5nZXRGYXN0VGV4dFdpZHRoV2l0aFNpemVTdHJpbmcoYSxiK1wicHRcIixjLGQpfTtcbkJsb2NrbHkudXRpbHMuZG9tLmdldEZhc3RUZXh0V2lkdGhXaXRoU2l6ZVN0cmluZz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLnRleHRDb250ZW50O2E9ZStcIlxcblwiK2EuY2xhc3NOYW1lLmJhc2VWYWw7dmFyIGY7aWYoQmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNfJiYoZj1CbG9ja2x5LnV0aWxzLmRvbS5jYWNoZVdpZHRoc19bYV0pKXJldHVybiBmO0Jsb2NrbHkudXRpbHMuZG9tLmNhbnZhc0NvbnRleHRffHwoZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGYuY2xhc3NOYW1lPVwiYmxvY2tseUNvbXB1dGVDYW52YXNcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpLEJsb2NrbHkudXRpbHMuZG9tLmNhbnZhc0NvbnRleHRfPWYuZ2V0Q29udGV4dChcIjJkXCIpKTtCbG9ja2x5LnV0aWxzLmRvbS5jYW52YXNDb250ZXh0Xy5mb250PWMrXCIgXCIrYitcIiBcIitkO2Y9QmxvY2tseS51dGlscy5kb20uY2FudmFzQ29udGV4dF8ubWVhc3VyZVRleHQoZSkud2lkdGg7QmxvY2tseS51dGlscy5kb20uY2FjaGVXaWR0aHNfJiZcbihCbG9ja2x5LnV0aWxzLmRvbS5jYWNoZVdpZHRoc19bYV09Zik7cmV0dXJuIGZ9O1xuQmxvY2tseS51dGlscy5kb20ubWVhc3VyZUZvbnRNZXRyaWNzPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2Uuc3R5bGUuZm9udD1jK1wiIFwiK2IrXCIgXCIrZDtlLnRleHRDb250ZW50PWE7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUud2lkdGg9XCIxcHhcIjthLnN0eWxlLmhlaWdodD1cIjBweFwiO2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgZGlzcGxheTogZmxleDtcIik7Yi5hcHBlbmRDaGlsZChlKTtiLmFwcGVuZENoaWxkKGEpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7dHJ5e2M9e30sYi5zdHlsZS5hbGlnbkl0ZW1zPVwiYmFzZWxpbmVcIixjLmJhc2VsaW5lPWEub2Zmc2V0VG9wLWUub2Zmc2V0VG9wLGIuc3R5bGUuYWxpZ25JdGVtcz1cImZsZXgtZW5kXCIsYy5oZWlnaHQ9YS5vZmZzZXRUb3AtXG5lLm9mZnNldFRvcH1maW5hbGx5e2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYil9cmV0dXJuIGN9O0Jsb2NrbHkuQmxvY2tEcmFnU3VyZmFjZVN2Zz1mdW5jdGlvbihhKXt0aGlzLmNvbnRhaW5lcl89YTt0aGlzLmNyZWF0ZURvbSgpfTtCbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLlNWR189bnVsbDtCbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLmRyYWdHcm91cF89bnVsbDtCbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLmNvbnRhaW5lcl89bnVsbDtCbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLnNjYWxlXz0xO0Jsb2NrbHkuQmxvY2tEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuc3VyZmFjZVhZXz1udWxsO1xuQmxvY2tseS5CbG9ja0RyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS5jcmVhdGVEb209ZnVuY3Rpb24oKXt0aGlzLlNWR198fCh0aGlzLlNWR189QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5TVkcse3htbG5zOkJsb2NrbHkudXRpbHMuZG9tLlNWR19OUyxcInhtbG5zOmh0bWxcIjpCbG9ja2x5LnV0aWxzLmRvbS5IVE1MX05TLFwieG1sbnM6eGxpbmtcIjpCbG9ja2x5LnV0aWxzLmRvbS5YTElOS19OUyx2ZXJzaW9uOlwiMS4xXCIsXCJjbGFzc1wiOlwiYmxvY2tseUJsb2NrRHJhZ1N1cmZhY2VcIn0sdGhpcy5jb250YWluZXJfKSx0aGlzLmRyYWdHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHt9LHRoaXMuU1ZHXykpfTtcbkJsb2NrbHkuQmxvY2tEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuc2V0QmxvY2tzQW5kU2hvdz1mdW5jdGlvbihhKXtpZih0aGlzLmRyYWdHcm91cF8uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgRXJyb3IoXCJBbHJlYWR5IGRyYWdnaW5nIGEgYmxvY2suXCIpO3RoaXMuZHJhZ0dyb3VwXy5hcHBlbmRDaGlsZChhKTt0aGlzLlNWR18uc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7dGhpcy5zdXJmYWNlWFlfPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoMCwwKX07QmxvY2tseS5CbG9ja0RyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS50cmFuc2xhdGVBbmRTY2FsZUdyb3VwPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnNjYWxlXz1jO2E9YS50b0ZpeGVkKDApO2I9Yi50b0ZpeGVkKDApO3RoaXMuZHJhZ0dyb3VwXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIithK1wiLFwiK2IrXCIpIHNjYWxlKFwiK2MrXCIpXCIpfTtcbkJsb2NrbHkuQmxvY2tEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUudHJhbnNsYXRlU3VyZmFjZUludGVybmFsXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc3VyZmFjZVhZXy54LGI9dGhpcy5zdXJmYWNlWFlfLnk7YT1hLnRvRml4ZWQoMCk7Yj1iLnRvRml4ZWQoMCk7dGhpcy5TVkdfLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO0Jsb2NrbHkudXRpbHMuZG9tLnNldENzc1RyYW5zZm9ybSh0aGlzLlNWR18sXCJ0cmFuc2xhdGUzZChcIithK1wicHgsIFwiK2IrXCJweCwgMHB4KVwiKX07QmxvY2tseS5CbG9ja0RyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS50cmFuc2xhdGVTdXJmYWNlPWZ1bmN0aW9uKGEsYil7dGhpcy5zdXJmYWNlWFlfPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYSp0aGlzLnNjYWxlXyxiKnRoaXMuc2NhbGVfKTt0aGlzLnRyYW5zbGF0ZVN1cmZhY2VJbnRlcm5hbF8oKX07XG5CbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLmdldFN1cmZhY2VUcmFuc2xhdGlvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWSh0aGlzLlNWR18pO3JldHVybiBuZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGEueC90aGlzLnNjYWxlXyxhLnkvdGhpcy5zY2FsZV8pfTtCbG9ja2x5LkJsb2NrRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLmdldEdyb3VwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhZ0dyb3VwX307QmxvY2tseS5CbG9ja0RyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS5nZXRDdXJyZW50QmxvY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmFnR3JvdXBfLmZpcnN0Q2hpbGR9O1xuQmxvY2tseS5CbG9ja0RyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS5jbGVhckFuZEhpZGU9ZnVuY3Rpb24oYSl7YT9hLmFwcGVuZENoaWxkKHRoaXMuZ2V0Q3VycmVudEJsb2NrKCkpOnRoaXMuZHJhZ0dyb3VwXy5yZW1vdmVDaGlsZCh0aGlzLmdldEN1cnJlbnRCbG9jaygpKTt0aGlzLlNWR18uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtpZih0aGlzLmRyYWdHcm91cF8uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgRXJyb3IoXCJEcmFnIGdyb3VwIHdhcyBub3QgY2xlYXJlZC5cIik7dGhpcy5zdXJmYWNlWFlfPW51bGx9O0Jsb2NrbHkudXRpbHMuSWRHZW5lcmF0b3I9e307QmxvY2tseS51dGlscy5JZEdlbmVyYXRvci5uZXh0SWRfPTA7QmxvY2tseS51dGlscy5JZEdlbmVyYXRvci5nZXROZXh0VW5pcXVlSWQ9ZnVuY3Rpb24oKXtyZXR1cm5cImJsb2NrbHktXCIrKEJsb2NrbHkudXRpbHMuSWRHZW5lcmF0b3IubmV4dElkXysrKS50b1N0cmluZygzNil9O0Jsb2NrbHkuQ29tcG9uZW50PWZ1bmN0aW9uKCl7dGhpcy5yaWdodFRvTGVmdF89QmxvY2tseS5Db21wb25lbnQuZGVmYXVsdFJpZ2h0VG9MZWZ0O3RoaXMuaWRfPW51bGw7dGhpcy5pbkRvY3VtZW50Xz0hMTt0aGlzLnBhcmVudF89dGhpcy5lbGVtZW50Xz1udWxsO3RoaXMuY2hpbGRyZW5fPVtdO3RoaXMuY2hpbGRJbmRleF89e307dGhpcy5kaXNwb3NlZF89ITF9O0Jsb2NrbHkuQ29tcG9uZW50LmRlZmF1bHRSaWdodFRvTGVmdD0hMTtCbG9ja2x5LkNvbXBvbmVudC5FcnJvcj17QUxSRUFEWV9SRU5ERVJFRDpcIkNvbXBvbmVudCBhbHJlYWR5IHJlbmRlcmVkXCIsUEFSRU5UX1VOQUJMRV9UT19CRV9TRVQ6XCJVbmFibGUgdG8gc2V0IHBhcmVudCBjb21wb25lbnRcIixDSElMRF9JTkRFWF9PVVRfT0ZfQk9VTkRTOlwiQ2hpbGQgY29tcG9uZW50IGluZGV4IG91dCBvZiBib3VuZHNcIixBQlNUUkFDVF9NRVRIT0Q6XCJVbmltcGxlbWVudGVkIGFic3RyYWN0IG1ldGhvZFwifTtcbkJsb2NrbHkuQ29tcG9uZW50LnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkX3x8KHRoaXMuaWRfPUJsb2NrbHkudXRpbHMuSWRHZW5lcmF0b3IuZ2V0TmV4dFVuaXF1ZUlkKCkpfTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZ2V0RWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRffTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuc2V0RWxlbWVudEludGVybmFsPWZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudF89YX07XG5CbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuc2V0UGFyZW50PWZ1bmN0aW9uKGEpe2lmKHRoaXM9PWEpdGhyb3cgRXJyb3IoQmxvY2tseS5Db21wb25lbnQuRXJyb3IuUEFSRU5UX1VOQUJMRV9UT19CRV9TRVQpO2lmKGEmJnRoaXMucGFyZW50XyYmdGhpcy5pZF8mJnRoaXMucGFyZW50Xy5nZXRDaGlsZCh0aGlzLmlkXykmJnRoaXMucGFyZW50XyE9YSl0aHJvdyBFcnJvcihCbG9ja2x5LkNvbXBvbmVudC5FcnJvci5QQVJFTlRfVU5BQkxFX1RPX0JFX1NFVCk7dGhpcy5wYXJlbnRfPWF9O0Jsb2NrbHkuQ29tcG9uZW50LnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnRffTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuaXNJbkRvY3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5Eb2N1bWVudF99O1xuQmxvY2tseS5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZURvbT1mdW5jdGlvbigpe3Rocm93IEVycm9yKEJsb2NrbHkuQ29tcG9uZW50LkVycm9yLkFCU1RSQUNUX01FVEhPRCk7fTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyXyhhKX07QmxvY2tseS5Db21wb25lbnQucHJvdG90eXBlLnJlbmRlcl89ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmluRG9jdW1lbnRfKXRocm93IEVycm9yKEJsb2NrbHkuQ29tcG9uZW50LkVycm9yLkFMUkVBRFlfUkVOREVSRUQpO3RoaXMuZWxlbWVudF98fHRoaXMuY3JlYXRlRG9tKCk7YT9hLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnRfLGJ8fG51bGwpOmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7dGhpcy5wYXJlbnRfJiYhdGhpcy5wYXJlbnRfLmlzSW5Eb2N1bWVudCgpfHx0aGlzLmVudGVyRG9jdW1lbnQoKX07XG5CbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZW50ZXJEb2N1bWVudD1mdW5jdGlvbigpe3RoaXMuaW5Eb2N1bWVudF89ITA7dGhpcy5mb3JFYWNoQ2hpbGQoZnVuY3Rpb24oYSl7IWEuaXNJbkRvY3VtZW50KCkmJmEuZ2V0RWxlbWVudCgpJiZhLmVudGVyRG9jdW1lbnQoKX0pfTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZXhpdERvY3VtZW50PWZ1bmN0aW9uKCl7dGhpcy5mb3JFYWNoQ2hpbGQoZnVuY3Rpb24oYSl7YS5pc0luRG9jdW1lbnQoKSYmYS5leGl0RG9jdW1lbnQoKX0pO3RoaXMuaW5Eb2N1bWVudF89ITF9O0Jsb2NrbHkuQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlZF98fCh0aGlzLmRpc3Bvc2VkXz0hMCx0aGlzLmRpc3Bvc2VJbnRlcm5hbCgpKX07XG5CbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsPWZ1bmN0aW9uKCl7dGhpcy5pbkRvY3VtZW50XyYmdGhpcy5leGl0RG9jdW1lbnQoKTt0aGlzLmZvckVhY2hDaGlsZChmdW5jdGlvbihhKXthLmRpc3Bvc2UoKX0pO3RoaXMuZWxlbWVudF8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5lbGVtZW50Xyk7dGhpcy5wYXJlbnRfPXRoaXMuZWxlbWVudF89dGhpcy5jaGlsZEluZGV4Xz10aGlzLmNoaWxkcmVuXz1udWxsfTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZENoaWxkQXQoYSx0aGlzLmdldENoaWxkQ291bnQoKSxiKX07XG5CbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuYWRkQ2hpbGRBdD1mdW5jdGlvbihhLGIsYyl7aWYoYS5pbkRvY3VtZW50XyYmKGN8fCF0aGlzLmluRG9jdW1lbnRfKSl0aHJvdyBFcnJvcihCbG9ja2x5LkNvbXBvbmVudC5FcnJvci5BTFJFQURZX1JFTkRFUkVEKTtpZigwPmJ8fGI+dGhpcy5nZXRDaGlsZENvdW50KCkpdGhyb3cgRXJyb3IoQmxvY2tseS5Db21wb25lbnQuRXJyb3IuQ0hJTERfSU5ERVhfT1VUX09GX0JPVU5EUyk7dGhpcy5jaGlsZEluZGV4X1thLmdldElkKCldPWE7aWYoYS5nZXRQYXJlbnQoKT09dGhpcyl7dmFyIGQ9dGhpcy5jaGlsZHJlbl8uaW5kZXhPZihhKTstMTxkJiZ0aGlzLmNoaWxkcmVuXy5zcGxpY2UoZCwxKX1hLnNldFBhcmVudCh0aGlzKTt0aGlzLmNoaWxkcmVuXy5zcGxpY2UoYiwwLGEpO2EuaW5Eb2N1bWVudF8mJnRoaXMuaW5Eb2N1bWVudF8mJmEuZ2V0UGFyZW50KCk9PXRoaXM/KGM9dGhpcy5nZXRDb250ZW50RWxlbWVudCgpLGI9Yy5jaGlsZE5vZGVzW2JdfHxcbm51bGwsYiE9YS5nZXRFbGVtZW50KCkmJmMuaW5zZXJ0QmVmb3JlKGEuZ2V0RWxlbWVudCgpLGIpKTpjPyh0aGlzLmVsZW1lbnRffHx0aGlzLmNyZWF0ZURvbSgpLGI9dGhpcy5nZXRDaGlsZEF0KGIrMSksYS5yZW5kZXJfKHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoKSxiP2IuZWxlbWVudF86bnVsbCkpOnRoaXMuaW5Eb2N1bWVudF8mJiFhLmluRG9jdW1lbnRfJiZhLmVsZW1lbnRfJiZhLmVsZW1lbnRfLnBhcmVudE5vZGUmJmEuZWxlbWVudF8ucGFyZW50Tm9kZS5ub2RlVHlwZT09QmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuRUxFTUVOVF9OT0RFJiZhLmVudGVyRG9jdW1lbnQoKX07QmxvY2tseS5Db21wb25lbnQucHJvdG90eXBlLmdldENvbnRlbnRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudF99O0Jsb2NrbHkuQ29tcG9uZW50LnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbigpe3JldHVybiAwIT10aGlzLmNoaWxkcmVuXy5sZW5ndGh9O1xuQmxvY2tseS5Db21wb25lbnQucHJvdG90eXBlLmdldENoaWxkQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbl8ubGVuZ3RofTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q2hpbGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5jaGlsZEluZGV4X1thXXx8bnVsbDpudWxsfTtCbG9ja2x5LkNvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q2hpbGRBdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jaGlsZHJlbl9bYV18fG51bGx9O0Jsb2NrbHkuQ29tcG9uZW50LnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMuY2hpbGRyZW5fLmxlbmd0aDtjKyspYS5jYWxsKGIsdGhpcy5jaGlsZHJlbl9bY10sYyl9O0Jsb2NrbHkuQ3NzPXt9O0Jsb2NrbHkuQ3NzLmluamVjdGVkXz0hMTtCbG9ja2x5LkNzcy5yZWdpc3Rlcj1mdW5jdGlvbihhKXtpZihCbG9ja2x5LkNzcy5pbmplY3RlZF8pdGhyb3cgRXJyb3IoXCJDU1MgYWxyZWFkeSBpbmplY3RlZFwiKTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShCbG9ja2x5LkNzcy5DT05URU5ULGEpO2EubGVuZ3RoPTB9O1xuQmxvY2tseS5Dc3MuaW5qZWN0PWZ1bmN0aW9uKGEsYil7aWYoIUJsb2NrbHkuQ3NzLmluamVjdGVkXyl7QmxvY2tseS5Dc3MuaW5qZWN0ZWRfPSEwO3ZhciBjPUJsb2NrbHkuQ3NzLkNPTlRFTlQuam9pbihcIlxcblwiKTtCbG9ja2x5LkNzcy5DT05URU5ULmxlbmd0aD0wO2EmJihhPWIucmVwbGFjZSgvW1xcXFwvXSQvLFwiXCIpLGM9Yy5yZXBsYWNlKC88PDxQQVRIPj4+L2csYSksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksYS5pZD1cImJsb2NrbHktY29tbW9uLXN0eWxlXCIsYz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjKSxhLmFwcGVuZENoaWxkKGMpLGRvY3VtZW50LmhlYWQuaW5zZXJ0QmVmb3JlKGEsZG9jdW1lbnQuaGVhZC5maXJzdENoaWxkKSl9fTtcbkJsb2NrbHkuQ3NzLkNPTlRFTlQ9W1wiLmJsb2NrbHlTdmcge1wiLFwiYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcIixcIm91dGxpbmU6IG5vbmU7XCIsXCJvdmVyZmxvdzogaGlkZGVuO1wiLFwicG9zaXRpb246IGFic29sdXRlO1wiLFwiZGlzcGxheTogYmxvY2s7XCIsXCJ9XCIsXCIuYmxvY2tseVdpZGdldERpdiB7XCIsXCJkaXNwbGF5OiBub25lO1wiLFwicG9zaXRpb246IGFic29sdXRlO1wiLFwiei1pbmRleDogOTk5OTk7XCIsXCJ9XCIsXCIuaW5qZWN0aW9uRGl2IHtcIixcImhlaWdodDogMTAwJTtcIixcInBvc2l0aW9uOiByZWxhdGl2ZTtcIixcIm92ZXJmbG93OiBoaWRkZW47XCIsXCJ0b3VjaC1hY3Rpb246IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseU5vblNlbGVjdGFibGUge1wiLFwidXNlci1zZWxlY3Q6IG5vbmU7XCIsXCItbXMtdXNlci1zZWxlY3Q6IG5vbmU7XCIsXCItd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1wiLFwifVwiLFwiLmJsb2NrbHlXc0RyYWdTdXJmYWNlIHtcIixcImRpc3BsYXk6IG5vbmU7XCIsXCJwb3NpdGlvbjogYWJzb2x1dGU7XCIsXCJ0b3A6IDA7XCIsXG5cImxlZnQ6IDA7XCIsXCJ9XCIsXCIuYmxvY2tseVdzRHJhZ1N1cmZhY2UuYmxvY2tseU92ZXJmbG93VmlzaWJsZSB7XCIsXCJvdmVyZmxvdzogdmlzaWJsZTtcIixcIn1cIixcIi5ibG9ja2x5QmxvY2tEcmFnU3VyZmFjZSB7XCIsXCJkaXNwbGF5OiBub25lO1wiLFwicG9zaXRpb246IGFic29sdXRlO1wiLFwidG9wOiAwO1wiLFwibGVmdDogMDtcIixcInJpZ2h0OiAwO1wiLFwiYm90dG9tOiAwO1wiLFwib3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDtcIixcInotaW5kZXg6IDUwO1wiLFwifVwiLFwiLmJsb2NrbHlCbG9ja0NhbnZhcy5ibG9ja2x5Q2FudmFzVHJhbnNpdGlvbmluZyxcIixcIi5ibG9ja2x5QnViYmxlQ2FudmFzLmJsb2NrbHlDYW52YXNUcmFuc2l0aW9uaW5nIHtcIixcInRyYW5zaXRpb246IHRyYW5zZm9ybSAuNXM7XCIsXCJ9XCIsXCIuYmxvY2tseVRvb2x0aXBEaXYge1wiLFwiYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZjNztcIixcImJvcmRlcjogMXB4IHNvbGlkICNkZGM7XCIsXCJib3gtc2hhZG93OiA0cHggNHB4IDIwcHggMXB4IHJnYmEoMCwwLDAsLjE1KTtcIixcblwiY29sb3I6ICMwMDA7XCIsXCJkaXNwbGF5OiBub25lO1wiLFwiZm9udDogOXB0IHNhbnMtc2VyaWY7XCIsXCJvcGFjaXR5OiAuOTtcIixcInBhZGRpbmc6IDJweDtcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIixcInotaW5kZXg6IDEwMDAwMDtcIixcIn1cIixcIi5ibG9ja2x5RHJvcERvd25EaXYge1wiLFwicG9zaXRpb246IGFic29sdXRlO1wiLFwibGVmdDogMDtcIixcInRvcDogMDtcIixcInotaW5kZXg6IDEwMDA7XCIsXCJkaXNwbGF5OiBub25lO1wiLFwiYm9yZGVyOiAxcHggc29saWQ7XCIsXCJib3JkZXItY29sb3I6ICNkYWRjZTA7XCIsXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1wiLFwiYm9yZGVyLXJhZGl1czogMnB4O1wiLFwicGFkZGluZzogNHB4O1wiLFwiYm94LXNoYWRvdzogMCAwIDNweCAxcHggcmdiYSgwLDAsMCwuMyk7XCIsXCJ9XCIsXCIuYmxvY2tseURyb3BEb3duRGl2LmJsb2NrbHlGb2N1c2VkIHtcIixcImJveC1zaGFkb3c6IDAgMCA2cHggMXB4IHJnYmEoMCwwLDAsLjMpO1wiLFwifVwiLFwiLmJsb2NrbHlEcm9wRG93bkNvbnRlbnQge1wiLFxuXCJtYXgtaGVpZ2h0OiAzMDBweDtcIixcIm92ZXJmbG93OiBhdXRvO1wiLFwib3ZlcmZsb3cteDogaGlkZGVuO1wiLFwicG9zaXRpb246IHJlbGF0aXZlO1wiLFwifVwiLFwiLmJsb2NrbHlEcm9wRG93bkFycm93IHtcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIixcImxlZnQ6IDA7XCIsXCJ0b3A6IDA7XCIsXCJ3aWR0aDogMTZweDtcIixcImhlaWdodDogMTZweDtcIixcInotaW5kZXg6IC0xO1wiLFwiYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcIixcImJvcmRlci1jb2xvcjogaW5oZXJpdDtcIixcIn1cIixcIi5ibG9ja2x5RHJvcERvd25CdXR0b24ge1wiLFwiZGlzcGxheTogaW5saW5lLWJsb2NrO1wiLFwiZmxvYXQ6IGxlZnQ7XCIsXCJwYWRkaW5nOiAwO1wiLFwibWFyZ2luOiA0cHg7XCIsXCJib3JkZXItcmFkaXVzOiA0cHg7XCIsXCJvdXRsaW5lOiBub25lO1wiLFwiYm9yZGVyOiAxcHggc29saWQ7XCIsXCJ0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4xcztcIixcImN1cnNvcjogcG9pbnRlcjtcIixcIn1cIixcIi5ibG9ja2x5QXJyb3dUb3Age1wiLFwiYm9yZGVyLXRvcDogMXB4IHNvbGlkO1wiLFxuXCJib3JkZXItbGVmdDogMXB4IHNvbGlkO1wiLFwiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O1wiLFwiYm9yZGVyLWNvbG9yOiBpbmhlcml0O1wiLFwifVwiLFwiLmJsb2NrbHlBcnJvd0JvdHRvbSB7XCIsXCJib3JkZXItYm90dG9tOiAxcHggc29saWQ7XCIsXCJib3JkZXItcmlnaHQ6IDFweCBzb2xpZDtcIixcImJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XCIsXCJib3JkZXItY29sb3I6IGluaGVyaXQ7XCIsXCJ9XCIsXCIuYmxvY2tseVJlc2l6ZVNFIHtcIixcImN1cnNvcjogc2UtcmVzaXplO1wiLFwiZmlsbDogI2FhYTtcIixcIn1cIixcIi5ibG9ja2x5UmVzaXplU1cge1wiLFwiY3Vyc29yOiBzdy1yZXNpemU7XCIsXCJmaWxsOiAjYWFhO1wiLFwifVwiLFwiLmJsb2NrbHlSZXNpemVMaW5lIHtcIixcInN0cm9rZTogIzUxNUE1QTtcIixcInN0cm9rZS13aWR0aDogMTtcIixcIn1cIixcIi5ibG9ja2x5SGlnaGxpZ2h0ZWRDb25uZWN0aW9uUGF0aCB7XCIsXCJmaWxsOiBub25lO1wiLFwic3Ryb2tlOiAjZmMzO1wiLFwic3Ryb2tlLXdpZHRoOiA0cHg7XCIsXG5cIn1cIixcIi5ibG9ja2x5UGF0aExpZ2h0IHtcIixcImZpbGw6IG5vbmU7XCIsXCJzdHJva2UtbGluZWNhcDogcm91bmQ7XCIsXCJzdHJva2Utd2lkdGg6IDE7XCIsXCJ9XCIsXCIuYmxvY2tseVNlbGVjdGVkPi5ibG9ja2x5UGF0aExpZ2h0IHtcIixcImRpc3BsYXk6IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseURyYWdnYWJsZSB7XCIsJ2N1cnNvcjogdXJsKFwiPDw8UEFUSD4+Pi9oYW5kb3Blbi5jdXJcIiksIGF1dG87JyxcImN1cnNvcjogZ3JhYjtcIixcImN1cnNvcjogLXdlYmtpdC1ncmFiO1wiLFwifVwiLFwiLmJsb2NrbHlEcmFnZ2luZyB7XCIsJ2N1cnNvcjogdXJsKFwiPDw8UEFUSD4+Pi9oYW5kY2xvc2VkLmN1clwiKSwgYXV0bzsnLFwiY3Vyc29yOiBncmFiYmluZztcIixcImN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcIixcIn1cIixcIi5ibG9ja2x5RHJhZ2dhYmxlOmFjdGl2ZSB7XCIsJ2N1cnNvcjogdXJsKFwiPDw8UEFUSD4+Pi9oYW5kY2xvc2VkLmN1clwiKSwgYXV0bzsnLFwiY3Vyc29yOiBncmFiYmluZztcIixcImN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcIixcblwifVwiLFwiLmJsb2NrbHlCbG9ja0RyYWdTdXJmYWNlIC5ibG9ja2x5RHJhZ2dhYmxlIHtcIiwnY3Vyc29yOiB1cmwoXCI8PDxQQVRIPj4+L2hhbmRjbG9zZWQuY3VyXCIpLCBhdXRvOycsXCJjdXJzb3I6IGdyYWJiaW5nO1wiLFwiY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1wiLFwifVwiLFwiLmJsb2NrbHlEcmFnZ2luZy5ibG9ja2x5RHJhZ2dpbmdEZWxldGUge1wiLCdjdXJzb3I6IHVybChcIjw8PFBBVEg+Pj4vaGFuZGRlbGV0ZS5jdXJcIiksIGF1dG87JyxcIn1cIixcIi5ibG9ja2x5RHJhZ2dpbmc+LmJsb2NrbHlQYXRoLFwiLFwiLmJsb2NrbHlEcmFnZ2luZz4uYmxvY2tseVBhdGhMaWdodCB7XCIsXCJmaWxsLW9wYWNpdHk6IC44O1wiLFwic3Ryb2tlLW9wYWNpdHk6IC44O1wiLFwifVwiLFwiLmJsb2NrbHlEcmFnZ2luZz4uYmxvY2tseVBhdGhEYXJrIHtcIixcImRpc3BsYXk6IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseURpc2FibGVkPi5ibG9ja2x5UGF0aCB7XCIsXCJmaWxsLW9wYWNpdHk6IC41O1wiLFwic3Ryb2tlLW9wYWNpdHk6IC41O1wiLFxuXCJ9XCIsXCIuYmxvY2tseURpc2FibGVkPi5ibG9ja2x5UGF0aExpZ2h0LFwiLFwiLmJsb2NrbHlEaXNhYmxlZD4uYmxvY2tseVBhdGhEYXJrIHtcIixcImRpc3BsYXk6IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseUluc2VydGlvbk1hcmtlcj4uYmxvY2tseVBhdGgsXCIsXCIuYmxvY2tseUluc2VydGlvbk1hcmtlcj4uYmxvY2tseVBhdGhMaWdodCxcIixcIi5ibG9ja2x5SW5zZXJ0aW9uTWFya2VyPi5ibG9ja2x5UGF0aERhcmsge1wiLFwiZmlsbC1vcGFjaXR5OiAuMjtcIixcInN0cm9rZTogbm9uZTtcIixcIn1cIixcIi5ibG9ja2x5TXVsdGlsaW5lVGV4dCB7XCIsXCJmb250LWZhbWlseTogbW9ub3NwYWNlO1wiLFwifVwiLFwiLmJsb2NrbHlOb25FZGl0YWJsZVRleHQ+dGV4dCB7XCIsXCJwb2ludGVyLWV2ZW50czogbm9uZTtcIixcIn1cIixcIi5ibG9ja2x5Rmx5b3V0IHtcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIixcInotaW5kZXg6IDIwO1wiLFwifVwiLFwiLmJsb2NrbHlUZXh0IHRleHQge1wiLFwiY3Vyc29yOiBkZWZhdWx0O1wiLFwifVwiLFwiLmJsb2NrbHlTdmcgdGV4dCxcIixcblwiLmJsb2NrbHlCbG9ja0RyYWdTdXJmYWNlIHRleHQge1wiLFwidXNlci1zZWxlY3Q6IG5vbmU7XCIsXCItbXMtdXNlci1zZWxlY3Q6IG5vbmU7XCIsXCItd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1wiLFwiY3Vyc29yOiBpbmhlcml0O1wiLFwifVwiLFwiLmJsb2NrbHlIaWRkZW4ge1wiLFwiZGlzcGxheTogbm9uZTtcIixcIn1cIixcIi5ibG9ja2x5RmllbGREcm9wZG93bjpub3QoLmJsb2NrbHlIaWRkZW4pIHtcIixcImRpc3BsYXk6IGJsb2NrO1wiLFwifVwiLFwiLmJsb2NrbHlJY29uR3JvdXAge1wiLFwiY3Vyc29yOiBkZWZhdWx0O1wiLFwifVwiLFwiLmJsb2NrbHlJY29uR3JvdXA6bm90KDpob3ZlciksXCIsXCIuYmxvY2tseUljb25Hcm91cFJlYWRvbmx5IHtcIixcIm9wYWNpdHk6IC42O1wiLFwifVwiLFwiLmJsb2NrbHlJY29uU2hhcGUge1wiLFwiZmlsbDogIzAwZjtcIixcInN0cm9rZTogI2ZmZjtcIixcInN0cm9rZS13aWR0aDogMXB4O1wiLFwifVwiLFwiLmJsb2NrbHlJY29uU3ltYm9sIHtcIixcImZpbGw6ICNmZmY7XCIsXCJ9XCIsXCIuYmxvY2tseU1pbmltYWxCb2R5IHtcIixcblwibWFyZ2luOiAwO1wiLFwicGFkZGluZzogMDtcIixcIn1cIixcIi5ibG9ja2x5SHRtbElucHV0IHtcIixcImJvcmRlcjogbm9uZTtcIixcImJvcmRlci1yYWRpdXM6IDRweDtcIixcImhlaWdodDogMTAwJTtcIixcIm1hcmdpbjogMDtcIixcIm91dGxpbmU6IG5vbmU7XCIsXCJwYWRkaW5nOiAwO1wiLFwid2lkdGg6IDEwMCU7XCIsXCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCIsXCJkaXNwbGF5OiBibG9jaztcIixcImJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIsXCJ9XCIsXCIuYmxvY2tseUh0bWxJbnB1dDo6LW1zLWNsZWFyIHtcIixcImRpc3BsYXk6IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseU1haW5CYWNrZ3JvdW5kIHtcIixcInN0cm9rZS13aWR0aDogMTtcIixcInN0cm9rZTogI2M2YzZjNjtcIixcIn1cIixcIi5ibG9ja2x5TXV0YXRvckJhY2tncm91bmQge1wiLFwiZmlsbDogI2ZmZjtcIixcInN0cm9rZTogI2RkZDtcIixcInN0cm9rZS13aWR0aDogMTtcIixcIn1cIixcIi5ibG9ja2x5Rmx5b3V0QmFja2dyb3VuZCB7XCIsXCJmaWxsOiAjZGRkO1wiLFwiZmlsbC1vcGFjaXR5OiAuODtcIixcblwifVwiLFwiLmJsb2NrbHlNYWluV29ya3NwYWNlU2Nyb2xsYmFyIHtcIixcInotaW5kZXg6IDIwO1wiLFwifVwiLFwiLmJsb2NrbHlGbHlvdXRTY3JvbGxiYXIge1wiLFwiei1pbmRleDogMzA7XCIsXCJ9XCIsXCIuYmxvY2tseVNjcm9sbGJhckhvcml6b250YWwsXCIsXCIuYmxvY2tseVNjcm9sbGJhclZlcnRpY2FsIHtcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIixcIm91dGxpbmU6IG5vbmU7XCIsXCJ9XCIsXCIuYmxvY2tseVNjcm9sbGJhckJhY2tncm91bmQge1wiLFwib3BhY2l0eTogMDtcIixcIn1cIixcIi5ibG9ja2x5U2Nyb2xsYmFySGFuZGxlIHtcIixcImZpbGw6ICNjY2M7XCIsXCJ9XCIsXCIuYmxvY2tseVNjcm9sbGJhckJhY2tncm91bmQ6aG92ZXIrLmJsb2NrbHlTY3JvbGxiYXJIYW5kbGUsXCIsXCIuYmxvY2tseVNjcm9sbGJhckhhbmRsZTpob3ZlciB7XCIsXCJmaWxsOiAjYmJiO1wiLFwifVwiLFwiLmJsb2NrbHlGbHlvdXQgLmJsb2NrbHlTY3JvbGxiYXJIYW5kbGUge1wiLFwiZmlsbDogI2JiYjtcIixcIn1cIixcIi5ibG9ja2x5Rmx5b3V0IC5ibG9ja2x5U2Nyb2xsYmFyQmFja2dyb3VuZDpob3ZlcisuYmxvY2tseVNjcm9sbGJhckhhbmRsZSxcIixcblwiLmJsb2NrbHlGbHlvdXQgLmJsb2NrbHlTY3JvbGxiYXJIYW5kbGU6aG92ZXIge1wiLFwiZmlsbDogI2FhYTtcIixcIn1cIixcIi5ibG9ja2x5SW52YWxpZElucHV0IHtcIixcImJhY2tncm91bmQ6ICNmYWE7XCIsXCJ9XCIsXCIuYmxvY2tseVZlcnRpY2FsTWFya2VyIHtcIixcInN0cm9rZS13aWR0aDogM3B4O1wiLFwiZmlsbDogcmdiYSgyNTUsMjU1LDI1NSwuNSk7XCIsXCJwb2ludGVyLWV2ZW50czogbm9uZTtcIixcIn1cIixcIi5ibG9ja2x5Q29tcHV0ZUNhbnZhcyB7XCIsXCJwb3NpdGlvbjogYWJzb2x1dGU7XCIsXCJ3aWR0aDogMDtcIixcImhlaWdodDogMDtcIixcIn1cIixcIi5ibG9ja2x5Tm9Qb2ludGVyRXZlbnRzIHtcIixcInBvaW50ZXItZXZlbnRzOiBub25lO1wiLFwifVwiLFwiLmJsb2NrbHlDb250ZXh0TWVudSB7XCIsXCJib3JkZXItcmFkaXVzOiA0cHg7XCIsXCJtYXgtaGVpZ2h0OiAxMDAlO1wiLFwifVwiLFwiLmJsb2NrbHlEcm9wZG93bk1lbnUge1wiLFwiYm9yZGVyLXJhZGl1czogMnB4O1wiLFwicGFkZGluZzogMCAhaW1wb3J0YW50O1wiLFwifVwiLFxuXCIuYmxvY2tseURyb3Bkb3duTWVudSAuYmxvY2tseU1lbnVJdGVtIHtcIixcInBhZGRpbmctbGVmdDogMjhweDtcIixcIn1cIixcIi5ibG9ja2x5RHJvcGRvd25NZW51IC5ibG9ja2x5TWVudUl0ZW1SdGwge1wiLFwicGFkZGluZy1sZWZ0OiA1cHg7XCIsXCJwYWRkaW5nLXJpZ2h0OiAyOHB4O1wiLFwifVwiLFwiLmJsb2NrbHlXaWRnZXREaXYgLmJsb2NrbHlNZW51IHtcIixcImJhY2tncm91bmQ6ICNmZmY7XCIsXCJib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcIixcImJveC1zaGFkb3c6IDAgMCAzcHggMXB4IHJnYmEoMCwwLDAsLjMpO1wiLFwiZm9udDogbm9ybWFsIDEzcHggQXJpYWwsIHNhbnMtc2VyaWY7XCIsXCJtYXJnaW46IDA7XCIsXCJvdXRsaW5lOiBub25lO1wiLFwicGFkZGluZzogNHB4IDA7XCIsXCJwb3NpdGlvbjogYWJzb2x1dGU7XCIsXCJvdmVyZmxvdy15OiBhdXRvO1wiLFwib3ZlcmZsb3cteDogaGlkZGVuO1wiLFwibWF4LWhlaWdodDogMTAwJTtcIixcInotaW5kZXg6IDIwMDAwO1wiLFwifVwiLFwiLmJsb2NrbHlXaWRnZXREaXYgLmJsb2NrbHlNZW51LmJsb2NrbHlGb2N1c2VkIHtcIixcblwiYm94LXNoYWRvdzogMCAwIDZweCAxcHggcmdiYSgwLDAsMCwuMyk7XCIsXCJ9XCIsXCIuYmxvY2tseURyb3BEb3duRGl2IC5ibG9ja2x5TWVudSB7XCIsJ2ZvbnQ6IG5vcm1hbCAxM3B4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOycsXCJvdXRsaW5lOiBub25lO1wiLFwiei1pbmRleDogMjAwMDA7XCIsXCJ9XCIsXCIuYmxvY2tseU1lbnVJdGVtIHtcIixcImJvcmRlcjogbm9uZTtcIixcImNvbG9yOiAjMDAwO1wiLFwiY3Vyc29yOiBwb2ludGVyO1wiLFwibGlzdC1zdHlsZTogbm9uZTtcIixcIm1hcmdpbjogMDtcIixcIm1pbi13aWR0aDogN2VtO1wiLFwicGFkZGluZzogNnB4IDE1cHg7XCIsXCJ3aGl0ZS1zcGFjZTogbm93cmFwO1wiLFwifVwiLFwiLmJsb2NrbHlNZW51SXRlbURpc2FibGVkIHtcIixcImNvbG9yOiAjY2NjO1wiLFwiY3Vyc29yOiBpbmhlcml0O1wiLFwifVwiLFwiLmJsb2NrbHlNZW51SXRlbUhpZ2hsaWdodCB7XCIsXCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLC4xKTtcIixcIn1cIixcIi5ibG9ja2x5TWVudUl0ZW1DaGVja2JveCB7XCIsXG5cImhlaWdodDogMTZweDtcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIixcIndpZHRoOiAxNnB4O1wiLFwifVwiLFwiLmJsb2NrbHlNZW51SXRlbVNlbGVjdGVkIC5ibG9ja2x5TWVudUl0ZW1DaGVja2JveCB7XCIsXCJiYWNrZ3JvdW5kOiB1cmwoPDw8UEFUSD4+Pi9zcHJpdGVzLnBuZykgbm8tcmVwZWF0IC00OHB4IC0xNnB4O1wiLFwiZmxvYXQ6IGxlZnQ7XCIsXCJtYXJnaW4tbGVmdDogLTI0cHg7XCIsXCJwb3NpdGlvbjogc3RhdGljO1wiLFwifVwiLFwiLmJsb2NrbHlNZW51SXRlbVJ0bCAuYmxvY2tseU1lbnVJdGVtQ2hlY2tib3gge1wiLFwiZmxvYXQ6IHJpZ2h0O1wiLFwibWFyZ2luLXJpZ2h0OiAtMjRweDtcIixcIn1cIl07QmxvY2tseS51dGlscy5tYXRoPXt9O0Jsb2NrbHkudXRpbHMubWF0aC50b1JhZGlhbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEqTWF0aC5QSS8xODB9O0Jsb2NrbHkudXRpbHMubWF0aC50b0RlZ3JlZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIDE4MCphL01hdGguUEl9O0Jsb2NrbHkudXRpbHMubWF0aC5jbGFtcD1mdW5jdGlvbihhLGIsYyl7aWYoYzxhKXt2YXIgZD1jO2M9YTthPWR9cmV0dXJuIE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSl9O0Jsb2NrbHkuRHJvcERvd25EaXY9ZnVuY3Rpb24oKXt9O0Jsb2NrbHkuRHJvcERvd25EaXYuYm91bmRzRWxlbWVudF89bnVsbDtCbG9ja2x5LkRyb3BEb3duRGl2Lm93bmVyXz1udWxsO0Jsb2NrbHkuRHJvcERvd25EaXYucG9zaXRpb25Ub0ZpZWxkXz1udWxsO0Jsb2NrbHkuRHJvcERvd25EaXYuQVJST1dfU0laRT0xNjtCbG9ja2x5LkRyb3BEb3duRGl2LkJPUkRFUl9TSVpFPTE7QmxvY2tseS5Ecm9wRG93bkRpdi5BUlJPV19IT1JJWk9OVEFMX1BBRERJTkc9MTI7QmxvY2tseS5Ecm9wRG93bkRpdi5QQURESU5HX1k9MTY7QmxvY2tseS5Ecm9wRG93bkRpdi5BTklNQVRJT05fVElNRT0uMjU7QmxvY2tseS5Ecm9wRG93bkRpdi5hbmltYXRlT3V0VGltZXJfPW51bGw7QmxvY2tseS5Ecm9wRG93bkRpdi5vbkhpZGVfPW51bGw7QmxvY2tseS5Ecm9wRG93bkRpdi5yZW5kZXJlckNsYXNzTmFtZV89XCJcIjtCbG9ja2x5LkRyb3BEb3duRGl2LnRoZW1lQ2xhc3NOYW1lXz1cIlwiO1xuQmxvY2tseS5Ecm9wRG93bkRpdi5jcmVhdGVEb209ZnVuY3Rpb24oKXtpZighQmxvY2tseS5Ecm9wRG93bkRpdi5ESVZfKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuY2xhc3NOYW1lPVwiYmxvY2tseURyb3BEb3duRGl2XCI7KEJsb2NrbHkucGFyZW50Q29udGFpbmVyfHxkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChhKTtCbG9ja2x5LkRyb3BEb3duRGl2LkRJVl89YTt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuY2xhc3NOYW1lPVwiYmxvY2tseURyb3BEb3duQ29udGVudFwiO2EuYXBwZW5kQ2hpbGQoYik7QmxvY2tseS5Ecm9wRG93bkRpdi5jb250ZW50Xz1iO2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLmNsYXNzTmFtZT1cImJsb2NrbHlEcm9wRG93bkFycm93XCI7YS5hcHBlbmRDaGlsZChiKTtCbG9ja2x5LkRyb3BEb3duRGl2LmFycm93Xz1iO0Jsb2NrbHkuRHJvcERvd25EaXYuRElWXy5zdHlsZS5vcGFjaXR5PTA7QmxvY2tseS5Ecm9wRG93bkRpdi5ESVZfLnN0eWxlLnRyYW5zaXRpb249XG5cInRyYW5zZm9ybSBcIitCbG9ja2x5LkRyb3BEb3duRGl2LkFOSU1BVElPTl9USU1FK1wicywgb3BhY2l0eSBcIitCbG9ja2x5LkRyb3BEb3duRGl2LkFOSU1BVElPTl9USU1FK1wic1wiO2EuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIixmdW5jdGlvbigpe0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsXCJibG9ja2x5Rm9jdXNlZFwiKX0pO2EuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsZnVuY3Rpb24oKXtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLFwiYmxvY2tseUZvY3VzZWRcIil9KX19O0Jsb2NrbHkuRHJvcERvd25EaXYuc2V0Qm91bmRzRWxlbWVudD1mdW5jdGlvbihhKXtCbG9ja2x5LkRyb3BEb3duRGl2LmJvdW5kc0VsZW1lbnRfPWF9O0Jsb2NrbHkuRHJvcERvd25EaXYuZ2V0Q29udGVudERpdj1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LkRyb3BEb3duRGl2LmNvbnRlbnRffTtcbkJsb2NrbHkuRHJvcERvd25EaXYuY2xlYXJDb250ZW50PWZ1bmN0aW9uKCl7QmxvY2tseS5Ecm9wRG93bkRpdi5jb250ZW50Xy50ZXh0Q29udGVudD1cIlwiO0Jsb2NrbHkuRHJvcERvd25EaXYuY29udGVudF8uc3R5bGUud2lkdGg9XCJcIn07QmxvY2tseS5Ecm9wRG93bkRpdi5zZXRDb2xvdXI9ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LkRyb3BEb3duRGl2LkRJVl8uc3R5bGUuYmFja2dyb3VuZENvbG9yPWE7QmxvY2tseS5Ecm9wRG93bkRpdi5ESVZfLnN0eWxlLmJvcmRlckNvbG9yPWJ9O0Jsb2NrbHkuRHJvcERvd25EaXYuc2hvd1Bvc2l0aW9uZWRCeUJsb2NrPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBCbG9ja2x5LkRyb3BEb3duRGl2LnNob3dQb3NpdGlvbmVkQnlSZWN0XyhCbG9ja2x5LkRyb3BEb3duRGl2LmdldFNjYWxlZEJib3hPZkJsb2NrXyhiKSxhLGMsZCl9O1xuQmxvY2tseS5Ecm9wRG93bkRpdi5zaG93UG9zaXRpb25lZEJ5RmllbGQ9ZnVuY3Rpb24oYSxiLGMpe0Jsb2NrbHkuRHJvcERvd25EaXYucG9zaXRpb25Ub0ZpZWxkXz0hMDtyZXR1cm4gQmxvY2tseS5Ecm9wRG93bkRpdi5zaG93UG9zaXRpb25lZEJ5UmVjdF8oQmxvY2tseS5Ecm9wRG93bkRpdi5nZXRTY2FsZWRCYm94T2ZGaWVsZF8oYSksYSxiLGMpfTtCbG9ja2x5LkRyb3BEb3duRGl2LmdldFNjYWxlZEJib3hPZkJsb2NrXz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldFN2Z1Jvb3QoKSxjPWIuZ2V0QkJveCgpLGQ9YS53b3Jrc3BhY2Uuc2NhbGU7YT1jLmhlaWdodCpkO2M9Yy53aWR0aCpkO2I9QmxvY2tseS51dGlscy5zdHlsZS5nZXRQYWdlT2Zmc2V0KGIpO3JldHVybiBuZXcgQmxvY2tseS51dGlscy5SZWN0KGIueSxiLnkrYSxiLngsYi54K2MpfTtcbkJsb2NrbHkuRHJvcERvd25EaXYuZ2V0U2NhbGVkQmJveE9mRmllbGRfPWZ1bmN0aW9uKGEpe2E9YS5nZXRTY2FsZWRCQm94KCk7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLlJlY3QoYS50b3AsYS5ib3R0b20sYS5sZWZ0LGEucmlnaHQpfTtCbG9ja2x5LkRyb3BEb3duRGl2LnNob3dQb3NpdGlvbmVkQnlSZWN0Xz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLmxlZnQrKGEucmlnaHQtYS5sZWZ0KS8yLGY9YS5ib3R0b207YT1hLnRvcDtkJiYoYSs9ZCk7ZD1iLmdldFNvdXJjZUJsb2NrKCk7Zm9yKHZhciBnPWQud29ya3NwYWNlO2cub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2U7KWc9Zy5vcHRpb25zLnBhcmVudFdvcmtzcGFjZTtCbG9ja2x5LkRyb3BEb3duRGl2LnNldEJvdW5kc0VsZW1lbnQoZy5nZXRQYXJlbnRTdmcoKS5wYXJlbnROb2RlKTtyZXR1cm4gQmxvY2tseS5Ecm9wRG93bkRpdi5zaG93KGIsZC5SVEwsZSxmLGUsYSxjKX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LnNob3c9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7QmxvY2tseS5Ecm9wRG93bkRpdi5vd25lcl89YTtCbG9ja2x5LkRyb3BEb3duRGl2Lm9uSGlkZV89Z3x8bnVsbDthPUJsb2NrbHkuRHJvcERvd25EaXYuRElWXzthLnN0eWxlLmRpcmVjdGlvbj1iP1wicnRsXCI6XCJsdHJcIjtiPUJsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpO0Jsb2NrbHkuRHJvcERvd25EaXYucmVuZGVyZXJDbGFzc05hbWVfPWIuZ2V0UmVuZGVyZXIoKS5nZXRDbGFzc05hbWUoKTtCbG9ja2x5LkRyb3BEb3duRGl2LnRoZW1lQ2xhc3NOYW1lXz1iLmdldFRoZW1lKCkuZ2V0Q2xhc3NOYW1lKCk7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYSxCbG9ja2x5LkRyb3BEb3duRGl2LnJlbmRlcmVyQ2xhc3NOYW1lXyk7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYSxCbG9ja2x5LkRyb3BEb3duRGl2LnRoZW1lQ2xhc3NOYW1lXyk7cmV0dXJuIEJsb2NrbHkuRHJvcERvd25EaXYucG9zaXRpb25JbnRlcm5hbF8oYyxcbmQsZSxmKX07QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRCb3VuZHNJbmZvXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0UGFnZU9mZnNldChCbG9ja2x5LkRyb3BEb3duRGl2LmJvdW5kc0VsZW1lbnRfKSxiPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0U2l6ZShCbG9ja2x5LkRyb3BEb3duRGl2LmJvdW5kc0VsZW1lbnRfKTtyZXR1cm57bGVmdDphLngscmlnaHQ6YS54K2Iud2lkdGgsdG9wOmEueSxib3R0b206YS55K2IuaGVpZ2h0LHdpZHRoOmIud2lkdGgsaGVpZ2h0OmIuaGVpZ2h0fX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uTWV0cmljc189ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRCb3VuZHNJbmZvXygpLGY9QmxvY2tseS51dGlscy5zdHlsZS5nZXRTaXplKEJsb2NrbHkuRHJvcERvd25EaXYuRElWXyk7cmV0dXJuIGIrZi5oZWlnaHQ8ZS5ib3R0b20/QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvbkJlbG93TWV0cmljc18oYSxiLGUsZik6ZC1mLmhlaWdodD5lLnRvcD9CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uQWJvdmVNZXRyaWNzXyhjLGQsZSxmKTpiK2YuaGVpZ2h0PGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ/QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvbkJlbG93TWV0cmljc18oYSxiLGUsZik6ZC1mLmhlaWdodD5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wP0Jsb2NrbHkuRHJvcERvd25EaXYuZ2V0UG9zaXRpb25BYm92ZU1ldHJpY3NfKGMsXG5kLGUsZik6QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvblRvcE9mUGFnZU1ldHJpY3NfKGEsZSxmKX07QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvbkJlbG93TWV0cmljc189ZnVuY3Rpb24oYSxiLGMsZCl7YT1CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uWChhLGMubGVmdCxjLnJpZ2h0LGQud2lkdGgpO3JldHVybntpbml0aWFsWDphLmRpdlgsaW5pdGlhbFk6YixmaW5hbFg6YS5kaXZYLGZpbmFsWTpiK0Jsb2NrbHkuRHJvcERvd25EaXYuUEFERElOR19ZLGFycm93WDphLmFycm93WCxhcnJvd1k6LShCbG9ja2x5LkRyb3BEb3duRGl2LkFSUk9XX1NJWkUvMitCbG9ja2x5LkRyb3BEb3duRGl2LkJPUkRFUl9TSVpFKSxhcnJvd0F0VG9wOiEwLGFycm93VmlzaWJsZTohMH19O1xuQmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvbkFib3ZlTWV0cmljc189ZnVuY3Rpb24oYSxiLGMsZCl7YT1CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uWChhLGMubGVmdCxjLnJpZ2h0LGQud2lkdGgpO3JldHVybntpbml0aWFsWDphLmRpdlgsaW5pdGlhbFk6Yi1kLmhlaWdodCxmaW5hbFg6YS5kaXZYLGZpbmFsWTpiLWQuaGVpZ2h0LUJsb2NrbHkuRHJvcERvd25EaXYuUEFERElOR19ZLGFycm93WDphLmFycm93WCxhcnJvd1k6ZC5oZWlnaHQtMipCbG9ja2x5LkRyb3BEb3duRGl2LkJPUkRFUl9TSVpFLUJsb2NrbHkuRHJvcERvd25EaXYuQVJST1dfU0laRS8yLGFycm93QXRUb3A6ITEsYXJyb3dWaXNpYmxlOiEwfX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uVG9wT2ZQYWdlTWV0cmljc189ZnVuY3Rpb24oYSxiLGMpe2E9QmxvY2tseS5Ecm9wRG93bkRpdi5nZXRQb3NpdGlvblgoYSxiLmxlZnQsYi5yaWdodCxjLndpZHRoKTtyZXR1cm57aW5pdGlhbFg6YS5kaXZYLGluaXRpYWxZOjAsZmluYWxYOmEuZGl2WCxmaW5hbFk6MCxhcnJvd0F0VG9wOm51bGwsYXJyb3dYOm51bGwsYXJyb3dZOm51bGwsYXJyb3dWaXNpYmxlOiExfX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uWD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hO2E9QmxvY2tseS51dGlscy5tYXRoLmNsYW1wKGIsYS1kLzIsYy1kKTtlLT1CbG9ja2x5LkRyb3BEb3duRGl2LkFSUk9XX1NJWkUvMjtiPUJsb2NrbHkuRHJvcERvd25EaXYuQVJST1dfSE9SSVpPTlRBTF9QQURESU5HO2Q9QmxvY2tseS51dGlscy5tYXRoLmNsYW1wKGIsZS1hLGQtYi1CbG9ja2x5LkRyb3BEb3duRGl2LkFSUk9XX1NJWkUpO3JldHVybnthcnJvd1g6ZCxkaXZYOmF9fTtCbG9ja2x5LkRyb3BEb3duRGl2LmlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiEhQmxvY2tseS5Ecm9wRG93bkRpdi5vd25lcl99O1xuQmxvY2tseS5Ecm9wRG93bkRpdi5oaWRlSWZPd25lcj1mdW5jdGlvbihhLGIpe3JldHVybiBCbG9ja2x5LkRyb3BEb3duRGl2Lm93bmVyXz09PWE/KGI/QmxvY2tseS5Ecm9wRG93bkRpdi5oaWRlV2l0aG91dEFuaW1hdGlvbigpOkJsb2NrbHkuRHJvcERvd25EaXYuaGlkZSgpLCEwKTohMX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LmhpZGU9ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LkRyb3BEb3duRGl2LkRJVl87YS5zdHlsZS50cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMCwgMClcIjthLnN0eWxlLm9wYWNpdHk9MDtCbG9ja2x5LkRyb3BEb3duRGl2LmFuaW1hdGVPdXRUaW1lcl89c2V0VGltZW91dChmdW5jdGlvbigpe0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKX0sMUUzKkJsb2NrbHkuRHJvcERvd25EaXYuQU5JTUFUSU9OX1RJTUUpO0Jsb2NrbHkuRHJvcERvd25EaXYub25IaWRlXyYmKEJsb2NrbHkuRHJvcERvd25EaXYub25IaWRlXygpLEJsb2NrbHkuRHJvcERvd25EaXYub25IaWRlXz1udWxsKX07XG5CbG9ja2x5LkRyb3BEb3duRGl2LmhpZGVXaXRob3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7aWYoQmxvY2tseS5Ecm9wRG93bkRpdi5pc1Zpc2libGUoKSl7QmxvY2tseS5Ecm9wRG93bkRpdi5hbmltYXRlT3V0VGltZXJfJiZjbGVhclRpbWVvdXQoQmxvY2tseS5Ecm9wRG93bkRpdi5hbmltYXRlT3V0VGltZXJfKTt2YXIgYT1CbG9ja2x5LkRyb3BEb3duRGl2LkRJVl87YS5zdHlsZS50cmFuc2Zvcm09XCJcIjthLnN0eWxlLmxlZnQ9XCJcIjthLnN0eWxlLnRvcD1cIlwiO2Euc3R5bGUub3BhY2l0eT0wO2Euc3R5bGUuZGlzcGxheT1cIm5vbmVcIjthLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIlwiO2Euc3R5bGUuYm9yZGVyQ29sb3I9XCJcIjtCbG9ja2x5LkRyb3BEb3duRGl2Lm9uSGlkZV8mJihCbG9ja2x5LkRyb3BEb3duRGl2Lm9uSGlkZV8oKSxCbG9ja2x5LkRyb3BEb3duRGl2Lm9uSGlkZV89bnVsbCk7QmxvY2tseS5Ecm9wRG93bkRpdi5jbGVhckNvbnRlbnQoKTtCbG9ja2x5LkRyb3BEb3duRGl2Lm93bmVyXz1cbm51bGw7QmxvY2tseS5Ecm9wRG93bkRpdi5yZW5kZXJlckNsYXNzTmFtZV8mJihCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLEJsb2NrbHkuRHJvcERvd25EaXYucmVuZGVyZXJDbGFzc05hbWVfKSxCbG9ja2x5LkRyb3BEb3duRGl2LnJlbmRlcmVyQ2xhc3NOYW1lXz1cIlwiKTtCbG9ja2x5LkRyb3BEb3duRGl2LnRoZW1lQ2xhc3NOYW1lXyYmKEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzKGEsQmxvY2tseS5Ecm9wRG93bkRpdi50aGVtZUNsYXNzTmFtZV8pLEJsb2NrbHkuRHJvcERvd25EaXYudGhlbWVDbGFzc05hbWVfPVwiXCIpO0Jsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpLm1hcmtGb2N1c2VkKCl9fTtcbkJsb2NrbHkuRHJvcERvd25EaXYucG9zaXRpb25JbnRlcm5hbF89ZnVuY3Rpb24oYSxiLGMsZCl7YT1CbG9ja2x5LkRyb3BEb3duRGl2LmdldFBvc2l0aW9uTWV0cmljc18oYSxiLGMsZCk7YS5hcnJvd1Zpc2libGU/KEJsb2NrbHkuRHJvcERvd25EaXYuYXJyb3dfLnN0eWxlLmRpc3BsYXk9XCJcIixCbG9ja2x5LkRyb3BEb3duRGl2LmFycm93Xy5zdHlsZS50cmFuc2Zvcm09XCJ0cmFuc2xhdGUoXCIrYS5hcnJvd1grXCJweCxcIithLmFycm93WStcInB4KSByb3RhdGUoNDVkZWcpXCIsQmxvY2tseS5Ecm9wRG93bkRpdi5hcnJvd18uc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhLmFycm93QXRUb3A/XCJibG9ja2x5RHJvcERvd25BcnJvdyBibG9ja2x5QXJyb3dUb3BcIjpcImJsb2NrbHlEcm9wRG93bkFycm93IGJsb2NrbHlBcnJvd0JvdHRvbVwiKSk6QmxvY2tseS5Ecm9wRG93bkRpdi5hcnJvd18uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtiPU1hdGguZmxvb3IoYS5pbml0aWFsWCk7Yz1NYXRoLmZsb29yKGEuaW5pdGlhbFkpO1xuZD1NYXRoLmZsb29yKGEuZmluYWxYKTt2YXIgZT1NYXRoLmZsb29yKGEuZmluYWxZKSxmPUJsb2NrbHkuRHJvcERvd25EaXYuRElWXztmLnN0eWxlLmxlZnQ9YitcInB4XCI7Zi5zdHlsZS50b3A9YytcInB4XCI7Zi5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtmLnN0eWxlLm9wYWNpdHk9MTtmLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZShcIisoZC1iKStcInB4LFwiKyhlLWMpK1wicHgpXCI7cmV0dXJuISFhLmFycm93QXRUb3B9O1xuQmxvY2tseS5Ecm9wRG93bkRpdi5yZXBvc2l0aW9uRm9yV2luZG93UmVzaXplPWZ1bmN0aW9uKCl7aWYoQmxvY2tseS5Ecm9wRG93bkRpdi5vd25lcl8pe3ZhciBhPUJsb2NrbHkuRHJvcERvd25EaXYub3duZXJfLGI9YS5nZXRTb3VyY2VCbG9jaygpO2E9QmxvY2tseS5Ecm9wRG93bkRpdi5wb3NpdGlvblRvRmllbGRfP0Jsb2NrbHkuRHJvcERvd25EaXYuZ2V0U2NhbGVkQmJveE9mRmllbGRfKGEpOkJsb2NrbHkuRHJvcERvd25EaXYuZ2V0U2NhbGVkQmJveE9mQmxvY2tfKGIpO2I9YS5sZWZ0KyhhLnJpZ2h0LWEubGVmdCkvMjtCbG9ja2x5LkRyb3BEb3duRGl2LnBvc2l0aW9uSW50ZXJuYWxfKGIsYS5ib3R0b20sYixhLnRvcCl9ZWxzZSBCbG9ja2x5LkRyb3BEb3duRGl2LmhpZGUoKX07QmxvY2tseS5HcmlkPWZ1bmN0aW9uKGEsYil7dGhpcy5ncmlkUGF0dGVybl89YTt0aGlzLnNwYWNpbmdfPWIuc3BhY2luZzt0aGlzLmxlbmd0aF89Yi5sZW5ndGg7dGhpcy5saW5lMl89KHRoaXMubGluZTFfPWEuZmlyc3RDaGlsZCkmJnRoaXMubGluZTFfLm5leHRTaWJsaW5nO3RoaXMuc25hcFRvR3JpZF89Yi5zbmFwfTtCbG9ja2x5LkdyaWQucHJvdG90eXBlLnNjYWxlXz0xO0Jsb2NrbHkuR3JpZC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ3JpZFBhdHRlcm5fPW51bGx9O0Jsb2NrbHkuR3JpZC5wcm90b3R5cGUuc2hvdWxkU25hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNuYXBUb0dyaWRffTtCbG9ja2x5LkdyaWQucHJvdG90eXBlLmdldFNwYWNpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGFjaW5nX307QmxvY2tseS5HcmlkLnByb3RvdHlwZS5nZXRQYXR0ZXJuSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmlkUGF0dGVybl8uaWR9O1xuQmxvY2tseS5HcmlkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7dGhpcy5zY2FsZV89YTt2YXIgYj10aGlzLnNwYWNpbmdfKmF8fDEwMDt0aGlzLmdyaWRQYXR0ZXJuXy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGIpO3RoaXMuZ3JpZFBhdHRlcm5fLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGIpO2I9TWF0aC5mbG9vcih0aGlzLnNwYWNpbmdfLzIpKy41O3ZhciBjPWItdGhpcy5sZW5ndGhfLzIsZD1iK3RoaXMubGVuZ3RoXy8yO2IqPWE7Yyo9YTtkKj1hO3RoaXMuc2V0TGluZUF0dHJpYnV0ZXNfKHRoaXMubGluZTFfLGEsYyxkLGIsYik7dGhpcy5zZXRMaW5lQXR0cmlidXRlc18odGhpcy5saW5lMl8sYSxiLGIsYyxkKX07XG5CbG9ja2x5LkdyaWQucHJvdG90eXBlLnNldExpbmVBdHRyaWJ1dGVzXz1mdW5jdGlvbihhLGIsYyxkLGUsZil7YSYmKGEuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsYiksYS5zZXRBdHRyaWJ1dGUoXCJ4MVwiLGMpLGEuc2V0QXR0cmlidXRlKFwieTFcIixlKSxhLnNldEF0dHJpYnV0ZShcIngyXCIsZCksYS5zZXRBdHRyaWJ1dGUoXCJ5MlwiLGYpKX07QmxvY2tseS5HcmlkLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oYSxiKXt0aGlzLmdyaWRQYXR0ZXJuXy5zZXRBdHRyaWJ1dGUoXCJ4XCIsYSk7dGhpcy5ncmlkUGF0dGVybl8uc2V0QXR0cmlidXRlKFwieVwiLGIpOyhCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JRXx8QmxvY2tseS51dGlscy51c2VyQWdlbnQuRURHRSkmJnRoaXMudXBkYXRlKHRoaXMuc2NhbGVfKX07XG5CbG9ja2x5LkdyaWQuY3JlYXRlRG9tPWZ1bmN0aW9uKGEsYixjKXthPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUVEVSTix7aWQ6XCJibG9ja2x5R3JpZFBhdHRlcm5cIithLHBhdHRlcm5Vbml0czpcInVzZXJTcGFjZU9uVXNlXCJ9LGMpOzA8Yi5sZW5ndGgmJjA8Yi5zcGFjaW5nPyhCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkxJTkUse3N0cm9rZTpiLmNvbG91cn0sYSksMTxiLmxlbmd0aCYmQmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5MSU5FLHtzdHJva2U6Yi5jb2xvdXJ9LGEpKTpCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkxJTkUse30sYSk7cmV0dXJuIGF9O0Jsb2NrbHkuVGhlbWU9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5uYW1lPWE7dGhpcy5ibG9ja1N0eWxlcz1ifHxPYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuY2F0ZWdvcnlTdHlsZXM9Y3x8T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLmNvbXBvbmVudFN0eWxlcz1kfHxPYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuZm9udFN0eWxlPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5zdGFydEhhdHM9bnVsbDtCbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5USEVNRSxhLHRoaXMpfTtCbG9ja2x5LlRoZW1lLnByb3RvdHlwZS5nZXRDbGFzc05hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lK1wiLXRoZW1lXCJ9O0Jsb2NrbHkuVGhlbWUucHJvdG90eXBlLnNldEJsb2NrU3R5bGU9ZnVuY3Rpb24oYSxiKXt0aGlzLmJsb2NrU3R5bGVzW2FdPWJ9O1xuQmxvY2tseS5UaGVtZS5wcm90b3R5cGUuc2V0Q2F0ZWdvcnlTdHlsZT1mdW5jdGlvbihhLGIpe3RoaXMuY2F0ZWdvcnlTdHlsZXNbYV09Yn07QmxvY2tseS5UaGVtZS5wcm90b3R5cGUuZ2V0Q29tcG9uZW50U3R5bGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGE9dGhpcy5jb21wb25lbnRTdHlsZXNbYV0pJiZcInN0cmluZ1wiPT10eXBlb2YgYSYmdGhpcy5nZXRDb21wb25lbnRTdHlsZShhKT90aGlzLmdldENvbXBvbmVudFN0eWxlKGEpOmE/U3RyaW5nKGEpOm51bGx9O0Jsb2NrbHkuVGhlbWUucHJvdG90eXBlLnNldENvbXBvbmVudFN0eWxlPWZ1bmN0aW9uKGEsYil7dGhpcy5jb21wb25lbnRTdHlsZXNbYV09Yn07QmxvY2tseS5UaGVtZS5wcm90b3R5cGUuc2V0Rm9udFN0eWxlPWZ1bmN0aW9uKGEpe3RoaXMuZm9udFN0eWxlPWF9O0Jsb2NrbHkuVGhlbWUucHJvdG90eXBlLnNldFN0YXJ0SGF0cz1mdW5jdGlvbihhKXt0aGlzLnN0YXJ0SGF0cz1hfTtcbkJsb2NrbHkuVGhlbWUuZGVmaW5lVGhlbWU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQmxvY2tseS5UaGVtZShhKSxkPWIuYmFzZTtkJiYoXCJzdHJpbmdcIj09dHlwZW9mIGQmJihkPUJsb2NrbHkucmVnaXN0cnkuZ2V0T2JqZWN0KEJsb2NrbHkucmVnaXN0cnkuVHlwZS5USEVNRSxkKSksZCBpbnN0YW5jZW9mIEJsb2NrbHkuVGhlbWUmJihCbG9ja2x5LnV0aWxzLm9iamVjdC5kZWVwTWVyZ2UoYyxkKSxjLm5hbWU9YSkpO0Jsb2NrbHkudXRpbHMub2JqZWN0LmRlZXBNZXJnZShjLmJsb2NrU3R5bGVzLGIuYmxvY2tTdHlsZXMpO0Jsb2NrbHkudXRpbHMub2JqZWN0LmRlZXBNZXJnZShjLmNhdGVnb3J5U3R5bGVzLGIuY2F0ZWdvcnlTdHlsZXMpO0Jsb2NrbHkudXRpbHMub2JqZWN0LmRlZXBNZXJnZShjLmNvbXBvbmVudFN0eWxlcyxiLmNvbXBvbmVudFN0eWxlcyk7QmxvY2tseS51dGlscy5vYmplY3QuZGVlcE1lcmdlKGMuZm9udFN0eWxlLGIuZm9udFN0eWxlKTtudWxsIT1iLnN0YXJ0SGF0cyYmXG4oYy5zdGFydEhhdHM9Yi5zdGFydEhhdHMpO3JldHVybiBjfTtCbG9ja2x5LlRoZW1lcz17fTtCbG9ja2x5LlRoZW1lcy5DbGFzc2ljPXt9O0Jsb2NrbHkuVGhlbWVzLkNsYXNzaWMuZGVmYXVsdEJsb2NrU3R5bGVzPXtjb2xvdXJfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMjBcIn0sbGlzdF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIyNjBcIn0sbG9naWNfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMjEwXCJ9LGxvb3BfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMTIwXCJ9LG1hdGhfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMjMwXCJ9LHByb2NlZHVyZV9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIyOTBcIn0sdGV4dF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIxNjBcIn0sdmFyaWFibGVfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMzMwXCJ9LHZhcmlhYmxlX2R5bmFtaWNfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiMzEwXCJ9LGhhdF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIzMzBcIixoYXQ6XCJjYXBcIn19O1xuQmxvY2tseS5UaGVtZXMuQ2xhc3NpYy5jYXRlZ29yeVN0eWxlcz17Y29sb3VyX2NhdGVnb3J5Ontjb2xvdXI6XCIyMFwifSxsaXN0X2NhdGVnb3J5Ontjb2xvdXI6XCIyNjBcIn0sbG9naWNfY2F0ZWdvcnk6e2NvbG91cjpcIjIxMFwifSxsb29wX2NhdGVnb3J5Ontjb2xvdXI6XCIxMjBcIn0sbWF0aF9jYXRlZ29yeTp7Y29sb3VyOlwiMjMwXCJ9LHByb2NlZHVyZV9jYXRlZ29yeTp7Y29sb3VyOlwiMjkwXCJ9LHRleHRfY2F0ZWdvcnk6e2NvbG91cjpcIjE2MFwifSx2YXJpYWJsZV9jYXRlZ29yeTp7Y29sb3VyOlwiMzMwXCJ9LHZhcmlhYmxlX2R5bmFtaWNfY2F0ZWdvcnk6e2NvbG91cjpcIjMxMFwifX07QmxvY2tseS5UaGVtZXMuQ2xhc3NpYz1uZXcgQmxvY2tseS5UaGVtZShcImNsYXNzaWNcIixCbG9ja2x5LlRoZW1lcy5DbGFzc2ljLmRlZmF1bHRCbG9ja1N0eWxlcyxCbG9ja2x5LlRoZW1lcy5DbGFzc2ljLmNhdGVnb3J5U3R5bGVzKTtCbG9ja2x5LnV0aWxzLktleUNvZGVzPXtXSU5fS0VZX0ZGX0xJTlVYOjAsTUFDX0VOVEVSOjMsQkFDS1NQQUNFOjgsVEFCOjksTlVNX0NFTlRFUjoxMixFTlRFUjoxMyxTSElGVDoxNixDVFJMOjE3LEFMVDoxOCxQQVVTRToxOSxDQVBTX0xPQ0s6MjAsRVNDOjI3LFNQQUNFOjMyLFBBR0VfVVA6MzMsUEFHRV9ET1dOOjM0LEVORDozNSxIT01FOjM2LExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxQTFVTX1NJR046NDMsUFJJTlRfU0NSRUVOOjQ0LElOU0VSVDo0NSxERUxFVEU6NDYsWkVSTzo0OCxPTkU6NDksVFdPOjUwLFRIUkVFOjUxLEZPVVI6NTIsRklWRTo1MyxTSVg6NTQsU0VWRU46NTUsRUlHSFQ6NTYsTklORTo1NyxGRl9TRU1JQ09MT046NTksRkZfRVFVQUxTOjYxLEZGX0RBU0g6MTczLEZGX0hBU0g6MTYzLFFVRVNUSU9OX01BUks6NjMsQVRfU0lHTjo2NCxBOjY1LEI6NjYsQzo2NyxEOjY4LEU6NjksRjo3MCxHOjcxLEg6NzIsSTo3MyxKOjc0LEs6NzUsTDo3NixNOjc3LFxuTjo3OCxPOjc5LFA6ODAsUTo4MSxSOjgyLFM6ODMsVDo4NCxVOjg1LFY6ODYsVzo4NyxYOjg4LFk6ODksWjo5MCxNRVRBOjkxLFdJTl9LRVlfUklHSFQ6OTIsQ09OVEVYVF9NRU5VOjkzLE5VTV9aRVJPOjk2LE5VTV9PTkU6OTcsTlVNX1RXTzo5OCxOVU1fVEhSRUU6OTksTlVNX0ZPVVI6MTAwLE5VTV9GSVZFOjEwMSxOVU1fU0lYOjEwMixOVU1fU0VWRU46MTAzLE5VTV9FSUdIVDoxMDQsTlVNX05JTkU6MTA1LE5VTV9NVUxUSVBMWToxMDYsTlVNX1BMVVM6MTA3LE5VTV9NSU5VUzoxMDksTlVNX1BFUklPRDoxMTAsTlVNX0RJVklTSU9OOjExMSxGMToxMTIsRjI6MTEzLEYzOjExNCxGNDoxMTUsRjU6MTE2LEY2OjExNyxGNzoxMTgsRjg6MTE5LEY5OjEyMCxGMTA6MTIxLEYxMToxMjIsRjEyOjEyMyxOVU1MT0NLOjE0NCxTQ1JPTExfTE9DSzoxNDUsRklSU1RfTUVESUFfS0VZOjE2NixMQVNUX01FRElBX0tFWToxODMsU0VNSUNPTE9OOjE4NixEQVNIOjE4OSxFUVVBTFM6MTg3LENPTU1BOjE4OCxcblBFUklPRDoxOTAsU0xBU0g6MTkxLEFQT1NUUk9QSEU6MTkyLFRJTERFOjE5MixTSU5HTEVfUVVPVEU6MjIyLE9QRU5fU1FVQVJFX0JSQUNLRVQ6MjE5LEJBQ0tTTEFTSDoyMjAsQ0xPU0VfU1FVQVJFX0JSQUNLRVQ6MjIxLFdJTl9LRVk6MjI0LE1BQ19GRl9NRVRBOjIyNCxNQUNfV0tfQ01EX0xFRlQ6OTEsTUFDX1dLX0NNRF9SSUdIVDo5MyxXSU5fSU1FOjIyOSxWS19OT05BTUU6MjUyLFBIQU5UT006MjU1fTtCbG9ja2x5LnVzZXI9e307QmxvY2tseS51c2VyLmtleU1hcD17fTtCbG9ja2x5LnVzZXIua2V5TWFwLm1hcF89e307QmxvY2tseS51c2VyLmtleU1hcC5tb2RpZmllcktleXM9e1NISUZUOlwiU2hpZnRcIixDT05UUk9MOlwiQ29udHJvbFwiLEFMVDpcIkFsdFwiLE1FVEE6XCJNZXRhXCJ9O0Jsb2NrbHkudXNlci5rZXlNYXAuc2V0QWN0aW9uRm9yS2V5PWZ1bmN0aW9uKGEsYil7dmFyIGM9QmxvY2tseS51c2VyLmtleU1hcC5nZXRLZXlCeUFjdGlvbihiKTtjJiZkZWxldGUgQmxvY2tseS51c2VyLmtleU1hcC5tYXBfW2NdO0Jsb2NrbHkudXNlci5rZXlNYXAubWFwX1thXT1ifTtCbG9ja2x5LnVzZXIua2V5TWFwLnNldEtleU1hcD1mdW5jdGlvbihhKXtCbG9ja2x5LnVzZXIua2V5TWFwLm1hcF89YX07QmxvY2tseS51c2VyLmtleU1hcC5nZXRLZXlNYXA9ZnVuY3Rpb24oKXt2YXIgYT17fTtCbG9ja2x5LnV0aWxzLm9iamVjdC5taXhpbihhLEJsb2NrbHkudXNlci5rZXlNYXAubWFwXyk7cmV0dXJuIGF9O1xuQmxvY2tseS51c2VyLmtleU1hcC5nZXRBY3Rpb25CeUtleUNvZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIEJsb2NrbHkudXNlci5rZXlNYXAubWFwX1thXX07QmxvY2tseS51c2VyLmtleU1hcC5nZXRLZXlCeUFjdGlvbj1mdW5jdGlvbihhKXtmb3IodmFyIGI9T2JqZWN0LmtleXMoQmxvY2tseS51c2VyLmtleU1hcC5tYXBfKSxjPTAsZDtkPWJbY107YysrKWlmKEJsb2NrbHkudXNlci5rZXlNYXAubWFwX1tkXS5uYW1lPT09YS5uYW1lKXJldHVybiBkO3JldHVybiBudWxsfTtCbG9ja2x5LnVzZXIua2V5TWFwLnNlcmlhbGl6ZUtleUV2ZW50PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1CbG9ja2x5LnV0aWxzLm9iamVjdC52YWx1ZXMoQmxvY2tseS51c2VyLmtleU1hcC5tb2RpZmllcktleXMpLGM9XCJcIixkPTAsZTtlPWJbZF07ZCsrKWEuZ2V0TW9kaWZpZXJTdGF0ZShlKSYmKGMrPWUpO3JldHVybiBjKz1hLmtleUNvZGV9O1xuQmxvY2tseS51c2VyLmtleU1hcC5jaGVja01vZGlmaWVyc189ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkO2Q9YVtjXTtjKyspaWYoMD5iLmluZGV4T2YoZCkpdGhyb3cgRXJyb3IoZCtcIiBpcyBub3QgYSB2YWxpZCBtb2RpZmllciBrZXkuXCIpO307QmxvY2tseS51c2VyLmtleU1hcC5jcmVhdGVTZXJpYWxpemVkS2V5PWZ1bmN0aW9uKGEsYil7dmFyIGM9XCJcIixkPUJsb2NrbHkudXRpbHMub2JqZWN0LnZhbHVlcyhCbG9ja2x5LnVzZXIua2V5TWFwLm1vZGlmaWVyS2V5cyk7QmxvY2tseS51c2VyLmtleU1hcC5jaGVja01vZGlmaWVyc18oYixkKTtmb3IodmFyIGU9MCxmO2Y9ZFtlXTtlKyspLTE8Yi5pbmRleE9mKGYpJiYoYys9Zik7cmV0dXJuIGMrYX07XG5CbG9ja2x5LnVzZXIua2V5TWFwLmNyZWF0ZURlZmF1bHRLZXlNYXA9ZnVuY3Rpb24oKXt2YXIgYT17fSxiPUJsb2NrbHkudXNlci5rZXlNYXAuY3JlYXRlU2VyaWFsaXplZEtleShCbG9ja2x5LnV0aWxzLktleUNvZGVzLkssW0Jsb2NrbHkudXNlci5rZXlNYXAubW9kaWZpZXJLZXlzLkNPTlRST0wsQmxvY2tseS51c2VyLmtleU1hcC5tb2RpZmllcktleXMuU0hJRlRdKSxjPUJsb2NrbHkudXNlci5rZXlNYXAuY3JlYXRlU2VyaWFsaXplZEtleShCbG9ja2x5LnV0aWxzLktleUNvZGVzLlcsW0Jsb2NrbHkudXNlci5rZXlNYXAubW9kaWZpZXJLZXlzLlNISUZUXSksZD1CbG9ja2x5LnVzZXIua2V5TWFwLmNyZWF0ZVNlcmlhbGl6ZWRLZXkoQmxvY2tseS51dGlscy5LZXlDb2Rlcy5BLFtCbG9ja2x5LnVzZXIua2V5TWFwLm1vZGlmaWVyS2V5cy5TSElGVF0pLGU9QmxvY2tseS51c2VyLmtleU1hcC5jcmVhdGVTZXJpYWxpemVkS2V5KEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuUyxbQmxvY2tseS51c2VyLmtleU1hcC5tb2RpZmllcktleXMuU0hJRlRdKSxcbmY9QmxvY2tseS51c2VyLmtleU1hcC5jcmVhdGVTZXJpYWxpemVkS2V5KEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuRCxbQmxvY2tseS51c2VyLmtleU1hcC5tb2RpZmllcktleXMuU0hJRlRdKTthW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuV109QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9QUkVWSU9VUzthW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuQV09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9PVVQ7YVtCbG9ja2x5LnV0aWxzLktleUNvZGVzLlNdPUJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTkVYVDthW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuRF09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9JTjthW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuSV09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9JTlNFUlQ7YVtCbG9ja2x5LnV0aWxzLktleUNvZGVzLkVOVEVSXT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX01BUks7YVtCbG9ja2x5LnV0aWxzLktleUNvZGVzLlhdPUJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fRElTQ09OTkVDVDtcbmFbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5UXT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1RPT0xCT1g7YVtCbG9ja2x5LnV0aWxzLktleUNvZGVzLkVdPUJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fRVhJVDthW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuRVNDXT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0VYSVQ7YVtiXT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1RPR0dMRV9LRVlCT0FSRF9OQVY7YVtjXT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX01PVkVfV1NfQ1VSU09SX1VQO2FbZF09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9NT1ZFX1dTX0NVUlNPUl9MRUZUO2FbZV09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9NT1ZFX1dTX0NVUlNPUl9ET1dOO2FbZl09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9NT1ZFX1dTX0NVUlNPUl9SSUdIVDtyZXR1cm4gYX07QmxvY2tseS51dGlscy5NZXRyaWNzPWZ1bmN0aW9uKCl7fTtCbG9ja2x5LnV0aWxzLnRvb2xib3g9e307QmxvY2tseS51dGlscy50b29sYm94LkNBVEVHT1JZX1RPT0xCT1hfS0lORD1cImNhdGVnb3J5VG9vbGJveFwiO0Jsb2NrbHkudXRpbHMudG9vbGJveC5GTFlPVVRfVE9PTEJPWF9LSU5EPVwiZmx5b3V0VG9vbGJveFwiO0Jsb2NrbHkudXRpbHMudG9vbGJveC5Qb3NpdGlvbj17VE9QOkJsb2NrbHkuVE9PTEJPWF9BVF9UT1AsQk9UVE9NOkJsb2NrbHkuVE9PTEJPWF9BVF9CT1RUT00sTEVGVDpCbG9ja2x5LlRPT0xCT1hfQVRfTEVGVCxSSUdIVDpCbG9ja2x5LlRPT0xCT1hfQVRfUklHSFR9O1xuQmxvY2tseS51dGlscy50b29sYm94LmNvbnZlcnRUb29sYm94RGVmVG9Kc29uPWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBudWxsO2lmKGEgaW5zdGFuY2VvZiBFbGVtZW50fHxcInN0cmluZ1wiPT10eXBlb2YgYSlhPUJsb2NrbHkudXRpbHMudG9vbGJveC5wYXJzZVRvb2xib3hUcmVlKGEpLGE9QmxvY2tseS51dGlscy50b29sYm94LmNvbnZlcnRUb1Rvb2xib3hKc29uXyhhKTtCbG9ja2x5LnV0aWxzLnRvb2xib3gudmFsaWRhdGVUb29sYm94XyhhKTtyZXR1cm4gYX07XG5CbG9ja2x5LnV0aWxzLnRvb2xib3gudmFsaWRhdGVUb29sYm94Xz1mdW5jdGlvbihhKXt2YXIgYj1hLmtpbmQ7YT1hLmNvbnRlbnRzO2lmKGImJmIhPUJsb2NrbHkudXRpbHMudG9vbGJveC5GTFlPVVRfVE9PTEJPWF9LSU5EJiZiIT1CbG9ja2x5LnV0aWxzLnRvb2xib3guQ0FURUdPUllfVE9PTEJPWF9LSU5EKXRocm93IEVycm9yKFwiSW52YWxpZCB0b29sYm94IGtpbmQgXCIrYitcIi4gUGxlYXNlIHN1cHBseSBlaXRoZXIgXCIrQmxvY2tseS51dGlscy50b29sYm94LkZMWU9VVF9UT09MQk9YX0tJTkQrXCIgb3IgXCIrQmxvY2tseS51dGlscy50b29sYm94LkNBVEVHT1JZX1RPT0xCT1hfS0lORCk7aWYoIWEpdGhyb3cgRXJyb3IoXCJUb29sYm94IG11c3QgaGF2ZSBhIGNvbnRlbnRzIGF0dHJpYnV0ZS5cIik7fTtcbkJsb2NrbHkudXRpbHMudG9vbGJveC5jb252ZXJ0Rmx5b3V0RGVmVG9Kc29uQXJyYXk9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5jb250ZW50cz9hLmNvbnRlbnRzOkFycmF5LmlzQXJyYXkoYSkmJjA8YS5sZW5ndGgmJiFhWzBdLm5vZGVUeXBlP2E6QmxvY2tseS51dGlscy50b29sYm94LnhtbFRvSnNvbkFycmF5XyhhKTpbXX07QmxvY2tseS51dGlscy50b29sYm94Lmhhc0NhdGVnb3JpZXM9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7dmFyIGI9YS5raW5kO3JldHVybiBiP2I9PUJsb2NrbHkudXRpbHMudG9vbGJveC5DQVRFR09SWV9UT09MQk9YX0tJTkQ6ISFhLmNvbnRlbnRzLmZpbHRlcihmdW5jdGlvbihjKXtyZXR1cm5cIkNBVEVHT1JZXCI9PWMua2luZC50b1VwcGVyQ2FzZSgpfSkubGVuZ3RofTtcbkJsb2NrbHkudXRpbHMudG9vbGJveC5pc0NhdGVnb3J5Q29sbGFwc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEuY29udGVudHM/ISFhLmNvbnRlbnRzLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm5cIkNBVEVHT1JZXCI9PWIua2luZC50b1VwcGVyQ2FzZSgpfSkubGVuZ3RoOiExfTtCbG9ja2x5LnV0aWxzLnRvb2xib3guY29udmVydFRvVG9vbGJveEpzb25fPWZ1bmN0aW9uKGEpe3ZhciBiPXtjb250ZW50czpCbG9ja2x5LnV0aWxzLnRvb2xib3gueG1sVG9Kc29uQXJyYXlfKGEpfTthIGluc3RhbmNlb2YgTm9kZSYmQmxvY2tseS51dGlscy50b29sYm94LmFkZEF0dHJpYnV0ZXNfKGEsYik7cmV0dXJuIGJ9O1xuQmxvY2tseS51dGlscy50b29sYm94LnhtbFRvSnNvbkFycmF5Xz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuY2hpbGROb2RlcztjfHwoYz1hKTthPTA7Zm9yKHZhciBkO2Q9Y1thXTthKyspaWYoZC50YWdOYW1lKXt2YXIgZT17fSxmPWQudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2Uua2luZD1mO1wiQkxPQ0tcIj09Zj9lLmJsb2NreG1sPWQ6XCJDQVRFR09SWVwiPT1mJiYoZS5jb250ZW50cz1CbG9ja2x5LnV0aWxzLnRvb2xib3gueG1sVG9Kc29uQXJyYXlfKGQpKTtCbG9ja2x5LnV0aWxzLnRvb2xib3guYWRkQXR0cmlidXRlc18oZCxlKTtiLnB1c2goZSl9cmV0dXJuIGJ9O1xuQmxvY2tseS51dGlscy50b29sYm94LmFkZEF0dHJpYnV0ZXNfPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxhLmF0dHJpYnV0ZXMubGVuZ3RoO2MrKyl7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdOy0xPGQubm9kZU5hbWUuaW5kZXhPZihcImNzcy1cIik/KGIuY3NzY29uZmlnPWIuY3NzY29uZmlnfHx7fSxiLmNzc2NvbmZpZ1tkLm5vZGVOYW1lLnJlcGxhY2UoXCJjc3MtXCIsXCJcIildPWQudmFsdWUpOmJbZC5ub2RlTmFtZV09ZC52YWx1ZX19O1xuQmxvY2tseS51dGlscy50b29sYm94LnBhcnNlVG9vbGJveFRyZWU9ZnVuY3Rpb24oYSl7aWYoYSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JRSYmYS5vdXRlckhUTUw/YT1hLm91dGVySFRNTDphIGluc3RhbmNlb2YgRWxlbWVudHx8KGE9bnVsbCkpLFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1CbG9ja2x5LlhtbC50ZXh0VG9Eb20oYSksXCJ4bWxcIiE9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSl0aHJvdyBUeXBlRXJyb3IoXCJUb29sYm94IHNob3VsZCBiZSBhbiA8eG1sPiBkb2N1bWVudC5cIik7fWVsc2UgYT1udWxsO3JldHVybiBhfTtCbG9ja2x5LnV0aWxzLnhtbD17fTtCbG9ja2x5LnV0aWxzLnhtbC5OQU1FX1NQQUNFPVwiaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYmxvY2tseS94bWxcIjtCbG9ja2x5LnV0aWxzLnhtbC5kb2N1bWVudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudH07QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS51dGlscy54bWwuZG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50TlMoQmxvY2tseS51dGlscy54bWwuTkFNRV9TUEFDRSxhKX07QmxvY2tseS51dGlscy54bWwuY3JlYXRlVGV4dE5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIEJsb2NrbHkudXRpbHMueG1sLmRvY3VtZW50KCkuY3JlYXRlVGV4dE5vZGUoYSl9O0Jsb2NrbHkudXRpbHMueG1sLnRleHRUb0RvbURvY3VtZW50PWZ1bmN0aW9uKGEpe3JldHVybihuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSxcInRleHQveG1sXCIpfTtcbkJsb2NrbHkudXRpbHMueG1sLmRvbVRvVGV4dD1mdW5jdGlvbihhKXtyZXR1cm4obmV3IFhNTFNlcmlhbGl6ZXIpLnNlcmlhbGl6ZVRvU3RyaW5nKGEpfTtCbG9ja2x5LkV2ZW50cy5CbG9ja0Jhc2U9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQmxvY2tCYXNlLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5ibG9ja0lkPSh0aGlzLmlzQmxhbms9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGEpP1wiXCI6YS5pZDt0aGlzLndvcmtzcGFjZUlkPXRoaXMuaXNCbGFuaz9cIlwiOmEud29ya3NwYWNlLmlkfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5CbG9ja0Jhc2UsQmxvY2tseS5FdmVudHMuQWJzdHJhY3QpO0Jsb2NrbHkuRXZlbnRzLkJsb2NrQmFzZS5wcm90b3R5cGUudG9Kc29uPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5FdmVudHMuQmxvY2tCYXNlLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpO2EuYmxvY2tJZD10aGlzLmJsb2NrSWQ7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuQmxvY2tCYXNlLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5CbG9ja0Jhc2Uuc3VwZXJDbGFzc18uZnJvbUpzb24uY2FsbCh0aGlzLGEpO3RoaXMuYmxvY2tJZD1hLmJsb2NrSWR9O0Jsb2NrbHkuRXZlbnRzLkNoYW5nZT1mdW5jdGlvbihhLGIsYyxkLGUpe0Jsb2NrbHkuRXZlbnRzLkNoYW5nZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7YSYmKHRoaXMuZWxlbWVudD1cInVuZGVmaW5lZFwiPT10eXBlb2YgYj9cIlwiOmIsdGhpcy5uYW1lPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjP1wiXCI6Yyx0aGlzLm9sZFZhbHVlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBkP1wiXCI6ZCx0aGlzLm5ld1ZhbHVlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1wiXCI6ZSl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRXZlbnRzLkNoYW5nZSxCbG9ja2x5LkV2ZW50cy5CbG9ja0Jhc2UpO1xuQmxvY2tseS5FdmVudHMuQmxvY2tDaGFuZ2U9QmxvY2tseS5FdmVudHMuQ2hhbmdlO0Jsb2NrbHkuRXZlbnRzLkNoYW5nZS5wcm90b3R5cGUudHlwZT1CbG9ja2x5LkV2ZW50cy5DSEFOR0U7QmxvY2tseS5FdmVudHMuQ2hhbmdlLnByb3RvdHlwZS50b0pzb249ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LkV2ZW50cy5DaGFuZ2Uuc3VwZXJDbGFzc18udG9Kc29uLmNhbGwodGhpcyk7YS5lbGVtZW50PXRoaXMuZWxlbWVudDt0aGlzLm5hbWUmJihhLm5hbWU9dGhpcy5uYW1lKTthLm5ld1ZhbHVlPXRoaXMubmV3VmFsdWU7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLkNoYW5nZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ2hhbmdlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLmVsZW1lbnQ9YS5lbGVtZW50O3RoaXMubmFtZT1hLm5hbWU7dGhpcy5uZXdWYWx1ZT1hLm5ld1ZhbHVlfTtcbkJsb2NrbHkuRXZlbnRzLkNoYW5nZS5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2xkVmFsdWU9PXRoaXMubmV3VmFsdWV9O1xuQmxvY2tseS5FdmVudHMuQ2hhbmdlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFdmVudFdvcmtzcGFjZV8oKS5nZXRCbG9ja0J5SWQodGhpcy5ibG9ja0lkKTtpZihiKXN3aXRjaChiLm11dGF0b3ImJmIubXV0YXRvci5zZXRWaXNpYmxlKCExKSxhPWE/dGhpcy5uZXdWYWx1ZTp0aGlzLm9sZFZhbHVlLHRoaXMuZWxlbWVudCl7Y2FzZSBcImZpZWxkXCI6KGI9Yi5nZXRGaWVsZCh0aGlzLm5hbWUpKT9iLnNldFZhbHVlKGEpOmNvbnNvbGUud2FybihcIkNhbid0IHNldCBub24tZXhpc3RlbnQgZmllbGQ6IFwiK3RoaXMubmFtZSk7YnJlYWs7Y2FzZSBcImNvbW1lbnRcIjpiLnNldENvbW1lbnRUZXh0KGF8fG51bGwpO2JyZWFrO2Nhc2UgXCJjb2xsYXBzZWRcIjpiLnNldENvbGxhcHNlZCghIWEpO2JyZWFrO2Nhc2UgXCJkaXNhYmxlZFwiOmIuc2V0RW5hYmxlZCghYSk7YnJlYWs7Y2FzZSBcImlubGluZVwiOmIuc2V0SW5wdXRzSW5saW5lKCEhYSk7YnJlYWs7Y2FzZSBcIm11dGF0aW9uXCI6dmFyIGM9XG5cIlwiO2IubXV0YXRpb25Ub0RvbSYmKGM9KGM9Yi5tdXRhdGlvblRvRG9tKCkpJiZCbG9ja2x5LlhtbC5kb21Ub1RleHQoYykpO2lmKGIuZG9tVG9NdXRhdGlvbil7dmFyIGQ9QmxvY2tseS5YbWwudGV4dFRvRG9tKGF8fFwiPG11dGF0aW9uLz5cIik7Yi5kb21Ub011dGF0aW9uKGQpfUJsb2NrbHkuRXZlbnRzLmZpcmUobmV3IEJsb2NrbHkuRXZlbnRzLkNoYW5nZShiLFwibXV0YXRpb25cIixudWxsLGMsYSkpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVW5rbm93biBjaGFuZ2UgdHlwZTogXCIrdGhpcy5lbGVtZW50KX1lbHNlIGNvbnNvbGUud2FybihcIkNhbid0IGNoYW5nZSBub24tZXhpc3RlbnQgYmxvY2s6IFwiK3RoaXMuYmxvY2tJZCl9O1xuQmxvY2tseS5FdmVudHMuQ3JlYXRlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLkNyZWF0ZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7YSYmKGEuaXNTaGFkb3coKSYmKHRoaXMucmVjb3JkVW5kbz0hMSksdGhpcy54bWw9YS53b3Jrc3BhY2UucmVuZGVyZWQ/QmxvY2tseS5YbWwuYmxvY2tUb0RvbVdpdGhYWShhKTpCbG9ja2x5LlhtbC5ibG9ja1RvRG9tKGEpLHRoaXMuaWRzPUJsb2NrbHkuRXZlbnRzLmdldERlc2NlbmRhbnRJZHMoYSkpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5DcmVhdGUsQmxvY2tseS5FdmVudHMuQmxvY2tCYXNlKTtCbG9ja2x5LkV2ZW50cy5CbG9ja0NyZWF0ZT1CbG9ja2x5LkV2ZW50cy5DcmVhdGU7QmxvY2tseS5FdmVudHMuQ3JlYXRlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLkNSRUFURTtcbkJsb2NrbHkuRXZlbnRzLkNyZWF0ZS5wcm90b3R5cGUudG9Kc29uPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5FdmVudHMuQ3JlYXRlLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpO2EueG1sPUJsb2NrbHkuWG1sLmRvbVRvVGV4dCh0aGlzLnhtbCk7YS5pZHM9dGhpcy5pZHM7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLkNyZWF0ZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ3JlYXRlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLnhtbD1CbG9ja2x5LlhtbC50ZXh0VG9Eb20oYS54bWwpO3RoaXMuaWRzPWEuaWRzfTtcbkJsb2NrbHkuRXZlbnRzLkNyZWF0ZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RXZlbnRXb3Jrc3BhY2VfKCk7aWYoYSlhPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJ4bWxcIiksYS5hcHBlbmRDaGlsZCh0aGlzLnhtbCksQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoYSxiKTtlbHNle2E9MDtmb3IodmFyIGM7Yz10aGlzLmlkc1thXTthKyspe3ZhciBkPWIuZ2V0QmxvY2tCeUlkKGMpO2Q/ZC5kaXNwb3NlKCExKTpjPT10aGlzLmJsb2NrSWQmJmNvbnNvbGUud2FybihcIkNhbid0IHVuY3JlYXRlIG5vbi1leGlzdGVudCBibG9jazogXCIrYyl9fX07XG5CbG9ja2x5LkV2ZW50cy5EZWxldGU9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuRGVsZXRlLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTtpZihhKXtpZihhLmdldFBhcmVudCgpKXRocm93IEVycm9yKFwiQ29ubmVjdGVkIGJsb2NrcyBjYW5ub3QgYmUgZGVsZXRlZC5cIik7YS5pc1NoYWRvdygpJiYodGhpcy5yZWNvcmRVbmRvPSExKTt0aGlzLm9sZFhtbD1hLndvcmtzcGFjZS5yZW5kZXJlZD9CbG9ja2x5LlhtbC5ibG9ja1RvRG9tV2l0aFhZKGEpOkJsb2NrbHkuWG1sLmJsb2NrVG9Eb20oYSk7dGhpcy5pZHM9QmxvY2tseS5FdmVudHMuZ2V0RGVzY2VuZGFudElkcyhhKX19O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRXZlbnRzLkRlbGV0ZSxCbG9ja2x5LkV2ZW50cy5CbG9ja0Jhc2UpO0Jsb2NrbHkuRXZlbnRzLkJsb2NrRGVsZXRlPUJsb2NrbHkuRXZlbnRzLkRlbGV0ZTtcbkJsb2NrbHkuRXZlbnRzLkRlbGV0ZS5wcm90b3R5cGUudHlwZT1CbG9ja2x5LkV2ZW50cy5ERUxFVEU7QmxvY2tseS5FdmVudHMuRGVsZXRlLnByb3RvdHlwZS50b0pzb249ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LkV2ZW50cy5EZWxldGUuc3VwZXJDbGFzc18udG9Kc29uLmNhbGwodGhpcyk7YS5pZHM9dGhpcy5pZHM7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLkRlbGV0ZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuRGVsZXRlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLmlkcz1hLmlkc307XG5CbG9ja2x5LkV2ZW50cy5EZWxldGUucHJvdG90eXBlLnJ1bj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEV2ZW50V29ya3NwYWNlXygpO2lmKGEpe2E9MDtmb3IodmFyIGM7Yz10aGlzLmlkc1thXTthKyspe3ZhciBkPWIuZ2V0QmxvY2tCeUlkKGMpO2Q/ZC5kaXNwb3NlKCExKTpjPT10aGlzLmJsb2NrSWQmJmNvbnNvbGUud2FybihcIkNhbid0IGRlbGV0ZSBub24tZXhpc3RlbnQgYmxvY2s6IFwiK2MpfX1lbHNlIGE9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcInhtbFwiKSxhLmFwcGVuZENoaWxkKHRoaXMub2xkWG1sKSxCbG9ja2x5LlhtbC5kb21Ub1dvcmtzcGFjZShhLGIpfTtcbkJsb2NrbHkuRXZlbnRzLk1vdmU9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuTW92ZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7YSYmKGEuaXNTaGFkb3coKSYmKHRoaXMucmVjb3JkVW5kbz0hMSksYT10aGlzLmN1cnJlbnRMb2NhdGlvbl8oKSx0aGlzLm9sZFBhcmVudElkPWEucGFyZW50SWQsdGhpcy5vbGRJbnB1dE5hbWU9YS5pbnB1dE5hbWUsdGhpcy5vbGRDb29yZGluYXRlPWEuY29vcmRpbmF0ZSl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRXZlbnRzLk1vdmUsQmxvY2tseS5FdmVudHMuQmxvY2tCYXNlKTtCbG9ja2x5LkV2ZW50cy5CbG9ja01vdmU9QmxvY2tseS5FdmVudHMuTW92ZTtCbG9ja2x5LkV2ZW50cy5Nb3ZlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLk1PVkU7XG5CbG9ja2x5LkV2ZW50cy5Nb3ZlLnByb3RvdHlwZS50b0pzb249ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LkV2ZW50cy5Nb3ZlLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpO3RoaXMubmV3UGFyZW50SWQmJihhLm5ld1BhcmVudElkPXRoaXMubmV3UGFyZW50SWQpO3RoaXMubmV3SW5wdXROYW1lJiYoYS5uZXdJbnB1dE5hbWU9dGhpcy5uZXdJbnB1dE5hbWUpO3RoaXMubmV3Q29vcmRpbmF0ZSYmKGEubmV3Q29vcmRpbmF0ZT1NYXRoLnJvdW5kKHRoaXMubmV3Q29vcmRpbmF0ZS54KStcIixcIitNYXRoLnJvdW5kKHRoaXMubmV3Q29vcmRpbmF0ZS55KSk7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuTW92ZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuTW92ZS5zdXBlckNsYXNzXy5mcm9tSnNvbi5jYWxsKHRoaXMsYSk7dGhpcy5uZXdQYXJlbnRJZD1hLm5ld1BhcmVudElkO3RoaXMubmV3SW5wdXROYW1lPWEubmV3SW5wdXROYW1lO2EubmV3Q29vcmRpbmF0ZSYmKGE9YS5uZXdDb29yZGluYXRlLnNwbGl0KFwiLFwiKSx0aGlzLm5ld0Nvb3JkaW5hdGU9bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShOdW1iZXIoYVswXSksTnVtYmVyKGFbMV0pKSl9O0Jsb2NrbHkuRXZlbnRzLk1vdmUucHJvdG90eXBlLnJlY29yZE5ldz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY3VycmVudExvY2F0aW9uXygpO3RoaXMubmV3UGFyZW50SWQ9YS5wYXJlbnRJZDt0aGlzLm5ld0lucHV0TmFtZT1hLmlucHV0TmFtZTt0aGlzLm5ld0Nvb3JkaW5hdGU9YS5jb29yZGluYXRlfTtcbkJsb2NrbHkuRXZlbnRzLk1vdmUucHJvdG90eXBlLmN1cnJlbnRMb2NhdGlvbl89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEV2ZW50V29ya3NwYWNlXygpLmdldEJsb2NrQnlJZCh0aGlzLmJsb2NrSWQpLGI9e30sYz1hLmdldFBhcmVudCgpO2lmKGMpe2lmKGIucGFyZW50SWQ9Yy5pZCxhPWMuZ2V0SW5wdXRXaXRoQmxvY2soYSkpYi5pbnB1dE5hbWU9YS5uYW1lfWVsc2UgYi5jb29yZGluYXRlPWEuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3JldHVybiBifTtCbG9ja2x5LkV2ZW50cy5Nb3ZlLnByb3RvdHlwZS5pc051bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbGRQYXJlbnRJZD09dGhpcy5uZXdQYXJlbnRJZCYmdGhpcy5vbGRJbnB1dE5hbWU9PXRoaXMubmV3SW5wdXROYW1lJiZCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZXF1YWxzKHRoaXMub2xkQ29vcmRpbmF0ZSx0aGlzLm5ld0Nvb3JkaW5hdGUpfTtcbkJsb2NrbHkuRXZlbnRzLk1vdmUucHJvdG90eXBlLnJ1bj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEV2ZW50V29ya3NwYWNlXygpLGM9Yi5nZXRCbG9ja0J5SWQodGhpcy5ibG9ja0lkKTtpZihjKXt2YXIgZD1hP3RoaXMubmV3UGFyZW50SWQ6dGhpcy5vbGRQYXJlbnRJZCxlPWE/dGhpcy5uZXdJbnB1dE5hbWU6dGhpcy5vbGRJbnB1dE5hbWU7YT1hP3RoaXMubmV3Q29vcmRpbmF0ZTp0aGlzLm9sZENvb3JkaW5hdGU7dmFyIGY9bnVsbDtpZihkJiYoZj1iLmdldEJsb2NrQnlJZChkKSwhZikpe2NvbnNvbGUud2FybihcIkNhbid0IGNvbm5lY3QgdG8gbm9uLWV4aXN0ZW50IGJsb2NrOiBcIitkKTtyZXR1cm59Yy5nZXRQYXJlbnQoKSYmYy51bnBsdWcoKTtpZihhKWU9Yy5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCksYy5tb3ZlQnkoYS54LWUueCxhLnktZS55KTtlbHNle2M9Yy5vdXRwdXRDb25uZWN0aW9ufHxjLnByZXZpb3VzQ29ubmVjdGlvbjtpZihlKXtpZihiPWYuZ2V0SW5wdXQoZSkpdmFyIGc9XG5iLmNvbm5lY3Rpb259ZWxzZSBjLnR5cGU9PUJsb2NrbHkuUFJFVklPVVNfU1RBVEVNRU5UJiYoZz1mLm5leHRDb25uZWN0aW9uKTtnP2MuY29ubmVjdChnKTpjb25zb2xlLndhcm4oXCJDYW4ndCBjb25uZWN0IHRvIG5vbi1leGlzdGVudCBpbnB1dDogXCIrZSl9fWVsc2UgY29uc29sZS53YXJuKFwiQ2FuJ3QgbW92ZSBub24tZXhpc3RlbnQgYmxvY2s6IFwiK3RoaXMuYmxvY2tJZCl9O0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5ULEJsb2NrbHkuRXZlbnRzLkNSRUFURSxCbG9ja2x5LkV2ZW50cy5DcmVhdGUpO0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5ULEJsb2NrbHkuRXZlbnRzLkRFTEVURSxCbG9ja2x5LkV2ZW50cy5EZWxldGUpO0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5ULEJsb2NrbHkuRXZlbnRzLkNIQU5HRSxCbG9ja2x5LkV2ZW50cy5DaGFuZ2UpO1xuQmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsQmxvY2tseS5FdmVudHMuTU9WRSxCbG9ja2x5LkV2ZW50cy5Nb3ZlKTtCbG9ja2x5LkV2ZW50cy5GaW5pc2hlZExvYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5pc0JsYW5rPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBhO3RoaXMud29ya3NwYWNlSWQ9YT9hLmlkOlwiXCI7dGhpcy5ncm91cD1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO3RoaXMucmVjb3JkVW5kbz0hMX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5FdmVudHMuRmluaXNoZWRMb2FkaW5nLEJsb2NrbHkuRXZlbnRzLlVpKTtCbG9ja2x5LkV2ZW50cy5GaW5pc2hlZExvYWRpbmcucHJvdG90eXBlLnR5cGU9QmxvY2tseS5FdmVudHMuRklOSVNIRURfTE9BRElORztCbG9ja2x5LkV2ZW50cy5GaW5pc2hlZExvYWRpbmcucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPXt0eXBlOnRoaXMudHlwZX07dGhpcy5ncm91cCYmKGEuZ3JvdXA9dGhpcy5ncm91cCk7dGhpcy53b3Jrc3BhY2VJZCYmKGEud29ya3NwYWNlSWQ9dGhpcy53b3Jrc3BhY2VJZCk7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuRmluaXNoZWRMb2FkaW5nLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXt0aGlzLmlzQmxhbms9ITE7dGhpcy53b3Jrc3BhY2VJZD1hLndvcmtzcGFjZUlkO3RoaXMuZ3JvdXA9YS5ncm91cH07QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsQmxvY2tseS5FdmVudHMuRklOSVNIRURfTE9BRElORyxCbG9ja2x5LkV2ZW50cy5GaW5pc2hlZExvYWRpbmcpO0Jsb2NrbHkuRXZlbnRzLlZhckJhc2U9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuVmFyQmFzZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMudmFySWQ9KHRoaXMuaXNCbGFuaz1cInVuZGVmaW5lZFwiPT10eXBlb2YgYSk/XCJcIjphLmdldElkKCk7dGhpcy53b3Jrc3BhY2VJZD10aGlzLmlzQmxhbms/XCJcIjphLndvcmtzcGFjZS5pZH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5FdmVudHMuVmFyQmFzZSxCbG9ja2x5LkV2ZW50cy5BYnN0cmFjdCk7QmxvY2tseS5FdmVudHMuVmFyQmFzZS5wcm90b3R5cGUudG9Kc29uPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5FdmVudHMuVmFyQmFzZS5zdXBlckNsYXNzXy50b0pzb24uY2FsbCh0aGlzKTthLnZhcklkPXRoaXMudmFySWQ7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuVmFyQmFzZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuVmFyQmFzZS5zdXBlckNsYXNzXy50b0pzb24uY2FsbCh0aGlzKTt0aGlzLnZhcklkPWEudmFySWR9O0Jsb2NrbHkuRXZlbnRzLlZhckNyZWF0ZT1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5WYXJDcmVhdGUuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO2EmJih0aGlzLnZhclR5cGU9YS50eXBlLHRoaXMudmFyTmFtZT1hLm5hbWUpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5WYXJDcmVhdGUsQmxvY2tseS5FdmVudHMuVmFyQmFzZSk7QmxvY2tseS5FdmVudHMuVmFyQ3JlYXRlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLlZBUl9DUkVBVEU7XG5CbG9ja2x5LkV2ZW50cy5WYXJDcmVhdGUucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRXZlbnRzLlZhckNyZWF0ZS5zdXBlckNsYXNzXy50b0pzb24uY2FsbCh0aGlzKTthLnZhclR5cGU9dGhpcy52YXJUeXBlO2EudmFyTmFtZT10aGlzLnZhck5hbWU7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLlZhckNyZWF0ZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuVmFyQ3JlYXRlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLnZhclR5cGU9YS52YXJUeXBlO3RoaXMudmFyTmFtZT1hLnZhck5hbWV9O0Jsb2NrbHkuRXZlbnRzLlZhckNyZWF0ZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RXZlbnRXb3Jrc3BhY2VfKCk7YT9iLmNyZWF0ZVZhcmlhYmxlKHRoaXMudmFyTmFtZSx0aGlzLnZhclR5cGUsdGhpcy52YXJJZCk6Yi5kZWxldGVWYXJpYWJsZUJ5SWQodGhpcy52YXJJZCl9O1xuQmxvY2tseS5FdmVudHMuVmFyRGVsZXRlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLlZhckRlbGV0ZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7YSYmKHRoaXMudmFyVHlwZT1hLnR5cGUsdGhpcy52YXJOYW1lPWEubmFtZSl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRXZlbnRzLlZhckRlbGV0ZSxCbG9ja2x5LkV2ZW50cy5WYXJCYXNlKTtCbG9ja2x5LkV2ZW50cy5WYXJEZWxldGUucHJvdG90eXBlLnR5cGU9QmxvY2tseS5FdmVudHMuVkFSX0RFTEVURTtCbG9ja2x5LkV2ZW50cy5WYXJEZWxldGUucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRXZlbnRzLlZhckRlbGV0ZS5zdXBlckNsYXNzXy50b0pzb24uY2FsbCh0aGlzKTthLnZhclR5cGU9dGhpcy52YXJUeXBlO2EudmFyTmFtZT10aGlzLnZhck5hbWU7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuVmFyRGVsZXRlLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5WYXJEZWxldGUuc3VwZXJDbGFzc18uZnJvbUpzb24uY2FsbCh0aGlzLGEpO3RoaXMudmFyVHlwZT1hLnZhclR5cGU7dGhpcy52YXJOYW1lPWEudmFyTmFtZX07QmxvY2tseS5FdmVudHMuVmFyRGVsZXRlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFdmVudFdvcmtzcGFjZV8oKTthP2IuZGVsZXRlVmFyaWFibGVCeUlkKHRoaXMudmFySWQpOmIuY3JlYXRlVmFyaWFibGUodGhpcy52YXJOYW1lLHRoaXMudmFyVHlwZSx0aGlzLnZhcklkKX07QmxvY2tseS5FdmVudHMuVmFyUmVuYW1lPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5FdmVudHMuVmFyUmVuYW1lLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTthJiYodGhpcy5vbGROYW1lPWEubmFtZSx0aGlzLm5ld05hbWU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/XCJcIjpiKX07XG5CbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5WYXJSZW5hbWUsQmxvY2tseS5FdmVudHMuVmFyQmFzZSk7QmxvY2tseS5FdmVudHMuVmFyUmVuYW1lLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLlZBUl9SRU5BTUU7QmxvY2tseS5FdmVudHMuVmFyUmVuYW1lLnByb3RvdHlwZS50b0pzb249ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LkV2ZW50cy5WYXJSZW5hbWUuc3VwZXJDbGFzc18udG9Kc29uLmNhbGwodGhpcyk7YS5vbGROYW1lPXRoaXMub2xkTmFtZTthLm5ld05hbWU9dGhpcy5uZXdOYW1lO3JldHVybiBhfTtCbG9ja2x5LkV2ZW50cy5WYXJSZW5hbWUucHJvdG90eXBlLmZyb21Kc29uPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLlZhclJlbmFtZS5zdXBlckNsYXNzXy5mcm9tSnNvbi5jYWxsKHRoaXMsYSk7dGhpcy5vbGROYW1lPWEub2xkTmFtZTt0aGlzLm5ld05hbWU9YS5uZXdOYW1lfTtcbkJsb2NrbHkuRXZlbnRzLlZhclJlbmFtZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RXZlbnRXb3Jrc3BhY2VfKCk7YT9iLnJlbmFtZVZhcmlhYmxlQnlJZCh0aGlzLnZhcklkLHRoaXMubmV3TmFtZSk6Yi5yZW5hbWVWYXJpYWJsZUJ5SWQodGhpcy52YXJJZCx0aGlzLm9sZE5hbWUpfTtCbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5FVkVOVCxCbG9ja2x5LkV2ZW50cy5WQVJfQ1JFQVRFLEJsb2NrbHkuRXZlbnRzLlZhckNyZWF0ZSk7QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsQmxvY2tseS5FdmVudHMuVkFSX0RFTEVURSxCbG9ja2x5LkV2ZW50cy5WYXJEZWxldGUpO0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5ULEJsb2NrbHkuRXZlbnRzLlZBUl9SRU5BTUUsQmxvY2tseS5FdmVudHMuVmFyUmVuYW1lKTtCbG9ja2x5LlhtbD17fTtCbG9ja2x5LlhtbC53b3Jrc3BhY2VUb0RvbT1mdW5jdGlvbihhLGIpe3ZhciBjPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJ4bWxcIiksZD1CbG9ja2x5LlhtbC52YXJpYWJsZXNUb0RvbShCbG9ja2x5LlZhcmlhYmxlcy5hbGxVc2VkVmFyTW9kZWxzKGEpKTtkLmhhc0NoaWxkTm9kZXMoKSYmYy5hcHBlbmRDaGlsZChkKTt2YXIgZT1hLmdldFRvcENvbW1lbnRzKCEwKTtkPTA7Zm9yKHZhciBmO2Y9ZVtkXTtkKyspYy5hcHBlbmRDaGlsZChmLnRvWG1sV2l0aFhZKGIpKTthPWEuZ2V0VG9wQmxvY2tzKCEwKTtmb3IoZD0wO2U9YVtkXTtkKyspYy5hcHBlbmRDaGlsZChCbG9ja2x5LlhtbC5ibG9ja1RvRG9tV2l0aFhZKGUsYikpO3JldHVybiBjfTtcbkJsb2NrbHkuWG1sLnZhcmlhYmxlc1RvRG9tPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwidmFyaWFibGVzXCIpLGM9MCxkO2Q9YVtjXTtjKyspe3ZhciBlPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJ2YXJpYWJsZVwiKTtlLmFwcGVuZENoaWxkKEJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZVRleHROb2RlKGQubmFtZSkpO2QudHlwZSYmZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsZC50eXBlKTtlLmlkPWQuZ2V0SWQoKTtiLmFwcGVuZENoaWxkKGUpfXJldHVybiBifTtcbkJsb2NrbHkuWG1sLmJsb2NrVG9Eb21XaXRoWFk9ZnVuY3Rpb24oYSxiKXtpZihhLmlzSW5zZXJ0aW9uTWFya2VyKCkmJihhPWEuZ2V0Q2hpbGRyZW4oITEpWzBdLCFhKSlyZXR1cm4gbmV3IERvY3VtZW50RnJhZ21lbnQ7dmFyIGM7YS53b3Jrc3BhY2UuUlRMJiYoYz1hLndvcmtzcGFjZS5nZXRXaWR0aCgpKTtiPUJsb2NrbHkuWG1sLmJsb2NrVG9Eb20oYSxiKTt2YXIgZD1hLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTtiLnNldEF0dHJpYnV0ZShcInhcIixNYXRoLnJvdW5kKGEud29ya3NwYWNlLlJUTD9jLWQueDpkLngpKTtiLnNldEF0dHJpYnV0ZShcInlcIixNYXRoLnJvdW5kKGQueSkpO3JldHVybiBifTtCbG9ja2x5LlhtbC5maWVsZFRvRG9tXz1mdW5jdGlvbihhKXtpZihhLmlzU2VyaWFsaXphYmxlKCkpe3ZhciBiPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZFwiKTtiLnNldEF0dHJpYnV0ZShcIm5hbWVcIixhLm5hbWV8fFwiXCIpO3JldHVybiBhLnRvWG1sKGIpfXJldHVybiBudWxsfTtcbkJsb2NrbHkuWG1sLmFsbEZpZWxkc1RvRG9tXz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ7ZD1hLmlucHV0TGlzdFtjXTtjKyspZm9yKHZhciBlPTAsZjtmPWQuZmllbGRSb3dbZV07ZSsrKShmPUJsb2NrbHkuWG1sLmZpZWxkVG9Eb21fKGYpKSYmYi5hcHBlbmRDaGlsZChmKX07XG5CbG9ja2x5LlhtbC5ibG9ja1RvRG9tPWZ1bmN0aW9uKGEsYil7aWYoYS5pc0luc2VydGlvbk1hcmtlcigpKXJldHVybihhPWEuZ2V0Q2hpbGRyZW4oITEpWzBdKT9CbG9ja2x5LlhtbC5ibG9ja1RvRG9tKGEpOm5ldyBEb2N1bWVudEZyYWdtZW50O3ZhciBjPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoYS5pc1NoYWRvdygpP1wic2hhZG93XCI6XCJibG9ja1wiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixhLnR5cGUpO2J8fGMuc2V0QXR0cmlidXRlKFwiaWRcIixhLmlkKTtpZihhLm11dGF0aW9uVG9Eb20pe3ZhciBkPWEubXV0YXRpb25Ub0RvbSgpO2QmJihkLmhhc0NoaWxkTm9kZXMoKXx8ZC5oYXNBdHRyaWJ1dGVzKCkpJiZjLmFwcGVuZENoaWxkKGQpfUJsb2NrbHkuWG1sLmFsbEZpZWxkc1RvRG9tXyhhLGMpO2lmKGQ9YS5nZXRDb21tZW50VGV4dCgpKXt2YXIgZT1hLmNvbW1lbnRNb2RlbC5zaXplLGY9YS5jb21tZW50TW9kZWwucGlubmVkLGc9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcImNvbW1lbnRcIik7XG5nLmFwcGVuZENoaWxkKEJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZVRleHROb2RlKGQpKTtnLnNldEF0dHJpYnV0ZShcInBpbm5lZFwiLGYpO2cuc2V0QXR0cmlidXRlKFwiaFwiLGUuaGVpZ2h0KTtnLnNldEF0dHJpYnV0ZShcIndcIixlLndpZHRoKTtjLmFwcGVuZENoaWxkKGcpfWEuZGF0YSYmKGQ9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcImRhdGFcIiksZC5hcHBlbmRDaGlsZChCbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVUZXh0Tm9kZShhLmRhdGEpKSxjLmFwcGVuZENoaWxkKGQpKTtmb3IoZD0wO2U9YS5pbnB1dExpc3RbZF07ZCsrKXt2YXIgaDtmPSEwO2lmKGUudHlwZSE9QmxvY2tseS5EVU1NWV9JTlBVVCl7dmFyIGs9ZS5jb25uZWN0aW9uLnRhcmdldEJsb2NrKCk7ZS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFP2g9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcInZhbHVlXCIpOmUudHlwZT09QmxvY2tseS5ORVhUX1NUQVRFTUVOVCYmKGg9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcInN0YXRlbWVudFwiKSk7XG5nPWUuY29ubmVjdGlvbi5nZXRTaGFkb3dEb20oKTshZ3x8ayYmay5pc1NoYWRvdygpfHxoLmFwcGVuZENoaWxkKEJsb2NrbHkuWG1sLmNsb25lU2hhZG93XyhnLGIpKTtrJiYoZz1CbG9ja2x5LlhtbC5ibG9ja1RvRG9tKGssYiksZy5ub2RlVHlwZT09QmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuRUxFTUVOVF9OT0RFJiYoaC5hcHBlbmRDaGlsZChnKSxmPSExKSk7aC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsZS5uYW1lKTtmfHxjLmFwcGVuZENoaWxkKGgpfX12b2lkIDAhPWEuaW5wdXRzSW5saW5lJiZhLmlucHV0c0lubGluZSE9YS5pbnB1dHNJbmxpbmVEZWZhdWx0JiZjLnNldEF0dHJpYnV0ZShcImlubGluZVwiLGEuaW5wdXRzSW5saW5lKTthLmlzQ29sbGFwc2VkKCkmJmMuc2V0QXR0cmlidXRlKFwiY29sbGFwc2VkXCIsITApO2EuaXNFbmFibGVkKCl8fGMuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwhMCk7YS5pc0RlbGV0YWJsZSgpfHxhLmlzU2hhZG93KCl8fGMuc2V0QXR0cmlidXRlKFwiZGVsZXRhYmxlXCIsXG4hMSk7YS5pc01vdmFibGUoKXx8YS5pc1NoYWRvdygpfHxjLnNldEF0dHJpYnV0ZShcIm1vdmFibGVcIiwhMSk7YS5pc0VkaXRhYmxlKCl8fGMuc2V0QXR0cmlidXRlKFwiZWRpdGFibGVcIiwhMSk7aWYoZD1hLmdldE5leHRCbG9jaygpKWc9QmxvY2tseS5YbWwuYmxvY2tUb0RvbShkLGIpLGcubm9kZVR5cGU9PUJsb2NrbHkudXRpbHMuZG9tLk5vZGVUeXBlLkVMRU1FTlRfTk9ERSYmKGg9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcIm5leHRcIiksaC5hcHBlbmRDaGlsZChnKSxjLmFwcGVuZENoaWxkKGgpKTtnPWEubmV4dENvbm5lY3Rpb24mJmEubmV4dENvbm5lY3Rpb24uZ2V0U2hhZG93RG9tKCk7IWd8fGQmJmQuaXNTaGFkb3coKXx8aC5hcHBlbmRDaGlsZChCbG9ja2x5LlhtbC5jbG9uZVNoYWRvd18oZyxiKSk7cmV0dXJuIGN9O1xuQmxvY2tseS5YbWwuY2xvbmVTaGFkb3dfPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWE9YS5jbG9uZU5vZGUoITApLGQ7YzspaWYoYiYmXCJzaGFkb3dcIj09Yy5ub2RlTmFtZSYmYy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKSxjLmZpcnN0Q2hpbGQpYz1jLmZpcnN0Q2hpbGQ7ZWxzZXtmb3IoO2MmJiFjLm5leHRTaWJsaW5nOylkPWMsYz1jLnBhcmVudE5vZGUsZC5ub2RlVHlwZT09QmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuVEVYVF9OT0RFJiZcIlwiPT1kLmRhdGEudHJpbSgpJiZjLmZpcnN0Q2hpbGQhPWQmJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUoZCk7YyYmKGQ9YyxjPWMubmV4dFNpYmxpbmcsZC5ub2RlVHlwZT09QmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuVEVYVF9OT0RFJiZcIlwiPT1kLmRhdGEudHJpbSgpJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKGQpKX1yZXR1cm4gYX07XG5CbG9ja2x5LlhtbC5kb21Ub1RleHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEJsb2NrbHkudXRpbHMueG1sLmRvbVRvVGV4dChhKS5yZXBsYWNlKC88KFxcdyspKFtePF0qKVxcLz4vZyxcIjwkMSQyPjwvJDE+XCIpfTtCbG9ja2x5LlhtbC5kb21Ub1ByZXR0eVRleHQ9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LlhtbC5kb21Ub1RleHQoYSkuc3BsaXQoXCI8XCIpO2Zvcih2YXIgYj1cIlwiLGM9MTtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXTtcIi9cIj09ZFswXSYmKGI9Yi5zdWJzdHJpbmcoMikpO2FbY109YitcIjxcIitkO1wiL1wiIT1kWzBdJiZcIi8+XCIhPWQuc2xpY2UoLTIpJiYoYis9XCIgIFwiKX1hPWEuam9pbihcIlxcblwiKTthPWEucmVwbGFjZSgvKDwoXFx3KylcXGJbXj5dKj5bXlxcbl0qKVxcbiAqPFxcL1xcMj4vZyxcIiQxPC8kMj5cIik7cmV0dXJuIGEucmVwbGFjZSgvXlxcbi8sXCJcIil9O1xuQmxvY2tseS5YbWwudGV4dFRvRG9tPWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkudXRpbHMueG1sLnRleHRUb0RvbURvY3VtZW50KGEpO2lmKCFifHwhYi5kb2N1bWVudEVsZW1lbnR8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJ0ZXh0VG9Eb20gd2FzIHVuYWJsZSB0byBwYXJzZTogXCIrYSk7cmV0dXJuIGIuZG9jdW1lbnRFbGVtZW50fTtCbG9ja2x5LlhtbC5jbGVhcldvcmtzcGFjZUFuZExvYWRGcm9tWG1sPWZ1bmN0aW9uKGEsYil7Yi5zZXRSZXNpemVzRW5hYmxlZCghMSk7Yi5jbGVhcigpO2E9QmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoYSxiKTtiLnNldFJlc2l6ZXNFbmFibGVkKCEwKTtyZXR1cm4gYX07XG5CbG9ja2x5LlhtbC5kb21Ub1dvcmtzcGFjZT1mdW5jdGlvbihhLGIpe2lmKGEgaW5zdGFuY2VvZiBCbG9ja2x5LldvcmtzcGFjZSl7dmFyIGM9YTthPWI7Yj1jO2NvbnNvbGUud2FybihcIkRlcHJlY2F0ZWQgY2FsbCB0byBCbG9ja2x5LlhtbC5kb21Ub1dvcmtzcGFjZSwgc3dhcCB0aGUgYXJndW1lbnRzLlwiKX12YXIgZDtiLlJUTCYmKGQ9Yi5nZXRXaWR0aCgpKTtjPVtdO0Jsb2NrbHkudXRpbHMuZG9tLnN0YXJ0VGV4dFdpZHRoQ2FjaGUoKTt2YXIgZT1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO2V8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTtiLnNldFJlc2l6ZXNFbmFibGVkJiZiLnNldFJlc2l6ZXNFbmFibGVkKCExKTt2YXIgZj0hMDt0cnl7Zm9yKHZhciBnPTAsaDtoPWEuY2hpbGROb2Rlc1tnXTtnKyspe3ZhciBrPWgubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxsPWg7aWYoXCJibG9ja1wiPT1rfHxcInNoYWRvd1wiPT1rJiYhQmxvY2tseS5FdmVudHMucmVjb3JkVW5kbyl7dmFyIG09XG5CbG9ja2x5LlhtbC5kb21Ub0Jsb2NrKGwsYik7Yy5wdXNoKG0uaWQpO3ZhciBuPWwuaGFzQXR0cmlidXRlKFwieFwiKT9wYXJzZUludChsLmdldEF0dHJpYnV0ZShcInhcIiksMTApOjEwLHA9bC5oYXNBdHRyaWJ1dGUoXCJ5XCIpP3BhcnNlSW50KGwuZ2V0QXR0cmlidXRlKFwieVwiKSwxMCk6MTA7aXNOYU4obil8fGlzTmFOKHApfHxtLm1vdmVCeShiLlJUTD9kLW46bixwKTtmPSExfWVsc2V7aWYoXCJzaGFkb3dcIj09ayl0aHJvdyBUeXBlRXJyb3IoXCJTaGFkb3cgYmxvY2sgY2Fubm90IGJlIGEgdG9wLWxldmVsIGJsb2NrLlwiKTtpZihcImNvbW1lbnRcIj09ayliLnJlbmRlcmVkP0Jsb2NrbHkuV29ya3NwYWNlQ29tbWVudFN2Zz9CbG9ja2x5LldvcmtzcGFjZUNvbW1lbnRTdmcuZnJvbVhtbChsLGIsZCk6Y29uc29sZS53YXJuKFwiTWlzc2luZyByZXF1aXJlIGZvciBCbG9ja2x5LldvcmtzcGFjZUNvbW1lbnRTdmcsIGlnbm9yaW5nIHdvcmtzcGFjZSBjb21tZW50LlwiKTpCbG9ja2x5LldvcmtzcGFjZUNvbW1lbnQ/XG5CbG9ja2x5LldvcmtzcGFjZUNvbW1lbnQuZnJvbVhtbChsLGIpOmNvbnNvbGUud2FybihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5Xb3Jrc3BhY2VDb21tZW50LCBpZ25vcmluZyB3b3Jrc3BhY2UgY29tbWVudC5cIik7ZWxzZSBpZihcInZhcmlhYmxlc1wiPT1rKXtpZihmKUJsb2NrbHkuWG1sLmRvbVRvVmFyaWFibGVzKGwsYik7ZWxzZSB0aHJvdyBFcnJvcihcIid2YXJpYWJsZXMnIHRhZyBtdXN0IGV4aXN0IG9uY2UgYmVmb3JlIGJsb2NrIGFuZCBzaGFkb3cgdGFnIGVsZW1lbnRzIGluIHRoZSB3b3Jrc3BhY2UgWE1MLCBidXQgaXQgd2FzIGZvdW5kIGluIGFub3RoZXIgbG9jYXRpb24uXCIpO2Y9ITF9fX19ZmluYWxseXtlfHxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSksQmxvY2tseS51dGlscy5kb20uc3RvcFRleHRXaWR0aENhY2hlKCl9Yi5zZXRSZXNpemVzRW5hYmxlZCYmYi5zZXRSZXNpemVzRW5hYmxlZCghMCk7QmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuRmluaXNoZWRMb2FkaW5nKGIpKTtcbnJldHVybiBjfTtCbG9ja2x5LlhtbC5hcHBlbmREb21Ub1dvcmtzcGFjZT1mdW5jdGlvbihhLGIpe3ZhciBjO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLFwic2NhbGVcIikmJihjPWIuZ2V0QmxvY2tzQm91bmRpbmdCb3goKSk7YT1CbG9ja2x5LlhtbC5kb21Ub1dvcmtzcGFjZShhLGIpO2lmKGMmJmMudG9wIT1jLmJvdHRvbSl7dmFyIGQ9Yy5ib3R0b207dmFyIGU9Yi5SVEw/Yy5yaWdodDpjLmxlZnQ7dmFyIGY9SW5maW5pdHksZz0tSW5maW5pdHksaD1JbmZpbml0eTtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgaz1iLmdldEJsb2NrQnlJZChhW2NdKS5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCk7ay55PGgmJihoPWsueSk7ay54PGYmJihmPWsueCk7ay54PmcmJihnPWsueCl9ZD1kLWgrMTA7ZT1iLlJUTD9lLWc6ZS1mO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspYi5nZXRCbG9ja0J5SWQoYVtjXSkubW92ZUJ5KGUsZCl9cmV0dXJuIGF9O1xuQmxvY2tseS5YbWwuZG9tVG9CbG9jaz1mdW5jdGlvbihhLGIpe2lmKGEgaW5zdGFuY2VvZiBCbG9ja2x5LldvcmtzcGFjZSl7dmFyIGM9YTthPWI7Yj1jO2NvbnNvbGUud2FybihcIkRlcHJlY2F0ZWQgY2FsbCB0byBCbG9ja2x5LlhtbC5kb21Ub0Jsb2NrLCBzd2FwIHRoZSBhcmd1bWVudHMuXCIpfUJsb2NrbHkuRXZlbnRzLmRpc2FibGUoKTtjPWIuZ2V0QWxsVmFyaWFibGVzKCk7dHJ5e3ZhciBkPUJsb2NrbHkuWG1sLmRvbVRvQmxvY2tIZWFkbGVzc18oYSxiKSxlPWQuZ2V0RGVzY2VuZGFudHMoITEpO2lmKGIucmVuZGVyZWQpe2Quc2V0Q29ubmVjdGlvblRyYWNraW5nKCExKTtmb3IodmFyIGY9ZS5sZW5ndGgtMTswPD1mO2YtLSllW2ZdLmluaXRTdmcoKTtmb3IoZj1lLmxlbmd0aC0xOzA8PWY7Zi0tKWVbZl0ucmVuZGVyKCExKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5kaXNwb3NlZHx8ZC5zZXRDb25uZWN0aW9uVHJhY2tpbmcoITApfSwxKTtkLnVwZGF0ZURpc2FibGVkKCk7Yi5yZXNpemVDb250ZW50cygpfWVsc2UgZm9yKGY9XG5lLmxlbmd0aC0xOzA8PWY7Zi0tKWVbZl0uaW5pdE1vZGVsKCl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKX1pZihCbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSl7YT1CbG9ja2x5LlZhcmlhYmxlcy5nZXRBZGRlZFZhcmlhYmxlcyhiLGMpO2ZvcihmPTA7ZjxhLmxlbmd0aDtmKyspQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuVmFyQ3JlYXRlKGFbZl0pKTtCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NyZWF0ZShkKSl9cmV0dXJuIGR9O1xuQmxvY2tseS5YbWwuZG9tVG9WYXJpYWJsZXM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkO2Q9YS5jaGlsZE5vZGVzW2NdO2MrKylpZihkLm5vZGVUeXBlPT1CbG9ja2x5LnV0aWxzLmRvbS5Ob2RlVHlwZS5FTEVNRU5UX05PREUpe3ZhciBlPWQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxmPWQuZ2V0QXR0cmlidXRlKFwiaWRcIik7Yi5jcmVhdGVWYXJpYWJsZShkLnRleHRDb250ZW50LGUsZil9fTtcbkJsb2NrbHkuWG1sLmRvbVRvQmxvY2tIZWFkbGVzc189ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO2lmKCFkKXRocm93IFR5cGVFcnJvcihcIkJsb2NrIHR5cGUgdW5zcGVjaWZpZWQ6IFwiK2Eub3V0ZXJIVE1MKTt2YXIgZT1hLmdldEF0dHJpYnV0ZShcImlkXCIpO2M9Yi5uZXdCbG9jayhkLGUpO3ZhciBmPW51bGw7ZT0wO2Zvcih2YXIgZztnPWEuY2hpbGROb2Rlc1tlXTtlKyspaWYoZy5ub2RlVHlwZSE9QmxvY2tseS51dGlscy5kb20uTm9kZVR5cGUuVEVYVF9OT0RFKXtmb3IodmFyIGgsaz1mPW51bGwsbD0wO2g9Zy5jaGlsZE5vZGVzW2xdO2wrKyloLm5vZGVUeXBlPT1CbG9ja2x5LnV0aWxzLmRvbS5Ob2RlVHlwZS5FTEVNRU5UX05PREUmJihcImJsb2NrXCI9PWgubm9kZU5hbWUudG9Mb3dlckNhc2UoKT9mPWg6XCJzaGFkb3dcIj09aC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYoaz1oKSk7bD0hMTt2YXIgbT1nLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG5oPWc7c3dpdGNoKGcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZSBcIm11dGF0aW9uXCI6Yy5kb21Ub011dGF0aW9uJiYoYy5kb21Ub011dGF0aW9uKGgpLGMuaW5pdFN2ZyYmKGw9ITApKTticmVhaztjYXNlIFwiY29tbWVudFwiOmlmKCFCbG9ja2x5LkNvbW1lbnQpe2NvbnNvbGUud2FybihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5Db21tZW50LCBpZ25vcmluZyBibG9jayBjb21tZW50LlwiKTticmVha31rPWgudGV4dENvbnRlbnQ7Zj1cInRydWVcIj09aC5nZXRBdHRyaWJ1dGUoXCJwaW5uZWRcIik7Zz1wYXJzZUludChoLmdldEF0dHJpYnV0ZShcIndcIiksMTApO2g9cGFyc2VJbnQoaC5nZXRBdHRyaWJ1dGUoXCJoXCIpLDEwKTtjLnNldENvbW1lbnRUZXh0KGspO2MuY29tbWVudE1vZGVsLnBpbm5lZD1mO2lzTmFOKGcpfHxpc05hTihoKXx8KGMuY29tbWVudE1vZGVsLnNpemU9bmV3IEJsb2NrbHkudXRpbHMuU2l6ZShnLGgpKTtmJiZjLmdldENvbW1lbnRJY29uJiYhYy5pc0luRmx5b3V0JiZcbnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmdldENvbW1lbnRJY29uKCkuc2V0VmlzaWJsZSghMCl9LDEpO2JyZWFrO2Nhc2UgXCJkYXRhXCI6Yy5kYXRhPWcudGV4dENvbnRlbnQ7YnJlYWs7Y2FzZSBcInRpdGxlXCI6Y2FzZSBcImZpZWxkXCI6QmxvY2tseS5YbWwuZG9tVG9GaWVsZF8oYyxtLGgpO2JyZWFrO2Nhc2UgXCJ2YWx1ZVwiOmNhc2UgXCJzdGF0ZW1lbnRcIjpoPWMuZ2V0SW5wdXQobSk7aWYoIWgpe2NvbnNvbGUud2FybihcIklnbm9yaW5nIG5vbi1leGlzdGVudCBpbnB1dCBcIittK1wiIGluIGJsb2NrIFwiK2QpO2JyZWFrfWlmKGYpaWYoZj1CbG9ja2x5LlhtbC5kb21Ub0Jsb2NrSGVhZGxlc3NfKGYsYiksZi5vdXRwdXRDb25uZWN0aW9uKWguY29ubmVjdGlvbi5jb25uZWN0KGYub3V0cHV0Q29ubmVjdGlvbik7ZWxzZSBpZihmLnByZXZpb3VzQ29ubmVjdGlvbiloLmNvbm5lY3Rpb24uY29ubmVjdChmLnByZXZpb3VzQ29ubmVjdGlvbik7ZWxzZSB0aHJvdyBUeXBlRXJyb3IoXCJDaGlsZCBibG9jayBkb2VzIG5vdCBoYXZlIG91dHB1dCBvciBwcmV2aW91cyBzdGF0ZW1lbnQuXCIpO1xuayYmaC5jb25uZWN0aW9uLnNldFNoYWRvd0RvbShrKTticmVhaztjYXNlIFwibmV4dFwiOmlmKGYpe2lmKCFjLm5leHRDb25uZWN0aW9uKXRocm93IFR5cGVFcnJvcihcIk5leHQgc3RhdGVtZW50IGRvZXMgbm90IGV4aXN0LlwiKTtpZihjLm5leHRDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpdGhyb3cgVHlwZUVycm9yKFwiTmV4dCBzdGF0ZW1lbnQgaXMgYWxyZWFkeSBjb25uZWN0ZWQuXCIpO2Y9QmxvY2tseS5YbWwuZG9tVG9CbG9ja0hlYWRsZXNzXyhmLGIpO2lmKCFmLnByZXZpb3VzQ29ubmVjdGlvbil0aHJvdyBUeXBlRXJyb3IoXCJOZXh0IGJsb2NrIGRvZXMgbm90IGhhdmUgcHJldmlvdXMgc3RhdGVtZW50LlwiKTtjLm5leHRDb25uZWN0aW9uLmNvbm5lY3QoZi5wcmV2aW91c0Nvbm5lY3Rpb24pfWsmJmMubmV4dENvbm5lY3Rpb24mJmMubmV4dENvbm5lY3Rpb24uc2V0U2hhZG93RG9tKGspO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiSWdub3JpbmcgdW5rbm93biB0YWc6IFwiK2cubm9kZU5hbWUpfX1sJiZcbmMuaW5pdFN2ZygpOyhlPWEuZ2V0QXR0cmlidXRlKFwiaW5saW5lXCIpKSYmYy5zZXRJbnB1dHNJbmxpbmUoXCJ0cnVlXCI9PWUpOyhlPWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpJiZjLnNldEVuYWJsZWQoXCJ0cnVlXCIhPWUmJlwiZGlzYWJsZWRcIiE9ZSk7KGU9YS5nZXRBdHRyaWJ1dGUoXCJkZWxldGFibGVcIikpJiZjLnNldERlbGV0YWJsZShcInRydWVcIj09ZSk7KGU9YS5nZXRBdHRyaWJ1dGUoXCJtb3ZhYmxlXCIpKSYmYy5zZXRNb3ZhYmxlKFwidHJ1ZVwiPT1lKTsoZT1hLmdldEF0dHJpYnV0ZShcImVkaXRhYmxlXCIpKSYmYy5zZXRFZGl0YWJsZShcInRydWVcIj09ZSk7KGU9YS5nZXRBdHRyaWJ1dGUoXCJjb2xsYXBzZWRcIikpJiZjLnNldENvbGxhcHNlZChcInRydWVcIj09ZSk7aWYoXCJzaGFkb3dcIj09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXthPWMuZ2V0Q2hpbGRyZW4oITEpO2ZvcihlPTA7Yj1hW2VdO2UrKylpZighYi5pc1NoYWRvdygpKXRocm93IFR5cGVFcnJvcihcIlNoYWRvdyBibG9jayBub3QgYWxsb3dlZCBub24tc2hhZG93IGNoaWxkLlwiKTtcbmlmKGMuZ2V0VmFyTW9kZWxzKCkubGVuZ3RoKXRocm93IFR5cGVFcnJvcihcIlNoYWRvdyBibG9ja3MgY2Fubm90IGhhdmUgdmFyaWFibGUgcmVmZXJlbmNlcy5cIik7Yy5zZXRTaGFkb3coITApfXJldHVybiBjfTtCbG9ja2x5LlhtbC5kb21Ub0ZpZWxkXz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRGaWVsZChiKTtkP2QuZnJvbVhtbChjKTpjb25zb2xlLndhcm4oXCJJZ25vcmluZyBub24tZXhpc3RlbnQgZmllbGQgXCIrYitcIiBpbiBibG9jayBcIithLnR5cGUpfTtCbG9ja2x5LlhtbC5kZWxldGVOZXh0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM7Yz1hLmNoaWxkTm9kZXNbYl07YisrKWlmKFwibmV4dFwiPT1jLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2EucmVtb3ZlQ2hpbGQoYyk7YnJlYWt9fTtCbG9ja2x5Lk9wdGlvbnM9ZnVuY3Rpb24oYSl7dmFyIGI9ISFhLnJlYWRPbmx5O2lmKGIpdmFyIGM9bnVsbCxkPSExLGU9ITEsZj0hMSxnPSExLGg9ITEsaz0hMTtlbHNle2M9QmxvY2tseS51dGlscy50b29sYm94LmNvbnZlcnRUb29sYm94RGVmVG9Kc29uKGEudG9vbGJveCk7ZD1CbG9ja2x5LnV0aWxzLnRvb2xib3guaGFzQ2F0ZWdvcmllcyhjKTtlPWEudHJhc2hjYW47dm9pZCAwPT09ZSYmKGU9ZCk7dmFyIGw9YS5tYXhUcmFzaGNhbkNvbnRlbnRzO2U/dm9pZCAwPT09bCYmKGw9MzIpOmw9MDtmPWEuY29sbGFwc2U7dm9pZCAwPT09ZiYmKGY9ZCk7Zz1hLmNvbW1lbnRzO3ZvaWQgMD09PWcmJihnPWQpO2g9YS5kaXNhYmxlO3ZvaWQgMD09PWgmJihoPWQpO2s9YS5zb3VuZHM7dm9pZCAwPT09ayYmKGs9ITApfXZhciBtPSEhYS5ydGwsbj1hLmhvcml6b250YWxMYXlvdXQ7dm9pZCAwPT09biYmKG49ITEpO3ZhciBwPWEudG9vbGJveFBvc2l0aW9uO3A9XCJlbmRcIiE9PXA7cD1uP3A/QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLlRPUDpcbkJsb2NrbHkudXRpbHMudG9vbGJveC5Qb3NpdGlvbi5CT1RUT006cD09bT9CbG9ja2x5LnV0aWxzLnRvb2xib3guUG9zaXRpb24uUklHSFQ6QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLkxFRlQ7dmFyIHE9YS5jc3M7dm9pZCAwPT09cSYmKHE9ITApO3ZhciB0PVwiaHR0cHM6Ly9ibG9ja2x5LWRlbW8uYXBwc3BvdC5jb20vc3RhdGljL21lZGlhL1wiO2EubWVkaWE/dD1hLm1lZGlhOmEucGF0aCYmKHQ9YS5wYXRoK1wibWVkaWEvXCIpO3ZhciByPXZvaWQgMD09PWEub25lQmFzZWRJbmRleD8hMDohIWEub25lQmFzZWRJbmRleCx1PWEua2V5TWFwfHxCbG9ja2x5LnVzZXIua2V5TWFwLmNyZWF0ZURlZmF1bHRLZXlNYXAoKSx2PWEucmVuZGVyZXJ8fFwiZ2VyYXNcIix3PWEucGx1Z2luc3x8e307dGhpcy5SVEw9bTt0aGlzLm9uZUJhc2VkSW5kZXg9cjt0aGlzLmNvbGxhcHNlPWY7dGhpcy5jb21tZW50cz1nO3RoaXMuZGlzYWJsZT1oO3RoaXMucmVhZE9ubHk9Yjt0aGlzLm1heEJsb2Nrcz1cbmEubWF4QmxvY2tzfHxJbmZpbml0eTt0aGlzLm1heEluc3RhbmNlcz1hLm1heEluc3RhbmNlczt0aGlzLnBhdGhUb01lZGlhPXQ7dGhpcy5oYXNDYXRlZ29yaWVzPWQ7dGhpcy5tb3ZlT3B0aW9ucz1CbG9ja2x5Lk9wdGlvbnMucGFyc2VNb3ZlT3B0aW9uc18oYSxkKTt0aGlzLmhhc1Njcm9sbGJhcnM9dGhpcy5tb3ZlT3B0aW9ucy5zY3JvbGxiYXJzO3RoaXMuaGFzVHJhc2hjYW49ZTt0aGlzLm1heFRyYXNoY2FuQ29udGVudHM9bDt0aGlzLmhhc1NvdW5kcz1rO3RoaXMuaGFzQ3NzPXE7dGhpcy5ob3Jpem9udGFsTGF5b3V0PW47dGhpcy5sYW5ndWFnZVRyZWU9Yzt0aGlzLmdyaWRPcHRpb25zPUJsb2NrbHkuT3B0aW9ucy5wYXJzZUdyaWRPcHRpb25zXyhhKTt0aGlzLnpvb21PcHRpb25zPUJsb2NrbHkuT3B0aW9ucy5wYXJzZVpvb21PcHRpb25zXyhhKTt0aGlzLnRvb2xib3hQb3NpdGlvbj1wO3RoaXMudGhlbWU9QmxvY2tseS5PcHRpb25zLnBhcnNlVGhlbWVPcHRpb25zXyhhKTt0aGlzLmtleU1hcD1cbnU7dGhpcy5yZW5kZXJlcj12O3RoaXMucmVuZGVyZXJPdmVycmlkZXM9YS5yZW5kZXJlck92ZXJyaWRlczt0aGlzLmdyaWRQYXR0ZXJuPW51bGw7dGhpcy5wYXJlbnRXb3Jrc3BhY2U9YS5wYXJlbnRXb3Jrc3BhY2U7dGhpcy5wbHVnaW5zPXd9O0Jsb2NrbHkuQmxvY2tseU9wdGlvbnM9ZnVuY3Rpb24oKXt9O0Jsb2NrbHkuT3B0aW9ucy5wYXJzZU1vdmVPcHRpb25zXz1mdW5jdGlvbihhLGIpe3ZhciBjPWEubW92ZXx8e30sZD17fTtkLnNjcm9sbGJhcnM9dm9pZCAwPT09Yy5zY3JvbGxiYXJzJiZ2b2lkIDA9PT1hLnNjcm9sbGJhcnM/YjohIWMuc2Nyb2xsYmFyc3x8ISFhLnNjcm9sbGJhcnM7ZC53aGVlbD1kLnNjcm9sbGJhcnMmJnZvaWQgMCE9PWMud2hlZWw/ISFjLndoZWVsOiExO2QuZHJhZz1kLnNjcm9sbGJhcnM/dm9pZCAwPT09Yy5kcmFnPyEwOiEhYy5kcmFnOiExO3JldHVybiBkfTtcbkJsb2NrbHkuT3B0aW9ucy5wYXJzZVpvb21PcHRpb25zXz1mdW5jdGlvbihhKXthPWEuem9vbXx8e307dmFyIGI9e307Yi5jb250cm9scz12b2lkIDA9PT1hLmNvbnRyb2xzPyExOiEhYS5jb250cm9scztiLndoZWVsPXZvaWQgMD09PWEud2hlZWw/ITE6ISFhLndoZWVsO2Iuc3RhcnRTY2FsZT12b2lkIDA9PT1hLnN0YXJ0U2NhbGU/MTpOdW1iZXIoYS5zdGFydFNjYWxlKTtiLm1heFNjYWxlPXZvaWQgMD09PWEubWF4U2NhbGU/MzpOdW1iZXIoYS5tYXhTY2FsZSk7Yi5taW5TY2FsZT12b2lkIDA9PT1hLm1pblNjYWxlPy4zOk51bWJlcihhLm1pblNjYWxlKTtiLnNjYWxlU3BlZWQ9dm9pZCAwPT09YS5zY2FsZVNwZWVkPzEuMjpOdW1iZXIoYS5zY2FsZVNwZWVkKTtiLnBpbmNoPXZvaWQgMD09PWEucGluY2g/Yi53aGVlbHx8Yi5jb250cm9sczohIWEucGluY2g7cmV0dXJuIGJ9O1xuQmxvY2tseS5PcHRpb25zLnBhcnNlR3JpZE9wdGlvbnNfPWZ1bmN0aW9uKGEpe2E9YS5ncmlkfHx7fTt2YXIgYj17fTtiLnNwYWNpbmc9TnVtYmVyKGEuc3BhY2luZyl8fDA7Yi5jb2xvdXI9YS5jb2xvdXJ8fFwiIzg4OFwiO2IubGVuZ3RoPXZvaWQgMD09PWEubGVuZ3RoPzE6TnVtYmVyKGEubGVuZ3RoKTtiLnNuYXA9MDxiLnNwYWNpbmcmJiEhYS5zbmFwO3JldHVybiBifTtCbG9ja2x5Lk9wdGlvbnMucGFyc2VUaGVtZU9wdGlvbnNfPWZ1bmN0aW9uKGEpe2E9YS50aGVtZXx8QmxvY2tseS5UaGVtZXMuQ2xhc3NpYztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT9CbG9ja2x5LnJlZ2lzdHJ5LmdldE9iamVjdChCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVEhFTUUsYSk6YSBpbnN0YW5jZW9mIEJsb2NrbHkuVGhlbWU/YTpCbG9ja2x5LlRoZW1lLmRlZmluZVRoZW1lKGEubmFtZXx8XCJidWlsdGluXCIrQmxvY2tseS51dGlscy5JZEdlbmVyYXRvci5nZXROZXh0VW5pcXVlSWQoKSxhKX07XG5CbG9ja2x5Lk9wdGlvbnMucGFyc2VUb29sYm94VHJlZT1mdW5jdGlvbihhKXtCbG9ja2x5LnV0aWxzLmRlcHJlY2F0aW9uLndhcm4oXCJCbG9ja2x5Lk9wdGlvbnMucGFyc2VUb29sYm94VHJlZVwiLFwiU2VwdGVtYmVyIDIwMjBcIixcIlNlcHRlbWJlciAyMDIxXCIsXCJCbG9ja2x5LnV0aWxzLnRvb2xib3gucGFyc2VUb29sYm94VHJlZVwiKTtyZXR1cm4gQmxvY2tseS51dGlscy50b29sYm94LnBhcnNlVG9vbGJveFRyZWUoYSl9O0Jsb2NrbHkuVG91Y2g9e307QmxvY2tseS5Ub3VjaC5UT1VDSF9FTkFCTEVEPVwib250b3VjaHN0YXJ0XCJpbiBCbG9ja2x5LnV0aWxzLmdsb2JhbHx8ISEoQmxvY2tseS51dGlscy5nbG9iYWwuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmXCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl8fCEoIUJsb2NrbHkudXRpbHMuZ2xvYmFsLm5hdmlnYXRvcnx8IUJsb2NrbHkudXRpbHMuZ2xvYmFsLm5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyYmIUJsb2NrbHkudXRpbHMuZ2xvYmFsLm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzKTtCbG9ja2x5LlRvdWNoLnRvdWNoSWRlbnRpZmllcl89bnVsbDtCbG9ja2x5LlRvdWNoLlRPVUNIX01BUD17fTtcbkJsb2NrbHkudXRpbHMuZ2xvYmFsLlBvaW50ZXJFdmVudD9CbG9ja2x5LlRvdWNoLlRPVUNIX01BUD17bW91c2Vkb3duOltcInBvaW50ZXJkb3duXCJdLG1vdXNlZW50ZXI6W1wicG9pbnRlcmVudGVyXCJdLG1vdXNlbGVhdmU6W1wicG9pbnRlcmxlYXZlXCJdLG1vdXNlbW92ZTpbXCJwb2ludGVybW92ZVwiXSxtb3VzZW91dDpbXCJwb2ludGVyb3V0XCJdLG1vdXNlb3ZlcjpbXCJwb2ludGVyb3ZlclwiXSxtb3VzZXVwOltcInBvaW50ZXJ1cFwiLFwicG9pbnRlcmNhbmNlbFwiXSx0b3VjaGVuZDpbXCJwb2ludGVydXBcIl0sdG91Y2hjYW5jZWw6W1wicG9pbnRlcmNhbmNlbFwiXX06QmxvY2tseS5Ub3VjaC5UT1VDSF9FTkFCTEVEJiYoQmxvY2tseS5Ub3VjaC5UT1VDSF9NQVA9e21vdXNlZG93bjpbXCJ0b3VjaHN0YXJ0XCJdLG1vdXNlbW92ZTpbXCJ0b3VjaG1vdmVcIl0sbW91c2V1cDpbXCJ0b3VjaGVuZFwiLFwidG91Y2hjYW5jZWxcIl19KTtCbG9ja2x5LmxvbmdQaWRfPTA7XG5CbG9ja2x5LmxvbmdTdGFydD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkubG9uZ1N0b3BfKCk7YS5jaGFuZ2VkVG91Y2hlcyYmMSE9YS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGh8fChCbG9ja2x5LmxvbmdQaWRfPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmNoYW5nZWRUb3VjaGVzJiYoYS5idXR0b249MixhLmNsaWVudFg9YS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLGEuY2xpZW50WT1hLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpO2ImJmIuaGFuZGxlUmlnaHRDbGljayhhKX0sQmxvY2tseS5MT05HUFJFU1MpKX07QmxvY2tseS5sb25nU3RvcF89ZnVuY3Rpb24oKXtCbG9ja2x5LmxvbmdQaWRfJiYoY2xlYXJUaW1lb3V0KEJsb2NrbHkubG9uZ1BpZF8pLEJsb2NrbHkubG9uZ1BpZF89MCl9O0Jsb2NrbHkuVG91Y2guY2xlYXJUb3VjaElkZW50aWZpZXI9ZnVuY3Rpb24oKXtCbG9ja2x5LlRvdWNoLnRvdWNoSWRlbnRpZmllcl89bnVsbH07XG5CbG9ja2x5LlRvdWNoLnNob3VsZEhhbmRsZUV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiFCbG9ja2x5LlRvdWNoLmlzTW91c2VPclRvdWNoRXZlbnQoYSl8fEJsb2NrbHkuVG91Y2guY2hlY2tUb3VjaElkZW50aWZpZXIoYSl9O0Jsb2NrbHkuVG91Y2guZ2V0VG91Y2hJZGVudGlmaWVyRnJvbUV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPWEucG9pbnRlcklkP2EucG9pbnRlcklkOmEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXNbMF0mJnZvaWQgMCE9PWEuY2hhbmdlZFRvdWNoZXNbMF0uaWRlbnRpZmllciYmbnVsbCE9PWEuY2hhbmdlZFRvdWNoZXNbMF0uaWRlbnRpZmllcj9hLmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI6XCJtb3VzZVwifTtcbkJsb2NrbHkuVG91Y2guY2hlY2tUb3VjaElkZW50aWZpZXI9ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS5Ub3VjaC5nZXRUb3VjaElkZW50aWZpZXJGcm9tRXZlbnQoYSk7cmV0dXJuIHZvaWQgMCE9PUJsb2NrbHkuVG91Y2gudG91Y2hJZGVudGlmaWVyXyYmbnVsbCE9PUJsb2NrbHkuVG91Y2gudG91Y2hJZGVudGlmaWVyXz9CbG9ja2x5LlRvdWNoLnRvdWNoSWRlbnRpZmllcl89PWI6XCJtb3VzZWRvd25cIj09YS50eXBlfHxcInRvdWNoc3RhcnRcIj09YS50eXBlfHxcInBvaW50ZXJkb3duXCI9PWEudHlwZT8oQmxvY2tseS5Ub3VjaC50b3VjaElkZW50aWZpZXJfPWIsITApOiExfTtCbG9ja2x5LlRvdWNoLnNldENsaWVudEZyb21Ub3VjaD1mdW5jdGlvbihhKXtpZihCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcInRvdWNoXCIpKXt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdO2EuY2xpZW50WD1iLmNsaWVudFg7YS5jbGllbnRZPWIuY2xpZW50WX19O1xuQmxvY2tseS5Ub3VjaC5pc01vdXNlT3JUb3VjaEV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcInRvdWNoXCIpfHxCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcIm1vdXNlXCIpfHxCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcInBvaW50ZXJcIil9O0Jsb2NrbHkuVG91Y2guaXNUb3VjaEV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcInRvdWNoXCIpfHxCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGEudHlwZSxcInBvaW50ZXJcIil9O1xuQmxvY2tseS5Ub3VjaC5zcGxpdEV2ZW50QnlUb3VjaGVzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKGEuY2hhbmdlZFRvdWNoZXMpZm9yKHZhciBjPTA7YzxhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtjKyspYltjXT17dHlwZTphLnR5cGUsY2hhbmdlZFRvdWNoZXM6W2EuY2hhbmdlZFRvdWNoZXNbY11dLHRhcmdldDphLnRhcmdldCxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXthLnN0b3BQcm9wYWdhdGlvbigpfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX19O2Vsc2UgYi5wdXNoKGEpO3JldHVybiBifTtCbG9ja2x5LlNjcm9sbGJhclBhaXI9ZnVuY3Rpb24oYSl7dGhpcy53b3Jrc3BhY2VfPWE7dGhpcy5oU2Nyb2xsPW5ldyBCbG9ja2x5LlNjcm9sbGJhcihhLCEwLCEwLFwiYmxvY2tseU1haW5Xb3Jrc3BhY2VTY3JvbGxiYXJcIik7dGhpcy52U2Nyb2xsPW5ldyBCbG9ja2x5LlNjcm9sbGJhcihhLCExLCEwLFwiYmxvY2tseU1haW5Xb3Jrc3BhY2VTY3JvbGxiYXJcIik7dGhpcy5jb3JuZXJfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7aGVpZ2h0OkJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcyx3aWR0aDpCbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3MsXCJjbGFzc1wiOlwiYmxvY2tseVNjcm9sbGJhckJhY2tncm91bmRcIn0sbnVsbCk7QmxvY2tseS51dGlscy5kb20uaW5zZXJ0QWZ0ZXIodGhpcy5jb3JuZXJfLGEuZ2V0QnViYmxlQ2FudmFzKCkpO3RoaXMub2xkSG9zdE1ldHJpY3NfPW51bGx9O1xuQmxvY2tseS5TY3JvbGxiYXJQYWlyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZSh0aGlzLmNvcm5lcl8pO3RoaXMub2xkSG9zdE1ldHJpY3NfPXRoaXMud29ya3NwYWNlXz10aGlzLmNvcm5lcl89bnVsbDt0aGlzLmhTY3JvbGwuZGlzcG9zZSgpO3RoaXMuaFNjcm9sbD1udWxsO3RoaXMudlNjcm9sbC5kaXNwb3NlKCk7dGhpcy52U2Nyb2xsPW51bGx9O1xuQmxvY2tseS5TY3JvbGxiYXJQYWlyLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmtzcGFjZV8uZ2V0TWV0cmljcygpO2lmKGEpe3ZhciBiPSExLGM9ITE7dGhpcy5vbGRIb3N0TWV0cmljc18mJnRoaXMub2xkSG9zdE1ldHJpY3NfLnZpZXdXaWR0aD09YS52aWV3V2lkdGgmJnRoaXMub2xkSG9zdE1ldHJpY3NfLnZpZXdIZWlnaHQ9PWEudmlld0hlaWdodCYmdGhpcy5vbGRIb3N0TWV0cmljc18uYWJzb2x1dGVUb3A9PWEuYWJzb2x1dGVUb3AmJnRoaXMub2xkSG9zdE1ldHJpY3NfLmFic29sdXRlTGVmdD09YS5hYnNvbHV0ZUxlZnQ/KHRoaXMub2xkSG9zdE1ldHJpY3NfJiZ0aGlzLm9sZEhvc3RNZXRyaWNzXy5jb250ZW50V2lkdGg9PWEuY29udGVudFdpZHRoJiZ0aGlzLm9sZEhvc3RNZXRyaWNzXy52aWV3TGVmdD09YS52aWV3TGVmdCYmdGhpcy5vbGRIb3N0TWV0cmljc18uY29udGVudExlZnQ9PWEuY29udGVudExlZnR8fChiPSEwKSx0aGlzLm9sZEhvc3RNZXRyaWNzXyYmXG50aGlzLm9sZEhvc3RNZXRyaWNzXy5jb250ZW50SGVpZ2h0PT1hLmNvbnRlbnRIZWlnaHQmJnRoaXMub2xkSG9zdE1ldHJpY3NfLnZpZXdUb3A9PWEudmlld1RvcCYmdGhpcy5vbGRIb3N0TWV0cmljc18uY29udGVudFRvcD09YS5jb250ZW50VG9wfHwoYz0hMCkpOmM9Yj0hMDtpZihifHxjKXt0cnl7QmxvY2tseS5FdmVudHMuZGlzYWJsZSgpLGImJnRoaXMuaFNjcm9sbC5yZXNpemUoYSksYyYmdGhpcy52U2Nyb2xsLnJlc2l6ZShhKX1maW5hbGx5e0Jsb2NrbHkuRXZlbnRzLmVuYWJsZSgpfXRoaXMud29ya3NwYWNlXy5tYXliZUZpcmVWaWV3cG9ydENoYW5nZUV2ZW50KCl9dGhpcy5vbGRIb3N0TWV0cmljc18mJnRoaXMub2xkSG9zdE1ldHJpY3NfLnZpZXdXaWR0aD09YS52aWV3V2lkdGgmJnRoaXMub2xkSG9zdE1ldHJpY3NfLmFic29sdXRlTGVmdD09YS5hYnNvbHV0ZUxlZnR8fHRoaXMuY29ybmVyXy5zZXRBdHRyaWJ1dGUoXCJ4XCIsdGhpcy52U2Nyb2xsLnBvc2l0aW9uLngpO3RoaXMub2xkSG9zdE1ldHJpY3NfJiZcbnRoaXMub2xkSG9zdE1ldHJpY3NfLnZpZXdIZWlnaHQ9PWEudmlld0hlaWdodCYmdGhpcy5vbGRIb3N0TWV0cmljc18uYWJzb2x1dGVUb3A9PWEuYWJzb2x1dGVUb3B8fHRoaXMuY29ybmVyXy5zZXRBdHRyaWJ1dGUoXCJ5XCIsdGhpcy5oU2Nyb2xsLnBvc2l0aW9uLnkpO3RoaXMub2xkSG9zdE1ldHJpY3NfPWF9fTtCbG9ja2x5LlNjcm9sbGJhclBhaXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3ZhciBjPXt9O2EqPXRoaXMuaFNjcm9sbC5yYXRpbztiKj10aGlzLnZTY3JvbGwucmF0aW87dmFyIGQ9dGhpcy52U2Nyb2xsLnNjcm9sbFZpZXdTaXplXztjLng9dGhpcy5nZXRSYXRpb18oYSx0aGlzLmhTY3JvbGwuc2Nyb2xsVmlld1NpemVfKTtjLnk9dGhpcy5nZXRSYXRpb18oYixkKTt0aGlzLndvcmtzcGFjZV8uc2V0TWV0cmljcyhjKTt0aGlzLmhTY3JvbGwuc2V0SGFuZGxlUG9zaXRpb24oYSk7dGhpcy52U2Nyb2xsLnNldEhhbmRsZVBvc2l0aW9uKGIpfTtcbkJsb2NrbHkuU2Nyb2xsYmFyUGFpci5wcm90b3R5cGUuZ2V0UmF0aW9fPWZ1bmN0aW9uKGEsYil7YS89YjtyZXR1cm4gaXNOYU4oYSk/MDphfTtcbkJsb2NrbHkuU2Nyb2xsYmFyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMud29ya3NwYWNlXz1hO3RoaXMucGFpcl89Y3x8ITE7dGhpcy5ob3Jpem9udGFsXz1iO3RoaXMucmF0aW89dGhpcy5vbGRIb3N0TWV0cmljc189bnVsbDt0aGlzLmNyZWF0ZURvbV8oZCk7dGhpcy5wb3NpdGlvbj1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKDAsMCk7YT1CbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3M7Yj8odGhpcy5zdmdCYWNrZ3JvdW5kXy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixhKSx0aGlzLm91dGVyU3ZnXy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixhKSx0aGlzLnN2Z0hhbmRsZV8uc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsYS01KSx0aGlzLnN2Z0hhbmRsZV8uc2V0QXR0cmlidXRlKFwieVwiLDIuNSksdGhpcy5sZW5ndGhBdHRyaWJ1dGVfPVwid2lkdGhcIix0aGlzLnBvc2l0aW9uQXR0cmlidXRlXz1cInhcIik6KHRoaXMuc3ZnQmFja2dyb3VuZF8uc2V0QXR0cmlidXRlKFwid2lkdGhcIixcbmEpLHRoaXMub3V0ZXJTdmdfLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYSksdGhpcy5zdmdIYW5kbGVfLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYS01KSx0aGlzLnN2Z0hhbmRsZV8uc2V0QXR0cmlidXRlKFwieFwiLDIuNSksdGhpcy5sZW5ndGhBdHRyaWJ1dGVfPVwiaGVpZ2h0XCIsdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZV89XCJ5XCIpO3RoaXMub25Nb3VzZURvd25CYXJXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHRoaXMuc3ZnQmFja2dyb3VuZF8sXCJtb3VzZWRvd25cIix0aGlzLHRoaXMub25Nb3VzZURvd25CYXJfKTt0aGlzLm9uTW91c2VEb3duSGFuZGxlV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLnN2Z0hhbmRsZV8sXCJtb3VzZWRvd25cIix0aGlzLHRoaXMub25Nb3VzZURvd25IYW5kbGVfKX07QmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLm9yaWdpbl89bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZSgwLDApO1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnN0YXJ0RHJhZ01vdXNlXz0wO0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5zY3JvbGxWaWV3U2l6ZV89MDtCbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuaGFuZGxlTGVuZ3RoXz0wO0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5oYW5kbGVQb3NpdGlvbl89MDtCbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuaXNWaXNpYmxlXz0hMDtCbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuY29udGFpbmVyVmlzaWJsZV89ITA7QmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzPTE1O0Jsb2NrbHkuVG91Y2guVE9VQ0hfRU5BQkxFRCYmKEJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcz0yNSk7XG5CbG9ja2x5LlNjcm9sbGJhci5tZXRyaWNzQXJlRXF1aXZhbGVudF89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYiYmYS52aWV3V2lkdGg9PWIudmlld1dpZHRoJiZhLnZpZXdIZWlnaHQ9PWIudmlld0hlaWdodCYmYS52aWV3TGVmdD09Yi52aWV3TGVmdCYmYS52aWV3VG9wPT1iLnZpZXdUb3AmJmEuYWJzb2x1dGVUb3A9PWIuYWJzb2x1dGVUb3AmJmEuYWJzb2x1dGVMZWZ0PT1iLmFic29sdXRlTGVmdCYmYS5jb250ZW50V2lkdGg9PWIuY29udGVudFdpZHRoJiZhLmNvbnRlbnRIZWlnaHQ9PWIuY29udGVudEhlaWdodCYmYS5jb250ZW50TGVmdD09Yi5jb250ZW50TGVmdCYmYS5jb250ZW50VG9wPT1iLmNvbnRlbnRUb3A/ITA6ITF9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNsZWFuVXBfKCk7QmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlRG93bkJhcldyYXBwZXJfKTt0aGlzLm9uTW91c2VEb3duQmFyV3JhcHBlcl89bnVsbDtCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uTW91c2VEb3duSGFuZGxlV3JhcHBlcl8pO3RoaXMub25Nb3VzZURvd25IYW5kbGVXcmFwcGVyXz1udWxsO0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5vdXRlclN2Z18pO3RoaXMuc3ZnQmFja2dyb3VuZF89dGhpcy5zdmdHcm91cF89dGhpcy5vdXRlclN2Z189bnVsbDt0aGlzLnN2Z0hhbmRsZV8mJih0aGlzLndvcmtzcGFjZV8uZ2V0VGhlbWVNYW5hZ2VyKCkudW5zdWJzY3JpYmUodGhpcy5zdmdIYW5kbGVfKSx0aGlzLnN2Z0hhbmRsZV89bnVsbCk7dGhpcy53b3Jrc3BhY2VfPW51bGx9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnNldEhhbmRsZUxlbmd0aF89ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVMZW5ndGhfPWE7dGhpcy5zdmdIYW5kbGVfLnNldEF0dHJpYnV0ZSh0aGlzLmxlbmd0aEF0dHJpYnV0ZV8sdGhpcy5oYW5kbGVMZW5ndGhfKX07QmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnNldEhhbmRsZVBvc2l0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlUG9zaXRpb25fPWE7dGhpcy5zdmdIYW5kbGVfLnNldEF0dHJpYnV0ZSh0aGlzLnBvc2l0aW9uQXR0cmlidXRlXyx0aGlzLmhhbmRsZVBvc2l0aW9uXyl9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnNldFNjcm9sbFZpZXdTaXplXz1mdW5jdGlvbihhKXt0aGlzLnNjcm9sbFZpZXdTaXplXz1hO3RoaXMub3V0ZXJTdmdfLnNldEF0dHJpYnV0ZSh0aGlzLmxlbmd0aEF0dHJpYnV0ZV8sdGhpcy5zY3JvbGxWaWV3U2l6ZV8pO3RoaXMuc3ZnQmFja2dyb3VuZF8uc2V0QXR0cmlidXRlKHRoaXMubGVuZ3RoQXR0cmlidXRlXyx0aGlzLnNjcm9sbFZpZXdTaXplXyl9O0Jsb2NrbHkuU2Nyb2xsYmFyUGFpci5wcm90b3R5cGUuc2V0Q29udGFpbmVyVmlzaWJsZT1mdW5jdGlvbihhKXt0aGlzLmhTY3JvbGwuc2V0Q29udGFpbmVyVmlzaWJsZShhKTt0aGlzLnZTY3JvbGwuc2V0Q29udGFpbmVyVmlzaWJsZShhKX07XG5CbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24oYSxiKXt0aGlzLnBvc2l0aW9uLng9YTt0aGlzLnBvc2l0aW9uLnk9YjtCbG9ja2x5LnV0aWxzLmRvbS5zZXRDc3NUcmFuc2Zvcm0odGhpcy5vdXRlclN2Z18sXCJ0cmFuc2xhdGUoXCIrKHRoaXMucG9zaXRpb24ueCt0aGlzLm9yaWdpbl8ueCkrXCJweCxcIisodGhpcy5wb3NpdGlvbi55K3RoaXMub3JpZ2luXy55KStcInB4KVwiKX07QmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihhKXtpZighYSYmKGE9dGhpcy53b3Jrc3BhY2VfLmdldE1ldHJpY3MoKSwhYSkpcmV0dXJuO0Jsb2NrbHkuU2Nyb2xsYmFyLm1ldHJpY3NBcmVFcXVpdmFsZW50XyhhLHRoaXMub2xkSG9zdE1ldHJpY3NfKXx8KHRoaXMub2xkSG9zdE1ldHJpY3NfPWEsdGhpcy5ob3Jpem9udGFsXz90aGlzLnJlc2l6ZUhvcml6b250YWxfKGEpOnRoaXMucmVzaXplVmVydGljYWxfKGEpLHRoaXMub25TY3JvbGxfKCkpfTtcbkJsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5yZXNpemVIb3Jpem9udGFsXz1mdW5jdGlvbihhKXt0aGlzLnJlc2l6ZVZpZXdIb3Jpem9udGFsKGEpfTtCbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUucmVzaXplVmlld0hvcml6b250YWw9ZnVuY3Rpb24oYSl7dmFyIGI9YS52aWV3V2lkdGgtMTt0aGlzLnBhaXJfJiYoYi09QmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzKTt0aGlzLnNldFNjcm9sbFZpZXdTaXplXyhNYXRoLm1heCgwLGIpKTtiPWEuYWJzb2x1dGVMZWZ0Ky41O3RoaXMucGFpcl8mJnRoaXMud29ya3NwYWNlXy5SVEwmJihiKz1CbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3MpO3RoaXMuc2V0UG9zaXRpb24oYixhLmFic29sdXRlVG9wK2Eudmlld0hlaWdodC1CbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3MtLjUpO3RoaXMucmVzaXplQ29udGVudEhvcml6b250YWwoYSl9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnJlc2l6ZUNvbnRlbnRIb3Jpem9udGFsPWZ1bmN0aW9uKGEpe3RoaXMucGFpcl98fHRoaXMuc2V0VmlzaWJsZSh0aGlzLnNjcm9sbFZpZXdTaXplXzxhLmNvbnRlbnRXaWR0aCk7dGhpcy5yYXRpbz10aGlzLnNjcm9sbFZpZXdTaXplXy9hLmNvbnRlbnRXaWR0aDtpZigtSW5maW5pdHk9PXRoaXMucmF0aW98fEluZmluaXR5PT10aGlzLnJhdGlvfHxpc05hTih0aGlzLnJhdGlvKSl0aGlzLnJhdGlvPTA7dGhpcy5zZXRIYW5kbGVMZW5ndGhfKE1hdGgubWF4KDAsYS52aWV3V2lkdGgqdGhpcy5yYXRpbykpO3RoaXMuc2V0SGFuZGxlUG9zaXRpb24odGhpcy5jb25zdHJhaW5IYW5kbGVfKChhLnZpZXdMZWZ0LWEuY29udGVudExlZnQpKnRoaXMucmF0aW8pKX07QmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnJlc2l6ZVZlcnRpY2FsXz1mdW5jdGlvbihhKXt0aGlzLnJlc2l6ZVZpZXdWZXJ0aWNhbChhKX07XG5CbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUucmVzaXplVmlld1ZlcnRpY2FsPWZ1bmN0aW9uKGEpe3ZhciBiPWEudmlld0hlaWdodC0xO3RoaXMucGFpcl8mJihiLT1CbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3MpO3RoaXMuc2V0U2Nyb2xsVmlld1NpemVfKE1hdGgubWF4KDAsYikpO2I9YS5hYnNvbHV0ZUxlZnQrLjU7dGhpcy53b3Jrc3BhY2VfLlJUTHx8KGIrPWEudmlld1dpZHRoLUJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcy0xKTt0aGlzLnNldFBvc2l0aW9uKGIsYS5hYnNvbHV0ZVRvcCsuNSk7dGhpcy5yZXNpemVDb250ZW50VmVydGljYWwoYSl9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnJlc2l6ZUNvbnRlbnRWZXJ0aWNhbD1mdW5jdGlvbihhKXt0aGlzLnBhaXJffHx0aGlzLnNldFZpc2libGUodGhpcy5zY3JvbGxWaWV3U2l6ZV88YS5jb250ZW50SGVpZ2h0KTt0aGlzLnJhdGlvPXRoaXMuc2Nyb2xsVmlld1NpemVfL2EuY29udGVudEhlaWdodDtpZigtSW5maW5pdHk9PXRoaXMucmF0aW98fEluZmluaXR5PT10aGlzLnJhdGlvfHxpc05hTih0aGlzLnJhdGlvKSl0aGlzLnJhdGlvPTA7dGhpcy5zZXRIYW5kbGVMZW5ndGhfKE1hdGgubWF4KDAsYS52aWV3SGVpZ2h0KnRoaXMucmF0aW8pKTt0aGlzLnNldEhhbmRsZVBvc2l0aW9uKHRoaXMuY29uc3RyYWluSGFuZGxlXygoYS52aWV3VG9wLWEuY29udGVudFRvcCkqdGhpcy5yYXRpbykpfTtcbkJsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5jcmVhdGVEb21fPWZ1bmN0aW9uKGEpe3ZhciBiPVwiYmxvY2tseVNjcm9sbGJhclwiKyh0aGlzLmhvcml6b250YWxfP1wiSG9yaXpvbnRhbFwiOlwiVmVydGljYWxcIik7YSYmKGIrPVwiIFwiK2EpO3RoaXMub3V0ZXJTdmdfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuU1ZHLHtcImNsYXNzXCI6Yn0sbnVsbCk7dGhpcy5zdmdHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHt9LHRoaXMub3V0ZXJTdmdfKTt0aGlzLnN2Z0JhY2tncm91bmRfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7XCJjbGFzc1wiOlwiYmxvY2tseVNjcm9sbGJhckJhY2tncm91bmRcIn0sdGhpcy5zdmdHcm91cF8pO2E9TWF0aC5mbG9vcigoQmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzLTUpLzIpO1xudGhpcy5zdmdIYW5kbGVfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7XCJjbGFzc1wiOlwiYmxvY2tseVNjcm9sbGJhckhhbmRsZVwiLHJ4OmEscnk6YX0sdGhpcy5zdmdHcm91cF8pO3RoaXMud29ya3NwYWNlXy5nZXRUaGVtZU1hbmFnZXIoKS5zdWJzY3JpYmUodGhpcy5zdmdIYW5kbGVfLFwic2Nyb2xsYmFyQ29sb3VyXCIsXCJmaWxsXCIpO3RoaXMud29ya3NwYWNlXy5nZXRUaGVtZU1hbmFnZXIoKS5zdWJzY3JpYmUodGhpcy5zdmdIYW5kbGVfLFwic2Nyb2xsYmFyT3BhY2l0eVwiLFwiZmlsbC1vcGFjaXR5XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmluc2VydEFmdGVyKHRoaXMub3V0ZXJTdmdfLHRoaXMud29ya3NwYWNlXy5nZXRQYXJlbnRTdmcoKSl9O0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5pc1Zpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1Zpc2libGVffTtcbkJsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5zZXRDb250YWluZXJWaXNpYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPWEhPXRoaXMuY29udGFpbmVyVmlzaWJsZV87dGhpcy5jb250YWluZXJWaXNpYmxlXz1hO2ImJnRoaXMudXBkYXRlRGlzcGxheV8oKX07QmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnNldFZpc2libGU9ZnVuY3Rpb24oYSl7dmFyIGI9YSE9dGhpcy5pc1Zpc2libGUoKTtpZih0aGlzLnBhaXJfKXRocm93IEVycm9yKFwiVW5hYmxlIHRvIHRvZ2dsZSB2aXNpYmlsaXR5IG9mIHBhaXJlZCBzY3JvbGxiYXJzLlwiKTt0aGlzLmlzVmlzaWJsZV89YTtiJiZ0aGlzLnVwZGF0ZURpc3BsYXlfKCl9O1xuQmxvY2tseS5TY3JvbGxiYXIucHJvdG90eXBlLnVwZGF0ZURpc3BsYXlfPWZ1bmN0aW9uKCl7dGhpcy5jb250YWluZXJWaXNpYmxlXyYmdGhpcy5pc1Zpc2libGUoKT90aGlzLm91dGVyU3ZnXy5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKTp0aGlzLm91dGVyU3ZnXy5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfTtcbkJsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5vbk1vdXNlRG93bkJhcl89ZnVuY3Rpb24oYSl7dGhpcy53b3Jrc3BhY2VfLm1hcmtGb2N1c2VkKCk7QmxvY2tseS5Ub3VjaC5jbGVhclRvdWNoSWRlbnRpZmllcigpO3RoaXMuY2xlYW5VcF8oKTtpZihCbG9ja2x5LnV0aWxzLmlzUmlnaHRCdXR0b24oYSkpYS5zdG9wUHJvcGFnYXRpb24oKTtlbHNle3ZhciBiPUJsb2NrbHkudXRpbHMubW91c2VUb1N2ZyhhLHRoaXMud29ya3NwYWNlXy5nZXRQYXJlbnRTdmcoKSx0aGlzLndvcmtzcGFjZV8uZ2V0SW52ZXJzZVNjcmVlbkNUTSgpKTtiPXRoaXMuaG9yaXpvbnRhbF8/Yi54OmIueTt2YXIgYz1CbG9ja2x5LnV0aWxzLmdldEluamVjdGlvbkRpdlhZXyh0aGlzLnN2Z0hhbmRsZV8pO2M9dGhpcy5ob3Jpem9udGFsXz9jLng6Yy55O3ZhciBkPXRoaXMuaGFuZGxlUG9zaXRpb25fLGU9Ljk1KnRoaXMuaGFuZGxlTGVuZ3RoXztiPD1jP2QtPWU6Yj49Yyt0aGlzLmhhbmRsZUxlbmd0aF8mJihkKz1cbmUpO3RoaXMuc2V0SGFuZGxlUG9zaXRpb24odGhpcy5jb25zdHJhaW5IYW5kbGVfKGQpKTt0aGlzLm9uU2Nyb2xsXygpO2Euc3RvcFByb3BhZ2F0aW9uKCk7YS5wcmV2ZW50RGVmYXVsdCgpfX07XG5CbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUub25Nb3VzZURvd25IYW5kbGVfPWZ1bmN0aW9uKGEpe3RoaXMud29ya3NwYWNlXy5tYXJrRm9jdXNlZCgpO3RoaXMuY2xlYW5VcF8oKTtCbG9ja2x5LnV0aWxzLmlzUmlnaHRCdXR0b24oYSk/YS5zdG9wUHJvcGFnYXRpb24oKToodGhpcy5zdGFydERyYWdIYW5kbGU9dGhpcy5oYW5kbGVQb3NpdGlvbl8sdGhpcy53b3Jrc3BhY2VfLnNldHVwRHJhZ1N1cmZhY2UoKSx0aGlzLnN0YXJ0RHJhZ01vdXNlXz10aGlzLmhvcml6b250YWxfP2EuY2xpZW50WDphLmNsaWVudFksQmxvY2tseS5TY3JvbGxiYXIub25Nb3VzZVVwV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkb2N1bWVudCxcIm1vdXNldXBcIix0aGlzLHRoaXMub25Nb3VzZVVwSGFuZGxlXyksQmxvY2tseS5TY3JvbGxiYXIub25Nb3VzZU1vdmVXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsdGhpcyx0aGlzLm9uTW91c2VNb3ZlSGFuZGxlXyksXG5hLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSl9O0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5vbk1vdXNlTW92ZUhhbmRsZV89ZnVuY3Rpb24oYSl7dGhpcy5zZXRIYW5kbGVQb3NpdGlvbih0aGlzLmNvbnN0cmFpbkhhbmRsZV8odGhpcy5zdGFydERyYWdIYW5kbGUrKCh0aGlzLmhvcml6b250YWxfP2EuY2xpZW50WDphLmNsaWVudFkpLXRoaXMuc3RhcnREcmFnTW91c2VfKSkpO3RoaXMub25TY3JvbGxfKCl9O0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5vbk1vdXNlVXBIYW5kbGVfPWZ1bmN0aW9uKCl7dGhpcy53b3Jrc3BhY2VfLnJlc2V0RHJhZ1N1cmZhY2UoKTtCbG9ja2x5LlRvdWNoLmNsZWFyVG91Y2hJZGVudGlmaWVyKCk7dGhpcy5jbGVhblVwXygpfTtcbkJsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5jbGVhblVwXz1mdW5jdGlvbigpe0Jsb2NrbHkuaGlkZUNoYWZmKCEwKTtCbG9ja2x5LlNjcm9sbGJhci5vbk1vdXNlVXBXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKEJsb2NrbHkuU2Nyb2xsYmFyLm9uTW91c2VVcFdyYXBwZXJfKSxCbG9ja2x5LlNjcm9sbGJhci5vbk1vdXNlVXBXcmFwcGVyXz1udWxsKTtCbG9ja2x5LlNjcm9sbGJhci5vbk1vdXNlTW92ZVdyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8oQmxvY2tseS5TY3JvbGxiYXIub25Nb3VzZU1vdmVXcmFwcGVyXyksQmxvY2tseS5TY3JvbGxiYXIub25Nb3VzZU1vdmVXcmFwcGVyXz1udWxsKX07XG5CbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuY29uc3RyYWluSGFuZGxlXz1mdW5jdGlvbihhKXtyZXR1cm4gYT0wPj1hfHxpc05hTihhKXx8dGhpcy5zY3JvbGxWaWV3U2l6ZV88dGhpcy5oYW5kbGVMZW5ndGhfPzA6TWF0aC5taW4oYSx0aGlzLnNjcm9sbFZpZXdTaXplXy10aGlzLmhhbmRsZUxlbmd0aF8pfTtCbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUub25TY3JvbGxfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5oYW5kbGVQb3NpdGlvbl8vdGhpcy5zY3JvbGxWaWV3U2l6ZV87aXNOYU4oYSkmJihhPTApO3ZhciBiPXt9O3RoaXMuaG9yaXpvbnRhbF8/Yi54PWE6Yi55PWE7dGhpcy53b3Jrc3BhY2VfLnNldE1ldHJpY3MoYil9O0Jsb2NrbHkuU2Nyb2xsYmFyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSl7dGhpcy5zZXRIYW5kbGVQb3NpdGlvbih0aGlzLmNvbnN0cmFpbkhhbmRsZV8oYSp0aGlzLnJhdGlvKSk7dGhpcy5vblNjcm9sbF8oKX07XG5CbG9ja2x5LlNjcm9sbGJhci5wcm90b3R5cGUuc2V0T3JpZ2luPWZ1bmN0aW9uKGEsYil7dGhpcy5vcmlnaW5fPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYSxiKX07QmxvY2tseS5Ub29sdGlwPXt9O0Jsb2NrbHkuVG9vbHRpcC52aXNpYmxlPSExO0Jsb2NrbHkuVG9vbHRpcC5ibG9ja2VkXz0hMTtCbG9ja2x5LlRvb2x0aXAuTElNSVQ9NTA7QmxvY2tseS5Ub29sdGlwLm1vdXNlT3V0UGlkXz0wO0Jsb2NrbHkuVG9vbHRpcC5zaG93UGlkXz0wO0Jsb2NrbHkuVG9vbHRpcC5sYXN0WF89MDtCbG9ja2x5LlRvb2x0aXAubGFzdFlfPTA7QmxvY2tseS5Ub29sdGlwLmVsZW1lbnRfPW51bGw7QmxvY2tseS5Ub29sdGlwLnBvaXNvbmVkRWxlbWVudF89bnVsbDtCbG9ja2x5LlRvb2x0aXAuT0ZGU0VUX1g9MDtCbG9ja2x5LlRvb2x0aXAuT0ZGU0VUX1k9MTA7QmxvY2tseS5Ub29sdGlwLlJBRElVU19PSz0xMDtCbG9ja2x5LlRvb2x0aXAuSE9WRVJfTVM9NzUwO0Jsb2NrbHkuVG9vbHRpcC5NQVJHSU5TPTU7QmxvY2tseS5Ub29sdGlwLkRJVj1udWxsO1xuQmxvY2tseS5Ub29sdGlwLmdldFRvb2x0aXBPZk9iamVjdD1mdW5jdGlvbihhKXtpZihhPUJsb2NrbHkuVG9vbHRpcC5nZXRUYXJnZXRPYmplY3RfKGEpKXtmb3IoYT1hLnRvb2x0aXA7XCJmdW5jdGlvblwiPT10eXBlb2YgYTspYT1hKCk7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJUb29sdGlwIGZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgc3RyaW5nLlwiKTtyZXR1cm4gYX1yZXR1cm5cIlwifTtCbG9ja2x5LlRvb2x0aXAuZ2V0VGFyZ2V0T2JqZWN0Xz1mdW5jdGlvbihhKXtmb3IoO2EmJmEudG9vbHRpcDspe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRvb2x0aXB8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGEudG9vbHRpcClyZXR1cm4gYTthPWEudG9vbHRpcH1yZXR1cm4gbnVsbH07XG5CbG9ja2x5LlRvb2x0aXAuY3JlYXRlRG9tPWZ1bmN0aW9uKCl7QmxvY2tseS5Ub29sdGlwLkRJVnx8KEJsb2NrbHkuVG9vbHRpcC5ESVY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxCbG9ja2x5LlRvb2x0aXAuRElWLmNsYXNzTmFtZT1cImJsb2NrbHlUb29sdGlwRGl2XCIsKEJsb2NrbHkucGFyZW50Q29udGFpbmVyfHxkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChCbG9ja2x5LlRvb2x0aXAuRElWKSl9O1xuQmxvY2tseS5Ub29sdGlwLmJpbmRNb3VzZUV2ZW50cz1mdW5jdGlvbihhKXthLm1vdXNlT3ZlcldyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50XyhhLFwibW91c2VvdmVyXCIsbnVsbCxCbG9ja2x5LlRvb2x0aXAub25Nb3VzZU92ZXJfKTthLm1vdXNlT3V0V3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRfKGEsXCJtb3VzZW91dFwiLG51bGwsQmxvY2tseS5Ub29sdGlwLm9uTW91c2VPdXRfKTthLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixCbG9ja2x5LlRvb2x0aXAub25Nb3VzZU1vdmVfLCExKX07QmxvY2tseS5Ub29sdGlwLnVuYmluZE1vdXNlRXZlbnRzPWZ1bmN0aW9uKGEpe2EmJihCbG9ja2x5LnVuYmluZEV2ZW50XyhhLm1vdXNlT3ZlcldyYXBwZXJfKSxCbG9ja2x5LnVuYmluZEV2ZW50XyhhLm1vdXNlT3V0V3JhcHBlcl8pLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLEJsb2NrbHkuVG9vbHRpcC5vbk1vdXNlTW92ZV8pKX07XG5CbG9ja2x5LlRvb2x0aXAub25Nb3VzZU92ZXJfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuVG9vbHRpcC5ibG9ja2VkX3x8KGE9QmxvY2tseS5Ub29sdGlwLmdldFRhcmdldE9iamVjdF8oYS5jdXJyZW50VGFyZ2V0KSxCbG9ja2x5LlRvb2x0aXAuZWxlbWVudF8hPWEmJihCbG9ja2x5LlRvb2x0aXAuaGlkZSgpLEJsb2NrbHkuVG9vbHRpcC5wb2lzb25lZEVsZW1lbnRfPW51bGwsQmxvY2tseS5Ub29sdGlwLmVsZW1lbnRfPWEpLGNsZWFyVGltZW91dChCbG9ja2x5LlRvb2x0aXAubW91c2VPdXRQaWRfKSl9O0Jsb2NrbHkuVG9vbHRpcC5vbk1vdXNlT3V0Xz1mdW5jdGlvbihhKXtCbG9ja2x5LlRvb2x0aXAuYmxvY2tlZF98fChCbG9ja2x5LlRvb2x0aXAubW91c2VPdXRQaWRfPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtCbG9ja2x5LlRvb2x0aXAuZWxlbWVudF89bnVsbDtCbG9ja2x5LlRvb2x0aXAucG9pc29uZWRFbGVtZW50Xz1udWxsO0Jsb2NrbHkuVG9vbHRpcC5oaWRlKCl9LDEpLGNsZWFyVGltZW91dChCbG9ja2x5LlRvb2x0aXAuc2hvd1BpZF8pKX07XG5CbG9ja2x5LlRvb2x0aXAub25Nb3VzZU1vdmVfPWZ1bmN0aW9uKGEpe2lmKEJsb2NrbHkuVG9vbHRpcC5lbGVtZW50XyYmQmxvY2tseS5Ub29sdGlwLmVsZW1lbnRfLnRvb2x0aXAmJiFCbG9ja2x5LlRvb2x0aXAuYmxvY2tlZF8paWYoQmxvY2tseS5Ub29sdGlwLnZpc2libGUpe3ZhciBiPUJsb2NrbHkuVG9vbHRpcC5sYXN0WF8tYS5wYWdlWDthPUJsb2NrbHkuVG9vbHRpcC5sYXN0WV8tYS5wYWdlWTtNYXRoLnNxcnQoYipiK2EqYSk+QmxvY2tseS5Ub29sdGlwLlJBRElVU19PSyYmQmxvY2tseS5Ub29sdGlwLmhpZGUoKX1lbHNlIEJsb2NrbHkuVG9vbHRpcC5wb2lzb25lZEVsZW1lbnRfIT1CbG9ja2x5LlRvb2x0aXAuZWxlbWVudF8mJihjbGVhclRpbWVvdXQoQmxvY2tseS5Ub29sdGlwLnNob3dQaWRfKSxCbG9ja2x5LlRvb2x0aXAubGFzdFhfPWEucGFnZVgsQmxvY2tseS5Ub29sdGlwLmxhc3RZXz1hLnBhZ2VZLEJsb2NrbHkuVG9vbHRpcC5zaG93UGlkXz1zZXRUaW1lb3V0KEJsb2NrbHkuVG9vbHRpcC5zaG93XyxcbkJsb2NrbHkuVG9vbHRpcC5IT1ZFUl9NUykpfTtCbG9ja2x5LlRvb2x0aXAuZGlzcG9zZT1mdW5jdGlvbigpe0Jsb2NrbHkuVG9vbHRpcC5lbGVtZW50Xz1udWxsO0Jsb2NrbHkuVG9vbHRpcC5wb2lzb25lZEVsZW1lbnRfPW51bGw7QmxvY2tseS5Ub29sdGlwLmhpZGUoKX07QmxvY2tseS5Ub29sdGlwLmhpZGU9ZnVuY3Rpb24oKXtCbG9ja2x5LlRvb2x0aXAudmlzaWJsZSYmKEJsb2NrbHkuVG9vbHRpcC52aXNpYmxlPSExLEJsb2NrbHkuVG9vbHRpcC5ESVYmJihCbG9ja2x5LlRvb2x0aXAuRElWLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpKTtCbG9ja2x5LlRvb2x0aXAuc2hvd1BpZF8mJmNsZWFyVGltZW91dChCbG9ja2x5LlRvb2x0aXAuc2hvd1BpZF8pfTtCbG9ja2x5LlRvb2x0aXAuYmxvY2s9ZnVuY3Rpb24oKXtCbG9ja2x5LlRvb2x0aXAuaGlkZSgpO0Jsb2NrbHkuVG9vbHRpcC5ibG9ja2VkXz0hMH07XG5CbG9ja2x5LlRvb2x0aXAudW5ibG9jaz1mdW5jdGlvbigpe0Jsb2NrbHkuVG9vbHRpcC5ibG9ja2VkXz0hMX07XG5CbG9ja2x5LlRvb2x0aXAuc2hvd189ZnVuY3Rpb24oKXtpZighQmxvY2tseS5Ub29sdGlwLmJsb2NrZWRfJiYoQmxvY2tseS5Ub29sdGlwLnBvaXNvbmVkRWxlbWVudF89QmxvY2tseS5Ub29sdGlwLmVsZW1lbnRfLEJsb2NrbHkuVG9vbHRpcC5ESVYpKXtCbG9ja2x5LlRvb2x0aXAuRElWLnRleHRDb250ZW50PVwiXCI7dmFyIGE9QmxvY2tseS5Ub29sdGlwLmdldFRvb2x0aXBPZk9iamVjdChCbG9ja2x5LlRvb2x0aXAuZWxlbWVudF8pO2E9QmxvY2tseS51dGlscy5zdHJpbmcud3JhcChhLEJsb2NrbHkuVG9vbHRpcC5MSU1JVCk7YT1hLnNwbGl0KFwiXFxuXCIpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYVtiXSkpO0Jsb2NrbHkuVG9vbHRpcC5ESVYuYXBwZW5kQ2hpbGQoYyl9YT1CbG9ja2x5LlRvb2x0aXAuZWxlbWVudF8uUlRMO2I9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O0Jsb2NrbHkuVG9vbHRpcC5ESVYuc3R5bGUuZGlyZWN0aW9uPWE/XCJydGxcIjpcImx0clwiO0Jsb2NrbHkuVG9vbHRpcC5ESVYuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7QmxvY2tseS5Ub29sdGlwLnZpc2libGU9ITA7dmFyIGQ9QmxvY2tseS5Ub29sdGlwLmxhc3RYXztkPWE/ZC0oQmxvY2tseS5Ub29sdGlwLk9GRlNFVF9YK0Jsb2NrbHkuVG9vbHRpcC5ESVYub2Zmc2V0V2lkdGgpOmQrQmxvY2tseS5Ub29sdGlwLk9GRlNFVF9YO3ZhciBlPUJsb2NrbHkuVG9vbHRpcC5sYXN0WV8rQmxvY2tseS5Ub29sdGlwLk9GRlNFVF9ZO2UrQmxvY2tseS5Ub29sdGlwLkRJVi5vZmZzZXRIZWlnaHQ+Yyt3aW5kb3cuc2Nyb2xsWSYmKGUtPUJsb2NrbHkuVG9vbHRpcC5ESVYub2Zmc2V0SGVpZ2h0KzIqQmxvY2tseS5Ub29sdGlwLk9GRlNFVF9ZKTthP2Q9TWF0aC5tYXgoQmxvY2tseS5Ub29sdGlwLk1BUkdJTlMtd2luZG93LnNjcm9sbFgsXG5kKTpkK0Jsb2NrbHkuVG9vbHRpcC5ESVYub2Zmc2V0V2lkdGg+Yit3aW5kb3cuc2Nyb2xsWC0yKkJsb2NrbHkuVG9vbHRpcC5NQVJHSU5TJiYoZD1iLUJsb2NrbHkuVG9vbHRpcC5ESVYub2Zmc2V0V2lkdGgtMipCbG9ja2x5LlRvb2x0aXAuTUFSR0lOUyk7QmxvY2tseS5Ub29sdGlwLkRJVi5zdHlsZS50b3A9ZStcInB4XCI7QmxvY2tseS5Ub29sdGlwLkRJVi5zdHlsZS5sZWZ0PWQrXCJweFwifX07QmxvY2tseS5Xb3Jrc3BhY2VEcmFnU3VyZmFjZVN2Zz1mdW5jdGlvbihhKXt0aGlzLmNvbnRhaW5lcl89YTt0aGlzLmNyZWF0ZURvbSgpfTtCbG9ja2x5LldvcmtzcGFjZURyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS5TVkdfPW51bGw7QmxvY2tseS5Xb3Jrc3BhY2VEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuY29udGFpbmVyXz1udWxsO1xuQmxvY2tseS5Xb3Jrc3BhY2VEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuY3JlYXRlRG9tPWZ1bmN0aW9uKCl7dGhpcy5TVkdffHwodGhpcy5TVkdfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuU1ZHLHt4bWxuczpCbG9ja2x5LnV0aWxzLmRvbS5TVkdfTlMsXCJ4bWxuczpodG1sXCI6QmxvY2tseS51dGlscy5kb20uSFRNTF9OUyxcInhtbG5zOnhsaW5rXCI6QmxvY2tseS51dGlscy5kb20uWExJTktfTlMsdmVyc2lvbjpcIjEuMVwiLFwiY2xhc3NcIjpcImJsb2NrbHlXc0RyYWdTdXJmYWNlIGJsb2NrbHlPdmVyZmxvd1Zpc2libGVcIn0sbnVsbCksdGhpcy5jb250YWluZXJfLmFwcGVuZENoaWxkKHRoaXMuU1ZHXykpfTtcbkJsb2NrbHkuV29ya3NwYWNlRHJhZ1N1cmZhY2VTdmcucHJvdG90eXBlLnRyYW5zbGF0ZVN1cmZhY2U9ZnVuY3Rpb24oYSxiKXthPWEudG9GaXhlZCgwKTtiPWIudG9GaXhlZCgwKTt0aGlzLlNWR18uc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7QmxvY2tseS51dGlscy5kb20uc2V0Q3NzVHJhbnNmb3JtKHRoaXMuU1ZHXyxcInRyYW5zbGF0ZTNkKFwiK2ErXCJweCwgXCIrYitcInB4LCAwcHgpXCIpfTtCbG9ja2x5LldvcmtzcGFjZURyYWdTdXJmYWNlU3ZnLnByb3RvdHlwZS5nZXRTdXJmYWNlVHJhbnNsYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS51dGlscy5nZXRSZWxhdGl2ZVhZKHRoaXMuU1ZHXyl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuY2xlYXJBbmRIaWRlPWZ1bmN0aW9uKGEpe2lmKCFhKXRocm93IEVycm9yKFwiQ291bGRuJ3QgY2xlYXIgYW5kIGhpZGUgdGhlIGRyYWcgc3VyZmFjZTogbWlzc2luZyBuZXcgc3VyZmFjZS5cIik7dmFyIGI9dGhpcy5TVkdfLmNoaWxkTm9kZXNbMF0sYz10aGlzLlNWR18uY2hpbGROb2Rlc1sxXTtpZighKGImJmMmJkJsb2NrbHkudXRpbHMuZG9tLmhhc0NsYXNzKGIsXCJibG9ja2x5QmxvY2tDYW52YXNcIikmJkJsb2NrbHkudXRpbHMuZG9tLmhhc0NsYXNzKGMsXCJibG9ja2x5QnViYmxlQ2FudmFzXCIpKSl0aHJvdyBFcnJvcihcIkNvdWxkbid0IGNsZWFyIGFuZCBoaWRlIHRoZSBkcmFnIHN1cmZhY2UuIEEgbm9kZSB3YXMgbWlzc2luZy5cIik7bnVsbCE9dGhpcy5wcmV2aW91c1NpYmxpbmdfP0Jsb2NrbHkudXRpbHMuZG9tLmluc2VydEFmdGVyKGIsdGhpcy5wcmV2aW91c1NpYmxpbmdfKTphLmluc2VydEJlZm9yZShiLGEuZmlyc3RDaGlsZCk7XG5CbG9ja2x5LnV0aWxzLmRvbS5pbnNlcnRBZnRlcihjLGIpO3RoaXMuU1ZHXy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2lmKHRoaXMuU1ZHXy5jaGlsZE5vZGVzLmxlbmd0aCl0aHJvdyBFcnJvcihcIkRyYWcgc3VyZmFjZSB3YXMgbm90IGNsZWFyZWQuXCIpO0Jsb2NrbHkudXRpbHMuZG9tLnNldENzc1RyYW5zZm9ybSh0aGlzLlNWR18sXCJcIik7dGhpcy5wcmV2aW91c1NpYmxpbmdfPW51bGx9O1xuQmxvY2tseS5Xb3Jrc3BhY2VEcmFnU3VyZmFjZVN2Zy5wcm90b3R5cGUuc2V0Q29udGVudHNBbmRTaG93PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtpZih0aGlzLlNWR18uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgRXJyb3IoXCJBbHJlYWR5IGRyYWdnaW5nIGEgYmxvY2suXCIpO3RoaXMucHJldmlvdXNTaWJsaW5nXz1jO2Euc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoMCwgMCkgc2NhbGUoXCIrZitcIilcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZSgwLCAwKSBzY2FsZShcIitmK1wiKVwiKTt0aGlzLlNWR18uc2V0QXR0cmlidXRlKFwid2lkdGhcIixkKTt0aGlzLlNWR18uc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsZSk7dGhpcy5TVkdfLmFwcGVuZENoaWxkKGEpO3RoaXMuU1ZHXy5hcHBlbmRDaGlsZChiKTt0aGlzLlNWR18uc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9O0Jsb2NrbHkuQVNUTm9kZT1mdW5jdGlvbihhLGIsYyl7aWYoIWIpdGhyb3cgRXJyb3IoXCJDYW5ub3QgY3JlYXRlIGEgbm9kZSB3aXRob3V0IGEgbG9jYXRpb24uXCIpO3RoaXMudHlwZV89YTt0aGlzLmlzQ29ubmVjdGlvbl89QmxvY2tseS5BU1ROb2RlLmlzQ29ubmVjdGlvblR5cGVfKGEpO3RoaXMubG9jYXRpb25fPWI7dGhpcy53c0Nvb3JkaW5hdGVfPW51bGw7dGhpcy5wcm9jZXNzUGFyYW1zXyhjfHxudWxsKX07QmxvY2tseS5BU1ROb2RlLnR5cGVzPXtGSUVMRDpcImZpZWxkXCIsQkxPQ0s6XCJibG9ja1wiLElOUFVUOlwiaW5wdXRcIixPVVRQVVQ6XCJvdXRwdXRcIixORVhUOlwibmV4dFwiLFBSRVZJT1VTOlwicHJldmlvdXNcIixTVEFDSzpcInN0YWNrXCIsV09SS1NQQUNFOlwid29ya3NwYWNlXCJ9O0Jsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTPSExO0Jsb2NrbHkuQVNUTm9kZS5ERUZBVUxUX09GRlNFVF9ZPS0yMDtCbG9ja2x5LkFTVE5vZGUuaXNDb25uZWN0aW9uVHlwZV89ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLlBSRVZJT1VTOmNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFQ6Y2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuSU5QVVQ6Y2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuT1VUUFVUOnJldHVybiEwfXJldHVybiExfTtcbkJsb2NrbHkuQVNUTm9kZS5jcmVhdGVGaWVsZE5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bmV3IEJsb2NrbHkuQVNUTm9kZShCbG9ja2x5LkFTVE5vZGUudHlwZXMuRklFTEQsYSk6bnVsbH07XG5CbG9ja2x5LkFTVE5vZGUuY3JlYXRlQ29ubmVjdGlvbk5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFfHxhLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQmJmEuZ2V0UGFyZW50SW5wdXQoKT9CbG9ja2x5LkFTVE5vZGUuY3JlYXRlSW5wdXROb2RlKGEuZ2V0UGFyZW50SW5wdXQoKSk6YS50eXBlPT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UP25ldyBCbG9ja2x5LkFTVE5vZGUoQmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFQsYSk6YS50eXBlPT1CbG9ja2x5Lk9VVFBVVF9WQUxVRT9uZXcgQmxvY2tseS5BU1ROb2RlKEJsb2NrbHkuQVNUTm9kZS50eXBlcy5PVVRQVVQsYSk6YS50eXBlPT1CbG9ja2x5LlBSRVZJT1VTX1NUQVRFTUVOVD9uZXcgQmxvY2tseS5BU1ROb2RlKEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUyxhKTpudWxsOm51bGx9O1xuQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUlucHV0Tm9kZT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5jb25uZWN0aW9uP25ldyBCbG9ja2x5LkFTVE5vZGUoQmxvY2tseS5BU1ROb2RlLnR5cGVzLklOUFVULGEuY29ubmVjdGlvbik6bnVsbH07QmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZT1mdW5jdGlvbihhKXtyZXR1cm4gYT9uZXcgQmxvY2tseS5BU1ROb2RlKEJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSyxhKTpudWxsfTtCbG9ja2x5LkFTVE5vZGUuY3JlYXRlU3RhY2tOb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBhP25ldyBCbG9ja2x5LkFTVE5vZGUoQmxvY2tseS5BU1ROb2RlLnR5cGVzLlNUQUNLLGEpOm51bGx9O0Jsb2NrbHkuQVNUTm9kZS5jcmVhdGVXb3Jrc3BhY2VOb2RlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGImJmE/bmV3IEJsb2NrbHkuQVNUTm9kZShCbG9ja2x5LkFTVE5vZGUudHlwZXMuV09SS1NQQUNFLGEse3dzQ29vcmRpbmF0ZTpifSk6bnVsbH07XG5CbG9ja2x5LkFTVE5vZGUuY3JlYXRlVG9wTm9kZT1mdW5jdGlvbihhKXt2YXIgYj1hLnByZXZpb3VzQ29ubmVjdGlvbnx8YS5vdXRwdXRDb25uZWN0aW9uO3JldHVybiBiP0Jsb2NrbHkuQVNUTm9kZS5jcmVhdGVDb25uZWN0aW9uTm9kZShiKTpCbG9ja2x5LkFTVE5vZGUuY3JlYXRlQmxvY2tOb2RlKGEpfTtCbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLnByb2Nlc3NQYXJhbXNfPWZ1bmN0aW9uKGEpe2EmJmEud3NDb29yZGluYXRlJiYodGhpcy53c0Nvb3JkaW5hdGVfPWEud3NDb29yZGluYXRlKX07QmxvY2tseS5BU1ROb2RlLnByb3RvdHlwZS5nZXRMb2NhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uX307QmxvY2tseS5BU1ROb2RlLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZV99O0Jsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuZ2V0V3NDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3NDb29yZGluYXRlX307XG5CbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLmlzQ29ubmVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ29ubmVjdGlvbl99O0Jsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuZmluZE5leHRGb3JJbnB1dF89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvY2F0aW9uXy5nZXRQYXJlbnRJbnB1dCgpLGI9YS5nZXRTb3VyY2VCbG9jaygpO2E9Yi5pbnB1dExpc3QuaW5kZXhPZihhKSsxO2Zvcih2YXIgYztjPWIuaW5wdXRMaXN0W2FdO2ErKyl7Zm9yKHZhciBkPWMuZmllbGRSb3csZT0wLGY7Zj1kW2VdO2UrKylpZihmLmlzQ2xpY2thYmxlKCl8fEJsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTKXJldHVybiBCbG9ja2x5LkFTVE5vZGUuY3JlYXRlRmllbGROb2RlKGYpO2lmKGMuY29ubmVjdGlvbilyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUlucHV0Tm9kZShjKX1yZXR1cm4gbnVsbH07XG5CbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLmZpbmROZXh0Rm9yRmllbGRfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2NhdGlvbl8sYj1hLmdldFBhcmVudElucHV0KCksYz1hLmdldFNvdXJjZUJsb2NrKCksZD1jLmlucHV0TGlzdC5pbmRleE9mKGIpO2ZvcihhPWIuZmllbGRSb3cuaW5kZXhPZihhKSsxO2I9Yy5pbnB1dExpc3RbZF07ZCsrKXtmb3IodmFyIGU9Yi5maWVsZFJvdzthPGUubGVuZ3RoOyl7aWYoZVthXS5pc0NsaWNrYWJsZSgpfHxCbG9ja2x5LkFTVE5vZGUuTkFWSUdBVEVfQUxMX0ZJRUxEUylyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUZpZWxkTm9kZShlW2FdKTthKyt9YT0wO2lmKGIuY29ubmVjdGlvbilyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUlucHV0Tm9kZShiKX1yZXR1cm4gbnVsbH07XG5CbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLmZpbmRQcmV2Rm9ySW5wdXRfPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubG9jYXRpb25fLmdldFBhcmVudElucHV0KCksYj1hLmdldFNvdXJjZUJsb2NrKCksYz1iLmlucHV0TGlzdC5pbmRleE9mKGEpLGQ7ZD1iLmlucHV0TGlzdFtjXTtjLS0pe2lmKGQuY29ubmVjdGlvbiYmZCE9PWEpcmV0dXJuIEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVJbnB1dE5vZGUoZCk7ZD1kLmZpZWxkUm93O2Zvcih2YXIgZT1kLmxlbmd0aC0xLGY7Zj1kW2VdO2UtLSlpZihmLmlzQ2xpY2thYmxlKCl8fEJsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTKXJldHVybiBCbG9ja2x5LkFTVE5vZGUuY3JlYXRlRmllbGROb2RlKGYpfXJldHVybiBudWxsfTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuZmluZFByZXZGb3JGaWVsZF89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvY2F0aW9uXyxiPWEuZ2V0UGFyZW50SW5wdXQoKSxjPWEuZ2V0U291cmNlQmxvY2soKSxkPWMuaW5wdXRMaXN0LmluZGV4T2YoYik7YT1iLmZpZWxkUm93LmluZGV4T2YoYSktMTtmb3IodmFyIGU7ZT1jLmlucHV0TGlzdFtkXTtkLS0pe2lmKGUuY29ubmVjdGlvbiYmZSE9PWIpcmV0dXJuIEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVJbnB1dE5vZGUoZSk7Zm9yKGU9ZS5maWVsZFJvdzstMTxhOyl7aWYoZVthXS5pc0NsaWNrYWJsZSgpfHxCbG9ja2x5LkFTVE5vZGUuTkFWSUdBVEVfQUxMX0ZJRUxEUylyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUZpZWxkTm9kZShlW2FdKTthLS19MDw9ZC0xJiYoYT1jLmlucHV0TGlzdFtkLTFdLmZpZWxkUm93Lmxlbmd0aC0xKX1yZXR1cm4gbnVsbH07XG5CbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLm5hdmlnYXRlQmV0d2VlblN0YWNrc189ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRMb2NhdGlvbigpO2IgaW5zdGFuY2VvZiBCbG9ja2x5LkJsb2NrfHwoYj1iLmdldFNvdXJjZUJsb2NrKCkpO2lmKCFifHwhYi53b3Jrc3BhY2UpcmV0dXJuIG51bGw7dmFyIGM9Yi5nZXRSb290QmxvY2soKTtiPWMud29ya3NwYWNlLmdldFRvcEJsb2NrcyghMCk7Zm9yKHZhciBkPTAsZTtlPWJbZF07ZCsrKWlmKGMuaWQ9PWUuaWQpcmV0dXJuIGE9ZCsoYT8xOi0xKSwtMT09YXx8YT09Yi5sZW5ndGg/bnVsbDpCbG9ja2x5LkFTVE5vZGUuY3JlYXRlU3RhY2tOb2RlKGJbYV0pO3Rocm93IEVycm9yKFwiQ291bGRuJ3QgZmluZCBcIisoYT9cIm5leHRcIjpcInByZXZpb3VzXCIpK1wiIHN0YWNrPyFcIik7fTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuZmluZFRvcEFTVE5vZGVGb3JCbG9ja189ZnVuY3Rpb24oYSl7dmFyIGI9YS5wcmV2aW91c0Nvbm5lY3Rpb258fGEub3V0cHV0Q29ubmVjdGlvbjtyZXR1cm4gYj9CbG9ja2x5LkFTVE5vZGUuY3JlYXRlQ29ubmVjdGlvbk5vZGUoYik6QmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZShhKX07QmxvY2tseS5BU1ROb2RlLnByb3RvdHlwZS5nZXRPdXRBc3ROb2RlRm9yQmxvY2tfPWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBudWxsO2E9YS5nZXRUb3BTdGFja0Jsb2NrKCk7dmFyIGI9YS5wcmV2aW91c0Nvbm5lY3Rpb258fGEub3V0cHV0Q29ubmVjdGlvbjtyZXR1cm4gYiYmYi50YXJnZXRDb25uZWN0aW9uJiZiLnRhcmdldENvbm5lY3Rpb24uZ2V0UGFyZW50SW5wdXQoKT9CbG9ja2x5LkFTVE5vZGUuY3JlYXRlSW5wdXROb2RlKGIudGFyZ2V0Q29ubmVjdGlvbi5nZXRQYXJlbnRJbnB1dCgpKTpCbG9ja2x5LkFTVE5vZGUuY3JlYXRlU3RhY2tOb2RlKGEpfTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuZmluZEZpcnN0RmllbGRPcklucHV0Xz1mdW5jdGlvbihhKXthPWEuaW5wdXRMaXN0O2Zvcih2YXIgYj0wLGM7Yz1hW2JdO2IrKyl7Zm9yKHZhciBkPWMuZmllbGRSb3csZT0wLGY7Zj1kW2VdO2UrKylpZihmLmlzQ2xpY2thYmxlKCl8fEJsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTKXJldHVybiBCbG9ja2x5LkFTVE5vZGUuY3JlYXRlRmllbGROb2RlKGYpO2lmKGMuY29ubmVjdGlvbilyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUlucHV0Tm9kZShjKX1yZXR1cm4gbnVsbH07XG5CbG9ja2x5LkFTVE5vZGUucHJvdG90eXBlLmdldFNvdXJjZUJsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VHlwZSgpPT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLkJMT0NLP3RoaXMuZ2V0TG9jYXRpb24oKTp0aGlzLmdldFR5cGUoKT09PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSz90aGlzLmdldExvY2F0aW9uKCk6dGhpcy5nZXRUeXBlKCk9PT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuV09SS1NQQUNFP251bGw6dGhpcy5nZXRMb2NhdGlvbigpLmdldFNvdXJjZUJsb2NrKCl9O1xuQmxvY2tseS5BU1ROb2RlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMudHlwZV8pe2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLlNUQUNLOnJldHVybiB0aGlzLm5hdmlnYXRlQmV0d2VlblN0YWNrc18oITApO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk9VVFBVVDp2YXIgYT10aGlzLmxvY2F0aW9uXztyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZShhLmdldFNvdXJjZUJsb2NrKCkpO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEOnJldHVybiB0aGlzLmZpbmROZXh0Rm9yRmllbGRfKCk7Y2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuSU5QVVQ6cmV0dXJuIHRoaXMuZmluZE5leHRGb3JJbnB1dF8oKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSzpyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUNvbm5lY3Rpb25Ob2RlKHRoaXMubG9jYXRpb25fLm5leHRDb25uZWN0aW9uKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUzpyZXR1cm4gYT1cbnRoaXMubG9jYXRpb25fLEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVCbG9ja05vZGUoYS5nZXRTb3VyY2VCbG9jaygpKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5ORVhUOnJldHVybiBhPXRoaXMubG9jYXRpb25fLEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVDb25uZWN0aW9uTm9kZShhLnRhcmdldENvbm5lY3Rpb24pfXJldHVybiBudWxsfTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUuaW49ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy50eXBlXyl7Y2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuV09SS1NQQUNFOnZhciBhPXRoaXMubG9jYXRpb25fLmdldFRvcEJsb2NrcyghMCk7aWYoMDxhLmxlbmd0aClyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZVN0YWNrTm9kZShhWzBdKTticmVhaztjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSzpyZXR1cm4gYT10aGlzLmxvY2F0aW9uXyx0aGlzLmZpbmRUb3BBU1ROb2RlRm9yQmxvY2tfKGEpO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkJMT0NLOnJldHVybiBhPXRoaXMubG9jYXRpb25fLHRoaXMuZmluZEZpcnN0RmllbGRPcklucHV0XyhhKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5JTlBVVDpyZXR1cm4gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUNvbm5lY3Rpb25Ob2RlKHRoaXMubG9jYXRpb25fLnRhcmdldENvbm5lY3Rpb24pfXJldHVybiBudWxsfTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnR5cGVfKXtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSzpyZXR1cm4gdGhpcy5uYXZpZ2F0ZUJldHdlZW5TdGFja3NfKCExKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5GSUVMRDpyZXR1cm4gdGhpcy5maW5kUHJldkZvckZpZWxkXygpO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLklOUFVUOnJldHVybiB0aGlzLmZpbmRQcmV2Rm9ySW5wdXRfKCk7Y2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0s6dmFyIGE9dGhpcy5sb2NhdGlvbl87cmV0dXJuIEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVDb25uZWN0aW9uTm9kZShhLnByZXZpb3VzQ29ubmVjdGlvbnx8YS5vdXRwdXRDb25uZWN0aW9uKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUzphPXRoaXMubG9jYXRpb25fO2lmKChhPWEudGFyZ2V0Q29ubmVjdGlvbikmJiFhLmdldFBhcmVudElucHV0KCkpcmV0dXJuIEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVDb25uZWN0aW9uTm9kZShhKTtcbmJyZWFrO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFQ6cmV0dXJuIGE9dGhpcy5sb2NhdGlvbl8sQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZShhLmdldFNvdXJjZUJsb2NrKCkpfXJldHVybiBudWxsfTtcbkJsb2NrbHkuQVNUTm9kZS5wcm90b3R5cGUub3V0PWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMudHlwZV8pe2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLlNUQUNLOnZhciBhPXRoaXMubG9jYXRpb25fLGI9YS5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCk7Yj1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGIueCxiLnkrQmxvY2tseS5BU1ROb2RlLkRFRkFVTFRfT0ZGU0VUX1kpO3JldHVybiBCbG9ja2x5LkFTVE5vZGUuY3JlYXRlV29ya3NwYWNlTm9kZShhLndvcmtzcGFjZSxiKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5PVVRQVVQ6cmV0dXJuIGE9dGhpcy5sb2NhdGlvbl8sKGI9YS50YXJnZXRDb25uZWN0aW9uKT9CbG9ja2x5LkFTVE5vZGUuY3JlYXRlQ29ubmVjdGlvbk5vZGUoYik6QmxvY2tseS5BU1ROb2RlLmNyZWF0ZVN0YWNrTm9kZShhLmdldFNvdXJjZUJsb2NrKCkpO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEOnJldHVybiBCbG9ja2x5LkFTVE5vZGUuY3JlYXRlQmxvY2tOb2RlKHRoaXMubG9jYXRpb25fLmdldFNvdXJjZUJsb2NrKCkpO1xuY2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuSU5QVVQ6cmV0dXJuIGE9dGhpcy5sb2NhdGlvbl8sQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZShhLmdldFNvdXJjZUJsb2NrKCkpO2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkJMT0NLOnJldHVybiBhPXRoaXMubG9jYXRpb25fLHRoaXMuZ2V0T3V0QXN0Tm9kZUZvckJsb2NrXyhhKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUzpyZXR1cm4gYT10aGlzLmxvY2F0aW9uXyx0aGlzLmdldE91dEFzdE5vZGVGb3JCbG9ja18oYS5nZXRTb3VyY2VCbG9jaygpKTtjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5ORVhUOnJldHVybiBhPXRoaXMubG9jYXRpb25fLHRoaXMuZ2V0T3V0QXN0Tm9kZUZvckJsb2NrXyhhLmdldFNvdXJjZUJsb2NrKCkpfXJldHVybiBudWxsfTtCbG9ja2x5LkJsb2Nrcz1PYmplY3QuY3JlYXRlKG51bGwpO0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb249e307QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuPWZ1bmN0aW9uKGEsYixjLGQpe2E9YStcIiB3YXMgZGVwcmVjYXRlZCBvbiBcIitiK1wiIGFuZCB3aWxsIGJlIGRlbGV0ZWQgb24gXCIrYytcIi5cIjtkJiYoYSs9XCJcXG5Vc2UgXCIrZCtcIiBpbnN0ZWFkLlwiKTtjb25zb2xlLndhcm4oYSl9O0Jsb2NrbHkuQ29ubmVjdGlvbj1mdW5jdGlvbihhLGIpe3RoaXMuc291cmNlQmxvY2tfPWE7dGhpcy50eXBlPWJ9O0Jsb2NrbHkuQ29ubmVjdGlvbi5DQU5fQ09OTkVDVD0wO0Jsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fU0VMRl9DT05ORUNUSU9OPTE7QmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9XUk9OR19UWVBFPTI7QmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9UQVJHRVRfTlVMTD0zO0Jsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fQ0hFQ0tTX0ZBSUxFRD00O0Jsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fRElGRkVSRU5UX1dPUktTUEFDRVM9NTtCbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX1NIQURPV19QQVJFTlQ9NjtCbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX0RSQUdfQ0hFQ0tTX0ZBSUxFRD03O0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUudGFyZ2V0Q29ubmVjdGlvbj1udWxsO0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuZGlzcG9zZWQ9ITE7XG5CbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmNoZWNrXz1udWxsO0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuc2hhZG93RG9tXz1udWxsO0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUueD0wO0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUueT0wO1xuQmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS5jb25uZWN0Xz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5nZXRTb3VyY2VCbG9jaygpLGQ9YS5nZXRTb3VyY2VCbG9jaygpO2EuaXNDb25uZWN0ZWQoKSYmYS5kaXNjb25uZWN0KCk7aWYoYi5pc0Nvbm5lY3RlZCgpKXt2YXIgZT1iLnRhcmdldEJsb2NrKCksZj1iLmdldFNoYWRvd0RvbSgpO2Iuc2hhZG93RG9tXz1udWxsO2lmKGUuaXNTaGFkb3coKSlmPUJsb2NrbHkuWG1sLmJsb2NrVG9Eb20oZSksZS5kaXNwb3NlKCExKSxlPW51bGw7ZWxzZSBpZihiLnR5cGU9PUJsb2NrbHkuSU5QVVRfVkFMVUUpe2lmKCFlLm91dHB1dENvbm5lY3Rpb24pdGhyb3cgRXJyb3IoXCJPcnBoYW4gYmxvY2sgZG9lcyBub3QgaGF2ZSBhbiBvdXRwdXQgY29ubmVjdGlvbi5cIik7dmFyIGc9QmxvY2tseS5Db25uZWN0aW9uLmxhc3RDb25uZWN0aW9uSW5Sb3coZCxlKTtnJiYoZS5vdXRwdXRDb25uZWN0aW9uLmNvbm5lY3QoZyksZT1udWxsKX1lbHNlIGlmKGIudHlwZT09XG5CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UKXtpZighZS5wcmV2aW91c0Nvbm5lY3Rpb24pdGhyb3cgRXJyb3IoXCJPcnBoYW4gYmxvY2sgZG9lcyBub3QgaGF2ZSBhIHByZXZpb3VzIGNvbm5lY3Rpb24uXCIpO2ZvcihnPWQ7Zy5uZXh0Q29ubmVjdGlvbjspe3ZhciBoPWcuZ2V0TmV4dEJsb2NrKCk7aWYoaCYmIWguaXNTaGFkb3coKSlnPWg7ZWxzZXtlLndvcmtzcGFjZS5jb25uZWN0aW9uQ2hlY2tlci5jYW5Db25uZWN0KGUucHJldmlvdXNDb25uZWN0aW9uLGcubmV4dENvbm5lY3Rpb24sITEpJiYoZy5uZXh0Q29ubmVjdGlvbi5jb25uZWN0KGUucHJldmlvdXNDb25uZWN0aW9uKSxlPW51bGwpO2JyZWFrfX19aWYoZSYmKGIuZGlzY29ubmVjdCgpLEJsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG8pKXt2YXIgaz1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihlLndvcmtzcGFjZSYmIWUuZ2V0UGFyZW50KCkpe0Jsb2NrbHkuRXZlbnRzLnNldEdyb3VwKGspO1xuaWYoZS5vdXRwdXRDb25uZWN0aW9uKWUub3V0cHV0Q29ubmVjdGlvbi5vbkZhaWxlZENvbm5lY3QoYik7ZWxzZSBpZihlLnByZXZpb3VzQ29ubmVjdGlvbillLnByZXZpb3VzQ29ubmVjdGlvbi5vbkZhaWxlZENvbm5lY3QoYik7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpfX0sQmxvY2tseS5CVU1QX0RFTEFZKX1iLnNoYWRvd0RvbV89Zn12YXIgbDtCbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSYmKGw9bmV3IEJsb2NrbHkuRXZlbnRzLkJsb2NrTW92ZShkKSk7QmxvY2tseS5Db25uZWN0aW9uLmNvbm5lY3RSZWNpcHJvY2FsbHlfKGIsYSk7ZC5zZXRQYXJlbnQoYyk7bCYmKGwucmVjb3JkTmV3KCksQmxvY2tseS5FdmVudHMuZmlyZShsKSl9O1xuQmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0Nvbm5lY3RlZCgpKXt0aGlzLnNldFNoYWRvd0RvbShudWxsKTt2YXIgYT10aGlzLnRhcmdldEJsb2NrKCk7YSYmYS51bnBsdWcoKX10aGlzLmRpc3Bvc2VkPSEwfTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNvdXJjZUJsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlQmxvY2tffTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmlzU3VwZXJpb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFfHx0aGlzLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlR9O0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMudGFyZ2V0Q29ubmVjdGlvbn07XG5CbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmNhbkNvbm5lY3RXaXRoUmVhc29uPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkNvbm5lY3Rpb24ucHJvdG90eXBlLmNhbkNvbm5lY3RXaXRoUmVhc29uXCIsXCJKdWx5IDIwMjBcIixcIkp1bHkgMjAyMVwiLFwidGhlIHdvcmtzcGFjZSdzIGNvbm5lY3Rpb24gY2hlY2tlclwiKTtyZXR1cm4gdGhpcy5nZXRDb25uZWN0aW9uQ2hlY2tlcigpLmNhbkNvbm5lY3RXaXRoUmVhc29uKHRoaXMsYSwhMSl9O1xuQmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS5jaGVja0Nvbm5lY3Rpb249ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiQ29ubmVjdGlvbi5wcm90b3R5cGUuY2hlY2tDb25uZWN0aW9uXCIsXCJKdWx5IDIwMjBcIixcIkp1bHkgMjAyMVwiLFwidGhlIHdvcmtzcGFjZSdzIGNvbm5lY3Rpb24gY2hlY2tlclwiKTt2YXIgYj10aGlzLmdldENvbm5lY3Rpb25DaGVja2VyKCksYz1iLmNhbkNvbm5lY3RXaXRoUmVhc29uKHRoaXMsYSwhMSk7aWYoYyE9QmxvY2tseS5Db25uZWN0aW9uLkNBTl9DT05ORUNUKXRocm93IEVycm9yKGIuZ2V0RXJyb3JNZXNzYWdlKGMsdGhpcyxhKSk7fTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmdldENvbm5lY3Rpb25DaGVja2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5jb25uZWN0aW9uQ2hlY2tlcn07XG5CbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmlzQ29ubmVjdGlvbkFsbG93ZWQ9ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiQ29ubmVjdGlvbi5wcm90b3R5cGUuaXNDb25uZWN0aW9uQWxsb3dlZFwiLFwiSnVseSAyMDIwXCIsXCJKdWx5IDIwMjFcIixcInRoZSB3b3Jrc3BhY2UncyBjb25uZWN0aW9uIGNoZWNrZXJcIik7cmV0dXJuIHRoaXMuZ2V0Q29ubmVjdGlvbkNoZWNrZXIoKS5jYW5Db25uZWN0KHRoaXMsYSwhMCl9O0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUub25GYWlsZWRDb25uZWN0PWZ1bmN0aW9uKGEpe307XG5CbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oYSl7aWYodGhpcy50YXJnZXRDb25uZWN0aW9uIT1hJiZ0aGlzLmdldENvbm5lY3Rpb25DaGVja2VyKCkuY2FuQ29ubmVjdCh0aGlzLGEsITEpKXt2YXIgYj1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO2J8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTt0aGlzLmlzU3VwZXJpb3IoKT90aGlzLmNvbm5lY3RfKGEpOmEuY29ubmVjdF8odGhpcyk7Ynx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpfX07QmxvY2tseS5Db25uZWN0aW9uLmNvbm5lY3RSZWNpcHJvY2FsbHlfPWZ1bmN0aW9uKGEsYil7aWYoIWF8fCFiKXRocm93IEVycm9yKFwiQ2Fubm90IGNvbm5lY3QgbnVsbCBjb25uZWN0aW9ucy5cIik7YS50YXJnZXRDb25uZWN0aW9uPWI7Yi50YXJnZXRDb25uZWN0aW9uPWF9O1xuQmxvY2tseS5Db25uZWN0aW9uLnNpbmdsZUNvbm5lY3Rpb25fPWZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtiPWIub3V0cHV0Q29ubmVjdGlvbjtmb3IodmFyIGQ9MDtkPGEuaW5wdXRMaXN0Lmxlbmd0aDtkKyspe3ZhciBlPWEuaW5wdXRMaXN0W2RdLmNvbm5lY3Rpb24sZj1iLmdldENvbm5lY3Rpb25DaGVja2VyKCk7aWYoZSYmZS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFJiZmLmNhbkNvbm5lY3QoYixlLCExKSl7aWYoYylyZXR1cm4gbnVsbDtjPWV9fXJldHVybiBjfTtCbG9ja2x5LkNvbm5lY3Rpb24ubGFzdENvbm5lY3Rpb25JblJvdz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYztjPUJsb2NrbHkuQ29ubmVjdGlvbi5zaW5nbGVDb25uZWN0aW9uXyhhLGIpOylpZihhPWMudGFyZ2V0QmxvY2soKSwhYXx8YS5pc1NoYWRvdygpKXJldHVybiBjO3JldHVybiBudWxsfTtcbkJsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGFyZ2V0Q29ubmVjdGlvbjtpZighYSl0aHJvdyBFcnJvcihcIlNvdXJjZSBjb25uZWN0aW9uIG5vdCBjb25uZWN0ZWQuXCIpO2lmKGEudGFyZ2V0Q29ubmVjdGlvbiE9dGhpcyl0aHJvdyBFcnJvcihcIlRhcmdldCBjb25uZWN0aW9uIG5vdCBjb25uZWN0ZWQgdG8gc291cmNlIGNvbm5lY3Rpb24uXCIpO2lmKHRoaXMuaXNTdXBlcmlvcigpKXt2YXIgYj10aGlzLnNvdXJjZUJsb2NrXzt2YXIgYz1hLmdldFNvdXJjZUJsb2NrKCk7YT10aGlzfWVsc2UgYj1hLmdldFNvdXJjZUJsb2NrKCksYz10aGlzLnNvdXJjZUJsb2NrXzt2YXIgZD1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO2R8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTt0aGlzLmRpc2Nvbm5lY3RJbnRlcm5hbF8oYixjKTtjLmlzU2hhZG93KCl8fGEucmVzcGF3blNoYWRvd18oKTtkfHxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9O1xuQmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS5kaXNjb25uZWN0SW50ZXJuYWxfPWZ1bmN0aW9uKGEsYil7dmFyIGM7QmxvY2tseS5FdmVudHMuaXNFbmFibGVkKCkmJihjPW5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja01vdmUoYikpO3RoaXMudGFyZ2V0Q29ubmVjdGlvbj10aGlzLnRhcmdldENvbm5lY3Rpb24udGFyZ2V0Q29ubmVjdGlvbj1udWxsO2Iuc2V0UGFyZW50KG51bGwpO2MmJihjLnJlY29yZE5ldygpLEJsb2NrbHkuRXZlbnRzLmZpcmUoYykpfTtcbkJsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUucmVzcGF3blNoYWRvd189ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNvdXJjZUJsb2NrKCksYj10aGlzLmdldFNoYWRvd0RvbSgpO2lmKGEud29ya3NwYWNlJiZiKWlmKGE9QmxvY2tseS5YbWwuZG9tVG9CbG9jayhiLGEud29ya3NwYWNlKSxhLm91dHB1dENvbm5lY3Rpb24pdGhpcy5jb25uZWN0KGEub3V0cHV0Q29ubmVjdGlvbik7ZWxzZSBpZihhLnByZXZpb3VzQ29ubmVjdGlvbil0aGlzLmNvbm5lY3QoYS5wcmV2aW91c0Nvbm5lY3Rpb24pO2Vsc2UgdGhyb3cgRXJyb3IoXCJDaGlsZCBibG9jayBkb2VzIG5vdCBoYXZlIG91dHB1dCBvciBwcmV2aW91cyBzdGF0ZW1lbnQuXCIpO307QmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS50YXJnZXRCbG9jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ29ubmVjdGVkKCk/dGhpcy50YXJnZXRDb25uZWN0aW9uLmdldFNvdXJjZUJsb2NrKCk6bnVsbH07XG5CbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmNoZWNrVHlwZT1mdW5jdGlvbihhKXtCbG9ja2x5LnV0aWxzLmRlcHJlY2F0aW9uLndhcm4oXCJDb25uZWN0aW9uLnByb3RvdHlwZS5jaGVja1R5cGVcIixcIk9jdG9iZXIgMjAxOVwiLFwiSmFudWFyeSAyMDIxXCIsXCJ0aGUgd29ya3NwYWNlJ3MgY29ubmVjdGlvbiBjaGVja2VyXCIpO3JldHVybiB0aGlzLmdldENvbm5lY3Rpb25DaGVja2VyKCkuY2FuQ29ubmVjdCh0aGlzLGEsITEpfTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmNoZWNrVHlwZV89ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiQ29ubmVjdGlvbi5wcm90b3R5cGUuY2hlY2tUeXBlX1wiLFwiT2N0b2JlciAyMDE5XCIsXCJKYW51YXJ5IDIwMjFcIixcInRoZSB3b3Jrc3BhY2UncyBjb25uZWN0aW9uIGNoZWNrZXJcIik7cmV0dXJuIHRoaXMuY2hlY2tUeXBlKGEpfTtcbkJsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUub25DaGVja0NoYW5nZWRfPWZ1bmN0aW9uKCl7IXRoaXMuaXNDb25uZWN0ZWQoKXx8dGhpcy50YXJnZXRDb25uZWN0aW9uJiZ0aGlzLmdldENvbm5lY3Rpb25DaGVja2VyKCkuY2FuQ29ubmVjdCh0aGlzLHRoaXMudGFyZ2V0Q29ubmVjdGlvbiwhMSl8fCh0aGlzLmlzU3VwZXJpb3IoKT90aGlzLnRhcmdldEJsb2NrKCk6dGhpcy5zb3VyY2VCbG9ja18pLnVucGx1ZygpfTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLnNldENoZWNrPWZ1bmN0aW9uKGEpe2E/KEFycmF5LmlzQXJyYXkoYSl8fChhPVthXSksdGhpcy5jaGVja189YSx0aGlzLm9uQ2hlY2tDaGFuZ2VkXygpKTp0aGlzLmNoZWNrXz1udWxsO3JldHVybiB0aGlzfTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLmdldENoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tffTtcbkJsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0U2hhZG93RG9tPWZ1bmN0aW9uKGEpe3RoaXMuc2hhZG93RG9tXz1hO2E9dGhpcy50YXJnZXRCbG9jaygpO2E/YS5pc1NoYWRvdygpJiYoYS5kaXNwb3NlKCExKSx0aGlzLnJlc3Bhd25TaGFkb3dfKCkpOnRoaXMucmVzcGF3blNoYWRvd18oKX07QmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS5nZXRTaGFkb3dEb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dEb21ffTtCbG9ja2x5LkNvbm5lY3Rpb24ucHJvdG90eXBlLm5laWdoYm91cnM9ZnVuY3Rpb24oYSl7cmV0dXJuW119O0Jsb2NrbHkuQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UGFyZW50SW5wdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPXRoaXMuc291cmNlQmxvY2tfLGM9Yi5pbnB1dExpc3QsZD0wO2Q8Yi5pbnB1dExpc3QubGVuZ3RoO2QrKylpZihjW2RdLmNvbm5lY3Rpb249PT10aGlzKXthPWNbZF07YnJlYWt9cmV0dXJuIGF9O1xuQmxvY2tseS5Db25uZWN0aW9uLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc291cmNlQmxvY2tfO2lmKGEpaWYoYS5vdXRwdXRDb25uZWN0aW9uPT10aGlzKXZhciBiPVwiT3V0cHV0IENvbm5lY3Rpb24gb2YgXCI7ZWxzZSBpZihhLnByZXZpb3VzQ29ubmVjdGlvbj09dGhpcyliPVwiUHJldmlvdXMgQ29ubmVjdGlvbiBvZiBcIjtlbHNlIGlmKGEubmV4dENvbm5lY3Rpb249PXRoaXMpYj1cIk5leHQgQ29ubmVjdGlvbiBvZiBcIjtlbHNle2I9bnVsbDtmb3IodmFyIGM9MCxkO2Q9YS5pbnB1dExpc3RbY107YysrKWlmKGQuY29ubmVjdGlvbj09dGhpcyl7Yj1kO2JyZWFrfWlmKGIpYj0nSW5wdXQgXCInK2IubmFtZSsnXCIgY29ubmVjdGlvbiBvbiAnO2Vsc2UgcmV0dXJuIGNvbnNvbGUud2FybihcIkNvbm5lY3Rpb24gbm90IGFjdHVhbGx5IGNvbm5lY3RlZCB0byBzb3VyY2VCbG9ja19cIiksXCJPcnBoYW4gQ29ubmVjdGlvblwifWVsc2UgcmV0dXJuXCJPcnBoYW4gQ29ubmVjdGlvblwiO1xucmV0dXJuIGIrYS50b0RldlN0cmluZygpfTtCbG9ja2x5LkV4dGVuc2lvbnM9e307QmxvY2tseS5FeHRlbnNpb25zLkFMTF89e307QmxvY2tseS5FeHRlbnNpb25zLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGF8fFwiXCI9PWEudHJpbSgpKXRocm93IEVycm9yKCdFcnJvcjogSW52YWxpZCBleHRlbnNpb24gbmFtZSBcIicrYSsnXCInKTtpZihCbG9ja2x5LkV4dGVuc2lvbnMuQUxMX1thXSl0aHJvdyBFcnJvcignRXJyb3I6IEV4dGVuc2lvbiBcIicrYSsnXCIgaXMgYWxyZWFkeSByZWdpc3RlcmVkLicpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpdGhyb3cgRXJyb3IoJ0Vycm9yOiBFeHRlbnNpb24gXCInK2ErJ1wiIG11c3QgYmUgYSBmdW5jdGlvbicpO0Jsb2NrbHkuRXh0ZW5zaW9ucy5BTExfW2FdPWJ9O1xuQmxvY2tseS5FeHRlbnNpb25zLnJlZ2lzdGVyTWl4aW49ZnVuY3Rpb24oYSxiKXtpZighYnx8XCJvYmplY3RcIiE9dHlwZW9mIGIpdGhyb3cgRXJyb3IoJ0Vycm9yOiBNaXhpbiBcIicrYSsnXCIgbXVzdCBiZSBhIG9iamVjdCcpO0Jsb2NrbHkuRXh0ZW5zaW9ucy5yZWdpc3RlcihhLGZ1bmN0aW9uKCl7dGhpcy5taXhpbihiKX0pfTtcbkJsb2NrbHkuRXh0ZW5zaW9ucy5yZWdpc3Rlck11dGF0b3I9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9J0Vycm9yIHdoZW4gcmVnaXN0ZXJpbmcgbXV0YXRvciBcIicrYSsnXCI6ICc7QmxvY2tseS5FeHRlbnNpb25zLmNoZWNrSGFzRnVuY3Rpb25fKGUsYi5kb21Ub011dGF0aW9uLFwiZG9tVG9NdXRhdGlvblwiKTtCbG9ja2x5LkV4dGVuc2lvbnMuY2hlY2tIYXNGdW5jdGlvbl8oZSxiLm11dGF0aW9uVG9Eb20sXCJtdXRhdGlvblRvRG9tXCIpO3ZhciBmPUJsb2NrbHkuRXh0ZW5zaW9ucy5jaGVja011dGF0b3JEaWFsb2dfKGIsZSk7aWYoYyYmXCJmdW5jdGlvblwiIT10eXBlb2YgYyl0aHJvdyBFcnJvcignRXh0ZW5zaW9uIFwiJythKydcIiBpcyBub3QgYSBmdW5jdGlvbicpO0Jsb2NrbHkuRXh0ZW5zaW9ucy5yZWdpc3RlcihhLGZ1bmN0aW9uKCl7aWYoZil7aWYoIUJsb2NrbHkuTXV0YXRvcil0aHJvdyBFcnJvcihlK1wiTWlzc2luZyByZXF1aXJlIGZvciBCbG9ja2x5Lk11dGF0b3JcIik7dGhpcy5zZXRNdXRhdG9yKG5ldyBCbG9ja2x5Lk11dGF0b3IoZHx8XG5bXSkpfXRoaXMubWl4aW4oYik7YyYmYy5hcHBseSh0aGlzKX0pfTtCbG9ja2x5LkV4dGVuc2lvbnMudW5yZWdpc3Rlcj1mdW5jdGlvbihhKXtCbG9ja2x5LkV4dGVuc2lvbnMuQUxMX1thXT9kZWxldGUgQmxvY2tseS5FeHRlbnNpb25zLkFMTF9bYV06Y29uc29sZS53YXJuKCdObyBleHRlbnNpb24gbWFwcGluZyBmb3IgbmFtZSBcIicrYSsnXCIgZm91bmQgdG8gdW5yZWdpc3RlcicpfTtcbkJsb2NrbHkuRXh0ZW5zaW9ucy5hcHBseT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9QmxvY2tseS5FeHRlbnNpb25zLkFMTF9bYV07aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZCl0aHJvdyBFcnJvcignRXJyb3I6IEV4dGVuc2lvbiBcIicrYSsnXCIgbm90IGZvdW5kLicpO2lmKGMpQmxvY2tseS5FeHRlbnNpb25zLmNoZWNrTm9NdXRhdG9yUHJvcGVydGllc18oYSxiKTtlbHNlIHZhciBlPUJsb2NrbHkuRXh0ZW5zaW9ucy5nZXRNdXRhdG9yUHJvcGVydGllc18oYik7ZC5hcHBseShiKTtpZihjKUJsb2NrbHkuRXh0ZW5zaW9ucy5jaGVja0Jsb2NrSGFzTXV0YXRvclByb3BlcnRpZXNfKCdFcnJvciBhZnRlciBhcHBseWluZyBtdXRhdG9yIFwiJythKydcIjogJyxiKTtlbHNlIGlmKCFCbG9ja2x5LkV4dGVuc2lvbnMubXV0YXRvclByb3BlcnRpZXNNYXRjaF8oZSxiKSl0aHJvdyBFcnJvcignRXJyb3Igd2hlbiBhcHBseWluZyBleHRlbnNpb24gXCInK2ErJ1wiOiBtdXRhdGlvbiBwcm9wZXJ0aWVzIGNoYW5nZWQgd2hlbiBhcHBseWluZyBhIG5vbi1tdXRhdG9yIGV4dGVuc2lvbi4nKTtcbn07QmxvY2tseS5FeHRlbnNpb25zLmNoZWNrSGFzRnVuY3Rpb25fPWZ1bmN0aW9uKGEsYixjKXtpZighYil0aHJvdyBFcnJvcihhKydtaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5IFwiJytjKydcIicpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpdGhyb3cgRXJyb3IoYSsnXCIgcmVxdWlyZWQgcHJvcGVydHkgXCInK2MrJ1wiIG11c3QgYmUgYSBmdW5jdGlvbicpO307QmxvY2tseS5FeHRlbnNpb25zLmNoZWNrTm9NdXRhdG9yUHJvcGVydGllc189ZnVuY3Rpb24oYSxiKXtpZihCbG9ja2x5LkV4dGVuc2lvbnMuZ2V0TXV0YXRvclByb3BlcnRpZXNfKGIpLmxlbmd0aCl0aHJvdyBFcnJvcignRXJyb3I6IHRyaWVkIHRvIGFwcGx5IG11dGF0aW9uIFwiJythKydcIiB0byBhIGJsb2NrIHRoYXQgYWxyZWFkeSBoYXMgbXV0YXRvciBmdW5jdGlvbnMuICBCbG9jayBpZDogJytiLmlkKTt9O1xuQmxvY2tseS5FeHRlbnNpb25zLmNoZWNrTXV0YXRvckRpYWxvZ189ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLmNvbXBvc2UsZD12b2lkIDAhPT1hLmRlY29tcG9zZTtpZihjJiZkKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhLmNvbXBvc2UpdGhyb3cgRXJyb3IoYitcImNvbXBvc2UgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhLmRlY29tcG9zZSl0aHJvdyBFcnJvcihiK1wiZGVjb21wb3NlIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7cmV0dXJuITB9aWYoY3x8ZCl0aHJvdyBFcnJvcihiKydNdXN0IGhhdmUgYm90aCBvciBuZWl0aGVyIG9mIFwiY29tcG9zZVwiIGFuZCBcImRlY29tcG9zZVwiJyk7cmV0dXJuITF9O1xuQmxvY2tseS5FeHRlbnNpb25zLmNoZWNrQmxvY2tIYXNNdXRhdG9yUHJvcGVydGllc189ZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBiLmRvbVRvTXV0YXRpb24pdGhyb3cgRXJyb3IoYSsnQXBwbHlpbmcgYSBtdXRhdG9yIGRpZG5cXCd0IGFkZCBcImRvbVRvTXV0YXRpb25cIicpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIubXV0YXRpb25Ub0RvbSl0aHJvdyBFcnJvcihhKydBcHBseWluZyBhIG11dGF0b3IgZGlkblxcJ3QgYWRkIFwibXV0YXRpb25Ub0RvbVwiJyk7QmxvY2tseS5FeHRlbnNpb25zLmNoZWNrTXV0YXRvckRpYWxvZ18oYixhKX07XG5CbG9ja2x5LkV4dGVuc2lvbnMuZ2V0TXV0YXRvclByb3BlcnRpZXNfPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO3ZvaWQgMCE9PWEuZG9tVG9NdXRhdGlvbiYmYi5wdXNoKGEuZG9tVG9NdXRhdGlvbik7dm9pZCAwIT09YS5tdXRhdGlvblRvRG9tJiZiLnB1c2goYS5tdXRhdGlvblRvRG9tKTt2b2lkIDAhPT1hLmNvbXBvc2UmJmIucHVzaChhLmNvbXBvc2UpO3ZvaWQgMCE9PWEuZGVjb21wb3NlJiZiLnB1c2goYS5kZWNvbXBvc2UpO3JldHVybiBifTtCbG9ja2x5LkV4dGVuc2lvbnMubXV0YXRvclByb3BlcnRpZXNNYXRjaF89ZnVuY3Rpb24oYSxiKXtiPUJsb2NrbHkuRXh0ZW5zaW9ucy5nZXRNdXRhdG9yUHJvcGVydGllc18oYik7aWYoYi5sZW5ndGghPWEubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGFbY10hPWJbY10pcmV0dXJuITE7cmV0dXJuITB9O1xuQmxvY2tseS5FeHRlbnNpb25zLmJ1aWxkVG9vbHRpcEZvckRyb3Bkb3duPWZ1bmN0aW9uKGEsYil7dmFyIGM9W107XCJvYmplY3RcIj09dHlwZW9mIGRvY3VtZW50JiZCbG9ja2x5LnV0aWxzLnJ1bkFmdGVyUGFnZUxvYWQoZnVuY3Rpb24oKXtmb3IodmFyIGQgaW4gYilCbG9ja2x5LnV0aWxzLmNoZWNrTWVzc2FnZVJlZmVyZW5jZXMoYltkXSl9KTtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLnR5cGUmJi0xPT1jLmluZGV4T2YodGhpcy50eXBlKSYmKEJsb2NrbHkuRXh0ZW5zaW9ucy5jaGVja0Ryb3Bkb3duT3B0aW9uc0luVGFibGVfKHRoaXMsYSxiKSxjLnB1c2godGhpcy50eXBlKSk7dGhpcy5zZXRUb29sdGlwKGZ1bmN0aW9uKCl7dmFyIGQ9U3RyaW5nKHRoaXMuZ2V0RmllbGRWYWx1ZShhKSksZT1iW2RdO251bGw9PWU/LTE9PWMuaW5kZXhPZih0aGlzLnR5cGUpJiYoZD1cIk5vIHRvb2x0aXAgbWFwcGluZyBmb3IgdmFsdWUgXCIrZCtcIiBvZiBmaWVsZCBcIithLG51bGwhPXRoaXMudHlwZSYmXG4oZCs9XCIgb2YgYmxvY2sgdHlwZSBcIit0aGlzLnR5cGUpLGNvbnNvbGUud2FybihkK1wiLlwiKSk6ZT1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhlKTtyZXR1cm4gZX0uYmluZCh0aGlzKSl9fTtCbG9ja2x5LkV4dGVuc2lvbnMuY2hlY2tEcm9wZG93bk9wdGlvbnNJblRhYmxlXz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRGaWVsZChiKTtpZighZC5pc09wdGlvbkxpc3REeW5hbWljKCkpe2Q9ZC5nZXRPcHRpb25zKCk7Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDsrK2Upe3ZhciBmPWRbZV1bMV07bnVsbD09Y1tmXSYmY29uc29sZS53YXJuKFwiTm8gdG9vbHRpcCBtYXBwaW5nIGZvciB2YWx1ZSBcIitmK1wiIG9mIGZpZWxkIFwiK2IrXCIgb2YgYmxvY2sgdHlwZSBcIithLnR5cGUpfX19O1xuQmxvY2tseS5FeHRlbnNpb25zLmJ1aWxkVG9vbHRpcFdpdGhGaWVsZFRleHQ9ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgZG9jdW1lbnQmJkJsb2NrbHkudXRpbHMucnVuQWZ0ZXJQYWdlTG9hZChmdW5jdGlvbigpe0Jsb2NrbHkudXRpbHMuY2hlY2tNZXNzYWdlUmVmZXJlbmNlcyhhKX0pO3JldHVybiBmdW5jdGlvbigpe3RoaXMuc2V0VG9vbHRpcChmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0RmllbGQoYik7cmV0dXJuIEJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEpLnJlcGxhY2UoXCIlMVwiLGM/Yy5nZXRUZXh0KCk6XCJcIil9LmJpbmQodGhpcykpfX07XG5CbG9ja2x5LkV4dGVuc2lvbnMuZXh0ZW5zaW9uUGFyZW50VG9vbHRpcF89ZnVuY3Rpb24oKXt0aGlzLnRvb2x0aXBXaGVuTm90Q29ubmVjdGVkXz10aGlzLnRvb2x0aXA7dGhpcy5zZXRUb29sdGlwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQYXJlbnQoKTtyZXR1cm4gYSYmYS5nZXRJbnB1dHNJbmxpbmUoKSYmYS50b29sdGlwfHx0aGlzLnRvb2x0aXBXaGVuTm90Q29ubmVjdGVkX30uYmluZCh0aGlzKSl9O0Jsb2NrbHkuRXh0ZW5zaW9ucy5yZWdpc3RlcihcInBhcmVudF90b29sdGlwX3doZW5faW5saW5lXCIsQmxvY2tseS5FeHRlbnNpb25zLmV4dGVuc2lvblBhcmVudFRvb2x0aXBfKTtCbG9ja2x5LmZpZWxkUmVnaXN0cnk9e307QmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRklFTEQsYSxiKX07QmxvY2tseS5maWVsZFJlZ2lzdHJ5LnVucmVnaXN0ZXI9ZnVuY3Rpb24oYSl7QmxvY2tseS5yZWdpc3RyeS51bnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5GSUVMRCxhKX07XG5CbG9ja2x5LmZpZWxkUmVnaXN0cnkuZnJvbUpzb249ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS5yZWdpc3RyeS5nZXRPYmplY3QoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkZJRUxELGEudHlwZSk7cmV0dXJuIGI/Yi5mcm9tSnNvbihhKTooY29uc29sZS53YXJuKFwiQmxvY2tseSBjb3VsZCBub3QgY3JlYXRlIGEgZmllbGQgb2YgdHlwZSBcIithLnR5cGUrXCIuIFRoZSBmaWVsZCBpcyBwcm9iYWJseSBub3QgYmVpbmcgcmVnaXN0ZXJlZC4gVGhpcyBjb3VsZCBiZSBiZWNhdXNlIHRoZSBmaWxlIGlzIG5vdCBsb2FkZWQsIHRoZSBmaWVsZCBkb2VzIG5vdCByZWdpc3RlciBpdHNlbGYgKElzc3VlICMxNTg0KSwgb3IgdGhlIHJlZ2lzdHJhdGlvbiBpcyBub3QgYmVpbmcgcmVhY2hlZC5cIiksbnVsbCl9O0Jsb2NrbHkuYmxvY2tBbmltYXRpb25zPXt9O0Jsb2NrbHkuYmxvY2tBbmltYXRpb25zLmRpc2Nvbm5lY3RQaWRfPTA7QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdEdyb3VwXz1udWxsO0Jsb2NrbHkuYmxvY2tBbmltYXRpb25zLmRpc3Bvc2VVaUVmZmVjdD1mdW5jdGlvbihhKXt2YXIgYj1hLndvcmtzcGFjZSxjPWEuZ2V0U3ZnUm9vdCgpO2IuZ2V0QXVkaW9NYW5hZ2VyKCkucGxheShcImRlbGV0ZVwiKTthPWIuZ2V0U3ZnWFkoYyk7Yz1jLmNsb25lTm9kZSghMCk7Yy50cmFuc2xhdGVYXz1hLng7Yy50cmFuc2xhdGVZXz1hLnk7Yy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIithLngrXCIsXCIrYS55K1wiKVwiKTtiLmdldFBhcmVudFN2ZygpLmFwcGVuZENoaWxkKGMpO2MuYkJveF89Yy5nZXRCQm94KCk7QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzcG9zZVVpU3RlcF8oYyxiLlJUTCxuZXcgRGF0ZSxiLnNjYWxlKX07XG5CbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNwb3NlVWlTdGVwXz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT0obmV3IERhdGUtYykvMTUwOzE8ZT9CbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKGEpOihhLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiKyhhLnRyYW5zbGF0ZVhfKyhiPy0xOjEpKmEuYkJveF8ud2lkdGgqZC8yKmUpK1wiLFwiKyhhLnRyYW5zbGF0ZVlfK2EuYkJveF8uaGVpZ2h0KmQqZSkrXCIpIHNjYWxlKFwiKygxLWUpKmQrXCIpXCIpLHNldFRpbWVvdXQoQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzcG9zZVVpU3RlcF8sMTAsYSxiLGMsZCkpfTtcbkJsb2NrbHkuYmxvY2tBbmltYXRpb25zLmNvbm5lY3Rpb25VaUVmZmVjdD1mdW5jdGlvbihhKXt2YXIgYj1hLndvcmtzcGFjZSxjPWIuc2NhbGU7Yi5nZXRBdWRpb01hbmFnZXIoKS5wbGF5KFwiY2xpY2tcIik7aWYoISgxPmMpKXt2YXIgZD1iLmdldFN2Z1hZKGEuZ2V0U3ZnUm9vdCgpKTthLm91dHB1dENvbm5lY3Rpb24/KGQueCs9KGEuUlRMPzM6LTMpKmMsZC55Kz0xMypjKTphLnByZXZpb3VzQ29ubmVjdGlvbiYmKGQueCs9KGEuUlRMPy0yMzoyMykqYyxkLnkrPTMqYyk7YT1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNJUkNMRSx7Y3g6ZC54LGN5OmQueSxyOjAsZmlsbDpcIm5vbmVcIixzdHJva2U6XCIjODg4XCIsXCJzdHJva2Utd2lkdGhcIjoxMH0sYi5nZXRQYXJlbnRTdmcoKSk7QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuY29ubmVjdGlvblVpU3RlcF8oYSxuZXcgRGF0ZSxjKX19O1xuQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuY29ubmVjdGlvblVpU3RlcF89ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPShuZXcgRGF0ZS1iKS8xNTA7MTxkP0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUoYSk6KGEuc2V0QXR0cmlidXRlKFwiclwiLDI1KmQqYyksYS5zdHlsZS5vcGFjaXR5PTEtZCxCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0UGlkXz1zZXRUaW1lb3V0KEJsb2NrbHkuYmxvY2tBbmltYXRpb25zLmNvbm5lY3Rpb25VaVN0ZXBfLDEwLGEsYixjKSl9O1xuQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFVpRWZmZWN0PWZ1bmN0aW9uKGEpe2Eud29ya3NwYWNlLmdldEF1ZGlvTWFuYWdlcigpLnBsYXkoXCJkaXNjb25uZWN0XCIpO2lmKCEoMT5hLndvcmtzcGFjZS5zY2FsZSkpe3ZhciBiPWEuZ2V0SGVpZ2h0V2lkdGgoKS5oZWlnaHQ7Yj1NYXRoLmF0YW4oMTAvYikvTWF0aC5QSSoxODA7YS5SVEx8fChiKj0tMSk7QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFVpU3RlcF8oYS5nZXRTdmdSb290KCksYixuZXcgRGF0ZSl9fTtcbkJsb2NrbHkuYmxvY2tBbmltYXRpb25zLmRpc2Nvbm5lY3RVaVN0ZXBfPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0obmV3IERhdGUtYykvMjAwOzE8ZD9hLnNrZXdfPVwiXCI6KGEuc2tld189XCJza2V3WChcIitNYXRoLnJvdW5kKE1hdGguc2luKGQqTWF0aC5QSSozKSooMS1kKSpiKStcIilcIixCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0R3JvdXBfPWEsQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFBpZF89c2V0VGltZW91dChCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0VWlTdGVwXywxMCxhLGIsYykpO2Euc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsYS50cmFuc2xhdGVfK2Euc2tld18pfTtcbkJsb2NrbHkuYmxvY2tBbmltYXRpb25zLmRpc2Nvbm5lY3RVaVN0b3A9ZnVuY3Rpb24oKXtpZihCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0R3JvdXBfKXtjbGVhclRpbWVvdXQoQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFBpZF8pO3ZhciBhPUJsb2NrbHkuYmxvY2tBbmltYXRpb25zLmRpc2Nvbm5lY3RHcm91cF87YS5za2V3Xz1cIlwiO2Euc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsYS50cmFuc2xhdGVfKTtCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0R3JvdXBfPW51bGx9fTtCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXI9ZnVuY3Rpb24oYSl7dGhpcy50b3BCbG9ja189QmxvY2tseS5zZWxlY3RlZD1hO3RoaXMud29ya3NwYWNlXz1hLndvcmtzcGFjZTt0aGlzLmxhc3RNYXJrZXJfPXRoaXMubGFzdE9uU3RhY2tfPW51bGw7dGhpcy5maXJzdE1hcmtlcl89dGhpcy5jcmVhdGVNYXJrZXJCbG9ja18odGhpcy50b3BCbG9ja18pO3RoaXMubG9jYWxDb25uZWN0aW9uXz10aGlzLmNsb3Nlc3RDb25uZWN0aW9uXz1udWxsO3RoaXMud291bGREZWxldGVCbG9ja189ITE7dGhpcy5mYWRlZEJsb2NrXz10aGlzLmhpZ2hsaWdodGVkQmxvY2tfPXRoaXMubWFya2VyQ29ubmVjdGlvbl89bnVsbDt0aGlzLmF2YWlsYWJsZUNvbm5lY3Rpb25zXz10aGlzLmluaXRBdmFpbGFibGVDb25uZWN0aW9uc18oKX07QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLlBSRVZJRVdfVFlQRT17SU5TRVJUSU9OX01BUktFUjowLElOUFVUX09VVExJTkU6MSxSRVBMQUNFTUVOVF9GQURFOjJ9O1xuQmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGVDb25uZWN0aW9uc18ubGVuZ3RoPTA7QmxvY2tseS5FdmVudHMuZGlzYWJsZSgpO3RyeXt0aGlzLmZpcnN0TWFya2VyXyYmdGhpcy5maXJzdE1hcmtlcl8uZGlzcG9zZSgpLHRoaXMubGFzdE1hcmtlcl8mJnRoaXMubGFzdE1hcmtlcl8uZGlzcG9zZSgpfWZpbmFsbHl7QmxvY2tseS5FdmVudHMuZW5hYmxlKCl9fTtCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZUF2YWlsYWJsZUNvbm5lY3Rpb25zPWZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGVDb25uZWN0aW9uc189dGhpcy5pbml0QXZhaWxhYmxlQ29ubmVjdGlvbnNfKCl9O0Jsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUud291bGREZWxldGVCbG9jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLndvdWxkRGVsZXRlQmxvY2tffTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUud291bGRDb25uZWN0QmxvY2s9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuY2xvc2VzdENvbm5lY3Rpb25ffTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuYXBwbHlDb25uZWN0aW9ucz1mdW5jdGlvbigpe2lmKHRoaXMuY2xvc2VzdENvbm5lY3Rpb25fJiYoQmxvY2tseS5FdmVudHMuZGlzYWJsZSgpLHRoaXMuaGlkZVByZXZpZXdfKCksQmxvY2tseS5FdmVudHMuZW5hYmxlKCksdGhpcy5sb2NhbENvbm5lY3Rpb25fLmNvbm5lY3QodGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8pLHRoaXMudG9wQmxvY2tfLnJlbmRlcmVkKSl7dmFyIGE9dGhpcy5sb2NhbENvbm5lY3Rpb25fLmlzU3VwZXJpb3IoKT90aGlzLmNsb3Nlc3RDb25uZWN0aW9uXzp0aGlzLmxvY2FsQ29ubmVjdGlvbl87QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuY29ubmVjdGlvblVpRWZmZWN0KGEuZ2V0U291cmNlQmxvY2soKSk7dGhpcy50b3BCbG9ja18uZ2V0Um9vdEJsb2NrKCkuYnJpbmdUb0Zyb250KCl9fTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDYW5kaWRhdGVfKGEpO2lmKCh0aGlzLndvdWxkRGVsZXRlQmxvY2tfPXRoaXMuc2hvdWxkRGVsZXRlXyhjLGIpKXx8dGhpcy5zaG91bGRVcGRhdGVQcmV2aWV3c18oYyxhKSlCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCksdGhpcy5tYXliZUhpZGVQcmV2aWV3XyhjKSx0aGlzLm1heWJlU2hvd1ByZXZpZXdfKGMpLEJsb2NrbHkuRXZlbnRzLmVuYWJsZSgpfTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlTWFya2VyQmxvY2tfPWZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZTtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCk7dHJ5e3ZhciBjPXRoaXMud29ya3NwYWNlXy5uZXdCbG9jayhiKTtjLnNldEluc2VydGlvbk1hcmtlcighMCk7aWYoYS5tdXRhdGlvblRvRG9tKXt2YXIgZD1hLm11dGF0aW9uVG9Eb20oKTtkJiZjLmRvbVRvTXV0YXRpb24oZCl9Zm9yKGI9MDtiPGEuaW5wdXRMaXN0Lmxlbmd0aDtiKyspe3ZhciBlPWEuaW5wdXRMaXN0W2JdO2lmKGUubmFtZSE9QmxvY2tseS5CbG9jay5DT0xMQVBTRURfSU5QVVRfTkFNRSl7dmFyIGY9Yy5pbnB1dExpc3RbYl07Zm9yKGQ9MDtkPGUuZmllbGRSb3cubGVuZ3RoO2QrKylmLmZpZWxkUm93W2RdLnNldFZhbHVlKGUuZmllbGRSb3dbZF0uZ2V0VmFsdWUoKSl9fWMuc2V0Q29sbGFwc2VkKGEuaXNDb2xsYXBzZWQoKSk7Yy5zZXRJbnB1dHNJbmxpbmUoYS5nZXRJbnB1dHNJbmxpbmUoKSk7XG5jLmluaXRTdmcoKTtjLmdldFN2Z1Jvb3QoKS5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIil9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKX1yZXR1cm4gY307QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5pbml0QXZhaWxhYmxlQ29ubmVjdGlvbnNfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50b3BCbG9ja18uZ2V0Q29ubmVjdGlvbnNfKCExKSxiPXRoaXMudG9wQmxvY2tfLmxhc3RDb25uZWN0aW9uSW5TdGFjaygpO2lmKGImJmIhPXRoaXMudG9wQmxvY2tfLm5leHRDb25uZWN0aW9uKXthLnB1c2goYik7dGhpcy5sYXN0T25TdGFja189YjtpZih0aGlzLmxhc3RNYXJrZXJfKXtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCk7dHJ5e3RoaXMubGFzdE1hcmtlcl8uZGlzcG9zZSgpfWZpbmFsbHl7QmxvY2tseS5FdmVudHMuZW5hYmxlKCl9fXRoaXMubGFzdE1hcmtlcl89dGhpcy5jcmVhdGVNYXJrZXJCbG9ja18oYi5nZXRTb3VyY2VCbG9jaygpKX1yZXR1cm4gYX07XG5CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnNob3VsZFVwZGF0ZVByZXZpZXdzXz1mdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWwsZD1hLmNsb3Nlc3Q7YT1hLnJhZGl1cztpZihjJiZkKXtpZih0aGlzLmxvY2FsQ29ubmVjdGlvbl8mJnRoaXMuY2xvc2VzdENvbm5lY3Rpb25fKXtpZih0aGlzLmNsb3Nlc3RDb25uZWN0aW9uXz09ZCYmdGhpcy5sb2NhbENvbm5lY3Rpb25fPT1jKXJldHVybiExO2M9dGhpcy5sb2NhbENvbm5lY3Rpb25fLngrYi54LXRoaXMuY2xvc2VzdENvbm5lY3Rpb25fLng7Yj10aGlzLmxvY2FsQ29ubmVjdGlvbl8ueStiLnktdGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8ueTtiPU1hdGguc3FydChjKmMrYipiKTtyZXR1cm4hKGQmJmE+Yi1CbG9ja2x5LkNVUlJFTlRfQ09OTkVDVElPTl9QUkVGRVJFTkNFKX1pZih0aGlzLmxvY2FsQ29ubmVjdGlvbl98fHRoaXMuY2xvc2VzdENvbm5lY3Rpb25fKWNvbnNvbGUuZXJyb3IoXCJPbmx5IG9uZSBvZiBsb2NhbENvbm5lY3Rpb25fIGFuZCBjbG9zZXN0Q29ubmVjdGlvbl8gd2FzIHNldC5cIik7XG5lbHNlIHJldHVybiEwfWVsc2UgcmV0dXJuISghdGhpcy5sb2NhbENvbm5lY3Rpb25ffHwhdGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8pO2NvbnNvbGUuZXJyb3IoXCJSZXR1cm5pbmcgdHJ1ZSBmcm9tIHNob3VsZFVwZGF0ZVByZXZpZXdzLCBidXQgaXQncyBub3QgY2xlYXIgd2h5LlwiKTtyZXR1cm4hMH07QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5nZXRDYW5kaWRhdGVfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmdldFN0YXJ0UmFkaXVzXygpLGM9bnVsbCxkPW51bGwsZT0wO2U8dGhpcy5hdmFpbGFibGVDb25uZWN0aW9uc18ubGVuZ3RoO2UrKyl7dmFyIGY9dGhpcy5hdmFpbGFibGVDb25uZWN0aW9uc19bZV0sZz1mLmNsb3Nlc3QoYixhKTtnLmNvbm5lY3Rpb24mJihjPWcuY29ubmVjdGlvbixkPWYsYj1nLnJhZGl1cyl9cmV0dXJue2Nsb3Nlc3Q6Yyxsb2NhbDpkLHJhZGl1czpifX07XG5CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLmdldFN0YXJ0UmFkaXVzXz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb3Nlc3RDb25uZWN0aW9uXyYmdGhpcy5sb2NhbENvbm5lY3Rpb25fP0Jsb2NrbHkuQ09OTkVDVElOR19TTkFQX1JBRElVUzpCbG9ja2x5LlNOQVBfUkFESVVTfTtCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnNob3VsZERlbGV0ZV89ZnVuY3Rpb24oYSxiKXthPWEmJiEhYS5jbG9zZXN0JiZiIT1CbG9ja2x5LkRFTEVURV9BUkVBX1RPT0xCT1g7cmV0dXJuISFiJiYhdGhpcy50b3BCbG9ja18uZ2V0UGFyZW50KCkmJnRoaXMudG9wQmxvY2tfLmlzRGVsZXRhYmxlKCkmJiFhfTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUubWF5YmVTaG93UHJldmlld189ZnVuY3Rpb24oYSl7aWYoIXRoaXMud291bGREZWxldGVCbG9ja18pe3ZhciBiPWEuY2xvc2VzdDthPWEubG9jYWw7YiYmKGI9PXRoaXMuY2xvc2VzdENvbm5lY3Rpb25ffHxiLmdldFNvdXJjZUJsb2NrKCkuaXNJbnNlcnRpb25NYXJrZXIoKT9jb25zb2xlLmxvZyhcIlRyeWluZyB0byBjb25uZWN0IHRvIGFuIGluc2VydGlvbiBtYXJrZXJcIik6KHRoaXMuY2xvc2VzdENvbm5lY3Rpb25fPWIsdGhpcy5sb2NhbENvbm5lY3Rpb25fPWEsdGhpcy5zaG93UHJldmlld18oKSkpfX07XG5CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnNob3dQcmV2aWV3Xz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY2xvc2VzdENvbm5lY3Rpb25fLGI9dGhpcy53b3Jrc3BhY2VfLmdldFJlbmRlcmVyKCk7c3dpdGNoKGIuZ2V0Q29ubmVjdGlvblByZXZpZXdNZXRob2QoYSx0aGlzLmxvY2FsQ29ubmVjdGlvbl8sdGhpcy50b3BCbG9ja18pKXtjYXNlIEJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5QUkVWSUVXX1RZUEUuSU5QVVRfT1VUTElORTp0aGlzLnNob3dJbnNlcnRpb25JbnB1dE91dGxpbmVfKCk7YnJlYWs7Y2FzZSBCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIuUFJFVklFV19UWVBFLklOU0VSVElPTl9NQVJLRVI6dGhpcy5zaG93SW5zZXJ0aW9uTWFya2VyXygpO2JyZWFrO2Nhc2UgQmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLlBSRVZJRVdfVFlQRS5SRVBMQUNFTUVOVF9GQURFOnRoaXMuc2hvd1JlcGxhY2VtZW50RmFkZV8oKX1hJiZcbmIuc2hvdWxkSGlnaGxpZ2h0Q29ubmVjdGlvbihhKSYmYS5oaWdobGlnaHQoKX07QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5tYXliZUhpZGVQcmV2aWV3Xz1mdW5jdGlvbihhKXtpZihhLmNsb3Nlc3Qpe3ZhciBiPXRoaXMuY2xvc2VzdENvbm5lY3Rpb25fIT1hLmNsb3Nlc3Q7YT10aGlzLmxvY2FsQ29ubmVjdGlvbl8hPWEubG9jYWw7dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8mJnRoaXMubG9jYWxDb25uZWN0aW9uXyYmKGJ8fGF8fHRoaXMud291bGREZWxldGVCbG9ja18pJiZ0aGlzLmhpZGVQcmV2aWV3XygpfWVsc2UgdGhpcy5oaWRlUHJldmlld18oKTt0aGlzLmxvY2FsQ29ubmVjdGlvbl89dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl89dGhpcy5tYXJrZXJDb25uZWN0aW9uXz1udWxsfTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuaGlkZVByZXZpZXdfPWZ1bmN0aW9uKCl7dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8mJnRoaXMuY2xvc2VzdENvbm5lY3Rpb25fLnRhcmdldEJsb2NrKCkmJnRoaXMud29ya3NwYWNlXy5nZXRSZW5kZXJlcigpLnNob3VsZEhpZ2hsaWdodENvbm5lY3Rpb24odGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8pJiZ0aGlzLmNsb3Nlc3RDb25uZWN0aW9uXy51bmhpZ2hsaWdodCgpO3RoaXMuZmFkZWRCbG9ja18/dGhpcy5oaWRlUmVwbGFjZW1lbnRGYWRlXygpOnRoaXMuaGlnaGxpZ2h0ZWRCbG9ja18/dGhpcy5oaWRlSW5zZXJ0aW9uSW5wdXRPdXRsaW5lXygpOnRoaXMubWFya2VyQ29ubmVjdGlvbl8mJnRoaXMuaGlkZUluc2VydGlvbk1hcmtlcl8oKX07XG5CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnNob3dJbnNlcnRpb25NYXJrZXJfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2NhbENvbm5lY3Rpb25fLGI9dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8sYz10aGlzLmxhc3RPblN0YWNrXyYmYT09dGhpcy5sYXN0T25TdGFja18/dGhpcy5sYXN0TWFya2VyXzp0aGlzLmZpcnN0TWFya2VyXzthPWMuZ2V0TWF0Y2hpbmdDb25uZWN0aW9uKGEuZ2V0U291cmNlQmxvY2soKSxhKTtpZihhPT10aGlzLm1hcmtlckNvbm5lY3Rpb25fKXRocm93IEVycm9yKFwiTWFkZSBpdCB0byBzaG93SW5zZXJ0aW9uTWFya2VyXyBldmVuIHRob3VnaCB0aGUgbWFya2VyIGlzbid0IGNoYW5naW5nXCIpO2MucmVuZGVyKCk7Yy5yZW5kZXJlZD0hMDtjLmdldFN2Z1Jvb3QoKS5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpO2EmJmImJmMucG9zaXRpb25OZWFyQ29ubmVjdGlvbihhLGIpO2ImJmEuY29ubmVjdChiKTt0aGlzLm1hcmtlckNvbm5lY3Rpb25fPVxuYX07XG5CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLmhpZGVJbnNlcnRpb25NYXJrZXJfPWZ1bmN0aW9uKCl7aWYodGhpcy5tYXJrZXJDb25uZWN0aW9uXyl7dmFyIGE9dGhpcy5tYXJrZXJDb25uZWN0aW9uXyxiPWEuZ2V0U291cmNlQmxvY2soKSxjPWIubmV4dENvbm5lY3Rpb24sZD1iLnByZXZpb3VzQ29ubmVjdGlvbixlPWIub3V0cHV0Q29ubmVjdGlvbjtlPWEudHlwZT09QmxvY2tseS5JTlBVVF9WQUxVRSYmIShlJiZlLnRhcmdldENvbm5lY3Rpb24pOyEoYSE9Y3x8ZCYmZC50YXJnZXRDb25uZWN0aW9uKXx8ZT9hLnRhcmdldEJsb2NrKCkudW5wbHVnKCExKTphLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQmJmEhPWM/KGM9YS50YXJnZXRDb25uZWN0aW9uLGMuZ2V0U291cmNlQmxvY2soKS51bnBsdWcoITEpLGQ9ZD9kLnRhcmdldENvbm5lY3Rpb246bnVsbCxiLnVucGx1ZyghMCksZCYmZC5jb25uZWN0KGMpKTpiLnVucGx1ZyghMCk7aWYoYS50YXJnZXRDb25uZWN0aW9uKXRocm93IEVycm9yKFwibWFya2VyQ29ubmVjdGlvbl8gc3RpbGwgY29ubmVjdGVkIGF0IHRoZSBlbmQgb2YgZGlzY29ubmVjdEluc2VydGlvbk1hcmtlclwiKTt0aGlzLm1hcmtlckNvbm5lY3Rpb25fPVxubnVsbDtiLmdldFN2Z1Jvb3QoKS5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIil9ZWxzZSBjb25zb2xlLmxvZyhcIk5vIGluc2VydGlvbiBtYXJrZXIgY29ubmVjdGlvbiB0byBkaXNjb25uZWN0XCIpfTtCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnNob3dJbnNlcnRpb25JbnB1dE91dGxpbmVfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl87dGhpcy5oaWdobGlnaHRlZEJsb2NrXz1hLmdldFNvdXJjZUJsb2NrKCk7dGhpcy5oaWdobGlnaHRlZEJsb2NrXy5oaWdobGlnaHRTaGFwZUZvcklucHV0KGEsITApfTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuaGlkZUluc2VydGlvbklucHV0T3V0bGluZV89ZnVuY3Rpb24oKXt0aGlzLmhpZ2hsaWdodGVkQmxvY2tfLmhpZ2hsaWdodFNoYXBlRm9ySW5wdXQodGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8sITEpO3RoaXMuaGlnaGxpZ2h0ZWRCbG9ja189bnVsbH07QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5zaG93UmVwbGFjZW1lbnRGYWRlXz1mdW5jdGlvbigpe3RoaXMuZmFkZWRCbG9ja189dGhpcy5jbG9zZXN0Q29ubmVjdGlvbl8udGFyZ2V0QmxvY2soKTt0aGlzLmZhZGVkQmxvY2tfLmZhZGVGb3JSZXBsYWNlbWVudCghMCl9O0Jsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuaGlkZVJlcGxhY2VtZW50RmFkZV89ZnVuY3Rpb24oKXt0aGlzLmZhZGVkQmxvY2tfLmZhZGVGb3JSZXBsYWNlbWVudCghMSk7dGhpcy5mYWRlZEJsb2NrXz1udWxsfTtcbkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5wcm90b3R5cGUuZ2V0SW5zZXJ0aW9uTWFya2Vycz1mdW5jdGlvbigpe3ZhciBhPVtdO3RoaXMuZmlyc3RNYXJrZXJfJiZhLnB1c2godGhpcy5maXJzdE1hcmtlcl8pO3RoaXMubGFzdE1hcmtlcl8mJmEucHVzaCh0aGlzLmxhc3RNYXJrZXJfKTtyZXR1cm4gYX07QmxvY2tseS5CbG9ja0RyYWdnZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdnaW5nQmxvY2tfPWE7dGhpcy53b3Jrc3BhY2VfPWI7dGhpcy5kcmFnZ2VkQ29ubmVjdGlvbk1hbmFnZXJfPW5ldyBCbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIodGhpcy5kcmFnZ2luZ0Jsb2NrXyk7dGhpcy5kZWxldGVBcmVhXz1udWxsO3RoaXMud291bGREZWxldGVCbG9ja189ITE7dGhpcy5zdGFydFhZXz10aGlzLmRyYWdnaW5nQmxvY2tfLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTt0aGlzLmRyYWdJY29uRGF0YV89QmxvY2tseS5CbG9ja0RyYWdnZXIuaW5pdEljb25EYXRhXyhhKX07QmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmRyYWdJY29uRGF0YV8ubGVuZ3RoPTA7dGhpcy5kcmFnZ2VkQ29ubmVjdGlvbk1hbmFnZXJfJiZ0aGlzLmRyYWdnZWRDb25uZWN0aW9uTWFuYWdlcl8uZGlzcG9zZSgpfTtcbkJsb2NrbHkuQmxvY2tEcmFnZ2VyLmluaXRJY29uRGF0YV89ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hLmdldERlc2NlbmRhbnRzKCExKTtmb3IodmFyIGM9MCxkO2Q9YVtjXTtjKyspe2Q9ZC5nZXRJY29ucygpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj17bG9jYXRpb246ZFtlXS5nZXRJY29uTG9jYXRpb24oKSxpY29uOmRbZV19O2IucHVzaChmKX19cmV0dXJuIGJ9O1xuQmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLnN0YXJ0QmxvY2tEcmFnPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5FdmVudHMuZ2V0R3JvdXAoKXx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApO3RoaXMuZmlyZURyYWdTdGFydEV2ZW50XygpO3RoaXMud29ya3NwYWNlXy5pc011dGF0b3ImJnRoaXMuZHJhZ2dpbmdCbG9ja18uYnJpbmdUb0Zyb250KCk7QmxvY2tseS51dGlscy5kb20uc3RhcnRUZXh0V2lkdGhDYWNoZSgpO3RoaXMud29ya3NwYWNlXy5zZXRSZXNpemVzRW5hYmxlZCghMSk7QmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFVpU3RvcCgpO2lmKHRoaXMuZHJhZ2dpbmdCbG9ja18uZ2V0UGFyZW50KCl8fGImJnRoaXMuZHJhZ2dpbmdCbG9ja18ubmV4dENvbm5lY3Rpb24mJnRoaXMuZHJhZ2dpbmdCbG9ja18ubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKSl0aGlzLmRyYWdnaW5nQmxvY2tfLnVucGx1ZyhiKSxhPXRoaXMucGl4ZWxzVG9Xb3Jrc3BhY2VVbml0c18oYSksXG5hPUJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5zdW0odGhpcy5zdGFydFhZXyxhKSx0aGlzLmRyYWdnaW5nQmxvY2tfLnRyYW5zbGF0ZShhLngsYS55KSxCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0VWlFZmZlY3QodGhpcy5kcmFnZ2luZ0Jsb2NrXyksdGhpcy5kcmFnZ2VkQ29ubmVjdGlvbk1hbmFnZXJfLnVwZGF0ZUF2YWlsYWJsZUNvbm5lY3Rpb25zKCk7dGhpcy5kcmFnZ2luZ0Jsb2NrXy5zZXREcmFnZ2luZyghMCk7dGhpcy5kcmFnZ2luZ0Jsb2NrXy5tb3ZlVG9EcmFnU3VyZmFjZSgpOyhhPXRoaXMud29ya3NwYWNlXy5nZXRUb29sYm94KCkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmFkZFN0eWxlJiYoYj10aGlzLmRyYWdnaW5nQmxvY2tfLmlzRGVsZXRhYmxlKCk/XCJibG9ja2x5VG9vbGJveERlbGV0ZVwiOlwiYmxvY2tseVRvb2xib3hHcmFiXCIsYS5hZGRTdHlsZShiKSl9O1xuQmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLmZpcmVEcmFnU3RhcnRFdmVudF89ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQmxvY2tseS5FdmVudHMuVWkodGhpcy5kcmFnZ2luZ0Jsb2NrXyxcImRyYWdTdGFydFwiLG51bGwsdGhpcy5kcmFnZ2luZ0Jsb2NrXy5nZXREZXNjZW5kYW50cyghMSkpO0Jsb2NrbHkuRXZlbnRzLmZpcmUoYSl9O0Jsb2NrbHkuQmxvY2tEcmFnZ2VyLnByb3RvdHlwZS5kcmFnQmxvY2s9ZnVuY3Rpb24oYSxiKXtiPXRoaXMucGl4ZWxzVG9Xb3Jrc3BhY2VVbml0c18oYik7dmFyIGM9QmxvY2tseS51dGlscy5Db29yZGluYXRlLnN1bSh0aGlzLnN0YXJ0WFlfLGIpO3RoaXMuZHJhZ2dpbmdCbG9ja18ubW92ZUR1cmluZ0RyYWcoYyk7dGhpcy5kcmFnSWNvbnNfKGIpO3RoaXMuZGVsZXRlQXJlYV89dGhpcy53b3Jrc3BhY2VfLmlzRGVsZXRlQXJlYShhKTt0aGlzLmRyYWdnZWRDb25uZWN0aW9uTWFuYWdlcl8udXBkYXRlKGIsdGhpcy5kZWxldGVBcmVhXyk7dGhpcy51cGRhdGVDdXJzb3JEdXJpbmdCbG9ja0RyYWdfKCl9O1xuQmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLmVuZEJsb2NrRHJhZz1mdW5jdGlvbihhLGIpe3RoaXMuZHJhZ0Jsb2NrKGEsYik7dGhpcy5kcmFnSWNvbkRhdGFfPVtdO3RoaXMuZmlyZURyYWdFbmRFdmVudF8oKTtCbG9ja2x5LnV0aWxzLmRvbS5zdG9wVGV4dFdpZHRoQ2FjaGUoKTtCbG9ja2x5LmJsb2NrQW5pbWF0aW9ucy5kaXNjb25uZWN0VWlTdG9wKCk7YT10aGlzLnBpeGVsc1RvV29ya3NwYWNlVW5pdHNfKGIpO2I9QmxvY2tseS51dGlscy5Db29yZGluYXRlLnN1bSh0aGlzLnN0YXJ0WFlfLGEpO3RoaXMuZHJhZ2dpbmdCbG9ja18ubW92ZU9mZkRyYWdTdXJmYWNlKGIpO3RoaXMubWF5YmVEZWxldGVCbG9ja18oKXx8KHRoaXMuZHJhZ2dpbmdCbG9ja18ubW92ZUNvbm5lY3Rpb25zKGEueCxhLnkpLHRoaXMuZHJhZ2dpbmdCbG9ja18uc2V0RHJhZ2dpbmcoITEpLHRoaXMuZmlyZU1vdmVFdmVudF8oKSx0aGlzLmRyYWdnZWRDb25uZWN0aW9uTWFuYWdlcl8ud291bGRDb25uZWN0QmxvY2soKT9cbnRoaXMuZHJhZ2dlZENvbm5lY3Rpb25NYW5hZ2VyXy5hcHBseUNvbm5lY3Rpb25zKCk6dGhpcy5kcmFnZ2luZ0Jsb2NrXy5yZW5kZXIoKSx0aGlzLmRyYWdnaW5nQmxvY2tfLnNjaGVkdWxlU25hcEFuZEJ1bXAoKSk7dGhpcy53b3Jrc3BhY2VfLnNldFJlc2l6ZXNFbmFibGVkKCEwKTsoYT10aGlzLndvcmtzcGFjZV8uZ2V0VG9vbGJveCgpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5yZW1vdmVTdHlsZSYmKGI9dGhpcy5kcmFnZ2luZ0Jsb2NrXy5pc0RlbGV0YWJsZSgpP1wiYmxvY2tseVRvb2xib3hEZWxldGVcIjpcImJsb2NrbHlUb29sYm94R3JhYlwiLGEucmVtb3ZlU3R5bGUoYikpO0Jsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCExKX07XG5CbG9ja2x5LkJsb2NrRHJhZ2dlci5wcm90b3R5cGUuZmlyZURyYWdFbmRFdmVudF89ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQmxvY2tseS5FdmVudHMuVWkodGhpcy5kcmFnZ2luZ0Jsb2NrXyxcImRyYWdTdG9wXCIsdGhpcy5kcmFnZ2luZ0Jsb2NrXy5nZXREZXNjZW5kYW50cyghMSksbnVsbCk7QmxvY2tseS5FdmVudHMuZmlyZShhKX07QmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLmZpcmVNb3ZlRXZlbnRfPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IEJsb2NrbHkuRXZlbnRzLkJsb2NrTW92ZSh0aGlzLmRyYWdnaW5nQmxvY2tfKTthLm9sZENvb3JkaW5hdGU9dGhpcy5zdGFydFhZXzthLnJlY29yZE5ldygpO0Jsb2NrbHkuRXZlbnRzLmZpcmUoYSl9O1xuQmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLm1heWJlRGVsZXRlQmxvY2tfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLnRyYXNoY2FuO3RoaXMud291bGREZWxldGVCbG9ja18/KGEmJnNldFRpbWVvdXQoYS5jbG9zZUxpZC5iaW5kKGEpLDEwMCksdGhpcy5maXJlTW92ZUV2ZW50XygpLHRoaXMuZHJhZ2dpbmdCbG9ja18uZGlzcG9zZSghMSwhMCksQmxvY2tseS5kcmFnZ2luZ0Nvbm5lY3Rpb25zPVtdKTphJiZhLmNsb3NlTGlkKCk7cmV0dXJuIHRoaXMud291bGREZWxldGVCbG9ja199O1xuQmxvY2tseS5CbG9ja0RyYWdnZXIucHJvdG90eXBlLnVwZGF0ZUN1cnNvckR1cmluZ0Jsb2NrRHJhZ189ZnVuY3Rpb24oKXt0aGlzLndvdWxkRGVsZXRlQmxvY2tfPXRoaXMuZHJhZ2dlZENvbm5lY3Rpb25NYW5hZ2VyXy53b3VsZERlbGV0ZUJsb2NrKCk7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLnRyYXNoY2FuO3RoaXMud291bGREZWxldGVCbG9ja18/KHRoaXMuZHJhZ2dpbmdCbG9ja18uc2V0RGVsZXRlU3R5bGUoITApLHRoaXMuZGVsZXRlQXJlYV89PUJsb2NrbHkuREVMRVRFX0FSRUFfVFJBU0gmJmEmJmEuc2V0TGlkT3BlbighMCkpOih0aGlzLmRyYWdnaW5nQmxvY2tfLnNldERlbGV0ZVN0eWxlKCExKSxhJiZhLnNldExpZE9wZW4oITEpKX07XG5CbG9ja2x5LkJsb2NrRHJhZ2dlci5wcm90b3R5cGUucGl4ZWxzVG9Xb3Jrc3BhY2VVbml0c189ZnVuY3Rpb24oYSl7YT1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGEueC90aGlzLndvcmtzcGFjZV8uc2NhbGUsYS55L3RoaXMud29ya3NwYWNlXy5zY2FsZSk7dGhpcy53b3Jrc3BhY2VfLmlzTXV0YXRvciYmYS5zY2FsZSgxL3RoaXMud29ya3NwYWNlXy5vcHRpb25zLnBhcmVudFdvcmtzcGFjZS5zY2FsZSk7cmV0dXJuIGF9O0Jsb2NrbHkuQmxvY2tEcmFnZ2VyLnByb3RvdHlwZS5kcmFnSWNvbnNfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5kcmFnSWNvbkRhdGFfLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuZHJhZ0ljb25EYXRhX1tiXTtjLmljb24uc2V0SWNvbkxvY2F0aW9uKEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5zdW0oYy5sb2NhdGlvbixhKSl9fTtcbkJsb2NrbHkuQmxvY2tEcmFnZ2VyLnByb3RvdHlwZS5nZXRJbnNlcnRpb25NYXJrZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhZ2dlZENvbm5lY3Rpb25NYW5hZ2VyXyYmdGhpcy5kcmFnZ2VkQ29ubmVjdGlvbk1hbmFnZXJfLmdldEluc2VydGlvbk1hcmtlcnM/dGhpcy5kcmFnZ2VkQ29ubmVjdGlvbk1hbmFnZXJfLmdldEluc2VydGlvbk1hcmtlcnMoKTpbXX07QmxvY2tseS5Db25uZWN0aW9uQ2hlY2tlcj1mdW5jdGlvbigpe307QmxvY2tseS5Db25uZWN0aW9uQ2hlY2tlci5wcm90b3R5cGUuY2FuQ29ubmVjdD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5jYW5Db25uZWN0V2l0aFJlYXNvbihhLGIsYyxkKT09QmxvY2tseS5Db25uZWN0aW9uLkNBTl9DT05ORUNUfTtCbG9ja2x5LkNvbm5lY3Rpb25DaGVja2VyLnByb3RvdHlwZS5jYW5Db25uZWN0V2l0aFJlYXNvbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmRvU2FmZXR5Q2hlY2tzKGEsYik7cmV0dXJuIGUhPUJsb2NrbHkuQ29ubmVjdGlvbi5DQU5fQ09OTkVDVD9lOnRoaXMuZG9UeXBlQ2hlY2tzKGEsYik/YyYmIXRoaXMuZG9EcmFnQ2hlY2tzKGEsYixkfHwwKT9CbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX0RSQUdfQ0hFQ0tTX0ZBSUxFRDpCbG9ja2x5LkNvbm5lY3Rpb24uQ0FOX0NPTk5FQ1Q6QmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9DSEVDS1NfRkFJTEVEfTtcbkJsb2NrbHkuQ29ubmVjdGlvbkNoZWNrZXIucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbihhLGIsYyl7c3dpdGNoKGEpe2Nhc2UgQmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9TRUxGX0NPTk5FQ1RJT046cmV0dXJuXCJBdHRlbXB0ZWQgdG8gY29ubmVjdCBhIGJsb2NrIHRvIGl0c2VsZi5cIjtjYXNlIEJsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fRElGRkVSRU5UX1dPUktTUEFDRVM6cmV0dXJuXCJCbG9ja3Mgbm90IG9uIHNhbWUgd29ya3NwYWNlLlwiO2Nhc2UgQmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9XUk9OR19UWVBFOnJldHVyblwiQXR0ZW1wdCB0byBjb25uZWN0IGluY29tcGF0aWJsZSB0eXBlcy5cIjtjYXNlIEJsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fVEFSR0VUX05VTEw6cmV0dXJuXCJUYXJnZXQgY29ubmVjdGlvbiBpcyBudWxsLlwiO2Nhc2UgQmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9DSEVDS1NfRkFJTEVEOnJldHVyblwiQ29ubmVjdGlvbiBjaGVja3MgZmFpbGVkLiBcIitcbihiK1wiIGV4cGVjdGVkIFwiK2IuZ2V0Q2hlY2soKStcIiwgZm91bmQgXCIrYy5nZXRDaGVjaygpKTtjYXNlIEJsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fU0hBRE9XX1BBUkVOVDpyZXR1cm5cIkNvbm5lY3Rpbmcgbm9uLXNoYWRvdyB0byBzaGFkb3cgYmxvY2suXCI7Y2FzZSBCbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX0RSQUdfQ0hFQ0tTX0ZBSUxFRDpyZXR1cm5cIkRyYWcgY2hlY2tzIGZhaWxlZC5cIjtkZWZhdWx0OnJldHVyblwiVW5rbm93biBjb25uZWN0aW9uIGZhaWx1cmU6IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiFcIn19O1xuQmxvY2tseS5Db25uZWN0aW9uQ2hlY2tlci5wcm90b3R5cGUuZG9TYWZldHlDaGVja3M9ZnVuY3Rpb24oYSxiKXtpZighYXx8IWIpcmV0dXJuIEJsb2NrbHkuQ29ubmVjdGlvbi5SRUFTT05fVEFSR0VUX05VTEw7aWYoYS5pc1N1cGVyaW9yKCkpdmFyIGM9YS5nZXRTb3VyY2VCbG9jaygpLGQ9Yi5nZXRTb3VyY2VCbG9jaygpO2Vsc2UgZD1hLmdldFNvdXJjZUJsb2NrKCksYz1iLmdldFNvdXJjZUJsb2NrKCk7cmV0dXJuIGM9PWQ/QmxvY2tseS5Db25uZWN0aW9uLlJFQVNPTl9TRUxGX0NPTk5FQ1RJT046Yi50eXBlIT1CbG9ja2x5Lk9QUE9TSVRFX1RZUEVbYS50eXBlXT9CbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX1dST05HX1RZUEU6Yy53b3Jrc3BhY2UhPT1kLndvcmtzcGFjZT9CbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX0RJRkZFUkVOVF9XT1JLU1BBQ0VTOmMuaXNTaGFkb3coKSYmIWQuaXNTaGFkb3coKT9CbG9ja2x5LkNvbm5lY3Rpb24uUkVBU09OX1NIQURPV19QQVJFTlQ6XG5CbG9ja2x5LkNvbm5lY3Rpb24uQ0FOX0NPTk5FQ1R9O0Jsb2NrbHkuQ29ubmVjdGlvbkNoZWNrZXIucHJvdG90eXBlLmRvVHlwZUNoZWNrcz1mdW5jdGlvbihhLGIpe2E9YS5nZXRDaGVjaygpO2I9Yi5nZXRDaGVjaygpO2lmKCFhfHwhYilyZXR1cm4hMDtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZigtMSE9Yi5pbmRleE9mKGFbY10pKXJldHVybiEwO3JldHVybiExfTtcbkJsb2NrbHkuQ29ubmVjdGlvbkNoZWNrZXIucHJvdG90eXBlLmRvRHJhZ0NoZWNrcz1mdW5jdGlvbihhLGIsYyl7aWYoYS5kaXN0YW5jZUZyb20oYik+Y3x8Yi5nZXRTb3VyY2VCbG9jaygpLmlzSW5zZXJ0aW9uTWFya2VyKCkpcmV0dXJuITE7c3dpdGNoKGIudHlwZSl7Y2FzZSBCbG9ja2x5LlBSRVZJT1VTX1NUQVRFTUVOVDpyZXR1cm4gdGhpcy5jYW5Db25uZWN0VG9QcmV2aW91c18oYSxiKTtjYXNlIEJsb2NrbHkuT1VUUFVUX1ZBTFVFOmlmKGIuaXNDb25uZWN0ZWQoKSYmIWIudGFyZ2V0QmxvY2soKS5pc0luc2VydGlvbk1hcmtlcigpfHxhLmlzQ29ubmVjdGVkKCkpcmV0dXJuITE7YnJlYWs7Y2FzZSBCbG9ja2x5LklOUFVUX1ZBTFVFOmlmKGIuaXNDb25uZWN0ZWQoKSYmIWIudGFyZ2V0QmxvY2soKS5pc01vdmFibGUoKSYmIWIudGFyZ2V0QmxvY2soKS5pc1NoYWRvdygpKXJldHVybiExO2JyZWFrO2Nhc2UgQmxvY2tseS5ORVhUX1NUQVRFTUVOVDppZihiLmlzQ29ubmVjdGVkKCkmJlxuIWEuZ2V0U291cmNlQmxvY2soKS5uZXh0Q29ubmVjdGlvbiYmIWIudGFyZ2V0QmxvY2soKS5pc1NoYWRvdygpJiZiLnRhcmdldEJsb2NrKCkubmV4dENvbm5lY3Rpb24pcmV0dXJuITE7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMX1yZXR1cm4tMSE9QmxvY2tseS5kcmFnZ2luZ0Nvbm5lY3Rpb25zLmluZGV4T2YoYik/ITE6ITB9O0Jsb2NrbHkuQ29ubmVjdGlvbkNoZWNrZXIucHJvdG90eXBlLmNhbkNvbm5lY3RUb1ByZXZpb3VzXz1mdW5jdGlvbihhLGIpe2lmKGEudGFyZ2V0Q29ubmVjdGlvbnx8LTEhPUJsb2NrbHkuZHJhZ2dpbmdDb25uZWN0aW9ucy5pbmRleE9mKGIpKXJldHVybiExO2lmKCFiLnRhcmdldENvbm5lY3Rpb24pcmV0dXJuITA7YT1iLnRhcmdldEJsb2NrKCk7cmV0dXJuIGEuaXNJbnNlcnRpb25NYXJrZXIoKT8hYS5nZXRQcmV2aW91c0Jsb2NrKCk6ITF9O1xuQmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuQ09OTkVDVElPTl9DSEVDS0VSLEJsb2NrbHkucmVnaXN0cnkuREVGQVVMVCxCbG9ja2x5LkNvbm5lY3Rpb25DaGVja2VyKTtCbG9ja2x5LlZhcmlhYmxlTWFwPWZ1bmN0aW9uKGEpe3RoaXMudmFyaWFibGVNYXBfPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy53b3Jrc3BhY2U9YX07QmxvY2tseS5WYXJpYWJsZU1hcC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnZhcmlhYmxlTWFwXz1PYmplY3QuY3JlYXRlKG51bGwpfTtCbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5yZW5hbWVWYXJpYWJsZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VmFyaWFibGUoYixhLnR5cGUpLGQ9dGhpcy53b3Jrc3BhY2UuZ2V0QWxsQmxvY2tzKCExKTtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMCk7dHJ5e2MmJmMuZ2V0SWQoKSE9YS5nZXRJZCgpP3RoaXMucmVuYW1lVmFyaWFibGVXaXRoQ29uZmxpY3RfKGEsYixjLGQpOnRoaXMucmVuYW1lVmFyaWFibGVBbmRVc2VzXyhhLGIsZCl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9fTtcbkJsb2NrbHkuVmFyaWFibGVNYXAucHJvdG90eXBlLnJlbmFtZVZhcmlhYmxlQnlJZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VmFyaWFibGVCeUlkKGEpO2lmKCFjKXRocm93IEVycm9yKFwiVHJpZWQgdG8gcmVuYW1lIGEgdmFyaWFibGUgdGhhdCBkaWRuJ3QgZXhpc3QuIElEOiBcIithKTt0aGlzLnJlbmFtZVZhcmlhYmxlKGMsYil9O0Jsb2NrbHkuVmFyaWFibGVNYXAucHJvdG90eXBlLnJlbmFtZVZhcmlhYmxlQW5kVXNlc189ZnVuY3Rpb24oYSxiLGMpe0Jsb2NrbHkuRXZlbnRzLmZpcmUobmV3IEJsb2NrbHkuRXZlbnRzLlZhclJlbmFtZShhLGIpKTthLm5hbWU9Yjtmb3IoYj0wO2I8Yy5sZW5ndGg7YisrKWNbYl0udXBkYXRlVmFyTmFtZShhKX07XG5CbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5yZW5hbWVWYXJpYWJsZVdpdGhDb25mbGljdF89ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS50eXBlO2IhPWMubmFtZSYmdGhpcy5yZW5hbWVWYXJpYWJsZUFuZFVzZXNfKGMsYixkKTtmb3IoYj0wO2I8ZC5sZW5ndGg7YisrKWRbYl0ucmVuYW1lVmFyQnlJZChhLmdldElkKCksYy5nZXRJZCgpKTtCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5WYXJEZWxldGUoYSkpO2E9dGhpcy5nZXRWYXJpYWJsZXNPZlR5cGUoZSkuaW5kZXhPZihhKTt0aGlzLnZhcmlhYmxlTWFwX1tlXS5zcGxpY2UoYSwxKX07XG5CbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5jcmVhdGVWYXJpYWJsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nZXRWYXJpYWJsZShhLGIpO2lmKGQpe2lmKGMmJmQuZ2V0SWQoKSE9Yyl0aHJvdyBFcnJvcignVmFyaWFibGUgXCInK2ErJ1wiIGlzIGFscmVhZHkgaW4gdXNlIGFuZCBpdHMgaWQgaXMgXCInK2QuZ2V0SWQoKSsnXCIgd2hpY2ggY29uZmxpY3RzIHdpdGggdGhlIHBhc3NlZCBpbiBpZCwgXCInK2MrJ1wiLicpO3JldHVybiBkfWlmKGMmJnRoaXMuZ2V0VmFyaWFibGVCeUlkKGMpKXRocm93IEVycm9yKCdWYXJpYWJsZSBpZCwgXCInK2MrJ1wiLCBpcyBhbHJlYWR5IGluIHVzZS4nKTtkPWN8fEJsb2NrbHkudXRpbHMuZ2VuVWlkKCk7Yj1ifHxcIlwiO2Q9bmV3IEJsb2NrbHkuVmFyaWFibGVNb2RlbCh0aGlzLndvcmtzcGFjZSxhLGIsZCk7YT10aGlzLnZhcmlhYmxlTWFwX1tiXXx8W107YS5wdXNoKGQpO2RlbGV0ZSB0aGlzLnZhcmlhYmxlTWFwX1tiXTt0aGlzLnZhcmlhYmxlTWFwX1tiXT1cbmE7cmV0dXJuIGR9O0Jsb2NrbHkuVmFyaWFibGVNYXAucHJvdG90eXBlLmRlbGV0ZVZhcmlhYmxlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnZhcmlhYmxlTWFwX1thLnR5cGVdLGM9MCxkO2Q9YltjXTtjKyspaWYoZC5nZXRJZCgpPT1hLmdldElkKCkpe2Iuc3BsaWNlKGMsMSk7QmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuVmFyRGVsZXRlKGEpKTticmVha319O1xuQmxvY2tseS5WYXJpYWJsZU1hcC5wcm90b3R5cGUuZGVsZXRlVmFyaWFibGVCeUlkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VmFyaWFibGVCeUlkKGEpO2lmKGIpe3ZhciBjPWIubmFtZSxkPXRoaXMuZ2V0VmFyaWFibGVVc2VzQnlJZChhKTthPTA7Zm9yKHZhciBlO2U9ZFthXTthKyspaWYoXCJwcm9jZWR1cmVzX2RlZm5vcmV0dXJuXCI9PWUudHlwZXx8XCJwcm9jZWR1cmVzX2RlZnJldHVyblwiPT1lLnR5cGUpe2E9ZS5nZXRGaWVsZFZhbHVlKFwiTkFNRVwiKTtjPUJsb2NrbHkuTXNnLkNBTk5PVF9ERUxFVEVfVkFSSUFCTEVfUFJPQ0VEVVJFLnJlcGxhY2UoXCIlMVwiLGMpLnJlcGxhY2UoXCIlMlwiLGEpO0Jsb2NrbHkuYWxlcnQoYyk7cmV0dXJufXZhciBmPXRoaXM7MTxkLmxlbmd0aD8oYz1CbG9ja2x5Lk1zZy5ERUxFVEVfVkFSSUFCTEVfQ09ORklSTUFUSU9OLnJlcGxhY2UoXCIlMVwiLFN0cmluZyhkLmxlbmd0aCkpLnJlcGxhY2UoXCIlMlwiLGMpLEJsb2NrbHkuY29uZmlybShjLGZ1bmN0aW9uKGcpe2cmJlxuYiYmZi5kZWxldGVWYXJpYWJsZUludGVybmFsKGIsZCl9KSk6Zi5kZWxldGVWYXJpYWJsZUludGVybmFsKGIsZCl9ZWxzZSBjb25zb2xlLndhcm4oXCJDYW4ndCBkZWxldGUgbm9uLWV4aXN0ZW50IHZhcmlhYmxlOiBcIithKX07QmxvY2tseS5WYXJpYWJsZU1hcC5wcm90b3R5cGUuZGVsZXRlVmFyaWFibGVJbnRlcm5hbD1mdW5jdGlvbihhLGIpe3ZhciBjPUJsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCk7Y3x8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApO3RyeXtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyliW2RdLmRpc3Bvc2UoITApO3RoaXMuZGVsZXRlVmFyaWFibGUoYSl9ZmluYWxseXtjfHxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9fTtcbkJsb2NrbHkuVmFyaWFibGVNYXAucHJvdG90eXBlLmdldFZhcmlhYmxlPWZ1bmN0aW9uKGEsYil7aWYoYj10aGlzLnZhcmlhYmxlTWFwX1tifHxcIlwiXSlmb3IodmFyIGM9MCxkO2Q9YltjXTtjKyspaWYoQmxvY2tseS5OYW1lcy5lcXVhbHMoZC5uYW1lLGEpKXJldHVybiBkO3JldHVybiBudWxsfTtCbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5nZXRWYXJpYWJsZUJ5SWQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9iamVjdC5rZXlzKHRoaXMudmFyaWFibGVNYXBfKSxjPTA7YzxiLmxlbmd0aDtjKyspZm9yKHZhciBkPWJbY10sZT0wLGY7Zj10aGlzLnZhcmlhYmxlTWFwX1tkXVtlXTtlKyspaWYoZi5nZXRJZCgpPT1hKXJldHVybiBmO3JldHVybiBudWxsfTtCbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5nZXRWYXJpYWJsZXNPZlR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGE9dGhpcy52YXJpYWJsZU1hcF9bYXx8XCJcIl0pP2Euc2xpY2UoKTpbXX07XG5CbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5nZXRWYXJpYWJsZVR5cGVzPWZ1bmN0aW9uKGEpe3ZhciBiPXt9O0Jsb2NrbHkudXRpbHMub2JqZWN0Lm1peGluKGIsdGhpcy52YXJpYWJsZU1hcF8pO2EmJmEuZ2V0UG90ZW50aWFsVmFyaWFibGVNYXAoKSYmQmxvY2tseS51dGlscy5vYmplY3QubWl4aW4oYixhLmdldFBvdGVudGlhbFZhcmlhYmxlTWFwKCkudmFyaWFibGVNYXBfKTthPU9iamVjdC5rZXlzKGIpO2I9ITE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspXCJcIj09YVtjXSYmKGI9ITApO2J8fGEucHVzaChcIlwiKTtyZXR1cm4gYX07QmxvY2tseS5WYXJpYWJsZU1hcC5wcm90b3R5cGUuZ2V0QWxsVmFyaWFibGVzPWZ1bmN0aW9uKCl7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLnZhcmlhYmxlTWFwXylhPWEuY29uY2F0KHRoaXMudmFyaWFibGVNYXBfW2JdKTtyZXR1cm4gYX07XG5CbG9ja2x5LlZhcmlhYmxlTWFwLnByb3RvdHlwZS5nZXRBbGxWYXJpYWJsZU5hbWVzPWZ1bmN0aW9uKCl7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLnZhcmlhYmxlTWFwXylmb3IodmFyIGM9dGhpcy52YXJpYWJsZU1hcF9bYl0sZD0wLGU7ZT1jW2RdO2QrKylhLnB1c2goZS5uYW1lKTtyZXR1cm4gYX07QmxvY2tseS5WYXJpYWJsZU1hcC5wcm90b3R5cGUuZ2V0VmFyaWFibGVVc2VzQnlJZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz10aGlzLndvcmtzcGFjZS5nZXRBbGxCbG9ja3MoITEpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXS5nZXRWYXJNb2RlbHMoKTtpZihlKWZvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWVbZl0uZ2V0SWQoKT09YSYmYi5wdXNoKGNbZF0pfXJldHVybiBifTtCbG9ja2x5LldvcmtzcGFjZT1mdW5jdGlvbihhKXt0aGlzLmlkPUJsb2NrbHkudXRpbHMuZ2VuVWlkKCk7QmxvY2tseS5Xb3Jrc3BhY2UuV29ya3NwYWNlREJfW3RoaXMuaWRdPXRoaXM7dGhpcy5vcHRpb25zPWF8fG5ldyBCbG9ja2x5Lk9wdGlvbnMoe30pO3RoaXMuUlRMPSEhdGhpcy5vcHRpb25zLlJUTDt0aGlzLmhvcml6b250YWxMYXlvdXQ9ISF0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbExheW91dDt0aGlzLnRvb2xib3hQb3NpdGlvbj10aGlzLm9wdGlvbnMudG9vbGJveFBvc2l0aW9uO3RoaXMuY29ubmVjdGlvbkNoZWNrZXI9bmV3IChCbG9ja2x5LnJlZ2lzdHJ5LmdldENsYXNzRnJvbU9wdGlvbnMoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkNPTk5FQ1RJT05fQ0hFQ0tFUix0aGlzLm9wdGlvbnMpKSh0aGlzKTt0aGlzLnRvcEJsb2Nrc189W107dGhpcy50b3BDb21tZW50c189W107dGhpcy5jb21tZW50REJfPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5saXN0ZW5lcnNfPVtdO3RoaXMudW5kb1N0YWNrXz1cbltdO3RoaXMucmVkb1N0YWNrXz1bXTt0aGlzLmJsb2NrREJfPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy50eXBlZEJsb2Nrc0RCXz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMudmFyaWFibGVNYXBfPW5ldyBCbG9ja2x5LlZhcmlhYmxlTWFwKHRoaXMpO3RoaXMucG90ZW50aWFsVmFyaWFibGVNYXBfPW51bGx9O0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5yZW5kZXJlZD0hMTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuaXNDbGVhcmluZz0hMTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuTUFYX1VORE89MTAyNDtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuY29ubmVjdGlvbkRCTGlzdD1udWxsO0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5lcnNfLmxlbmd0aD0wO3RoaXMuY2xlYXIoKTtkZWxldGUgQmxvY2tseS5Xb3Jrc3BhY2UuV29ya3NwYWNlREJfW3RoaXMuaWRdfTtcbkJsb2NrbHkuV29ya3NwYWNlLlNDQU5fQU5HTEU9MztCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuc29ydE9iamVjdHNfPWZ1bmN0aW9uKGEsYil7YT1hLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTtiPWIuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3JldHVybiBhLnkrQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnNvcnRPYmplY3RzXy5vZmZzZXQqYS54LShiLnkrQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnNvcnRPYmplY3RzXy5vZmZzZXQqYi54KX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmFkZFRvcEJsb2NrPWZ1bmN0aW9uKGEpe3RoaXMudG9wQmxvY2tzXy5wdXNoKGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5yZW1vdmVUb3BCbG9jaz1mdW5jdGlvbihhKXtpZighQmxvY2tseS51dGlscy5hcnJheVJlbW92ZSh0aGlzLnRvcEJsb2Nrc18sYSkpdGhyb3cgRXJyb3IoXCJCbG9jayBub3QgcHJlc2VudCBpbiB3b3Jrc3BhY2UncyBsaXN0IG9mIHRvcC1tb3N0IGJsb2Nrcy5cIik7fTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0VG9wQmxvY2tzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLmNvbmNhdCh0aGlzLnRvcEJsb2Nrc18pO2EmJjE8Yi5sZW5ndGgmJih0aGlzLnNvcnRPYmplY3RzXy5vZmZzZXQ9TWF0aC5zaW4oQmxvY2tseS51dGlscy5tYXRoLnRvUmFkaWFucyhCbG9ja2x5LldvcmtzcGFjZS5TQ0FOX0FOR0xFKSksdGhpcy5SVEwmJih0aGlzLnNvcnRPYmplY3RzXy5vZmZzZXQqPS0xKSxiLnNvcnQodGhpcy5zb3J0T2JqZWN0c18pKTtyZXR1cm4gYn07XG5CbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuYWRkVHlwZWRCbG9jaz1mdW5jdGlvbihhKXt0aGlzLnR5cGVkQmxvY2tzREJfW2EudHlwZV18fCh0aGlzLnR5cGVkQmxvY2tzREJfW2EudHlwZV09W10pO3RoaXMudHlwZWRCbG9ja3NEQl9bYS50eXBlXS5wdXNoKGEpfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlVHlwZWRCbG9jaz1mdW5jdGlvbihhKXt0aGlzLnR5cGVkQmxvY2tzREJfW2EudHlwZV0uc3BsaWNlKHRoaXMudHlwZWRCbG9ja3NEQl9bYS50eXBlXS5pbmRleE9mKGEpLDEpO3RoaXMudHlwZWRCbG9ja3NEQl9bYS50eXBlXS5sZW5ndGh8fGRlbGV0ZSB0aGlzLnR5cGVkQmxvY2tzREJfW2EudHlwZV19O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldEJsb2Nrc0J5VHlwZT1mdW5jdGlvbihhLGIpe2lmKCF0aGlzLnR5cGVkQmxvY2tzREJfW2FdKXJldHVybltdO2E9dGhpcy50eXBlZEJsb2Nrc0RCX1thXS5zbGljZSgwKTtiJiYxPGEubGVuZ3RoJiYodGhpcy5zb3J0T2JqZWN0c18ub2Zmc2V0PU1hdGguc2luKEJsb2NrbHkudXRpbHMubWF0aC50b1JhZGlhbnMoQmxvY2tseS5Xb3Jrc3BhY2UuU0NBTl9BTkdMRSkpLHRoaXMuUlRMJiYodGhpcy5zb3J0T2JqZWN0c18ub2Zmc2V0Kj0tMSksYS5zb3J0KHRoaXMuc29ydE9iamVjdHNfKSk7cmV0dXJuIGF9O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmFkZFRvcENvbW1lbnQ9ZnVuY3Rpb24oYSl7dGhpcy50b3BDb21tZW50c18ucHVzaChhKTt0aGlzLmNvbW1lbnREQl9bYS5pZF0mJmNvbnNvbGUud2FybignT3ZlcnJpZGluZyBhbiBleGlzdGluZyBjb21tZW50IG9uIHRoaXMgd29ya3NwYWNlLCB3aXRoIGlkIFwiJythLmlkKydcIicpO3RoaXMuY29tbWVudERCX1thLmlkXT1hfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlVG9wQ29tbWVudD1mdW5jdGlvbihhKXtpZighQmxvY2tseS51dGlscy5hcnJheVJlbW92ZSh0aGlzLnRvcENvbW1lbnRzXyxhKSl0aHJvdyBFcnJvcihcIkNvbW1lbnQgbm90IHByZXNlbnQgaW4gd29ya3NwYWNlJ3MgbGlzdCBvZiB0b3AtbW9zdCBjb21tZW50cy5cIik7ZGVsZXRlIHRoaXMuY29tbWVudERCX1thLmlkXX07XG5CbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0VG9wQ29tbWVudHM9ZnVuY3Rpb24oYSl7dmFyIGI9W10uY29uY2F0KHRoaXMudG9wQ29tbWVudHNfKTthJiYxPGIubGVuZ3RoJiYodGhpcy5zb3J0T2JqZWN0c18ub2Zmc2V0PU1hdGguc2luKEJsb2NrbHkudXRpbHMubWF0aC50b1JhZGlhbnMoQmxvY2tseS5Xb3Jrc3BhY2UuU0NBTl9BTkdMRSkpLHRoaXMuUlRMJiYodGhpcy5zb3J0T2JqZWN0c18ub2Zmc2V0Kj0tMSksYi5zb3J0KHRoaXMuc29ydE9iamVjdHNfKSk7cmV0dXJuIGJ9O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldEFsbEJsb2Nrcz1mdW5jdGlvbihhKXtpZihhKXthPXRoaXMuZ2V0VG9wQmxvY2tzKCEwKTtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaC5hcHBseShiLGFbY10uZ2V0RGVzY2VuZGFudHMoITApKX1lbHNlIGZvcihiPXRoaXMuZ2V0VG9wQmxvY2tzKCExKSxjPTA7YzxiLmxlbmd0aDtjKyspYi5wdXNoLmFwcGx5KGIsYltjXS5nZXRDaGlsZHJlbighMSkpO3JldHVybiBiLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4hZC5pc0luc2VydGlvbk1hcmtlcigpfSl9O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5pc0NsZWFyaW5nPSEwO3RyeXt2YXIgYT1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO2ZvcihhfHxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMCk7dGhpcy50b3BCbG9ja3NfLmxlbmd0aDspdGhpcy50b3BCbG9ja3NfWzBdLmRpc3Bvc2UoITEpO2Zvcig7dGhpcy50b3BDb21tZW50c18ubGVuZ3RoOyl0aGlzLnRvcENvbW1lbnRzX1t0aGlzLnRvcENvbW1lbnRzXy5sZW5ndGgtMV0uZGlzcG9zZSghMSk7YXx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpO3RoaXMudmFyaWFibGVNYXBfLmNsZWFyKCk7dGhpcy5wb3RlbnRpYWxWYXJpYWJsZU1hcF8mJnRoaXMucG90ZW50aWFsVmFyaWFibGVNYXBfLmNsZWFyKCl9ZmluYWxseXt0aGlzLmlzQ2xlYXJpbmc9ITF9fTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5yZW5hbWVWYXJpYWJsZUJ5SWQ9ZnVuY3Rpb24oYSxiKXt0aGlzLnZhcmlhYmxlTWFwXy5yZW5hbWVWYXJpYWJsZUJ5SWQoYSxiKX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmNyZWF0ZVZhcmlhYmxlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy52YXJpYWJsZU1hcF8uY3JlYXRlVmFyaWFibGUoYSxiLGMpfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0VmFyaWFibGVVc2VzQnlJZD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy52YXJpYWJsZU1hcF8uZ2V0VmFyaWFibGVVc2VzQnlJZChhKX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmRlbGV0ZVZhcmlhYmxlQnlJZD1mdW5jdGlvbihhKXt0aGlzLnZhcmlhYmxlTWFwXy5kZWxldGVWYXJpYWJsZUJ5SWQoYSl9O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldFZhcmlhYmxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudmFyaWFibGVNYXBfLmdldFZhcmlhYmxlKGEsYil9O0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5nZXRWYXJpYWJsZUJ5SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudmFyaWFibGVNYXBfLmdldFZhcmlhYmxlQnlJZChhKX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldFZhcmlhYmxlc09mVHlwZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy52YXJpYWJsZU1hcF8uZ2V0VmFyaWFibGVzT2ZUeXBlKGEpfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0VmFyaWFibGVUeXBlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhcmlhYmxlTWFwXy5nZXRWYXJpYWJsZVR5cGVzKHRoaXMpfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0QWxsVmFyaWFibGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFyaWFibGVNYXBfLmdldEFsbFZhcmlhYmxlcygpfTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5nZXRBbGxWYXJpYWJsZU5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFyaWFibGVNYXBfLmdldEFsbFZhcmlhYmxlTmFtZXMoKX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIDB9O0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5uZXdCbG9jaz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgQmxvY2tseS5CbG9jayh0aGlzLGEsYil9O0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5yZW1haW5pbmdDYXBhY2l0eT1mdW5jdGlvbigpe3JldHVybiBpc05hTih0aGlzLm9wdGlvbnMubWF4QmxvY2tzKT9JbmZpbml0eTp0aGlzLm9wdGlvbnMubWF4QmxvY2tzLXRoaXMuZ2V0QWxsQmxvY2tzKCExKS5sZW5ndGh9O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnJlbWFpbmluZ0NhcGFjaXR5T2ZUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMubWF4SW5zdGFuY2VzPyh2b2lkIDAhPT10aGlzLm9wdGlvbnMubWF4SW5zdGFuY2VzW2FdP3RoaXMub3B0aW9ucy5tYXhJbnN0YW5jZXNbYV06SW5maW5pdHkpLXRoaXMuZ2V0QmxvY2tzQnlUeXBlKGEsITEpLmxlbmd0aDpJbmZpbml0eX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmlzQ2FwYWNpdHlBdmFpbGFibGU9ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFzQmxvY2tMaW1pdHMoKSlyZXR1cm4hMDt2YXIgYj0wLGM7Zm9yKGMgaW4gYSl7aWYoYVtjXT50aGlzLnJlbWFpbmluZ0NhcGFjaXR5T2ZUeXBlKGMpKXJldHVybiExO2IrPWFbY119cmV0dXJuIGI+dGhpcy5yZW1haW5pbmdDYXBhY2l0eSgpPyExOiEwfTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5oYXNCbG9ja0xpbWl0cz1mdW5jdGlvbigpe3JldHVybiBJbmZpbml0eSE9dGhpcy5vcHRpb25zLm1heEJsb2Nrc3x8ISF0aGlzLm9wdGlvbnMubWF4SW5zdGFuY2VzfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0VW5kb1N0YWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5kb1N0YWNrX307QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldFJlZG9TdGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlZG9TdGFja199O1xuQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnVuZG89ZnVuY3Rpb24oYSl7dmFyIGI9YT90aGlzLnJlZG9TdGFja186dGhpcy51bmRvU3RhY2tfLGM9YT90aGlzLnVuZG9TdGFja186dGhpcy5yZWRvU3RhY2tfLGQ9Yi5wb3AoKTtpZihkKXtmb3IodmFyIGU9W2RdO2IubGVuZ3RoJiZkLmdyb3VwJiZkLmdyb3VwPT1iW2IubGVuZ3RoLTFdLmdyb3VwOyllLnB1c2goYi5wb3AoKSk7Zm9yKGI9MDtkPWVbYl07YisrKWMucHVzaChkKTtlPUJsb2NrbHkuRXZlbnRzLmZpbHRlcihlLGEpO0Jsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG89ITE7dHJ5e2ZvcihiPTA7ZD1lW2JdO2IrKylkLnJ1bihhKX1maW5hbGx5e0Jsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG89ITB9fX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmNsZWFyVW5kbz1mdW5jdGlvbigpe3RoaXMudW5kb1N0YWNrXy5sZW5ndGg9MDt0aGlzLnJlZG9TdGFja18ubGVuZ3RoPTA7QmxvY2tseS5FdmVudHMuY2xlYXJQZW5kaW5nVW5kbygpfTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5hZGRDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbihhKXt0aGlzLmxpc3RlbmVyc18ucHVzaChhKTtyZXR1cm4gYX07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuYXJyYXlSZW1vdmUodGhpcy5saXN0ZW5lcnNfLGEpfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZmlyZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKGEpe2lmKGEucmVjb3JkVW5kbylmb3IodGhpcy51bmRvU3RhY2tfLnB1c2goYSksdGhpcy5yZWRvU3RhY2tfLmxlbmd0aD0wO3RoaXMudW5kb1N0YWNrXy5sZW5ndGg+dGhpcy5NQVhfVU5ETyYmMDw9dGhpcy5NQVhfVU5ETzspdGhpcy51bmRvU3RhY2tfLnNoaWZ0KCk7Zm9yKHZhciBiPTAsYztjPXRoaXMubGlzdGVuZXJzX1tiXTtiKyspYyhhKX07XG5CbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0QmxvY2tCeUlkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJsb2NrREJfW2FdfHxudWxsfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuc2V0QmxvY2tCeUlkPWZ1bmN0aW9uKGEsYil7dGhpcy5ibG9ja0RCX1thXT1ifTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlQmxvY2tCeUlkPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmJsb2NrREJfW2FdfTtCbG9ja2x5LldvcmtzcGFjZS5wcm90b3R5cGUuZ2V0Q29tbWVudEJ5SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29tbWVudERCX1thXXx8bnVsbH07QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmFsbElucHV0c0ZpbGxlZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRUb3BCbG9ja3MoITEpLGM9MCxkO2Q9YltjXTtjKyspaWYoIWQuYWxsSW5wdXRzRmlsbGVkKGEpKXJldHVybiExO3JldHVybiEwfTtcbkJsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5nZXRQb3RlbnRpYWxWYXJpYWJsZU1hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvdGVudGlhbFZhcmlhYmxlTWFwX307QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmNyZWF0ZVBvdGVudGlhbFZhcmlhYmxlTWFwPWZ1bmN0aW9uKCl7dGhpcy5wb3RlbnRpYWxWYXJpYWJsZU1hcF89bmV3IEJsb2NrbHkuVmFyaWFibGVNYXAodGhpcyl9O0Jsb2NrbHkuV29ya3NwYWNlLnByb3RvdHlwZS5nZXRWYXJpYWJsZU1hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhcmlhYmxlTWFwX307QmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLnNldFZhcmlhYmxlTWFwPWZ1bmN0aW9uKGEpe3RoaXMudmFyaWFibGVNYXBfPWF9O0Jsb2NrbHkuV29ya3NwYWNlLldvcmtzcGFjZURCXz1PYmplY3QuY3JlYXRlKG51bGwpO1xuQmxvY2tseS5Xb3Jrc3BhY2UuZ2V0QnlJZD1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS5Xb3Jrc3BhY2UuV29ya3NwYWNlREJfW2FdfHxudWxsfTtCbG9ja2x5LldvcmtzcGFjZS5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiO2ZvcihiIGluIEJsb2NrbHkuV29ya3NwYWNlLldvcmtzcGFjZURCXylhLnB1c2goQmxvY2tseS5Xb3Jrc3BhY2UuV29ya3NwYWNlREJfW2JdKTtyZXR1cm4gYX07QmxvY2tseS5CdWJibGU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMud29ya3NwYWNlXz1hO3RoaXMuY29udGVudF89Yjt0aGlzLnNoYXBlXz1jO3RoaXMub25Nb3VzZURvd25SZXNpemVXcmFwcGVyXz10aGlzLm9uTW91c2VEb3duQnViYmxlV3JhcHBlcl89dGhpcy5tb3ZlQ2FsbGJhY2tfPXRoaXMucmVzaXplQ2FsbGJhY2tfPW51bGw7dGhpcy5kaXNwb3NlZD0hMTtjPUJsb2NrbHkuQnViYmxlLkFSUk9XX0FOR0xFO3RoaXMud29ya3NwYWNlXy5SVEwmJihjPS1jKTt0aGlzLmFycm93X3JhZGlhbnNfPUJsb2NrbHkudXRpbHMubWF0aC50b1JhZGlhbnMoYyk7YS5nZXRCdWJibGVDYW52YXMoKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZURvbV8oYiwhKCFlfHwhZikpKTt0aGlzLnNldEFuY2hvckxvY2F0aW9uKGQpO2UmJmZ8fChhPXRoaXMuY29udGVudF8uZ2V0QkJveCgpLGU9YS53aWR0aCsyKkJsb2NrbHkuQnViYmxlLkJPUkRFUl9XSURUSCxmPWEuaGVpZ2h0KzIqQmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRIKTtcbnRoaXMuc2V0QnViYmxlU2l6ZShlLGYpO3RoaXMucG9zaXRpb25CdWJibGVfKCk7dGhpcy5yZW5kZXJBcnJvd18oKTt0aGlzLnJlbmRlcmVkXz0hMH07QmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRIPTY7QmxvY2tseS5CdWJibGUuQVJST1dfVEhJQ0tORVNTPTU7QmxvY2tseS5CdWJibGUuQVJST1dfQU5HTEU9MjA7QmxvY2tseS5CdWJibGUuQVJST1dfQkVORD00O0Jsb2NrbHkuQnViYmxlLkFOQ0hPUl9SQURJVVM9ODtCbG9ja2x5LkJ1YmJsZS5vbk1vdXNlVXBXcmFwcGVyXz1udWxsO0Jsb2NrbHkuQnViYmxlLm9uTW91c2VNb3ZlV3JhcHBlcl89bnVsbDtcbkJsb2NrbHkuQnViYmxlLnVuYmluZERyYWdFdmVudHNfPWZ1bmN0aW9uKCl7QmxvY2tseS5CdWJibGUub25Nb3VzZVVwV3JhcHBlcl8mJihCbG9ja2x5LnVuYmluZEV2ZW50XyhCbG9ja2x5LkJ1YmJsZS5vbk1vdXNlVXBXcmFwcGVyXyksQmxvY2tseS5CdWJibGUub25Nb3VzZVVwV3JhcHBlcl89bnVsbCk7QmxvY2tseS5CdWJibGUub25Nb3VzZU1vdmVXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKEJsb2NrbHkuQnViYmxlLm9uTW91c2VNb3ZlV3JhcHBlcl8pLEJsb2NrbHkuQnViYmxlLm9uTW91c2VNb3ZlV3JhcHBlcl89bnVsbCl9O0Jsb2NrbHkuQnViYmxlLmJ1YmJsZU1vdXNlVXBfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuVG91Y2guY2xlYXJUb3VjaElkZW50aWZpZXIoKTtCbG9ja2x5LkJ1YmJsZS51bmJpbmREcmFnRXZlbnRzXygpfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUucmVuZGVyZWRfPSExO0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5hbmNob3JYWV89bnVsbDtcbkJsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5yZWxhdGl2ZUxlZnRfPTA7QmxvY2tseS5CdWJibGUucHJvdG90eXBlLnJlbGF0aXZlVG9wXz0wO0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS53aWR0aF89MDtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuaGVpZ2h0Xz0wO0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5hdXRvTGF5b3V0Xz0hMDtcbkJsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5jcmVhdGVEb21fPWZ1bmN0aW9uKGEsYil7dGhpcy5idWJibGVHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHt9LG51bGwpO3ZhciBjPXtmaWx0ZXI6XCJ1cmwoI1wiK3RoaXMud29ya3NwYWNlXy5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpLmVtYm9zc0ZpbHRlcklkK1wiKVwifTtCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5KQVZBX0ZYJiYoYz17fSk7Yz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcsYyx0aGlzLmJ1YmJsZUdyb3VwXyk7dGhpcy5idWJibGVBcnJvd189QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5QQVRILHt9LGMpO3RoaXMuYnViYmxlQmFja189QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtcImNsYXNzXCI6XCJibG9ja2x5RHJhZ2dhYmxlXCIsXG54OjAseTowLHJ4OkJsb2NrbHkuQnViYmxlLkJPUkRFUl9XSURUSCxyeTpCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEh9LGMpO2I/KHRoaXMucmVzaXplR3JvdXBfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRyx7XCJjbGFzc1wiOnRoaXMud29ya3NwYWNlXy5SVEw/XCJibG9ja2x5UmVzaXplU1dcIjpcImJsb2NrbHlSZXNpemVTRVwifSx0aGlzLmJ1YmJsZUdyb3VwXyksYj0yKkJsb2NrbHkuQnViYmxlLkJPUkRFUl9XSURUSCxCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBPTFlHT04se3BvaW50czpcIjAseCB4LHggeCwwXCIucmVwbGFjZSgveC9nLGIudG9TdHJpbmcoKSl9LHRoaXMucmVzaXplR3JvdXBfKSxCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkxJTkUse1wiY2xhc3NcIjpcImJsb2NrbHlSZXNpemVMaW5lXCIseDE6Yi8zLHkxOmItMSx4MjpiLVxuMSx5MjpiLzN9LHRoaXMucmVzaXplR3JvdXBfKSxCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkxJTkUse1wiY2xhc3NcIjpcImJsb2NrbHlSZXNpemVMaW5lXCIseDE6MipiLzMseTE6Yi0xLHgyOmItMSx5MjoyKmIvM30sdGhpcy5yZXNpemVHcm91cF8pKTp0aGlzLnJlc2l6ZUdyb3VwXz1udWxsO3RoaXMud29ya3NwYWNlXy5vcHRpb25zLnJlYWRPbmx5fHwodGhpcy5vbk1vdXNlRG93bkJ1YmJsZVdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18odGhpcy5idWJibGVCYWNrXyxcIm1vdXNlZG93blwiLHRoaXMsdGhpcy5idWJibGVNb3VzZURvd25fKSx0aGlzLnJlc2l6ZUdyb3VwXyYmKHRoaXMub25Nb3VzZURvd25SZXNpemVXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHRoaXMucmVzaXplR3JvdXBfLFwibW91c2Vkb3duXCIsdGhpcyx0aGlzLnJlc2l6ZU1vdXNlRG93bl8pKSk7dGhpcy5idWJibGVHcm91cF8uYXBwZW5kQ2hpbGQoYSk7XG5yZXR1cm4gdGhpcy5idWJibGVHcm91cF99O0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5nZXRTdmdSb290PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnViYmxlR3JvdXBffTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuc2V0U3ZnSWQ9ZnVuY3Rpb24oYSl7dGhpcy5idWJibGVHcm91cF8uZGF0YXNldCYmKHRoaXMuYnViYmxlR3JvdXBfLmRhdGFzZXQuYmxvY2tJZD1hKX07QmxvY2tseS5CdWJibGUucHJvdG90eXBlLmJ1YmJsZU1vdXNlRG93bl89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy53b3Jrc3BhY2VfLmdldEdlc3R1cmUoYSk7YiYmYi5oYW5kbGVCdWJibGVTdGFydChhLHRoaXMpfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuc2hvd0NvbnRleHRNZW51PWZ1bmN0aW9uKGEpe307QmxvY2tseS5CdWJibGUucHJvdG90eXBlLmlzRGVsZXRhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuITF9O0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5zZXREZWxldGVTdHlsZT1mdW5jdGlvbihhKXt9O1xuQmxvY2tseS5CdWJibGUucHJvdG90eXBlLnJlc2l6ZU1vdXNlRG93bl89ZnVuY3Rpb24oYSl7dGhpcy5wcm9tb3RlKCk7QmxvY2tseS5CdWJibGUudW5iaW5kRHJhZ0V2ZW50c18oKTtCbG9ja2x5LnV0aWxzLmlzUmlnaHRCdXR0b24oYSl8fCh0aGlzLndvcmtzcGFjZV8uc3RhcnREcmFnKGEsbmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZSh0aGlzLndvcmtzcGFjZV8uUlRMPy10aGlzLndpZHRoXzp0aGlzLndpZHRoXyx0aGlzLmhlaWdodF8pKSxCbG9ja2x5LkJ1YmJsZS5vbk1vdXNlVXBXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGRvY3VtZW50LFwibW91c2V1cFwiLHRoaXMsQmxvY2tseS5CdWJibGUuYnViYmxlTW91c2VVcF8pLEJsb2NrbHkuQnViYmxlLm9uTW91c2VNb3ZlV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkb2N1bWVudCxcIm1vdXNlbW92ZVwiLHRoaXMsdGhpcy5yZXNpemVNb3VzZU1vdmVfKSxCbG9ja2x5LmhpZGVDaGFmZigpKTtcbmEuc3RvcFByb3BhZ2F0aW9uKCl9O0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5yZXNpemVNb3VzZU1vdmVfPWZ1bmN0aW9uKGEpe3RoaXMuYXV0b0xheW91dF89ITE7YT10aGlzLndvcmtzcGFjZV8ubW92ZURyYWcoYSk7dGhpcy5zZXRCdWJibGVTaXplKHRoaXMud29ya3NwYWNlXy5SVEw/LWEueDphLngsYS55KTt0aGlzLndvcmtzcGFjZV8uUlRMJiZ0aGlzLnBvc2l0aW9uQnViYmxlXygpfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUucmVnaXN0ZXJSZXNpemVFdmVudD1mdW5jdGlvbihhKXt0aGlzLnJlc2l6ZUNhbGxiYWNrXz1hfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUucmVnaXN0ZXJNb3ZlRXZlbnQ9ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlQ2FsbGJhY2tfPWF9O1xuQmxvY2tseS5CdWJibGUucHJvdG90eXBlLnByb21vdGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJ1YmJsZUdyb3VwXy5wYXJlbnROb2RlO3JldHVybiBhLmxhc3RDaGlsZCE9PXRoaXMuYnViYmxlR3JvdXBfPyhhLmFwcGVuZENoaWxkKHRoaXMuYnViYmxlR3JvdXBfKSwhMCk6ITF9O0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5zZXRBbmNob3JMb2NhdGlvbj1mdW5jdGlvbihhKXt0aGlzLmFuY2hvclhZXz1hO3RoaXMucmVuZGVyZWRfJiZ0aGlzLnBvc2l0aW9uQnViYmxlXygpfTtcbkJsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5sYXlvdXRCdWJibGVfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLmdldE1ldHJpY3MoKTthLnZpZXdMZWZ0Lz10aGlzLndvcmtzcGFjZV8uc2NhbGU7YS52aWV3V2lkdGgvPXRoaXMud29ya3NwYWNlXy5zY2FsZTthLnZpZXdUb3AvPXRoaXMud29ya3NwYWNlXy5zY2FsZTthLnZpZXdIZWlnaHQvPXRoaXMud29ya3NwYWNlXy5zY2FsZTt2YXIgYj10aGlzLmdldE9wdGltYWxSZWxhdGl2ZUxlZnRfKGEpLGM9dGhpcy5nZXRPcHRpbWFsUmVsYXRpdmVUb3BfKGEpLGQ9dGhpcy5zaGFwZV8uZ2V0QkJveCgpLGU9e3g6Yix5Oi10aGlzLmhlaWdodF8tdGhpcy53b3Jrc3BhY2VfLmdldFJlbmRlcmVyKCkuZ2V0Q29uc3RhbnRzKCkuTUlOX0JMT0NLX0hFSUdIVH0sZj17eDotdGhpcy53aWR0aF8tMzAseTpjfTtjPXt4OmQud2lkdGgseTpjfTt2YXIgZz17eDpiLHk6ZC5oZWlnaHR9O2I9ZC53aWR0aDxkLmhlaWdodD9jOmc7ZD1kLndpZHRoPFxuZC5oZWlnaHQ/ZzpjO2M9dGhpcy5nZXRPdmVybGFwXyhlLGEpO2c9dGhpcy5nZXRPdmVybGFwXyhmLGEpO3ZhciBoPXRoaXMuZ2V0T3ZlcmxhcF8oYixhKTthPXRoaXMuZ2V0T3ZlcmxhcF8oZCxhKTthPU1hdGgubWF4KGMsZyxoLGEpO2M9PWE/KHRoaXMucmVsYXRpdmVMZWZ0Xz1lLngsdGhpcy5yZWxhdGl2ZVRvcF89ZS55KTpnPT1hPyh0aGlzLnJlbGF0aXZlTGVmdF89Zi54LHRoaXMucmVsYXRpdmVUb3BfPWYueSk6aD09YT8odGhpcy5yZWxhdGl2ZUxlZnRfPWIueCx0aGlzLnJlbGF0aXZlVG9wXz1iLnkpOih0aGlzLnJlbGF0aXZlTGVmdF89ZC54LHRoaXMucmVsYXRpdmVUb3BfPWQueSl9O1xuQmxvY2tseS5CdWJibGUucHJvdG90eXBlLmdldE92ZXJsYXBfPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy53b3Jrc3BhY2VfLlJUTD90aGlzLmFuY2hvclhZXy54LWEueC10aGlzLndpZHRoXzphLngrdGhpcy5hbmNob3JYWV8ueDthPWEueSt0aGlzLmFuY2hvclhZXy55O3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEsKE1hdGgubWluKGMrdGhpcy53aWR0aF8sYi52aWV3TGVmdCtiLnZpZXdXaWR0aCktTWF0aC5tYXgoYyxiLnZpZXdMZWZ0KSkqKE1hdGgubWluKGErdGhpcy5oZWlnaHRfLGIudmlld1RvcCtiLnZpZXdIZWlnaHQpLU1hdGgubWF4KGEsYi52aWV3VG9wKSkvKHRoaXMud2lkdGhfKnRoaXMuaGVpZ2h0XykpKX07XG5CbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuZ2V0T3B0aW1hbFJlbGF0aXZlTGVmdF89ZnVuY3Rpb24oYSl7dmFyIGI9LXRoaXMud2lkdGhfLzQ7aWYodGhpcy53aWR0aF8+YS52aWV3V2lkdGgpcmV0dXJuIGI7aWYodGhpcy53b3Jrc3BhY2VfLlJUTCl2YXIgYz10aGlzLmFuY2hvclhZXy54LWIsZD1jLXRoaXMud2lkdGhfLGU9YS52aWV3TGVmdCthLnZpZXdXaWR0aCxmPWEudmlld0xlZnQrQmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzL3RoaXMud29ya3NwYWNlXy5zY2FsZTtlbHNlIGQ9Yit0aGlzLmFuY2hvclhZXy54LGM9ZCt0aGlzLndpZHRoXyxmPWEudmlld0xlZnQsZT1hLnZpZXdMZWZ0K2Eudmlld1dpZHRoLUJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcy90aGlzLndvcmtzcGFjZV8uc2NhbGU7dGhpcy53b3Jrc3BhY2VfLlJUTD9kPGY/Yj0tKGYtdGhpcy5hbmNob3JYWV8ueCt0aGlzLndpZHRoXyk6Yz5lJiYoYj0tKGUtdGhpcy5hbmNob3JYWV8ueCkpOlxuZDxmP2I9Zi10aGlzLmFuY2hvclhZXy54OmM+ZSYmKGI9ZS10aGlzLmFuY2hvclhZXy54LXRoaXMud2lkdGhfKTtyZXR1cm4gYn07QmxvY2tseS5CdWJibGUucHJvdG90eXBlLmdldE9wdGltYWxSZWxhdGl2ZVRvcF89ZnVuY3Rpb24oYSl7dmFyIGI9LXRoaXMuaGVpZ2h0Xy80O2lmKHRoaXMuaGVpZ2h0Xz5hLnZpZXdIZWlnaHQpcmV0dXJuIGI7dmFyIGM9dGhpcy5hbmNob3JYWV8ueStiLGQ9Yyt0aGlzLmhlaWdodF8sZT1hLnZpZXdUb3A7YT1hLnZpZXdUb3ArYS52aWV3SGVpZ2h0LUJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcy90aGlzLndvcmtzcGFjZV8uc2NhbGU7dmFyIGY9dGhpcy5hbmNob3JYWV8ueTtjPGU/Yj1lLWY6ZD5hJiYoYj1hLWYtdGhpcy5oZWlnaHRfKTtyZXR1cm4gYn07XG5CbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUucG9zaXRpb25CdWJibGVfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hbmNob3JYWV8ueDthPXRoaXMud29ya3NwYWNlXy5SVEw/YS0odGhpcy5yZWxhdGl2ZUxlZnRfK3RoaXMud2lkdGhfKTphK3RoaXMucmVsYXRpdmVMZWZ0Xzt0aGlzLm1vdmVUbyhhLHRoaXMucmVsYXRpdmVUb3BfK3RoaXMuYW5jaG9yWFlfLnkpfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKGEsYil7dGhpcy5idWJibGVHcm91cF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrYStcIixcIitiK1wiKVwiKX07QmxvY2tseS5CdWJibGUucHJvdG90eXBlLnNldERyYWdnaW5nPWZ1bmN0aW9uKGEpeyFhJiZ0aGlzLm1vdmVDYWxsYmFja18mJnRoaXMubW92ZUNhbGxiYWNrXygpfTtcbkJsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5nZXRCdWJibGVTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLlNpemUodGhpcy53aWR0aF8sdGhpcy5oZWlnaHRfKX07XG5CbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuc2V0QnViYmxlU2l6ZT1mdW5jdGlvbihhLGIpe3ZhciBjPTIqQmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRIO2E9TWF0aC5tYXgoYSxjKzQ1KTtiPU1hdGgubWF4KGIsYysyMCk7dGhpcy53aWR0aF89YTt0aGlzLmhlaWdodF89Yjt0aGlzLmJ1YmJsZUJhY2tfLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYSk7dGhpcy5idWJibGVCYWNrXy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixiKTt0aGlzLnJlc2l6ZUdyb3VwXyYmKHRoaXMud29ya3NwYWNlXy5SVEw/dGhpcy5yZXNpemVHcm91cF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrMipCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEgrXCIsXCIrKGItYykrXCIpIHNjYWxlKC0xIDEpXCIpOnRoaXMucmVzaXplR3JvdXBfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiKyhhLWMpK1wiLFwiKyhiLWMpK1wiKVwiKSk7dGhpcy5hdXRvTGF5b3V0XyYmdGhpcy5sYXlvdXRCdWJibGVfKCk7XG50aGlzLnBvc2l0aW9uQnViYmxlXygpO3RoaXMucmVuZGVyQXJyb3dfKCk7dGhpcy5yZXNpemVDYWxsYmFja18mJnRoaXMucmVzaXplQ2FsbGJhY2tfKCl9O1xuQmxvY2tseS5CdWJibGUucHJvdG90eXBlLnJlbmRlckFycm93Xz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy53aWR0aF8vMixjPXRoaXMuaGVpZ2h0Xy8yLGQ9LXRoaXMucmVsYXRpdmVMZWZ0XyxlPS10aGlzLnJlbGF0aXZlVG9wXztpZihiPT1kJiZjPT1lKWEucHVzaChcIk0gXCIrYitcIixcIitjKTtlbHNle2UtPWM7ZC09Yjt0aGlzLndvcmtzcGFjZV8uUlRMJiYoZCo9LTEpO3ZhciBmPU1hdGguc3FydChlKmUrZCpkKSxnPU1hdGguYWNvcyhkL2YpOzA+ZSYmKGc9MipNYXRoLlBJLWcpO3ZhciBoPWcrTWF0aC5QSS8yO2g+MipNYXRoLlBJJiYoaC09MipNYXRoLlBJKTt2YXIgaz1NYXRoLnNpbihoKSxsPU1hdGguY29zKGgpLG09dGhpcy5nZXRCdWJibGVTaXplKCk7aD0obS53aWR0aCttLmhlaWdodCkvQmxvY2tseS5CdWJibGUuQVJST1dfVEhJQ0tORVNTO2g9TWF0aC5taW4oaCxtLndpZHRoLG0uaGVpZ2h0KS80O209MS1CbG9ja2x5LkJ1YmJsZS5BTkNIT1JfUkFESVVTL2Y7ZD1iK1xubSpkO2U9YyttKmU7bT1iK2gqbDt2YXIgbj1jK2gqaztiLT1oKmw7Yy09aCprO2s9Zyt0aGlzLmFycm93X3JhZGlhbnNfO2s+MipNYXRoLlBJJiYoay09MipNYXRoLlBJKTtnPU1hdGguc2luKGspKmYvQmxvY2tseS5CdWJibGUuQVJST1dfQkVORDtmPU1hdGguY29zKGspKmYvQmxvY2tseS5CdWJibGUuQVJST1dfQkVORDthLnB1c2goXCJNXCIrbStcIixcIituKTthLnB1c2goXCJDXCIrKG0rZikrXCIsXCIrKG4rZykrXCIgXCIrZCtcIixcIitlK1wiIFwiK2QrXCIsXCIrZSk7YS5wdXNoKFwiQ1wiK2QrXCIsXCIrZStcIiBcIisoYitmKStcIixcIisoYytnKStcIiBcIitiK1wiLFwiK2MpfWEucHVzaChcInpcIik7dGhpcy5idWJibGVBcnJvd18uc2V0QXR0cmlidXRlKFwiZFwiLGEuam9pbihcIiBcIikpfTtCbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuc2V0Q29sb3VyPWZ1bmN0aW9uKGEpe3RoaXMuYnViYmxlQmFja18uc2V0QXR0cmlidXRlKFwiZmlsbFwiLGEpO3RoaXMuYnViYmxlQXJyb3dfLnNldEF0dHJpYnV0ZShcImZpbGxcIixhKX07XG5CbG9ja2x5LkJ1YmJsZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMub25Nb3VzZURvd25CdWJibGVXcmFwcGVyXyYmQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlRG93bkJ1YmJsZVdyYXBwZXJfKTt0aGlzLm9uTW91c2VEb3duUmVzaXplV3JhcHBlcl8mJkJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25Nb3VzZURvd25SZXNpemVXcmFwcGVyXyk7QmxvY2tseS5CdWJibGUudW5iaW5kRHJhZ0V2ZW50c18oKTtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKHRoaXMuYnViYmxlR3JvdXBfKTt0aGlzLmRpc3Bvc2VkPSEwfTtcbkJsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5tb3ZlRHVyaW5nRHJhZz1mdW5jdGlvbihhLGIpe2E/YS50cmFuc2xhdGVTdXJmYWNlKGIueCxiLnkpOnRoaXMubW92ZVRvKGIueCxiLnkpO3RoaXMucmVsYXRpdmVMZWZ0Xz10aGlzLndvcmtzcGFjZV8uUlRMP3RoaXMuYW5jaG9yWFlfLngtYi54LXRoaXMud2lkdGhfOmIueC10aGlzLmFuY2hvclhZXy54O3RoaXMucmVsYXRpdmVUb3BfPWIueS10aGlzLmFuY2hvclhZXy55O3RoaXMucmVuZGVyQXJyb3dfKCl9O0Jsb2NrbHkuQnViYmxlLnByb3RvdHlwZS5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUodGhpcy53b3Jrc3BhY2VfLlJUTD8tdGhpcy5yZWxhdGl2ZUxlZnRfK3RoaXMuYW5jaG9yWFlfLngtdGhpcy53aWR0aF86dGhpcy5hbmNob3JYWV8ueCt0aGlzLnJlbGF0aXZlTGVmdF8sdGhpcy5hbmNob3JYWV8ueSt0aGlzLnJlbGF0aXZlVG9wXyl9O1xuQmxvY2tseS5CdWJibGUucHJvdG90eXBlLnNldEF1dG9MYXlvdXQ9ZnVuY3Rpb24oYSl7dGhpcy5hdXRvTGF5b3V0Xz1hfTtCbG9ja2x5LkV2ZW50cy5Db21tZW50QmFzZT1mdW5jdGlvbihhKXt0aGlzLmNvbW1lbnRJZD0odGhpcy5pc0JsYW5rPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBhKT9cIlwiOmEuaWQ7dGhpcy53b3Jrc3BhY2VJZD10aGlzLmlzQmxhbms/XCJcIjphLndvcmtzcGFjZS5pZDt0aGlzLmdyb3VwPUJsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCk7dGhpcy5yZWNvcmRVbmRvPUJsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG99O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRXZlbnRzLkNvbW1lbnRCYXNlLEJsb2NrbHkuRXZlbnRzLkFic3RyYWN0KTtCbG9ja2x5LkV2ZW50cy5Db21tZW50QmFzZS5wcm90b3R5cGUudG9Kc29uPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5FdmVudHMuQ29tbWVudEJhc2Uuc3VwZXJDbGFzc18udG9Kc29uLmNhbGwodGhpcyk7dGhpcy5jb21tZW50SWQmJihhLmNvbW1lbnRJZD10aGlzLmNvbW1lbnRJZCk7cmV0dXJuIGF9O1xuQmxvY2tseS5FdmVudHMuQ29tbWVudEJhc2UucHJvdG90eXBlLmZyb21Kc29uPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnRCYXNlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLmNvbW1lbnRJZD1hLmNvbW1lbnRJZH07QmxvY2tseS5FdmVudHMuQ29tbWVudENoYW5nZT1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS5FdmVudHMuQ29tbWVudENoYW5nZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7YSYmKHRoaXMub2xkQ29udGVudHNfPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBiP1wiXCI6Yix0aGlzLm5ld0NvbnRlbnRzXz1cInVuZGVmaW5lZFwiPT10eXBlb2YgYz9cIlwiOmMpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlLEJsb2NrbHkuRXZlbnRzLkNvbW1lbnRCYXNlKTtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfQ0hBTkdFO1xuQmxvY2tseS5FdmVudHMuQ29tbWVudENoYW5nZS5wcm90b3R5cGUudG9Kc29uPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5FdmVudHMuQ29tbWVudENoYW5nZS5zdXBlckNsYXNzXy50b0pzb24uY2FsbCh0aGlzKTthLm5ld0NvbnRlbnRzPXRoaXMubmV3Q29udGVudHNfO3JldHVybiBhfTtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlLnN1cGVyQ2xhc3NfLmZyb21Kc29uLmNhbGwodGhpcyxhKTt0aGlzLm5ld0NvbnRlbnRzXz1hLm5ld1ZhbHVlfTtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlLnByb3RvdHlwZS5pc051bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbGRDb250ZW50c189PXRoaXMubmV3Q29udGVudHNffTtcbkJsb2NrbHkuRXZlbnRzLkNvbW1lbnRDaGFuZ2UucHJvdG90eXBlLnJ1bj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEV2ZW50V29ya3NwYWNlXygpLmdldENvbW1lbnRCeUlkKHRoaXMuY29tbWVudElkKTtiP2Iuc2V0Q29udGVudChhP3RoaXMubmV3Q29udGVudHNfOnRoaXMub2xkQ29udGVudHNfKTpjb25zb2xlLndhcm4oXCJDYW4ndCBjaGFuZ2Ugbm9uLWV4aXN0ZW50IGNvbW1lbnQ6IFwiK3RoaXMuY29tbWVudElkKX07QmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZT1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q3JlYXRlLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTthJiYodGhpcy54bWw9YS50b1htbFdpdGhYWSgpKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZSxCbG9ja2x5LkV2ZW50cy5Db21tZW50QmFzZSk7XG5CbG9ja2x5LkV2ZW50cy5Db21tZW50Q3JlYXRlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfQ1JFQVRFO0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnRDcmVhdGUucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRXZlbnRzLkNvbW1lbnRDcmVhdGUuc3VwZXJDbGFzc18udG9Kc29uLmNhbGwodGhpcyk7YS54bWw9QmxvY2tseS5YbWwuZG9tVG9UZXh0KHRoaXMueG1sKTtyZXR1cm4gYX07QmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZS5wcm90b3R5cGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZS5zdXBlckNsYXNzXy5mcm9tSnNvbi5jYWxsKHRoaXMsYSk7dGhpcy54bWw9QmxvY2tseS5YbWwudGV4dFRvRG9tKGEueG1sKX07XG5CbG9ja2x5LkV2ZW50cy5Db21tZW50Q3JlYXRlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZURlbGV0ZUhlbHBlcih0aGlzLGEpfTtCbG9ja2x5LkV2ZW50cy5Db21tZW50Q3JlYXRlRGVsZXRlSGVscGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRFdmVudFdvcmtzcGFjZV8oKTtiPyhiPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJ4bWxcIiksYi5hcHBlbmRDaGlsZChhLnhtbCksQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoYixjKSk6KGM9Yy5nZXRDb21tZW50QnlJZChhLmNvbW1lbnRJZCkpP2MuZGlzcG9zZSghMSwhMSk6Y29uc29sZS53YXJuKFwiQ2FuJ3QgdW5jcmVhdGUgbm9uLWV4aXN0ZW50IGNvbW1lbnQ6IFwiK2EuY29tbWVudElkKX07XG5CbG9ja2x5LkV2ZW50cy5Db21tZW50RGVsZXRlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnREZWxldGUuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO2EmJih0aGlzLnhtbD1hLnRvWG1sV2l0aFhZKCkpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkV2ZW50cy5Db21tZW50RGVsZXRlLEJsb2NrbHkuRXZlbnRzLkNvbW1lbnRCYXNlKTtCbG9ja2x5LkV2ZW50cy5Db21tZW50RGVsZXRlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfREVMRVRFO0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnREZWxldGUucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LkV2ZW50cy5Db21tZW50RGVsZXRlLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpfTtcbkJsb2NrbHkuRXZlbnRzLkNvbW1lbnREZWxldGUucHJvdG90eXBlLmZyb21Kc29uPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnREZWxldGUuc3VwZXJDbGFzc18uZnJvbUpzb24uY2FsbCh0aGlzLGEpfTtCbG9ja2x5LkV2ZW50cy5Db21tZW50RGVsZXRlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZURlbGV0ZUhlbHBlcih0aGlzLCFhKX07QmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmU9ZnVuY3Rpb24oYSl7QmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO2EmJih0aGlzLmNvbW1lbnRfPWEsdGhpcy5vbGRDb29yZGluYXRlXz1hLmdldFhZKCksdGhpcy5uZXdDb29yZGluYXRlXz1udWxsKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUsQmxvY2tseS5FdmVudHMuQ29tbWVudEJhc2UpO1xuQmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUucHJvdG90eXBlLnJlY29yZE5ldz1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbW1lbnRfKXRocm93IEVycm9yKFwiVHJpZWQgdG8gcmVjb3JkIHRoZSBuZXcgcG9zaXRpb24gb2YgYSBjb21tZW50IG9uIHRoZSBzYW1lIGV2ZW50IHR3aWNlLlwiKTt0aGlzLm5ld0Nvb3JkaW5hdGVfPXRoaXMuY29tbWVudF8uZ2V0WFkoKTt0aGlzLmNvbW1lbnRfPW51bGx9O0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnRNb3ZlLnByb3RvdHlwZS50eXBlPUJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfTU9WRTtCbG9ja2x5LkV2ZW50cy5Db21tZW50TW92ZS5wcm90b3R5cGUuc2V0T2xkQ29vcmRpbmF0ZT1mdW5jdGlvbihhKXt0aGlzLm9sZENvb3JkaW5hdGVfPWF9O1xuQmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUucHJvdG90eXBlLnRvSnNvbj1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRXZlbnRzLkNvbW1lbnRNb3ZlLnN1cGVyQ2xhc3NfLnRvSnNvbi5jYWxsKHRoaXMpO3RoaXMubmV3Q29vcmRpbmF0ZV8mJihhLm5ld0Nvb3JkaW5hdGU9TWF0aC5yb3VuZCh0aGlzLm5ld0Nvb3JkaW5hdGVfLngpK1wiLFwiK01hdGgucm91bmQodGhpcy5uZXdDb29yZGluYXRlXy55KSk7cmV0dXJuIGF9O0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnRNb3ZlLnByb3RvdHlwZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5Db21tZW50TW92ZS5zdXBlckNsYXNzXy5mcm9tSnNvbi5jYWxsKHRoaXMsYSk7YS5uZXdDb29yZGluYXRlJiYoYT1hLm5ld0Nvb3JkaW5hdGUuc3BsaXQoXCIsXCIpLHRoaXMubmV3Q29vcmRpbmF0ZV89bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShOdW1iZXIoYVswXSksTnVtYmVyKGFbMV0pKSl9O1xuQmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUucHJvdG90eXBlLmlzTnVsbD1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZXF1YWxzKHRoaXMub2xkQ29vcmRpbmF0ZV8sdGhpcy5uZXdDb29yZGluYXRlXyl9O0Jsb2NrbHkuRXZlbnRzLkNvbW1lbnRNb3ZlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFdmVudFdvcmtzcGFjZV8oKS5nZXRDb21tZW50QnlJZCh0aGlzLmNvbW1lbnRJZCk7aWYoYil7YT1hP3RoaXMubmV3Q29vcmRpbmF0ZV86dGhpcy5vbGRDb29yZGluYXRlXzt2YXIgYz1iLmdldFhZKCk7Yi5tb3ZlQnkoYS54LWMueCxhLnktYy55KX1lbHNlIGNvbnNvbGUud2FybihcIkNhbid0IG1vdmUgbm9uLWV4aXN0ZW50IGNvbW1lbnQ6IFwiK3RoaXMuY29tbWVudElkKX07QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRVZFTlQsQmxvY2tseS5FdmVudHMuQ09NTUVOVF9DUkVBVEUsQmxvY2tseS5FdmVudHMuQ29tbWVudENyZWF0ZSk7XG5CbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5FVkVOVCxCbG9ja2x5LkV2ZW50cy5DT01NRU5UX0NIQU5HRSxCbG9ja2x5LkV2ZW50cy5Db21tZW50Q2hhbmdlKTtCbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5FVkVOVCxCbG9ja2x5LkV2ZW50cy5DT01NRU5UX01PVkUsQmxvY2tseS5FdmVudHMuQ29tbWVudE1vdmUpO0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkVWRU5ULEJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfREVMRVRFLEJsb2NrbHkuRXZlbnRzLkNvbW1lbnREZWxldGUpO0Jsb2NrbHkuQnViYmxlRHJhZ2dlcj1mdW5jdGlvbihhLGIpe3RoaXMuZHJhZ2dpbmdCdWJibGVfPWE7dGhpcy53b3Jrc3BhY2VfPWI7dGhpcy5kZWxldGVBcmVhXz1udWxsO3RoaXMud291bGREZWxldGVCdWJibGVfPSExO3RoaXMuc3RhcnRYWV89dGhpcy5kcmFnZ2luZ0J1YmJsZV8uZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3RoaXMuZHJhZ1N1cmZhY2VfPUJsb2NrbHkudXRpbHMuaXMzZFN1cHBvcnRlZCgpJiZiLmdldEJsb2NrRHJhZ1N1cmZhY2UoKT9iLmdldEJsb2NrRHJhZ1N1cmZhY2UoKTpudWxsfTtCbG9ja2x5LkJ1YmJsZURyYWdnZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmRyYWdTdXJmYWNlXz10aGlzLndvcmtzcGFjZV89dGhpcy5kcmFnZ2luZ0J1YmJsZV89bnVsbH07XG5CbG9ja2x5LkJ1YmJsZURyYWdnZXIucHJvdG90eXBlLnN0YXJ0QnViYmxlRHJhZz1mdW5jdGlvbigpe0Jsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCl8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTt0aGlzLndvcmtzcGFjZV8uc2V0UmVzaXplc0VuYWJsZWQoITEpO3RoaXMuZHJhZ2dpbmdCdWJibGVfLnNldEF1dG9MYXlvdXQoITEpO3RoaXMuZHJhZ1N1cmZhY2VfJiZ0aGlzLm1vdmVUb0RyYWdTdXJmYWNlXygpO3RoaXMuZHJhZ2dpbmdCdWJibGVfLnNldERyYWdnaW5nJiZ0aGlzLmRyYWdnaW5nQnViYmxlXy5zZXREcmFnZ2luZyghMCk7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLmdldFRvb2xib3goKTtpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmFkZFN0eWxlKXt2YXIgYj10aGlzLmRyYWdnaW5nQnViYmxlXy5pc0RlbGV0YWJsZSgpP1wiYmxvY2tseVRvb2xib3hEZWxldGVcIjpcImJsb2NrbHlUb29sYm94R3JhYlwiO2EuYWRkU3R5bGUoYil9fTtcbkJsb2NrbHkuQnViYmxlRHJhZ2dlci5wcm90b3R5cGUuZHJhZ0J1YmJsZT1mdW5jdGlvbihhLGIpe2I9dGhpcy5waXhlbHNUb1dvcmtzcGFjZVVuaXRzXyhiKTtiPUJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5zdW0odGhpcy5zdGFydFhZXyxiKTt0aGlzLmRyYWdnaW5nQnViYmxlXy5tb3ZlRHVyaW5nRHJhZyh0aGlzLmRyYWdTdXJmYWNlXyxiKTt0aGlzLmRyYWdnaW5nQnViYmxlXy5pc0RlbGV0YWJsZSgpJiYodGhpcy5kZWxldGVBcmVhXz10aGlzLndvcmtzcGFjZV8uaXNEZWxldGVBcmVhKGEpLHRoaXMudXBkYXRlQ3Vyc29yRHVyaW5nQnViYmxlRHJhZ18oKSl9O1xuQmxvY2tseS5CdWJibGVEcmFnZ2VyLnByb3RvdHlwZS5tYXliZURlbGV0ZUJ1YmJsZV89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmtzcGFjZV8udHJhc2hjYW47dGhpcy53b3VsZERlbGV0ZUJ1YmJsZV8/KGEmJnNldFRpbWVvdXQoYS5jbG9zZUxpZC5iaW5kKGEpLDEwMCksdGhpcy5maXJlTW92ZUV2ZW50XygpLHRoaXMuZHJhZ2dpbmdCdWJibGVfLmRpc3Bvc2UoITEsITApKTphJiZhLmNsb3NlTGlkKCk7cmV0dXJuIHRoaXMud291bGREZWxldGVCdWJibGVffTtcbkJsb2NrbHkuQnViYmxlRHJhZ2dlci5wcm90b3R5cGUudXBkYXRlQ3Vyc29yRHVyaW5nQnViYmxlRHJhZ189ZnVuY3Rpb24oKXt0aGlzLndvdWxkRGVsZXRlQnViYmxlXz10aGlzLmRlbGV0ZUFyZWFfIT1CbG9ja2x5LkRFTEVURV9BUkVBX05PTkU7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLnRyYXNoY2FuO3RoaXMud291bGREZWxldGVCdWJibGVfPyh0aGlzLmRyYWdnaW5nQnViYmxlXy5zZXREZWxldGVTdHlsZSghMCksdGhpcy5kZWxldGVBcmVhXz09QmxvY2tseS5ERUxFVEVfQVJFQV9UUkFTSCYmYSYmYS5zZXRMaWRPcGVuKCEwKSk6KHRoaXMuZHJhZ2dpbmdCdWJibGVfLnNldERlbGV0ZVN0eWxlKCExKSxhJiZhLnNldExpZE9wZW4oITEpKX07XG5CbG9ja2x5LkJ1YmJsZURyYWdnZXIucHJvdG90eXBlLmVuZEJ1YmJsZURyYWc9ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdCdWJibGUoYSxiKTthPXRoaXMucGl4ZWxzVG9Xb3Jrc3BhY2VVbml0c18oYik7YT1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuc3VtKHRoaXMuc3RhcnRYWV8sYSk7dGhpcy5kcmFnZ2luZ0J1YmJsZV8ubW92ZVRvKGEueCxhLnkpO3RoaXMubWF5YmVEZWxldGVCdWJibGVfKCl8fCh0aGlzLmRyYWdTdXJmYWNlXyYmdGhpcy5kcmFnU3VyZmFjZV8uY2xlYXJBbmRIaWRlKHRoaXMud29ya3NwYWNlXy5nZXRCdWJibGVDYW52YXMoKSksdGhpcy5kcmFnZ2luZ0J1YmJsZV8uc2V0RHJhZ2dpbmcmJnRoaXMuZHJhZ2dpbmdCdWJibGVfLnNldERyYWdnaW5nKCExKSx0aGlzLmZpcmVNb3ZlRXZlbnRfKCkpO3RoaXMud29ya3NwYWNlXy5zZXRSZXNpemVzRW5hYmxlZCghMCk7KGE9dGhpcy53b3Jrc3BhY2VfLmdldFRvb2xib3goKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEucmVtb3ZlU3R5bGUmJlxuKGI9dGhpcy5kcmFnZ2luZ0J1YmJsZV8uaXNEZWxldGFibGUoKT9cImJsb2NrbHlUb29sYm94RGVsZXRlXCI6XCJibG9ja2x5VG9vbGJveEdyYWJcIixhLnJlbW92ZVN0eWxlKGIpKTtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9O0Jsb2NrbHkuQnViYmxlRHJhZ2dlci5wcm90b3R5cGUuZmlyZU1vdmVFdmVudF89ZnVuY3Rpb24oKXtpZih0aGlzLmRyYWdnaW5nQnViYmxlXy5pc0NvbW1lbnQpe3ZhciBhPW5ldyBCbG9ja2x5LkV2ZW50cy5Db21tZW50TW92ZSh0aGlzLmRyYWdnaW5nQnViYmxlXyk7YS5zZXRPbGRDb29yZGluYXRlKHRoaXMuc3RhcnRYWV8pO2EucmVjb3JkTmV3KCk7QmxvY2tseS5FdmVudHMuZmlyZShhKX19O1xuQmxvY2tseS5CdWJibGVEcmFnZ2VyLnByb3RvdHlwZS5waXhlbHNUb1dvcmtzcGFjZVVuaXRzXz1mdW5jdGlvbihhKXthPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS54L3RoaXMud29ya3NwYWNlXy5zY2FsZSxhLnkvdGhpcy53b3Jrc3BhY2VfLnNjYWxlKTt0aGlzLndvcmtzcGFjZV8uaXNNdXRhdG9yJiZhLnNjYWxlKDEvdGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMucGFyZW50V29ya3NwYWNlLnNjYWxlKTtyZXR1cm4gYX07QmxvY2tseS5CdWJibGVEcmFnZ2VyLnByb3RvdHlwZS5tb3ZlVG9EcmFnU3VyZmFjZV89ZnVuY3Rpb24oKXt0aGlzLmRyYWdnaW5nQnViYmxlXy5tb3ZlVG8oMCwwKTt0aGlzLmRyYWdTdXJmYWNlXy50cmFuc2xhdGVTdXJmYWNlKHRoaXMuc3RhcnRYWV8ueCx0aGlzLnN0YXJ0WFlfLnkpO3RoaXMuZHJhZ1N1cmZhY2VfLnNldEJsb2Nrc0FuZFNob3codGhpcy5kcmFnZ2luZ0J1YmJsZV8uZ2V0U3ZnUm9vdCgpKX07QmxvY2tseS5Xb3Jrc3BhY2VEcmFnZ2VyPWZ1bmN0aW9uKGEpe3RoaXMud29ya3NwYWNlXz1hO3RoaXMuc3RhcnRTY3JvbGxYWV89bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShhLnNjcm9sbFgsYS5zY3JvbGxZKX07QmxvY2tseS5Xb3Jrc3BhY2VEcmFnZ2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy53b3Jrc3BhY2VfPW51bGx9O0Jsb2NrbHkuV29ya3NwYWNlRHJhZ2dlci5wcm90b3R5cGUuc3RhcnREcmFnPWZ1bmN0aW9uKCl7QmxvY2tseS5zZWxlY3RlZCYmQmxvY2tseS5zZWxlY3RlZC51bnNlbGVjdCgpO3RoaXMud29ya3NwYWNlXy5zZXR1cERyYWdTdXJmYWNlKCl9O0Jsb2NrbHkuV29ya3NwYWNlRHJhZ2dlci5wcm90b3R5cGUuZW5kRHJhZz1mdW5jdGlvbihhKXt0aGlzLmRyYWcoYSk7dGhpcy53b3Jrc3BhY2VfLnJlc2V0RHJhZ1N1cmZhY2UoKX07XG5CbG9ja2x5LldvcmtzcGFjZURyYWdnZXIucHJvdG90eXBlLmRyYWc9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuc3VtKHRoaXMuc3RhcnRTY3JvbGxYWV8sYSk7dGhpcy53b3Jrc3BhY2VfLnNjcm9sbChhLngsYS55KX07QmxvY2tseS5GbHlvdXREcmFnZ2VyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRmx5b3V0RHJhZ2dlci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYS5nZXRXb3Jrc3BhY2UoKSk7dGhpcy5zY3JvbGxiYXJfPWEuc2Nyb2xsYmFyO3RoaXMuaG9yaXpvbnRhbExheW91dF89YS5ob3Jpem9udGFsTGF5b3V0fTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkZseW91dERyYWdnZXIsQmxvY2tseS5Xb3Jrc3BhY2VEcmFnZ2VyKTtCbG9ja2x5LkZseW91dERyYWdnZXIucHJvdG90eXBlLmRyYWc9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuc3VtKHRoaXMuc3RhcnRTY3JvbGxYWV8sYSk7dGhpcy5ob3Jpem9udGFsTGF5b3V0Xz90aGlzLnNjcm9sbGJhcl8uc2V0KC1hLngpOnRoaXMuc2Nyb2xsYmFyXy5zZXQoLWEueSl9O0Jsb2NrbHkuQWN0aW9uPWZ1bmN0aW9uKGEsYil7dGhpcy5uYW1lPWE7dGhpcy5kZXNjPWJ9O0Jsb2NrbHkubmF2aWdhdGlvbj17fTtCbG9ja2x5Lm5hdmlnYXRpb24ubG9nZ2luZ0NhbGxiYWNrPW51bGw7QmxvY2tseS5uYXZpZ2F0aW9uLlNUQVRFX0ZMWU9VVD0xO0Jsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9XUz0yO0Jsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9UT09MQk9YPTM7QmxvY2tseS5uYXZpZ2F0aW9uLldTX01PVkVfRElTVEFOQ0U9NDA7QmxvY2tseS5uYXZpZ2F0aW9uLmN1cnJlbnRTdGF0ZV89QmxvY2tseS5uYXZpZ2F0aW9uLlNUQVRFX1dTO1xuQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzPXtQUkVWSU9VUzpcInByZXZpb3VzXCIsTkVYVDpcIm5leHRcIixJTjpcImluXCIsT1VUOlwib3V0XCIsSU5TRVJUOlwiaW5zZXJ0XCIsTUFSSzpcIm1hcmtcIixESVNDT05ORUNUOlwiZGlzY29ubmVjdFwiLFRPT0xCT1g6XCJ0b29sYm94XCIsRVhJVDpcImV4aXRcIixUT0dHTEVfS0VZQk9BUkRfTkFWOlwidG9nZ2xlX2tleWJvYXJkX25hdlwiLE1PVkVfV1NfQ1VSU09SX1VQOlwibW92ZSB3b3Jrc3BhY2UgY3Vyc29yIHVwXCIsTU9WRV9XU19DVVJTT1JfRE9XTjpcIm1vdmUgd29ya3NwYWNlIGN1cnNvciBkb3duXCIsTU9WRV9XU19DVVJTT1JfTEVGVDpcIm1vdmUgd29ya3NwYWNlIGN1cnNvciBsZWZ0XCIsTU9WRV9XU19DVVJTT1JfUklHSFQ6XCJtb3ZlIHdvcmtzcGFjZSBjdXJzb3IgcmlnaHRcIn07QmxvY2tseS5uYXZpZ2F0aW9uLk1BUktFUl9OQU1FPVwibG9jYWxfbWFya2VyXzFcIjtCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TWFya2VyPWZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCkuZ2V0TWFya2VyKEJsb2NrbHkubmF2aWdhdGlvbi5NQVJLRVJfTkFNRSl9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5nZXRNYWluV29ya3NwYWNlKCl9O0Jsb2NrbHkubmF2aWdhdGlvbi5mb2N1c1Rvb2xib3hfPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKS5nZXRUb29sYm94KCk7YSYmKEJsb2NrbHkubmF2aWdhdGlvbi5jdXJyZW50U3RhdGVfPUJsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9UT09MQk9YLEJsb2NrbHkubmF2aWdhdGlvbi5yZXNldEZseW91dF8oITEpLEJsb2NrbHkubmF2aWdhdGlvbi5nZXRNYXJrZXIoKS5nZXRDdXJOb2RlKCl8fEJsb2NrbHkubmF2aWdhdGlvbi5tYXJrQXRDdXJzb3JfKCksYS5nZXRTZWxlY3RlZEl0ZW0oKXx8YS5zZWxlY3RJdGVtQnlQb3NpdGlvbigwKSl9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLmZvY3VzRmx5b3V0Xz1mdW5jdGlvbigpe0Jsb2NrbHkubmF2aWdhdGlvbi5jdXJyZW50U3RhdGVfPUJsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9GTFlPVVQ7dmFyIGE9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKTt2YXIgYj1hLmdldFRvb2xib3goKTthPWI/Yi5nZXRGbHlvdXQoKTphLmdldEZseW91dCgpO0Jsb2NrbHkubmF2aWdhdGlvbi5nZXRNYXJrZXIoKS5nZXRDdXJOb2RlKCl8fEJsb2NrbHkubmF2aWdhdGlvbi5tYXJrQXRDdXJzb3JfKCk7YSYmYS5nZXRXb3Jrc3BhY2UoKSYmKGE9YS5nZXRXb3Jrc3BhY2UoKS5nZXRUb3BCbG9ja3MoITApLDA8YS5sZW5ndGgmJihhPWFbMF0sYT1CbG9ja2x5LkFTVE5vZGUuY3JlYXRlU3RhY2tOb2RlKGEpLEJsb2NrbHkubmF2aWdhdGlvbi5nZXRGbHlvdXRDdXJzb3JfKCkuc2V0Q3VyTm9kZShhKSkpfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5mb2N1c1dvcmtzcGFjZV89ZnVuY3Rpb24oKXtCbG9ja2x5LmhpZGVDaGFmZigpO3ZhciBhPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCksYj1hLmdldEN1cnNvcigpLGM9ISFhLmdldFRvb2xib3goKSxkPWEuZ2V0VG9wQmxvY2tzKCEwKTtCbG9ja2x5Lm5hdmlnYXRpb24ucmVzZXRGbHlvdXRfKGMpO0Jsb2NrbHkubmF2aWdhdGlvbi5jdXJyZW50U3RhdGVfPUJsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9XUzswPGQubGVuZ3RoP2Iuc2V0Q3VyTm9kZShCbG9ja2x5LkFTVE5vZGUuY3JlYXRlVG9wTm9kZShkWzBdKSk6KGM9bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZSgxMDAsMTAwKSxhPUJsb2NrbHkuQVNUTm9kZS5jcmVhdGVXb3Jrc3BhY2VOb2RlKGEsYyksYi5zZXRDdXJOb2RlKGEpKX07XG5CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0Rmx5b3V0Q3Vyc29yXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCksYj1udWxsO2EucmVuZGVyZWQmJihiPShhPShiPWEuZ2V0VG9vbGJveCgpKT9iLmdldEZseW91dCgpOmEuZ2V0Rmx5b3V0KCkpP2EuZ2V0V29ya3NwYWNlKCkuZ2V0Q3Vyc29yKCk6bnVsbCk7cmV0dXJuIGJ9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLmluc2VydEZyb21GbHlvdXQ9ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpLGI9YS5nZXRGbHlvdXQoKTtpZihiJiZiLmlzVmlzaWJsZSgpKXt2YXIgYz1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0Rmx5b3V0Q3Vyc29yXygpLmdldEN1ck5vZGUoKS5nZXRMb2NhdGlvbigpO2MuaXNFbmFibGVkKCk/KGI9Yi5jcmVhdGVCbG9jayhjKSxiLnJlbmRlcigpLGIuc2V0Q29ubmVjdGlvblRyYWNraW5nKCEwKSxhLmdldEN1cnNvcigpLnNldEN1ck5vZGUoQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZShiKSksQmxvY2tseS5uYXZpZ2F0aW9uLm1vZGlmeV8oKXx8QmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgaW5zZXJ0aW5nIGEgYmxvY2sgZnJvbSB0aGUgZmx5b3V0LlwiKSxCbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNXb3Jrc3BhY2VfKCksYS5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVUb3BOb2RlKGIpKSxcbkJsb2NrbHkubmF2aWdhdGlvbi5yZW1vdmVNYXJrXygpKTpCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJDYW4ndCBpbnNlcnQgYSBkaXNhYmxlZCBibG9jay5cIil9ZWxzZSBCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJUcnlpbmcgdG8gaW5zZXJ0IGZyb20gdGhlIGZseW91dCB3aGVuIHRoZSBmbHlvdXQgZG9lcyBub3QgIGV4aXN0IG9yIGlzIG5vdCB2aXNpYmxlXCIpfTtCbG9ja2x5Lm5hdmlnYXRpb24ucmVzZXRGbHlvdXRfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkubmF2aWdhdGlvbi5nZXRGbHlvdXRDdXJzb3JfKCkmJihCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0Rmx5b3V0Q3Vyc29yXygpLmhpZGUoKSxhJiZCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpLmdldEZseW91dCgpLmhpZGUoKSl9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLm1vZGlmeVdhcm5fPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE1hcmtlcigpLmdldEN1ck5vZGUoKSxiPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCkuZ2V0Q3Vyc29yKCkuZ2V0Q3VyTm9kZSgpO2lmKCFhKXJldHVybiBCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJDYW5ub3QgaW5zZXJ0IHdpdGggbm8gbWFya2VkIG5vZGUuXCIpLCExO2lmKCFiKXJldHVybiBCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJDYW5ub3QgaW5zZXJ0IHdpdGggbm8gY3Vyc29yIG5vZGUuXCIpLCExO2E9YS5nZXRUeXBlKCk7Yj1iLmdldFR5cGUoKTtyZXR1cm4gYT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEPyhCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJTaG91bGQgbm90IGhhdmUgYmVlbiBhYmxlIHRvIG1hcmsgYSBmaWVsZC5cIiksITEpOmE9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSz8oQmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiU2hvdWxkIG5vdCBoYXZlIGJlZW4gYWJsZSB0byBtYXJrIGEgYmxvY2suXCIpLFxuITEpOmE9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSz8oQmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiU2hvdWxkIG5vdCBoYXZlIGJlZW4gYWJsZSB0byBtYXJrIGEgc3RhY2suXCIpLCExKTpiPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuRklFTEQ/KEJsb2NrbHkubmF2aWdhdGlvbi53YXJuXyhcIkNhbm5vdCBhdHRhY2ggYSBmaWVsZCB0byBhbnl0aGluZyBlbHNlLlwiKSwhMSk6Yj09QmxvY2tseS5BU1ROb2RlLnR5cGVzLldPUktTUEFDRT8oQmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiQ2Fubm90IGF0dGFjaCBhIHdvcmtzcGFjZSB0byBhbnl0aGluZyBlbHNlLlwiKSwhMSk6ITB9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVCbG9ja1RvV29ya3NwYWNlXz1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiExO2lmKGEuaXNTaGFkb3coKSlyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiQ2Fubm90IG1vdmUgYSBzaGFkb3cgYmxvY2sgdG8gdGhlIHdvcmtzcGFjZS5cIiksITE7YS5nZXRQYXJlbnQoKSYmYS51bnBsdWcoITEpO2EubW92ZVRvKGIuZ2V0V3NDb29yZGluYXRlKCkpO3JldHVybiEwfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5tb2RpZnlfPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE1hcmtlcigpLmdldEN1ck5vZGUoKSxiPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCkuZ2V0Q3Vyc29yKCkuZ2V0Q3VyTm9kZSgpO2lmKCFCbG9ja2x5Lm5hdmlnYXRpb24ubW9kaWZ5V2Fybl8oKSlyZXR1cm4hMTt2YXIgYz1hLmdldFR5cGUoKSxkPWIuZ2V0VHlwZSgpLGU9Yi5nZXRMb2NhdGlvbigpLGY9YS5nZXRMb2NhdGlvbigpO2lmKGEuaXNDb25uZWN0aW9uKCkmJmIuaXNDb25uZWN0aW9uKCkpcmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5jb25uZWN0XyhlLGYpO2lmKGEuaXNDb25uZWN0aW9uKCkmJihkPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0t8fGQ9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSykpcmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5pbnNlcnRCbG9jayhlLGYpO2lmKGM9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0UpcmV0dXJuIGI9XG5iP2IuZ2V0U291cmNlQmxvY2soKTpudWxsLEJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlQmxvY2tUb1dvcmtzcGFjZV8oYixhKTtCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJVbmV4cGVjdGVkIHN0YXRlIGluIEJsb2NrbHkubmF2aWdhdGlvbi5tb2RpZnlfLlwiKTtyZXR1cm4hMX07QmxvY2tseS5uYXZpZ2F0aW9uLmRpc2Nvbm5lY3RDaGlsZF89ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldFNvdXJjZUJsb2NrKCksZD1iLmdldFNvdXJjZUJsb2NrKCk7Yy5nZXRSb290QmxvY2soKT09ZC5nZXRSb290QmxvY2soKSYmKC0xPGMuZ2V0RGVzY2VuZGFudHMoITEpLmluZGV4T2YoZCk/QmxvY2tseS5uYXZpZ2F0aW9uLmdldEluZmVyaW9yQ29ubmVjdGlvbl8oYikuZGlzY29ubmVjdCgpOkJsb2NrbHkubmF2aWdhdGlvbi5nZXRJbmZlcmlvckNvbm5lY3Rpb25fKGEpLmRpc2Nvbm5lY3QoKSl9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVBbmRDb25uZWN0Xz1mdW5jdGlvbihhLGIpe2lmKCFhfHwhYilyZXR1cm4hMTt2YXIgYz1hLmdldFNvdXJjZUJsb2NrKCk7cmV0dXJuIGEuZ2V0Q29ubmVjdGlvbkNoZWNrZXIoKS5jYW5Db25uZWN0KGEsYiwhMSk/KEJsb2NrbHkubmF2aWdhdGlvbi5kaXNjb25uZWN0Q2hpbGRfKGEsYiksYi5pc1N1cGVyaW9yKCl8fGMuZ2V0Um9vdEJsb2NrKCkucG9zaXRpb25OZWFyQ29ubmVjdGlvbihhLGIpLGIuY29ubmVjdChhKSwhMCk6ITF9O0Jsb2NrbHkubmF2aWdhdGlvbi5nZXRJbmZlcmlvckNvbm5lY3Rpb25fPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0U291cmNlQmxvY2soKTtyZXR1cm4gYS5pc1N1cGVyaW9yKCk/Yi5wcmV2aW91c0Nvbm5lY3Rpb24/Yi5wcmV2aW91c0Nvbm5lY3Rpb246Yi5vdXRwdXRDb25uZWN0aW9uP2Iub3V0cHV0Q29ubmVjdGlvbjpudWxsOmF9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLmdldFN1cGVyaW9yQ29ubmVjdGlvbl89ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNTdXBlcmlvcigpP2E6YS50YXJnZXRDb25uZWN0aW9uP2EudGFyZ2V0Q29ubmVjdGlvbjpudWxsfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5jb25uZWN0Xz1mdW5jdGlvbihhLGIpe2lmKCFhfHwhYilyZXR1cm4hMTt2YXIgYz1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0SW5mZXJpb3JDb25uZWN0aW9uXyhhKSxkPUJsb2NrbHkubmF2aWdhdGlvbi5nZXRTdXBlcmlvckNvbm5lY3Rpb25fKGIpLGU9QmxvY2tseS5uYXZpZ2F0aW9uLmdldFN1cGVyaW9yQ29ubmVjdGlvbl8oYSksZj1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0SW5mZXJpb3JDb25uZWN0aW9uXyhiKTtpZihjJiZkJiZCbG9ja2x5Lm5hdmlnYXRpb24ubW92ZUFuZENvbm5lY3RfKGMsZCl8fGUmJmYmJkJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlQW5kQ29ubmVjdF8oZSxmKXx8QmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVBbmRDb25uZWN0XyhhLGIpKXJldHVybiEwO2M9YS5nZXRDb25uZWN0aW9uQ2hlY2tlcigpO2Q9Yy5jYW5Db25uZWN0V2l0aFJlYXNvbihhLGIsITEpO0Jsb2NrbHkubmF2aWdhdGlvbi53YXJuXyhcIkNvbm5lY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6IFwiK1xuYy5nZXRFcnJvck1lc3NhZ2UoZCxhLGIpKTtyZXR1cm4hMX07XG5CbG9ja2x5Lm5hdmlnYXRpb24uaW5zZXJ0QmxvY2s9ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYi50eXBlKXtjYXNlIEJsb2NrbHkuUFJFVklPVVNfU1RBVEVNRU5UOmlmKEJsb2NrbHkubmF2aWdhdGlvbi5jb25uZWN0XyhhLm5leHRDb25uZWN0aW9uLGIpKXJldHVybiEwO2JyZWFrO2Nhc2UgQmxvY2tseS5ORVhUX1NUQVRFTUVOVDppZihCbG9ja2x5Lm5hdmlnYXRpb24uY29ubmVjdF8oYS5wcmV2aW91c0Nvbm5lY3Rpb24sYikpcmV0dXJuITA7YnJlYWs7Y2FzZSBCbG9ja2x5LklOUFVUX1ZBTFVFOmlmKEJsb2NrbHkubmF2aWdhdGlvbi5jb25uZWN0XyhhLm91dHB1dENvbm5lY3Rpb24sYikpcmV0dXJuITA7YnJlYWs7Y2FzZSBCbG9ja2x5Lk9VVFBVVF9WQUxVRTpmb3IodmFyIGM9MDtjPGEuaW5wdXRMaXN0Lmxlbmd0aDtjKyspe3ZhciBkPWEuaW5wdXRMaXN0W2NdLmNvbm5lY3Rpb247aWYoZCYmZC50eXBlPT09QmxvY2tseS5JTlBVVF9WQUxVRSYmQmxvY2tseS5uYXZpZ2F0aW9uLmNvbm5lY3RfKGQsXG5iKSlyZXR1cm4hMH1pZihhLm91dHB1dENvbm5lY3Rpb24mJkJsb2NrbHkubmF2aWdhdGlvbi5jb25uZWN0XyhhLm91dHB1dENvbm5lY3Rpb24sYikpcmV0dXJuITB9QmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiVGhpcyBibG9jayBjYW4gbm90IGJlIGluc2VydGVkIGF0IHRoZSBtYXJrZWQgbG9jYXRpb24uXCIpO3JldHVybiExfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5kaXNjb25uZWN0QmxvY2tzXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCksYj1hLmdldEN1cnNvcigpLmdldEN1ck5vZGUoKTtpZihiLmlzQ29ubmVjdGlvbigpKXt2YXIgYz1iLmdldExvY2F0aW9uKCk7Yy5pc0Nvbm5lY3RlZCgpPyhiPWMuaXNTdXBlcmlvcigpP2M6Yy50YXJnZXRDb25uZWN0aW9uLGM9Yy5pc1N1cGVyaW9yKCk/Yy50YXJnZXRDb25uZWN0aW9uOmMsYy5nZXRTb3VyY2VCbG9jaygpLmlzU2hhZG93KCk/QmxvY2tseS5uYXZpZ2F0aW9uLmxvZ18oXCJDYW5ub3QgZGlzY29ubmVjdCBhIHNoYWRvdyBibG9ja1wiKTooYi5kaXNjb25uZWN0KCksYy5idW1wQXdheUZyb20oYiksYi5nZXRTb3VyY2VCbG9jaygpLmdldFJvb3RCbG9jaygpLmJyaW5nVG9Gcm9udCgpLGI9QmxvY2tseS5BU1ROb2RlLmNyZWF0ZUNvbm5lY3Rpb25Ob2RlKGIpLGEuZ2V0Q3Vyc29yKCkuc2V0Q3VyTm9kZShiKSkpOlxuQmxvY2tseS5uYXZpZ2F0aW9uLmxvZ18oXCJDYW5ub3QgZGlzY29ubmVjdCB1bmNvbm5lY3RlZCBjb25uZWN0aW9uXCIpfWVsc2UgQmxvY2tseS5uYXZpZ2F0aW9uLmxvZ18oXCJDYW5ub3QgZGlzY29ubmVjdCBibG9ja3Mgd2hlbiB0aGUgY3Vyc29yIGlzIG5vdCBvbiBhIGNvbm5lY3Rpb25cIil9O0Jsb2NrbHkubmF2aWdhdGlvbi5tYXJrQXRDdXJzb3JfPWZ1bmN0aW9uKCl7QmxvY2tseS5uYXZpZ2F0aW9uLmdldE1hcmtlcigpLnNldEN1ck5vZGUoQmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKS5nZXRDdXJzb3IoKS5nZXRDdXJOb2RlKCkpfTtCbG9ja2x5Lm5hdmlnYXRpb24ucmVtb3ZlTWFya189ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TWFya2VyKCk7YS5zZXRDdXJOb2RlKG51bGwpO2EuaGlkZSgpfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5zZXRTdGF0ZT1mdW5jdGlvbihhKXtCbG9ja2x5Lm5hdmlnYXRpb24uY3VycmVudFN0YXRlXz1hfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlQ3Vyc29yT25CbG9ja0RlbGV0ZT1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpO2lmKGImJihiPWIuZ2V0Q3Vyc29yKCkpKXt2YXIgYz1iLmdldEN1ck5vZGUoKTtjPWM/Yy5nZXRTb3VyY2VCbG9jaygpOm51bGw7Yz09PWE/Yy5nZXRQYXJlbnQoKT8oYT1jLnByZXZpb3VzQ29ubmVjdGlvbnx8Yy5vdXRwdXRDb25uZWN0aW9uKSYmYi5zZXRDdXJOb2RlKEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVDb25uZWN0aW9uTm9kZShhLnRhcmdldENvbm5lY3Rpb24pKTpiLnNldEN1ck5vZGUoQmxvY2tseS5BU1ROb2RlLmNyZWF0ZVdvcmtzcGFjZU5vZGUoYy53b3Jrc3BhY2UsYy5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCkpKTpjJiYtMTxhLmdldENoaWxkcmVuKCExKS5pbmRleE9mKGMpJiZiLnNldEN1ck5vZGUoQmxvY2tseS5BU1ROb2RlLmNyZWF0ZVdvcmtzcGFjZU5vZGUoYy53b3Jrc3BhY2UsXG5jLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKSkpfX07QmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVDdXJzb3JPbkJsb2NrTXV0YXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKS5nZXRDdXJzb3IoKTtpZihiKXt2YXIgYz1iLmdldEN1ck5vZGUoKTtjPWM/Yy5nZXRTb3VyY2VCbG9jaygpOm51bGw7Yz09PWEmJmIuc2V0Q3VyTm9kZShCbG9ja2x5LkFTVE5vZGUuY3JlYXRlQmxvY2tOb2RlKGMpKX19O0Jsb2NrbHkubmF2aWdhdGlvbi5lbmFibGVLZXlib2FyZEFjY2Vzc2liaWxpdHk9ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpO2Eua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZXx8KGEua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZT0hMCxCbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNXb3Jrc3BhY2VfKCkpfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5kaXNhYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5PWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKTthLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJihhLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGU9ITEsYS5nZXRDdXJzb3IoKS5oaWRlKCksQmxvY2tseS5uYXZpZ2F0aW9uLmdldE1hcmtlcigpLmhpZGUoKSxCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0Rmx5b3V0Q3Vyc29yXygpJiZCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0Rmx5b3V0Q3Vyc29yXygpLmhpZGUoKSl9O0Jsb2NrbHkubmF2aWdhdGlvbi5sb2dfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkubmF2aWdhdGlvbi5sb2dnaW5nQ2FsbGJhY2s/QmxvY2tseS5uYXZpZ2F0aW9uLmxvZ2dpbmdDYWxsYmFjayhcImxvZ1wiLGEpOmNvbnNvbGUubG9nKGEpfTtcbkJsb2NrbHkubmF2aWdhdGlvbi53YXJuXz1mdW5jdGlvbihhKXtCbG9ja2x5Lm5hdmlnYXRpb24ubG9nZ2luZ0NhbGxiYWNrP0Jsb2NrbHkubmF2aWdhdGlvbi5sb2dnaW5nQ2FsbGJhY2soXCJ3YXJuXCIsYSk6Y29uc29sZS53YXJuKGEpfTtCbG9ja2x5Lm5hdmlnYXRpb24uZXJyb3JfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkubmF2aWdhdGlvbi5sb2dnaW5nQ2FsbGJhY2s/QmxvY2tseS5uYXZpZ2F0aW9uLmxvZ2dpbmdDYWxsYmFjayhcImVycm9yXCIsYSk6Y29uc29sZS5lcnJvcihhKX07QmxvY2tseS5uYXZpZ2F0aW9uLm9uS2V5UHJlc3M9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnVzZXIua2V5TWFwLnNlcmlhbGl6ZUtleUV2ZW50KGEpO3JldHVybihhPUJsb2NrbHkudXNlci5rZXlNYXAuZ2V0QWN0aW9uQnlLZXlDb2RlKGEpKT9CbG9ja2x5Lm5hdmlnYXRpb24ub25CbG9ja2x5QWN0aW9uKGEpOiExfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5vbkJsb2NrbHlBY3Rpb249ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKSxjPWIub3B0aW9ucy5yZWFkT25seSxkPSExO2Iua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZT9jPy0xPEJsb2NrbHkubmF2aWdhdGlvbi5SRUFET05MWV9BQ1RJT05fTElTVC5pbmRleE9mKGEpJiYoZD1CbG9ja2x5Lm5hdmlnYXRpb24uaGFuZGxlQWN0aW9uc18oYSkpOmQ9QmxvY2tseS5uYXZpZ2F0aW9uLmhhbmRsZUFjdGlvbnNfKGEpOmEubmFtZT09PUJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5UT0dHTEVfS0VZQk9BUkRfTkFWJiYoQmxvY2tseS5uYXZpZ2F0aW9uLmVuYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSgpLGQ9ITApO3JldHVybiBkfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5oYW5kbGVBY3Rpb25zXz1mdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lPT1CbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuVE9PTEJPWHx8QmxvY2tseS5uYXZpZ2F0aW9uLmN1cnJlbnRTdGF0ZV89PUJsb2NrbHkubmF2aWdhdGlvbi5TVEFURV9UT09MQk9YP0Jsb2NrbHkubmF2aWdhdGlvbi50b29sYm94T25BY3Rpb25fKGEpOmEubmFtZT09QmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLlRPR0dMRV9LRVlCT0FSRF9OQVY/KEJsb2NrbHkubmF2aWdhdGlvbi5kaXNhYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5KCksITApOkJsb2NrbHkubmF2aWdhdGlvbi5jdXJyZW50U3RhdGVfPT1CbG9ja2x5Lm5hdmlnYXRpb24uU1RBVEVfV1M/QmxvY2tseS5uYXZpZ2F0aW9uLndvcmtzcGFjZU9uQWN0aW9uXyhhKTpCbG9ja2x5Lm5hdmlnYXRpb24uY3VycmVudFN0YXRlXz09QmxvY2tseS5uYXZpZ2F0aW9uLlNUQVRFX0ZMWU9VVD9CbG9ja2x5Lm5hdmlnYXRpb24uZmx5b3V0T25BY3Rpb25fKGEpOlxuITF9O0Jsb2NrbHkubmF2aWdhdGlvbi5mbHlvdXRPbkFjdGlvbl89ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKSxjPWIuZ2V0VG9vbGJveCgpO2lmKChiPWM/Yy5nZXRGbHlvdXQoKTpiLmdldEZseW91dCgpKSYmYi5vbkJsb2NrbHlBY3Rpb24oYSkpcmV0dXJuITA7c3dpdGNoKGEubmFtZSl7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuT1VUOnJldHVybiBCbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNUb29sYm94XygpLCEwO2Nhc2UgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLk1BUks6cmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5pbnNlcnRGcm9tRmx5b3V0KCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuRVhJVDpyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLmZvY3VzV29ya3NwYWNlXygpLCEwO2RlZmF1bHQ6cmV0dXJuITF9fTtcbkJsb2NrbHkubmF2aWdhdGlvbi50b29sYm94T25BY3Rpb25fPWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkubmF2aWdhdGlvbi5nZXROYXZpZ2F0aW9uV29ya3NwYWNlKCksYz1iLmdldFRvb2xib3goKTtyZXR1cm4gYyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYy5vbkJsb2NrbHlBY3Rpb24mJmMub25CbG9ja2x5QWN0aW9uKGEpPyEwOmEubmFtZT09PUJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5UT09MQk9YPyhiLmdldFRvb2xib3goKT9CbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNUb29sYm94XygpOkJsb2NrbHkubmF2aWdhdGlvbi5mb2N1c0ZseW91dF8oKSwhMCk6YS5uYW1lPT09QmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLklOPyhCbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNGbHlvdXRfKCksITApOmEubmFtZT09PUJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5FWElUPyhCbG9ja2x5Lm5hdmlnYXRpb24uZm9jdXNXb3Jrc3BhY2VfKCksITApOiExfTtcbkJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlV1NDdXJzb3JfPWZ1bmN0aW9uKGEsYil7dmFyIGM9QmxvY2tseS5uYXZpZ2F0aW9uLmdldE5hdmlnYXRpb25Xb3Jrc3BhY2UoKSxkPWMuZ2V0Q3Vyc29yKCksZT1jLmdldEN1cnNvcigpLmdldEN1ck5vZGUoKTtpZihlLmdldFR5cGUoKSE9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0UpcmV0dXJuITE7ZT1lLmdldFdzQ29vcmRpbmF0ZSgpO2Quc2V0Q3VyTm9kZShCbG9ja2x5LkFTVE5vZGUuY3JlYXRlV29ya3NwYWNlTm9kZShjLG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYSpCbG9ja2x5Lm5hdmlnYXRpb24uV1NfTU9WRV9ESVNUQU5DRStlLngsYipCbG9ja2x5Lm5hdmlnYXRpb24uV1NfTU9WRV9ESVNUQU5DRStlLnkpKSk7cmV0dXJuITB9O1xuQmxvY2tseS5uYXZpZ2F0aW9uLndvcmtzcGFjZU9uQWN0aW9uXz1mdW5jdGlvbihhKXtpZihCbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpLmdldEN1cnNvcigpLm9uQmxvY2tseUFjdGlvbihhKSlyZXR1cm4hMDtzd2l0Y2goYS5uYW1lKXtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5JTlNFUlQ6cmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5tb2RpZnlfKCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTUFSSzpyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLmhhbmRsZUVudGVyRm9yV1NfKCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuRElTQ09OTkVDVDpyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLmRpc2Nvbm5lY3RCbG9ja3NfKCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTU9WRV9XU19DVVJTT1JfVVA6cmV0dXJuIEJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlV1NDdXJzb3JfKDAsXG4tMSk7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTU9WRV9XU19DVVJTT1JfRE9XTjpyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVXU0N1cnNvcl8oMCwxKTtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5NT1ZFX1dTX0NVUlNPUl9MRUZUOnJldHVybiBCbG9ja2x5Lm5hdmlnYXRpb24ubW92ZVdTQ3Vyc29yXygtMSwwKTtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5NT1ZFX1dTX0NVUlNPUl9SSUdIVDpyZXR1cm4gQmxvY2tseS5uYXZpZ2F0aW9uLm1vdmVXU0N1cnNvcl8oMSwwKTtkZWZhdWx0OnJldHVybiExfX07XG5CbG9ja2x5Lm5hdmlnYXRpb24uaGFuZGxlRW50ZXJGb3JXU189ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5Lm5hdmlnYXRpb24uZ2V0TmF2aWdhdGlvbldvcmtzcGFjZSgpLmdldEN1cnNvcigpLmdldEN1ck5vZGUoKSxiPWEuZ2V0VHlwZSgpO2I9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5GSUVMRD9hLmdldExvY2F0aW9uKCkuc2hvd0VkaXRvcigpOmEuaXNDb25uZWN0aW9uKCl8fGI9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0U/QmxvY2tseS5uYXZpZ2F0aW9uLm1hcmtBdEN1cnNvcl8oKTpiPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0s/QmxvY2tseS5uYXZpZ2F0aW9uLndhcm5fKFwiQ2Fubm90IG1hcmsgYSBibG9jay5cIik6Yj09QmxvY2tseS5BU1ROb2RlLnR5cGVzLlNUQUNLJiZCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oXCJDYW5ub3QgbWFyayBhIHN0YWNrLlwiKX07XG5CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1BSRVZJT1VTPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuUFJFVklPVVMsXCJHbyB0byB0aGUgcHJldmlvdXMgbG9jYXRpb24uXCIpO0Jsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fT1VUPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuT1VULFwiR28gdG8gdGhlIHBhcmVudCBvZiB0aGUgY3VycmVudCBsb2NhdGlvbi5cIik7QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9ORVhUPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTkVYVCxcIkdvIHRvIHRoZSBuZXh0IGxvY2F0aW9uLlwiKTtCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0lOPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuSU4sXCJHbyB0byB0aGUgZmlyc3QgY2hpbGQgb2YgdGhlIGN1cnJlbnQgbG9jYXRpb24uXCIpO1xuQmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9JTlNFUlQ9bmV3IEJsb2NrbHkuQWN0aW9uKEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5JTlNFUlQsXCJDb25uZWN0IHRoZSBjdXJyZW50IGxvY2F0aW9uIHRvIHRoZSBtYXJrZWQgbG9jYXRpb24uXCIpO0Jsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTUFSSz1uZXcgQmxvY2tseS5BY3Rpb24oQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLk1BUkssXCJNYXJrIHRoZSBjdXJyZW50IGxvY2F0aW9uLlwiKTtCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0RJU0NPTk5FQ1Q9bmV3IEJsb2NrbHkuQWN0aW9uKEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5ESVNDT05ORUNULFwiRGlzY29ubmVjdCB0aGUgYmxvY2sgYXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBpdHMgcGFyZW50LlwiKTtcbkJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fVE9PTEJPWD1uZXcgQmxvY2tseS5BY3Rpb24oQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLlRPT0xCT1gsXCJPcGVuIHRoZSB0b29sYm94LlwiKTtCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0VYSVQ9bmV3IEJsb2NrbHkuQWN0aW9uKEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5FWElULFwiQ2xvc2UgdGhlIGN1cnJlbnQgbW9kYWwsIHN1Y2ggYXMgYSB0b29sYm94IG9yIGZpZWxkIGVkaXRvci5cIik7QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9UT0dHTEVfS0VZQk9BUkRfTkFWPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuVE9HR0xFX0tFWUJPQVJEX05BVixcIlR1cm5zIG9uIGFuZCBvZmYga2V5Ym9hcmQgbmF2aWdhdGlvbi5cIik7XG5CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX01PVkVfV1NfQ1VSU09SX0xFRlQ9bmV3IEJsb2NrbHkuQWN0aW9uKEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5NT1ZFX1dTX0NVUlNPUl9MRUZULFwiTW92ZSB0aGUgd29ya3NwYWNlIGN1cnNvciB0byB0aGUgbGVmdHMuXCIpO0Jsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTU9WRV9XU19DVVJTT1JfUklHSFQ9bmV3IEJsb2NrbHkuQWN0aW9uKEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5NT1ZFX1dTX0NVUlNPUl9SSUdIVCxcIk1vdmUgdGhlIHdvcmtzcGFjZSBjdXJzb3IgdG8gdGhlIHJpZ2h0LlwiKTtCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX01PVkVfV1NfQ1VSU09SX1VQPW5ldyBCbG9ja2x5LkFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTU9WRV9XU19DVVJTT1JfVVAsXCJNb3ZlIHRoZSB3b3Jrc3BhY2UgY3Vyc29yIHVwLlwiKTtcbkJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTU9WRV9XU19DVVJTT1JfRE9XTj1uZXcgQmxvY2tseS5BY3Rpb24oQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLk1PVkVfV1NfQ1VSU09SX0RPV04sXCJNb3ZlIHRoZSB3b3Jrc3BhY2UgY3Vyc29yIGRvd24uXCIpO0Jsb2NrbHkubmF2aWdhdGlvbi5SRUFET05MWV9BQ1RJT05fTElTVD1bQmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9QUkVWSU9VUyxCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX09VVCxCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0lOLEJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTkVYVCxCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1RPR0dMRV9LRVlCT0FSRF9OQVZdO0Jsb2NrbHkuR2VzdHVyZT1mdW5jdGlvbihhLGIpe3RoaXMubW91c2VEb3duWFlfPW51bGw7dGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoMCwwKTt0aGlzLnN0YXJ0V29ya3NwYWNlXz10aGlzLnRhcmdldEJsb2NrXz10aGlzLnN0YXJ0QmxvY2tfPXRoaXMuc3RhcnRGaWVsZF89dGhpcy5zdGFydEJ1YmJsZV89bnVsbDt0aGlzLmNyZWF0b3JXb3Jrc3BhY2VfPWI7dGhpcy5pc0RyYWdnaW5nQnViYmxlXz10aGlzLmlzRHJhZ2dpbmdCbG9ja189dGhpcy5pc0RyYWdnaW5nV29ya3NwYWNlXz10aGlzLmhhc0V4Y2VlZGVkRHJhZ1JhZGl1c189ITE7dGhpcy5tb3N0UmVjZW50RXZlbnRfPWE7dGhpcy5mbHlvdXRfPXRoaXMud29ya3NwYWNlRHJhZ2dlcl89dGhpcy5ibG9ja0RyYWdnZXJfPXRoaXMuYnViYmxlRHJhZ2dlcl89dGhpcy5vblVwV3JhcHBlcl89dGhpcy5vbk1vdmVXcmFwcGVyXz1udWxsO3RoaXMuaXNFbmRpbmdfPXRoaXMuaGFzU3RhcnRlZF89XG50aGlzLmNhbGxlZFVwZGF0ZUlzRHJhZ2dpbmdfPSExO3RoaXMuaGVhbFN0YWNrXz0hQmxvY2tseS5EUkFHX1NUQUNLfTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtCbG9ja2x5LlRvdWNoLmNsZWFyVG91Y2hJZGVudGlmaWVyKCk7QmxvY2tseS5Ub29sdGlwLnVuYmxvY2soKTt0aGlzLmNyZWF0b3JXb3Jrc3BhY2VfLmNsZWFyR2VzdHVyZSgpO3RoaXMub25Nb3ZlV3JhcHBlcl8mJkJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25Nb3ZlV3JhcHBlcl8pO3RoaXMub25VcFdyYXBwZXJfJiZCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uVXBXcmFwcGVyXyk7dGhpcy5ibG9ja0RyYWdnZXJfJiZ0aGlzLmJsb2NrRHJhZ2dlcl8uZGlzcG9zZSgpO3RoaXMud29ya3NwYWNlRHJhZ2dlcl8mJnRoaXMud29ya3NwYWNlRHJhZ2dlcl8uZGlzcG9zZSgpO3RoaXMuYnViYmxlRHJhZ2dlcl8mJnRoaXMuYnViYmxlRHJhZ2dlcl8uZGlzcG9zZSgpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUudXBkYXRlRnJvbUV2ZW50Xz1mdW5jdGlvbihhKXt2YXIgYj1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGEuY2xpZW50WCxhLmNsaWVudFkpO3RoaXMudXBkYXRlRHJhZ0RlbHRhXyhiKSYmKHRoaXMudXBkYXRlSXNEcmFnZ2luZ18oKSxCbG9ja2x5LmxvbmdTdG9wXygpKTt0aGlzLm1vc3RSZWNlbnRFdmVudF89YX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnVwZGF0ZURyYWdEZWx0YV89ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfPUJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5kaWZmZXJlbmNlKGEsdGhpcy5tb3VzZURvd25YWV8pO3JldHVybiB0aGlzLmhhc0V4Y2VlZGVkRHJhZ1JhZGl1c18/ITE6dGhpcy5oYXNFeGNlZWRlZERyYWdSYWRpdXNfPUJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5tYWduaXR1ZGUodGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKT4odGhpcy5mbHlvdXRfP0Jsb2NrbHkuRkxZT1VUX0RSQUdfUkFESVVTOkJsb2NrbHkuRFJBR19SQURJVVMpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUudXBkYXRlSXNEcmFnZ2luZ0Zyb21GbHlvdXRfPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0QmxvY2tfJiZ0aGlzLmZseW91dF8uaXNCbG9ja0NyZWF0YWJsZV8odGhpcy50YXJnZXRCbG9ja18pPyF0aGlzLmZseW91dF8uaXNTY3JvbGxhYmxlKCl8fHRoaXMuZmx5b3V0Xy5pc0RyYWdUb3dhcmRXb3Jrc3BhY2UodGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKT8odGhpcy5zdGFydFdvcmtzcGFjZV89dGhpcy5mbHlvdXRfLnRhcmdldFdvcmtzcGFjZSx0aGlzLnN0YXJ0V29ya3NwYWNlXy51cGRhdGVTY3JlZW5DYWxjdWxhdGlvbnNJZlNjcm9sbGVkKCksQmxvY2tseS5FdmVudHMuZ2V0R3JvdXAoKXx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApLHRoaXMuc3RhcnRCbG9ja189bnVsbCx0aGlzLnRhcmdldEJsb2NrXz10aGlzLmZseW91dF8uY3JlYXRlQmxvY2sodGhpcy50YXJnZXRCbG9ja18pLHRoaXMudGFyZ2V0QmxvY2tfLnNlbGVjdCgpLFxuITApOiExOiExfTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnVwZGF0ZUlzRHJhZ2dpbmdCdWJibGVfPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc3RhcnRCdWJibGVfKXJldHVybiExO3RoaXMuaXNEcmFnZ2luZ0J1YmJsZV89ITA7dGhpcy5zdGFydERyYWdnaW5nQnViYmxlXygpO3JldHVybiEwfTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnVwZGF0ZUlzRHJhZ2dpbmdCbG9ja189ZnVuY3Rpb24oKXtpZighdGhpcy50YXJnZXRCbG9ja18pcmV0dXJuITE7dGhpcy5mbHlvdXRfP3RoaXMuaXNEcmFnZ2luZ0Jsb2NrXz10aGlzLnVwZGF0ZUlzRHJhZ2dpbmdGcm9tRmx5b3V0XygpOnRoaXMudGFyZ2V0QmxvY2tfLmlzTW92YWJsZSgpJiYodGhpcy5pc0RyYWdnaW5nQmxvY2tfPSEwKTtyZXR1cm4gdGhpcy5pc0RyYWdnaW5nQmxvY2tfPyh0aGlzLnN0YXJ0RHJhZ2dpbmdCbG9ja18oKSwhMCk6ITF9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS51cGRhdGVJc0RyYWdnaW5nV29ya3NwYWNlXz1mdW5jdGlvbigpe2lmKHRoaXMuZmx5b3V0Xz90aGlzLmZseW91dF8uaXNTY3JvbGxhYmxlKCk6dGhpcy5zdGFydFdvcmtzcGFjZV8mJnRoaXMuc3RhcnRXb3Jrc3BhY2VfLmlzRHJhZ2dhYmxlKCkpdGhpcy53b3Jrc3BhY2VEcmFnZ2VyXz10aGlzLmZseW91dF8/bmV3IEJsb2NrbHkuRmx5b3V0RHJhZ2dlcih0aGlzLmZseW91dF8pOm5ldyBCbG9ja2x5LldvcmtzcGFjZURyYWdnZXIodGhpcy5zdGFydFdvcmtzcGFjZV8pLHRoaXMuaXNEcmFnZ2luZ1dvcmtzcGFjZV89ITAsdGhpcy53b3Jrc3BhY2VEcmFnZ2VyXy5zdGFydERyYWcoKX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnVwZGF0ZUlzRHJhZ2dpbmdfPWZ1bmN0aW9uKCl7aWYodGhpcy5jYWxsZWRVcGRhdGVJc0RyYWdnaW5nXyl0aHJvdyBFcnJvcihcInVwZGF0ZUlzRHJhZ2dpbmdfIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbmNlIHBlciBnZXN0dXJlLlwiKTt0aGlzLmNhbGxlZFVwZGF0ZUlzRHJhZ2dpbmdfPSEwO3RoaXMudXBkYXRlSXNEcmFnZ2luZ0J1YmJsZV8oKXx8dGhpcy51cGRhdGVJc0RyYWdnaW5nQmxvY2tfKCl8fHRoaXMudXBkYXRlSXNEcmFnZ2luZ1dvcmtzcGFjZV8oKX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnN0YXJ0RHJhZ2dpbmdCbG9ja189ZnVuY3Rpb24oKXt0aGlzLmJsb2NrRHJhZ2dlcl89bmV3IEJsb2NrbHkuQmxvY2tEcmFnZ2VyKHRoaXMudGFyZ2V0QmxvY2tfLHRoaXMuc3RhcnRXb3Jrc3BhY2VfKTt0aGlzLmJsb2NrRHJhZ2dlcl8uc3RhcnRCbG9ja0RyYWcodGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfLHRoaXMuaGVhbFN0YWNrXyk7dGhpcy5ibG9ja0RyYWdnZXJfLmRyYWdCbG9jayh0aGlzLm1vc3RSZWNlbnRFdmVudF8sdGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLnN0YXJ0RHJhZ2dpbmdCdWJibGVfPWZ1bmN0aW9uKCl7dGhpcy5idWJibGVEcmFnZ2VyXz1uZXcgQmxvY2tseS5CdWJibGVEcmFnZ2VyKHRoaXMuc3RhcnRCdWJibGVfLHRoaXMuc3RhcnRXb3Jrc3BhY2VfKTt0aGlzLmJ1YmJsZURyYWdnZXJfLnN0YXJ0QnViYmxlRHJhZygpO3RoaXMuYnViYmxlRHJhZ2dlcl8uZHJhZ0J1YmJsZSh0aGlzLm1vc3RSZWNlbnRFdmVudF8sdGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmRvU3RhcnQ9ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5pc1RhcmdldElucHV0KGEpP3RoaXMuY2FuY2VsKCk6KHRoaXMuaGFzU3RhcnRlZF89ITAsQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzY29ubmVjdFVpU3RvcCgpLHRoaXMuc3RhcnRXb3Jrc3BhY2VfLnVwZGF0ZVNjcmVlbkNhbGN1bGF0aW9uc0lmU2Nyb2xsZWQoKSx0aGlzLnN0YXJ0V29ya3NwYWNlXy5pc011dGF0b3ImJnRoaXMuc3RhcnRXb3Jrc3BhY2VfLnJlc2l6ZSgpLEJsb2NrbHkuaGlkZUNoYWZmKCEhdGhpcy5mbHlvdXRfKSx0aGlzLnN0YXJ0V29ya3NwYWNlXy5tYXJrRm9jdXNlZCgpLHRoaXMubW9zdFJlY2VudEV2ZW50Xz1hLEJsb2NrbHkuVG9vbHRpcC5ibG9jaygpLHRoaXMudGFyZ2V0QmxvY2tfJiYoIXRoaXMudGFyZ2V0QmxvY2tfLmlzSW5GbHlvdXQmJmEuc2hpZnRLZXkmJnRoaXMudGFyZ2V0QmxvY2tfLndvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlP1xudGhpcy5jcmVhdG9yV29ya3NwYWNlXy5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKEJsb2NrbHkuQVNUTm9kZS5jcmVhdGVUb3BOb2RlKHRoaXMudGFyZ2V0QmxvY2tfKSk6dGhpcy50YXJnZXRCbG9ja18uc2VsZWN0KCkpLEJsb2NrbHkudXRpbHMuaXNSaWdodEJ1dHRvbihhKT90aGlzLmhhbmRsZVJpZ2h0Q2xpY2soYSk6KFwidG91Y2hzdGFydFwiIT1hLnR5cGUudG9Mb3dlckNhc2UoKSYmXCJwb2ludGVyZG93blwiIT1hLnR5cGUudG9Mb3dlckNhc2UoKXx8XCJtb3VzZVwiPT1hLnBvaW50ZXJUeXBlfHxCbG9ja2x5LmxvbmdTdGFydChhLHRoaXMpLHRoaXMubW91c2VEb3duWFlfPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS5jbGllbnRYLGEuY2xpZW50WSksdGhpcy5oZWFsU3RhY2tfPWEuYWx0S2V5fHxhLmN0cmxLZXl8fGEubWV0YUtleSx0aGlzLmJpbmRNb3VzZUV2ZW50cyhhKSkpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuYmluZE1vdXNlRXZlbnRzPWZ1bmN0aW9uKGEpe3RoaXMub25Nb3ZlV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkb2N1bWVudCxcIm1vdXNlbW92ZVwiLG51bGwsdGhpcy5oYW5kbGVNb3ZlLmJpbmQodGhpcykpO3RoaXMub25VcFdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZG9jdW1lbnQsXCJtb3VzZXVwXCIsbnVsbCx0aGlzLmhhbmRsZVVwLmJpbmQodGhpcykpO2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuaGFuZGxlTW92ZT1mdW5jdGlvbihhKXt0aGlzLnVwZGF0ZUZyb21FdmVudF8oYSk7dGhpcy5pc0RyYWdnaW5nV29ya3NwYWNlXz90aGlzLndvcmtzcGFjZURyYWdnZXJfLmRyYWcodGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKTp0aGlzLmlzRHJhZ2dpbmdCbG9ja18/dGhpcy5ibG9ja0RyYWdnZXJfLmRyYWdCbG9jayh0aGlzLm1vc3RSZWNlbnRFdmVudF8sdGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKTp0aGlzLmlzRHJhZ2dpbmdCdWJibGVfJiZ0aGlzLmJ1YmJsZURyYWdnZXJfLmRyYWdCdWJibGUodGhpcy5tb3N0UmVjZW50RXZlbnRfLHRoaXMuY3VycmVudERyYWdEZWx0YVhZXyk7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5oYW5kbGVVcD1mdW5jdGlvbihhKXt0aGlzLnVwZGF0ZUZyb21FdmVudF8oYSk7QmxvY2tseS5sb25nU3RvcF8oKTt0aGlzLmlzRW5kaW5nXz9jb25zb2xlLmxvZyhcIlRyeWluZyB0byBlbmQgYSBnZXN0dXJlIHJlY3Vyc2l2ZWx5LlwiKToodGhpcy5pc0VuZGluZ189ITAsdGhpcy5pc0RyYWdnaW5nQnViYmxlXz90aGlzLmJ1YmJsZURyYWdnZXJfLmVuZEJ1YmJsZURyYWcoYSx0aGlzLmN1cnJlbnREcmFnRGVsdGFYWV8pOnRoaXMuaXNEcmFnZ2luZ0Jsb2NrXz90aGlzLmJsb2NrRHJhZ2dlcl8uZW5kQmxvY2tEcmFnKGEsdGhpcy5jdXJyZW50RHJhZ0RlbHRhWFlfKTp0aGlzLmlzRHJhZ2dpbmdXb3Jrc3BhY2VfP3RoaXMud29ya3NwYWNlRHJhZ2dlcl8uZW5kRHJhZyh0aGlzLmN1cnJlbnREcmFnRGVsdGFYWV8pOnRoaXMuaXNCdWJibGVDbGlja18oKT90aGlzLmRvQnViYmxlQ2xpY2tfKCk6dGhpcy5pc0ZpZWxkQ2xpY2tfKCk/dGhpcy5kb0ZpZWxkQ2xpY2tfKCk6XG50aGlzLmlzQmxvY2tDbGlja18oKT90aGlzLmRvQmxvY2tDbGlja18oKTp0aGlzLmlzV29ya3NwYWNlQ2xpY2tfKCkmJnRoaXMuZG9Xb3Jrc3BhY2VDbGlja18oYSksYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5kaXNwb3NlKCkpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pc0VuZGluZ198fChCbG9ja2x5LmxvbmdTdG9wXygpLHRoaXMuaXNEcmFnZ2luZ0J1YmJsZV8/dGhpcy5idWJibGVEcmFnZ2VyXy5lbmRCdWJibGVEcmFnKHRoaXMubW9zdFJlY2VudEV2ZW50Xyx0aGlzLmN1cnJlbnREcmFnRGVsdGFYWV8pOnRoaXMuaXNEcmFnZ2luZ0Jsb2NrXz90aGlzLmJsb2NrRHJhZ2dlcl8uZW5kQmxvY2tEcmFnKHRoaXMubW9zdFJlY2VudEV2ZW50Xyx0aGlzLmN1cnJlbnREcmFnRGVsdGFYWV8pOnRoaXMuaXNEcmFnZ2luZ1dvcmtzcGFjZV8mJnRoaXMud29ya3NwYWNlRHJhZ2dlcl8uZW5kRHJhZyh0aGlzLmN1cnJlbnREcmFnRGVsdGFYWV8pLHRoaXMuZGlzcG9zZSgpKX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmhhbmRsZVJpZ2h0Q2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy50YXJnZXRCbG9ja18/KHRoaXMuYnJpbmdCbG9ja1RvRnJvbnRfKCksQmxvY2tseS5oaWRlQ2hhZmYoISF0aGlzLmZseW91dF8pLHRoaXMudGFyZ2V0QmxvY2tfLnNob3dDb250ZXh0TWVudShhKSk6dGhpcy5zdGFydEJ1YmJsZV8/dGhpcy5zdGFydEJ1YmJsZV8uc2hvd0NvbnRleHRNZW51KGEpOnRoaXMuc3RhcnRXb3Jrc3BhY2VfJiYhdGhpcy5mbHlvdXRfJiYoQmxvY2tseS5oaWRlQ2hhZmYoKSx0aGlzLnN0YXJ0V29ya3NwYWNlXy5zaG93Q29udGV4dE1lbnUoYSkpO2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuZGlzcG9zZSgpfTtcbkJsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuaGFuZGxlV3NTdGFydD1mdW5jdGlvbihhLGIpe2lmKHRoaXMuaGFzU3RhcnRlZF8pdGhyb3cgRXJyb3IoXCJUcmllZCB0byBjYWxsIGdlc3R1cmUuaGFuZGxlV3NTdGFydCwgYnV0IHRoZSBnZXN0dXJlIGhhZCBhbHJlYWR5IGJlZW4gc3RhcnRlZC5cIik7dGhpcy5zZXRTdGFydFdvcmtzcGFjZV8oYik7dGhpcy5tb3N0UmVjZW50RXZlbnRfPWE7dGhpcy5kb1N0YXJ0KGEpO3RoaXMuc3RhcnRXb3Jrc3BhY2VfLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJkJsb2NrbHkubmF2aWdhdGlvbi5zZXRTdGF0ZShCbG9ja2x5Lm5hdmlnYXRpb24uU1RBVEVfV1MpfTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmZpcmVXb3Jrc3BhY2VDbGlja189ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEJsb2NrbHkuRXZlbnRzLlVpKG51bGwsXCJjbGlja1wiLG51bGwsXCJ3b3Jrc3BhY2VcIik7Yi53b3Jrc3BhY2VJZD1hLmlkO0Jsb2NrbHkuRXZlbnRzLmZpcmUoYil9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5oYW5kbGVGbHlvdXRTdGFydD1mdW5jdGlvbihhLGIpe2lmKHRoaXMuaGFzU3RhcnRlZF8pdGhyb3cgRXJyb3IoXCJUcmllZCB0byBjYWxsIGdlc3R1cmUuaGFuZGxlRmx5b3V0U3RhcnQsIGJ1dCB0aGUgZ2VzdHVyZSBoYWQgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQuXCIpO3RoaXMuc2V0U3RhcnRGbHlvdXRfKGIpO3RoaXMuaGFuZGxlV3NTdGFydChhLGIuZ2V0V29ya3NwYWNlKCkpfTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmhhbmRsZUJsb2NrU3RhcnQ9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmhhc1N0YXJ0ZWRfKXRocm93IEVycm9yKFwiVHJpZWQgdG8gY2FsbCBnZXN0dXJlLmhhbmRsZUJsb2NrU3RhcnQsIGJ1dCB0aGUgZ2VzdHVyZSBoYWQgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQuXCIpO3RoaXMuc2V0U3RhcnRCbG9jayhiKTt0aGlzLm1vc3RSZWNlbnRFdmVudF89YX07XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmhhbmRsZUJ1YmJsZVN0YXJ0PWZ1bmN0aW9uKGEsYil7aWYodGhpcy5oYXNTdGFydGVkXyl0aHJvdyBFcnJvcihcIlRyaWVkIHRvIGNhbGwgZ2VzdHVyZS5oYW5kbGVCdWJibGVTdGFydCwgYnV0IHRoZSBnZXN0dXJlIGhhZCBhbHJlYWR5IGJlZW4gc3RhcnRlZC5cIik7dGhpcy5zZXRTdGFydEJ1YmJsZShiKTt0aGlzLm1vc3RSZWNlbnRFdmVudF89YX07QmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5kb0J1YmJsZUNsaWNrXz1mdW5jdGlvbigpe3RoaXMuc3RhcnRCdWJibGVfLnNldEZvY3VzJiZ0aGlzLnN0YXJ0QnViYmxlXy5zZXRGb2N1cygpO3RoaXMuc3RhcnRCdWJibGVfLnNlbGVjdCYmdGhpcy5zdGFydEJ1YmJsZV8uc2VsZWN0KCl9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuZG9GaWVsZENsaWNrXz1mdW5jdGlvbigpe3RoaXMuc3RhcnRGaWVsZF8uc2hvd0VkaXRvcih0aGlzLm1vc3RSZWNlbnRFdmVudF8pO3RoaXMuYnJpbmdCbG9ja1RvRnJvbnRfKCl9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5kb0Jsb2NrQ2xpY2tfPWZ1bmN0aW9uKCl7dGhpcy5mbHlvdXRfJiZ0aGlzLmZseW91dF8uYXV0b0Nsb3NlP3RoaXMudGFyZ2V0QmxvY2tfLmlzRW5hYmxlZCgpJiYoQmxvY2tseS5FdmVudHMuZ2V0R3JvdXAoKXx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApLHRoaXMuZmx5b3V0Xy5jcmVhdGVCbG9jayh0aGlzLnRhcmdldEJsb2NrXykuc2NoZWR1bGVTbmFwQW5kQnVtcCgpKTpCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5VaSh0aGlzLnN0YXJ0QmxvY2tfLFwiY2xpY2tcIix2b2lkIDAsXCJibG9ja1wiKSk7dGhpcy5icmluZ0Jsb2NrVG9Gcm9udF8oKTtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5kb1dvcmtzcGFjZUNsaWNrXz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0b3JXb3Jrc3BhY2VfO2Euc2hpZnRLZXkmJmIua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZT8oYT1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGEuY2xpZW50WCxhLmNsaWVudFkpLGE9QmxvY2tseS51dGlscy5zY3JlZW5Ub1dzQ29vcmRpbmF0ZXMoYixhKSxhPUJsb2NrbHkuQVNUTm9kZS5jcmVhdGVXb3Jrc3BhY2VOb2RlKGIsYSksYi5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKGEpKTpCbG9ja2x5LnNlbGVjdGVkJiZCbG9ja2x5LnNlbGVjdGVkLnVuc2VsZWN0KCk7dGhpcy5maXJlV29ya3NwYWNlQ2xpY2tfKHRoaXMuc3RhcnRXb3Jrc3BhY2VffHxiKX07QmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5icmluZ0Jsb2NrVG9Gcm9udF89ZnVuY3Rpb24oKXt0aGlzLnRhcmdldEJsb2NrXyYmIXRoaXMuZmx5b3V0XyYmdGhpcy50YXJnZXRCbG9ja18uYnJpbmdUb0Zyb250KCl9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5zZXRTdGFydEZpZWxkPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzU3RhcnRlZF8pdGhyb3cgRXJyb3IoXCJUcmllZCB0byBjYWxsIGdlc3R1cmUuc2V0U3RhcnRGaWVsZCwgYnV0IHRoZSBnZXN0dXJlIGhhZCBhbHJlYWR5IGJlZW4gc3RhcnRlZC5cIik7dGhpcy5zdGFydEZpZWxkX3x8KHRoaXMuc3RhcnRGaWVsZF89YSl9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuc2V0U3RhcnRCdWJibGU9ZnVuY3Rpb24oYSl7dGhpcy5zdGFydEJ1YmJsZV98fCh0aGlzLnN0YXJ0QnViYmxlXz1hKX07QmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5zZXRTdGFydEJsb2NrPWZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRCbG9ja198fHRoaXMuc3RhcnRCdWJibGVffHwodGhpcy5zdGFydEJsb2NrXz1hLGEuaXNJbkZseW91dCYmYSE9YS5nZXRSb290QmxvY2soKT90aGlzLnNldFRhcmdldEJsb2NrXyhhLmdldFJvb3RCbG9jaygpKTp0aGlzLnNldFRhcmdldEJsb2NrXyhhKSl9O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5zZXRUYXJnZXRCbG9ja189ZnVuY3Rpb24oYSl7YS5pc1NoYWRvdygpP3RoaXMuc2V0VGFyZ2V0QmxvY2tfKGEuZ2V0UGFyZW50KCkpOnRoaXMudGFyZ2V0QmxvY2tfPWF9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuc2V0U3RhcnRXb3Jrc3BhY2VfPWZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRXb3Jrc3BhY2VffHwodGhpcy5zdGFydFdvcmtzcGFjZV89YSl9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuc2V0U3RhcnRGbHlvdXRfPWZ1bmN0aW9uKGEpe3RoaXMuZmx5b3V0X3x8KHRoaXMuZmx5b3V0Xz1hKX07QmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5pc0J1YmJsZUNsaWNrXz1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5zdGFydEJ1YmJsZV8mJiF0aGlzLmhhc0V4Y2VlZGVkRHJhZ1JhZGl1c199O1xuQmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5pc0Jsb2NrQ2xpY2tfPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnN0YXJ0QmxvY2tfJiYhdGhpcy5oYXNFeGNlZWRlZERyYWdSYWRpdXNfJiYhdGhpcy5pc0ZpZWxkQ2xpY2tfKCl9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuaXNGaWVsZENsaWNrXz1mdW5jdGlvbigpe3JldHVybih0aGlzLnN0YXJ0RmllbGRfP3RoaXMuc3RhcnRGaWVsZF8uaXNDbGlja2FibGUoKTohMSkmJiF0aGlzLmhhc0V4Y2VlZGVkRHJhZ1JhZGl1c18mJighdGhpcy5mbHlvdXRffHwhdGhpcy5mbHlvdXRfLmF1dG9DbG9zZSl9O0Jsb2NrbHkuR2VzdHVyZS5wcm90b3R5cGUuaXNXb3Jrc3BhY2VDbGlja189ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zdGFydEJsb2NrXyYmIXRoaXMuc3RhcnRCdWJibGVfJiYhdGhpcy5zdGFydEZpZWxkXyYmIXRoaXMuaGFzRXhjZWVkZWREcmFnUmFkaXVzX307XG5CbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmlzRHJhZ2dpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0RyYWdnaW5nV29ya3NwYWNlX3x8dGhpcy5pc0RyYWdnaW5nQmxvY2tffHx0aGlzLmlzRHJhZ2dpbmdCdWJibGVffTtCbG9ja2x5Lkdlc3R1cmUucHJvdG90eXBlLmhhc1N0YXJ0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNTdGFydGVkX307QmxvY2tseS5HZXN0dXJlLnByb3RvdHlwZS5nZXRJbnNlcnRpb25NYXJrZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmxvY2tEcmFnZ2VyXz90aGlzLmJsb2NrRHJhZ2dlcl8uZ2V0SW5zZXJ0aW9uTWFya2VycygpOltdfTtCbG9ja2x5Lkdlc3R1cmUuaW5Qcm9ncmVzcz1mdW5jdGlvbigpe2Zvcih2YXIgYT1CbG9ja2x5LldvcmtzcGFjZS5nZXRBbGwoKSxiPTAsYztjPWFbYl07YisrKWlmKGMuY3VycmVudEdlc3R1cmVfKXJldHVybiEwO3JldHVybiExfTtCbG9ja2x5LkZpZWxkPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnZhbHVlXz10aGlzLkRFRkFVTFRfVkFMVUU7dGhpcy50b29sdGlwXz10aGlzLnZhbGlkYXRvcl89bnVsbDt0aGlzLnNpemVfPW5ldyBCbG9ja2x5LnV0aWxzLlNpemUoMCwwKTt0aGlzLmNvbnN0YW50c189dGhpcy5tb3VzZURvd25XcmFwcGVyXz10aGlzLnRleHRDb250ZW50Xz10aGlzLnRleHRFbGVtZW50Xz10aGlzLmJvcmRlclJlY3RfPXRoaXMuZmllbGRHcm91cF89dGhpcy5tYXJrZXJTdmdfPXRoaXMuY3Vyc29yU3ZnXz1udWxsO2MmJnRoaXMuY29uZmlndXJlXyhjKTt0aGlzLnNldFZhbHVlKGEpO2ImJnRoaXMuc2V0VmFsaWRhdG9yKGIpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5ERUZBVUxUX1ZBTFVFPW51bGw7QmxvY2tseS5GaWVsZC5wcm90b3R5cGUubmFtZT12b2lkIDA7QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZGlzcG9zZWQ9ITE7XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5tYXhEaXNwbGF5TGVuZ3RoPTUwO0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLnNvdXJjZUJsb2NrXz1udWxsO0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmlzRGlydHlfPSEwO0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLnZpc2libGVfPSEwO0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmNsaWNrVGFyZ2V0Xz1udWxsO0Jsb2NrbHkuRmllbGQuTkJTUD1cIlxcdTAwYTBcIjtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5FRElUQUJMRT0hMDtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5TRVJJQUxJWkFCTEU9ITE7QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuY29uZmlndXJlXz1mdW5jdGlvbihhKXt2YXIgYj1hLnRvb2x0aXA7XCJzdHJpbmdcIj09dHlwZW9mIGImJihiPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEudG9vbHRpcCkpO2ImJnRoaXMuc2V0VG9vbHRpcChiKX07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5zZXRTb3VyY2VCbG9jaz1mdW5jdGlvbihhKXtpZih0aGlzLnNvdXJjZUJsb2NrXyl0aHJvdyBFcnJvcihcIkZpZWxkIGFscmVhZHkgYm91bmQgdG8gYSBibG9jay5cIik7dGhpcy5zb3VyY2VCbG9ja189YX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZ2V0Q29uc3RhbnRzPWZ1bmN0aW9uKCl7IXRoaXMuY29uc3RhbnRzXyYmdGhpcy5zb3VyY2VCbG9ja18mJnRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSYmdGhpcy5zb3VyY2VCbG9ja18ud29ya3NwYWNlLnJlbmRlcmVkJiYodGhpcy5jb25zdGFudHNfPXRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpKTtyZXR1cm4gdGhpcy5jb25zdGFudHNffTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5nZXRTb3VyY2VCbG9jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZUJsb2NrX307XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5maWVsZEdyb3VwX3x8KHRoaXMuZmllbGRHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHt9LG51bGwpLHRoaXMuaXNWaXNpYmxlKCl8fCh0aGlzLmZpZWxkR3JvdXBfLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuc291cmNlQmxvY2tfLmdldFN2Z1Jvb3QoKS5hcHBlbmRDaGlsZCh0aGlzLmZpZWxkR3JvdXBfKSx0aGlzLmluaXRWaWV3KCksdGhpcy51cGRhdGVFZGl0YWJsZSgpLHRoaXMuc2V0VG9vbHRpcCh0aGlzLnRvb2x0aXBfKSx0aGlzLmJpbmRFdmVudHNfKCksdGhpcy5pbml0TW9kZWwoKSl9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmluaXRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVCb3JkZXJSZWN0XygpO3RoaXMuY3JlYXRlVGV4dEVsZW1lbnRfKCl9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmluaXRNb2RlbD1mdW5jdGlvbigpe307XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5jcmVhdGVCb3JkZXJSZWN0Xz1mdW5jdGlvbigpe3RoaXMuYm9yZGVyUmVjdF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtyeDp0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1JBRElVUyxyeTp0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1JBRElVUyx4OjAseTowLGhlaWdodDp0aGlzLnNpemVfLmhlaWdodCx3aWR0aDp0aGlzLnNpemVfLndpZHRoLFwiY2xhc3NcIjpcImJsb2NrbHlGaWVsZFJlY3RcIn0sdGhpcy5maWVsZEdyb3VwXyl9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuY3JlYXRlVGV4dEVsZW1lbnRfPWZ1bmN0aW9uKCl7dGhpcy50ZXh0RWxlbWVudF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5URVhULHtcImNsYXNzXCI6XCJibG9ja2x5VGV4dFwifSx0aGlzLmZpZWxkR3JvdXBfKTt0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX1RFWFRfQkFTRUxJTkVfQ0VOVEVSJiZ0aGlzLnRleHRFbGVtZW50Xy5zZXRBdHRyaWJ1dGUoXCJkb21pbmFudC1iYXNlbGluZVwiLFwiY2VudHJhbFwiKTt0aGlzLnRleHRDb250ZW50Xz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTt0aGlzLnRleHRFbGVtZW50Xy5hcHBlbmRDaGlsZCh0aGlzLnRleHRDb250ZW50Xyl9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuYmluZEV2ZW50c189ZnVuY3Rpb24oKXtCbG9ja2x5LlRvb2x0aXAuYmluZE1vdXNlRXZlbnRzKHRoaXMuZ2V0Q2xpY2tUYXJnZXRfKCkpO3RoaXMubW91c2VEb3duV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLmdldENsaWNrVGFyZ2V0XygpLFwibW91c2Vkb3duXCIsdGhpcyx0aGlzLm9uTW91c2VEb3duXyl9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmZyb21YbWw9ZnVuY3Rpb24oYSl7dGhpcy5zZXRWYWx1ZShhLnRleHRDb250ZW50KX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUudG9YbWw9ZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmdldFZhbHVlKCk7cmV0dXJuIGF9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZUlmT3duZXIodGhpcyk7QmxvY2tseS5XaWRnZXREaXYuaGlkZUlmT3duZXIodGhpcyk7QmxvY2tseS5Ub29sdGlwLnVuYmluZE1vdXNlRXZlbnRzKHRoaXMuZ2V0Q2xpY2tUYXJnZXRfKCkpO3RoaXMubW91c2VEb3duV3JhcHBlcl8mJkJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMubW91c2VEb3duV3JhcHBlcl8pO0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5maWVsZEdyb3VwXyk7dGhpcy5kaXNwb3NlZD0hMH07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS51cGRhdGVFZGl0YWJsZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZmllbGRHcm91cF87dGhpcy5FRElUQUJMRSYmYSYmKHRoaXMuc291cmNlQmxvY2tfLmlzRWRpdGFibGUoKT8oQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYSxcImJsb2NrbHlFZGl0YWJsZVRleHRcIiksQmxvY2tseS51dGlscy5kb20ucmVtb3ZlQ2xhc3MoYSxcImJsb2NrbHlOb25FZGl0YWJsZVRleHRcIiksYS5zdHlsZS5jdXJzb3I9dGhpcy5DVVJTT1IpOihCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLFwiYmxvY2tseU5vbkVkaXRhYmxlVGV4dFwiKSxCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLFwiYmxvY2tseUVkaXRhYmxlVGV4dFwiKSxhLnN0eWxlLmN1cnNvcj1cIlwiKSl9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuaXNDbGlja2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc291cmNlQmxvY2tfJiZ0aGlzLnNvdXJjZUJsb2NrXy5pc0VkaXRhYmxlKCkmJiEhdGhpcy5zaG93RWRpdG9yXyYmXCJmdW5jdGlvblwiPT09dHlwZW9mIHRoaXMuc2hvd0VkaXRvcl99O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmlzQ3VycmVudGx5RWRpdGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5FRElUQUJMRSYmISF0aGlzLnNvdXJjZUJsb2NrXyYmdGhpcy5zb3VyY2VCbG9ja18uaXNFZGl0YWJsZSgpfTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLmlzU2VyaWFsaXphYmxlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7dGhpcy5uYW1lJiYodGhpcy5TRVJJQUxJWkFCTEU/YT0hMDp0aGlzLkVESVRBQkxFJiYoY29uc29sZS53YXJuKFwiRGV0ZWN0ZWQgYW4gZWRpdGFibGUgZmllbGQgdGhhdCB3YXMgbm90IHNlcmlhbGl6YWJsZS4gUGxlYXNlIGRlZmluZSBTRVJJQUxJWkFCTEUgcHJvcGVydHkgYXMgdHJ1ZSBvbiBhbGwgZWRpdGFibGUgY3VzdG9tIGZpZWxkcy4gUHJvY2VlZGluZyB3aXRoIHNlcmlhbGl6YXRpb24uXCIpLGE9ITApKTtyZXR1cm4gYX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuaXNWaXNpYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJsZV99O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuc2V0VmlzaWJsZT1mdW5jdGlvbihhKXtpZih0aGlzLnZpc2libGVfIT1hKXt0aGlzLnZpc2libGVfPWE7dmFyIGI9dGhpcy5nZXRTdmdSb290KCk7YiYmKGIuc3R5bGUuZGlzcGxheT1hP1wiYmxvY2tcIjpcIm5vbmVcIil9fTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5zZXRWYWxpZGF0b3I9ZnVuY3Rpb24oYSl7dGhpcy52YWxpZGF0b3JfPWF9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmdldFZhbGlkYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkYXRvcl99O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmNsYXNzVmFsaWRhdG9yPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkZpZWxkLnByb3RvdHlwZS5jbGFzc1ZhbGlkYXRvclwiLFwiTWF5IDIwMTlcIixcIkRlY2VtYmVyIDIwMjBcIixcIkJsb2NrbHkuRmllbGQucHJvdG90eXBlLmRvQ2xhc3NWYWxpZGF0aW9uX1wiKTtyZXR1cm4gYX07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5jYWxsVmFsaWRhdG9yPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkZpZWxkLnByb3RvdHlwZS5jYWxsVmFsaWRhdG9yXCIsXCJNYXkgMjAxOVwiLFwiRGVjZW1iZXIgMjAyMFwiKTt2YXIgYj10aGlzLmNsYXNzVmFsaWRhdG9yKGEpO2lmKG51bGw9PT1iKXJldHVybiBudWxsO3ZvaWQgMCE9PWImJihhPWIpO2lmKGI9dGhpcy5nZXRWYWxpZGF0b3IoKSl7Yj1iLmNhbGwodGhpcyxhKTtpZihudWxsPT09YilyZXR1cm4gbnVsbDt2b2lkIDAhPT1iJiYoYT1iKX1yZXR1cm4gYX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZ2V0U3ZnUm9vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpZWxkR3JvdXBffTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5hcHBseUNvbG91cj1mdW5jdGlvbigpe307XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5yZW5kZXJfPWZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudF8mJih0aGlzLnRleHRDb250ZW50Xy5ub2RlVmFsdWU9dGhpcy5nZXREaXNwbGF5VGV4dF8oKSk7dGhpcy51cGRhdGVTaXplXygpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5zaG93RWRpdG9yPWZ1bmN0aW9uKGEpe3RoaXMuaXNDbGlja2FibGUoKSYmdGhpcy5zaG93RWRpdG9yXyhhKX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUudXBkYXRlV2lkdGg9ZnVuY3Rpb24oKXtCbG9ja2x5LnV0aWxzLmRlcHJlY2F0aW9uLndhcm4oXCJGaWVsZC5wcm90b3R5cGUudXBkYXRlV2lkdGhcIixcIk1heSAyMDE5XCIsXCJEZWNlbWJlciAyMDIwXCIsXCJCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS51cGRhdGVTaXplXyBvciBCbG9ja2x5LnV0aWxzLmRvbS5nZXRUZXh0V2lkdGhcIik7dGhpcy51cGRhdGVTaXplXygpfTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLnVwZGF0ZVNpemVfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q29uc3RhbnRzKCk7YT12b2lkIDAhPWE/YTp0aGlzLmJvcmRlclJlY3RfP3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQk9SREVSX1JFQ1RfWF9QQURESU5HOjA7dmFyIGM9MiphLGQ9Yi5GSUVMRF9URVhUX0hFSUdIVCxlPTA7dGhpcy50ZXh0RWxlbWVudF8mJihlPUJsb2NrbHkudXRpbHMuZG9tLmdldEZhc3RUZXh0V2lkdGgodGhpcy50ZXh0RWxlbWVudF8sYi5GSUVMRF9URVhUX0ZPTlRTSVpFLGIuRklFTERfVEVYVF9GT05UV0VJR0hULGIuRklFTERfVEVYVF9GT05URkFNSUxZKSxjKz1lKTt0aGlzLmJvcmRlclJlY3RfJiYoZD1NYXRoLm1heChkLGIuRklFTERfQk9SREVSX1JFQ1RfSEVJR0hUKSk7dGhpcy5zaXplXy5oZWlnaHQ9ZDt0aGlzLnNpemVfLndpZHRoPWM7dGhpcy5wb3NpdGlvblRleHRFbGVtZW50XyhhLGUpO3RoaXMucG9zaXRpb25Cb3JkZXJSZWN0XygpfTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLnBvc2l0aW9uVGV4dEVsZW1lbnRfPWZ1bmN0aW9uKGEsYil7aWYodGhpcy50ZXh0RWxlbWVudF8pe3ZhciBjPXRoaXMuZ2V0Q29uc3RhbnRzKCksZD10aGlzLnNpemVfLmhlaWdodC8yO3RoaXMudGV4dEVsZW1lbnRfLnNldEF0dHJpYnV0ZShcInhcIix0aGlzLnNvdXJjZUJsb2NrXy5SVEw/dGhpcy5zaXplXy53aWR0aC1iLWE6YSk7dGhpcy50ZXh0RWxlbWVudF8uc2V0QXR0cmlidXRlKFwieVwiLGMuRklFTERfVEVYVF9CQVNFTElORV9DRU5URVI/ZDpkLWMuRklFTERfVEVYVF9IRUlHSFQvMitjLkZJRUxEX1RFWFRfQkFTRUxJTkUpfX07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5wb3NpdGlvbkJvcmRlclJlY3RfPWZ1bmN0aW9uKCl7dGhpcy5ib3JkZXJSZWN0XyYmKHRoaXMuYm9yZGVyUmVjdF8uc2V0QXR0cmlidXRlKFwid2lkdGhcIix0aGlzLnNpemVfLndpZHRoKSx0aGlzLmJvcmRlclJlY3RfLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLHRoaXMuc2l6ZV8uaGVpZ2h0KSx0aGlzLmJvcmRlclJlY3RfLnNldEF0dHJpYnV0ZShcInJ4XCIsdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9SQURJVVMpLHRoaXMuYm9yZGVyUmVjdF8uc2V0QXR0cmlidXRlKFwicnlcIix0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1JBRElVUykpfTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1Zpc2libGUoKSlyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuU2l6ZSgwLDApO3RoaXMuaXNEaXJ0eV8/KHRoaXMucmVuZGVyXygpLHRoaXMuaXNEaXJ0eV89ITEpOnRoaXMudmlzaWJsZV8mJjA9PXRoaXMuc2l6ZV8ud2lkdGgmJihjb25zb2xlLndhcm4oXCJEZXByZWNhdGVkIHVzZSBvZiBzZXR0aW5nIHNpemVfLndpZHRoIHRvIDAgdG8gcmVyZW5kZXIgYSBmaWVsZC4gU2V0IGZpZWxkLmlzRGlydHlfIHRvIHRydWUgaW5zdGVhZC5cIiksdGhpcy5yZW5kZXJfKCkpO3JldHVybiB0aGlzLnNpemVffTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLmdldFNjYWxlZEJCb3g9ZnVuY3Rpb24oKXtpZih0aGlzLmJvcmRlclJlY3RfKWE9dGhpcy5ib3JkZXJSZWN0Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPUJsb2NrbHkudXRpbHMuc3R5bGUuZ2V0UGFnZU9mZnNldCh0aGlzLmJvcmRlclJlY3RfKSxkPWEud2lkdGgsYT1hLmhlaWdodDtlbHNle3ZhciBhPXRoaXMuc291cmNlQmxvY2tfLmdldEhlaWdodFdpZHRoKCksYj10aGlzLnNvdXJjZUJsb2NrXy53b3Jrc3BhY2Uuc2NhbGUsYz10aGlzLmdldEFic29sdXRlWFlfKCksZD1hLndpZHRoKmI7YT1hLmhlaWdodCpiO0Jsb2NrbHkudXRpbHMudXNlckFnZW50LkdFQ0tPPyhjLngrPTEuNSpiLGMueSs9MS41KmIpOkJsb2NrbHkudXRpbHMudXNlckFnZW50LkVER0V8fEJsb2NrbHkudXRpbHMudXNlckFnZW50LklFfHwoYy54LT0uNSpiLGMueS09LjUqYik7ZCs9MSpiO2ErPTEqYn1yZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuUmVjdChjLnksYy55K1xuYSxjLngsYy54K2QpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5nZXREaXNwbGF5VGV4dF89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFRleHQoKTtpZighYSlyZXR1cm4gQmxvY2tseS5GaWVsZC5OQlNQO2EubGVuZ3RoPnRoaXMubWF4RGlzcGxheUxlbmd0aCYmKGE9YS5zdWJzdHJpbmcoMCx0aGlzLm1heERpc3BsYXlMZW5ndGgtMikrXCJcXHUyMDI2XCIpO2E9YS5yZXBsYWNlKC9cXHMvZyxCbG9ja2x5LkZpZWxkLk5CU1ApO3RoaXMuc291cmNlQmxvY2tfJiZ0aGlzLnNvdXJjZUJsb2NrXy5SVEwmJihhKz1cIlxcdTIwMGZcIik7cmV0dXJuIGF9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmdldFRleHRfKXt2YXIgYT10aGlzLmdldFRleHRfLmNhbGwodGhpcyk7aWYobnVsbCE9PWEpcmV0dXJuIFN0cmluZyhhKX1yZXR1cm4gU3RyaW5nKHRoaXMuZ2V0VmFsdWUoKSl9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuc2V0VGV4dD1mdW5jdGlvbihhKXtCbG9ja2x5LnV0aWxzLmRlcHJlY2F0aW9uLndhcm4oXCJGaWVsZC5wcm90b3R5cGUuc2V0VGV4dFwiLFwiTWF5IDIwMTlcIixcIkRlY2VtYmVyIDIwMjBcIixcIkJsb2NrbHkuRmllbGQucHJvdG90eXBlLnNldFZhbHVlXCIpO3Rocm93IEVycm9yKFwic2V0VGV4dCBtZXRob2QgaXMgZGVwcmVjYXRlZFwiKTt9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbigpe3RoaXMuaXNEaXJ0eV89ITA7dGhpcy5jb25zdGFudHNfPW51bGx9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmZvcmNlUmVyZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLmlzRGlydHlfPSEwO3RoaXMuc291cmNlQmxvY2tfJiZ0aGlzLnNvdXJjZUJsb2NrXy5yZW5kZXJlZCYmKHRoaXMuc291cmNlQmxvY2tfLnJlbmRlcigpLHRoaXMuc291cmNlQmxvY2tfLmJ1bXBOZWlnaGJvdXJzKCksdGhpcy51cGRhdGVNYXJrZXJzXygpKX07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihhKXtpZihudWxsIT09YSl7dmFyIGI9dGhpcy5kb0NsYXNzVmFsaWRhdGlvbl8oYSk7YT10aGlzLnByb2Nlc3NWYWxpZGF0aW9uXyhhLGIpO2lmKCEoYSBpbnN0YW5jZW9mIEVycm9yKSl7aWYoYj10aGlzLmdldFZhbGlkYXRvcigpKWlmKGI9Yi5jYWxsKHRoaXMsYSksYT10aGlzLnByb2Nlc3NWYWxpZGF0aW9uXyhhLGIpLGEgaW5zdGFuY2VvZiBFcnJvcilyZXR1cm47Yj10aGlzLnNvdXJjZUJsb2NrXztpZighYnx8IWIuZGlzcG9zZWQpe3ZhciBjPXRoaXMuZ2V0VmFsdWUoKTtjIT09YSYmKGImJkJsb2NrbHkuRXZlbnRzLmlzRW5hYmxlZCgpJiZCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZShiLFwiZmllbGRcIix0aGlzLm5hbWV8fG51bGwsYyxhKSksdGhpcy5kb1ZhbHVlVXBkYXRlXyhhKSx0aGlzLmlzRGlydHlfJiZ0aGlzLmZvcmNlUmVyZW5kZXIoKSl9fX19O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUucHJvY2Vzc1ZhbGlkYXRpb25fPWZ1bmN0aW9uKGEsYil7aWYobnVsbD09PWIpcmV0dXJuIHRoaXMuZG9WYWx1ZUludmFsaWRfKGEpLHRoaXMuaXNEaXJ0eV8mJnRoaXMuZm9yY2VSZXJlbmRlcigpLEVycm9yKCk7dm9pZCAwIT09YiYmKGE9Yik7cmV0dXJuIGF9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5kb0NsYXNzVmFsaWRhdGlvbl89ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hfHx2b2lkIDA9PT1hP251bGw6YT10aGlzLmNsYXNzVmFsaWRhdG9yKGEpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5kb1ZhbHVlVXBkYXRlXz1mdW5jdGlvbihhKXt0aGlzLnZhbHVlXz1hO3RoaXMuaXNEaXJ0eV89ITB9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLmRvVmFsdWVJbnZhbGlkXz1mdW5jdGlvbihhKXt9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUub25Nb3VzZURvd25fPWZ1bmN0aW9uKGEpe3RoaXMuc291cmNlQmxvY2tfJiZ0aGlzLnNvdXJjZUJsb2NrXy53b3Jrc3BhY2UmJihhPXRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5nZXRHZXN0dXJlKGEpKSYmYS5zZXRTdGFydEZpZWxkKHRoaXMpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5zZXRUb29sdGlwPWZ1bmN0aW9uKGEpe2F8fFwiXCI9PT1hfHwoYT10aGlzLnNvdXJjZUJsb2NrXyk7dmFyIGI9dGhpcy5nZXRDbGlja1RhcmdldF8oKTtiP2IudG9vbHRpcD1hOnRoaXMudG9vbHRpcF89YX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZ2V0VG9vbHRpcD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q2xpY2tUYXJnZXRfKCk7cmV0dXJuIGE/QmxvY2tseS5Ub29sdGlwLmdldFRvb2x0aXBPZk9iamVjdChhKTpCbG9ja2x5LlRvb2x0aXAuZ2V0VG9vbHRpcE9mT2JqZWN0KHt0b29sdGlwOnRoaXMudG9vbHRpcF99KX07XG5CbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5nZXRDbGlja1RhcmdldF89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGlja1RhcmdldF98fHRoaXMuZ2V0U3ZnUm9vdCgpfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVhZXz1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LnV0aWxzLnN0eWxlLmdldFBhZ2VPZmZzZXQodGhpcy5nZXRDbGlja1RhcmdldF8oKSl9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLnJlZmVyZW5jZXNWYXJpYWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm4hMX07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZ2V0UGFyZW50SW5wdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPXRoaXMuc291cmNlQmxvY2tfLGM9Yi5pbnB1dExpc3QsZD0wO2Q8Yi5pbnB1dExpc3QubGVuZ3RoO2QrKylmb3IodmFyIGU9Y1tkXSxmPWUuZmllbGRSb3csZz0wO2c8Zi5sZW5ndGg7ZysrKWlmKGZbZ109PT10aGlzKXthPWU7YnJlYWt9cmV0dXJuIGF9O1xuQmxvY2tseS5GaWVsZC5wcm90b3R5cGUuZ2V0RmxpcFJ0bD1mdW5jdGlvbigpe3JldHVybiExfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5pc1RhYk5hdmlnYWJsZT1mdW5jdGlvbigpe3JldHVybiExfTtCbG9ja2x5LkZpZWxkLnByb3RvdHlwZS5vbkJsb2NrbHlBY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuITF9O0Jsb2NrbHkuRmllbGQucHJvdG90eXBlLnNldEN1cnNvclN2Zz1mdW5jdGlvbihhKXthPyh0aGlzLmZpZWxkR3JvdXBfLmFwcGVuZENoaWxkKGEpLHRoaXMuY3Vyc29yU3ZnXz1hKTp0aGlzLmN1cnNvclN2Z189bnVsbH07QmxvY2tseS5GaWVsZC5wcm90b3R5cGUuc2V0TWFya2VyU3ZnPWZ1bmN0aW9uKGEpe2E/KHRoaXMuZmllbGRHcm91cF8uYXBwZW5kQ2hpbGQoYSksdGhpcy5tYXJrZXJTdmdfPWEpOnRoaXMubWFya2VyU3ZnXz1udWxsfTtcbkJsb2NrbHkuRmllbGQucHJvdG90eXBlLnVwZGF0ZU1hcmtlcnNfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zb3VyY2VCbG9ja18ud29ya3NwYWNlO2Eua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSYmdGhpcy5jdXJzb3JTdmdfJiZhLmdldEN1cnNvcigpLmRyYXcoKTthLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJnRoaXMubWFya2VyU3ZnXyYmYS5nZXRNYXJrZXIoQmxvY2tseS5uYXZpZ2F0aW9uLk1BUktFUl9OQU1FKS5kcmF3KCl9O0Jsb2NrbHkuRmllbGRMYWJlbD1mdW5jdGlvbihhLGIsYyl7dGhpcy5jbGFzc189bnVsbDtCbG9ja2x5LkZpZWxkTGFiZWwuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsbnVsbCxjKTtjfHwodGhpcy5jbGFzc189Ynx8bnVsbCl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRmllbGRMYWJlbCxCbG9ja2x5LkZpZWxkKTtCbG9ja2x5LkZpZWxkTGFiZWwucHJvdG90eXBlLkRFRkFVTFRfVkFMVUU9XCJcIjtCbG9ja2x5LkZpZWxkTGFiZWwuZnJvbUpzb249ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS51dGlscy5yZXBsYWNlTWVzc2FnZVJlZmVyZW5jZXMoYS50ZXh0KTtyZXR1cm4gbmV3IEJsb2NrbHkuRmllbGRMYWJlbChiLHZvaWQgMCxhKX07QmxvY2tseS5GaWVsZExhYmVsLnByb3RvdHlwZS5FRElUQUJMRT0hMTtcbkJsb2NrbHkuRmllbGRMYWJlbC5wcm90b3R5cGUuY29uZmlndXJlXz1mdW5jdGlvbihhKXtCbG9ja2x5LkZpZWxkTGFiZWwuc3VwZXJDbGFzc18uY29uZmlndXJlXy5jYWxsKHRoaXMsYSk7dGhpcy5jbGFzc189YVtcImNsYXNzXCJdfTtCbG9ja2x5LkZpZWxkTGFiZWwucHJvdG90eXBlLmluaXRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVUZXh0RWxlbWVudF8oKTt0aGlzLmNsYXNzXyYmQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy50ZXh0RWxlbWVudF8sdGhpcy5jbGFzc18pfTtCbG9ja2x5LkZpZWxkTGFiZWwucHJvdG90eXBlLmRvQ2xhc3NWYWxpZGF0aW9uXz1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWF8fHZvaWQgMD09PWE/bnVsbDpTdHJpbmcoYSl9O1xuQmxvY2tseS5GaWVsZExhYmVsLnByb3RvdHlwZS5zZXRDbGFzcz1mdW5jdGlvbihhKXt0aGlzLnRleHRFbGVtZW50XyYmKHRoaXMuY2xhc3NfJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyh0aGlzLnRleHRFbGVtZW50Xyx0aGlzLmNsYXNzXyksYSYmQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy50ZXh0RWxlbWVudF8sYSkpO3RoaXMuY2xhc3NfPWF9O0Jsb2NrbHkuZmllbGRSZWdpc3RyeS5yZWdpc3RlcihcImZpZWxkX2xhYmVsXCIsQmxvY2tseS5GaWVsZExhYmVsKTtCbG9ja2x5LklucHV0PWZ1bmN0aW9uKGEsYixjLGQpe2lmKGEhPUJsb2NrbHkuRFVNTVlfSU5QVVQmJiFiKXRocm93IEVycm9yKFwiVmFsdWUgaW5wdXRzIGFuZCBzdGF0ZW1lbnQgaW5wdXRzIG11c3QgaGF2ZSBub24tZW1wdHkgbmFtZS5cIik7dGhpcy50eXBlPWE7dGhpcy5uYW1lPWI7dGhpcy5zb3VyY2VCbG9ja189Yzt0aGlzLmNvbm5lY3Rpb249ZDt0aGlzLmZpZWxkUm93PVtdfTtCbG9ja2x5LklucHV0LnByb3RvdHlwZS5hbGlnbj1CbG9ja2x5LkFMSUdOX0xFRlQ7QmxvY2tseS5JbnB1dC5wcm90b3R5cGUudmlzaWJsZV89ITA7QmxvY2tseS5JbnB1dC5wcm90b3R5cGUuZ2V0U291cmNlQmxvY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3VyY2VCbG9ja199O0Jsb2NrbHkuSW5wdXQucHJvdG90eXBlLmFwcGVuZEZpZWxkPWZ1bmN0aW9uKGEsYil7dGhpcy5pbnNlcnRGaWVsZEF0KHRoaXMuZmllbGRSb3cubGVuZ3RoLGEsYik7cmV0dXJuIHRoaXN9O1xuQmxvY2tseS5JbnB1dC5wcm90b3R5cGUuaW5zZXJ0RmllbGRBdD1mdW5jdGlvbihhLGIsYyl7aWYoMD5hfHxhPnRoaXMuZmllbGRSb3cubGVuZ3RoKXRocm93IEVycm9yKFwiaW5kZXggXCIrYStcIiBvdXQgb2YgYm91bmRzLlwiKTtpZighKGJ8fFwiXCI9PWImJmMpKXJldHVybiBhO1wic3RyaW5nXCI9PXR5cGVvZiBiJiYoYj1uZXcgQmxvY2tseS5GaWVsZExhYmVsKGIpKTtiLnNldFNvdXJjZUJsb2NrKHRoaXMuc291cmNlQmxvY2tfKTt0aGlzLnNvdXJjZUJsb2NrXy5yZW5kZXJlZCYmKGIuaW5pdCgpLGIuYXBwbHlDb2xvdXIoKSk7Yi5uYW1lPWM7Yi5zZXRWaXNpYmxlKHRoaXMuaXNWaXNpYmxlKCkpO2M9YjtjLnByZWZpeEZpZWxkJiYoYT10aGlzLmluc2VydEZpZWxkQXQoYSxjLnByZWZpeEZpZWxkKSk7dGhpcy5maWVsZFJvdy5zcGxpY2UoYSwwLGIpOysrYTtjLnN1ZmZpeEZpZWxkJiYoYT10aGlzLmluc2VydEZpZWxkQXQoYSxjLnN1ZmZpeEZpZWxkKSk7dGhpcy5zb3VyY2VCbG9ja18ucmVuZGVyZWQmJlxuKHRoaXMuc291cmNlQmxvY2tfPXRoaXMuc291cmNlQmxvY2tfLHRoaXMuc291cmNlQmxvY2tfLnJlbmRlcigpLHRoaXMuc291cmNlQmxvY2tfLmJ1bXBOZWlnaGJvdXJzKCkpO3JldHVybiBhfTtCbG9ja2x5LklucHV0LnByb3RvdHlwZS5yZW1vdmVGaWVsZD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ7ZD10aGlzLmZpZWxkUm93W2NdO2MrKylpZihkLm5hbWU9PT1hKXJldHVybiBkLmRpc3Bvc2UoKSx0aGlzLmZpZWxkUm93LnNwbGljZShjLDEpLHRoaXMuc291cmNlQmxvY2tfLnJlbmRlcmVkJiYodGhpcy5zb3VyY2VCbG9ja189dGhpcy5zb3VyY2VCbG9ja18sdGhpcy5zb3VyY2VCbG9ja18ucmVuZGVyKCksdGhpcy5zb3VyY2VCbG9ja18uYnVtcE5laWdoYm91cnMoKSksITA7aWYoYilyZXR1cm4hMTt0aHJvdyBFcnJvcignRmllbGQgXCInK2ErJ1wiIG5vdCBmb3VuZC4nKTt9O0Jsb2NrbHkuSW5wdXQucHJvdG90eXBlLmlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGVffTtcbkJsb2NrbHkuSW5wdXQucHJvdG90eXBlLnNldFZpc2libGU9ZnVuY3Rpb24oYSl7dmFyIGI9W107aWYodGhpcy52aXNpYmxlXz09YSlyZXR1cm4gYjt0aGlzLnZpc2libGVfPWE7Zm9yKHZhciBjPTAsZDtkPXRoaXMuZmllbGRSb3dbY107YysrKWQuc2V0VmlzaWJsZShhKTt0aGlzLmNvbm5lY3Rpb24mJih0aGlzLmNvbm5lY3Rpb249dGhpcy5jb25uZWN0aW9uLGE/Yj10aGlzLmNvbm5lY3Rpb24uc3RhcnRUcmFja2luZ0FsbCgpOnRoaXMuY29ubmVjdGlvbi5zdG9wVHJhY2tpbmdBbGwoKSxjPXRoaXMuY29ubmVjdGlvbi50YXJnZXRCbG9jaygpKSYmKGMuZ2V0U3ZnUm9vdCgpLnN0eWxlLmRpc3BsYXk9YT9cImJsb2NrXCI6XCJub25lXCIpO3JldHVybiBifTtCbG9ja2x5LklucHV0LnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiO2I9dGhpcy5maWVsZFJvd1thXTthKyspYi5tYXJrRGlydHkoKX07XG5CbG9ja2x5LklucHV0LnByb3RvdHlwZS5zZXRDaGVjaz1mdW5jdGlvbihhKXtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IEVycm9yKFwiVGhpcyBpbnB1dCBkb2VzIG5vdCBoYXZlIGEgY29ubmVjdGlvbi5cIik7dGhpcy5jb25uZWN0aW9uLnNldENoZWNrKGEpO3JldHVybiB0aGlzfTtCbG9ja2x5LklucHV0LnByb3RvdHlwZS5zZXRBbGlnbj1mdW5jdGlvbihhKXt0aGlzLmFsaWduPWE7dGhpcy5zb3VyY2VCbG9ja18ucmVuZGVyZWQmJih0aGlzLnNvdXJjZUJsb2NrXz10aGlzLnNvdXJjZUJsb2NrXyx0aGlzLnNvdXJjZUJsb2NrXy5yZW5kZXIoKSk7cmV0dXJuIHRoaXN9O0Jsb2NrbHkuSW5wdXQucHJvdG90eXBlLnNldFNoYWRvd0RvbT1mdW5jdGlvbihhKXtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IEVycm9yKFwiVGhpcyBpbnB1dCBkb2VzIG5vdCBoYXZlIGEgY29ubmVjdGlvbi5cIik7dGhpcy5jb25uZWN0aW9uLnNldFNoYWRvd0RvbShhKTtyZXR1cm4gdGhpc307XG5CbG9ja2x5LklucHV0LnByb3RvdHlwZS5nZXRTaGFkb3dEb209ZnVuY3Rpb24oKXtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IEVycm9yKFwiVGhpcyBpbnB1dCBkb2VzIG5vdCBoYXZlIGEgY29ubmVjdGlvbi5cIik7cmV0dXJuIHRoaXMuY29ubmVjdGlvbi5nZXRTaGFkb3dEb20oKX07QmxvY2tseS5JbnB1dC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5yZW5kZXJlZClmb3IodmFyIGE9MDthPHRoaXMuZmllbGRSb3cubGVuZ3RoO2ErKyl0aGlzLmZpZWxkUm93W2FdLmluaXQoKX07QmxvY2tseS5JbnB1dC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7Yj10aGlzLmZpZWxkUm93W2FdO2ErKyliLmRpc3Bvc2UoKTt0aGlzLmNvbm5lY3Rpb24mJnRoaXMuY29ubmVjdGlvbi5kaXNwb3NlKCk7dGhpcy5zb3VyY2VCbG9ja189bnVsbH07QmxvY2tseS5CbG9jaz1mdW5jdGlvbihhLGIsYyl7aWYoQmxvY2tseS5HZW5lcmF0b3ImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGVbYl0pdGhyb3cgRXJyb3IoJ0Jsb2NrIHByb3RvdHlwZU5hbWUgXCInK2IrJ1wiIGNvbmZsaWN0cyB3aXRoIEJsb2NrbHkuR2VuZXJhdG9yIG1lbWJlcnMuJyk7dGhpcy5pZD1jJiYhYS5nZXRCbG9ja0J5SWQoYyk/YzpCbG9ja2x5LnV0aWxzLmdlblVpZCgpO2Euc2V0QmxvY2tCeUlkKHRoaXMuaWQsdGhpcyk7dGhpcy5wcmV2aW91c0Nvbm5lY3Rpb249dGhpcy5uZXh0Q29ubmVjdGlvbj10aGlzLm91dHB1dENvbm5lY3Rpb249bnVsbDt0aGlzLmlucHV0TGlzdD1bXTt0aGlzLmlucHV0c0lubGluZT12b2lkIDA7dGhpcy5kaXNhYmxlZD0hMTt0aGlzLnRvb2x0aXA9XCJcIjt0aGlzLmNvbnRleHRNZW51PSEwO3RoaXMucGFyZW50QmxvY2tfPW51bGw7dGhpcy5jaGlsZEJsb2Nrc189W107dGhpcy5lZGl0YWJsZV89dGhpcy5tb3ZhYmxlXz1cbnRoaXMuZGVsZXRhYmxlXz0hMDt0aGlzLmNvbGxhcHNlZF89dGhpcy5pc1NoYWRvd189ITE7dGhpcy5jb21tZW50PXRoaXMub3V0cHV0U2hhcGVfPW51bGw7dGhpcy5jb21tZW50TW9kZWw9e3RleHQ6bnVsbCxwaW5uZWQ6ITEsc2l6ZTpuZXcgQmxvY2tseS51dGlscy5TaXplKDE2MCw4MCl9O3RoaXMueHlfPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoMCwwKTt0aGlzLndvcmtzcGFjZT1hO3RoaXMuaXNJbkZseW91dD1hLmlzRmx5b3V0O3RoaXMuaXNJbk11dGF0b3I9YS5pc011dGF0b3I7dGhpcy5SVEw9YS5SVEw7dGhpcy5pc0luc2VydGlvbk1hcmtlcl89ITE7dGhpcy5oYXQ9dm9pZCAwO3RoaXMucmVuZGVyZWQ9bnVsbDt0aGlzLnN0YXRlbWVudElucHV0Q291bnQ9MDtpZihiKXt0aGlzLnR5cGU9YjtjPUJsb2NrbHkuQmxvY2tzW2JdO2lmKCFjfHxcIm9iamVjdFwiIT10eXBlb2YgYyl0aHJvdyBUeXBlRXJyb3IoXCJVbmtub3duIGJsb2NrIHR5cGU6IFwiK2IpO0Jsb2NrbHkudXRpbHMub2JqZWN0Lm1peGluKHRoaXMsXG5jKX1hLmFkZFRvcEJsb2NrKHRoaXMpO2EuYWRkVHlwZWRCbG9jayh0aGlzKTsoYT1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpKXx8QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApO2I9QmxvY2tseS5FdmVudHMucmVjb3JkVW5kbzt0cnl7XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5pbml0JiYoQmxvY2tseS5FdmVudHMucmVjb3JkVW5kbz0hMSx0aGlzLmluaXQoKSxCbG9ja2x5LkV2ZW50cy5yZWNvcmRVbmRvPWIpLEJsb2NrbHkuRXZlbnRzLmlzRW5hYmxlZCgpJiZCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NyZWF0ZSh0aGlzKSl9ZmluYWxseXthfHxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSksQmxvY2tseS5FdmVudHMucmVjb3JkVW5kbz1ifXRoaXMuaW5wdXRzSW5saW5lRGVmYXVsdD10aGlzLmlucHV0c0lubGluZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9uY2hhbmdlJiZ0aGlzLnNldE9uQ2hhbmdlKHRoaXMub25jaGFuZ2UpfTtcbkJsb2NrbHkuQmxvY2suQ09MTEFQU0VEX0lOUFVUX05BTUU9XCJfVEVNUF9DT0xMQVBTRURfSU5QVVRcIjtCbG9ja2x5LkJsb2NrLkNPTExBUFNFRF9GSUVMRF9OQU1FPVwiX1RFTVBfQ09MTEFQU0VEX0ZJRUxEXCI7QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZGF0YT1udWxsO0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmRpc3Bvc2VkPSExO0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmh1ZV89bnVsbDtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5jb2xvdXJfPVwiIzAwMDAwMFwiO0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnN0eWxlTmFtZV89bnVsbDtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oYSl7aWYodGhpcy53b3Jrc3BhY2Upe3RoaXMub25jaGFuZ2VXcmFwcGVyXyYmdGhpcy53b3Jrc3BhY2UucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbmNoYW5nZVdyYXBwZXJfKTt0aGlzLnVucGx1ZyhhKTtCbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSYmQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuQmxvY2tEZWxldGUodGhpcykpO0Jsb2NrbHkuRXZlbnRzLmRpc2FibGUoKTt0cnl7dGhpcy53b3Jrc3BhY2UmJih0aGlzLndvcmtzcGFjZS5yZW1vdmVUb3BCbG9jayh0aGlzKSx0aGlzLndvcmtzcGFjZS5yZW1vdmVUeXBlZEJsb2NrKHRoaXMpLHRoaXMud29ya3NwYWNlLnJlbW92ZUJsb2NrQnlJZCh0aGlzLmlkKSx0aGlzLndvcmtzcGFjZT1udWxsKTtCbG9ja2x5LnNlbGVjdGVkPT10aGlzJiYoQmxvY2tseS5zZWxlY3RlZD1udWxsKTtmb3IodmFyIGI9dGhpcy5jaGlsZEJsb2Nrc18ubGVuZ3RoLVxuMTswPD1iO2ItLSl0aGlzLmNoaWxkQmxvY2tzX1tiXS5kaXNwb3NlKCExKTtiPTA7Zm9yKHZhciBjO2M9dGhpcy5pbnB1dExpc3RbYl07YisrKWMuZGlzcG9zZSgpO3RoaXMuaW5wdXRMaXN0Lmxlbmd0aD0wO3ZhciBkPXRoaXMuZ2V0Q29ubmVjdGlvbnNfKCEwKTtiPTA7Zm9yKHZhciBlO2U9ZFtiXTtiKyspZS5kaXNwb3NlKCl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKSx0aGlzLmRpc3Bvc2VkPSEwfX19O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmluaXRNb2RlbD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7Yj10aGlzLmlucHV0TGlzdFthXTthKyspZm9yKHZhciBjPTAsZDtkPWIuZmllbGRSb3dbY107YysrKWQuaW5pdE1vZGVsJiZkLmluaXRNb2RlbCgpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS51bnBsdWc9ZnVuY3Rpb24oYSl7dGhpcy5vdXRwdXRDb25uZWN0aW9uP3RoaXMudW5wbHVnRnJvbVJvd18oYSk6dGhpcy5wcmV2aW91c0Nvbm5lY3Rpb24mJnRoaXMudW5wbHVnRnJvbVN0YWNrXyhhKX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS51bnBsdWdGcm9tUm93Xz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO3RoaXMub3V0cHV0Q29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpJiYoYj10aGlzLm91dHB1dENvbm5lY3Rpb24udGFyZ2V0Q29ubmVjdGlvbix0aGlzLm91dHB1dENvbm5lY3Rpb24uZGlzY29ubmVjdCgpKTtpZihiJiZhJiYoYT10aGlzLmdldE9ubHlWYWx1ZUNvbm5lY3Rpb25fKCkpJiZhLmlzQ29ubmVjdGVkKCkmJiFhLnRhcmdldEJsb2NrKCkuaXNTaGFkb3coKSlpZihhPWEudGFyZ2V0Q29ubmVjdGlvbixhLmRpc2Nvbm5lY3QoKSx0aGlzLndvcmtzcGFjZS5jb25uZWN0aW9uQ2hlY2tlci5jYW5Db25uZWN0KGEsYiwhMSkpYi5jb25uZWN0KGEpO2Vsc2UgYS5vbkZhaWxlZENvbm5lY3QoYil9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0T25seVZhbHVlQ29ubmVjdGlvbl89ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTA7Yjx0aGlzLmlucHV0TGlzdC5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmlucHV0TGlzdFtiXS5jb25uZWN0aW9uO2lmKGMmJmMudHlwZT09QmxvY2tseS5JTlBVVF9WQUxVRSYmYy50YXJnZXRDb25uZWN0aW9uKXtpZihhKXJldHVybiBudWxsO2E9Y319cmV0dXJuIGF9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUudW5wbHVnRnJvbVN0YWNrXz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO3RoaXMucHJldmlvdXNDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkmJihiPXRoaXMucHJldmlvdXNDb25uZWN0aW9uLnRhcmdldENvbm5lY3Rpb24sdGhpcy5wcmV2aW91c0Nvbm5lY3Rpb24uZGlzY29ubmVjdCgpKTt2YXIgYz10aGlzLmdldE5leHRCbG9jaygpO2EmJmMmJiFjLmlzU2hhZG93KCkmJihhPXRoaXMubmV4dENvbm5lY3Rpb24udGFyZ2V0Q29ubmVjdGlvbixhLmRpc2Nvbm5lY3QoKSxiJiZ0aGlzLndvcmtzcGFjZS5jb25uZWN0aW9uQ2hlY2tlci5jYW5Db25uZWN0KGIsYSwhMSkmJmIuY29ubmVjdChhKSl9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvbnNfPWZ1bmN0aW9uKGEpe2E9W107dGhpcy5vdXRwdXRDb25uZWN0aW9uJiZhLnB1c2godGhpcy5vdXRwdXRDb25uZWN0aW9uKTt0aGlzLnByZXZpb3VzQ29ubmVjdGlvbiYmYS5wdXNoKHRoaXMucHJldmlvdXNDb25uZWN0aW9uKTt0aGlzLm5leHRDb25uZWN0aW9uJiZhLnB1c2godGhpcy5uZXh0Q29ubmVjdGlvbik7Zm9yKHZhciBiPTAsYztjPXRoaXMuaW5wdXRMaXN0W2JdO2IrKyljLmNvbm5lY3Rpb24mJmEucHVzaChjLmNvbm5lY3Rpb24pO3JldHVybiBhfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5sYXN0Q29ubmVjdGlvbkluU3RhY2s9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5uZXh0Q29ubmVjdGlvbjthOyl7dmFyIGI9YS50YXJnZXRCbG9jaygpO2lmKCFiKXJldHVybiBhO2E9Yi5uZXh0Q29ubmVjdGlvbn1yZXR1cm4gbnVsbH07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuYnVtcE5laWdoYm91cnM9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJOb3QgZXhwZWN0ZWQgdG8gcmVhY2ggQmxvY2suYnVtcE5laWdoYm91cnMgZnVuY3Rpb24uIEJsb2NrU3ZnLmJ1bXBOZWlnaGJvdXJzIHdhcyBleHBlY3RlZCB0byBiZSBjYWxsZWQgaW5zdGVhZC5cIil9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50QmxvY2tffTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRJbnB1dFdpdGhCbG9jaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjO2M9dGhpcy5pbnB1dExpc3RbYl07YisrKWlmKGMuY29ubmVjdGlvbiYmYy5jb25uZWN0aW9uLnRhcmdldEJsb2NrKCk9PWEpcmV0dXJuIGM7cmV0dXJuIG51bGx9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldFN1cnJvdW5kUGFyZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkb3t2YXIgYj1hO2E9YS5nZXRQYXJlbnQoKTtpZighYSlyZXR1cm4gbnVsbH13aGlsZShhLmdldE5leHRCbG9jaygpPT1iKTtyZXR1cm4gYX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0TmV4dEJsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dENvbm5lY3Rpb24mJnRoaXMubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRQcmV2aW91c0Jsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldmlvdXNDb25uZWN0aW9uJiZ0aGlzLnByZXZpb3VzQ29ubmVjdGlvbi50YXJnZXRCbG9jaygpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRGaXJzdFN0YXRlbWVudENvbm5lY3Rpb249ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiO2I9dGhpcy5pbnB1dExpc3RbYV07YSsrKWlmKGIuY29ubmVjdGlvbiYmYi5jb25uZWN0aW9uLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQpcmV0dXJuIGIuY29ubmVjdGlvbjtyZXR1cm4gbnVsbH07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0Um9vdEJsb2NrPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkb3t2YXIgYj1hO2E9Yi5wYXJlbnRCbG9ja199d2hpbGUoYSk7cmV0dXJuIGJ9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0VG9wU3RhY2tCbG9jaz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7ZG8gdmFyIGI9YS5nZXRQcmV2aW91c0Jsb2NrKCk7d2hpbGUoYiYmYi5nZXROZXh0QmxvY2soKT09YSYmKGE9YikpO3JldHVybiBhfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRDaGlsZHJlbj1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpcy5jaGlsZEJsb2Nrc187YT1bXTtmb3IodmFyIGI9MCxjO2M9dGhpcy5pbnB1dExpc3RbYl07YisrKWMuY29ubmVjdGlvbiYmKGM9Yy5jb25uZWN0aW9uLnRhcmdldEJsb2NrKCkpJiZhLnB1c2goYyk7KGI9dGhpcy5nZXROZXh0QmxvY2soKSkmJmEucHVzaChiKTtyZXR1cm4gYX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRQYXJlbnQ9ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5wYXJlbnRCbG9ja18pe2lmKHRoaXMucGFyZW50QmxvY2tfKXtCbG9ja2x5LnV0aWxzLmFycmF5UmVtb3ZlKHRoaXMucGFyZW50QmxvY2tfLmNoaWxkQmxvY2tzXyx0aGlzKTtpZih0aGlzLnByZXZpb3VzQ29ubmVjdGlvbiYmdGhpcy5wcmV2aW91c0Nvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSl0aHJvdyBFcnJvcihcIlN0aWxsIGNvbm5lY3RlZCB0byBwcmV2aW91cyBibG9jay5cIik7aWYodGhpcy5vdXRwdXRDb25uZWN0aW9uJiZ0aGlzLm91dHB1dENvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSl0aHJvdyBFcnJvcihcIlN0aWxsIGNvbm5lY3RlZCB0byBwYXJlbnQgYmxvY2suXCIpO3RoaXMucGFyZW50QmxvY2tfPW51bGx9ZWxzZSB0aGlzLndvcmtzcGFjZS5yZW1vdmVUb3BCbG9jayh0aGlzKTsodGhpcy5wYXJlbnRCbG9ja189YSk/YS5jaGlsZEJsb2Nrc18ucHVzaCh0aGlzKTp0aGlzLndvcmtzcGFjZS5hZGRUb3BCbG9jayh0aGlzKX19O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0RGVzY2VuZGFudHM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVt0aGlzXSxjPXRoaXMuZ2V0Q2hpbGRyZW4oYSksZCxlPTA7ZD1jW2VdO2UrKyliLnB1c2guYXBwbHkoYixkLmdldERlc2NlbmRhbnRzKGEpKTtyZXR1cm4gYn07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuaXNEZWxldGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWxldGFibGVfJiYhdGhpcy5pc1NoYWRvd18mJiEodGhpcy53b3Jrc3BhY2UmJnRoaXMud29ya3NwYWNlLm9wdGlvbnMucmVhZE9ubHkpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXREZWxldGFibGU9ZnVuY3Rpb24oYSl7dGhpcy5kZWxldGFibGVfPWF9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmlzTW92YWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdmFibGVfJiYhdGhpcy5pc1NoYWRvd18mJiEodGhpcy53b3Jrc3BhY2UmJnRoaXMud29ya3NwYWNlLm9wdGlvbnMucmVhZE9ubHkpfTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldE1vdmFibGU9ZnVuY3Rpb24oYSl7dGhpcy5tb3ZhYmxlXz1hfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5pc0R1cGxpY2F0YWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLndvcmtzcGFjZS5oYXNCbG9ja0xpbWl0cygpP3RoaXMud29ya3NwYWNlLmlzQ2FwYWNpdHlBdmFpbGFibGUoQmxvY2tseS51dGlscy5nZXRCbG9ja1R5cGVDb3VudHModGhpcywhMCkpOiEwfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5pc1NoYWRvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU2hhZG93X307QmxvY2tseS5CbG9jay5wcm90b3R5cGUuc2V0U2hhZG93PWZ1bmN0aW9uKGEpe3RoaXMuaXNTaGFkb3dfPWF9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmlzSW5zZXJ0aW9uTWFya2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNJbnNlcnRpb25NYXJrZXJffTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldEluc2VydGlvbk1hcmtlcj1mdW5jdGlvbihhKXt0aGlzLmlzSW5zZXJ0aW9uTWFya2VyXz1hfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5pc0VkaXRhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRpdGFibGVfJiYhKHRoaXMud29ya3NwYWNlJiZ0aGlzLndvcmtzcGFjZS5vcHRpb25zLnJlYWRPbmx5KX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuc2V0RWRpdGFibGU9ZnVuY3Rpb24oYSl7dGhpcy5lZGl0YWJsZV89YTthPTA7Zm9yKHZhciBiO2I9dGhpcy5pbnB1dExpc3RbYV07YSsrKWZvcih2YXIgYz0wLGQ7ZD1iLmZpZWxkUm93W2NdO2MrKylkLnVwZGF0ZUVkaXRhYmxlKCl9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmlzRGlzcG9zZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwb3NlZH07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRNYXRjaGluZ0Nvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbm5lY3Rpb25zXyghMCk7YT1hLmdldENvbm5lY3Rpb25zXyghMCk7aWYoYy5sZW5ndGghPWEubGVuZ3RoKXRocm93IEVycm9yKFwiQ29ubmVjdGlvbiBsaXN0cyBkaWQgbm90IG1hdGNoIGluIGxlbmd0aC5cIik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspaWYoYVtkXT09YilyZXR1cm4gY1tkXTtyZXR1cm4gbnVsbH07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuc2V0SGVscFVybD1mdW5jdGlvbihhKXt0aGlzLmhlbHBVcmw9YX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuc2V0VG9vbHRpcD1mdW5jdGlvbihhKXt0aGlzLnRvb2x0aXA9YX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0VG9vbHRpcD1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LlRvb2x0aXAuZ2V0VG9vbHRpcE9mT2JqZWN0KHRoaXMpfTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldENvbG91cj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG91cl99O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldFN0eWxlTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0eWxlTmFtZV99O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldEh1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmh1ZV99O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldENvbG91cj1mdW5jdGlvbihhKXthPUJsb2NrbHkudXRpbHMucGFyc2VCbG9ja0NvbG91cihhKTt0aGlzLmh1ZV89YS5odWU7dGhpcy5jb2xvdXJfPWEuaGV4fTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRTdHlsZT1mdW5jdGlvbihhKXt0aGlzLnN0eWxlTmFtZV89YX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRPbkNoYW5nZT1mdW5jdGlvbihhKXtpZihhJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IEVycm9yKFwib25jaGFuZ2UgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTt0aGlzLm9uY2hhbmdlV3JhcHBlcl8mJnRoaXMud29ya3NwYWNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25jaGFuZ2VXcmFwcGVyXyk7aWYodGhpcy5vbmNoYW5nZT1hKXRoaXMub25jaGFuZ2VXcmFwcGVyXz1hLmJpbmQodGhpcyksdGhpcy53b3Jrc3BhY2UuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbmNoYW5nZVdyYXBwZXJfKX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0RmllbGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYztjPXRoaXMuaW5wdXRMaXN0W2JdO2IrKylmb3IodmFyIGQ9MCxlO2U9Yy5maWVsZFJvd1tkXTtkKyspaWYoZS5uYW1lPT1hKXJldHVybiBlO3JldHVybiBudWxsfTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldFZhcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM7Yz10aGlzLmlucHV0TGlzdFtiXTtiKyspZm9yKHZhciBkPTAsZTtlPWMuZmllbGRSb3dbZF07ZCsrKWUucmVmZXJlbmNlc1ZhcmlhYmxlcygpJiZhLnB1c2goZS5nZXRWYWx1ZSgpKTtyZXR1cm4gYX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0VmFyTW9kZWxzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjO2M9dGhpcy5pbnB1dExpc3RbYl07YisrKWZvcih2YXIgZD0wLGU7ZT1jLmZpZWxkUm93W2RdO2QrKyllLnJlZmVyZW5jZXNWYXJpYWJsZXMoKSYmKGU9dGhpcy53b3Jrc3BhY2UuZ2V0VmFyaWFibGVCeUlkKGUuZ2V0VmFsdWUoKSkpJiZhLnB1c2goZSk7cmV0dXJuIGF9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUudXBkYXRlVmFyTmFtZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjO2M9dGhpcy5pbnB1dExpc3RbYl07YisrKWZvcih2YXIgZD0wLGU7ZT1jLmZpZWxkUm93W2RdO2QrKyllLnJlZmVyZW5jZXNWYXJpYWJsZXMoKSYmYS5nZXRJZCgpPT1lLmdldFZhbHVlKCkmJmUucmVmcmVzaFZhcmlhYmxlTmFtZSgpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5yZW5hbWVWYXJCeUlkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZDtkPXRoaXMuaW5wdXRMaXN0W2NdO2MrKylmb3IodmFyIGU9MCxmO2Y9ZC5maWVsZFJvd1tlXTtlKyspZi5yZWZlcmVuY2VzVmFyaWFibGVzKCkmJmE9PWYuZ2V0VmFsdWUoKSYmZi5zZXRWYWx1ZShiKX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0RmllbGRWYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4oYT10aGlzLmdldEZpZWxkKGEpKT9hLmdldFZhbHVlKCk6bnVsbH07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRGaWVsZFZhbHVlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRGaWVsZChiKTtpZighYyl0aHJvdyBFcnJvcignRmllbGQgXCInK2IrJ1wiIG5vdCBmb3VuZC4nKTtjLnNldFZhbHVlKGEpfTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldFByZXZpb3VzU3RhdGVtZW50PWZ1bmN0aW9uKGEsYil7aWYoYSl7dm9pZCAwPT09YiYmKGI9bnVsbCk7aWYoIXRoaXMucHJldmlvdXNDb25uZWN0aW9uKXtpZih0aGlzLm91dHB1dENvbm5lY3Rpb24pdGhyb3cgRXJyb3IoXCJSZW1vdmUgb3V0cHV0IGNvbm5lY3Rpb24gcHJpb3IgdG8gYWRkaW5nIHByZXZpb3VzIGNvbm5lY3Rpb24uXCIpO3RoaXMucHJldmlvdXNDb25uZWN0aW9uPXRoaXMubWFrZUNvbm5lY3Rpb25fKEJsb2NrbHkuUFJFVklPVVNfU1RBVEVNRU5UKX10aGlzLnByZXZpb3VzQ29ubmVjdGlvbi5zZXRDaGVjayhiKX1lbHNlIGlmKHRoaXMucHJldmlvdXNDb25uZWN0aW9uKXtpZih0aGlzLnByZXZpb3VzQ29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKXRocm93IEVycm9yKFwiTXVzdCBkaXNjb25uZWN0IHByZXZpb3VzIHN0YXRlbWVudCBiZWZvcmUgcmVtb3ZpbmcgY29ubmVjdGlvbi5cIik7dGhpcy5wcmV2aW91c0Nvbm5lY3Rpb24uZGlzcG9zZSgpO1xudGhpcy5wcmV2aW91c0Nvbm5lY3Rpb249bnVsbH19O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldE5leHRTdGF0ZW1lbnQ9ZnVuY3Rpb24oYSxiKXtpZihhKXZvaWQgMD09PWImJihiPW51bGwpLHRoaXMubmV4dENvbm5lY3Rpb258fCh0aGlzLm5leHRDb25uZWN0aW9uPXRoaXMubWFrZUNvbm5lY3Rpb25fKEJsb2NrbHkuTkVYVF9TVEFURU1FTlQpKSx0aGlzLm5leHRDb25uZWN0aW9uLnNldENoZWNrKGIpO2Vsc2UgaWYodGhpcy5uZXh0Q29ubmVjdGlvbil7aWYodGhpcy5uZXh0Q29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKXRocm93IEVycm9yKFwiTXVzdCBkaXNjb25uZWN0IG5leHQgc3RhdGVtZW50IGJlZm9yZSByZW1vdmluZyBjb25uZWN0aW9uLlwiKTt0aGlzLm5leHRDb25uZWN0aW9uLmRpc3Bvc2UoKTt0aGlzLm5leHRDb25uZWN0aW9uPW51bGx9fTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldE91dHB1dD1mdW5jdGlvbihhLGIpe2lmKGEpe3ZvaWQgMD09PWImJihiPW51bGwpO2lmKCF0aGlzLm91dHB1dENvbm5lY3Rpb24pe2lmKHRoaXMucHJldmlvdXNDb25uZWN0aW9uKXRocm93IEVycm9yKFwiUmVtb3ZlIHByZXZpb3VzIGNvbm5lY3Rpb24gcHJpb3IgdG8gYWRkaW5nIG91dHB1dCBjb25uZWN0aW9uLlwiKTt0aGlzLm91dHB1dENvbm5lY3Rpb249dGhpcy5tYWtlQ29ubmVjdGlvbl8oQmxvY2tseS5PVVRQVVRfVkFMVUUpfXRoaXMub3V0cHV0Q29ubmVjdGlvbi5zZXRDaGVjayhiKX1lbHNlIGlmKHRoaXMub3V0cHV0Q29ubmVjdGlvbil7aWYodGhpcy5vdXRwdXRDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpdGhyb3cgRXJyb3IoXCJNdXN0IGRpc2Nvbm5lY3Qgb3V0cHV0IHZhbHVlIGJlZm9yZSByZW1vdmluZyBjb25uZWN0aW9uLlwiKTt0aGlzLm91dHB1dENvbm5lY3Rpb24uZGlzcG9zZSgpO3RoaXMub3V0cHV0Q29ubmVjdGlvbj1cbm51bGx9fTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRJbnB1dHNJbmxpbmU9ZnVuY3Rpb24oYSl7dGhpcy5pbnB1dHNJbmxpbmUhPWEmJihCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZSh0aGlzLFwiaW5saW5lXCIsbnVsbCx0aGlzLmlucHV0c0lubGluZSxhKSksdGhpcy5pbnB1dHNJbmxpbmU9YSl9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0SW5wdXRzSW5saW5lPWZ1bmN0aW9uKCl7aWYodm9pZCAwIT10aGlzLmlucHV0c0lubGluZSlyZXR1cm4gdGhpcy5pbnB1dHNJbmxpbmU7Zm9yKHZhciBhPTE7YTx0aGlzLmlucHV0TGlzdC5sZW5ndGg7YSsrKWlmKHRoaXMuaW5wdXRMaXN0W2EtMV0udHlwZT09QmxvY2tseS5EVU1NWV9JTlBVVCYmdGhpcy5pbnB1dExpc3RbYV0udHlwZT09QmxvY2tseS5EVU1NWV9JTlBVVClyZXR1cm4hMTtmb3IoYT0xO2E8dGhpcy5pbnB1dExpc3QubGVuZ3RoO2ErKylpZih0aGlzLmlucHV0TGlzdFthLTFdLnR5cGU9PUJsb2NrbHkuSU5QVVRfVkFMVUUmJnRoaXMuaW5wdXRMaXN0W2FdLnR5cGU9PUJsb2NrbHkuRFVNTVlfSU5QVVQpcmV0dXJuITA7cmV0dXJuITF9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldE91dHB1dFNoYXBlPWZ1bmN0aW9uKGEpe3RoaXMub3V0cHV0U2hhcGVfPWF9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0T3V0cHV0U2hhcGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXRTaGFwZV99O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldERpc2FibGVkPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkJsb2NrLnByb3RvdHlwZS5zZXREaXNhYmxlZFwiLFwiTWF5IDIwMTlcIixcIk1heSAyMDIwXCIsXCJCbG9jay5wcm90b3R5cGUuc2V0RW5hYmxlZFwiKTt0aGlzLnNldEVuYWJsZWQoIWEpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5kaXNhYmxlZH07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuc2V0RW5hYmxlZD1mdW5jdGlvbihhKXt0aGlzLmlzRW5hYmxlZCgpIT1hJiYoQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuQmxvY2tDaGFuZ2UodGhpcyxcImRpc2FibGVkXCIsbnVsbCx0aGlzLmRpc2FibGVkLCFhKSksdGhpcy5kaXNhYmxlZD0hYSl9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0SW5oZXJpdGVkRGlzYWJsZWQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5nZXRTdXJyb3VuZFBhcmVudCgpO2E7KXtpZihhLmRpc2FibGVkKXJldHVybiEwO2E9YS5nZXRTdXJyb3VuZFBhcmVudCgpfXJldHVybiExfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5pc0NvbGxhcHNlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbGxhcHNlZF99O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldENvbGxhcHNlZD1mdW5jdGlvbihhKXt0aGlzLmNvbGxhcHNlZF8hPWEmJihCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZSh0aGlzLFwiY29sbGFwc2VkXCIsbnVsbCx0aGlzLmNvbGxhcHNlZF8sYSkpLHRoaXMuY29sbGFwc2VkXz1hKX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMobCl7dmFyIG09bC5nZXRDaGVjaygpOyFtJiZsLnRhcmdldENvbm5lY3Rpb24mJihtPWwudGFyZ2V0Q29ubmVjdGlvbi5nZXRDaGVjaygpKTtyZXR1cm4hIW0mJigtMSE9bS5pbmRleE9mKFwiQm9vbGVhblwiKXx8LTEhPW0uaW5kZXhPZihcIk51bWJlclwiKSl9ZnVuY3Rpb24gZCgpe2cmJmcuZ2V0VHlwZSgpPT1oLmdldFR5cGUoKSYmZy5nZXRMb2NhdGlvbigpPT1oLmdldExvY2F0aW9uKCkmJihnPW51bGwpfXZhciBlPVtdO2I9Ynx8XCI/XCI7dmFyIGY9QmxvY2tseS5BU1ROb2RlLk5BVklHQVRFX0FMTF9GSUVMRFM7QmxvY2tseS5BU1ROb2RlLk5BVklHQVRFX0FMTF9GSUVMRFM9ITA7Zm9yKHZhciBnPUJsb2NrbHkuQVNUTm9kZS5jcmVhdGVCbG9ja05vZGUodGhpcyksaD1nO2c7KXtzd2l0Y2goZy5nZXRUeXBlKCkpe2Nhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLklOUFVUOnZhciBrPWcuZ2V0TG9jYXRpb24oKTtcbmcuaW4oKT9jKGspJiZlLnB1c2goXCIoXCIpOmUucHVzaChiKTticmVhaztjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5GSUVMRDprPWcuZ2V0TG9jYXRpb24oKSxrLm5hbWUhPUJsb2NrbHkuQmxvY2suQ09MTEFQU0VEX0ZJRUxEX05BTUUmJmUucHVzaChrLmdldFRleHQoKSl9az1nO2c9ay5pbigpfHxrLm5leHQoKTtpZighZyl7Zz1rLm91dCgpO2ZvcihkKCk7ZyYmIWcubmV4dCgpOylnPWcub3V0KCksZCgpLGcmJmcuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuSU5QVVQmJmMoZy5nZXRMb2NhdGlvbigpKSYmZS5wdXNoKFwiKVwiKTtnJiYoZz1nLm5leHQoKSl9fUJsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTPWY7Yj0yO2ZvcihmPWUubGVuZ3RoO2I8ZjtiKyspXCIoXCI9PWVbYi0yXSYmXCIpXCI9PWVbYl0mJihlW2ItMl09ZVtiLTFdLGUuc3BsaWNlKGItMSwyKSxmLT0yKTtlPWUuam9pbihcIiBcIikucmVwbGFjZSgvKFxcKCkgfCAoXFwpKS9nbWksXCIkMSQyXCIpLnRyaW0oKXx8XG5cIj8/P1wiO2EmJmUubGVuZ3RoPmEmJihlPWUuc3Vic3RyaW5nKDAsYS0zKStcIi4uLlwiKTtyZXR1cm4gZX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuYXBwZW5kVmFsdWVJbnB1dD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcHBlbmRJbnB1dF8oQmxvY2tseS5JTlBVVF9WQUxVRSxhKX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuYXBwZW5kU3RhdGVtZW50SW5wdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXBwZW5kSW5wdXRfKEJsb2NrbHkuTkVYVF9TVEFURU1FTlQsYSl9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmFwcGVuZER1bW15SW5wdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXBwZW5kSW5wdXRfKEJsb2NrbHkuRFVNTVlfSU5QVVQsYXx8XCJcIil9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuanNvbkluaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlPydCbG9jayBcIicrYS50eXBlKydcIjogJzpcIlwiO2lmKGEub3V0cHV0JiZhLnByZXZpb3VzU3RhdGVtZW50KXRocm93IEVycm9yKGIrXCJNdXN0IG5vdCBoYXZlIGJvdGggYW4gb3V0cHV0IGFuZCBhIHByZXZpb3VzU3RhdGVtZW50LlwiKTthLnN0eWxlJiZhLnN0eWxlLmhhdCYmKHRoaXMuaGF0PWEuc3R5bGUuaGF0LGEuc3R5bGU9bnVsbCk7aWYoYS5zdHlsZSYmYS5jb2xvdXIpdGhyb3cgRXJyb3IoYitcIk11c3Qgbm90IGhhdmUgYm90aCBhIGNvbG91ciBhbmQgYSBzdHlsZS5cIik7YS5zdHlsZT90aGlzLmpzb25Jbml0U3R5bGVfKGEsYik6dGhpcy5qc29uSW5pdENvbG91cl8oYSxiKTtmb3IodmFyIGM9MDt2b2lkIDAhPT1hW1wibWVzc2FnZVwiK2NdOyl0aGlzLmludGVycG9sYXRlXyhhW1wibWVzc2FnZVwiK2NdLGFbXCJhcmdzXCIrY118fFtdLGFbXCJsYXN0RHVtbXlBbGlnblwiK2NdLGIpLGMrKzt2b2lkIDAhPT1cbmEuaW5wdXRzSW5saW5lJiZ0aGlzLnNldElucHV0c0lubGluZShhLmlucHV0c0lubGluZSk7dm9pZCAwIT09YS5vdXRwdXQmJnRoaXMuc2V0T3V0cHV0KCEwLGEub3V0cHV0KTt2b2lkIDAhPT1hLm91dHB1dFNoYXBlJiZ0aGlzLnNldE91dHB1dFNoYXBlKGEub3V0cHV0U2hhcGUpO3ZvaWQgMCE9PWEucHJldmlvdXNTdGF0ZW1lbnQmJnRoaXMuc2V0UHJldmlvdXNTdGF0ZW1lbnQoITAsYS5wcmV2aW91c1N0YXRlbWVudCk7dm9pZCAwIT09YS5uZXh0U3RhdGVtZW50JiZ0aGlzLnNldE5leHRTdGF0ZW1lbnQoITAsYS5uZXh0U3RhdGVtZW50KTt2b2lkIDAhPT1hLnRvb2x0aXAmJihjPWEudG9vbHRpcCxjPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGMpLHRoaXMuc2V0VG9vbHRpcChjKSk7dm9pZCAwIT09YS5lbmFibGVDb250ZXh0TWVudSYmKGM9YS5lbmFibGVDb250ZXh0TWVudSx0aGlzLmNvbnRleHRNZW51PSEhYyk7dm9pZCAwIT09YS5oZWxwVXJsJiYoYz1cbmEuaGVscFVybCxjPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGMpLHRoaXMuc2V0SGVscFVybChjKSk7XCJzdHJpbmdcIj09dHlwZW9mIGEuZXh0ZW5zaW9ucyYmKGNvbnNvbGUud2FybihiK1wiSlNPTiBhdHRyaWJ1dGUgJ2V4dGVuc2lvbnMnIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzLiBGb3VuZCByYXcgc3RyaW5nIGluIEpTT04gZm9yICdcIithLnR5cGUrXCInIGJsb2NrLlwiKSxhLmV4dGVuc2lvbnM9W2EuZXh0ZW5zaW9uc10pO3ZvaWQgMCE9PWEubXV0YXRvciYmQmxvY2tseS5FeHRlbnNpb25zLmFwcGx5KGEubXV0YXRvcix0aGlzLCEwKTtpZihBcnJheS5pc0FycmF5KGEuZXh0ZW5zaW9ucykpZm9yKGE9YS5leHRlbnNpb25zLGI9MDtiPGEubGVuZ3RoOysrYilCbG9ja2x5LkV4dGVuc2lvbnMuYXBwbHkoYVtiXSx0aGlzLCExKX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5qc29uSW5pdENvbG91cl89ZnVuY3Rpb24oYSxiKXtpZihcImNvbG91clwiaW4gYSlpZih2b2lkIDA9PT1hLmNvbG91ciljb25zb2xlLndhcm4oYitcIlVuZGVmaW5lZCBjb2xvdXIgdmFsdWUuXCIpO2Vsc2V7YT1hLmNvbG91cjt0cnl7dGhpcy5zZXRDb2xvdXIoYSl9Y2F0Y2goYyl7Y29uc29sZS53YXJuKGIrXCJJbGxlZ2FsIGNvbG91ciB2YWx1ZTogXCIsYSl9fX07QmxvY2tseS5CbG9jay5wcm90b3R5cGUuanNvbkluaXRTdHlsZV89ZnVuY3Rpb24oYSxiKXthPWEuc3R5bGU7dHJ5e3RoaXMuc2V0U3R5bGUoYSl9Y2F0Y2goYyl7Y29uc29sZS53YXJuKGIrXCJTdHlsZSBkb2VzIG5vdCBleGlzdDogXCIsYSl9fTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLm1peGluPWZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YiYmXCJib29sZWFuXCIhPXR5cGVvZiBiKXRocm93IEVycm9yKFwib3B0X2Rpc2FibGVDaGVjayBtdXN0IGJlIGEgYm9vbGVhbiBpZiBwcm92aWRlZFwiKTtpZighYil7Yj1bXTtmb3IodmFyIGMgaW4gYSl2b2lkIDAhPT10aGlzW2NdJiZiLnB1c2goYyk7aWYoYi5sZW5ndGgpdGhyb3cgRXJyb3IoXCJNaXhpbiB3aWxsIG92ZXJ3cml0ZSBibG9jayBtZW1iZXJzOiBcIitKU09OLnN0cmluZ2lmeShiKSk7fUJsb2NrbHkudXRpbHMub2JqZWN0Lm1peGluKHRoaXMsYSl9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUuaW50ZXJwb2xhdGVfPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPUJsb2NrbHkudXRpbHMudG9rZW5pemVJbnRlcnBvbGF0aW9uKGEpLGY9W10sZz0wO2E9W107Zm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspe3ZhciBrPWVbaF07aWYoXCJudW1iZXJcIj09dHlwZW9mIGspe2lmKDA+PWt8fGs+Yi5sZW5ndGgpdGhyb3cgRXJyb3IoJ0Jsb2NrIFwiJyt0aGlzLnR5cGUrJ1wiOiBNZXNzYWdlIGluZGV4ICUnK2srXCIgb3V0IG9mIHJhbmdlLlwiKTtpZihmW2tdKXRocm93IEVycm9yKCdCbG9jayBcIicrdGhpcy50eXBlKydcIjogTWVzc2FnZSBpbmRleCAlJytrK1wiIGR1cGxpY2F0ZWQuXCIpO2Zba109ITA7ZysrO2EucHVzaChiW2stMV0pfWVsc2Uoaz1rLnRyaW0oKSkmJmEucHVzaChrKX1pZihnIT1iLmxlbmd0aCl0aHJvdyBFcnJvcignQmxvY2sgXCInK3RoaXMudHlwZSsnXCI6IE1lc3NhZ2UgZG9lcyBub3QgcmVmZXJlbmNlIGFsbCAnK2IubGVuZ3RoK1wiIGFyZyhzKS5cIik7XG5hLmxlbmd0aCYmKFwic3RyaW5nXCI9PXR5cGVvZiBhW2EubGVuZ3RoLTFdfHxCbG9ja2x5LnV0aWxzLnN0cmluZy5zdGFydHNXaXRoKGFbYS5sZW5ndGgtMV0udHlwZSxcImZpZWxkX1wiKSkmJihoPXt0eXBlOlwiaW5wdXRfZHVtbXlcIn0sYyYmKGguYWxpZ249YyksYS5wdXNoKGgpKTtjPXtMRUZUOkJsb2NrbHkuQUxJR05fTEVGVCxSSUdIVDpCbG9ja2x5LkFMSUdOX1JJR0hULENFTlRSRTpCbG9ja2x5LkFMSUdOX0NFTlRSRSxDRU5URVI6QmxvY2tseS5BTElHTl9DRU5UUkV9O2I9W107Zm9yKGg9MDtoPGEubGVuZ3RoO2grKylpZihmPWFbaF0sXCJzdHJpbmdcIj09dHlwZW9mIGYpYi5wdXNoKFtmLHZvaWQgMF0pO2Vsc2V7ZT1nPW51bGw7ZG8gaWYoaz0hMSxcInN0cmluZ1wiPT10eXBlb2YgZilnPW5ldyBCbG9ja2x5LkZpZWxkTGFiZWwoZik7ZWxzZSBzd2l0Y2goZi50eXBlKXtjYXNlIFwiaW5wdXRfdmFsdWVcIjplPXRoaXMuYXBwZW5kVmFsdWVJbnB1dChmLm5hbWUpO2JyZWFrO2Nhc2UgXCJpbnB1dF9zdGF0ZW1lbnRcIjplPVxudGhpcy5hcHBlbmRTdGF0ZW1lbnRJbnB1dChmLm5hbWUpO2JyZWFrO2Nhc2UgXCJpbnB1dF9kdW1teVwiOmU9dGhpcy5hcHBlbmREdW1teUlucHV0KGYubmFtZSk7YnJlYWs7ZGVmYXVsdDpnPUJsb2NrbHkuZmllbGRSZWdpc3RyeS5mcm9tSnNvbihmKSwhZyYmZi5hbHQmJihmPWYuYWx0LGs9ITApfXdoaWxlKGspO2lmKGcpYi5wdXNoKFtnLGYubmFtZV0pO2Vsc2UgaWYoZSl7Zi5jaGVjayYmZS5zZXRDaGVjayhmLmNoZWNrKTtmLmFsaWduJiYoZz1jW2YuYWxpZ24udG9VcHBlckNhc2UoKV0sdm9pZCAwPT09Zz9jb25zb2xlLndhcm4oZCtcIklsbGVnYWwgYWxpZ24gdmFsdWU6IFwiLGYuYWxpZ24pOmUuc2V0QWxpZ24oZykpO2ZvcihmPTA7ZjxiLmxlbmd0aDtmKyspZS5hcHBlbmRGaWVsZChiW2ZdWzBdLGJbZl1bMV0pO2IubGVuZ3RoPTB9fX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5hcHBlbmRJbnB1dF89ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO2lmKGE9PUJsb2NrbHkuSU5QVVRfVkFMVUV8fGE9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQpYz10aGlzLm1ha2VDb25uZWN0aW9uXyhhKTthPT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UJiZ0aGlzLnN0YXRlbWVudElucHV0Q291bnQrKzthPW5ldyBCbG9ja2x5LklucHV0KGEsYix0aGlzLGMpO3RoaXMuaW5wdXRMaXN0LnB1c2goYSk7cmV0dXJuIGF9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUubW92ZUlucHV0QmVmb3JlPWZ1bmN0aW9uKGEsYil7aWYoYSE9Yil7Zm9yKHZhciBjPS0xLGQ9Yj8tMTp0aGlzLmlucHV0TGlzdC5sZW5ndGgsZT0wLGY7Zj10aGlzLmlucHV0TGlzdFtlXTtlKyspaWYoZi5uYW1lPT1hKXtpZihjPWUsLTEhPWQpYnJlYWt9ZWxzZSBpZihiJiZmLm5hbWU9PWImJihkPWUsLTEhPWMpKWJyZWFrO2lmKC0xPT1jKXRocm93IEVycm9yKCdOYW1lZCBpbnB1dCBcIicrYSsnXCIgbm90IGZvdW5kLicpO2lmKC0xPT1kKXRocm93IEVycm9yKCdSZWZlcmVuY2UgaW5wdXQgXCInK2IrJ1wiIG5vdCBmb3VuZC4nKTt0aGlzLm1vdmVOdW1iZXJlZElucHV0QmVmb3JlKGMsZCl9fTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLm1vdmVOdW1iZXJlZElucHV0QmVmb3JlPWZ1bmN0aW9uKGEsYil7aWYoYT09Yil0aHJvdyBFcnJvcihcIkNhbid0IG1vdmUgaW5wdXQgdG8gaXRzZWxmLlwiKTtpZihhPj10aGlzLmlucHV0TGlzdC5sZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklucHV0IGluZGV4IFwiK2ErXCIgb3V0IG9mIGJvdW5kcy5cIik7aWYoYj50aGlzLmlucHV0TGlzdC5sZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIlJlZmVyZW5jZSBpbnB1dCBcIitiK1wiIG91dCBvZiBib3VuZHMuXCIpO3ZhciBjPXRoaXMuaW5wdXRMaXN0W2FdO3RoaXMuaW5wdXRMaXN0LnNwbGljZShhLDEpO2E8YiYmYi0tO3RoaXMuaW5wdXRMaXN0LnNwbGljZShiLDAsYyl9O1xuQmxvY2tseS5CbG9jay5wcm90b3R5cGUucmVtb3ZlSW5wdXQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkO2Q9dGhpcy5pbnB1dExpc3RbY107YysrKWlmKGQubmFtZT09YSlyZXR1cm4gZC50eXBlPT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UJiZ0aGlzLnN0YXRlbWVudElucHV0Q291bnQtLSxkLmRpc3Bvc2UoKSx0aGlzLmlucHV0TGlzdC5zcGxpY2UoYywxKSwhMDtpZihiKXJldHVybiExO3Rocm93IEVycm9yKFwiSW5wdXQgbm90IGZvdW5kOiBcIithKTt9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldElucHV0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM7Yz10aGlzLmlucHV0TGlzdFtiXTtiKyspaWYoYy5uYW1lPT1hKXJldHVybiBjO3JldHVybiBudWxsfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5nZXRJbnB1dFRhcmdldEJsb2NrPWZ1bmN0aW9uKGEpe3JldHVybihhPXRoaXMuZ2V0SW5wdXQoYSkpJiZhLmNvbm5lY3Rpb24mJmEuY29ubmVjdGlvbi50YXJnZXRCbG9jaygpfTtcbkJsb2NrbHkuQmxvY2sucHJvdG90eXBlLmdldENvbW1lbnRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tbWVudE1vZGVsLnRleHR9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldENvbW1lbnRUZXh0PWZ1bmN0aW9uKGEpe3RoaXMuY29tbWVudE1vZGVsLnRleHQhPWEmJihCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZSh0aGlzLFwiY29tbWVudFwiLG51bGwsdGhpcy5jb21tZW50TW9kZWwudGV4dCxhKSksdGhpcy5jb21tZW50PXRoaXMuY29tbWVudE1vZGVsLnRleHQ9YSl9O0Jsb2NrbHkuQmxvY2sucHJvdG90eXBlLnNldFdhcm5pbmdUZXh0PWZ1bmN0aW9uKGEsYil7fTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5zZXRNdXRhdG9yPWZ1bmN0aW9uKGEpe307QmxvY2tseS5CbG9jay5wcm90b3R5cGUuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnh5X307XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5tb3ZlQnk9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnBhcmVudEJsb2NrXyl0aHJvdyBFcnJvcihcIkJsb2NrIGhhcyBwYXJlbnQuXCIpO3ZhciBjPW5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja01vdmUodGhpcyk7dGhpcy54eV8udHJhbnNsYXRlKGEsYik7Yy5yZWNvcmROZXcoKTtCbG9ja2x5LkV2ZW50cy5maXJlKGMpfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5tYWtlQ29ubmVjdGlvbl89ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCbG9ja2x5LkNvbm5lY3Rpb24odGhpcyxhKX07XG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS5hbGxJbnB1dHNGaWxsZWQ9ZnVuY3Rpb24oYSl7dm9pZCAwPT09YSYmKGE9ITApO2lmKCFhJiZ0aGlzLmlzU2hhZG93KCkpcmV0dXJuITE7Zm9yKHZhciBiPTAsYztjPXRoaXMuaW5wdXRMaXN0W2JdO2IrKylpZihjLmNvbm5lY3Rpb24mJihjPWMuY29ubmVjdGlvbi50YXJnZXRCbG9jaygpLCFjfHwhYy5hbGxJbnB1dHNGaWxsZWQoYSkpKXJldHVybiExO3JldHVybihiPXRoaXMuZ2V0TmV4dEJsb2NrKCkpP2IuYWxsSW5wdXRzRmlsbGVkKGEpOiEwfTtCbG9ja2x5LkJsb2NrLnByb3RvdHlwZS50b0RldlN0cmluZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZT8nXCInK3RoaXMudHlwZSsnXCIgYmxvY2snOlwiQmxvY2tcIjt0aGlzLmlkJiYoYSs9JyAoaWQ9XCInK3RoaXMuaWQrJ1wiKScpO3JldHVybiBhfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nPXt9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSVBhdGhPYmplY3Q9ZnVuY3Rpb24oYSxiKXt9O0Jsb2NrbHkudXRpbHMuYXJpYT17fTtCbG9ja2x5LnV0aWxzLmFyaWEuQVJJQV9QUkVGSVhfPVwiYXJpYS1cIjtCbG9ja2x5LnV0aWxzLmFyaWEuUk9MRV9BVFRSSUJVVEVfPVwicm9sZVwiO0Jsb2NrbHkudXRpbHMuYXJpYS5Sb2xlPXtHUklEOlwiZ3JpZFwiLEdSSURDRUxMOlwiZ3JpZGNlbGxcIixHUk9VUDpcImdyb3VwXCIsTElTVEJPWDpcImxpc3Rib3hcIixNRU5VOlwibWVudVwiLE1FTlVJVEVNOlwibWVudWl0ZW1cIixNRU5VSVRFTUNIRUNLQk9YOlwibWVudWl0ZW1jaGVja2JveFwiLE9QVElPTjpcIm9wdGlvblwiLFBSRVNFTlRBVElPTjpcInByZXNlbnRhdGlvblwiLFJPVzpcInJvd1wiLFRSRUU6XCJ0cmVlXCIsVFJFRUlURU06XCJ0cmVlaXRlbVwifTtcbkJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZT17QUNUSVZFREVTQ0VOREFOVDpcImFjdGl2ZWRlc2NlbmRhbnRcIixDT0xDT1VOVDpcImNvbGNvdW50XCIsRElTQUJMRUQ6XCJkaXNhYmxlZFwiLEVYUEFOREVEOlwiZXhwYW5kZWRcIixJTlZBTElEOlwiaW52YWxpZFwiLExBQkVMOlwibGFiZWxcIixMQUJFTExFREJZOlwibGFiZWxsZWRieVwiLExFVkVMOlwibGV2ZWxcIixPUklFTlRBVElPTjpcIm9yaWVudGF0aW9uXCIsUE9TSU5TRVQ6XCJwb3NpbnNldFwiLFJPV0NPVU5UOlwicm93Y291bnRcIixTRUxFQ1RFRDpcInNlbGVjdGVkXCIsU0VUU0laRTpcInNldHNpemVcIixWQUxVRU1BWDpcInZhbHVlbWF4XCIsVkFMVUVNSU46XCJ2YWx1ZW1pblwifTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0Um9sZT1mdW5jdGlvbihhLGIpe2Euc2V0QXR0cmlidXRlKEJsb2NrbHkudXRpbHMuYXJpYS5ST0xFX0FUVFJJQlVURV8sYil9O1xuQmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlPWZ1bmN0aW9uKGEsYixjKXtBcnJheS5pc0FycmF5KGMpJiYoYz1jLmpvaW4oXCIgXCIpKTthLnNldEF0dHJpYnV0ZShCbG9ja2x5LnV0aWxzLmFyaWEuQVJJQV9QUkVGSVhfK2IsYyl9O0Jsb2NrbHkuTWVudT1mdW5jdGlvbigpe3RoaXMubWVudUl0ZW1zXz1bXTt0aGlzLnJvbGVOYW1lXz10aGlzLmVsZW1lbnRfPXRoaXMub25LZXlEb3duSGFuZGxlcl89dGhpcy5tb3VzZUxlYXZlSGFuZGxlcl89dGhpcy5tb3VzZUVudGVySGFuZGxlcl89dGhpcy5jbGlja0hhbmRsZXJfPXRoaXMubW91c2VPdmVySGFuZGxlcl89dGhpcy5oaWdobGlnaHRlZEl0ZW1fPXRoaXMub3BlbmluZ0Nvb3Jkcz1udWxsfTtCbG9ja2x5Lk1lbnUucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKGEpe3RoaXMubWVudUl0ZW1zXy5wdXNoKGEpfTtcbkJsb2NrbHkuTWVudS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yi5jbGFzc05hbWU9XCJibG9ja2x5TWVudSBnb29nLW1lbnUgYmxvY2tseU5vblNlbGVjdGFibGVcIjtiLnRhYkluZGV4PTA7dGhpcy5yb2xlTmFtZV8mJkJsb2NrbHkudXRpbHMuYXJpYS5zZXRSb2xlKGIsdGhpcy5yb2xlTmFtZV8pO3RoaXMuZWxlbWVudF89Yjtmb3IodmFyIGM9MCxkO2Q9dGhpcy5tZW51SXRlbXNfW2NdO2MrKyliLmFwcGVuZENoaWxkKGQuY3JlYXRlRG9tKCkpO3RoaXMubW91c2VPdmVySGFuZGxlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhiLFwibW91c2VvdmVyXCIsdGhpcyx0aGlzLmhhbmRsZU1vdXNlT3Zlcl8sITApO3RoaXMuY2xpY2tIYW5kbGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGIsXCJjbGlja1wiLHRoaXMsdGhpcy5oYW5kbGVDbGlja18sITApO3RoaXMubW91c2VFbnRlckhhbmRsZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcblwibW91c2VlbnRlclwiLHRoaXMsdGhpcy5oYW5kbGVNb3VzZUVudGVyXywhMCk7dGhpcy5tb3VzZUxlYXZlSGFuZGxlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhiLFwibW91c2VsZWF2ZVwiLHRoaXMsdGhpcy5oYW5kbGVNb3VzZUxlYXZlXywhMCk7dGhpcy5vbktleURvd25IYW5kbGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGIsXCJrZXlkb3duXCIsdGhpcyx0aGlzLmhhbmRsZUtleUV2ZW50Xyk7YS5hcHBlbmRDaGlsZChiKX07QmxvY2tseS5NZW51LnByb3RvdHlwZS5nZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudF99O0Jsb2NrbHkuTWVudS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEVsZW1lbnQoKTthJiYoYS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pLEJsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsXCJibG9ja2x5Rm9jdXNlZFwiKSl9O1xuQmxvY2tseS5NZW51LnByb3RvdHlwZS5ibHVyXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RWxlbWVudCgpO2EmJihhLmJsdXIoKSxCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLFwiYmxvY2tseUZvY3VzZWRcIikpfTtCbG9ja2x5Lk1lbnUucHJvdG90eXBlLnNldFJvbGU9ZnVuY3Rpb24oYSl7dGhpcy5yb2xlTmFtZV89YX07XG5CbG9ja2x5Lk1lbnUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLm1vdXNlT3ZlckhhbmRsZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5tb3VzZU92ZXJIYW5kbGVyXyksdGhpcy5tb3VzZU92ZXJIYW5kbGVyXz1udWxsKTt0aGlzLmNsaWNrSGFuZGxlcl8mJihCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLmNsaWNrSGFuZGxlcl8pLHRoaXMuY2xpY2tIYW5kbGVyXz1udWxsKTt0aGlzLm1vdXNlRW50ZXJIYW5kbGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMubW91c2VFbnRlckhhbmRsZXJfKSx0aGlzLm1vdXNlRW50ZXJIYW5kbGVyXz1udWxsKTt0aGlzLm1vdXNlTGVhdmVIYW5kbGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMubW91c2VMZWF2ZUhhbmRsZXJfKSx0aGlzLm1vdXNlTGVhdmVIYW5kbGVyXz1udWxsKTt0aGlzLm9uS2V5RG93bkhhbmRsZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbktleURvd25IYW5kbGVyXyksXG50aGlzLm9uS2V5RG93bkhhbmRsZXJfPW51bGwpO2Zvcih2YXIgYT0wLGI7Yj10aGlzLm1lbnVJdGVtc19bYV07YSsrKWIuZGlzcG9zZSgpO3RoaXMuZWxlbWVudF89bnVsbH07QmxvY2tseS5NZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbV89ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0RWxlbWVudCgpO2EmJmEhPWI7KXtpZihCbG9ja2x5LnV0aWxzLmRvbS5oYXNDbGFzcyhhLFwiYmxvY2tseU1lbnVJdGVtXCIpKWZvcih2YXIgYz0wLGQ7ZD10aGlzLm1lbnVJdGVtc19bY107YysrKWlmKGQuZ2V0RWxlbWVudCgpPT1hKXJldHVybiBkO2E9YS5wYXJlbnRFbGVtZW50fXJldHVybiBudWxsfTtcbkJsb2NrbHkuTWVudS5wcm90b3R5cGUuc2V0SGlnaGxpZ2h0ZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5oaWdobGlnaHRlZEl0ZW1fO2ImJihiLnNldEhpZ2hsaWdodGVkKCExKSx0aGlzLmhpZ2hsaWdodGVkSXRlbV89bnVsbCk7YSYmKGEuc2V0SGlnaGxpZ2h0ZWQoITApLHRoaXMuaGlnaGxpZ2h0ZWRJdGVtXz1hLGI9dGhpcy5nZXRFbGVtZW50KCksQmxvY2tseS51dGlscy5zdHlsZS5zY3JvbGxJbnRvQ29udGFpbmVyVmlldyhhLmdldEVsZW1lbnQoKSxiKSxCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoYixCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuQUNUSVZFREVTQ0VOREFOVCxhLmdldElkKCkpKX07QmxvY2tseS5NZW51LnByb3RvdHlwZS5oaWdobGlnaHROZXh0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZW51SXRlbXNfLmluZGV4T2YodGhpcy5oaWdobGlnaHRlZEl0ZW1fKTt0aGlzLmhpZ2hsaWdodEhlbHBlcl8oYSwxKX07XG5CbG9ja2x5Lk1lbnUucHJvdG90eXBlLmhpZ2hsaWdodFByZXZpb3VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZW51SXRlbXNfLmluZGV4T2YodGhpcy5oaWdobGlnaHRlZEl0ZW1fKTt0aGlzLmhpZ2hsaWdodEhlbHBlcl8oMD5hP3RoaXMubWVudUl0ZW1zXy5sZW5ndGg6YSwtMSl9O0Jsb2NrbHkuTWVudS5wcm90b3R5cGUuaGlnaGxpZ2h0Rmlyc3RfPWZ1bmN0aW9uKCl7dGhpcy5oaWdobGlnaHRIZWxwZXJfKC0xLDEpfTtCbG9ja2x5Lk1lbnUucHJvdG90eXBlLmhpZ2hsaWdodExhc3RfPWZ1bmN0aW9uKCl7dGhpcy5oaWdobGlnaHRIZWxwZXJfKHRoaXMubWVudUl0ZW1zXy5sZW5ndGgsLTEpfTtCbG9ja2x5Lk1lbnUucHJvdG90eXBlLmhpZ2hsaWdodEhlbHBlcl89ZnVuY3Rpb24oYSxiKXthKz1iO2Zvcih2YXIgYztjPXRoaXMubWVudUl0ZW1zX1thXTspe2lmKGMuaXNFbmFibGVkKCkpe3RoaXMuc2V0SGlnaGxpZ2h0ZWQoYyk7YnJlYWt9YSs9Yn19O1xuQmxvY2tseS5NZW51LnByb3RvdHlwZS5oYW5kbGVNb3VzZU92ZXJfPWZ1bmN0aW9uKGEpeyhhPXRoaXMuZ2V0TWVudUl0ZW1fKGEudGFyZ2V0KSkmJihhLmlzRW5hYmxlZCgpP3RoaXMuaGlnaGxpZ2h0ZWRJdGVtXyE9YSYmdGhpcy5zZXRIaWdobGlnaHRlZChhKTp0aGlzLnNldEhpZ2hsaWdodGVkKG51bGwpKX07QmxvY2tseS5NZW51LnByb3RvdHlwZS5oYW5kbGVDbGlja189ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcGVuaW5nQ29vcmRzO3RoaXMub3BlbmluZ0Nvb3Jkcz1udWxsO2lmKGImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmNsaWVudFgpe3ZhciBjPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS5jbGllbnRYLGEuY2xpZW50WSk7aWYoMT5CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlzdGFuY2UoYixjKSlyZXR1cm59KGE9dGhpcy5nZXRNZW51SXRlbV8oYS50YXJnZXQpKSYmYS5wZXJmb3JtQWN0aW9uKCl9O1xuQmxvY2tseS5NZW51LnByb3RvdHlwZS5oYW5kbGVNb3VzZUVudGVyXz1mdW5jdGlvbihhKXt0aGlzLmZvY3VzKCl9O0Jsb2NrbHkuTWVudS5wcm90b3R5cGUuaGFuZGxlTW91c2VMZWF2ZV89ZnVuY3Rpb24oYSl7dGhpcy5nZXRFbGVtZW50KCkmJih0aGlzLmJsdXJfKCksdGhpcy5zZXRIaWdobGlnaHRlZChudWxsKSl9O1xuQmxvY2tseS5NZW51LnByb3RvdHlwZS5oYW5kbGVLZXlFdmVudF89ZnVuY3Rpb24oYSl7aWYodGhpcy5tZW51SXRlbXNfLmxlbmd0aCYmIShhLnNoaWZ0S2V5fHxhLmN0cmxLZXl8fGEubWV0YUtleXx8YS5hbHRLZXkpKXt2YXIgYj10aGlzLmhpZ2hsaWdodGVkSXRlbV87c3dpdGNoKGEua2V5Q29kZSl7Y2FzZSBCbG9ja2x5LnV0aWxzLktleUNvZGVzLkVOVEVSOmNhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5TUEFDRTpiJiZiLnBlcmZvcm1BY3Rpb24oKTticmVhaztjYXNlIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuVVA6dGhpcy5oaWdobGlnaHRQcmV2aW91cygpO2JyZWFrO2Nhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5ET1dOOnRoaXMuaGlnaGxpZ2h0TmV4dCgpO2JyZWFrO2Nhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5QQUdFX1VQOmNhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5IT01FOnRoaXMuaGlnaGxpZ2h0Rmlyc3RfKCk7YnJlYWs7Y2FzZSBCbG9ja2x5LnV0aWxzLktleUNvZGVzLlBBR0VfRE9XTjpjYXNlIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuRU5EOnRoaXMuaGlnaGxpZ2h0TGFzdF8oKTtcbmJyZWFrO2RlZmF1bHQ6cmV0dXJufWEucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfX07QmxvY2tseS5NZW51LnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRFbGVtZW50KCksYj1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldFNpemUoYSk7Yi5oZWlnaHQ9YS5zY3JvbGxIZWlnaHQ7cmV0dXJuIGJ9O0Jsb2NrbHkuTWVudUl0ZW09ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbnRlbnRfPWE7dGhpcy52YWx1ZV89Yjt0aGlzLmVuYWJsZWRfPSEwO3RoaXMuZWxlbWVudF89bnVsbDt0aGlzLnJpZ2h0VG9MZWZ0Xz0hMTt0aGlzLnJvbGVOYW1lXz1udWxsO3RoaXMuaGlnaGxpZ2h0Xz10aGlzLmNoZWNrZWRfPXRoaXMuY2hlY2thYmxlXz0hMTt0aGlzLmFjdGlvbkhhbmRsZXJfPW51bGx9O1xuQmxvY2tseS5NZW51SXRlbS5wcm90b3R5cGUuY3JlYXRlRG9tPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLmlkPUJsb2NrbHkudXRpbHMuSWRHZW5lcmF0b3IuZ2V0TmV4dFVuaXF1ZUlkKCk7dGhpcy5lbGVtZW50Xz1hO2EuY2xhc3NOYW1lPVwiYmxvY2tseU1lbnVJdGVtIGdvb2ctbWVudWl0ZW0gXCIrKHRoaXMuZW5hYmxlZF8/XCJcIjpcImJsb2NrbHlNZW51SXRlbURpc2FibGVkIGdvb2ctbWVudWl0ZW0tZGlzYWJsZWQgXCIpKyh0aGlzLmNoZWNrZWRfP1wiYmxvY2tseU1lbnVJdGVtU2VsZWN0ZWQgZ29vZy1vcHRpb24tc2VsZWN0ZWQgXCI6XCJcIikrKHRoaXMuaGlnaGxpZ2h0Xz9cImJsb2NrbHlNZW51SXRlbUhpZ2hsaWdodCBnb29nLW1lbnVpdGVtLWhpZ2hsaWdodCBcIjpcIlwiKSsodGhpcy5yaWdodFRvTGVmdF8/XCJibG9ja2x5TWVudUl0ZW1SdGwgZ29vZy1tZW51aXRlbS1ydGwgXCI6XCJcIik7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbmIuY2xhc3NOYW1lPVwiYmxvY2tseU1lbnVJdGVtQ29udGVudCBnb29nLW1lbnVpdGVtLWNvbnRlbnRcIjtpZih0aGlzLmNoZWNrYWJsZV8pe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5jbGFzc05hbWU9XCJibG9ja2x5TWVudUl0ZW1DaGVja2JveCBnb29nLW1lbnVpdGVtLWNoZWNrYm94XCI7Yi5hcHBlbmRDaGlsZChjKX1jPXRoaXMuY29udGVudF87XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuY29udGVudF8mJihjPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMuY29udGVudF8pKTtiLmFwcGVuZENoaWxkKGMpO2EuYXBwZW5kQ2hpbGQoYik7dGhpcy5yb2xlTmFtZV8mJkJsb2NrbHkudXRpbHMuYXJpYS5zZXRSb2xlKGEsdGhpcy5yb2xlTmFtZV8pO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZShhLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5TRUxFQ1RFRCx0aGlzLmNoZWNrYWJsZV8mJnRoaXMuY2hlY2tlZF98fCExKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoYSxcbkJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5ESVNBQkxFRCwhdGhpcy5lbmFibGVkXyk7cmV0dXJuIGF9O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRfPW51bGx9O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLmdldEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50X307QmxvY2tseS5NZW51SXRlbS5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50Xy5pZH07QmxvY2tseS5NZW51SXRlbS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLnNldFJpZ2h0VG9MZWZ0PWZ1bmN0aW9uKGEpe3RoaXMucmlnaHRUb0xlZnRfPWF9O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLnNldFJvbGU9ZnVuY3Rpb24oYSl7dGhpcy5yb2xlTmFtZV89YX07XG5CbG9ja2x5Lk1lbnVJdGVtLnByb3RvdHlwZS5zZXRDaGVja2FibGU9ZnVuY3Rpb24oYSl7dGhpcy5jaGVja2FibGVfPWF9O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLnNldENoZWNrZWQ9ZnVuY3Rpb24oYSl7dGhpcy5jaGVja2VkXz1hfTtCbG9ja2x5Lk1lbnVJdGVtLnByb3RvdHlwZS5zZXRIaWdobGlnaHRlZD1mdW5jdGlvbihhKXt0aGlzLmhpZ2hsaWdodF89YTt2YXIgYj10aGlzLmdldEVsZW1lbnQoKTtiJiZ0aGlzLmlzRW5hYmxlZCgpJiYoYT8oQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYixcImJsb2NrbHlNZW51SXRlbUhpZ2hsaWdodFwiKSxCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhiLFwiZ29vZy1tZW51aXRlbS1oaWdobGlnaHRcIikpOihCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhiLFwiYmxvY2tseU1lbnVJdGVtSGlnaGxpZ2h0XCIpLEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzKGIsXCJnb29nLW1lbnVpdGVtLWhpZ2hsaWdodFwiKSkpfTtcbkJsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWRffTtCbG9ja2x5Lk1lbnVJdGVtLnByb3RvdHlwZS5zZXRFbmFibGVkPWZ1bmN0aW9uKGEpe3RoaXMuZW5hYmxlZF89YX07QmxvY2tseS5NZW51SXRlbS5wcm90b3R5cGUucGVyZm9ybUFjdGlvbj1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkKCkmJnRoaXMuYWN0aW9uSGFuZGxlcl8mJnRoaXMuYWN0aW9uSGFuZGxlcl8odGhpcyl9O0Jsb2NrbHkuTWVudUl0ZW0ucHJvdG90eXBlLm9uQWN0aW9uPWZ1bmN0aW9uKGEsYil7dGhpcy5hY3Rpb25IYW5kbGVyXz1hLmJpbmQoYil9O0Jsb2NrbHkuQ29udGV4dE1lbnU9e307QmxvY2tseS5Db250ZXh0TWVudS5jdXJyZW50QmxvY2s9bnVsbDtCbG9ja2x5LkNvbnRleHRNZW51Lm1lbnVfPW51bGw7QmxvY2tseS5Db250ZXh0TWVudS5zaG93PWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LldpZGdldERpdi5zaG93KEJsb2NrbHkuQ29udGV4dE1lbnUsYyxCbG9ja2x5LkNvbnRleHRNZW51LmRpc3Bvc2UpO2lmKGIubGVuZ3RoKXt2YXIgZD1CbG9ja2x5LkNvbnRleHRNZW51LnBvcHVsYXRlXyhiLGMpO0Jsb2NrbHkuQ29udGV4dE1lbnUubWVudV89ZDtCbG9ja2x5LkNvbnRleHRNZW51LnBvc2l0aW9uXyhkLGEsYyk7c2V0VGltZW91dChmdW5jdGlvbigpe2QuZm9jdXMoKX0sMSk7QmxvY2tseS5Db250ZXh0TWVudS5jdXJyZW50QmxvY2s9bnVsbH1lbHNlIEJsb2NrbHkuQ29udGV4dE1lbnUuaGlkZSgpfTtcbkJsb2NrbHkuQ29udGV4dE1lbnUucG9wdWxhdGVfPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IEJsb2NrbHkuTWVudTtjLnNldFJvbGUoQmxvY2tseS51dGlscy5hcmlhLlJvbGUuTUVOVSk7Zm9yKHZhciBkPTAsZTtlPWFbZF07ZCsrKXt2YXIgZj1uZXcgQmxvY2tseS5NZW51SXRlbShlLnRleHQpO2Yuc2V0UmlnaHRUb0xlZnQoYik7Zi5zZXRSb2xlKEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLk1FTlVJVEVNKTtjLmFkZENoaWxkKGYpO2Yuc2V0RW5hYmxlZChlLmVuYWJsZWQpO2lmKGUuZW5hYmxlZClmLm9uQWN0aW9uKGZ1bmN0aW9uKGcpe0Jsb2NrbHkuQ29udGV4dE1lbnUuaGlkZSgpO3RoaXMuY2FsbGJhY2sodGhpcy5zY29wZSl9LGUpfXJldHVybiBjfTtcbkJsb2NrbHkuQ29udGV4dE1lbnUucG9zaXRpb25fPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1CbG9ja2x5LnV0aWxzLmdldFZpZXdwb3J0QkJveCgpO2I9bmV3IEJsb2NrbHkudXRpbHMuUmVjdChiLmNsaWVudFkrZC50b3AsYi5jbGllbnRZK2QudG9wLGIuY2xpZW50WCtkLmxlZnQsYi5jbGllbnRYK2QubGVmdCk7QmxvY2tseS5Db250ZXh0TWVudS5jcmVhdGVXaWRnZXRfKGEpO3ZhciBlPWEuZ2V0U2l6ZSgpO2MmJihiLmxlZnQrPWUud2lkdGgsYi5yaWdodCs9ZS53aWR0aCxkLmxlZnQrPWUud2lkdGgsZC5yaWdodCs9ZS53aWR0aCk7QmxvY2tseS5XaWRnZXREaXYucG9zaXRpb25XaXRoQW5jaG9yKGQsYixlLGMpO2EuZm9jdXMoKX07XG5CbG9ja2x5LkNvbnRleHRNZW51LmNyZWF0ZVdpZGdldF89ZnVuY3Rpb24oYSl7YS5yZW5kZXIoQmxvY2tseS5XaWRnZXREaXYuRElWKTt2YXIgYj1hLmdldEVsZW1lbnQoKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhiLFwiYmxvY2tseUNvbnRleHRNZW51XCIpO0Jsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcImNvbnRleHRtZW51XCIsbnVsbCxCbG9ja2x5LnV0aWxzLm5vRXZlbnQpO2EuZm9jdXMoKX07QmxvY2tseS5Db250ZXh0TWVudS5oaWRlPWZ1bmN0aW9uKCl7QmxvY2tseS5XaWRnZXREaXYuaGlkZUlmT3duZXIoQmxvY2tseS5Db250ZXh0TWVudSk7QmxvY2tseS5Db250ZXh0TWVudS5jdXJyZW50QmxvY2s9bnVsbH07QmxvY2tseS5Db250ZXh0TWVudS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS5Db250ZXh0TWVudS5tZW51XyYmKEJsb2NrbHkuQ29udGV4dE1lbnUubWVudV8uZGlzcG9zZSgpLEJsb2NrbHkuQ29udGV4dE1lbnUubWVudV89bnVsbCl9O1xuQmxvY2tseS5Db250ZXh0TWVudS5jYWxsYmFja0ZhY3Rvcnk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCk7dHJ5e3ZhciBjPUJsb2NrbHkuWG1sLmRvbVRvQmxvY2soYixhLndvcmtzcGFjZSksZD1hLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTtkLng9YS5SVEw/ZC54LUJsb2NrbHkuU05BUF9SQURJVVM6ZC54K0Jsb2NrbHkuU05BUF9SQURJVVM7ZC55Kz0yKkJsb2NrbHkuU05BUF9SQURJVVM7Yy5tb3ZlQnkoZC54LGQueSl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKX1CbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSYmIWMuaXNTaGFkb3coKSYmQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuQmxvY2tDcmVhdGUoYykpO2Muc2VsZWN0KCl9fTtcbkJsb2NrbHkuQ29udGV4dE1lbnUuY29tbWVudERlbGV0ZU9wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm57dGV4dDpCbG9ja2x5Lk1zZy5SRU1PVkVfQ09NTUVOVCxlbmFibGVkOiEwLGNhbGxiYWNrOmZ1bmN0aW9uKCl7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApO2EuZGlzcG9zZSghMCwhMCk7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpfX19O0Jsb2NrbHkuQ29udGV4dE1lbnUuY29tbWVudER1cGxpY2F0ZU9wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm57dGV4dDpCbG9ja2x5Lk1zZy5EVVBMSUNBVEVfQ09NTUVOVCxlbmFibGVkOiEwLGNhbGxiYWNrOmZ1bmN0aW9uKCl7QmxvY2tseS5kdXBsaWNhdGUoYSl9fX07XG5CbG9ja2x5LkNvbnRleHRNZW51LndvcmtzcGFjZUNvbW1lbnRPcHRpb249ZnVuY3Rpb24oYSxiKXtpZighQmxvY2tseS5Xb3Jrc3BhY2VDb21tZW50U3ZnKXRocm93IEVycm9yKFwiTWlzc2luZyByZXF1aXJlIGZvciBCbG9ja2x5LldvcmtzcGFjZUNvbW1lbnRTdmdcIik7dmFyIGM9e2VuYWJsZWQ6IUJsb2NrbHkudXRpbHMudXNlckFnZW50LklFfTtjLnRleHQ9QmxvY2tseS5Nc2cuQUREX0NPTU1FTlQ7Yy5jYWxsYmFjaz1mdW5jdGlvbigpe3ZhciBkPW5ldyBCbG9ja2x5LldvcmtzcGFjZUNvbW1lbnRTdmcoYSxCbG9ja2x5Lk1zZy5XT1JLU1BBQ0VfQ09NTUVOVF9ERUZBVUxUX1RFWFQsQmxvY2tseS5Xb3Jrc3BhY2VDb21tZW50U3ZnLkRFRkFVTFRfU0laRSxCbG9ja2x5LldvcmtzcGFjZUNvbW1lbnRTdmcuREVGQVVMVF9TSVpFKSxlPWEuZ2V0SW5qZWN0aW9uRGl2KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZT1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGIuY2xpZW50WC1cbmUubGVmdCxiLmNsaWVudFktZS50b3ApO3ZhciBmPWEuZ2V0T3JpZ2luT2Zmc2V0SW5QaXhlbHMoKTtlPUJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5kaWZmZXJlbmNlKGUsZik7ZS5zY2FsZSgxL2Euc2NhbGUpO2QubW92ZUJ5KGUueCxlLnkpO2EucmVuZGVyZWQmJihkLmluaXRTdmcoKSxkLnJlbmRlcigpLGQuc2VsZWN0KCkpfTtyZXR1cm4gY307QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zPXt9O0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlclVuZG89ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuTXNnLlVORE99LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe3JldHVybiAwPGEud29ya3NwYWNlLmdldFVuZG9TdGFjaygpLmxlbmd0aD9cImVuYWJsZWRcIjpcImRpc2FibGVkXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2Eud29ya3NwYWNlLnVuZG8oITEpfSxzY29wZVR5cGU6QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5XT1JLU1BBQ0UsaWQ6XCJ1bmRvV29ya3NwYWNlXCIsd2VpZ2h0OjB9KX07XG5CbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJSZWRvPWZ1bmN0aW9uKCl7QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKHtkaXNwbGF5VGV4dDpmdW5jdGlvbigpe3JldHVybiBCbG9ja2x5Lk1zZy5SRURPfSxwcmVjb25kaXRpb25GbjpmdW5jdGlvbihhKXtyZXR1cm4gMDxhLndvcmtzcGFjZS5nZXRSZWRvU3RhY2soKS5sZW5ndGg/XCJlbmFibGVkXCI6XCJkaXNhYmxlZFwifSxjYWxsYmFjazpmdW5jdGlvbihhKXthLndvcmtzcGFjZS51bmRvKCEwKX0sc2NvcGVUeXBlOkJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5TY29wZVR5cGUuV09SS1NQQUNFLGlkOlwicmVkb1dvcmtzcGFjZVwiLHdlaWdodDowfSl9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyQ2xlYW51cD1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3Rlcih7ZGlzcGxheVRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5Nc2cuQ0xFQU5fVVB9LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe3JldHVybiBhLndvcmtzcGFjZS5pc01vdmFibGUoKT8xPGEud29ya3NwYWNlLmdldFRvcEJsb2NrcyghMSkubGVuZ3RoP1wiZW5hYmxlZFwiOlwiZGlzYWJsZWRcIjpcImhpZGRlblwifSxjYWxsYmFjazpmdW5jdGlvbihhKXthLndvcmtzcGFjZS5jbGVhblVwKCl9LHNjb3BlVHlwZTpCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkuU2NvcGVUeXBlLldPUktTUEFDRSxpZDpcImNsZWFuV29ya3NwYWNlXCIsd2VpZ2h0OjB9KX07XG5CbG9ja2x5LkNvbnRleHRNZW51SXRlbXMudG9nZ2xlT3B0aW9uXz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9MDtkPGIubGVuZ3RoO2QrKylmb3IodmFyIGU9YltkXTtlOylzZXRUaW1lb3V0KGUuc2V0Q29sbGFwc2VkLmJpbmQoZSxhKSxjKSxlPWUuZ2V0TmV4dEJsb2NrKCksYys9MTB9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyQ29sbGFwc2U9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuTXNnLkNPTExBUFNFX0FMTH0scHJlY29uZGl0aW9uRm46ZnVuY3Rpb24oYSl7aWYoYS53b3Jrc3BhY2Uub3B0aW9ucy5jb2xsYXBzZSl7YT1hLndvcmtzcGFjZS5nZXRUb3BCbG9ja3MoITEpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWZvcih2YXIgYz1hW2JdO2M7KXtpZighYy5pc0NvbGxhcHNlZCgpKXJldHVyblwiZW5hYmxlZFwiO2M9Yy5nZXROZXh0QmxvY2soKX1yZXR1cm5cImRpc2FibGVkXCJ9cmV0dXJuXCJoaWRkZW5cIn0sY2FsbGJhY2s6ZnVuY3Rpb24oYSl7QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnRvZ2dsZU9wdGlvbl8oITAsYS53b3Jrc3BhY2UuZ2V0VG9wQmxvY2tzKCEwKSl9LHNjb3BlVHlwZTpCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkuU2NvcGVUeXBlLldPUktTUEFDRSxcbmlkOlwiY29sbGFwc2VXb3Jrc3BhY2VcIix3ZWlnaHQ6MH0pfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckV4cGFuZD1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3Rlcih7ZGlzcGxheVRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5Nc2cuRVhQQU5EX0FMTH0scHJlY29uZGl0aW9uRm46ZnVuY3Rpb24oYSl7aWYoYS53b3Jrc3BhY2Uub3B0aW9ucy5jb2xsYXBzZSl7YT1hLndvcmtzcGFjZS5nZXRUb3BCbG9ja3MoITEpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWZvcih2YXIgYz1hW2JdO2M7KXtpZihjLmlzQ29sbGFwc2VkKCkpcmV0dXJuXCJlbmFibGVkXCI7Yz1jLmdldE5leHRCbG9jaygpfXJldHVyblwiZGlzYWJsZWRcIn1yZXR1cm5cImhpZGRlblwifSxjYWxsYmFjazpmdW5jdGlvbihhKXtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMudG9nZ2xlT3B0aW9uXyghMSxhLndvcmtzcGFjZS5nZXRUb3BCbG9ja3MoITApKX0sc2NvcGVUeXBlOkJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5TY29wZVR5cGUuV09SS1NQQUNFLFxuaWQ6XCJleHBhbmRXb3Jrc3BhY2VcIix3ZWlnaHQ6MH0pfTtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMuYWRkRGVsZXRhYmxlQmxvY2tzXz1mdW5jdGlvbihhLGIpe2lmKGEuaXNEZWxldGFibGUoKSlBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiLGEuZ2V0RGVzY2VuZGFudHMoITEpKTtlbHNle2E9YS5nZXRDaGlsZHJlbighMSk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmFkZERlbGV0YWJsZUJsb2Nrc18oYVtjXSxiKX19O0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5nZXREZWxldGFibGVCbG9ja3NfPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9YS5nZXRUb3BCbG9ja3MoITApO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKUJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5hZGREZWxldGFibGVCbG9ja3NfKGFbY10sYik7cmV0dXJuIGJ9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmRlbGV0ZU5leHRfPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoYik7dmFyIGM9YS5zaGlmdCgpO2MmJihjLndvcmtzcGFjZT8oYy5kaXNwb3NlKCExLCEwKSxzZXRUaW1lb3V0KEJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5kZWxldGVOZXh0XywxMCxhLGIpKTpCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMuZGVsZXRlTmV4dF8oYSxiKSk7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckRlbGV0ZUFsbD1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3Rlcih7ZGlzcGxheVRleHQ6ZnVuY3Rpb24oYSl7aWYoYS53b3Jrc3BhY2UpcmV0dXJuIGE9QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmdldERlbGV0YWJsZUJsb2Nrc18oYS53b3Jrc3BhY2UpLmxlbmd0aCwxPT1hP0Jsb2NrbHkuTXNnLkRFTEVURV9CTE9DSzpCbG9ja2x5Lk1zZy5ERUxFVEVfWF9CTE9DS1MucmVwbGFjZShcIiUxXCIsU3RyaW5nKGEpKX0scHJlY29uZGl0aW9uRm46ZnVuY3Rpb24oYSl7aWYoYS53b3Jrc3BhY2UpcmV0dXJuIDA8QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmdldERlbGV0YWJsZUJsb2Nrc18oYS53b3Jrc3BhY2UpLmxlbmd0aD9cImVuYWJsZWRcIjpcImRpc2FibGVkXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2lmKGEud29ya3NwYWNlKXthLndvcmtzcGFjZS5jYW5jZWxDdXJyZW50R2VzdHVyZSgpO1xudmFyIGI9QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmdldERlbGV0YWJsZUJsb2Nrc18oYS53b3Jrc3BhY2UpLGM9QmxvY2tseS51dGlscy5nZW5VaWQoKTsyPmIubGVuZ3RoP0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5kZWxldGVOZXh0XyhiLGMpOkJsb2NrbHkuY29uZmlybShCbG9ja2x5Lk1zZy5ERUxFVEVfQUxMX0JMT0NLUy5yZXBsYWNlKFwiJTFcIixiLmxlbmd0aCksZnVuY3Rpb24oZCl7ZCYmQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLmRlbGV0ZU5leHRfKGIsYyl9KX19LHNjb3BlVHlwZTpCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkuU2NvcGVUeXBlLldPUktTUEFDRSxpZDpcIndvcmtzcGFjZURlbGV0ZVwiLHdlaWdodDowfSl9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyV29ya3NwYWNlT3B0aW9uc189ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJVbmRvKCk7QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyUmVkbygpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckNsZWFudXAoKTtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJDb2xsYXBzZSgpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckV4cGFuZCgpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckRlbGV0ZUFsbCgpfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckR1cGxpY2F0ZT1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3Rlcih7ZGlzcGxheVRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5Nc2cuRFVQTElDQVRFX0JMT0NLfSxwcmVjb25kaXRpb25GbjpmdW5jdGlvbihhKXthPWEuYmxvY2s7cmV0dXJuIWEuaXNJbkZseW91dCYmYS5pc0RlbGV0YWJsZSgpJiZhLmlzTW92YWJsZSgpP2EuaXNEdXBsaWNhdGFibGUoKT9cImVuYWJsZWRcIjpcImRpc2FibGVkXCI6XCJoaWRkZW5cIn0sY2FsbGJhY2s6ZnVuY3Rpb24oYSl7YS5ibG9jayYmQmxvY2tseS5kdXBsaWNhdGUoYS5ibG9jayl9LHNjb3BlVHlwZTpCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkuU2NvcGVUeXBlLkJMT0NLLGlkOlwiYmxvY2tEdXBsaWNhdGVcIix3ZWlnaHQ6MH0pfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckNvbW1lbnQ9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmJsb2NrLmdldENvbW1lbnRJY29uKCk/QmxvY2tseS5Nc2cuUkVNT1ZFX0NPTU1FTlQ6QmxvY2tseS5Nc2cuQUREX0NPTU1FTlR9LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe2E9YS5ibG9jaztyZXR1cm4gQmxvY2tseS51dGlscy51c2VyQWdlbnQuSUV8fGEuaXNJbkZseW91dHx8IWEud29ya3NwYWNlLm9wdGlvbnMuY29tbWVudHN8fGEuaXNDb2xsYXBzZWQoKXx8IWEuaXNFZGl0YWJsZSgpP1wiaGlkZGVuXCI6XCJlbmFibGVkXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2E9YS5ibG9jazthLmdldENvbW1lbnRJY29uKCk/YS5zZXRDb21tZW50VGV4dChudWxsKTphLnNldENvbW1lbnRUZXh0KFwiXCIpfSxzY29wZVR5cGU6QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5CTE9DSyxcbmlkOlwiYmxvY2tDb21tZW50XCIsd2VpZ2h0OjB9KX07XG5CbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJJbmxpbmU9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmJsb2NrLmdldElucHV0c0lubGluZSgpP0Jsb2NrbHkuTXNnLkVYVEVSTkFMX0lOUFVUUzpCbG9ja2x5Lk1zZy5JTkxJTkVfSU5QVVRTfSxwcmVjb25kaXRpb25GbjpmdW5jdGlvbihhKXthPWEuYmxvY2s7aWYoIWEuaXNJbkZseW91dCYmYS5pc01vdmFibGUoKSYmIWEuaXNDb2xsYXBzZWQoKSlmb3IodmFyIGI9MTtiPGEuaW5wdXRMaXN0Lmxlbmd0aDtiKyspaWYoYS5pbnB1dExpc3RbYi0xXS50eXBlIT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UJiZhLmlucHV0TGlzdFtiXS50eXBlIT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UKXJldHVyblwiZW5hYmxlZFwiO3JldHVyblwiaGlkZGVuXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2EuYmxvY2suc2V0SW5wdXRzSW5saW5lKCFhLmJsb2NrLmdldElucHV0c0lubGluZSgpKX0sc2NvcGVUeXBlOkJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5TY29wZVR5cGUuQkxPQ0ssXG5pZDpcImJsb2NrSW5saW5lXCIsd2VpZ2h0OjB9KX07QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyQ29sbGFwc2VFeHBhbmRCbG9jaz1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3Rlcih7ZGlzcGxheVRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYmxvY2suaXNDb2xsYXBzZWQoKT9CbG9ja2x5Lk1zZy5FWFBBTkRfQkxPQ0s6QmxvY2tseS5Nc2cuQ09MTEFQU0VfQkxPQ0t9LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe2E9YS5ibG9jaztyZXR1cm4hYS5pc0luRmx5b3V0JiZhLmlzTW92YWJsZSgpP1wiZW5hYmxlZFwiOlwiaGlkZGVuXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2EuYmxvY2suc2V0Q29sbGFwc2VkKCFhLmJsb2NrLmlzQ29sbGFwc2VkKCkpfSxzY29wZVR5cGU6QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5CTE9DSyxpZDpcImJsb2NrQ29sbGFwc2VFeHBhbmRcIix3ZWlnaHQ6MH0pfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckRpc2FibGU9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmJsb2NrLmlzRW5hYmxlZCgpP0Jsb2NrbHkuTXNnLkRJU0FCTEVfQkxPQ0s6QmxvY2tseS5Nc2cuRU5BQkxFX0JMT0NLfSxwcmVjb25kaXRpb25GbjpmdW5jdGlvbihhKXthPWEuYmxvY2s7cmV0dXJuIWEuaXNJbkZseW91dCYmYS53b3Jrc3BhY2Uub3B0aW9ucy5kaXNhYmxlJiZhLmlzRWRpdGFibGUoKT9hLmdldEluaGVyaXRlZERpc2FibGVkKCk/XCJkaXNhYmxlZFwiOlwiZW5hYmxlZFwiOlwiaGlkZGVuXCJ9LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2E9YS5ibG9jazt2YXIgYj1CbG9ja2x5LkV2ZW50cy5nZXRHcm91cCgpO2J8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTthLnNldEVuYWJsZWQoIWEuaXNFbmFibGVkKCkpO2J8fEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCExKX0sXG5zY29wZVR5cGU6QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5CTE9DSyxpZDpcImJsb2NrRGlzYWJsZVwiLHdlaWdodDowfSl9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyRGVsZXRlPWZ1bmN0aW9uKCl7QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKHtkaXNwbGF5VGV4dDpmdW5jdGlvbihhKXt2YXIgYj1hLmJsb2NrO2E9Yi5nZXREZXNjZW5kYW50cyghMSkubGVuZ3RoOyhiPWIuZ2V0TmV4dEJsb2NrKCkpJiYoYS09Yi5nZXREZXNjZW5kYW50cyghMSkubGVuZ3RoKTtyZXR1cm4gMT09YT9CbG9ja2x5Lk1zZy5ERUxFVEVfQkxPQ0s6QmxvY2tseS5Nc2cuREVMRVRFX1hfQkxPQ0tTLnJlcGxhY2UoXCIlMVwiLFN0cmluZyhhKSl9LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe3JldHVybiFhLmJsb2NrLmlzSW5GbHlvdXQmJmEuYmxvY2suaXNEZWxldGFibGUoKT9cImVuYWJsZWRcIjpcImhpZGRlblwifSxjYWxsYmFjazpmdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMCk7YS5ibG9jay5kaXNwb3NlKCEwLCEwKTtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSl9LFxuc2NvcGVUeXBlOkJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5TY29wZVR5cGUuQkxPQ0ssaWQ6XCJibG9ja0RlbGV0ZVwiLHdlaWdodDowfSl9O0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckhlbHA9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoe2Rpc3BsYXlUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuTXNnLkhFTFB9LHByZWNvbmRpdGlvbkZuOmZ1bmN0aW9uKGEpe2E9YS5ibG9jaztyZXR1cm4oXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oZWxwVXJsP2EuaGVscFVybCgpOmEuaGVscFVybCk/XCJlbmFibGVkXCI6XCJoaWRkZW5cIn0sY2FsbGJhY2s6ZnVuY3Rpb24oYSl7YS5ibG9jay5zaG93SGVscCgpfSxzY29wZVR5cGU6QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5CTE9DSyxpZDpcImJsb2NrSGVscFwiLHdlaWdodDowfSl9O1xuQmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyQmxvY2tPcHRpb25zXz1mdW5jdGlvbigpe0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckR1cGxpY2F0ZSgpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckNvbW1lbnQoKTtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJJbmxpbmUoKTtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJDb2xsYXBzZUV4cGFuZEJsb2NrKCk7QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyRGlzYWJsZSgpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckRlbGV0ZSgpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckhlbHAoKX07QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyRGVmYXVsdE9wdGlvbnM9ZnVuY3Rpb24oKXtCbG9ja2x5LkNvbnRleHRNZW51SXRlbXMucmVnaXN0ZXJXb3Jrc3BhY2VPcHRpb25zXygpO0Jsb2NrbHkuQ29udGV4dE1lbnVJdGVtcy5yZWdpc3RlckJsb2NrT3B0aW9uc18oKX07QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5PWZ1bmN0aW9uKCl7QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnJlZ2lzdHJ5PXRoaXM7dGhpcy5yZWdpc3RyeV89e307QmxvY2tseS5Db250ZXh0TWVudUl0ZW1zLnJlZ2lzdGVyRGVmYXVsdE9wdGlvbnMoKX07QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZT17QkxPQ0s6XCJibG9ja1wiLFdPUktTUEFDRTpcIndvcmtzcGFjZVwifTtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucmVnaXN0cnk9bnVsbDtCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGEpe2lmKHRoaXMucmVnaXN0cnlfW2EuaWRdKXRocm93IEVycm9yKCdNZW51IGl0ZW0gd2l0aCBpZCBcIicrYS5pZCsnXCIgaXMgYWxyZWFkeSByZWdpc3RlcmVkLicpO3RoaXMucmVnaXN0cnlfW2EuaWRdPWF9O1xuQmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGEpe2lmKHRoaXMucmVnaXN0cnlfW2FdKWRlbGV0ZSB0aGlzLnJlZ2lzdHJ5X1thXTtlbHNlIHRocm93IEVycm9yKCdNZW51IGl0ZW0gd2l0aCBpZCBcIicrYSsnXCIgbm90IGZvdW5kLicpO307QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnByb3RvdHlwZS5nZXRJdGVtPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlZ2lzdHJ5X1thXT90aGlzLnJlZ2lzdHJ5X1thXTpudWxsfTtcbkJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5wcm90b3R5cGUuZ2V0Q29udGV4dE1lbnVPcHRpb25zPWZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD10aGlzLnJlZ2lzdHJ5XztPYmplY3Qua2V5cyhkKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2U9ZFtlXTtpZihhPT1lLnNjb3BlVHlwZSl7dmFyIGY9ZS5wcmVjb25kaXRpb25GbihiKTtcImhpZGRlblwiIT1mJiYoZT17dGV4dDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmRpc3BsYXlUZXh0P2UuZGlzcGxheVRleHQoYik6ZS5kaXNwbGF5VGV4dCxlbmFibGVkOlwiZW5hYmxlZFwiPT1mLGNhbGxiYWNrOmUuY2FsbGJhY2ssc2NvcGU6Yix3ZWlnaHQ6ZS53ZWlnaHR9LGMucHVzaChlKSl9fSk7Yy5zb3J0KGZ1bmN0aW9uKGUsZil7cmV0dXJuIGUud2VpZ2h0LWYud2VpZ2h0fSk7cmV0dXJuIGN9O25ldyBCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnk7QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLmRiXz1hLndvcmtzcGFjZS5jb25uZWN0aW9uREJMaXN0W2JdO3RoaXMuZGJPcHBvc2l0ZV89YS53b3Jrc3BhY2UuY29ubmVjdGlvbkRCTGlzdFtCbG9ja2x5Lk9QUE9TSVRFX1RZUEVbYl1dO3RoaXMub2Zmc2V0SW5CbG9ja189bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZSgwLDApO3RoaXMudHJhY2tlZFN0YXRlXz1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuV0lMTF9UUkFDSzt0aGlzLnRhcmdldENvbm5lY3Rpb249bnVsbH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24sQmxvY2tseS5Db25uZWN0aW9uKTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLlRyYWNrZWRTdGF0ZT17V0lMTF9UUkFDSzotMSxVTlRSQUNLRUQ6MCxUUkFDS0VEOjF9O0Jsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uc3VwZXJDbGFzc18uZGlzcG9zZS5jYWxsKHRoaXMpO3RoaXMudHJhY2tlZFN0YXRlXz09QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uVHJhY2tlZFN0YXRlLlRSQUNLRUQmJnRoaXMuZGJfLnJlbW92ZUNvbm5lY3Rpb24odGhpcyx0aGlzLnkpfTtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U291cmNlQmxvY2s9ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uc3VwZXJDbGFzc18uZ2V0U291cmNlQmxvY2suY2FsbCh0aGlzKX07QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLnRhcmdldEJsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnN1cGVyQ2xhc3NfLnRhcmdldEJsb2NrLmNhbGwodGhpcyl9O1xuQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLmRpc3RhbmNlRnJvbT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54O2E9dGhpcy55LWEueTtyZXR1cm4gTWF0aC5zcXJ0KGIqYithKmEpfTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5idW1wQXdheUZyb209ZnVuY3Rpb24oYSl7aWYoIXRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5pc0RyYWdnaW5nKCkpe3ZhciBiPXRoaXMuc291cmNlQmxvY2tfLmdldFJvb3RCbG9jaygpO2lmKCFiLmlzSW5GbHlvdXQpe3ZhciBjPSExO2lmKCFiLmlzTW92YWJsZSgpKXtiPWEuZ2V0U291cmNlQmxvY2soKS5nZXRSb290QmxvY2soKTtpZighYi5pc01vdmFibGUoKSlyZXR1cm47YT10aGlzO2M9ITB9dmFyIGQ9QmxvY2tseS5zZWxlY3RlZD09YjtkfHxiLmFkZFNlbGVjdCgpO3ZhciBlPWEueCtCbG9ja2x5LlNOQVBfUkFESVVTK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpCbG9ja2x5LkJVTVBfUkFORE9NTkVTUyktdGhpcy54LGY9YS55K0Jsb2NrbHkuU05BUF9SQURJVVMrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKkJsb2NrbHkuQlVNUF9SQU5ET01ORVNTKS10aGlzLnk7YyYmKGY9LWYpO2IuUlRMJiYoZT1hLngtXG5CbG9ja2x5LlNOQVBfUkFESVVTLU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpCbG9ja2x5LkJVTVBfUkFORE9NTkVTUyktdGhpcy54KTtiLm1vdmVCeShlLGYpO2R8fGIucmVtb3ZlU2VsZWN0KCl9fX07XG5CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKGEsYil7dGhpcy50cmFja2VkU3RhdGVfPT1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuV0lMTF9UUkFDSz8odGhpcy5kYl8uYWRkQ29ubmVjdGlvbih0aGlzLGIpLHRoaXMudHJhY2tlZFN0YXRlXz1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuVFJBQ0tFRCk6dGhpcy50cmFja2VkU3RhdGVfPT1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuVFJBQ0tFRCYmKHRoaXMuZGJfLnJlbW92ZUNvbm5lY3Rpb24odGhpcyx0aGlzLnkpLHRoaXMuZGJfLmFkZENvbm5lY3Rpb24odGhpcyxiKSk7dGhpcy54PWE7dGhpcy55PWJ9O0Jsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5tb3ZlQnk9ZnVuY3Rpb24oYSxiKXt0aGlzLm1vdmVUbyh0aGlzLngrYSx0aGlzLnkrYil9O1xuQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLm1vdmVUb09mZnNldD1mdW5jdGlvbihhKXt0aGlzLm1vdmVUbyhhLngrdGhpcy5vZmZzZXRJbkJsb2NrXy54LGEueSt0aGlzLm9mZnNldEluQmxvY2tfLnkpfTtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0T2Zmc2V0SW5CbG9jaz1mdW5jdGlvbihhLGIpe3RoaXMub2Zmc2V0SW5CbG9ja18ueD1hO3RoaXMub2Zmc2V0SW5CbG9ja18ueT1ifTtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0T2Zmc2V0SW5CbG9jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZnNldEluQmxvY2tffTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS50aWdodGVuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50YXJnZXRDb25uZWN0aW9uLngtdGhpcy54LGI9dGhpcy50YXJnZXRDb25uZWN0aW9uLnktdGhpcy55O2lmKDAhPWF8fDAhPWIpe3ZhciBjPXRoaXMudGFyZ2V0QmxvY2soKSxkPWMuZ2V0U3ZnUm9vdCgpO2lmKCFkKXRocm93IEVycm9yKFwiYmxvY2sgaXMgbm90IHJlbmRlcmVkLlwiKTtkPUJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWShkKTtjLmdldFN2Z1Jvb3QoKS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIisoZC54LWEpK1wiLFwiKyhkLnktYikrXCIpXCIpO2MubW92ZUNvbm5lY3Rpb25zKC1hLC1iKX19O0Jsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5jbG9zZXN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZGJPcHBvc2l0ZV8uc2VhcmNoRm9yQ2xvc2VzdCh0aGlzLGEsYil9O1xuQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLmhpZ2hsaWdodD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpO3ZhciBiPWEuc2hhcGVGb3IodGhpcyk7dGhpcy50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFfHx0aGlzLnR5cGU9PUJsb2NrbHkuT1VUUFVUX1ZBTFVFPyhhPWEuVEFCX09GRlNFVF9GUk9NX1RPUCxiPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KDAsLWEpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixhKStiLnBhdGhEb3duK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixhKSk6KGE9YS5OT1RDSF9PRkZTRVRfTEVGVC1hLkNPUk5FUl9SQURJVVMsYj1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeSgtYSwwKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsYSkrYi5wYXRoTGVmdCtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsXG5hKSk7YT10aGlzLnNvdXJjZUJsb2NrXy5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCk7QmxvY2tseS5Db25uZWN0aW9uLmhpZ2hsaWdodGVkUGF0aF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5QQVRILHtcImNsYXNzXCI6XCJibG9ja2x5SGlnaGxpZ2h0ZWRDb25uZWN0aW9uUGF0aFwiLGQ6Yix0cmFuc2Zvcm06XCJ0cmFuc2xhdGUoXCIrKHRoaXMueC1hLngpK1wiLFwiKyh0aGlzLnktYS55KStcIilcIisodGhpcy5zb3VyY2VCbG9ja18uUlRMP1wiIHNjYWxlKC0xIDEpXCI6XCJcIil9LHRoaXMuc291cmNlQmxvY2tfLmdldFN2Z1Jvb3QoKSl9O0Jsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS51bmhpZ2hsaWdodD1mdW5jdGlvbigpe0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUoQmxvY2tseS5Db25uZWN0aW9uLmhpZ2hsaWdodGVkUGF0aF8pO2RlbGV0ZSBCbG9ja2x5LkNvbm5lY3Rpb24uaGlnaGxpZ2h0ZWRQYXRoX307XG5CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0VHJhY2tpbmc9ZnVuY3Rpb24oYSl7YSYmdGhpcy50cmFja2VkU3RhdGVfPT1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuVFJBQ0tFRHx8IWEmJnRoaXMudHJhY2tlZFN0YXRlXz09QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uVHJhY2tlZFN0YXRlLlVOVFJBQ0tFRHx8dGhpcy5zb3VyY2VCbG9ja18uaXNJbkZseW91dHx8KGE/KHRoaXMuZGJfLmFkZENvbm5lY3Rpb24odGhpcyx0aGlzLnkpLHRoaXMudHJhY2tlZFN0YXRlXz1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuVFJBQ0tFRCk6KHRoaXMudHJhY2tlZFN0YXRlXz09QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uVHJhY2tlZFN0YXRlLlRSQUNLRUQmJnRoaXMuZGJfLnJlbW92ZUNvbm5lY3Rpb24odGhpcyx0aGlzLnkpLHRoaXMudHJhY2tlZFN0YXRlXz1CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5UcmFja2VkU3RhdGUuVU5UUkFDS0VEKSl9O1xuQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLnN0b3BUcmFja2luZ0FsbD1mdW5jdGlvbigpe3RoaXMuc2V0VHJhY2tpbmcoITEpO2lmKHRoaXMudGFyZ2V0Q29ubmVjdGlvbilmb3IodmFyIGE9dGhpcy50YXJnZXRCbG9jaygpLmdldERlc2NlbmRhbnRzKCExKSxiPTA7YjxhLmxlbmd0aDtiKyspe2Zvcih2YXIgYz1hW2JdLGQ9Yy5nZXRDb25uZWN0aW9uc18oITApLGU9MDtlPGQubGVuZ3RoO2UrKylkW2VdLnNldFRyYWNraW5nKCExKTtjPWMuZ2V0SWNvbnMoKTtmb3IoZT0wO2U8Yy5sZW5ndGg7ZSsrKWNbZV0uc2V0VmlzaWJsZSghMSl9fTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5zdGFydFRyYWNraW5nQWxsPWZ1bmN0aW9uKCl7dGhpcy5zZXRUcmFja2luZyghMCk7dmFyIGE9W107aWYodGhpcy50eXBlIT1CbG9ja2x5LklOUFVUX1ZBTFVFJiZ0aGlzLnR5cGUhPUJsb2NrbHkuTkVYVF9TVEFURU1FTlQpcmV0dXJuIGE7dmFyIGI9dGhpcy50YXJnZXRCbG9jaygpO2lmKGIpe2lmKGIuaXNDb2xsYXBzZWQoKSl7dmFyIGM9W107Yi5vdXRwdXRDb25uZWN0aW9uJiZjLnB1c2goYi5vdXRwdXRDb25uZWN0aW9uKTtiLm5leHRDb25uZWN0aW9uJiZjLnB1c2goYi5uZXh0Q29ubmVjdGlvbik7Yi5wcmV2aW91c0Nvbm5lY3Rpb24mJmMucHVzaChiLnByZXZpb3VzQ29ubmVjdGlvbil9ZWxzZSBjPWIuZ2V0Q29ubmVjdGlvbnNfKCEwKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylhLnB1c2guYXBwbHkoYSxjW2RdLnN0YXJ0VHJhY2tpbmdBbGwoKSk7YS5sZW5ndGh8fChhWzBdPWIpfXJldHVybiBhfTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5pc0Nvbm5lY3Rpb25BbGxvd2VkPWZ1bmN0aW9uKGEsYil7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5pc0Nvbm5lY3Rpb25BbGxvd2VkXCIsXCJKdWx5IDIwMjBcIixcIkp1bHkgMjAyMVwiLFwiQmxvY2tseS5Xb3Jrc3BhY2UucHJvdG90eXBlLmdldENvbm5lY3Rpb25DaGVja2VyKCkuY2FuQ29ubmVjdFwiKTtyZXR1cm4gdGhpcy5kaXN0YW5jZUZyb20oYSk+Yj8hMTpCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5zdXBlckNsYXNzXy5pc0Nvbm5lY3Rpb25BbGxvd2VkLmNhbGwodGhpcyxhKX07QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLm9uRmFpbGVkQ29ubmVjdD1mdW5jdGlvbihhKXt0aGlzLmJ1bXBBd2F5RnJvbShhKX07XG5CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuZGlzY29ubmVjdEludGVybmFsXz1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnN1cGVyQ2xhc3NfLmRpc2Nvbm5lY3RJbnRlcm5hbF8uY2FsbCh0aGlzLGEsYik7YS5yZW5kZXJlZCYmYS5yZW5kZXIoKTtiLnJlbmRlcmVkJiYoYi51cGRhdGVEaXNhYmxlZCgpLGIucmVuZGVyKCksYi5nZXRTdmdSb290KCkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpfTtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUucmVzcGF3blNoYWRvd189ZnVuY3Rpb24oKXtCbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5zdXBlckNsYXNzXy5yZXNwYXduU2hhZG93Xy5jYWxsKHRoaXMpO3ZhciBhPXRoaXMudGFyZ2V0QmxvY2soKTthJiYoYS5pbml0U3ZnKCksYS5yZW5kZXIoITEpLGE9dGhpcy5nZXRTb3VyY2VCbG9jaygpLGEucmVuZGVyZWQmJmEucmVuZGVyKCkpfTtcbkJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uLnByb3RvdHlwZS5uZWlnaGJvdXJzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRiT3Bwb3NpdGVfLmdldE5laWdoYm91cnModGhpcyxhKX07XG5CbG9ja2x5LlJlbmRlcmVkQ29ubmVjdGlvbi5wcm90b3R5cGUuY29ubmVjdF89ZnVuY3Rpb24oYSl7QmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24uc3VwZXJDbGFzc18uY29ubmVjdF8uY2FsbCh0aGlzLGEpO3ZhciBiPXRoaXMuZ2V0U291cmNlQmxvY2soKTthPWEuZ2V0U291cmNlQmxvY2soKTt2YXIgYz1iLnJlbmRlcmVkLGQ9YS5yZW5kZXJlZDtjJiZiLnVwZGF0ZURpc2FibGVkKCk7ZCYmYS51cGRhdGVEaXNhYmxlZCgpO2MmJmQmJih0aGlzLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlR8fHRoaXMudHlwZT09QmxvY2tseS5QUkVWSU9VU19TVEFURU1FTlQ/YS5yZW5kZXIoKTpiLnJlbmRlcigpKTtpZihiPWIuZ2V0SW5wdXRXaXRoQmxvY2soYSkpYj1iLmlzVmlzaWJsZSgpLGEuZ2V0U3ZnUm9vdCgpLnN0eWxlLmRpc3BsYXk9Yj9cImJsb2NrXCI6XCJub25lXCJ9O1xuQmxvY2tseS5SZW5kZXJlZENvbm5lY3Rpb24ucHJvdG90eXBlLm9uQ2hlY2tDaGFuZ2VkXz1mdW5jdGlvbigpeyF0aGlzLmlzQ29ubmVjdGVkKCl8fHRoaXMudGFyZ2V0Q29ubmVjdGlvbiYmdGhpcy5nZXRDb25uZWN0aW9uQ2hlY2tlcigpLmNhbkNvbm5lY3QodGhpcyx0aGlzLnRhcmdldENvbm5lY3Rpb24sITEpfHwoKHRoaXMuaXNTdXBlcmlvcigpP3RoaXMudGFyZ2V0QmxvY2soKTp0aGlzLnNvdXJjZUJsb2NrXykudW5wbHVnKCksdGhpcy5zb3VyY2VCbG9ja18uYnVtcE5laWdoYm91cnMoKSl9O0Jsb2NrbHkuTWFya2VyPWZ1bmN0aW9uKCl7dGhpcy5kcmF3ZXJfPXRoaXMuY3VyTm9kZV89dGhpcy5jb2xvdXI9bnVsbDt0aGlzLnR5cGU9XCJtYXJrZXJcIn07QmxvY2tseS5NYXJrZXIucHJvdG90eXBlLnNldERyYXdlcj1mdW5jdGlvbihhKXt0aGlzLmRyYXdlcl89YX07QmxvY2tseS5NYXJrZXIucHJvdG90eXBlLmdldERyYXdlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYXdlcl99O0Jsb2NrbHkuTWFya2VyLnByb3RvdHlwZS5nZXRDdXJOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VyTm9kZV99O0Jsb2NrbHkuTWFya2VyLnByb3RvdHlwZS5zZXRDdXJOb2RlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3VyTm9kZV87dGhpcy5jdXJOb2RlXz1hO3RoaXMuZHJhd2VyXyYmdGhpcy5kcmF3ZXJfLmRyYXcoYix0aGlzLmN1ck5vZGVfKX07XG5CbG9ja2x5Lk1hcmtlci5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbigpe3RoaXMuZHJhd2VyXyYmdGhpcy5kcmF3ZXJfLmRyYXcodGhpcy5jdXJOb2RlXyx0aGlzLmN1ck5vZGVfKX07QmxvY2tseS5NYXJrZXIucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXt0aGlzLmRyYXdlcl8mJnRoaXMuZHJhd2VyXy5oaWRlKCl9O0Jsb2NrbHkuTWFya2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5nZXREcmF3ZXIoKSYmdGhpcy5nZXREcmF3ZXIoKS5kaXNwb3NlKCl9O0Jsb2NrbHkuQ3Vyc29yPWZ1bmN0aW9uKCl7QmxvY2tseS5DdXJzb3Iuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJjdXJzb3JcIn07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5DdXJzb3IsQmxvY2tseS5NYXJrZXIpO0Jsb2NrbHkuQ3Vyc29yLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXJOb2RlKCk7aWYoIWEpcmV0dXJuIG51bGw7Zm9yKGE9YS5uZXh0KCk7YSYmYS5uZXh0KCkmJihhLmdldFR5cGUoKT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFR8fGEuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0spOylhPWEubmV4dCgpO2EmJnRoaXMuc2V0Q3VyTm9kZShhKTtyZXR1cm4gYX07XG5CbG9ja2x5LkN1cnNvci5wcm90b3R5cGUuaW49ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1ck5vZGUoKTtpZighYSlyZXR1cm4gbnVsbDtpZihhLmdldFR5cGUoKT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLlBSRVZJT1VTfHxhLmdldFR5cGUoKT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLk9VVFBVVClhPWEubmV4dCgpOyhhPWEuaW4oKSkmJnRoaXMuc2V0Q3VyTm9kZShhKTtyZXR1cm4gYX07QmxvY2tseS5DdXJzb3IucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1ck5vZGUoKTtpZighYSlyZXR1cm4gbnVsbDtmb3IoYT1hLnByZXYoKTthJiZhLnByZXYoKSYmKGEuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuTkVYVHx8YS5nZXRUeXBlKCk9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSyk7KWE9YS5wcmV2KCk7YSYmdGhpcy5zZXRDdXJOb2RlKGEpO3JldHVybiBhfTtcbkJsb2NrbHkuQ3Vyc29yLnByb3RvdHlwZS5vdXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1ck5vZGUoKTtpZighYSlyZXR1cm4gbnVsbDsoYT1hLm91dCgpKSYmYS5nZXRUeXBlKCk9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSyYmKGE9YS5wcmV2KCl8fGEpO2EmJnRoaXMuc2V0Q3VyTm9kZShhKTtyZXR1cm4gYX07XG5CbG9ja2x5LkN1cnNvci5wcm90b3R5cGUub25CbG9ja2x5QWN0aW9uPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZ2V0Q3VyTm9kZSgpJiZ0aGlzLmdldEN1ck5vZGUoKS5nZXRUeXBlKCk9PT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuRklFTEQmJnRoaXMuZ2V0Q3VyTm9kZSgpLmdldExvY2F0aW9uKCkub25CbG9ja2x5QWN0aW9uKGEpKXJldHVybiEwO3N3aXRjaChhLm5hbWUpe2Nhc2UgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLlBSRVZJT1VTOnJldHVybiB0aGlzLnByZXYoKSwhMDtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5PVVQ6cmV0dXJuIHRoaXMub3V0KCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTkVYVDpyZXR1cm4gdGhpcy5uZXh0KCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuSU46cmV0dXJuIHRoaXMuaW4oKSwhMDtkZWZhdWx0OnJldHVybiExfX07QmxvY2tseS5CYXNpY0N1cnNvcj1mdW5jdGlvbigpe0Jsb2NrbHkuQmFzaWNDdXJzb3Iuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5CYXNpY0N1cnNvcixCbG9ja2x5LkN1cnNvcik7QmxvY2tseS5CYXNpY0N1cnNvci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VyTm9kZSgpO2lmKCFhKXJldHVybiBudWxsOyhhPXRoaXMuZ2V0TmV4dE5vZGVfKGEsdGhpcy52YWxpZE5vZGVfKSkmJnRoaXMuc2V0Q3VyTm9kZShhKTtyZXR1cm4gYX07QmxvY2tseS5CYXNpY0N1cnNvci5wcm90b3R5cGUuaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0KCl9O1xuQmxvY2tseS5CYXNpY0N1cnNvci5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VyTm9kZSgpO2lmKCFhKXJldHVybiBudWxsOyhhPXRoaXMuZ2V0UHJldmlvdXNOb2RlXyhhLHRoaXMudmFsaWROb2RlXykpJiZ0aGlzLnNldEN1ck5vZGUoYSk7cmV0dXJuIGF9O0Jsb2NrbHkuQmFzaWNDdXJzb3IucHJvdG90eXBlLm91dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXYoKX07QmxvY2tseS5CYXNpY0N1cnNvci5wcm90b3R5cGUuZ2V0TmV4dE5vZGVfPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGM9YS5pbigpfHxhLm5leHQoKTtpZihiKGMpKXJldHVybiBjO2lmKGMpcmV0dXJuIHRoaXMuZ2V0TmV4dE5vZGVfKGMsYik7YT10aGlzLmZpbmRTaWJsaW5nT3JQYXJlbnRfKGEub3V0KCkpO3JldHVybiBiKGEpP2E6YT90aGlzLmdldE5leHROb2RlXyhhLGIpOm51bGx9O1xuQmxvY2tseS5CYXNpY0N1cnNvci5wcm90b3R5cGUuZ2V0UHJldmlvdXNOb2RlXz1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBudWxsO3ZhciBjPWEucHJldigpO2M9Yz90aGlzLmdldFJpZ2h0TW9zdENoaWxkXyhjKTphLm91dCgpO3JldHVybiBiKGMpP2M6Yz90aGlzLmdldFByZXZpb3VzTm9kZV8oYyxiKTpudWxsfTtCbG9ja2x5LkJhc2ljQ3Vyc29yLnByb3RvdHlwZS52YWxpZE5vZGVfPWZ1bmN0aW9uKGEpe3ZhciBiPSExO2E9YSYmYS5nZXRUeXBlKCk7aWYoYT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLk9VVFBVVHx8YT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLklOUFVUfHxhPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuRklFTER8fGE9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5ORVhUfHxhPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuUFJFVklPVVN8fGE9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0UpYj0hMDtyZXR1cm4gYn07XG5CbG9ja2x5LkJhc2ljQ3Vyc29yLnByb3RvdHlwZS5maW5kU2libGluZ09yUGFyZW50Xz1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4gbnVsbDt2YXIgYj1hLm5leHQoKTtyZXR1cm4gYj9iOnRoaXMuZmluZFNpYmxpbmdPclBhcmVudF8oYS5vdXQoKSl9O0Jsb2NrbHkuQmFzaWNDdXJzb3IucHJvdG90eXBlLmdldFJpZ2h0TW9zdENoaWxkXz1mdW5jdGlvbihhKXtpZighYS5pbigpKXJldHVybiBhO2ZvcihhPWEuaW4oKTthLm5leHQoKTspYT1hLm5leHQoKTtyZXR1cm4gdGhpcy5nZXRSaWdodE1vc3RDaGlsZF8oYSl9O0Jsb2NrbHkuVGFiTmF2aWdhdGVDdXJzb3I9ZnVuY3Rpb24oKXtCbG9ja2x5LlRhYk5hdmlnYXRlQ3Vyc29yLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuVGFiTmF2aWdhdGVDdXJzb3IsQmxvY2tseS5CYXNpY0N1cnNvcik7QmxvY2tseS5UYWJOYXZpZ2F0ZUN1cnNvci5wcm90b3R5cGUudmFsaWROb2RlXz1mdW5jdGlvbihhKXt2YXIgYj0hMSxjPWEmJmEuZ2V0VHlwZSgpO2EmJihhPWEuZ2V0TG9jYXRpb24oKSxjPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuRklFTEQmJmEmJmEuaXNUYWJOYXZpZ2FibGUoKSYmYS5pc0NsaWNrYWJsZSgpJiYoYj0hMCkpO3JldHVybiBifTtCbG9ja2x5LkJsb2NrU3ZnPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnN2Z0dyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse30sbnVsbCk7dGhpcy5zdmdHcm91cF8udHJhbnNsYXRlXz1cIlwiO3RoaXMuc3R5bGU9YS5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpLmdldEJsb2NrU3R5bGUobnVsbCk7dGhpcy5wYXRoT2JqZWN0PWEuZ2V0UmVuZGVyZXIoKS5tYWtlUGF0aE9iamVjdCh0aGlzLnN2Z0dyb3VwXyx0aGlzLnN0eWxlKTt0aGlzLnJlbmRlcklzSW5Qcm9ncmVzc189dGhpcy5yZW5kZXJlZD0hMTt0aGlzLndvcmtzcGFjZT1hO3RoaXMucHJldmlvdXNDb25uZWN0aW9uPXRoaXMubmV4dENvbm5lY3Rpb249dGhpcy5vdXRwdXRDb25uZWN0aW9uPW51bGw7dGhpcy51c2VEcmFnU3VyZmFjZV89QmxvY2tseS51dGlscy5pczNkU3VwcG9ydGVkKCkmJiEhYS5nZXRCbG9ja0RyYWdTdXJmYWNlKCk7dmFyIGQ9dGhpcy5wYXRoT2JqZWN0LnN2Z1BhdGg7XG5kLnRvb2x0aXA9dGhpcztCbG9ja2x5LlRvb2x0aXAuYmluZE1vdXNlRXZlbnRzKGQpO0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKTt0aGlzLnN2Z0dyb3VwXy5kYXRhc2V0JiYodGhpcy5zdmdHcm91cF8uZGF0YXNldC5pZD10aGlzLmlkKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5CbG9ja1N2ZyxCbG9ja2x5LkJsb2NrKTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5oZWlnaHQ9MDtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS53aWR0aD0wO0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLndhcm5pbmdUZXh0RGJfPW51bGw7QmxvY2tseS5CbG9ja1N2Zy5JTkxJTkU9LTE7QmxvY2tseS5CbG9ja1N2Zy5DT0xMQVBTRURfV0FSTklOR19JRD1cIlRFTVBfQ09MTEFQU0VEX1dBUk5JTkdfXCI7XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5pbml0U3ZnPWZ1bmN0aW9uKCl7aWYoIXRoaXMud29ya3NwYWNlLnJlbmRlcmVkKXRocm93IFR5cGVFcnJvcihcIldvcmtzcGFjZSBpcyBoZWFkbGVzcy5cIik7Zm9yKHZhciBhPTAsYjtiPXRoaXMuaW5wdXRMaXN0W2FdO2ErKyliLmluaXQoKTtiPXRoaXMuZ2V0SWNvbnMoKTtmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKWJbYV0uY3JlYXRlSWNvbigpO3RoaXMuYXBwbHlDb2xvdXIoKTt0aGlzLnBhdGhPYmplY3QudXBkYXRlTW92YWJsZSh0aGlzLmlzTW92YWJsZSgpKTthPXRoaXMuZ2V0U3ZnUm9vdCgpO3RoaXMud29ya3NwYWNlLm9wdGlvbnMucmVhZE9ubHl8fHRoaXMuZXZlbnRzSW5pdF98fCFhfHxCbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGEsXCJtb3VzZWRvd25cIix0aGlzLHRoaXMub25Nb3VzZURvd25fKTt0aGlzLmV2ZW50c0luaXRfPSEwO2EucGFyZW50Tm9kZXx8dGhpcy53b3Jrc3BhY2UuZ2V0Q2FudmFzKCkuYXBwZW5kQ2hpbGQoYSl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0Q29sb3VyU2Vjb25kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY29sb3VyU2Vjb25kYXJ5fTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5nZXRDb2xvdXJUZXJ0aWFyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0eWxlLmNvbG91clRlcnRpYXJ5fTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5nZXRDb2xvdXJTaGFkb3c9ZnVuY3Rpb24oKXtCbG9ja2x5LnV0aWxzLmRlcHJlY2F0aW9uLndhcm4oXCJCbG9ja1N2Zy5wcm90b3R5cGUuZ2V0Q29sb3VyU2hhZG93XCIsXCJKYW51YXJ5IDIwMjBcIixcIkphbnVhcnkgMjAyMVwiLFwic3R5bGUuY29sb3VyU2Vjb25kYXJ5XCIpO3JldHVybiB0aGlzLmdldENvbG91clNlY29uZGFyeSgpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmdldENvbG91ckJvcmRlcj1mdW5jdGlvbigpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkJsb2NrU3ZnLnByb3RvdHlwZS5nZXRDb2xvdXJCb3JkZXJcIixcIkphbnVhcnkgMjAyMFwiLFwiSmFudWFyeSAyMDIxXCIsXCJzdHlsZS5jb2xvdXJUZXJ0aWFyeVwiKTtyZXR1cm57Y29sb3VyQm9yZGVyOnRoaXMuZ2V0Q29sb3VyVGVydGlhcnkoKSxjb2xvdXJMaWdodDpudWxsLGNvbG91ckRhcms6bnVsbH19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5pc1NoYWRvdygpJiZ0aGlzLmdldFBhcmVudCgpKXRoaXMuZ2V0UGFyZW50KCkuc2VsZWN0KCk7ZWxzZSBpZihCbG9ja2x5LnNlbGVjdGVkIT10aGlzKXt2YXIgYT1udWxsO2lmKEJsb2NrbHkuc2VsZWN0ZWQpe2E9QmxvY2tseS5zZWxlY3RlZC5pZDtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCk7dHJ5e0Jsb2NrbHkuc2VsZWN0ZWQudW5zZWxlY3QoKX1maW5hbGx5e0Jsb2NrbHkuRXZlbnRzLmVuYWJsZSgpfX1hPW5ldyBCbG9ja2x5LkV2ZW50cy5VaShudWxsLFwic2VsZWN0ZWRcIixhLHRoaXMuaWQpO2Eud29ya3NwYWNlSWQ9dGhpcy53b3Jrc3BhY2UuaWQ7QmxvY2tseS5FdmVudHMuZmlyZShhKTtCbG9ja2x5LnNlbGVjdGVkPXRoaXM7dGhpcy5hZGRTZWxlY3QoKX19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUudW5zZWxlY3Q9ZnVuY3Rpb24oKXtpZihCbG9ja2x5LnNlbGVjdGVkPT10aGlzKXt2YXIgYT1uZXcgQmxvY2tseS5FdmVudHMuVWkobnVsbCxcInNlbGVjdGVkXCIsdGhpcy5pZCxudWxsKTthLndvcmtzcGFjZUlkPXRoaXMud29ya3NwYWNlLmlkO0Jsb2NrbHkuRXZlbnRzLmZpcmUoYSk7QmxvY2tseS5zZWxlY3RlZD1udWxsO3RoaXMucmVtb3ZlU2VsZWN0KCl9fTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5tdXRhdG9yPW51bGw7QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuY29tbWVudD1udWxsO0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmNvbW1lbnRJY29uXz1udWxsO0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLndhcm5pbmc9bnVsbDtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmdldEljb25zPWZ1bmN0aW9uKCl7dmFyIGE9W107dGhpcy5tdXRhdG9yJiZhLnB1c2godGhpcy5tdXRhdG9yKTt0aGlzLmNvbW1lbnRJY29uXyYmYS5wdXNoKHRoaXMuY29tbWVudEljb25fKTt0aGlzLndhcm5pbmcmJmEucHVzaCh0aGlzLndhcm5pbmcpO3JldHVybiBhfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldFBhcmVudD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmVudEJsb2NrXztpZihhIT1iKXtCbG9ja2x5LnV0aWxzLmRvbS5zdGFydFRleHRXaWR0aENhY2hlKCk7QmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5zZXRQYXJlbnQuY2FsbCh0aGlzLGEpO0Jsb2NrbHkudXRpbHMuZG9tLnN0b3BUZXh0V2lkdGhDYWNoZSgpO3ZhciBjPXRoaXMuZ2V0U3ZnUm9vdCgpO2lmKCF0aGlzLndvcmtzcGFjZS5pc0NsZWFyaW5nJiZjKXt2YXIgZD10aGlzLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTthPyhhLmdldFN2Z1Jvb3QoKS5hcHBlbmRDaGlsZChjKSxhPXRoaXMuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpLHRoaXMubW92ZUNvbm5lY3Rpb25zKGEueC1kLngsYS55LWQueSkpOmImJih0aGlzLndvcmtzcGFjZS5nZXRDYW52YXMoKS5hcHBlbmRDaGlsZChjKSx0aGlzLnRyYW5zbGF0ZShkLngsZC55KSk7dGhpcy5hcHBseUNvbG91cigpfX19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWT1mdW5jdGlvbigpe3ZhciBhPTAsYj0wLGM9dGhpcy51c2VEcmFnU3VyZmFjZV8/dGhpcy53b3Jrc3BhY2UuZ2V0QmxvY2tEcmFnU3VyZmFjZSgpLmdldEdyb3VwKCk6bnVsbCxkPXRoaXMuZ2V0U3ZnUm9vdCgpO2lmKGQpe2Rve3ZhciBlPUJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWShkKTthKz1lLng7Yis9ZS55O3RoaXMudXNlRHJhZ1N1cmZhY2VfJiZ0aGlzLndvcmtzcGFjZS5nZXRCbG9ja0RyYWdTdXJmYWNlKCkuZ2V0Q3VycmVudEJsb2NrKCk9PWQmJihlPXRoaXMud29ya3NwYWNlLmdldEJsb2NrRHJhZ1N1cmZhY2UoKS5nZXRTdXJmYWNlVHJhbnNsYXRpb24oKSxhKz1lLngsYis9ZS55KTtkPWQucGFyZW50Tm9kZX13aGlsZShkJiZkIT10aGlzLndvcmtzcGFjZS5nZXRDYW52YXMoKSYmZCE9Yyl9cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYSxiKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5tb3ZlQnk9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnBhcmVudEJsb2NrXyl0aHJvdyBFcnJvcihcIkJsb2NrIGhhcyBwYXJlbnQuXCIpO3ZhciBjPUJsb2NrbHkuRXZlbnRzLmlzRW5hYmxlZCgpO2lmKGMpdmFyIGQ9bmV3IEJsb2NrbHkuRXZlbnRzLkJsb2NrTW92ZSh0aGlzKTt2YXIgZT10aGlzLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTt0aGlzLnRyYW5zbGF0ZShlLngrYSxlLnkrYik7dGhpcy5tb3ZlQ29ubmVjdGlvbnMoYSxiKTtjJiYoZC5yZWNvcmROZXcoKSxCbG9ja2x5LkV2ZW50cy5maXJlKGQpKTt0aGlzLndvcmtzcGFjZS5yZXNpemVDb250ZW50cygpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFN2Z1Jvb3QoKS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIithK1wiLFwiK2IrXCIpXCIpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLm1vdmVUb0RyYWdTdXJmYWNlPWZ1bmN0aW9uKCl7aWYodGhpcy51c2VEcmFnU3VyZmFjZV8pe3ZhciBhPXRoaXMuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3RoaXMuY2xlYXJUcmFuc2Zvcm1BdHRyaWJ1dGVzXygpO3RoaXMud29ya3NwYWNlLmdldEJsb2NrRHJhZ1N1cmZhY2UoKS50cmFuc2xhdGVTdXJmYWNlKGEueCxhLnkpOyhhPXRoaXMuZ2V0U3ZnUm9vdCgpKSYmdGhpcy53b3Jrc3BhY2UuZ2V0QmxvY2tEcmFnU3VyZmFjZSgpLnNldEJsb2Nrc0FuZFNob3coYSl9fTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCk7dGhpcy5tb3ZlQnkoYS54LWIueCxhLnktYi55KX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5tb3ZlT2ZmRHJhZ1N1cmZhY2U9ZnVuY3Rpb24oYSl7dGhpcy51c2VEcmFnU3VyZmFjZV8mJih0aGlzLnRyYW5zbGF0ZShhLngsYS55KSx0aGlzLndvcmtzcGFjZS5nZXRCbG9ja0RyYWdTdXJmYWNlKCkuY2xlYXJBbmRIaWRlKHRoaXMud29ya3NwYWNlLmdldENhbnZhcygpKSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLm1vdmVEdXJpbmdEcmFnPWZ1bmN0aW9uKGEpe3RoaXMudXNlRHJhZ1N1cmZhY2VfP3RoaXMud29ya3NwYWNlLmdldEJsb2NrRHJhZ1N1cmZhY2UoKS50cmFuc2xhdGVTdXJmYWNlKGEueCxhLnkpOih0aGlzLnN2Z0dyb3VwXy50cmFuc2xhdGVfPVwidHJhbnNsYXRlKFwiK2EueCtcIixcIithLnkrXCIpXCIsdGhpcy5zdmdHcm91cF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsdGhpcy5zdmdHcm91cF8udHJhbnNsYXRlXyt0aGlzLnN2Z0dyb3VwXy5za2V3XykpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmNsZWFyVHJhbnNmb3JtQXR0cmlidXRlc189ZnVuY3Rpb24oKXt0aGlzLmdldFN2Z1Jvb3QoKS5yZW1vdmVBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIil9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNuYXBUb0dyaWQ9ZnVuY3Rpb24oKXtpZih0aGlzLndvcmtzcGFjZSYmIXRoaXMud29ya3NwYWNlLmlzRHJhZ2dpbmcoKSYmIXRoaXMuZ2V0UGFyZW50KCkmJiF0aGlzLmlzSW5GbHlvdXQpe3ZhciBhPXRoaXMud29ya3NwYWNlLmdldEdyaWQoKTtpZihhJiZhLnNob3VsZFNuYXAoKSl7dmFyIGI9YS5nZXRTcGFjaW5nKCksYz1iLzIsZD10aGlzLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTthPU1hdGgucm91bmQoKGQueC1jKS9iKSpiK2MtZC54O2I9TWF0aC5yb3VuZCgoZC55LWMpL2IpKmIrYy1kLnk7YT1NYXRoLnJvdW5kKGEpO2I9TWF0aC5yb3VuZChiKTswPT1hJiYwPT1ifHx0aGlzLm1vdmVCeShhLGIpfX19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0YW5nbGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKSxiPXRoaXMuZ2V0SGVpZ2h0V2lkdGgoKTtpZih0aGlzLlJUTCl7dmFyIGM9YS54LWIud2lkdGg7dmFyIGQ9YS54fWVsc2UgYz1hLngsZD1hLngrYi53aWR0aDtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuUmVjdChhLnksYS55K2IuaGVpZ2h0LGMsZCl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbigpe3RoaXMucGF0aE9iamVjdC5jb25zdGFudHM9dGhpcy53b3Jrc3BhY2UuZ2V0UmVuZGVyZXIoKS5nZXRDb25zdGFudHMoKTtmb3IodmFyIGE9MCxiO2I9dGhpcy5pbnB1dExpc3RbYV07YSsrKWIubWFya0RpcnR5KCl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0Q29sbGFwc2VkPWZ1bmN0aW9uKGEpe3RoaXMuY29sbGFwc2VkXyE9YSYmKEJsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0Q29sbGFwc2VkLmNhbGwodGhpcyxhKSxhP3RoaXMucmVuZGVyZWQmJnRoaXMucmVuZGVyKCk6dGhpcy51cGRhdGVDb2xsYXBzZWRfKCkpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnVwZGF0ZUNvbGxhcHNlZF89ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pc0NvbGxhcHNlZCgpLGI9QmxvY2tseS5CbG9jay5DT0xMQVBTRURfSU5QVVRfTkFNRSxjPUJsb2NrbHkuQmxvY2suQ09MTEFQU0VEX0ZJRUxEX05BTUUsZD0wLGU7ZT10aGlzLmlucHV0TGlzdFtkXTtkKyspZS5uYW1lIT1iJiZlLnNldFZpc2libGUoIWEpO2lmKGEpe2U9dGhpcy5nZXRJY29ucygpO2ZvcihkPTA7YT1lW2RdO2QrKylhLnNldFZpc2libGUoITEpO2Q9dGhpcy50b1N0cmluZyhCbG9ja2x5LkNPTExBUFNFX0NIQVJTKTsoZT10aGlzLmdldEZpZWxkKGMpKT9lLnNldFZhbHVlKGQpOihlPXRoaXMuZ2V0SW5wdXQoYil8fHRoaXMuYXBwZW5kRHVtbXlJbnB1dChiKSxlLmFwcGVuZEZpZWxkKG5ldyBCbG9ja2x5LkZpZWxkTGFiZWwoZCksYykpfWVsc2UgdGhpcy5yZW1vdmVJbnB1dChiKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS50YWI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQmxvY2tseS5UYWJOYXZpZ2F0ZUN1cnNvcjtjLnNldEN1ck5vZGUoQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUZpZWxkTm9kZShhKSk7YT1jLmdldEN1ck5vZGUoKTtjLm9uQmxvY2tseUFjdGlvbihiP0Jsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTkVYVDpCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1BSRVZJT1VTKTsoYj1jLmdldEN1ck5vZGUoKSkmJmIhPT1hJiYoYi5nZXRMb2NhdGlvbigpLnNob3dFZGl0b3IoKSx0aGlzLndvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlJiZ0aGlzLndvcmtzcGFjZS5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKGIpKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5vbk1vdXNlRG93bl89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy53b3Jrc3BhY2UmJnRoaXMud29ya3NwYWNlLmdldEdlc3R1cmUoYSk7YiYmYi5oYW5kbGVCbG9ja1N0YXJ0KGEsdGhpcyl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNob3dIZWxwPWZ1bmN0aW9uKCl7dmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5oZWxwVXJsP3RoaXMuaGVscFVybCgpOnRoaXMuaGVscFVybDthJiZ3aW5kb3cub3BlbihhKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5nZW5lcmF0ZUNvbnRleHRNZW51PWZ1bmN0aW9uKCl7aWYodGhpcy53b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seXx8IXRoaXMuY29udGV4dE1lbnUpcmV0dXJuIG51bGw7dmFyIGE9QmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LnJlZ2lzdHJ5LmdldENvbnRleHRNZW51T3B0aW9ucyhCbG9ja2x5LkNvbnRleHRNZW51UmVnaXN0cnkuU2NvcGVUeXBlLkJMT0NLLHtibG9jazp0aGlzfSk7dGhpcy5jdXN0b21Db250ZXh0TWVudSYmdGhpcy5jdXN0b21Db250ZXh0TWVudShhKTtyZXR1cm4gYX07QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2hvd0NvbnRleHRNZW51PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2VuZXJhdGVDb250ZXh0TWVudSgpO2ImJmIubGVuZ3RoJiYoQmxvY2tseS5Db250ZXh0TWVudS5zaG93KGEsYix0aGlzLlJUTCksQmxvY2tseS5Db250ZXh0TWVudS5jdXJyZW50QmxvY2s9dGhpcyl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUubW92ZUNvbm5lY3Rpb25zPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5yZW5kZXJlZCl7Zm9yKHZhciBjPXRoaXMuZ2V0Q29ubmVjdGlvbnNfKCExKSxkPTA7ZDxjLmxlbmd0aDtkKyspY1tkXS5tb3ZlQnkoYSxiKTtjPXRoaXMuZ2V0SWNvbnMoKTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0uY29tcHV0ZUljb25Mb2NhdGlvbigpO2ZvcihkPTA7ZDx0aGlzLmNoaWxkQmxvY2tzXy5sZW5ndGg7ZCsrKXRoaXMuY2hpbGRCbG9ja3NfW2RdLm1vdmVDb25uZWN0aW9ucyhhLGIpfX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXREcmFnZ2luZz1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmdldFN2Z1Jvb3QoKTtiLnRyYW5zbGF0ZV89XCJcIjtiLnNrZXdfPVwiXCI7QmxvY2tseS5kcmFnZ2luZ0Nvbm5lY3Rpb25zPUJsb2NrbHkuZHJhZ2dpbmdDb25uZWN0aW9ucy5jb25jYXQodGhpcy5nZXRDb25uZWN0aW9uc18oITApKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyh0aGlzLnN2Z0dyb3VwXyxcImJsb2NrbHlEcmFnZ2luZ1wiKX1lbHNlIEJsb2NrbHkuZHJhZ2dpbmdDb25uZWN0aW9ucz1bXSxCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyh0aGlzLnN2Z0dyb3VwXyxcImJsb2NrbHlEcmFnZ2luZ1wiKTtmb3IoYj0wO2I8dGhpcy5jaGlsZEJsb2Nrc18ubGVuZ3RoO2IrKyl0aGlzLmNoaWxkQmxvY2tzX1tiXS5zZXREcmFnZ2luZyhhKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXRNb3ZhYmxlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0TW92YWJsZS5jYWxsKHRoaXMsYSk7dGhpcy5wYXRoT2JqZWN0LnVwZGF0ZU1vdmFibGUoYSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldEVkaXRhYmxlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0RWRpdGFibGUuY2FsbCh0aGlzLGEpO2E9dGhpcy5nZXRJY29ucygpO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udXBkYXRlRWRpdGFibGUoKX07QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0U2hhZG93PWZ1bmN0aW9uKGEpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0U2hhZG93LmNhbGwodGhpcyxhKTt0aGlzLmFwcGx5Q29sb3VyKCl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0SW5zZXJ0aW9uTWFya2VyPWZ1bmN0aW9uKGEpe3RoaXMuaXNJbnNlcnRpb25NYXJrZXJfIT1hJiYodGhpcy5pc0luc2VydGlvbk1hcmtlcl89YSkmJih0aGlzLnNldENvbG91cih0aGlzLndvcmtzcGFjZS5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpLklOU0VSVElPTl9NQVJLRVJfQ09MT1VSKSx0aGlzLnBhdGhPYmplY3QudXBkYXRlSW5zZXJ0aW9uTWFya2VyKCEwKSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmdldFN2Z1Jvb3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdmdHcm91cF99O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbihhLGIpe2lmKHRoaXMud29ya3NwYWNlKXtCbG9ja2x5LlRvb2x0aXAuZGlzcG9zZSgpO0Jsb2NrbHkuVG9vbHRpcC51bmJpbmRNb3VzZUV2ZW50cyh0aGlzLnBhdGhPYmplY3Quc3ZnUGF0aCk7QmxvY2tseS51dGlscy5kb20uc3RhcnRUZXh0V2lkdGhDYWNoZSgpO3ZhciBjPXRoaXMud29ya3NwYWNlO0Jsb2NrbHkuc2VsZWN0ZWQ9PXRoaXMmJih0aGlzLnVuc2VsZWN0KCksdGhpcy53b3Jrc3BhY2UuY2FuY2VsQ3VycmVudEdlc3R1cmUoKSk7QmxvY2tseS5Db250ZXh0TWVudS5jdXJyZW50QmxvY2s9PXRoaXMmJkJsb2NrbHkuQ29udGV4dE1lbnUuaGlkZSgpO3RoaXMud29ya3NwYWNlLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJkJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlQ3Vyc29yT25CbG9ja0RlbGV0ZSh0aGlzKTtiJiZ0aGlzLnJlbmRlcmVkJiYodGhpcy51bnBsdWcoYSksQmxvY2tseS5ibG9ja0FuaW1hdGlvbnMuZGlzcG9zZVVpRWZmZWN0KHRoaXMpKTtcbnRoaXMucmVuZGVyZWQ9ITE7aWYodGhpcy53YXJuaW5nVGV4dERiXyl7Zm9yKHZhciBkIGluIHRoaXMud2FybmluZ1RleHREYl8pY2xlYXJUaW1lb3V0KHRoaXMud2FybmluZ1RleHREYl9bZF0pO3RoaXMud2FybmluZ1RleHREYl89bnVsbH1iPXRoaXMuZ2V0SWNvbnMoKTtmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWJbZF0uZGlzcG9zZSgpO0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uZGlzcG9zZS5jYWxsKHRoaXMsISFhKTtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKHRoaXMuc3ZnR3JvdXBfKTtjLnJlc2l6ZUNvbnRlbnRzKCk7dGhpcy5zdmdHcm91cF89bnVsbDtCbG9ja2x5LnV0aWxzLmRvbS5zdG9wVGV4dFdpZHRoQ2FjaGUoKX19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUudG9Db3B5RGF0YT1mdW5jdGlvbigpe2lmKHRoaXMuaXNJbnNlcnRpb25NYXJrZXJfKXJldHVybiBudWxsO3ZhciBhPUJsb2NrbHkuWG1sLmJsb2NrVG9Eb20odGhpcywhMCk7QmxvY2tseS5YbWwuZGVsZXRlTmV4dChhKTt2YXIgYj10aGlzLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTthLnNldEF0dHJpYnV0ZShcInhcIix0aGlzLlJUTD8tYi54OmIueCk7YS5zZXRBdHRyaWJ1dGUoXCJ5XCIsYi55KTtyZXR1cm57eG1sOmEsc291cmNlOnRoaXMud29ya3NwYWNlLHR5cGVDb3VudHM6QmxvY2tseS51dGlscy5nZXRCbG9ja1R5cGVDb3VudHModGhpcywhMCl9fTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmFwcGx5Q29sb3VyPWZ1bmN0aW9uKCl7dGhpcy5wYXRoT2JqZWN0LmFwcGx5Q29sb3VyKHRoaXMpO2Zvcih2YXIgYT10aGlzLmdldEljb25zKCksYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0uYXBwbHlDb2xvdXIoKTtmb3IoYT0wO2I9dGhpcy5pbnB1dExpc3RbYV07YSsrKWZvcih2YXIgYz0wLGQ7ZD1iLmZpZWxkUm93W2NdO2MrKylkLmFwcGx5Q29sb3VyKCl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnVwZGF0ZURpc2FibGVkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDaGlsZHJlbighMSk7dGhpcy5hcHBseUNvbG91cigpO2lmKCF0aGlzLmlzQ29sbGFwc2VkKCkpZm9yKHZhciBiPTAsYztjPWFbYl07YisrKWMucmVuZGVyZWQmJmMudXBkYXRlRGlzYWJsZWQoKX07QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0Q29tbWVudEljb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21tZW50SWNvbl99O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0Q29tbWVudFRleHQ9ZnVuY3Rpb24oYSl7aWYoIUJsb2NrbHkuQ29tbWVudCl0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5Db21tZW50XCIpO3RoaXMuY29tbWVudE1vZGVsLnRleHQhPWEmJihCbG9ja2x5LkJsb2NrU3ZnLnN1cGVyQ2xhc3NfLnNldENvbW1lbnRUZXh0LmNhbGwodGhpcyxhKSxhPW51bGwhPWEsISF0aGlzLmNvbW1lbnRJY29uXz09YT90aGlzLmNvbW1lbnRJY29uXy51cGRhdGVUZXh0KCk6KGE/dGhpcy5jb21tZW50PXRoaXMuY29tbWVudEljb25fPW5ldyBCbG9ja2x5LkNvbW1lbnQodGhpcyk6KHRoaXMuY29tbWVudEljb25fLmRpc3Bvc2UoKSx0aGlzLmNvbW1lbnQ9dGhpcy5jb21tZW50SWNvbl89bnVsbCksdGhpcy5yZW5kZXJlZCYmKHRoaXMucmVuZGVyKCksdGhpcy5idW1wTmVpZ2hib3VycygpKSkpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldFdhcm5pbmdUZXh0PWZ1bmN0aW9uKGEsYil7aWYoIUJsb2NrbHkuV2FybmluZyl0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5XYXJuaW5nXCIpO3RoaXMud2FybmluZ1RleHREYl98fCh0aGlzLndhcm5pbmdUZXh0RGJfPU9iamVjdC5jcmVhdGUobnVsbCkpO3ZhciBjPWJ8fFwiXCI7aWYoYyl0aGlzLndhcm5pbmdUZXh0RGJfW2NdJiYoY2xlYXJUaW1lb3V0KHRoaXMud2FybmluZ1RleHREYl9bY10pLGRlbGV0ZSB0aGlzLndhcm5pbmdUZXh0RGJfW2NdKTtlbHNlIGZvcih2YXIgZCBpbiB0aGlzLndhcm5pbmdUZXh0RGJfKWNsZWFyVGltZW91dCh0aGlzLndhcm5pbmdUZXh0RGJfW2RdKSxkZWxldGUgdGhpcy53YXJuaW5nVGV4dERiX1tkXTtpZih0aGlzLndvcmtzcGFjZS5pc0RyYWdnaW5nKCkpe3ZhciBlPXRoaXM7dGhpcy53YXJuaW5nVGV4dERiX1tjXT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS53b3Jrc3BhY2UmJlxuKGRlbGV0ZSBlLndhcm5pbmdUZXh0RGJfW2NdLGUuc2V0V2FybmluZ1RleHQoYSxjKSl9LDEwMCl9ZWxzZXt0aGlzLmlzSW5GbHlvdXQmJihhPW51bGwpO2I9ITE7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2Q9dGhpcy5nZXRTdXJyb3VuZFBhcmVudCgpO2Zvcih2YXIgZj1udWxsO2Q7KWQuaXNDb2xsYXBzZWQoKSYmKGY9ZCksZD1kLmdldFN1cnJvdW5kUGFyZW50KCk7ZiYmZi5zZXRXYXJuaW5nVGV4dChCbG9ja2x5Lk1zZy5DT0xMQVBTRURfV0FSTklOR1NfV0FSTklORyxCbG9ja2x5LkJsb2NrU3ZnLkNPTExBUFNFRF9XQVJOSU5HX0lEKTt0aGlzLndhcm5pbmd8fCh0aGlzLndhcm5pbmc9bmV3IEJsb2NrbHkuV2FybmluZyh0aGlzKSxiPSEwKTt0aGlzLndhcm5pbmcuc2V0VGV4dChhLGMpfWVsc2UgdGhpcy53YXJuaW5nJiYhYz8odGhpcy53YXJuaW5nLmRpc3Bvc2UoKSxiPSEwKTp0aGlzLndhcm5pbmcmJihiPXRoaXMud2FybmluZy5nZXRUZXh0KCksdGhpcy53YXJuaW5nLnNldFRleHQoXCJcIixcbmMpLChkPXRoaXMud2FybmluZy5nZXRUZXh0KCkpfHx0aGlzLndhcm5pbmcuZGlzcG9zZSgpLGI9YiE9ZCk7YiYmdGhpcy5yZW5kZXJlZCYmKHRoaXMucmVuZGVyKCksdGhpcy5idW1wTmVpZ2hib3VycygpKX19O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldE11dGF0b3I9ZnVuY3Rpb24oYSl7dGhpcy5tdXRhdG9yJiZ0aGlzLm11dGF0b3IhPT1hJiZ0aGlzLm11dGF0b3IuZGlzcG9zZSgpO2EmJihhLnNldEJsb2NrKHRoaXMpLHRoaXMubXV0YXRvcj1hLGEuY3JlYXRlSWNvbigpKTt0aGlzLnJlbmRlcmVkJiYodGhpcy5yZW5kZXIoKSx0aGlzLmJ1bXBOZWlnaGJvdXJzKCkpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldERpc2FibGVkPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZGVwcmVjYXRpb24ud2FybihcIkJsb2NrU3ZnLnByb3RvdHlwZS5zZXREaXNhYmxlZFwiLFwiTWF5IDIwMTlcIixcIk1heSAyMDIwXCIsXCJCbG9ja1N2Zy5wcm90b3R5cGUuc2V0RW5hYmxlZFwiKTt0aGlzLnNldEVuYWJsZWQoIWEpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXRFbmFibGVkPWZ1bmN0aW9uKGEpe3RoaXMuaXNFbmFibGVkKCkhPWEmJihCbG9ja2x5LkJsb2NrU3ZnLnN1cGVyQ2xhc3NfLnNldEVuYWJsZWQuY2FsbCh0aGlzLGEpLHRoaXMucmVuZGVyZWQmJiF0aGlzLmdldEluaGVyaXRlZERpc2FibGVkKCkmJnRoaXMudXBkYXRlRGlzYWJsZWQoKSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldEhpZ2hsaWdodGVkPWZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyZWQmJnRoaXMucGF0aE9iamVjdC51cGRhdGVIaWdobGlnaHRlZChhKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5hZGRTZWxlY3Q9ZnVuY3Rpb24oKXt0aGlzLnBhdGhPYmplY3QudXBkYXRlU2VsZWN0ZWQoITApfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5yZW1vdmVTZWxlY3Q9ZnVuY3Rpb24oKXt0aGlzLnBhdGhPYmplY3QudXBkYXRlU2VsZWN0ZWQoITEpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXREZWxldGVTdHlsZT1mdW5jdGlvbihhKXt0aGlzLnBhdGhPYmplY3QudXBkYXRlRHJhZ2dpbmdEZWxldGUoYSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmdldENvbG91cj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0eWxlLmNvbG91clByaW1hcnl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0Q29sb3VyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0Q29sb3VyLmNhbGwodGhpcyxhKTthPXRoaXMud29ya3NwYWNlLmdldFJlbmRlcmVyKCkuZ2V0Q29uc3RhbnRzKCkuZ2V0QmxvY2tTdHlsZUZvckNvbG91cih0aGlzLmNvbG91cl8pO3RoaXMucGF0aE9iamVjdC5zZXRTdHlsZShhLnN0eWxlKTt0aGlzLnN0eWxlPWEuc3R5bGU7dGhpcy5zdHlsZU5hbWVfPWEubmFtZTt0aGlzLmFwcGx5Q29sb3VyKCl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0U3R5bGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy53b3Jrc3BhY2UuZ2V0UmVuZGVyZXIoKS5nZXRDb25zdGFudHMoKS5nZXRCbG9ja1N0eWxlKGEpO3RoaXMuc3R5bGVOYW1lXz1hO2lmKGIpdGhpcy5oYXQ9Yi5oYXQsdGhpcy5wYXRoT2JqZWN0LnNldFN0eWxlKGIpLHRoaXMuY29sb3VyXz1iLmNvbG91clByaW1hcnksdGhpcy5zdHlsZT1iLHRoaXMuYXBwbHlDb2xvdXIoKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBzdHlsZSBuYW1lOiBcIithKTt9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmJyaW5nVG9Gcm9udD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7ZG97dmFyIGI9YS5nZXRTdmdSb290KCksYz1iLnBhcmVudE5vZGUsZD1jLmNoaWxkTm9kZXM7ZFtkLmxlbmd0aC0xXSE9PWImJmMuYXBwZW5kQ2hpbGQoYik7YT1hLmdldFBhcmVudCgpfXdoaWxlKGEpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldFByZXZpb3VzU3RhdGVtZW50PWZ1bmN0aW9uKGEsYil7QmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5zZXRQcmV2aW91c1N0YXRlbWVudC5jYWxsKHRoaXMsYSxiKTt0aGlzLnJlbmRlcmVkJiYodGhpcy5yZW5kZXIoKSx0aGlzLmJ1bXBOZWlnaGJvdXJzKCkpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXROZXh0U3RhdGVtZW50PWZ1bmN0aW9uKGEsYil7QmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5zZXROZXh0U3RhdGVtZW50LmNhbGwodGhpcyxhLGIpO3RoaXMucmVuZGVyZWQmJih0aGlzLnJlbmRlcigpLHRoaXMuYnVtcE5laWdoYm91cnMoKSl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldE91dHB1dD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0T3V0cHV0LmNhbGwodGhpcyxhLGIpO3RoaXMucmVuZGVyZWQmJih0aGlzLnJlbmRlcigpLHRoaXMuYnVtcE5laWdoYm91cnMoKSl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0SW5wdXRzSW5saW5lPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uc2V0SW5wdXRzSW5saW5lLmNhbGwodGhpcyxhKTt0aGlzLnJlbmRlcmVkJiYodGhpcy5yZW5kZXIoKSx0aGlzLmJ1bXBOZWlnaGJvdXJzKCkpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5yZW1vdmVJbnB1dD1mdW5jdGlvbihhLGIpe2E9QmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5yZW1vdmVJbnB1dC5jYWxsKHRoaXMsYSxiKTt0aGlzLnJlbmRlcmVkJiYodGhpcy5yZW5kZXIoKSx0aGlzLmJ1bXBOZWlnaGJvdXJzKCkpO3JldHVybiBhfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLm1vdmVOdW1iZXJlZElucHV0QmVmb3JlPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5tb3ZlTnVtYmVyZWRJbnB1dEJlZm9yZS5jYWxsKHRoaXMsYSxiKTt0aGlzLnJlbmRlcmVkJiYodGhpcy5yZW5kZXIoKSx0aGlzLmJ1bXBOZWlnaGJvdXJzKCkpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5hcHBlbmRJbnB1dF89ZnVuY3Rpb24oYSxiKXthPUJsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uYXBwZW5kSW5wdXRfLmNhbGwodGhpcyxhLGIpO3RoaXMucmVuZGVyZWQmJih0aGlzLnJlbmRlcigpLHRoaXMuYnVtcE5laWdoYm91cnMoKSk7cmV0dXJuIGF9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuc2V0Q29ubmVjdGlvblRyYWNraW5nPWZ1bmN0aW9uKGEpe3RoaXMucHJldmlvdXNDb25uZWN0aW9uJiZ0aGlzLnByZXZpb3VzQ29ubmVjdGlvbi5zZXRUcmFja2luZyhhKTt0aGlzLm91dHB1dENvbm5lY3Rpb24mJnRoaXMub3V0cHV0Q29ubmVjdGlvbi5zZXRUcmFja2luZyhhKTtpZih0aGlzLm5leHRDb25uZWN0aW9uKXt0aGlzLm5leHRDb25uZWN0aW9uLnNldFRyYWNraW5nKGEpO3ZhciBiPXRoaXMubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKTtiJiZiLnNldENvbm5lY3Rpb25UcmFja2luZyhhKX1pZighdGhpcy5jb2xsYXBzZWRfKWZvcihiPTA7Yjx0aGlzLmlucHV0TGlzdC5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmlucHV0TGlzdFtiXS5jb25uZWN0aW9uO2MmJihjLnNldFRyYWNraW5nKGEpLChjPWMudGFyZ2V0QmxvY2soKSkmJmMuc2V0Q29ubmVjdGlvblRyYWNraW5nKGEpKX19O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvbnNfPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKGF8fHRoaXMucmVuZGVyZWQpaWYodGhpcy5vdXRwdXRDb25uZWN0aW9uJiZiLnB1c2godGhpcy5vdXRwdXRDb25uZWN0aW9uKSx0aGlzLnByZXZpb3VzQ29ubmVjdGlvbiYmYi5wdXNoKHRoaXMucHJldmlvdXNDb25uZWN0aW9uKSx0aGlzLm5leHRDb25uZWN0aW9uJiZiLnB1c2godGhpcy5uZXh0Q29ubmVjdGlvbiksYXx8IXRoaXMuY29sbGFwc2VkXyl7YT0wO2Zvcih2YXIgYztjPXRoaXMuaW5wdXRMaXN0W2FdO2ErKyljLmNvbm5lY3Rpb24mJmIucHVzaChjLmNvbm5lY3Rpb24pfXJldHVybiBifTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5sYXN0Q29ubmVjdGlvbkluU3RhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gQmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5sYXN0Q29ubmVjdGlvbkluU3RhY2suY2FsbCh0aGlzKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5nZXRNYXRjaGluZ0Nvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQmxvY2tseS5CbG9ja1N2Zy5zdXBlckNsYXNzXy5nZXRNYXRjaGluZ0Nvbm5lY3Rpb24uY2FsbCh0aGlzLGEsYil9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLm1ha2VDb25uZWN0aW9uXz1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuUmVuZGVyZWRDb25uZWN0aW9uKHRoaXMsYSl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuYnVtcE5laWdoYm91cnM9ZnVuY3Rpb24oKXtpZih0aGlzLndvcmtzcGFjZSYmIXRoaXMud29ya3NwYWNlLmlzRHJhZ2dpbmcoKSl7dmFyIGE9dGhpcy5nZXRSb290QmxvY2soKTtpZighYS5pc0luRmx5b3V0KWZvcih2YXIgYj10aGlzLmdldENvbm5lY3Rpb25zXyghMSksYz0wLGQ7ZD1iW2NdO2MrKyl7ZC5pc0Nvbm5lY3RlZCgpJiZkLmlzU3VwZXJpb3IoKSYmZC50YXJnZXRCbG9jaygpLmJ1bXBOZWlnaGJvdXJzKCk7Zm9yKHZhciBlPWQubmVpZ2hib3VycyhCbG9ja2x5LlNOQVBfUkFESVVTKSxmPTAsZztnPWVbZl07ZisrKWQuaXNDb25uZWN0ZWQoKSYmZy5pc0Nvbm5lY3RlZCgpfHxnLmdldFNvdXJjZUJsb2NrKCkuZ2V0Um9vdEJsb2NrKCkhPWEmJihkLmlzU3VwZXJpb3IoKT9nLmJ1bXBBd2F5RnJvbShkKTpkLmJ1bXBBd2F5RnJvbShnKSl9fX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zY2hlZHVsZVNuYXBBbmRCdW1wPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPUJsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCk7c2V0VGltZW91dChmdW5jdGlvbigpe0Jsb2NrbHkuRXZlbnRzLnNldEdyb3VwKGIpO2Euc25hcFRvR3JpZCgpO0Jsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCExKX0sQmxvY2tseS5CVU1QX0RFTEFZLzIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtCbG9ja2x5LkV2ZW50cy5zZXRHcm91cChiKTthLmJ1bXBOZWlnaGJvdXJzKCk7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpfSxCbG9ja2x5LkJVTVBfREVMQVkpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5wb3NpdGlvbk5lYXJDb25uZWN0aW9uPWZ1bmN0aW9uKGEsYil7YS50eXBlIT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UJiZhLnR5cGUhPUJsb2NrbHkuSU5QVVRfVkFMVUV8fHRoaXMubW92ZUJ5KGIueC1hLngsYi55LWEueSl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuQmxvY2tTdmcuc3VwZXJDbGFzc18uZ2V0UGFyZW50LmNhbGwodGhpcyl9O0Jsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLmdldFJvb3RCbG9jaz1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LkJsb2NrU3ZnLnN1cGVyQ2xhc3NfLmdldFJvb3RCbG9jay5jYWxsKHRoaXMpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihhKXtpZighdGhpcy5yZW5kZXJJc0luUHJvZ3Jlc3NfKXt0aGlzLnJlbmRlcklzSW5Qcm9ncmVzc189ITA7dHJ5e3RoaXMucmVuZGVyZWQ9ITA7QmxvY2tseS51dGlscy5kb20uc3RhcnRUZXh0V2lkdGhDYWNoZSgpO3RoaXMuaXNDb2xsYXBzZWQoKSYmdGhpcy51cGRhdGVDb2xsYXBzZWRfKCk7dGhpcy53b3Jrc3BhY2UuZ2V0UmVuZGVyZXIoKS5yZW5kZXIodGhpcyk7dGhpcy51cGRhdGVDb25uZWN0aW9uTG9jYXRpb25zXygpO2lmKCExIT09YSl7dmFyIGI9dGhpcy5nZXRQYXJlbnQoKTtiP2IucmVuZGVyKCEwKTp0aGlzLndvcmtzcGFjZS5yZXNpemVDb250ZW50cygpfUJsb2NrbHkudXRpbHMuZG9tLnN0b3BUZXh0V2lkdGhDYWNoZSgpO3RoaXMudXBkYXRlTWFya2Vyc18oKX1maW5hbGx5e3RoaXMucmVuZGVySXNJblByb2dyZXNzXz0hMX19fTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnVwZGF0ZU1hcmtlcnNfPWZ1bmN0aW9uKCl7dGhpcy53b3Jrc3BhY2Uua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSYmdGhpcy5wYXRoT2JqZWN0LmN1cnNvclN2ZyYmdGhpcy53b3Jrc3BhY2UuZ2V0Q3Vyc29yKCkuZHJhdygpO3RoaXMud29ya3NwYWNlLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJnRoaXMucGF0aE9iamVjdC5tYXJrZXJTdmcmJnRoaXMud29ya3NwYWNlLmdldE1hcmtlcihCbG9ja2x5Lm5hdmlnYXRpb24uTUFSS0VSX05BTUUpLmRyYXcoKX07XG5CbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS51cGRhdGVDb25uZWN0aW9uTG9jYXRpb25zXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3RoaXMucHJldmlvdXNDb25uZWN0aW9uJiZ0aGlzLnByZXZpb3VzQ29ubmVjdGlvbi5tb3ZlVG9PZmZzZXQoYSk7dGhpcy5vdXRwdXRDb25uZWN0aW9uJiZ0aGlzLm91dHB1dENvbm5lY3Rpb24ubW92ZVRvT2Zmc2V0KGEpO2Zvcih2YXIgYj0wO2I8dGhpcy5pbnB1dExpc3QubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5pbnB1dExpc3RbYl0uY29ubmVjdGlvbjtjJiYoYy5tb3ZlVG9PZmZzZXQoYSksYy5pc0Nvbm5lY3RlZCgpJiZjLnRpZ2h0ZW4oKSl9dGhpcy5uZXh0Q29ubmVjdGlvbiYmKHRoaXMubmV4dENvbm5lY3Rpb24ubW92ZVRvT2Zmc2V0KGEpLHRoaXMubmV4dENvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSYmdGhpcy5uZXh0Q29ubmVjdGlvbi50aWdodGVuKCkpfTtcbkJsb2NrbHkuQmxvY2tTdmcucHJvdG90eXBlLnNldEN1cnNvclN2Zz1mdW5jdGlvbihhKXt0aGlzLnBhdGhPYmplY3Quc2V0Q3Vyc29yU3ZnKGEpfTtCbG9ja2x5LkJsb2NrU3ZnLnByb3RvdHlwZS5zZXRNYXJrZXJTdmc9ZnVuY3Rpb24oYSl7dGhpcy5wYXRoT2JqZWN0LnNldE1hcmtlclN2ZyhhKX07QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZ2V0SGVpZ2h0V2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmhlaWdodCxiPXRoaXMud2lkdGgsYz10aGlzLmdldE5leHRCbG9jaygpO2lmKGMpe2M9Yy5nZXRIZWlnaHRXaWR0aCgpO3ZhciBkPXRoaXMud29ya3NwYWNlLmdldFJlbmRlcmVyKCkuZ2V0Q29uc3RhbnRzKCkuTk9UQ0hfSEVJR0hUO2ErPWMuaGVpZ2h0LWQ7Yj1NYXRoLm1heChiLGMud2lkdGgpfXJldHVybntoZWlnaHQ6YSx3aWR0aDpifX07QmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuZmFkZUZvclJlcGxhY2VtZW50PWZ1bmN0aW9uKGEpe3RoaXMucGF0aE9iamVjdC51cGRhdGVSZXBsYWNlbWVudEZhZGUoYSl9O1xuQmxvY2tseS5CbG9ja1N2Zy5wcm90b3R5cGUuaGlnaGxpZ2h0U2hhcGVGb3JJbnB1dD1mdW5jdGlvbihhLGIpe3RoaXMucGF0aE9iamVjdC51cGRhdGVTaGFwZUZvcklucHV0SGlnaGxpZ2h0KGEsYil9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudXNlRGVidWdnZXI9ITE7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5yZWdpc3Rlcj1mdW5jdGlvbihhLGIpe0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLlJFTkRFUkVSLGEsYil9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudW5yZWdpc3Rlcj1mdW5jdGlvbihhKXtCbG9ja2x5LnJlZ2lzdHJ5LnVucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLlJFTkRFUkVSLGEpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLnN0YXJ0RGVidWdnZXI9ZnVuY3Rpb24oKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLnVzZURlYnVnZ2VyPSEwfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLnN0b3BEZWJ1Z2dlcj1mdW5jdGlvbigpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudXNlRGVidWdnZXI9ITF9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5pbml0PWZ1bmN0aW9uKGEsYixjKXthPW5ldyAoQmxvY2tseS5yZWdpc3RyeS5nZXRDbGFzcyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuUkVOREVSRVIsYSkpKGEpO2EuaW5pdChiLGMpO3JldHVybiBhfTtCbG9ja2x5LkNvbm5lY3Rpb25EQj1mdW5jdGlvbihhKXt0aGlzLmNvbm5lY3Rpb25zXz1bXTt0aGlzLmNvbm5lY3Rpb25DaGVja2VyXz1hfTtCbG9ja2x5LkNvbm5lY3Rpb25EQi5wcm90b3R5cGUuYWRkQ29ubmVjdGlvbj1mdW5jdGlvbihhLGIpe2I9dGhpcy5jYWxjdWxhdGVJbmRleEZvcllQb3NfKGIpO3RoaXMuY29ubmVjdGlvbnNfLnNwbGljZShiLDAsYSl9O1xuQmxvY2tseS5Db25uZWN0aW9uREIucHJvdG90eXBlLmZpbmRJbmRleE9mQ29ubmVjdGlvbl89ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5jb25uZWN0aW9uc18ubGVuZ3RoKXJldHVybi0xO3ZhciBjPXRoaXMuY2FsY3VsYXRlSW5kZXhGb3JZUG9zXyhiKTtpZihjPj10aGlzLmNvbm5lY3Rpb25zXy5sZW5ndGgpcmV0dXJuLTE7Yj1hLnk7Zm9yKHZhciBkPWM7MDw9ZCYmdGhpcy5jb25uZWN0aW9uc19bZF0ueT09Yjspe2lmKHRoaXMuY29ubmVjdGlvbnNfW2RdPT1hKXJldHVybiBkO2QtLX1mb3IoO2M8dGhpcy5jb25uZWN0aW9uc18ubGVuZ3RoJiZ0aGlzLmNvbm5lY3Rpb25zX1tjXS55PT1iOyl7aWYodGhpcy5jb25uZWN0aW9uc19bY109PWEpcmV0dXJuIGM7YysrfXJldHVybi0xfTtcbkJsb2NrbHkuQ29ubmVjdGlvbkRCLnByb3RvdHlwZS5jYWxjdWxhdGVJbmRleEZvcllQb3NfPWZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNvbm5lY3Rpb25zXy5sZW5ndGgpcmV0dXJuIDA7Zm9yKHZhciBiPTAsYz10aGlzLmNvbm5lY3Rpb25zXy5sZW5ndGg7YjxjOyl7dmFyIGQ9TWF0aC5mbG9vcigoYitjKS8yKTtpZih0aGlzLmNvbm5lY3Rpb25zX1tkXS55PGEpYj1kKzE7ZWxzZSBpZih0aGlzLmNvbm5lY3Rpb25zX1tkXS55PmEpYz1kO2Vsc2V7Yj1kO2JyZWFrfX1yZXR1cm4gYn07QmxvY2tseS5Db25uZWN0aW9uREIucHJvdG90eXBlLnJlbW92ZUNvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXthPXRoaXMuZmluZEluZGV4T2ZDb25uZWN0aW9uXyhhLGIpO2lmKC0xPT1hKXRocm93IEVycm9yKFwiVW5hYmxlIHRvIGZpbmQgY29ubmVjdGlvbiBpbiBjb25uZWN0aW9uREIuXCIpO3RoaXMuY29ubmVjdGlvbnNfLnNwbGljZShhLDEpfTtcbkJsb2NrbHkuQ29ubmVjdGlvbkRCLnByb3RvdHlwZS5nZXROZWlnaGJvdXJzPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhsKXt2YXIgbT1lLWRbbF0ueCxuPWYtZFtsXS55O01hdGguc3FydChtKm0rbipuKTw9YiYmay5wdXNoKGRbbF0pO3JldHVybiBuPGJ9dmFyIGQ9dGhpcy5jb25uZWN0aW9uc18sZT1hLngsZj1hLnk7YT0wO2Zvcih2YXIgZz1kLmxlbmd0aC0yLGg9ZzthPGg7KWRbaF0ueTxmP2E9aDpnPWgsaD1NYXRoLmZsb29yKChhK2cpLzIpO3ZhciBrPVtdO2c9YT1oO2lmKGQubGVuZ3RoKXtmb3IoOzA8PWEmJmMoYSk7KWEtLTtkbyBnKys7d2hpbGUoZzxkLmxlbmd0aCYmYyhnKSl9cmV0dXJuIGt9O0Jsb2NrbHkuQ29ubmVjdGlvbkRCLnByb3RvdHlwZS5pc0luWVJhbmdlXz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIE1hdGguYWJzKHRoaXMuY29ubmVjdGlvbnNfW2FdLnktYik8PWN9O1xuQmxvY2tseS5Db25uZWN0aW9uREIucHJvdG90eXBlLnNlYXJjaEZvckNsb3Nlc3Q9ZnVuY3Rpb24oYSxiLGMpe2lmKCF0aGlzLmNvbm5lY3Rpb25zXy5sZW5ndGgpcmV0dXJue2Nvbm5lY3Rpb246bnVsbCxyYWRpdXM6Yn07dmFyIGQ9YS55LGU9YS54O2EueD1lK2MueDthLnk9ZCtjLnk7dmFyIGY9dGhpcy5jYWxjdWxhdGVJbmRleEZvcllQb3NfKGEueSk7Yz1udWxsO2Zvcih2YXIgZz1iLGgsaz1mLTE7MDw9ayYmdGhpcy5pc0luWVJhbmdlXyhrLGEueSxiKTspaD10aGlzLmNvbm5lY3Rpb25zX1trXSx0aGlzLmNvbm5lY3Rpb25DaGVja2VyXy5jYW5Db25uZWN0KGEsaCwhMCxnKSYmKGM9aCxnPWguZGlzdGFuY2VGcm9tKGEpKSxrLS07Zm9yKDtmPHRoaXMuY29ubmVjdGlvbnNfLmxlbmd0aCYmdGhpcy5pc0luWVJhbmdlXyhmLGEueSxiKTspaD10aGlzLmNvbm5lY3Rpb25zX1tmXSx0aGlzLmNvbm5lY3Rpb25DaGVja2VyXy5jYW5Db25uZWN0KGEsaCwhMCxnKSYmKGM9aCxnPWguZGlzdGFuY2VGcm9tKGEpKSxcbmYrKzthLng9ZTthLnk9ZDtyZXR1cm57Y29ubmVjdGlvbjpjLHJhZGl1czpnfX07QmxvY2tseS5Db25uZWN0aW9uREIuaW5pdD1mdW5jdGlvbihhKXt2YXIgYj1bXTtiW0Jsb2NrbHkuSU5QVVRfVkFMVUVdPW5ldyBCbG9ja2x5LkNvbm5lY3Rpb25EQihhKTtiW0Jsb2NrbHkuT1VUUFVUX1ZBTFVFXT1uZXcgQmxvY2tseS5Db25uZWN0aW9uREIoYSk7YltCbG9ja2x5Lk5FWFRfU1RBVEVNRU5UXT1uZXcgQmxvY2tseS5Db25uZWN0aW9uREIoYSk7YltCbG9ja2x5LlBSRVZJT1VTX1NUQVRFTUVOVF09bmV3IEJsb2NrbHkuQ29ubmVjdGlvbkRCKGEpO3JldHVybiBifTtCbG9ja2x5Lk1hcmtlck1hbmFnZXI9ZnVuY3Rpb24oYSl7dGhpcy5jdXJzb3JTdmdfPXRoaXMuY3Vyc29yXz1udWxsO3RoaXMubWFya2Vyc189e307dGhpcy53b3Jrc3BhY2VfPWF9O0Jsb2NrbHkuTWFya2VyTWFuYWdlci5wcm90b3R5cGUucmVnaXN0ZXJNYXJrZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcmtlcnNfW2FdJiZ0aGlzLnVucmVnaXN0ZXJNYXJrZXIoYSk7Yi5zZXREcmF3ZXIodGhpcy53b3Jrc3BhY2VfLmdldFJlbmRlcmVyKCkubWFrZU1hcmtlckRyYXdlcih0aGlzLndvcmtzcGFjZV8sYikpO3RoaXMuc2V0TWFya2VyU3ZnKGIuZ2V0RHJhd2VyKCkuY3JlYXRlRG9tKCkpO3RoaXMubWFya2Vyc19bYV09Yn07XG5CbG9ja2x5Lk1hcmtlck1hbmFnZXIucHJvdG90eXBlLnVucmVnaXN0ZXJNYXJrZXI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJrZXJzX1thXTtpZihiKWIuZGlzcG9zZSgpLGRlbGV0ZSB0aGlzLm1hcmtlcnNfW2FdO2Vsc2UgdGhyb3cgRXJyb3IoXCJNYXJrZXIgd2l0aCBpZCBcIithK1wiIGRvZXMgbm90IGV4aXN0LiBDYW4gb25seSB1bnJlZ2lzdGVybWFya2VycyB0aGF0IGV4aXN0LlwiKTt9O0Jsb2NrbHkuTWFya2VyTWFuYWdlci5wcm90b3R5cGUuZ2V0Q3Vyc29yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3Vyc29yX307QmxvY2tseS5NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5nZXRNYXJrZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFya2Vyc19bYV19O1xuQmxvY2tseS5NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5zZXRDdXJzb3I9ZnVuY3Rpb24oYSl7dGhpcy5jdXJzb3JfJiZ0aGlzLmN1cnNvcl8uZ2V0RHJhd2VyKCkmJnRoaXMuY3Vyc29yXy5nZXREcmF3ZXIoKS5kaXNwb3NlKCk7aWYodGhpcy5jdXJzb3JfPWEpYT10aGlzLndvcmtzcGFjZV8uZ2V0UmVuZGVyZXIoKS5tYWtlTWFya2VyRHJhd2VyKHRoaXMud29ya3NwYWNlXyx0aGlzLmN1cnNvcl8pLHRoaXMuY3Vyc29yXy5zZXREcmF3ZXIoYSksdGhpcy5zZXRDdXJzb3JTdmcodGhpcy5jdXJzb3JfLmdldERyYXdlcigpLmNyZWF0ZURvbSgpKX07QmxvY2tseS5NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5zZXRDdXJzb3JTdmc9ZnVuY3Rpb24oYSl7YT8odGhpcy53b3Jrc3BhY2VfLmdldEJsb2NrQ2FudmFzKCkuYXBwZW5kQ2hpbGQoYSksdGhpcy5jdXJzb3JTdmdfPWEpOnRoaXMuY3Vyc29yU3ZnXz1udWxsfTtcbkJsb2NrbHkuTWFya2VyTWFuYWdlci5wcm90b3R5cGUuc2V0TWFya2VyU3ZnPWZ1bmN0aW9uKGEpe2E/dGhpcy53b3Jrc3BhY2VfLmdldEJsb2NrQ2FudmFzKCkmJih0aGlzLmN1cnNvclN2Z18/dGhpcy53b3Jrc3BhY2VfLmdldEJsb2NrQ2FudmFzKCkuaW5zZXJ0QmVmb3JlKGEsdGhpcy5jdXJzb3JTdmdfKTp0aGlzLndvcmtzcGFjZV8uZ2V0QmxvY2tDYW52YXMoKS5hcHBlbmRDaGlsZChhKSk6dGhpcy5tYXJrZXJTdmdfPW51bGx9O0Jsb2NrbHkuTWFya2VyTWFuYWdlci5wcm90b3R5cGUudXBkYXRlTWFya2Vycz1mdW5jdGlvbigpe3RoaXMud29ya3NwYWNlXy5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlJiZ0aGlzLmN1cnNvclN2Z18mJnRoaXMud29ya3NwYWNlXy5nZXRDdXJzb3IoKS5kcmF3KCl9O1xuQmxvY2tseS5NYXJrZXJNYW5hZ2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPU9iamVjdC5rZXlzKHRoaXMubWFya2Vyc18pLGI9MCxjO2M9YVtiXTtiKyspdGhpcy51bnJlZ2lzdGVyTWFya2VyKGMpO3RoaXMubWFya2Vyc189bnVsbDt0aGlzLmN1cnNvcl8mJih0aGlzLmN1cnNvcl8uZGlzcG9zZSgpLHRoaXMuY3Vyc29yXz1udWxsKX07QmxvY2tseS5UaGVtZU1hbmFnZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLndvcmtzcGFjZV89YTt0aGlzLnRoZW1lXz1iO3RoaXMuc3Vic2NyaWJlZFdvcmtzcGFjZXNfPVtdO3RoaXMuY29tcG9uZW50REJfPU9iamVjdC5jcmVhdGUobnVsbCl9O0Jsb2NrbHkuVGhlbWVNYW5hZ2VyLnByb3RvdHlwZS5nZXRUaGVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRoZW1lX307XG5CbG9ja2x5LlRoZW1lTWFuYWdlci5wcm90b3R5cGUuc2V0VGhlbWU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50aGVtZV87dGhpcy50aGVtZV89YTtpZihhPXRoaXMud29ya3NwYWNlXy5nZXRJbmplY3Rpb25EaXYoKSliJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLGIuZ2V0Q2xhc3NOYW1lKCkpLEJsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy50aGVtZV8uZ2V0Q2xhc3NOYW1lKCkpO2ZvcihiPTA7YT10aGlzLnN1YnNjcmliZWRXb3Jrc3BhY2VzX1tiXTtiKyspYS5yZWZyZXNoVGhlbWUoKTtiPTA7YT1PYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudERCXyk7Zm9yKHZhciBjO2M9YVtiXTtiKyspZm9yKHZhciBkPTAsZTtlPXRoaXMuY29tcG9uZW50REJfW2NdW2RdO2QrKyl7dmFyIGY9ZS5lbGVtZW50O2U9ZS5wcm9wZXJ0eU5hbWU7dmFyIGc9dGhpcy50aGVtZV8mJnRoaXMudGhlbWVfLmdldENvbXBvbmVudFN0eWxlKGMpO2Yuc3R5bGVbZV09Z3x8XCJcIn1CbG9ja2x5LmhpZGVDaGFmZigpfTtcbkJsb2NrbHkuVGhlbWVNYW5hZ2VyLnByb3RvdHlwZS5zdWJzY3JpYmVXb3Jrc3BhY2U9ZnVuY3Rpb24oYSl7dGhpcy5zdWJzY3JpYmVkV29ya3NwYWNlc18ucHVzaChhKX07QmxvY2tseS5UaGVtZU1hbmFnZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlV29ya3NwYWNlPWZ1bmN0aW9uKGEpe2E9dGhpcy5zdWJzY3JpYmVkV29ya3NwYWNlc18uaW5kZXhPZihhKTtpZigwPmEpdGhyb3cgRXJyb3IoXCJDYW5ub3QgdW5zdWJzY3JpYmUgYSB3b3Jrc3BhY2UgdGhhdCBoYXNuJ3QgYmVlbiBzdWJzY3JpYmVkLlwiKTt0aGlzLnN1YnNjcmliZWRXb3Jrc3BhY2VzXy5zcGxpY2UoYSwxKX07XG5CbG9ja2x5LlRoZW1lTWFuYWdlci5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmNvbXBvbmVudERCX1tiXXx8KHRoaXMuY29tcG9uZW50REJfW2JdPVtdKTt0aGlzLmNvbXBvbmVudERCX1tiXS5wdXNoKHtlbGVtZW50OmEscHJvcGVydHlOYW1lOmN9KTtiPXRoaXMudGhlbWVfJiZ0aGlzLnRoZW1lXy5nZXRDb21wb25lbnRTdHlsZShiKTthLnN0eWxlW2NdPWJ8fFwiXCJ9O0Jsb2NrbHkuVGhlbWVNYW5hZ2VyLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj1PYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudERCXyksYz0wLGQ7ZD1iW2NdO2MrKyl7Zm9yKHZhciBlPXRoaXMuY29tcG9uZW50REJfW2RdLGY9ZS5sZW5ndGgtMTswPD1mO2YtLSllW2ZdLmVsZW1lbnQ9PT1hJiZlLnNwbGljZShmLDEpO3RoaXMuY29tcG9uZW50REJfW2RdLmxlbmd0aHx8ZGVsZXRlIHRoaXMuY29tcG9uZW50REJfW2RdfX07XG5CbG9ja2x5LlRoZW1lTWFuYWdlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29tcG9uZW50REJfPXRoaXMuc3Vic2NyaWJlZFdvcmtzcGFjZXNfPXRoaXMudGhlbWVfPXRoaXMub3duZXJfPW51bGx9O0Jsb2NrbHkuVG91Y2hHZXN0dXJlPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5Ub3VjaEdlc3R1cmUuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYik7dGhpcy5pc011bHRpVG91Y2hfPSExO3RoaXMuY2FjaGVkUG9pbnRzXz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuc3RhcnREaXN0YW5jZV89dGhpcy5wcmV2aW91c1NjYWxlXz0wO3RoaXMuaXNQaW5jaFpvb21FbmFibGVkXz10aGlzLm9uU3RhcnRXcmFwcGVyXz1udWxsfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LlRvdWNoR2VzdHVyZSxCbG9ja2x5Lkdlc3R1cmUpO0Jsb2NrbHkuVG91Y2hHZXN0dXJlLlpPT01fSU5fTVVMVElQTElFUj01O0Jsb2NrbHkuVG91Y2hHZXN0dXJlLlpPT01fT1VUX01VTFRJUExJRVI9NjtcbkJsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5kb1N0YXJ0PWZ1bmN0aW9uKGEpe3RoaXMuaXNQaW5jaFpvb21FbmFibGVkXz10aGlzLnN0YXJ0V29ya3NwYWNlXy5vcHRpb25zLnpvb21PcHRpb25zJiZ0aGlzLnN0YXJ0V29ya3NwYWNlXy5vcHRpb25zLnpvb21PcHRpb25zLnBpbmNoO0Jsb2NrbHkuVG91Y2hHZXN0dXJlLnN1cGVyQ2xhc3NfLmRvU3RhcnQuY2FsbCh0aGlzLGEpOyF0aGlzLmlzRW5kaW5nXyYmQmxvY2tseS5Ub3VjaC5pc1RvdWNoRXZlbnQoYSkmJnRoaXMuaGFuZGxlVG91Y2hTdGFydChhKX07XG5CbG9ja2x5LlRvdWNoR2VzdHVyZS5wcm90b3R5cGUuYmluZE1vdXNlRXZlbnRzPWZ1bmN0aW9uKGEpe3RoaXMub25TdGFydFdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZG9jdW1lbnQsXCJtb3VzZWRvd25cIixudWxsLHRoaXMuaGFuZGxlU3RhcnQuYmluZCh0aGlzKSwhMCk7dGhpcy5vbk1vdmVXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGRvY3VtZW50LFwibW91c2Vtb3ZlXCIsbnVsbCx0aGlzLmhhbmRsZU1vdmUuYmluZCh0aGlzKSwhMCk7dGhpcy5vblVwV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkb2N1bWVudCxcIm1vdXNldXBcIixudWxsLHRoaXMuaGFuZGxlVXAuYmluZCh0aGlzKSwhMCk7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9O1xuQmxvY2tseS5Ub3VjaEdlc3R1cmUucHJvdG90eXBlLmhhbmRsZVN0YXJ0PWZ1bmN0aW9uKGEpeyF0aGlzLmlzRHJhZ2dpbmcoKSYmQmxvY2tseS5Ub3VjaC5pc1RvdWNoRXZlbnQoYSkmJih0aGlzLmhhbmRsZVRvdWNoU3RhcnQoYSksdGhpcy5pc011bHRpVG91Y2goKSYmQmxvY2tseS5sb25nU3RvcF8oKSl9O0Jsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5oYW5kbGVNb3ZlPWZ1bmN0aW9uKGEpe3RoaXMuaXNEcmFnZ2luZygpP0Jsb2NrbHkuVG91Y2guc2hvdWxkSGFuZGxlRXZlbnQoYSkmJkJsb2NrbHkuVG91Y2hHZXN0dXJlLnN1cGVyQ2xhc3NfLmhhbmRsZU1vdmUuY2FsbCh0aGlzLGEpOnRoaXMuaXNNdWx0aVRvdWNoKCk/KEJsb2NrbHkuVG91Y2guaXNUb3VjaEV2ZW50KGEpJiZ0aGlzLmhhbmRsZVRvdWNoTW92ZShhKSxCbG9ja2x5LmxvbmdTdG9wXygpKTpCbG9ja2x5LlRvdWNoR2VzdHVyZS5zdXBlckNsYXNzXy5oYW5kbGVNb3ZlLmNhbGwodGhpcyxhKX07XG5CbG9ja2x5LlRvdWNoR2VzdHVyZS5wcm90b3R5cGUuaGFuZGxlVXA9ZnVuY3Rpb24oYSl7QmxvY2tseS5Ub3VjaC5pc1RvdWNoRXZlbnQoYSkmJiF0aGlzLmlzRHJhZ2dpbmcoKSYmdGhpcy5oYW5kbGVUb3VjaEVuZChhKTshdGhpcy5pc011bHRpVG91Y2goKXx8dGhpcy5pc0RyYWdnaW5nKCk/QmxvY2tseS5Ub3VjaC5zaG91bGRIYW5kbGVFdmVudChhKSYmQmxvY2tseS5Ub3VjaEdlc3R1cmUuc3VwZXJDbGFzc18uaGFuZGxlVXAuY2FsbCh0aGlzLGEpOihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmRpc3Bvc2UoKSl9O0Jsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5pc011bHRpVG91Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc011bHRpVG91Y2hffTtcbkJsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS5Ub3VjaEdlc3R1cmUuc3VwZXJDbGFzc18uZGlzcG9zZS5jYWxsKHRoaXMpO3RoaXMub25TdGFydFdyYXBwZXJfJiZCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uU3RhcnRXcmFwcGVyXyl9O0Jsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5oYW5kbGVUb3VjaFN0YXJ0PWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkuVG91Y2guZ2V0VG91Y2hJZGVudGlmaWVyRnJvbUV2ZW50KGEpO3RoaXMuY2FjaGVkUG9pbnRzX1tiXT10aGlzLmdldFRvdWNoUG9pbnQoYSk7Yj1PYmplY3Qua2V5cyh0aGlzLmNhY2hlZFBvaW50c18pOzI9PWIubGVuZ3RoJiYodGhpcy5zdGFydERpc3RhbmNlXz1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlzdGFuY2UodGhpcy5jYWNoZWRQb2ludHNfW2JbMF1dLHRoaXMuY2FjaGVkUG9pbnRzX1tiWzFdXSksdGhpcy5pc011bHRpVG91Y2hfPSEwLGEucHJldmVudERlZmF1bHQoKSl9O1xuQmxvY2tseS5Ub3VjaEdlc3R1cmUucHJvdG90eXBlLmhhbmRsZVRvdWNoTW92ZT1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LlRvdWNoLmdldFRvdWNoSWRlbnRpZmllckZyb21FdmVudChhKTt0aGlzLmNhY2hlZFBvaW50c19bYl09dGhpcy5nZXRUb3VjaFBvaW50KGEpO2I9T2JqZWN0LmtleXModGhpcy5jYWNoZWRQb2ludHNfKTt0aGlzLmlzUGluY2hab29tRW5hYmxlZF8mJjI9PT1iLmxlbmd0aD90aGlzLmhhbmRsZVBpbmNoXyhhKTpCbG9ja2x5LlRvdWNoR2VzdHVyZS5zdXBlckNsYXNzXy5oYW5kbGVNb3ZlLmNhbGwodGhpcyxhKX07XG5CbG9ja2x5LlRvdWNoR2VzdHVyZS5wcm90b3R5cGUuaGFuZGxlUGluY2hfPWZ1bmN0aW9uKGEpe3ZhciBiPU9iamVjdC5rZXlzKHRoaXMuY2FjaGVkUG9pbnRzXyk7Yj1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlzdGFuY2UodGhpcy5jYWNoZWRQb2ludHNfW2JbMF1dLHRoaXMuY2FjaGVkUG9pbnRzX1tiWzFdXSkvdGhpcy5zdGFydERpc3RhbmNlXztpZigwPHRoaXMucHJldmlvdXNTY2FsZV8mJkluZmluaXR5PnRoaXMucHJldmlvdXNTY2FsZV8pe3ZhciBjPWItdGhpcy5wcmV2aW91c1NjYWxlXztjPTA8Yz9jKkJsb2NrbHkuVG91Y2hHZXN0dXJlLlpPT01fSU5fTVVMVElQTElFUjpjKkJsb2NrbHkuVG91Y2hHZXN0dXJlLlpPT01fT1VUX01VTFRJUExJRVI7dmFyIGQ9dGhpcy5zdGFydFdvcmtzcGFjZV8sZT1CbG9ja2x5LnV0aWxzLm1vdXNlVG9TdmcoYSxkLmdldFBhcmVudFN2ZygpLGQuZ2V0SW52ZXJzZVNjcmVlbkNUTSgpKTtkLnpvb20oZS54LGUueSxjKX10aGlzLnByZXZpb3VzU2NhbGVfPVxuYjthLnByZXZlbnREZWZhdWx0KCl9O0Jsb2NrbHkuVG91Y2hHZXN0dXJlLnByb3RvdHlwZS5oYW5kbGVUb3VjaEVuZD1mdW5jdGlvbihhKXthPUJsb2NrbHkuVG91Y2guZ2V0VG91Y2hJZGVudGlmaWVyRnJvbUV2ZW50KGEpO3RoaXMuY2FjaGVkUG9pbnRzX1thXSYmZGVsZXRlIHRoaXMuY2FjaGVkUG9pbnRzX1thXTsyPk9iamVjdC5rZXlzKHRoaXMuY2FjaGVkUG9pbnRzXykubGVuZ3RoJiYodGhpcy5jYWNoZWRQb2ludHNfPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5wcmV2aW91c1NjYWxlXz0wKX07QmxvY2tseS5Ub3VjaEdlc3R1cmUucHJvdG90eXBlLmdldFRvdWNoUG9pbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhcnRXb3Jrc3BhY2VfP25ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS5wYWdlWD9hLnBhZ2VYOmEuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgsYS5wYWdlWT9hLnBhZ2VZOmEuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpOm51bGx9O0Jsb2NrbHkuV29ya3NwYWNlQXVkaW89ZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnRXb3Jrc3BhY2VfPWE7dGhpcy5TT1VORFNfPU9iamVjdC5jcmVhdGUobnVsbCl9O0Jsb2NrbHkuV29ya3NwYWNlQXVkaW8ucHJvdG90eXBlLmxhc3RTb3VuZF89bnVsbDtCbG9ja2x5LldvcmtzcGFjZUF1ZGlvLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5TT1VORFNfPXRoaXMucGFyZW50V29ya3NwYWNlXz1udWxsfTtcbkJsb2NrbHkuV29ya3NwYWNlQXVkaW8ucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSxiKXtpZihhLmxlbmd0aCl7dHJ5e3ZhciBjPW5ldyBCbG9ja2x5LnV0aWxzLmdsb2JhbC5BdWRpb31jYXRjaChoKXtyZXR1cm59Zm9yKHZhciBkLGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXSxnPWYubWF0Y2goL1xcLihcXHcrKSQvKTtpZihnJiZjLmNhblBsYXlUeXBlKFwiYXVkaW8vXCIrZ1sxXSkpe2Q9bmV3IEJsb2NrbHkudXRpbHMuZ2xvYmFsLkF1ZGlvKGYpO2JyZWFrfX1kJiZkLnBsYXkmJih0aGlzLlNPVU5EU19bYl09ZCl9fTtcbkJsb2NrbHkuV29ya3NwYWNlQXVkaW8ucHJvdG90eXBlLnByZWxvYWQ9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5TT1VORFNfKXt2YXIgYj10aGlzLlNPVU5EU19bYV07Yi52b2x1bWU9LjAxO3ZhciBjPWIucGxheSgpO3ZvaWQgMCE9PWM/Yy50aGVuKGIucGF1c2UpLmNhdGNoKGZ1bmN0aW9uKCl7fSk6Yi5wYXVzZSgpO2lmKEJsb2NrbHkudXRpbHMudXNlckFnZW50LklQQUR8fEJsb2NrbHkudXRpbHMudXNlckFnZW50LklQSE9ORSlicmVha319O1xuQmxvY2tseS5Xb3Jrc3BhY2VBdWRpby5wcm90b3R5cGUucGxheT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuU09VTkRTX1thXTtjPyhhPW5ldyBEYXRlLG51bGwhPXRoaXMubGFzdFNvdW5kXyYmYS10aGlzLmxhc3RTb3VuZF88QmxvY2tseS5TT1VORF9MSU1JVHx8KHRoaXMubGFzdFNvdW5kXz1hLGM9QmxvY2tseS51dGlscy51c2VyQWdlbnQuSVBBRHx8QmxvY2tseS51dGlscy51c2VyQWdlbnQuQU5EUk9JRD9jOmMuY2xvbmVOb2RlKCksYy52b2x1bWU9dm9pZCAwPT09Yj8xOmIsYy5wbGF5KCkpKTp0aGlzLnBhcmVudFdvcmtzcGFjZV8mJnRoaXMucGFyZW50V29ya3NwYWNlXy5nZXRBdWRpb01hbmFnZXIoKS5wbGF5KGEsYil9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnPWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LldvcmtzcGFjZVN2Zy5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5nZXRNZXRyaWNzPWEuZ2V0TWV0cmljc3x8QmxvY2tseS5Xb3Jrc3BhY2VTdmcuZ2V0VG9wTGV2ZWxXb3Jrc3BhY2VNZXRyaWNzXzt0aGlzLnNldE1ldHJpY3M9YS5zZXRNZXRyaWNzfHxCbG9ja2x5LldvcmtzcGFjZVN2Zy5zZXRUb3BMZXZlbFdvcmtzcGFjZU1ldHJpY3NfO3RoaXMuY29ubmVjdGlvbkRCTGlzdD1CbG9ja2x5LkNvbm5lY3Rpb25EQi5pbml0KHRoaXMuY29ubmVjdGlvbkNoZWNrZXIpO2ImJih0aGlzLmJsb2NrRHJhZ1N1cmZhY2VfPWIpO2MmJih0aGlzLndvcmtzcGFjZURyYWdTdXJmYWNlXz1jKTt0aGlzLnVzZVdvcmtzcGFjZURyYWdTdXJmYWNlXz0hIXRoaXMud29ya3NwYWNlRHJhZ1N1cmZhY2VfJiZCbG9ja2x5LnV0aWxzLmlzM2RTdXBwb3J0ZWQoKTt0aGlzLmhpZ2hsaWdodGVkQmxvY2tzXz1cbltdO3RoaXMuYXVkaW9NYW5hZ2VyXz1uZXcgQmxvY2tseS5Xb3Jrc3BhY2VBdWRpbyhhLnBhcmVudFdvcmtzcGFjZSk7dGhpcy5ncmlkXz10aGlzLm9wdGlvbnMuZ3JpZFBhdHRlcm4/bmV3IEJsb2NrbHkuR3JpZCh0aGlzLm9wdGlvbnMuZ3JpZFBhdHRlcm4sYS5ncmlkT3B0aW9ucyk6bnVsbDt0aGlzLm1hcmtlck1hbmFnZXJfPW5ldyBCbG9ja2x5Lk1hcmtlck1hbmFnZXIodGhpcyk7dGhpcy50b29sYm94Q2F0ZWdvcnlDYWxsYmFja3NfPXt9O3RoaXMuZmx5b3V0QnV0dG9uQ2FsbGJhY2tzXz17fTtCbG9ja2x5LlZhcmlhYmxlcyYmQmxvY2tseS5WYXJpYWJsZXMuZmx5b3V0Q2F0ZWdvcnkmJnRoaXMucmVnaXN0ZXJUb29sYm94Q2F0ZWdvcnlDYWxsYmFjayhCbG9ja2x5LlZBUklBQkxFX0NBVEVHT1JZX05BTUUsQmxvY2tseS5WYXJpYWJsZXMuZmx5b3V0Q2F0ZWdvcnkpO0Jsb2NrbHkuVmFyaWFibGVzRHluYW1pYyYmQmxvY2tseS5WYXJpYWJsZXNEeW5hbWljLmZseW91dENhdGVnb3J5JiZcbnRoaXMucmVnaXN0ZXJUb29sYm94Q2F0ZWdvcnlDYWxsYmFjayhCbG9ja2x5LlZBUklBQkxFX0RZTkFNSUNfQ0FURUdPUllfTkFNRSxCbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWMuZmx5b3V0Q2F0ZWdvcnkpO0Jsb2NrbHkuUHJvY2VkdXJlcyYmQmxvY2tseS5Qcm9jZWR1cmVzLmZseW91dENhdGVnb3J5JiYodGhpcy5yZWdpc3RlclRvb2xib3hDYXRlZ29yeUNhbGxiYWNrKEJsb2NrbHkuUFJPQ0VEVVJFX0NBVEVHT1JZX05BTUUsQmxvY2tseS5Qcm9jZWR1cmVzLmZseW91dENhdGVnb3J5KSx0aGlzLmFkZENoYW5nZUxpc3RlbmVyKEJsb2NrbHkuUHJvY2VkdXJlcy5tdXRhdG9yT3Blbkxpc3RlbmVyKSk7dGhpcy50aGVtZU1hbmFnZXJfPXRoaXMub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2U/dGhpcy5vcHRpb25zLnBhcmVudFdvcmtzcGFjZS5nZXRUaGVtZU1hbmFnZXIoKTpuZXcgQmxvY2tseS5UaGVtZU1hbmFnZXIodGhpcyx0aGlzLm9wdGlvbnMudGhlbWV8fEJsb2NrbHkuVGhlbWVzLkNsYXNzaWMpO1xudGhpcy50aGVtZU1hbmFnZXJfLnN1YnNjcmliZVdvcmtzcGFjZSh0aGlzKTt0aGlzLnJlbmRlcmVyXz1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLmluaXQodGhpcy5vcHRpb25zLnJlbmRlcmVyfHxcImdlcmFzXCIsdGhpcy5nZXRUaGVtZSgpLHRoaXMub3B0aW9ucy5yZW5kZXJlck92ZXJyaWRlcyk7dGhpcy5jYWNoZWRQYXJlbnRTdmdfPW51bGw7dGhpcy5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlPSExO3RoaXMudG9wQm91bmRlZEVsZW1lbnRzXz1bXX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5Xb3Jrc3BhY2VTdmcsQmxvY2tseS5Xb3Jrc3BhY2UpO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5yZXNpemVIYW5kbGVyV3JhcHBlcl89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVuZGVyZWQ9ITA7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmlzVmlzaWJsZV89ITA7XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaXNGbHlvdXQ9ITE7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmlzTXV0YXRvcj0hMTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVzaXplc0VuYWJsZWRfPSEwO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zY3JvbGxYPTA7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnNjcm9sbFk9MDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc3RhcnRTY3JvbGxYPTA7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnN0YXJ0U2Nyb2xsWT0wO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5kcmFnRGVsdGFYWV89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc2NhbGU9MTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUudHJhc2hjYW49bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc2Nyb2xsYmFyPW51bGw7XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZmx5b3V0Xz1udWxsO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS50b29sYm94Xz1udWxsO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5jdXJyZW50R2VzdHVyZV89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuYmxvY2tEcmFnU3VyZmFjZV89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUud29ya3NwYWNlRHJhZ1N1cmZhY2VfPW51bGw7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnVzZVdvcmtzcGFjZURyYWdTdXJmYWNlXz0hMTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaXNEcmFnU3VyZmFjZUFjdGl2ZV89ITE7QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmluamVjdGlvbkRpdl89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUubGFzdFJlY29yZGVkUGFnZVNjcm9sbF89bnVsbDtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS50YXJnZXRXb3Jrc3BhY2U9bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaW52ZXJzZVNjcmVlbkNUTV89bnVsbDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaW52ZXJzZVNjcmVlbkNUTURpcnR5Xz0hMDtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0TWFya2VyTWFuYWdlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcmtlck1hbmFnZXJffTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc2V0Q3Vyc29yU3ZnPWZ1bmN0aW9uKGEpe3RoaXMubWFya2VyTWFuYWdlcl8uc2V0Q3Vyc29yU3ZnKGEpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc2V0TWFya2VyU3ZnPWZ1bmN0aW9uKGEpe3RoaXMubWFya2VyTWFuYWdlcl8uc2V0TWFya2VyU3ZnKGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRNYXJrZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFya2VyTWFuYWdlcl8/dGhpcy5tYXJrZXJNYW5hZ2VyXy5nZXRNYXJrZXIoYSk6bnVsbH07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldEN1cnNvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcmtlck1hbmFnZXJfP3RoaXMubWFya2VyTWFuYWdlcl8uZ2V0Q3Vyc29yKCk6bnVsbH07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXJffTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0VGhlbWVNYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbWVNYW5hZ2VyX307QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldFRoZW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbWVNYW5hZ2VyXy5nZXRUaGVtZSgpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zZXRUaGVtZT1mdW5jdGlvbihhKXthfHwoYT1CbG9ja2x5LlRoZW1lcy5DbGFzc2ljKTt0aGlzLnRoZW1lTWFuYWdlcl8uc2V0VGhlbWUoYSl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlZnJlc2hUaGVtZT1mdW5jdGlvbigpe3RoaXMuc3ZnR3JvdXBfJiZ0aGlzLnJlbmRlcmVyXy5yZWZyZXNoRG9tKHRoaXMuc3ZnR3JvdXBfLHRoaXMuZ2V0VGhlbWUoKSk7dGhpcy51cGRhdGVCbG9ja1N0eWxlc18odGhpcy5nZXRBbGxCbG9ja3MoITEpLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gdm9pZCAwIT09Yi5nZXRTdHlsZU5hbWUoKX0pKTt0aGlzLnJlZnJlc2hUb29sYm94U2VsZWN0aW9uKCk7dGhpcy50b29sYm94XyYmdGhpcy50b29sYm94Xy5yZWZyZXNoVGhlbWUoKTt0aGlzLmlzVmlzaWJsZSgpJiZ0aGlzLnNldFZpc2libGUoITApO3ZhciBhPW5ldyBCbG9ja2x5LkV2ZW50cy5VaShudWxsLFwidGhlbWVcIixudWxsLG51bGwpO2Eud29ya3NwYWNlSWQ9dGhpcy5pZDtCbG9ja2x5LkV2ZW50cy5maXJlKGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS51cGRhdGVCbG9ja1N0eWxlc189ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYztjPWFbYl07YisrKXt2YXIgZD1jLmdldFN0eWxlTmFtZSgpO2QmJihjLnNldFN0eWxlKGQpLGMubXV0YXRvciYmYy5tdXRhdG9yLnVwZGF0ZUJsb2NrU3R5bGUoKSl9fTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0SW52ZXJzZVNjcmVlbkNUTT1mdW5jdGlvbigpe2lmKHRoaXMuaW52ZXJzZVNjcmVlbkNUTURpcnR5Xyl7dmFyIGE9dGhpcy5nZXRQYXJlbnRTdmcoKS5nZXRTY3JlZW5DVE0oKTthJiYodGhpcy5pbnZlcnNlU2NyZWVuQ1RNXz1hLmludmVyc2UoKSx0aGlzLmludmVyc2VTY3JlZW5DVE1EaXJ0eV89ITEpfXJldHVybiB0aGlzLmludmVyc2VTY3JlZW5DVE1ffTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS51cGRhdGVJbnZlcnNlU2NyZWVuQ1RNPWZ1bmN0aW9uKCl7dGhpcy5pbnZlcnNlU2NyZWVuQ1RNRGlydHlfPSEwfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaXNWaXNpYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWaXNpYmxlX307XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0U3ZnWFk9ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPTAsZD0xO2lmKEJsb2NrbHkudXRpbHMuZG9tLmNvbnRhaW5zTm9kZSh0aGlzLmdldENhbnZhcygpLGEpfHxCbG9ja2x5LnV0aWxzLmRvbS5jb250YWluc05vZGUodGhpcy5nZXRCdWJibGVDYW52YXMoKSxhKSlkPXRoaXMuc2NhbGU7ZG97dmFyIGU9QmxvY2tseS51dGlscy5nZXRSZWxhdGl2ZVhZKGEpO2lmKGE9PXRoaXMuZ2V0Q2FudmFzKCl8fGE9PXRoaXMuZ2V0QnViYmxlQ2FudmFzKCkpZD0xO2IrPWUueCpkO2MrPWUueSpkO2E9YS5wYXJlbnROb2RlfXdoaWxlKGEmJmEhPXRoaXMuZ2V0UGFyZW50U3ZnKCkpO3JldHVybiBuZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKGIsYyl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRPcmlnaW5PZmZzZXRJblBpeGVscz1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5LnV0aWxzLmdldEluamVjdGlvbkRpdlhZXyh0aGlzLmdldENhbnZhcygpKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0SW5qZWN0aW9uRGl2PWZ1bmN0aW9uKCl7aWYoIXRoaXMuaW5qZWN0aW9uRGl2Xylmb3IodmFyIGE9dGhpcy5zdmdHcm91cF87YTspe2lmKC0xIT0oXCIgXCIrKGEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5pbmRleE9mKFwiIGluamVjdGlvbkRpdiBcIikpe3RoaXMuaW5qZWN0aW9uRGl2Xz1hO2JyZWFrfWE9YS5wYXJlbnROb2RlfXJldHVybiB0aGlzLmluamVjdGlvbkRpdl99O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRCbG9ja0NhbnZhcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN2Z0Jsb2NrQ2FudmFzX307QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnNldFJlc2l6ZUhhbmRsZXJXcmFwcGVyPWZ1bmN0aW9uKGEpe3RoaXMucmVzaXplSGFuZGxlcldyYXBwZXJfPWF9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmNyZWF0ZURvbT1mdW5jdGlvbihhKXt0aGlzLnN2Z0dyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse1wiY2xhc3NcIjpcImJsb2NrbHlXb3Jrc3BhY2VcIn0sbnVsbCk7YSYmKHRoaXMuc3ZnQmFja2dyb3VuZF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsXCJjbGFzc1wiOmF9LHRoaXMuc3ZnR3JvdXBfKSxcImJsb2NrbHlNYWluQmFja2dyb3VuZFwiPT1hJiZ0aGlzLmdyaWRfP3RoaXMuc3ZnQmFja2dyb3VuZF8uc3R5bGUuZmlsbD1cInVybCgjXCIrdGhpcy5ncmlkXy5nZXRQYXR0ZXJuSWQoKStcIilcIjp0aGlzLnRoZW1lTWFuYWdlcl8uc3Vic2NyaWJlKHRoaXMuc3ZnQmFja2dyb3VuZF8sXCJ3b3Jrc3BhY2VCYWNrZ3JvdW5kQ29sb3VyXCIsXCJmaWxsXCIpKTt0aGlzLnN2Z0Jsb2NrQ2FudmFzXz1cbkJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRyx7XCJjbGFzc1wiOlwiYmxvY2tseUJsb2NrQ2FudmFzXCJ9LHRoaXMuc3ZnR3JvdXBfKTt0aGlzLnN2Z0J1YmJsZUNhbnZhc189QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHtcImNsYXNzXCI6XCJibG9ja2x5QnViYmxlQ2FudmFzXCJ9LHRoaXMuc3ZnR3JvdXBfKTt0aGlzLmlzRmx5b3V0fHwoQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLnN2Z0dyb3VwXyxcIm1vdXNlZG93blwiLHRoaXMsdGhpcy5vbk1vdXNlRG93bl8sITEsITApLEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18odGhpcy5zdmdHcm91cF8sXCJ3aGVlbFwiLHRoaXMsdGhpcy5vbk1vdXNlV2hlZWxfKSk7aWYodGhpcy5vcHRpb25zLmhhc0NhdGVnb3JpZXMpe2lmKCFCbG9ja2x5LlRvb2xib3gpdGhyb3cgRXJyb3IoXCJNaXNzaW5nIHJlcXVpcmUgZm9yIEJsb2NrbHkuVG9vbGJveFwiKTtcbnRoaXMudG9vbGJveF89bmV3IChCbG9ja2x5LnJlZ2lzdHJ5LmdldENsYXNzRnJvbU9wdGlvbnMoQmxvY2tseS5yZWdpc3RyeS5UeXBlLlRPT0xCT1gsdGhpcy5vcHRpb25zKSkodGhpcyl9dGhpcy5ncmlkXyYmdGhpcy5ncmlkXy51cGRhdGUodGhpcy5zY2FsZSk7dGhpcy5yZWNvcmREZWxldGVBcmVhcygpO3RoaXMubWFya2VyTWFuYWdlcl8uc2V0Q3Vyc29yKG5ldyBCbG9ja2x5LkN1cnNvcik7dGhpcy5tYXJrZXJNYW5hZ2VyXy5yZWdpc3Rlck1hcmtlcihCbG9ja2x5Lm5hdmlnYXRpb24uTUFSS0VSX05BTUUsbmV3IEJsb2NrbHkuTWFya2VyKTt0aGlzLnJlbmRlcmVyXy5jcmVhdGVEb20odGhpcy5zdmdHcm91cF8sdGhpcy5nZXRUaGVtZSgpKTtyZXR1cm4gdGhpcy5zdmdHcm91cF99O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVkPSExO3RoaXMuY3VycmVudEdlc3R1cmVfJiZ0aGlzLmN1cnJlbnRHZXN0dXJlXy5jYW5jZWwoKTt0aGlzLnN2Z0dyb3VwXyYmKEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5zdmdHcm91cF8pLHRoaXMuc3ZnR3JvdXBfPW51bGwpO3RoaXMuc3ZnQnViYmxlQ2FudmFzXz10aGlzLnN2Z0Jsb2NrQ2FudmFzXz1udWxsO3RoaXMudG9vbGJveF8mJih0aGlzLnRvb2xib3hfLmRpc3Bvc2UoKSx0aGlzLnRvb2xib3hfPW51bGwpO3RoaXMuZmx5b3V0XyYmKHRoaXMuZmx5b3V0Xy5kaXNwb3NlKCksdGhpcy5mbHlvdXRfPW51bGwpO3RoaXMudHJhc2hjYW4mJih0aGlzLnRyYXNoY2FuLmRpc3Bvc2UoKSx0aGlzLnRyYXNoY2FuPW51bGwpO3RoaXMuc2Nyb2xsYmFyJiYodGhpcy5zY3JvbGxiYXIuZGlzcG9zZSgpLHRoaXMuc2Nyb2xsYmFyPW51bGwpO3RoaXMuem9vbUNvbnRyb2xzXyYmXG4odGhpcy56b29tQ29udHJvbHNfLmRpc3Bvc2UoKSx0aGlzLnpvb21Db250cm9sc189bnVsbCk7dGhpcy5hdWRpb01hbmFnZXJfJiYodGhpcy5hdWRpb01hbmFnZXJfLmRpc3Bvc2UoKSx0aGlzLmF1ZGlvTWFuYWdlcl89bnVsbCk7dGhpcy5ncmlkXyYmKHRoaXMuZ3JpZF8uZGlzcG9zZSgpLHRoaXMuZ3JpZF89bnVsbCk7dGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO3RoaXMubWFya2VyTWFuYWdlcl8mJih0aGlzLm1hcmtlck1hbmFnZXJfLmRpc3Bvc2UoKSx0aGlzLm1hcmtlck1hbmFnZXJfPW51bGwpO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnN1cGVyQ2xhc3NfLmRpc3Bvc2UuY2FsbCh0aGlzKTt0aGlzLnRoZW1lTWFuYWdlcl8mJih0aGlzLnRoZW1lTWFuYWdlcl8udW5zdWJzY3JpYmVXb3Jrc3BhY2UodGhpcyksdGhpcy50aGVtZU1hbmFnZXJfLnVuc3Vic2NyaWJlKHRoaXMuc3ZnQmFja2dyb3VuZF8pLHRoaXMub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2V8fCh0aGlzLnRoZW1lTWFuYWdlcl8uZGlzcG9zZSgpLFxudGhpcy50aGVtZU1hbmFnZXJfPW51bGwpKTt0aGlzLmZseW91dEJ1dHRvbkNhbGxiYWNrc189dGhpcy50b29sYm94Q2F0ZWdvcnlDYWxsYmFja3NfPXRoaXMuY29ubmVjdGlvbkRCTGlzdD1udWxsO2lmKCF0aGlzLm9wdGlvbnMucGFyZW50V29ya3NwYWNlKXt2YXIgYT10aGlzLmdldFBhcmVudFN2ZygpO2EmJmEucGFyZW50Tm9kZSYmQmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZShhLnBhcmVudE5vZGUpfXRoaXMucmVzaXplSGFuZGxlcldyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5yZXNpemVIYW5kbGVyV3JhcHBlcl8pLHRoaXMucmVzaXplSGFuZGxlcldyYXBwZXJfPW51bGwpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUubmV3QmxvY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEJsb2NrbHkuQmxvY2tTdmcodGhpcyxhLGIpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRUcmFzaGNhbj1mdW5jdGlvbigpe2lmKCFCbG9ja2x5LlRyYXNoY2FuKXRocm93IEVycm9yKFwiTWlzc2luZyByZXF1aXJlIGZvciBCbG9ja2x5LlRyYXNoY2FuXCIpO3RoaXMudHJhc2hjYW49bmV3IEJsb2NrbHkuVHJhc2hjYW4odGhpcyk7dmFyIGE9dGhpcy50cmFzaGNhbi5jcmVhdGVEb20oKTt0aGlzLnN2Z0dyb3VwXy5pbnNlcnRCZWZvcmUoYSx0aGlzLnN2Z0Jsb2NrQ2FudmFzXyl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRab29tQ29udHJvbHM9ZnVuY3Rpb24oKXtpZighQmxvY2tseS5ab29tQ29udHJvbHMpdGhyb3cgRXJyb3IoXCJNaXNzaW5nIHJlcXVpcmUgZm9yIEJsb2NrbHkuWm9vbUNvbnRyb2xzXCIpO3RoaXMuem9vbUNvbnRyb2xzXz1uZXcgQmxvY2tseS5ab29tQ29udHJvbHModGhpcyk7dmFyIGE9dGhpcy56b29tQ29udHJvbHNfLmNyZWF0ZURvbSgpO3RoaXMuc3ZnR3JvdXBfLmFwcGVuZENoaWxkKGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRGbHlvdXQ9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEJsb2NrbHkuT3B0aW9ucyh7cGFyZW50V29ya3NwYWNlOnRoaXMscnRsOnRoaXMuUlRMLG9uZUJhc2VkSW5kZXg6dGhpcy5vcHRpb25zLm9uZUJhc2VkSW5kZXgsaG9yaXpvbnRhbExheW91dDp0aGlzLmhvcml6b250YWxMYXlvdXQscmVuZGVyZXI6dGhpcy5vcHRpb25zLnJlbmRlcmVyLHJlbmRlcmVyT3ZlcnJpZGVzOnRoaXMub3B0aW9ucy5yZW5kZXJlck92ZXJyaWRlc30pO2IudG9vbGJveFBvc2l0aW9uPXRoaXMub3B0aW9ucy50b29sYm94UG9zaXRpb247aWYodGhpcy5ob3Jpem9udGFsTGF5b3V0KXtpZighQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0KXRocm93IEVycm9yKFwiTWlzc2luZyByZXF1aXJlIGZvciBCbG9ja2x5Lkhvcml6b250YWxGbHlvdXRcIik7dGhpcy5mbHlvdXRfPW5ldyBCbG9ja2x5Lkhvcml6b250YWxGbHlvdXQoYil9ZWxzZXtpZighQmxvY2tseS5WZXJ0aWNhbEZseW91dCl0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5WZXJ0aWNhbEZseW91dFwiKTtcbnRoaXMuZmx5b3V0Xz1uZXcgQmxvY2tseS5WZXJ0aWNhbEZseW91dChiKX10aGlzLmZseW91dF8uYXV0b0Nsb3NlPSExO3RoaXMuZmx5b3V0Xy5nZXRXb3Jrc3BhY2UoKS5zZXRWaXNpYmxlKCEwKTtyZXR1cm4gdGhpcy5mbHlvdXRfLmNyZWF0ZURvbShhKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldEZseW91dD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mbHlvdXRffHxhP3RoaXMuZmx5b3V0Xzp0aGlzLnRvb2xib3hfP3RoaXMudG9vbGJveF8uZ2V0Rmx5b3V0KCk6bnVsbH07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldFRvb2xib3g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b29sYm94X307QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnVwZGF0ZVNjcmVlbkNhbGN1bGF0aW9uc189ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUludmVyc2VTY3JlZW5DVE0oKTt0aGlzLnJlY29yZERlbGV0ZUFyZWFzKCl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlc2l6ZUNvbnRlbnRzPWZ1bmN0aW9uKCl7dGhpcy5yZXNpemVzRW5hYmxlZF8mJnRoaXMucmVuZGVyZWQmJih0aGlzLnNjcm9sbGJhciYmdGhpcy5zY3JvbGxiYXIucmVzaXplKCksdGhpcy51cGRhdGVJbnZlcnNlU2NyZWVuQ1RNKCkpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy50b29sYm94XyYmdGhpcy50b29sYm94Xy5wb3NpdGlvbigpO3RoaXMuZmx5b3V0XyYmdGhpcy5mbHlvdXRfLnBvc2l0aW9uKCk7dGhpcy50cmFzaGNhbiYmdGhpcy50cmFzaGNhbi5wb3NpdGlvbigpO3RoaXMuem9vbUNvbnRyb2xzXyYmdGhpcy56b29tQ29udHJvbHNfLnBvc2l0aW9uKCk7dGhpcy5zY3JvbGxiYXImJnRoaXMuc2Nyb2xsYmFyLnJlc2l6ZSgpO3RoaXMudXBkYXRlU2NyZWVuQ2FsY3VsYXRpb25zXygpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS51cGRhdGVTY3JlZW5DYWxjdWxhdGlvbnNJZlNjcm9sbGVkPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS51dGlscy5nZXREb2N1bWVudFNjcm9sbCgpO0Jsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5lcXVhbHModGhpcy5sYXN0UmVjb3JkZWRQYWdlU2Nyb2xsXyxhKXx8KHRoaXMubGFzdFJlY29yZGVkUGFnZVNjcm9sbF89YSx0aGlzLnVwZGF0ZVNjcmVlbkNhbGN1bGF0aW9uc18oKSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRDYW52YXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdmdCbG9ja0NhbnZhc199O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRCdWJibGVDYW52YXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdmdCdWJibGVDYW52YXNffTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRQYXJlbnRTdmc9ZnVuY3Rpb24oKXtpZighdGhpcy5jYWNoZWRQYXJlbnRTdmdfKWZvcih2YXIgYT10aGlzLnN2Z0dyb3VwXzthOyl7aWYoXCJzdmdcIj09YS50YWdOYW1lKXt0aGlzLmNhY2hlZFBhcmVudFN2Z189YTticmVha31hPWEucGFyZW50Tm9kZX1yZXR1cm4gdGhpcy5jYWNoZWRQYXJlbnRTdmdffTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUubWF5YmVGaXJlVmlld3BvcnRDaGFuZ2VFdmVudD1mdW5jdGlvbigpe307XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7aWYodGhpcy51c2VXb3Jrc3BhY2VEcmFnU3VyZmFjZV8mJnRoaXMuaXNEcmFnU3VyZmFjZUFjdGl2ZV8pdGhpcy53b3Jrc3BhY2VEcmFnU3VyZmFjZV8udHJhbnNsYXRlU3VyZmFjZShhLGIpO2Vsc2V7dmFyIGM9XCJ0cmFuc2xhdGUoXCIrYStcIixcIitiK1wiKSBzY2FsZShcIit0aGlzLnNjYWxlK1wiKVwiO3RoaXMuc3ZnQmxvY2tDYW52YXNfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLGMpO3RoaXMuc3ZnQnViYmxlQ2FudmFzXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixjKX10aGlzLmJsb2NrRHJhZ1N1cmZhY2VfJiZ0aGlzLmJsb2NrRHJhZ1N1cmZhY2VfLnRyYW5zbGF0ZUFuZFNjYWxlR3JvdXAoYSxiLHRoaXMuc2NhbGUpO3RoaXMuZ3JpZF8mJnRoaXMuZ3JpZF8ubW92ZVRvKGEsYik7dGhpcy5tYXliZUZpcmVWaWV3cG9ydENoYW5nZUV2ZW50KCl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlc2V0RHJhZ1N1cmZhY2U9ZnVuY3Rpb24oKXtpZih0aGlzLnVzZVdvcmtzcGFjZURyYWdTdXJmYWNlXyl7dGhpcy5pc0RyYWdTdXJmYWNlQWN0aXZlXz0hMTt2YXIgYT10aGlzLndvcmtzcGFjZURyYWdTdXJmYWNlXy5nZXRTdXJmYWNlVHJhbnNsYXRpb24oKTt0aGlzLndvcmtzcGFjZURyYWdTdXJmYWNlXy5jbGVhckFuZEhpZGUodGhpcy5zdmdHcm91cF8pO2E9XCJ0cmFuc2xhdGUoXCIrYS54K1wiLFwiK2EueStcIikgc2NhbGUoXCIrdGhpcy5zY2FsZStcIilcIjt0aGlzLnN2Z0Jsb2NrQ2FudmFzXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixhKTt0aGlzLnN2Z0J1YmJsZUNhbnZhc18uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsYSl9fTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zZXR1cERyYWdTdXJmYWNlPWZ1bmN0aW9uKCl7aWYodGhpcy51c2VXb3Jrc3BhY2VEcmFnU3VyZmFjZV8mJiF0aGlzLmlzRHJhZ1N1cmZhY2VBY3RpdmVfKXt0aGlzLmlzRHJhZ1N1cmZhY2VBY3RpdmVfPSEwO3ZhciBhPXRoaXMuc3ZnQmxvY2tDYW52YXNfLnByZXZpb3VzU2libGluZyxiPXBhcnNlSW50KHRoaXMuZ2V0UGFyZW50U3ZnKCkuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksMTApLGM9cGFyc2VJbnQodGhpcy5nZXRQYXJlbnRTdmcoKS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiksMTApLGQ9QmxvY2tseS51dGlscy5nZXRSZWxhdGl2ZVhZKHRoaXMuZ2V0Q2FudmFzKCkpO3RoaXMud29ya3NwYWNlRHJhZ1N1cmZhY2VfLnNldENvbnRlbnRzQW5kU2hvdyh0aGlzLmdldENhbnZhcygpLHRoaXMuZ2V0QnViYmxlQ2FudmFzKCksYSxiLGMsdGhpcy5zY2FsZSk7dGhpcy53b3Jrc3BhY2VEcmFnU3VyZmFjZV8udHJhbnNsYXRlU3VyZmFjZShkLngsXG5kLnkpfX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldEJsb2NrRHJhZ1N1cmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ibG9ja0RyYWdTdXJmYWNlX307QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRNZXRyaWNzKCk7cmV0dXJuIGE/YS52aWV3V2lkdGgvdGhpcy5zY2FsZTowfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zZXRWaXNpYmxlPWZ1bmN0aW9uKGEpe3RoaXMuaXNWaXNpYmxlXz1hO2lmKHRoaXMuc3ZnR3JvdXBfKWlmKHRoaXMuc2Nyb2xsYmFyJiZ0aGlzLnNjcm9sbGJhci5zZXRDb250YWluZXJWaXNpYmxlKGEpLHRoaXMuZ2V0Rmx5b3V0KCkmJnRoaXMuZ2V0Rmx5b3V0KCkuc2V0Q29udGFpbmVyVmlzaWJsZShhKSx0aGlzLmdldFBhcmVudFN2ZygpLnN0eWxlLmRpc3BsYXk9YT9cImJsb2NrXCI6XCJub25lXCIsdGhpcy50b29sYm94XyYmdGhpcy50b29sYm94Xy5zZXRWaXNpYmxlKGEpLGEpe2E9dGhpcy5nZXRBbGxCbG9ja3MoITEpO2Zvcih2YXIgYj1hLmxlbmd0aC0xOzA8PWI7Yi0tKWFbYl0ubWFya0RpcnR5KCk7dGhpcy5yZW5kZXIoKTt0aGlzLnRvb2xib3hfJiZ0aGlzLnRvb2xib3hfLnBvc2l0aW9uKCl9ZWxzZSBCbG9ja2x5LmhpZGVDaGFmZighMCl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmdldEFsbEJsb2NrcyghMSksYj1hLmxlbmd0aC0xOzA8PWI7Yi0tKWFbYl0ucmVuZGVyKCExKTtpZih0aGlzLmN1cnJlbnRHZXN0dXJlXylmb3IoYT10aGlzLmN1cnJlbnRHZXN0dXJlXy5nZXRJbnNlcnRpb25NYXJrZXJzKCksYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0ucmVuZGVyKCExKTt0aGlzLm1hcmtlck1hbmFnZXJfLnVwZGF0ZU1hcmtlcnMoKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuaGlnaGxpZ2h0QmxvY2s9ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDA9PT1iKXtmb3IodmFyIGM9MCxkO2Q9dGhpcy5oaWdobGlnaHRlZEJsb2Nrc19bY107YysrKWQuc2V0SGlnaGxpZ2h0ZWQoITEpO3RoaXMuaGlnaGxpZ2h0ZWRCbG9ja3NfLmxlbmd0aD0wfWlmKGQ9YT90aGlzLmdldEJsb2NrQnlJZChhKTpudWxsKShhPXZvaWQgMD09PWJ8fGIpPy0xPT10aGlzLmhpZ2hsaWdodGVkQmxvY2tzXy5pbmRleE9mKGQpJiZ0aGlzLmhpZ2hsaWdodGVkQmxvY2tzXy5wdXNoKGQpOkJsb2NrbHkudXRpbHMuYXJyYXlSZW1vdmUodGhpcy5oaWdobGlnaHRlZEJsb2Nrc18sZCksZC5zZXRIaWdobGlnaHRlZChhKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucGFzdGU9ZnVuY3Rpb24oYSl7IXRoaXMucmVuZGVyZWR8fCFhLnRhZ05hbWV8fGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJibG9ja1wiKS5sZW5ndGg+PXRoaXMucmVtYWluaW5nQ2FwYWNpdHkoKXx8KHRoaXMuY3VycmVudEdlc3R1cmVfJiZ0aGlzLmN1cnJlbnRHZXN0dXJlXy5jYW5jZWwoKSxcImNvbW1lbnRcIj09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/dGhpcy5wYXN0ZVdvcmtzcGFjZUNvbW1lbnRfKGEpOnRoaXMucGFzdGVCbG9ja18oYSkpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5wYXN0ZUJsb2NrXz1mdW5jdGlvbihhKXtCbG9ja2x5LkV2ZW50cy5kaXNhYmxlKCk7dHJ5e3ZhciBiPUJsb2NrbHkuWG1sLmRvbVRvQmxvY2soYSx0aGlzKSxjPXRoaXMuZ2V0TWFya2VyKEJsb2NrbHkubmF2aWdhdGlvbi5NQVJLRVJfTkFNRSkuZ2V0Q3VyTm9kZSgpO2lmKHRoaXMua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSYmYyYmYy5pc0Nvbm5lY3Rpb24oKSl7dmFyIGQ9Yy5nZXRMb2NhdGlvbigpO0Jsb2NrbHkubmF2aWdhdGlvbi5pbnNlcnRCbG9jayhiLGQpO3JldHVybn12YXIgZT1wYXJzZUludChhLmdldEF0dHJpYnV0ZShcInhcIiksMTApLGY9cGFyc2VJbnQoYS5nZXRBdHRyaWJ1dGUoXCJ5XCIpLDEwKTtpZighaXNOYU4oZSkmJiFpc05hTihmKSl7dGhpcy5SVEwmJihlPS1lKTtkb3thPSExO3ZhciBnPXRoaXMuZ2V0QWxsQmxvY2tzKCExKTtjPTA7Zm9yKHZhciBoO2g9Z1tjXTtjKyspe3ZhciBrPWguZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO1xuaWYoMT49TWF0aC5hYnMoZS1rLngpJiYxPj1NYXRoLmFicyhmLWsueSkpe2E9ITA7YnJlYWt9fWlmKCFhKXt2YXIgbD1iLmdldENvbm5lY3Rpb25zXyghMSk7Yz0wO2Zvcih2YXIgbTttPWxbY107YysrKWlmKG0uY2xvc2VzdChCbG9ja2x5LlNOQVBfUkFESVVTLG5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoZSxmKSkuY29ubmVjdGlvbil7YT0hMDticmVha319YSYmKGU9dGhpcy5SVEw/ZS1CbG9ja2x5LlNOQVBfUkFESVVTOmUrQmxvY2tseS5TTkFQX1JBRElVUyxmKz0yKkJsb2NrbHkuU05BUF9SQURJVVMpfXdoaWxlKGEpO2IubW92ZUJ5KGUsZil9fWZpbmFsbHl7QmxvY2tseS5FdmVudHMuZW5hYmxlKCl9QmxvY2tseS5FdmVudHMuaXNFbmFibGVkKCkmJiFiLmlzU2hhZG93KCkmJkJsb2NrbHkuRXZlbnRzLmZpcmUobmV3IEJsb2NrbHkuRXZlbnRzLkJsb2NrQ3JlYXRlKGIpKTtiLnNlbGVjdCgpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5wYXN0ZVdvcmtzcGFjZUNvbW1lbnRfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRXZlbnRzLmRpc2FibGUoKTt0cnl7dmFyIGI9QmxvY2tseS5Xb3Jrc3BhY2VDb21tZW50U3ZnLmZyb21YbWwoYSx0aGlzKSxjPXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwieFwiKSwxMCksZD1wYXJzZUludChhLmdldEF0dHJpYnV0ZShcInlcIiksMTApO2lzTmFOKGMpfHxpc05hTihkKXx8KHRoaXMuUlRMJiYoYz0tYyksYi5tb3ZlQnkoYys1MCxkKzUwKSl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKX1CbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKTtiLnNlbGVjdCgpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5yZWZyZXNoVG9vbGJveFNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaXNGbHlvdXQ/dGhpcy50YXJnZXRXb3Jrc3BhY2U6dGhpczthJiYhYS5jdXJyZW50R2VzdHVyZV8mJmEudG9vbGJveF8mJmEudG9vbGJveF8uZ2V0Rmx5b3V0KCkmJmEudG9vbGJveF8ucmVmcmVzaFNlbGVjdGlvbigpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVuYW1lVmFyaWFibGVCeUlkPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5Xb3Jrc3BhY2VTdmcuc3VwZXJDbGFzc18ucmVuYW1lVmFyaWFibGVCeUlkLmNhbGwodGhpcyxhLGIpO3RoaXMucmVmcmVzaFRvb2xib3hTZWxlY3Rpb24oKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmRlbGV0ZVZhcmlhYmxlQnlJZD1mdW5jdGlvbihhKXtCbG9ja2x5LldvcmtzcGFjZVN2Zy5zdXBlckNsYXNzXy5kZWxldGVWYXJpYWJsZUJ5SWQuY2FsbCh0aGlzLGEpO3RoaXMucmVmcmVzaFRvb2xib3hTZWxlY3Rpb24oKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuY3JlYXRlVmFyaWFibGU9ZnVuY3Rpb24oYSxiLGMpe2E9QmxvY2tseS5Xb3Jrc3BhY2VTdmcuc3VwZXJDbGFzc18uY3JlYXRlVmFyaWFibGUuY2FsbCh0aGlzLGEsYixjKTt0aGlzLnJlZnJlc2hUb29sYm94U2VsZWN0aW9uKCk7cmV0dXJuIGF9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5yZWNvcmREZWxldGVBcmVhcz1mdW5jdGlvbigpe3RoaXMuZGVsZXRlQXJlYVRyYXNoXz10aGlzLnRyYXNoY2FuJiZ0aGlzLnN2Z0dyb3VwXy5wYXJlbnROb2RlP3RoaXMudHJhc2hjYW4uZ2V0Q2xpZW50UmVjdCgpOm51bGw7dGhpcy5kZWxldGVBcmVhVG9vbGJveF89dGhpcy5mbHlvdXRfP3RoaXMuZmx5b3V0Xy5nZXRDbGllbnRSZWN0KCk6dGhpcy50b29sYm94XyYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy50b29sYm94Xy5nZXRDbGllbnRSZWN0P3RoaXMudG9vbGJveF8uZ2V0Q2xpZW50UmVjdCgpOm51bGx9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmlzRGVsZXRlQXJlYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kZWxldGVBcmVhVHJhc2hfJiZ0aGlzLmRlbGV0ZUFyZWFUcmFzaF8uY29udGFpbnMoYS5jbGllbnRYLGEuY2xpZW50WSk/QmxvY2tseS5ERUxFVEVfQVJFQV9UUkFTSDp0aGlzLmRlbGV0ZUFyZWFUb29sYm94XyYmdGhpcy5kZWxldGVBcmVhVG9vbGJveF8uY29udGFpbnMoYS5jbGllbnRYLGEuY2xpZW50WSk/QmxvY2tseS5ERUxFVEVfQVJFQV9UT09MQk9YOkJsb2NrbHkuREVMRVRFX0FSRUFfTk9ORX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLm9uTW91c2VEb3duXz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEdlc3R1cmUoYSk7YiYmYi5oYW5kbGVXc1N0YXJ0KGEsdGhpcyl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnN0YXJ0RHJhZz1mdW5jdGlvbihhLGIpe2E9QmxvY2tseS51dGlscy5tb3VzZVRvU3ZnKGEsdGhpcy5nZXRQYXJlbnRTdmcoKSx0aGlzLmdldEludmVyc2VTY3JlZW5DVE0oKSk7YS54Lz10aGlzLnNjYWxlO2EueS89dGhpcy5zY2FsZTt0aGlzLmRyYWdEZWx0YVhZXz1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlmZmVyZW5jZShiLGEpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUubW92ZURyYWc9ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnV0aWxzLm1vdXNlVG9TdmcoYSx0aGlzLmdldFBhcmVudFN2ZygpLHRoaXMuZ2V0SW52ZXJzZVNjcmVlbkNUTSgpKTthLngvPXRoaXMuc2NhbGU7YS55Lz10aGlzLnNjYWxlO3JldHVybiBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuc3VtKHRoaXMuZHJhZ0RlbHRhWFlfLGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5pc0RyYWdnaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMuY3VycmVudEdlc3R1cmVfJiZ0aGlzLmN1cnJlbnRHZXN0dXJlXy5pc0RyYWdnaW5nKCl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5pc0RyYWdnYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMubW92ZU9wdGlvbnMmJnRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucy5kcmFnfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5pc0NvbnRlbnRCb3VuZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucyYmdGhpcy5vcHRpb25zLm1vdmVPcHRpb25zLnNjcm9sbGJhcnN8fHRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucyYmdGhpcy5vcHRpb25zLm1vdmVPcHRpb25zLndoZWVsfHx0aGlzLm9wdGlvbnMubW92ZU9wdGlvbnMmJnRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucy5kcmFnfHx0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMmJnRoaXMub3B0aW9ucy56b29tT3B0aW9ucy5jb250cm9sc3x8dGhpcy5vcHRpb25zLnpvb21PcHRpb25zJiZ0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMud2hlZWx8fHRoaXMub3B0aW9ucy56b29tT3B0aW9ucyYmdGhpcy5vcHRpb25zLnpvb21PcHRpb25zLnBpbmNofTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5pc01vdmFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLm1vdmVPcHRpb25zJiZ0aGlzLm9wdGlvbnMubW92ZU9wdGlvbnMuc2Nyb2xsYmFyc3x8dGhpcy5vcHRpb25zLm1vdmVPcHRpb25zJiZ0aGlzLm9wdGlvbnMubW92ZU9wdGlvbnMud2hlZWx8fHRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucyYmdGhpcy5vcHRpb25zLm1vdmVPcHRpb25zLmRyYWd8fHRoaXMub3B0aW9ucy56b29tT3B0aW9ucyYmdGhpcy5vcHRpb25zLnpvb21PcHRpb25zLndoZWVsfHx0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMmJnRoaXMub3B0aW9ucy56b29tT3B0aW9ucy5waW5jaH07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUub25Nb3VzZVdoZWVsXz1mdW5jdGlvbihhKXtpZihCbG9ja2x5Lkdlc3R1cmUuaW5Qcm9ncmVzcygpKWEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpO2Vsc2V7dmFyIGI9dGhpcy5vcHRpb25zLnpvb21PcHRpb25zJiZ0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMud2hlZWwsYz10aGlzLm9wdGlvbnMubW92ZU9wdGlvbnMmJnRoaXMub3B0aW9ucy5tb3ZlT3B0aW9ucy53aGVlbDtpZihifHxjKXt2YXIgZD1CbG9ja2x5LnV0aWxzLmdldFNjcm9sbERlbHRhUGl4ZWxzKGEpOyFifHwhYS5jdHJsS2V5JiZjPyhiPXRoaXMuc2Nyb2xsWC1kLngsYz10aGlzLnNjcm9sbFktZC55LGEuc2hpZnRLZXkmJiFkLngmJihiPXRoaXMuc2Nyb2xsWC1kLnksYz10aGlzLnNjcm9sbFkpLHRoaXMuc2Nyb2xsKGIsYykpOihkPS1kLnkvNTAsYj1CbG9ja2x5LnV0aWxzLm1vdXNlVG9TdmcoYSx0aGlzLmdldFBhcmVudFN2ZygpLHRoaXMuZ2V0SW52ZXJzZVNjcmVlbkNUTSgpKSxcbnRoaXMuem9vbShiLngsYi55LGQpKTthLnByZXZlbnREZWZhdWx0KCl9fX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldEJsb2Nrc0JvdW5kaW5nQm94PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUb3BCb3VuZGVkRWxlbWVudHMoKTtpZighYS5sZW5ndGgpcmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLlJlY3QoMCwwLDAsMCk7Zm9yKHZhciBiPWFbMF0uZ2V0Qm91bmRpbmdSZWN0YW5nbGUoKSxjPTE7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uZ2V0Qm91bmRpbmdSZWN0YW5nbGUoKTtkLnRvcDxiLnRvcCYmKGIudG9wPWQudG9wKTtkLmJvdHRvbT5iLmJvdHRvbSYmKGIuYm90dG9tPWQuYm90dG9tKTtkLmxlZnQ8Yi5sZWZ0JiYoYi5sZWZ0PWQubGVmdCk7ZC5yaWdodD5iLnJpZ2h0JiYoYi5yaWdodD1kLnJpZ2h0KX1yZXR1cm4gYn07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuY2xlYW5VcD1mdW5jdGlvbigpe3RoaXMuc2V0UmVzaXplc0VuYWJsZWQoITEpO0Jsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKTtmb3IodmFyIGE9dGhpcy5nZXRUb3BCbG9ja3MoITApLGI9MCxjPTAsZDtkPWFbY107YysrKWlmKGQuaXNNb3ZhYmxlKCkpe3ZhciBlPWQuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO2QubW92ZUJ5KC1lLngsYi1lLnkpO2Quc25hcFRvR3JpZCgpO2I9ZC5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCkueStkLmdldEhlaWdodFdpZHRoKCkuaGVpZ2h0K3RoaXMucmVuZGVyZXJfLmdldENvbnN0YW50cygpLk1JTl9CTE9DS19IRUlHSFR9QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpO3RoaXMuc2V0UmVzaXplc0VuYWJsZWQoITApfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zaG93Q29udGV4dE1lbnU9ZnVuY3Rpb24oYSl7aWYoIXRoaXMub3B0aW9ucy5yZWFkT25seSYmIXRoaXMuaXNGbHlvdXQpe3ZhciBiPUJsb2NrbHkuQ29udGV4dE1lbnVSZWdpc3RyeS5yZWdpc3RyeS5nZXRDb250ZXh0TWVudU9wdGlvbnMoQmxvY2tseS5Db250ZXh0TWVudVJlZ2lzdHJ5LlNjb3BlVHlwZS5XT1JLU1BBQ0Use3dvcmtzcGFjZTp0aGlzfSk7dGhpcy5jb25maWd1cmVDb250ZXh0TWVudSYmdGhpcy5jb25maWd1cmVDb250ZXh0TWVudShiLGEpO0Jsb2NrbHkuQ29udGV4dE1lbnUuc2hvdyhhLGIsdGhpcy5SVEwpfX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUudXBkYXRlVG9vbGJveD1mdW5jdGlvbihhKXtpZihhPUJsb2NrbHkudXRpbHMudG9vbGJveC5jb252ZXJ0VG9vbGJveERlZlRvSnNvbihhKSl7aWYoIXRoaXMub3B0aW9ucy5sYW5ndWFnZVRyZWUpdGhyb3cgRXJyb3IoXCJFeGlzdGluZyB0b29sYm94IGlzIG51bGwuICBDYW4ndCBjcmVhdGUgbmV3IHRvb2xib3guXCIpO2lmKEJsb2NrbHkudXRpbHMudG9vbGJveC5oYXNDYXRlZ29yaWVzKGEpKXtpZighdGhpcy50b29sYm94Xyl0aHJvdyBFcnJvcihcIkV4aXN0aW5nIHRvb2xib3ggaGFzIG5vIGNhdGVnb3JpZXMuICBDYW4ndCBjaGFuZ2UgbW9kZS5cIik7dGhpcy5vcHRpb25zLmxhbmd1YWdlVHJlZT1hO3RoaXMudG9vbGJveF8ucmVuZGVyKGEpfWVsc2V7aWYoIXRoaXMuZmx5b3V0Xyl0aHJvdyBFcnJvcihcIkV4aXN0aW5nIHRvb2xib3ggaGFzIGNhdGVnb3JpZXMuICBDYW4ndCBjaGFuZ2UgbW9kZS5cIik7dGhpcy5vcHRpb25zLmxhbmd1YWdlVHJlZT1cbmE7dGhpcy5mbHlvdXRfLnNob3coYSl9fWVsc2UgaWYodGhpcy5vcHRpb25zLmxhbmd1YWdlVHJlZSl0aHJvdyBFcnJvcihcIkNhbid0IG51bGxpZnkgYW4gZXhpc3RpbmcgdG9vbGJveC5cIik7fTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUubWFya0ZvY3VzZWQ9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucGFyZW50V29ya3NwYWNlP3RoaXMub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2UubWFya0ZvY3VzZWQoKTooQmxvY2tseS5tYWluV29ya3NwYWNlPXRoaXMsdGhpcy5zZXRCcm93c2VyRm9jdXMoKSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zZXRCcm93c2VyRm9jdXM9ZnVuY3Rpb24oKXtkb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTt0cnl7dGhpcy5nZXRQYXJlbnRTdmcoKS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfWNhdGNoKGEpe3RyeXt0aGlzLmdldFBhcmVudFN2ZygpLnBhcmVudE5vZGUuc2V0QWN0aXZlKCl9Y2F0Y2goYil7dGhpcy5nZXRQYXJlbnRTdmcoKS5wYXJlbnROb2RlLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSl9fX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuem9vbT1mdW5jdGlvbihhLGIsYyl7Yz1NYXRoLnBvdyh0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMuc2NhbGVTcGVlZCxjKTt2YXIgZD10aGlzLnNjYWxlKmM7aWYodGhpcy5zY2FsZSE9ZCl7ZD50aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMubWF4U2NhbGU/Yz10aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMubWF4U2NhbGUvdGhpcy5zY2FsZTpkPHRoaXMub3B0aW9ucy56b29tT3B0aW9ucy5taW5TY2FsZSYmKGM9dGhpcy5vcHRpb25zLnpvb21PcHRpb25zLm1pblNjYWxlL3RoaXMuc2NhbGUpO3ZhciBlPXRoaXMuZ2V0Q2FudmFzKCkuZ2V0Q1RNKCksZj10aGlzLmdldFBhcmVudFN2ZygpLmNyZWF0ZVNWR1BvaW50KCk7Zi54PWE7Zi55PWI7Zj1mLm1hdHJpeFRyYW5zZm9ybShlLmludmVyc2UoKSk7YT1mLng7Yj1mLnk7ZT1lLnRyYW5zbGF0ZShhKigxLWMpLGIqKDEtYykpLnNjYWxlKGMpO3RoaXMuc2Nyb2xsWD1lLmU7dGhpcy5zY3JvbGxZPVxuZS5mO3RoaXMuc2V0U2NhbGUoZCl9fTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuem9vbUNlbnRlcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE1ldHJpY3MoKTtpZih0aGlzLmZseW91dF8pe3ZhciBjPWIuc3ZnV2lkdGg/Yi5zdmdXaWR0aC8yOjA7Yj1iLnN2Z0hlaWdodD9iLnN2Z0hlaWdodC8yOjB9ZWxzZSBjPWIudmlld1dpZHRoLzIrYi5hYnNvbHV0ZUxlZnQsYj1iLnZpZXdIZWlnaHQvMitiLmFic29sdXRlVG9wO3RoaXMuem9vbShjLGIsYSl9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnpvb21Ub0ZpdD1mdW5jdGlvbigpe2lmKHRoaXMuaXNNb3ZhYmxlKCkpe3ZhciBhPXRoaXMuZ2V0TWV0cmljcygpLGI9YS52aWV3V2lkdGg7YT1hLnZpZXdIZWlnaHQ7dmFyIGM9dGhpcy5nZXRCbG9ja3NCb3VuZGluZ0JveCgpLGQ9Yy5yaWdodC1jLmxlZnQ7Yz1jLmJvdHRvbS1jLnRvcDtpZihkKXt0aGlzLmZseW91dF8mJih0aGlzLmhvcml6b250YWxMYXlvdXQ/KGErPXRoaXMuZmx5b3V0Xy5nZXRIZWlnaHQoKSxjKz10aGlzLmZseW91dF8uZ2V0SGVpZ2h0KCkvdGhpcy5zY2FsZSk6KGIrPXRoaXMuZmx5b3V0Xy5nZXRXaWR0aCgpLGQrPXRoaXMuZmx5b3V0Xy5nZXRXaWR0aCgpL3RoaXMuc2NhbGUpKTtiLz1kO2EvPWM7QmxvY2tseS5FdmVudHMuZGlzYWJsZSgpO3RyeXt0aGlzLnNldFNjYWxlKE1hdGgubWluKGIsYSkpLHRoaXMuc2Nyb2xsQ2VudGVyKCl9ZmluYWxseXtCbG9ja2x5LkV2ZW50cy5lbmFibGUoKX10aGlzLm1heWJlRmlyZVZpZXdwb3J0Q2hhbmdlRXZlbnQoKX19ZWxzZSBjb25zb2xlLndhcm4oXCJUcmllZCB0byBtb3ZlIGEgbm9uLW1vdmFibGUgd29ya3NwYWNlLiBUaGlzIGNvdWxkIHJlc3VsdCBpbiBibG9ja3MgYmVjb21pbmcgaW5hY2Nlc3NpYmxlLlwiKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuYmVnaW5DYW52YXNUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy5zdmdCbG9ja0NhbnZhc18sXCJibG9ja2x5Q2FudmFzVHJhbnNpdGlvbmluZ1wiKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyh0aGlzLnN2Z0J1YmJsZUNhbnZhc18sXCJibG9ja2x5Q2FudmFzVHJhbnNpdGlvbmluZ1wiKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmVuZENhbnZhc1RyYW5zaXRpb249ZnVuY3Rpb24oKXtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyh0aGlzLnN2Z0Jsb2NrQ2FudmFzXyxcImJsb2NrbHlDYW52YXNUcmFuc2l0aW9uaW5nXCIpO0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzKHRoaXMuc3ZnQnViYmxlQ2FudmFzXyxcImJsb2NrbHlDYW52YXNUcmFuc2l0aW9uaW5nXCIpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5zY3JvbGxDZW50ZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW92YWJsZSgpKXt2YXIgYT10aGlzLmdldE1ldHJpY3MoKSxiPShhLmNvbnRlbnRXaWR0aC1hLnZpZXdXaWR0aCkvMixjPShhLmNvbnRlbnRIZWlnaHQtYS52aWV3SGVpZ2h0KS8yO2I9LWItYS5jb250ZW50TGVmdDtjPS1jLWEuY29udGVudFRvcDt0aGlzLnNjcm9sbChiLGMpfWVsc2UgY29uc29sZS53YXJuKFwiVHJpZWQgdG8gbW92ZSBhIG5vbi1tb3ZhYmxlIHdvcmtzcGFjZS4gVGhpcyBjb3VsZCByZXN1bHQgaW4gYmxvY2tzIGJlY29taW5nIGluYWNjZXNzaWJsZS5cIil9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmNlbnRlck9uQmxvY2s9ZnVuY3Rpb24oYSl7aWYodGhpcy5pc01vdmFibGUoKSl7aWYoYT1hP3RoaXMuZ2V0QmxvY2tCeUlkKGEpOm51bGwpe3ZhciBiPWEuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpLGM9YS5nZXRIZWlnaHRXaWR0aCgpLGQ9dGhpcy5zY2FsZTthPShiLngrKHRoaXMuUlRMPy0xOjEpKmMud2lkdGgvMikqZDtiPShiLnkrYy5oZWlnaHQvMikqZDtjPXRoaXMuZ2V0TWV0cmljcygpO3RoaXMuc2Nyb2xsKC0oYS1jLnZpZXdXaWR0aC8yKSwtKGItYy52aWV3SGVpZ2h0LzIpKX19ZWxzZSBjb25zb2xlLndhcm4oXCJUcmllZCB0byBtb3ZlIGEgbm9uLW1vdmFibGUgd29ya3NwYWNlLiBUaGlzIGNvdWxkIHJlc3VsdCBpbiBibG9ja3MgYmVjb21pbmcgaW5hY2Nlc3NpYmxlLlwiKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuc2V0U2NhbGU9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zLnpvb21PcHRpb25zLm1heFNjYWxlJiZhPnRoaXMub3B0aW9ucy56b29tT3B0aW9ucy5tYXhTY2FsZT9hPXRoaXMub3B0aW9ucy56b29tT3B0aW9ucy5tYXhTY2FsZTp0aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMubWluU2NhbGUmJmE8dGhpcy5vcHRpb25zLnpvb21PcHRpb25zLm1pblNjYWxlJiYoYT10aGlzLm9wdGlvbnMuem9vbU9wdGlvbnMubWluU2NhbGUpO3RoaXMuc2NhbGU9YTtCbG9ja2x5LmhpZGVDaGFmZighMSk7dGhpcy5mbHlvdXRfJiYodGhpcy5mbHlvdXRfLnJlZmxvdygpLHRoaXMucmVjb3JkRGVsZXRlQXJlYXMoKSk7dGhpcy5ncmlkXyYmdGhpcy5ncmlkXy51cGRhdGUodGhpcy5zY2FsZSk7YT10aGlzLmdldE1ldHJpY3MoKTt0aGlzLnNjcm9sbFgtPWEuYWJzb2x1dGVMZWZ0O3RoaXMuc2Nyb2xsWS09YS5hYnNvbHV0ZVRvcDthLnZpZXdMZWZ0Kz1hLmFic29sdXRlTGVmdDtcbmEudmlld1RvcCs9YS5hYnNvbHV0ZVRvcDt0aGlzLnNjcm9sbCh0aGlzLnNjcm9sbFgsdGhpcy5zY3JvbGxZKTt0aGlzLnNjcm9sbGJhciYmKHRoaXMuZmx5b3V0Xz8odGhpcy5zY3JvbGxiYXIuaFNjcm9sbC5yZXNpemVWaWV3SG9yaXpvbnRhbChhKSx0aGlzLnNjcm9sbGJhci52U2Nyb2xsLnJlc2l6ZVZpZXdWZXJ0aWNhbChhKSk6KHRoaXMuc2Nyb2xsYmFyLmhTY3JvbGwucmVzaXplQ29udGVudEhvcml6b250YWwoYSksdGhpcy5zY3JvbGxiYXIudlNjcm9sbC5yZXNpemVDb250ZW50VmVydGljYWwoYSkpKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldFNjYWxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2U/dGhpcy5vcHRpb25zLnBhcmVudFdvcmtzcGFjZS5nZXRTY2FsZSgpOnRoaXMuc2NhbGV9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnNjcm9sbD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuaGlkZUNoYWZmKCEwKTt2YXIgYz10aGlzLmdldE1ldHJpY3MoKSxkPWMuY29udGVudFdpZHRoK2MuY29udGVudExlZnQtYy52aWV3V2lkdGgsZT1jLmNvbnRlbnRIZWlnaHQrYy5jb250ZW50VG9wLWMudmlld0hlaWdodDthPU1hdGgubWluKGEsLWMuY29udGVudExlZnQpO2I9TWF0aC5taW4oYiwtYy5jb250ZW50VG9wKTthPU1hdGgubWF4KGEsLWQpO2I9TWF0aC5tYXgoYiwtZSk7dGhpcy5zY3JvbGxYPWE7dGhpcy5zY3JvbGxZPWI7dGhpcy5zY3JvbGxiYXImJih0aGlzLnNjcm9sbGJhci5oU2Nyb2xsLnNldEhhbmRsZVBvc2l0aW9uKC0oYStjLmNvbnRlbnRMZWZ0KSp0aGlzLnNjcm9sbGJhci5oU2Nyb2xsLnJhdGlvKSx0aGlzLnNjcm9sbGJhci52U2Nyb2xsLnNldEhhbmRsZVBvc2l0aW9uKC0oYitjLmNvbnRlbnRUb3ApKnRoaXMuc2Nyb2xsYmFyLnZTY3JvbGwucmF0aW8pKTtcbmErPWMuYWJzb2x1dGVMZWZ0O2IrPWMuYWJzb2x1dGVUb3A7dGhpcy50cmFuc2xhdGUoYSxiKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcuZ2V0RGltZW5zaW9uc1B4Xz1mdW5jdGlvbihhKXt2YXIgYj0wLGM9MDthJiYoYj1hLmdldFdpZHRoKCksYz1hLmdldEhlaWdodCgpKTtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuU2l6ZShiLGMpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5nZXRDb250ZW50RGltZW5zaW9uc189ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5pc0NvbnRlbnRCb3VuZGVkKCk/QmxvY2tseS5Xb3Jrc3BhY2VTdmcuZ2V0Q29udGVudERpbWVuc2lvbnNCb3VuZGVkXyhhLGIpOkJsb2NrbHkuV29ya3NwYWNlU3ZnLmdldENvbnRlbnREaW1lbnNpb25zRXhhY3RfKGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLmdldENvbnRlbnREaW1lbnNpb25zRXhhY3RfPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QmxvY2tzQm91bmRpbmdCb3goKSxjPWEuc2NhbGU7YT1iLnRvcCpjO3ZhciBkPWIuYm90dG9tKmMsZT1iLmxlZnQqYztiPWIucmlnaHQqYztyZXR1cm57dG9wOmEsYm90dG9tOmQsbGVmdDplLHJpZ2h0OmIsd2lkdGg6Yi1lLGhlaWdodDpkLWF9fTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLmdldENvbnRlbnREaW1lbnNpb25zQm91bmRlZF89ZnVuY3Rpb24oYSxiKXthPUJsb2NrbHkuV29ya3NwYWNlU3ZnLmdldENvbnRlbnREaW1lbnNpb25zRXhhY3RfKGEpO3ZhciBjPWIud2lkdGg7Yj1iLmhlaWdodDt2YXIgZD1jLzIsZT1iLzIsZj1NYXRoLm1pbihhLmxlZnQtZCxhLnJpZ2h0LWMpLGc9TWF0aC5taW4oYS50b3AtZSxhLmJvdHRvbS1iKTtyZXR1cm57bGVmdDpmLHRvcDpnLGhlaWdodDpNYXRoLm1heChhLmJvdHRvbStlLGEudG9wK2IpLWcsd2lkdGg6TWF0aC5tYXgoYS5yaWdodCtkLGEubGVmdCtjKS1mfX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5nZXRUb3BMZXZlbFdvcmtzcGFjZU1ldHJpY3NfPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5Xb3Jrc3BhY2VTdmcuZ2V0RGltZW5zaW9uc1B4Xyh0aGlzLnRvb2xib3hfKSxiPUJsb2NrbHkuV29ya3NwYWNlU3ZnLmdldERpbWVuc2lvbnNQeF8odGhpcy5mbHlvdXRfKSxjPUJsb2NrbHkuc3ZnU2l6ZSh0aGlzLmdldFBhcmVudFN2ZygpKSxkPXtoZWlnaHQ6Yy5oZWlnaHQsd2lkdGg6Yy53aWR0aH07aWYodGhpcy50b29sYm94XylpZih0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX1RPUHx8dGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9CT1RUT00pZC5oZWlnaHQtPWEuaGVpZ2h0O2Vsc2V7aWYodGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUfHx0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX1JJR0hUKWQud2lkdGgtPWEud2lkdGh9ZWxzZSBpZih0aGlzLmZseW91dF8paWYodGhpcy50b29sYm94UG9zaXRpb249PVxuQmxvY2tseS5UT09MQk9YX0FUX1RPUHx8dGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9CT1RUT00pZC5oZWlnaHQtPWIuaGVpZ2h0O2Vsc2UgaWYodGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUfHx0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX1JJR0hUKWQud2lkdGgtPWIud2lkdGg7dmFyIGU9QmxvY2tseS5Xb3Jrc3BhY2VTdmcuZ2V0Q29udGVudERpbWVuc2lvbnNfKHRoaXMsZCksZj0wO3RoaXMudG9vbGJveF8mJnRoaXMudG9vbGJveFBvc2l0aW9uPT1CbG9ja2x5LlRPT0xCT1hfQVRfTEVGVD9mPWEud2lkdGg6dGhpcy5mbHlvdXRfJiZ0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX0xFRlQmJihmPWIud2lkdGgpO3ZhciBnPTA7dGhpcy50b29sYm94XyYmdGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9UT1A/Zz1hLmhlaWdodDp0aGlzLmZseW91dF8mJlxudGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9UT1AmJihnPWIuaGVpZ2h0KTtyZXR1cm57Y29udGVudEhlaWdodDplLmhlaWdodCxjb250ZW50V2lkdGg6ZS53aWR0aCxjb250ZW50VG9wOmUudG9wLGNvbnRlbnRMZWZ0OmUubGVmdCx2aWV3SGVpZ2h0OmQuaGVpZ2h0LHZpZXdXaWR0aDpkLndpZHRoLHZpZXdUb3A6LXRoaXMuc2Nyb2xsWSx2aWV3TGVmdDotdGhpcy5zY3JvbGxYLGFic29sdXRlVG9wOmcsYWJzb2x1dGVMZWZ0OmYsc3ZnSGVpZ2h0OmMuaGVpZ2h0LHN2Z1dpZHRoOmMud2lkdGgsdG9vbGJveFdpZHRoOmEud2lkdGgsdG9vbGJveEhlaWdodDphLmhlaWdodCx0b29sYm94UG9zaXRpb246dGhpcy50b29sYm94UG9zaXRpb24sZmx5b3V0V2lkdGg6Yi53aWR0aCxmbHlvdXRIZWlnaHQ6Yi5oZWlnaHR9fTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnNldFRvcExldmVsV29ya3NwYWNlTWV0cmljc189ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRNZXRyaWNzKCk7XCJudW1iZXJcIj09dHlwZW9mIGEueCYmKHRoaXMuc2Nyb2xsWD0tYi5jb250ZW50V2lkdGgqYS54LWIuY29udGVudExlZnQpO1wibnVtYmVyXCI9PXR5cGVvZiBhLnkmJih0aGlzLnNjcm9sbFk9LWIuY29udGVudEhlaWdodCphLnktYi5jb250ZW50VG9wKTt0aGlzLnRyYW5zbGF0ZSh0aGlzLnNjcm9sbFgrYi5hYnNvbHV0ZUxlZnQsdGhpcy5zY3JvbGxZK2IuYWJzb2x1dGVUb3ApfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0QmxvY2tCeUlkPWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LldvcmtzcGFjZVN2Zy5zdXBlckNsYXNzXy5nZXRCbG9ja0J5SWQuY2FsbCh0aGlzLGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRUb3BCbG9ja3M9ZnVuY3Rpb24oYSl7cmV0dXJuIEJsb2NrbHkuV29ya3NwYWNlU3ZnLnN1cGVyQ2xhc3NfLmdldFRvcEJsb2Nrcy5jYWxsKHRoaXMsYSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRUb3BCbG9jaz1mdW5jdGlvbihhKXt0aGlzLmFkZFRvcEJvdW5kZWRFbGVtZW50KGEpO0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnN1cGVyQ2xhc3NfLmFkZFRvcEJsb2NrLmNhbGwodGhpcyxhKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlbW92ZVRvcEJsb2NrPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVG9wQm91bmRlZEVsZW1lbnQoYSk7QmxvY2tseS5Xb3Jrc3BhY2VTdmcuc3VwZXJDbGFzc18ucmVtb3ZlVG9wQmxvY2suY2FsbCh0aGlzLGEpfTtcbkJsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRUb3BDb21tZW50PWZ1bmN0aW9uKGEpe3RoaXMuYWRkVG9wQm91bmRlZEVsZW1lbnQoYSk7QmxvY2tseS5Xb3Jrc3BhY2VTdmcuc3VwZXJDbGFzc18uYWRkVG9wQ29tbWVudC5jYWxsKHRoaXMsYSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5yZW1vdmVUb3BDb21tZW50PWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVG9wQm91bmRlZEVsZW1lbnQoYSk7QmxvY2tseS5Xb3Jrc3BhY2VTdmcuc3VwZXJDbGFzc18ucmVtb3ZlVG9wQ29tbWVudC5jYWxsKHRoaXMsYSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5hZGRUb3BCb3VuZGVkRWxlbWVudD1mdW5jdGlvbihhKXt0aGlzLnRvcEJvdW5kZWRFbGVtZW50c18ucHVzaChhKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVtb3ZlVG9wQm91bmRlZEVsZW1lbnQ9ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5hcnJheVJlbW92ZSh0aGlzLnRvcEJvdW5kZWRFbGVtZW50c18sYSl9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRUb3BCb3VuZGVkRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodGhpcy50b3BCb3VuZGVkRWxlbWVudHNfKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnNldFJlc2l6ZXNFbmFibGVkPWZ1bmN0aW9uKGEpe3ZhciBiPSF0aGlzLnJlc2l6ZXNFbmFibGVkXyYmYTt0aGlzLnJlc2l6ZXNFbmFibGVkXz1hO2ImJnRoaXMucmVzaXplQ29udGVudHMoKX07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldFJlc2l6ZXNFbmFibGVkKCExKTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5zdXBlckNsYXNzXy5jbGVhci5jYWxsKHRoaXMpO3RoaXMudG9wQm91bmRlZEVsZW1lbnRzXz1bXTt0aGlzLnNldFJlc2l6ZXNFbmFibGVkKCEwKX07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlZ2lzdGVyQnV0dG9uQ2FsbGJhY2s9ZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBiKXRocm93IFR5cGVFcnJvcihcIkJ1dHRvbiBjYWxsYmFja3MgbXVzdCBiZSBmdW5jdGlvbnMuXCIpO3RoaXMuZmx5b3V0QnV0dG9uQ2FsbGJhY2tzX1thXT1ifTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0QnV0dG9uQ2FsbGJhY2s9ZnVuY3Rpb24oYSl7cmV0dXJuKGE9dGhpcy5mbHlvdXRCdXR0b25DYWxsYmFja3NfW2FdKT9hOm51bGx9O1xuQmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLnJlbW92ZUJ1dHRvbkNhbGxiYWNrPWZ1bmN0aW9uKGEpe3RoaXMuZmx5b3V0QnV0dG9uQ2FsbGJhY2tzX1thXT1udWxsfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVnaXN0ZXJUb29sYm94Q2F0ZWdvcnlDYWxsYmFjaz1mdW5jdGlvbihhLGIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpdGhyb3cgVHlwZUVycm9yKFwiVG9vbGJveCBjYXRlZ29yeSBjYWxsYmFja3MgbXVzdCBiZSBmdW5jdGlvbnMuXCIpO3RoaXMudG9vbGJveENhdGVnb3J5Q2FsbGJhY2tzX1thXT1ifTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0VG9vbGJveENhdGVnb3J5Q2FsbGJhY2s9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9vbGJveENhdGVnb3J5Q2FsbGJhY2tzX1thXXx8bnVsbH07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUucmVtb3ZlVG9vbGJveENhdGVnb3J5Q2FsbGJhY2s9ZnVuY3Rpb24oYSl7dGhpcy50b29sYm94Q2F0ZWdvcnlDYWxsYmFja3NfW2FdPW51bGx9O0Jsb2NrbHkuV29ya3NwYWNlU3ZnLnByb3RvdHlwZS5nZXRHZXN0dXJlPWZ1bmN0aW9uKGEpe3ZhciBiPVwibW91c2Vkb3duXCI9PWEudHlwZXx8XCJ0b3VjaHN0YXJ0XCI9PWEudHlwZXx8XCJwb2ludGVyZG93blwiPT1hLnR5cGUsYz10aGlzLmN1cnJlbnRHZXN0dXJlXztyZXR1cm4gYz9iJiZjLmhhc1N0YXJ0ZWQoKT8oY29uc29sZS53YXJuKFwiVHJpZWQgdG8gc3RhcnQgdGhlIHNhbWUgZ2VzdHVyZSB0d2ljZS5cIiksYy5jYW5jZWwoKSxudWxsKTpjOmI/dGhpcy5jdXJyZW50R2VzdHVyZV89bmV3IEJsb2NrbHkuVG91Y2hHZXN0dXJlKGEsdGhpcyk6bnVsbH07XG5CbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuY2xlYXJHZXN0dXJlPWZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50R2VzdHVyZV89bnVsbH07QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmNhbmNlbEN1cnJlbnRHZXN0dXJlPWZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50R2VzdHVyZV8mJnRoaXMuY3VycmVudEdlc3R1cmVfLmNhbmNlbCgpfTtCbG9ja2x5LldvcmtzcGFjZVN2Zy5wcm90b3R5cGUuZ2V0QXVkaW9NYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXVkaW9NYW5hZ2VyX307QmxvY2tseS5Xb3Jrc3BhY2VTdmcucHJvdG90eXBlLmdldEdyaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmlkX307QmxvY2tseS5pbmplY3Q9ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmNoZWNrQmxvY2tDb2xvdXJDb25zdGFudHMoKTtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSl8fGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSkpO2lmKCFhfHwhQmxvY2tseS51dGlscy5kb20uY29udGFpbnNOb2RlKGRvY3VtZW50LGEpKXRocm93IEVycm9yKFwiRXJyb3I6IGNvbnRhaW5lciBpcyBub3QgaW4gY3VycmVudCBkb2N1bWVudC5cIik7Yj1uZXcgQmxvY2tseS5PcHRpb25zKGJ8fHt9KTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPVwiaW5qZWN0aW9uRGl2XCI7Yy50YWJJbmRleD0wO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZShjLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5MQUJFTCxCbG9ja2x5Lk1zZy5XT1JLU1BBQ0VfQVJJQV9MQUJFTCk7YS5hcHBlbmRDaGlsZChjKTthPUJsb2NrbHkuY3JlYXRlRG9tXyhjLGIpO3ZhciBkPVxubmV3IEJsb2NrbHkuQmxvY2tEcmFnU3VyZmFjZVN2ZyhjKSxlPW5ldyBCbG9ja2x5LldvcmtzcGFjZURyYWdTdXJmYWNlU3ZnKGMpLGY9QmxvY2tseS5jcmVhdGVNYWluV29ya3NwYWNlXyhhLGIsZCxlKTtCbG9ja2x5LnVzZXIua2V5TWFwLnNldEtleU1hcChiLmtleU1hcCk7QmxvY2tseS5pbml0XyhmKTtCbG9ja2x5Lm1haW5Xb3Jrc3BhY2U9ZjtCbG9ja2x5LnN2Z1Jlc2l6ZShmKTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsZnVuY3Rpb24oKXtCbG9ja2x5Lm1haW5Xb3Jrc3BhY2U9Zn0pO3JldHVybiBmfTtcbkJsb2NrbHkuY3JlYXRlRG9tXz1mdW5jdGlvbihhLGIpe2Euc2V0QXR0cmlidXRlKFwiZGlyXCIsXCJMVFJcIik7QmxvY2tseS5Db21wb25lbnQuZGVmYXVsdFJpZ2h0VG9MZWZ0PWIuUlRMO0Jsb2NrbHkuQ3NzLmluamVjdChiLmhhc0NzcyxiLnBhdGhUb01lZGlhKTthPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuU1ZHLHt4bWxuczpCbG9ja2x5LnV0aWxzLmRvbS5TVkdfTlMsXCJ4bWxuczpodG1sXCI6QmxvY2tseS51dGlscy5kb20uSFRNTF9OUyxcInhtbG5zOnhsaW5rXCI6QmxvY2tseS51dGlscy5kb20uWExJTktfTlMsdmVyc2lvbjpcIjEuMVwiLFwiY2xhc3NcIjpcImJsb2NrbHlTdmdcIix0YWJpbmRleDpcIjBcIn0sYSk7dmFyIGM9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5ERUZTLHt9LGEpLGQ9U3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cmluZygyKTtiLmdyaWRQYXR0ZXJuPUJsb2NrbHkuR3JpZC5jcmVhdGVEb20oZCxcbmIuZ3JpZE9wdGlvbnMsYyk7cmV0dXJuIGF9O1xuQmxvY2tseS5jcmVhdGVNYWluV29ya3NwYWNlXz1mdW5jdGlvbihhLGIsYyxkKXtiLnBhcmVudFdvcmtzcGFjZT1udWxsO3ZhciBlPW5ldyBCbG9ja2x5LldvcmtzcGFjZVN2ZyhiLGMsZCk7Yj1lLm9wdGlvbnM7ZS5zY2FsZT1iLnpvb21PcHRpb25zLnN0YXJ0U2NhbGU7YS5hcHBlbmRDaGlsZChlLmNyZWF0ZURvbShcImJsb2NrbHlNYWluQmFja2dyb3VuZFwiKSk7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoZS5nZXRJbmplY3Rpb25EaXYoKSxlLmdldFJlbmRlcmVyKCkuZ2V0Q2xhc3NOYW1lKCkpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGUuZ2V0SW5qZWN0aW9uRGl2KCksZS5nZXRUaGVtZSgpLmdldENsYXNzTmFtZSgpKTshYi5oYXNDYXRlZ29yaWVzJiZiLmxhbmd1YWdlVHJlZSYmKGM9ZS5hZGRGbHlvdXQoQmxvY2tseS51dGlscy5TdmcuU1ZHKSxCbG9ja2x5LnV0aWxzLmRvbS5pbnNlcnRBZnRlcihjLGEpKTtiLmhhc1RyYXNoY2FuJiZlLmFkZFRyYXNoY2FuKCk7Yi56b29tT3B0aW9ucyYmXG5iLnpvb21PcHRpb25zLmNvbnRyb2xzJiZlLmFkZFpvb21Db250cm9scygpO2UuZ2V0VGhlbWVNYW5hZ2VyKCkuc3Vic2NyaWJlKGEsXCJ3b3Jrc3BhY2VCYWNrZ3JvdW5kQ29sb3VyXCIsXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO2UudHJhbnNsYXRlKDAsMCk7Yi5yZWFkT25seXx8ZS5pc01vdmFibGUoKXx8ZS5hZGRDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbihmKXtpZighZS5pc0RyYWdnaW5nKCkmJiFlLmlzTW92YWJsZSgpJiYtMSE9QmxvY2tseS5FdmVudHMuQlVNUF9FVkVOVFMuaW5kZXhPZihmLnR5cGUpKXt2YXIgZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9ZS5nZXRNZXRyaWNzKCksaz1lLnNjYWxlO2cuUlRMPWUuUlRMO2cudmlld0xlZnQ9aC52aWV3TGVmdC9rO2cudmlld1RvcD1oLnZpZXdUb3AvaztnLnZpZXdSaWdodD0oaC52aWV3TGVmdCtoLnZpZXdXaWR0aCkvaztnLnZpZXdCb3R0b209KGgudmlld1RvcCtoLnZpZXdIZWlnaHQpL2s7ZS5pc0NvbnRlbnRCb3VuZGVkKCk/KGg9ZS5nZXRCbG9ja3NCb3VuZGluZ0JveCgpLFxuZy5jb250ZW50TGVmdD1oLmxlZnQsZy5jb250ZW50VG9wPWgudG9wLGcuY29udGVudFJpZ2h0PWgucmlnaHQsZy5jb250ZW50Qm90dG9tPWguYm90dG9tKTooZy5jb250ZW50TGVmdD1oLmNvbnRlbnRMZWZ0L2ssZy5jb250ZW50VG9wPWguY29udGVudFRvcC9rLGcuY29udGVudFJpZ2h0PShoLmNvbnRlbnRMZWZ0K2guY29udGVudFdpZHRoKS9rLGcuY29udGVudEJvdHRvbT0oaC5jb250ZW50VG9wK2guY29udGVudEhlaWdodCkvayk7aWYoZy5jb250ZW50VG9wPGcudmlld1RvcHx8Zy5jb250ZW50Qm90dG9tPmcudmlld0JvdHRvbXx8Zy5jb250ZW50TGVmdDxnLnZpZXdMZWZ0fHxnLmNvbnRlbnRSaWdodD5nLnZpZXdSaWdodCl7aD1udWxsO2YmJihoPUJsb2NrbHkuRXZlbnRzLmdldEdyb3VwKCksQmxvY2tseS5FdmVudHMuc2V0R3JvdXAoZi5ncm91cCkpO3N3aXRjaChmLnR5cGUpe2Nhc2UgQmxvY2tseS5FdmVudHMuQkxPQ0tfQ1JFQVRFOmNhc2UgQmxvY2tseS5FdmVudHMuQkxPQ0tfTU9WRTp2YXIgbD1cbmUuZ2V0QmxvY2tCeUlkKGYuYmxvY2tJZCk7bCYmKGw9bC5nZXRSb290QmxvY2soKSk7YnJlYWs7Y2FzZSBCbG9ja2x5LkV2ZW50cy5DT01NRU5UX0NSRUFURTpjYXNlIEJsb2NrbHkuRXZlbnRzLkNPTU1FTlRfTU9WRTpsPWUuZ2V0Q29tbWVudEJ5SWQoZi5jb21tZW50SWQpfWlmKGwpe2s9bC5nZXRCb3VuZGluZ1JlY3RhbmdsZSgpO2suaGVpZ2h0PWsuYm90dG9tLWsudG9wO2sud2lkdGg9ay5yaWdodC1rLmxlZnQ7dmFyIG09Zy52aWV3VG9wLG49Zy52aWV3Qm90dG9tLWsuaGVpZ2h0O249TWF0aC5tYXgobSxuKTttPUJsb2NrbHkudXRpbHMubWF0aC5jbGFtcChtLGsudG9wLG4pLWsudG9wO249Zy52aWV3TGVmdDt2YXIgcD1nLnZpZXdSaWdodC1rLndpZHRoO2cuUlRMP249TWF0aC5taW4ocCxuKTpwPU1hdGgubWF4KG4scCk7Zz1CbG9ja2x5LnV0aWxzLm1hdGguY2xhbXAobixrLmxlZnQscCktay5sZWZ0O2wubW92ZUJ5KGcsbSl9ZiYmKCFmLmdyb3VwJiZsJiZjb25zb2xlLndhcm4oXCJNb3ZlZCBvYmplY3QgaW4gYm91bmRzIGJ1dCB0aGVyZSB3YXMgbm8gZXZlbnQgZ3JvdXAuIFRoaXMgbWF5IGJyZWFrIHVuZG8uXCIpLFxubnVsbCE9PWgmJkJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKGgpKX19fSk7QmxvY2tseS5zdmdSZXNpemUoZSk7QmxvY2tseS5XaWRnZXREaXYuY3JlYXRlRG9tKCk7QmxvY2tseS5Ecm9wRG93bkRpdi5jcmVhdGVEb20oKTtCbG9ja2x5LlRvb2x0aXAuY3JlYXRlRG9tKCk7cmV0dXJuIGV9O1xuQmxvY2tseS5pbml0Xz1mdW5jdGlvbihhKXt2YXIgYj1hLm9wdGlvbnMsYz1hLmdldFBhcmVudFN2ZygpO0Jsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYy5wYXJlbnROb2RlLFwiY29udGV4dG1lbnVcIixudWxsLGZ1bmN0aW9uKGUpe0Jsb2NrbHkudXRpbHMuaXNUYXJnZXRJbnB1dChlKXx8ZS5wcmV2ZW50RGVmYXVsdCgpfSk7Yz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHdpbmRvdyxcInJlc2l6ZVwiLG51bGwsZnVuY3Rpb24oKXtCbG9ja2x5LmhpZGVDaGFmZighMCk7QmxvY2tseS5zdmdSZXNpemUoYSl9KTthLnNldFJlc2l6ZUhhbmRsZXJXcmFwcGVyKGMpO0Jsb2NrbHkuaW5qZWN0LmJpbmREb2N1bWVudEV2ZW50c18oKTtpZihiLmxhbmd1YWdlVHJlZSl7Yz1hLmdldFRvb2xib3goKTt2YXIgZD1hLmdldEZseW91dCghMCk7Yz9jLmluaXQoKTpkJiYoZC5pbml0KGEpLGQuc2hvdyhiLmxhbmd1YWdlVHJlZSksXCJmdW5jdGlvblwiPT10eXBlb2YgZC5zY3JvbGxUb1N0YXJ0JiZcbmQuc2Nyb2xsVG9TdGFydCgpKX1jPUJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcztiLmhhc1RyYXNoY2FuJiYoYz1hLnRyYXNoY2FuLmluaXQoYykpO2Iuem9vbU9wdGlvbnMmJmIuem9vbU9wdGlvbnMuY29udHJvbHMmJmEuem9vbUNvbnRyb2xzXy5pbml0KGMpO2IubW92ZU9wdGlvbnMmJmIubW92ZU9wdGlvbnMuc2Nyb2xsYmFycz8oYS5zY3JvbGxiYXI9bmV3IEJsb2NrbHkuU2Nyb2xsYmFyUGFpcihhKSxhLnNjcm9sbGJhci5yZXNpemUoKSk6YS5zZXRNZXRyaWNzKHt4Oi41LHk6LjV9KTtiLmhhc1NvdW5kcyYmQmxvY2tseS5pbmplY3QubG9hZFNvdW5kc18oYi5wYXRoVG9NZWRpYSxhKX07XG5CbG9ja2x5LmluamVjdC5iaW5kRG9jdW1lbnRFdmVudHNfPWZ1bmN0aW9uKCl7QmxvY2tseS5kb2N1bWVudEV2ZW50c0JvdW5kX3x8KEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZG9jdW1lbnQsXCJzY3JvbGxcIixudWxsLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPUJsb2NrbHkuV29ya3NwYWNlLmdldEFsbCgpLGI9MCxjO2M9YVtiXTtiKyspYy51cGRhdGVJbnZlcnNlU2NyZWVuQ1RNJiZjLnVwZGF0ZUludmVyc2VTY3JlZW5DVE0oKX0pLEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZG9jdW1lbnQsXCJrZXlkb3duXCIsbnVsbCxCbG9ja2x5Lm9uS2V5RG93biksQmxvY2tseS5iaW5kRXZlbnRfKGRvY3VtZW50LFwidG91Y2hlbmRcIixudWxsLEJsb2NrbHkubG9uZ1N0b3BfKSxCbG9ja2x5LmJpbmRFdmVudF8oZG9jdW1lbnQsXCJ0b3VjaGNhbmNlbFwiLG51bGwsQmxvY2tseS5sb25nU3RvcF8pLEJsb2NrbHkudXRpbHMudXNlckFnZW50LklQQUQmJkJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18od2luZG93LFxuXCJvcmllbnRhdGlvbmNoYW5nZVwiLGRvY3VtZW50LGZ1bmN0aW9uKCl7QmxvY2tseS5zdmdSZXNpemUoQmxvY2tseS5nZXRNYWluV29ya3NwYWNlKCkpfSkpO0Jsb2NrbHkuZG9jdW1lbnRFdmVudHNCb3VuZF89ITB9O1xuQmxvY2tseS5pbmplY3QubG9hZFNvdW5kc189ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmdldEF1ZGlvTWFuYWdlcigpO2MubG9hZChbYStcImNsaWNrLm1wM1wiLGErXCJjbGljay53YXZcIixhK1wiY2xpY2sub2dnXCJdLFwiY2xpY2tcIik7Yy5sb2FkKFthK1wiZGlzY29ubmVjdC53YXZcIixhK1wiZGlzY29ubmVjdC5tcDNcIixhK1wiZGlzY29ubmVjdC5vZ2dcIl0sXCJkaXNjb25uZWN0XCIpO2MubG9hZChbYStcImRlbGV0ZS5tcDNcIixhK1wiZGVsZXRlLm9nZ1wiLGErXCJkZWxldGUud2F2XCJdLFwiZGVsZXRlXCIpO3ZhciBkPVtdO2E9ZnVuY3Rpb24oKXtmb3IoO2QubGVuZ3RoOylCbG9ja2x5LnVuYmluZEV2ZW50XyhkLnBvcCgpKTtjLnByZWxvYWQoKX07ZC5wdXNoKEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixudWxsLGEsITApKTtkLnB1c2goQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkb2N1bWVudCxcInRvdWNoc3RhcnRcIixudWxsLGEsITApKX07QmxvY2tseS5OYW1lcz1mdW5jdGlvbihhLGIpe3RoaXMudmFyaWFibGVQcmVmaXhfPWJ8fFwiXCI7dGhpcy5yZXNlcnZlZERpY3RfPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoYSlmb3IoYT1hLnNwbGl0KFwiLFwiKSxiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy5yZXNlcnZlZERpY3RfW2FbYl1dPSEwO3RoaXMucmVzZXQoKX07QmxvY2tseS5OYW1lcy5ERVZFTE9QRVJfVkFSSUFCTEVfVFlQRT1cIkRFVkVMT1BFUl9WQVJJQUJMRVwiO0Jsb2NrbHkuTmFtZXMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5kYl89T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLmRiUmV2ZXJzZV89T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLnZhcmlhYmxlTWFwXz1udWxsfTtCbG9ja2x5Lk5hbWVzLnByb3RvdHlwZS5zZXRWYXJpYWJsZU1hcD1mdW5jdGlvbihhKXt0aGlzLnZhcmlhYmxlTWFwXz1hfTtcbkJsb2NrbHkuTmFtZXMucHJvdG90eXBlLmdldE5hbWVGb3JVc2VyVmFyaWFibGVfPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnZhcmlhYmxlTWFwXz8oYT10aGlzLnZhcmlhYmxlTWFwXy5nZXRWYXJpYWJsZUJ5SWQoYSkpP2EubmFtZTpudWxsOihjb25zb2xlLmxvZyhcIkRlcHJlY2F0ZWQgY2FsbCB0byBCbG9ja2x5Lk5hbWVzLnByb3RvdHlwZS5nZXROYW1lIHdpdGhvdXQgZGVmaW5pbmcgYSB2YXJpYWJsZSBtYXAuIFRvIGZpeCwgYWRkIHRoZSBmb2xsb3dpbmcgY29kZSBpbiB5b3VyIGdlbmVyYXRvcidzIGluaXQoKSBmdW5jdGlvbjpcXG5CbG9ja2x5LllvdXJHZW5lcmF0b3JOYW1lLnZhcmlhYmxlREJfLnNldFZhcmlhYmxlTWFwKHdvcmtzcGFjZS5nZXRWYXJpYWJsZU1hcCgpKTtcIiksbnVsbCl9O1xuQmxvY2tseS5OYW1lcy5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbihhLGIpe2lmKGI9PUJsb2NrbHkuVkFSSUFCTEVfQ0FURUdPUllfTkFNRSl7dmFyIGM9dGhpcy5nZXROYW1lRm9yVXNlclZhcmlhYmxlXyhhKTtjJiYoYT1jKX1jPWEudG9Mb3dlckNhc2UoKStcIl9cIitiO3ZhciBkPWI9PUJsb2NrbHkuVkFSSUFCTEVfQ0FURUdPUllfTkFNRXx8Yj09QmxvY2tseS5OYW1lcy5ERVZFTE9QRVJfVkFSSUFCTEVfVFlQRT90aGlzLnZhcmlhYmxlUHJlZml4XzpcIlwiO2lmKGMgaW4gdGhpcy5kYl8pcmV0dXJuIGQrdGhpcy5kYl9bY107YT10aGlzLmdldERpc3RpbmN0TmFtZShhLGIpO3RoaXMuZGJfW2NdPWEuc3Vic3RyKGQubGVuZ3RoKTtyZXR1cm4gYX07XG5CbG9ja2x5Lk5hbWVzLnByb3RvdHlwZS5nZXREaXN0aW5jdE5hbWU9ZnVuY3Rpb24oYSxiKXthPXRoaXMuc2FmZU5hbWVfKGEpO2Zvcih2YXIgYz1cIlwiO3RoaXMuZGJSZXZlcnNlX1thK2NdfHxhK2MgaW4gdGhpcy5yZXNlcnZlZERpY3RfOyljPWM/YysxOjI7YSs9Yzt0aGlzLmRiUmV2ZXJzZV9bYV09ITA7cmV0dXJuKGI9PUJsb2NrbHkuVkFSSUFCTEVfQ0FURUdPUllfTkFNRXx8Yj09QmxvY2tseS5OYW1lcy5ERVZFTE9QRVJfVkFSSUFCTEVfVFlQRT90aGlzLnZhcmlhYmxlUHJlZml4XzpcIlwiKSthfTtCbG9ja2x5Lk5hbWVzLnByb3RvdHlwZS5zYWZlTmFtZV89ZnVuY3Rpb24oYSl7YT8oYT1lbmNvZGVVUkkoYS5yZXBsYWNlKC8gL2csXCJfXCIpKS5yZXBsYWNlKC9bXlxcd10vZyxcIl9cIiksLTEhPVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoYVswXSkmJihhPVwibXlfXCIrYSkpOmE9QmxvY2tseS5Nc2cuVU5OQU1FRF9LRVl8fFwidW5uYW1lZFwiO3JldHVybiBhfTtcbkJsb2NrbHkuTmFtZXMuZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudG9Mb3dlckNhc2UoKT09Yi50b0xvd2VyQ2FzZSgpfTtCbG9ja2x5LlByb2NlZHVyZXM9e307QmxvY2tseS5Qcm9jZWR1cmVzLk5BTUVfVFlQRT1CbG9ja2x5LlBST0NFRFVSRV9DQVRFR09SWV9OQU1FO0Jsb2NrbHkuUHJvY2VkdXJlcy5ERUZBVUxUX0FSRz1cInhcIjtCbG9ja2x5LlByb2NlZHVyZXMuYWxsUHJvY2VkdXJlcz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEJsb2Nrc0J5VHlwZShcInByb2NlZHVyZXNfZGVmbm9yZXR1cm5cIiwhMSkubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjLmdldFByb2NlZHVyZURlZigpfSk7YT1hLmdldEJsb2Nrc0J5VHlwZShcInByb2NlZHVyZXNfZGVmcmV0dXJuXCIsITEpLm1hcChmdW5jdGlvbihjKXtyZXR1cm4gYy5nZXRQcm9jZWR1cmVEZWYoKX0pO2Iuc29ydChCbG9ja2x5LlByb2NlZHVyZXMucHJvY1R1cGxlQ29tcGFyYXRvcl8pO2Euc29ydChCbG9ja2x5LlByb2NlZHVyZXMucHJvY1R1cGxlQ29tcGFyYXRvcl8pO3JldHVybltiLGFdfTtcbkJsb2NrbHkuUHJvY2VkdXJlcy5wcm9jVHVwbGVDb21wYXJhdG9yXz1mdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZShiWzBdLnRvTG93ZXJDYXNlKCkpfTtCbG9ja2x5LlByb2NlZHVyZXMuZmluZExlZ2FsTmFtZT1mdW5jdGlvbihhLGIpe2lmKGIuaXNJbkZseW91dClyZXR1cm4gYTtmb3IoYT1hfHxCbG9ja2x5Lk1zZy5VTk5BTUVEX0tFWXx8XCJ1bm5hbWVkXCI7IUJsb2NrbHkuUHJvY2VkdXJlcy5pc0xlZ2FsTmFtZV8oYSxiLndvcmtzcGFjZSxiKTspe3ZhciBjPWEubWF0Y2goL14oLio/KShcXGQrKSQvKTthPWM/Y1sxXSsocGFyc2VJbnQoY1syXSwxMCkrMSk6YStcIjJcIn1yZXR1cm4gYX07QmxvY2tseS5Qcm9jZWR1cmVzLmlzTGVnYWxOYW1lXz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIUJsb2NrbHkuUHJvY2VkdXJlcy5pc05hbWVVc2VkKGEsYixjKX07XG5CbG9ja2x5LlByb2NlZHVyZXMuaXNOYW1lVXNlZD1mdW5jdGlvbihhLGIsYyl7Yj1iLmdldEFsbEJsb2NrcyghMSk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYltkXSE9YyYmYltkXS5nZXRQcm9jZWR1cmVEZWYpe3ZhciBlPWJbZF0uZ2V0UHJvY2VkdXJlRGVmKCk7aWYoQmxvY2tseS5OYW1lcy5lcXVhbHMoZVswXSxhKSlyZXR1cm4hMH1yZXR1cm4hMX07QmxvY2tseS5Qcm9jZWR1cmVzLnJlbmFtZT1mdW5jdGlvbihhKXthPWEudHJpbSgpO3ZhciBiPUJsb2NrbHkuUHJvY2VkdXJlcy5maW5kTGVnYWxOYW1lKGEsdGhpcy5nZXRTb3VyY2VCbG9jaygpKSxjPXRoaXMuZ2V0VmFsdWUoKTtpZihjIT1hJiZjIT1iKXthPXRoaXMuZ2V0U291cmNlQmxvY2soKS53b3Jrc3BhY2UuZ2V0QWxsQmxvY2tzKCExKTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKylhW2RdLnJlbmFtZVByb2NlZHVyZSYmYVtkXS5yZW5hbWVQcm9jZWR1cmUoYyxiKX1yZXR1cm4gYn07XG5CbG9ja2x5LlByb2NlZHVyZXMuZmx5b3V0Q2F0ZWdvcnk9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihmLGcpe2Zvcih2YXIgaD0wO2g8Zi5sZW5ndGg7aCsrKXt2YXIgaz1mW2hdWzBdLGw9ZltoXVsxXSxtPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKTttLnNldEF0dHJpYnV0ZShcInR5cGVcIixnKTttLnNldEF0dHJpYnV0ZShcImdhcFwiLDE2KTt2YXIgbj1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwibXV0YXRpb25cIik7bi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsayk7bS5hcHBlbmRDaGlsZChuKTtmb3Ioaz0wO2s8bC5sZW5ndGg7aysrKXt2YXIgcD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYXJnXCIpO3Auc2V0QXR0cmlidXRlKFwibmFtZVwiLGxba10pO24uYXBwZW5kQ2hpbGQocCl9Yy5wdXNoKG0pfX12YXIgYz1bXTtpZihCbG9ja2x5LkJsb2Nrcy5wcm9jZWR1cmVzX2RlZm5vcmV0dXJuKXt2YXIgZD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYmxvY2tcIik7XG5kLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInByb2NlZHVyZXNfZGVmbm9yZXR1cm5cIik7ZC5zZXRBdHRyaWJ1dGUoXCJnYXBcIiwxNik7dmFyIGU9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcImZpZWxkXCIpO2Uuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiTkFNRVwiKTtlLmFwcGVuZENoaWxkKEJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZVRleHROb2RlKEJsb2NrbHkuTXNnLlBST0NFRFVSRVNfREVGTk9SRVRVUk5fUFJPQ0VEVVJFKSk7ZC5hcHBlbmRDaGlsZChlKTtjLnB1c2goZCl9QmxvY2tseS5CbG9ja3MucHJvY2VkdXJlc19kZWZyZXR1cm4mJihkPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKSxkLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInByb2NlZHVyZXNfZGVmcmV0dXJuXCIpLGQuc2V0QXR0cmlidXRlKFwiZ2FwXCIsMTYpLGU9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcImZpZWxkXCIpLGUuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiTkFNRVwiKSxlLmFwcGVuZENoaWxkKEJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZVRleHROb2RlKEJsb2NrbHkuTXNnLlBST0NFRFVSRVNfREVGUkVUVVJOX1BST0NFRFVSRSkpLFxuZC5hcHBlbmRDaGlsZChlKSxjLnB1c2goZCkpO0Jsb2NrbHkuQmxvY2tzLnByb2NlZHVyZXNfaWZyZXR1cm4mJihkPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKSxkLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInByb2NlZHVyZXNfaWZyZXR1cm5cIiksZC5zZXRBdHRyaWJ1dGUoXCJnYXBcIiwxNiksYy5wdXNoKGQpKTtjLmxlbmd0aCYmY1tjLmxlbmd0aC0xXS5zZXRBdHRyaWJ1dGUoXCJnYXBcIiwyNCk7YT1CbG9ja2x5LlByb2NlZHVyZXMuYWxsUHJvY2VkdXJlcyhhKTtiKGFbMF0sXCJwcm9jZWR1cmVzX2NhbGxub3JldHVyblwiKTtiKGFbMV0sXCJwcm9jZWR1cmVzX2NhbGxyZXR1cm5cIik7cmV0dXJuIGN9O1xuQmxvY2tseS5Qcm9jZWR1cmVzLnVwZGF0ZU11dGF0b3JGbHlvdXRfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPWEuZ2V0QmxvY2tzQnlUeXBlKFwicHJvY2VkdXJlc19tdXRhdG9yYXJnXCIsITEpLGQ9MCxlO2U9Y1tkXTtkKyspYi5wdXNoKGUuZ2V0RmllbGRWYWx1ZShcIk5BTUVcIikpO2M9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcInhtbFwiKTtkPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKTtkLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInByb2NlZHVyZXNfbXV0YXRvcmFyZ1wiKTtlPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZFwiKTtlLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIk5BTUVcIik7Yj1CbG9ja2x5LlZhcmlhYmxlcy5nZW5lcmF0ZVVuaXF1ZU5hbWVGcm9tT3B0aW9ucyhCbG9ja2x5LlByb2NlZHVyZXMuREVGQVVMVF9BUkcsYik7Yj1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVUZXh0Tm9kZShiKTtlLmFwcGVuZENoaWxkKGIpO1xuZC5hcHBlbmRDaGlsZChlKTtjLmFwcGVuZENoaWxkKGQpO2EudXBkYXRlVG9vbGJveChjKX07QmxvY2tseS5Qcm9jZWR1cmVzLm11dGF0b3JPcGVuTGlzdGVuZXI9ZnVuY3Rpb24oYSl7aWYoYS50eXBlPT1CbG9ja2x5LkV2ZW50cy5VSSYmXCJtdXRhdG9yT3BlblwiPT1hLmVsZW1lbnQmJmEubmV3VmFsdWUpe2E9QmxvY2tseS5Xb3Jrc3BhY2UuZ2V0QnlJZChhLndvcmtzcGFjZUlkKS5nZXRCbG9ja0J5SWQoYS5ibG9ja0lkKTt2YXIgYj1hLnR5cGU7aWYoXCJwcm9jZWR1cmVzX2RlZm5vcmV0dXJuXCI9PWJ8fFwicHJvY2VkdXJlc19kZWZyZXR1cm5cIj09YilhPWEubXV0YXRvci5nZXRXb3Jrc3BhY2UoKSxCbG9ja2x5LlByb2NlZHVyZXMudXBkYXRlTXV0YXRvckZseW91dF8oYSksYS5hZGRDaGFuZ2VMaXN0ZW5lcihCbG9ja2x5LlByb2NlZHVyZXMubXV0YXRvckNoYW5nZUxpc3RlbmVyXyl9fTtcbkJsb2NrbHkuUHJvY2VkdXJlcy5tdXRhdG9yQ2hhbmdlTGlzdGVuZXJfPWZ1bmN0aW9uKGEpe2lmKGEudHlwZT09QmxvY2tseS5FdmVudHMuQkxPQ0tfQ1JFQVRFfHxhLnR5cGU9PUJsb2NrbHkuRXZlbnRzLkJMT0NLX0RFTEVURXx8YS50eXBlPT1CbG9ja2x5LkV2ZW50cy5CTE9DS19DSEFOR0UpYT1CbG9ja2x5LldvcmtzcGFjZS5nZXRCeUlkKGEud29ya3NwYWNlSWQpLEJsb2NrbHkuUHJvY2VkdXJlcy51cGRhdGVNdXRhdG9yRmx5b3V0XyhhKX07QmxvY2tseS5Qcm9jZWR1cmVzLmdldENhbGxlcnM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtiPWIuZ2V0QWxsQmxvY2tzKCExKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKylpZihiW2RdLmdldFByb2NlZHVyZUNhbGwpe3ZhciBlPWJbZF0uZ2V0UHJvY2VkdXJlQ2FsbCgpO2UmJkJsb2NrbHkuTmFtZXMuZXF1YWxzKGUsYSkmJmMucHVzaChiW2RdKX1yZXR1cm4gY307XG5CbG9ja2x5LlByb2NlZHVyZXMubXV0YXRlQ2FsbGVycz1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LkV2ZW50cy5yZWNvcmRVbmRvLGM9YS5nZXRQcm9jZWR1cmVEZWYoKVswXSxkPWEubXV0YXRpb25Ub0RvbSghMCk7YT1CbG9ja2x5LlByb2NlZHVyZXMuZ2V0Q2FsbGVycyhjLGEud29ya3NwYWNlKTtjPTA7Zm9yKHZhciBlO2U9YVtjXTtjKyspe3ZhciBmPWUubXV0YXRpb25Ub0RvbSgpO2Y9ZiYmQmxvY2tseS5YbWwuZG9tVG9UZXh0KGYpO2UuZG9tVG9NdXRhdGlvbihkKTt2YXIgZz1lLm11dGF0aW9uVG9Eb20oKTtnPWcmJkJsb2NrbHkuWG1sLmRvbVRvVGV4dChnKTtmIT1nJiYoQmxvY2tseS5FdmVudHMucmVjb3JkVW5kbz0hMSxCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZShlLFwibXV0YXRpb25cIixudWxsLGYsZykpLEJsb2NrbHkuRXZlbnRzLnJlY29yZFVuZG89Yil9fTtcbkJsb2NrbHkuUHJvY2VkdXJlcy5nZXREZWZpbml0aW9uPWZ1bmN0aW9uKGEsYil7Yj1iLmdldFRvcEJsb2NrcyghMSk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXS5nZXRQcm9jZWR1cmVEZWYpe3ZhciBkPWJbY10uZ2V0UHJvY2VkdXJlRGVmKCk7aWYoZCYmQmxvY2tseS5OYW1lcy5lcXVhbHMoZFswXSxhKSlyZXR1cm4gYltjXX1yZXR1cm4gbnVsbH07QmxvY2tseS5WYXJpYWJsZU1vZGVsPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMud29ya3NwYWNlPWE7dGhpcy5uYW1lPWI7dGhpcy50eXBlPWN8fFwiXCI7dGhpcy5pZF89ZHx8QmxvY2tseS51dGlscy5nZW5VaWQoKTtCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5WYXJDcmVhdGUodGhpcykpfTtCbG9ja2x5LlZhcmlhYmxlTW9kZWwucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWRffTtCbG9ja2x5LlZhcmlhYmxlTW9kZWwuY29tcGFyZUJ5TmFtZT1mdW5jdGlvbihhLGIpe2E9YS5uYW1lLnRvTG93ZXJDYXNlKCk7Yj1iLm5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gYTxiPy0xOmE9PWI/MDoxfTtCbG9ja2x5LlZhcmlhYmxlcz17fTtCbG9ja2x5LlZhcmlhYmxlcy5OQU1FX1RZUEU9QmxvY2tseS5WQVJJQUJMRV9DQVRFR09SWV9OQU1FO0Jsb2NrbHkuVmFyaWFibGVzLmFsbFVzZWRWYXJNb2RlbHM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBbGxCbG9ja3MoITEpO2E9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXS5nZXRWYXJNb2RlbHMoKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5nZXRJZCgpO2cmJihhW2ddPWYpfX1iPVtdO2ZvcihnIGluIGEpYi5wdXNoKGFbZ10pO3JldHVybiBifTtCbG9ja2x5LlZhcmlhYmxlcy5BTExfREVWRUxPUEVSX1ZBUlNfV0FSTklOR1NfQllfQkxPQ0tfVFlQRV89e307XG5CbG9ja2x5LlZhcmlhYmxlcy5hbGxEZXZlbG9wZXJWYXJpYWJsZXM9ZnVuY3Rpb24oYSl7YT1hLmdldEFsbEJsb2NrcyghMSk7Zm9yKHZhciBiPU9iamVjdC5jcmVhdGUobnVsbCksYz0wLGQ7ZD1hW2NdO2MrKyl7dmFyIGU9ZC5nZXREZXZlbG9wZXJWYXJpYWJsZXM7IWUmJmQuZ2V0RGV2ZWxvcGVyVmFycyYmKGU9ZC5nZXREZXZlbG9wZXJWYXJzLEJsb2NrbHkuVmFyaWFibGVzLkFMTF9ERVZFTE9QRVJfVkFSU19XQVJOSU5HU19CWV9CTE9DS19UWVBFX1tkLnR5cGVdfHwoY29uc29sZS53YXJuKFwiRnVuY3Rpb24gZ2V0RGV2ZWxvcGVyVmFycygpIGRlcHJlY2F0ZWQuIFVzZSBnZXREZXZlbG9wZXJWYXJpYWJsZXMoKSAoYmxvY2sgdHlwZSAnXCIrZC50eXBlK1wiJylcIiksQmxvY2tseS5WYXJpYWJsZXMuQUxMX0RFVkVMT1BFUl9WQVJTX1dBUk5JTkdTX0JZX0JMT0NLX1RZUEVfW2QudHlwZV09ITApKTtpZihlKWZvcihkPWUoKSxlPTA7ZTxkLmxlbmd0aDtlKyspYltkW2VdXT0hMH1yZXR1cm4gT2JqZWN0LmtleXMoYil9O1xuQmxvY2tseS5WYXJpYWJsZXMuZmx5b3V0Q2F0ZWdvcnk9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2Muc2V0QXR0cmlidXRlKFwidGV4dFwiLFwiJXtCS1lfTkVXX1ZBUklBQkxFfVwiKTtjLnNldEF0dHJpYnV0ZShcImNhbGxiYWNrS2V5XCIsXCJDUkVBVEVfVkFSSUFCTEVcIik7YS5yZWdpc3RlckJ1dHRvbkNhbGxiYWNrKFwiQ1JFQVRFX1ZBUklBQkxFXCIsZnVuY3Rpb24oZCl7QmxvY2tseS5WYXJpYWJsZXMuY3JlYXRlVmFyaWFibGVCdXR0b25IYW5kbGVyKGQuZ2V0VGFyZ2V0V29ya3NwYWNlKCkpfSk7Yi5wdXNoKGMpO2E9QmxvY2tseS5WYXJpYWJsZXMuZmx5b3V0Q2F0ZWdvcnlCbG9ja3MoYSk7cmV0dXJuIGI9Yi5jb25jYXQoYSl9O1xuQmxvY2tseS5WYXJpYWJsZXMuZmx5b3V0Q2F0ZWdvcnlCbG9ja3M9ZnVuY3Rpb24oYSl7YT1hLmdldFZhcmlhYmxlc09mVHlwZShcIlwiKTt2YXIgYj1bXTtpZigwPGEubGVuZ3RoKXt2YXIgYz1hW2EubGVuZ3RoLTFdO2lmKEJsb2NrbHkuQmxvY2tzLnZhcmlhYmxlc19zZXQpe3ZhciBkPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKTtkLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInZhcmlhYmxlc19zZXRcIik7ZC5zZXRBdHRyaWJ1dGUoXCJnYXBcIixCbG9ja2x5LkJsb2Nrcy5tYXRoX2NoYW5nZT84OjI0KTtkLmFwcGVuZENoaWxkKEJsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVmFyaWFibGVGaWVsZERvbShjKSk7Yi5wdXNoKGQpfUJsb2NrbHkuQmxvY2tzLm1hdGhfY2hhbmdlJiYoZD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYmxvY2tcIiksZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJtYXRoX2NoYW5nZVwiKSxkLnNldEF0dHJpYnV0ZShcImdhcFwiLEJsb2NrbHkuQmxvY2tzLnZhcmlhYmxlc19nZXQ/XG4yMDo4KSxkLmFwcGVuZENoaWxkKEJsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVmFyaWFibGVGaWVsZERvbShjKSksYz1CbG9ja2x5LlhtbC50ZXh0VG9Eb20oJzx2YWx1ZSBuYW1lPVwiREVMVEFcIj48c2hhZG93IHR5cGU9XCJtYXRoX251bWJlclwiPjxmaWVsZCBuYW1lPVwiTlVNXCI+MTwvZmllbGQ+PC9zaGFkb3c+PC92YWx1ZT4nKSxkLmFwcGVuZENoaWxkKGMpLGIucHVzaChkKSk7aWYoQmxvY2tseS5CbG9ja3MudmFyaWFibGVzX2dldCl7YS5zb3J0KEJsb2NrbHkuVmFyaWFibGVNb2RlbC5jb21wYXJlQnlOYW1lKTtjPTA7Zm9yKHZhciBlO2U9YVtjXTtjKyspZD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYmxvY2tcIiksZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ2YXJpYWJsZXNfZ2V0XCIpLGQuc2V0QXR0cmlidXRlKFwiZ2FwXCIsOCksZC5hcHBlbmRDaGlsZChCbG9ja2x5LlZhcmlhYmxlcy5nZW5lcmF0ZVZhcmlhYmxlRmllbGREb20oZSkpLGIucHVzaChkKX19cmV0dXJuIGJ9O1xuQmxvY2tseS5WYXJpYWJsZXMuVkFSX0xFVFRFUl9PUFRJT05TPVwiaWprbW5vcHFyc3R1dnd4eXphYmNkZWZnaFwiO0Jsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVW5pcXVlTmFtZT1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS5WYXJpYWJsZXMuZ2VuZXJhdGVVbmlxdWVOYW1lRnJvbU9wdGlvbnMoQmxvY2tseS5WYXJpYWJsZXMuVkFSX0xFVFRFUl9PUFRJT05TLmNoYXJBdCgwKSxhLmdldEFsbFZhcmlhYmxlTmFtZXMoKSl9O1xuQmxvY2tseS5WYXJpYWJsZXMuZ2VuZXJhdGVVbmlxdWVOYW1lRnJvbU9wdGlvbnM9ZnVuY3Rpb24oYSxiKXtpZighYi5sZW5ndGgpcmV0dXJuIGE7Zm9yKHZhciBjPUJsb2NrbHkuVmFyaWFibGVzLlZBUl9MRVRURVJfT1BUSU9OUyxkPVwiXCIsZT1jLmluZGV4T2YoYSk7Oyl7Zm9yKHZhciBmPSExLGc9MDtnPGIubGVuZ3RoO2crKylpZihiW2ddLnRvTG93ZXJDYXNlKCk9PWEpe2Y9ITA7YnJlYWt9aWYoIWYpcmV0dXJuIGE7ZSsrO2U9PWMubGVuZ3RoJiYoZT0wLGQ9TnVtYmVyKGQpKzEpO2E9Yy5jaGFyQXQoZSkrZH19O1xuQmxvY2tseS5WYXJpYWJsZXMuY3JlYXRlVmFyaWFibGVCdXR0b25IYW5kbGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jfHxcIlwiLGU9ZnVuY3Rpb24oZil7QmxvY2tseS5WYXJpYWJsZXMucHJvbXB0TmFtZShCbG9ja2x5Lk1zZy5ORVdfVkFSSUFCTEVfVElUTEUsZixmdW5jdGlvbihnKXtpZihnKXt2YXIgaD1CbG9ja2x5LlZhcmlhYmxlcy5uYW1lVXNlZFdpdGhBbnlUeXBlKGcsYSk7aWYoaCl7aWYoaC50eXBlPT1kKXZhciBrPUJsb2NrbHkuTXNnLlZBUklBQkxFX0FMUkVBRFlfRVhJU1RTLnJlcGxhY2UoXCIlMVwiLGgubmFtZSk7ZWxzZSBrPUJsb2NrbHkuTXNnLlZBUklBQkxFX0FMUkVBRFlfRVhJU1RTX0ZPUl9BTk9USEVSX1RZUEUsaz1rLnJlcGxhY2UoXCIlMVwiLGgubmFtZSkucmVwbGFjZShcIiUyXCIsaC50eXBlKTtCbG9ja2x5LmFsZXJ0KGssZnVuY3Rpb24oKXtlKGcpfSl9ZWxzZSBhLmNyZWF0ZVZhcmlhYmxlKGcsZCksYiYmYihnKX1lbHNlIGImJmIobnVsbCl9KX07ZShcIlwiKX07XG5CbG9ja2x5LlZhcmlhYmxlcy5jcmVhdGVWYXJpYWJsZT1CbG9ja2x5LlZhcmlhYmxlcy5jcmVhdGVWYXJpYWJsZUJ1dHRvbkhhbmRsZXI7XG5CbG9ja2x5LlZhcmlhYmxlcy5yZW5hbWVWYXJpYWJsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZSl7dmFyIGY9QmxvY2tseS5Nc2cuUkVOQU1FX1ZBUklBQkxFX1RJVExFLnJlcGxhY2UoXCIlMVwiLGIubmFtZSk7QmxvY2tseS5WYXJpYWJsZXMucHJvbXB0TmFtZShmLGUsZnVuY3Rpb24oZyl7aWYoZyl7dmFyIGg9QmxvY2tseS5WYXJpYWJsZXMubmFtZVVzZWRXaXRoT3RoZXJUeXBlXyhnLGIudHlwZSxhKTtoPyhoPUJsb2NrbHkuTXNnLlZBUklBQkxFX0FMUkVBRFlfRVhJU1RTX0ZPUl9BTk9USEVSX1RZUEUucmVwbGFjZShcIiUxXCIsaC5uYW1lKS5yZXBsYWNlKFwiJTJcIixoLnR5cGUpLEJsb2NrbHkuYWxlcnQoaCxmdW5jdGlvbigpe2QoZyl9KSk6KGEucmVuYW1lVmFyaWFibGVCeUlkKGIuZ2V0SWQoKSxnKSxjJiZjKGcpKX1lbHNlIGMmJmMobnVsbCl9KX07ZChcIlwiKX07XG5CbG9ja2x5LlZhcmlhYmxlcy5wcm9tcHROYW1lPWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LnByb21wdChhLGIsZnVuY3Rpb24oZCl7ZCYmKGQ9ZC5yZXBsYWNlKC9bXFxzXFx4YTBdKy9nLFwiIFwiKS50cmltKCksZD09QmxvY2tseS5Nc2cuUkVOQU1FX1ZBUklBQkxFfHxkPT1CbG9ja2x5Lk1zZy5ORVdfVkFSSUFCTEUpJiYoZD1udWxsKTtjKGQpfSl9O0Jsb2NrbHkuVmFyaWFibGVzLm5hbWVVc2VkV2l0aE90aGVyVHlwZV89ZnVuY3Rpb24oYSxiLGMpe2M9Yy5nZXRWYXJpYWJsZU1hcCgpLmdldEFsbFZhcmlhYmxlcygpO2E9YS50b0xvd2VyQ2FzZSgpO2Zvcih2YXIgZD0wLGU7ZT1jW2RdO2QrKylpZihlLm5hbWUudG9Mb3dlckNhc2UoKT09YSYmZS50eXBlIT1iKXJldHVybiBlO3JldHVybiBudWxsfTtcbkJsb2NrbHkuVmFyaWFibGVzLm5hbWVVc2VkV2l0aEFueVR5cGU9ZnVuY3Rpb24oYSxiKXtiPWIuZ2V0VmFyaWFibGVNYXAoKS5nZXRBbGxWYXJpYWJsZXMoKTthPWEudG9Mb3dlckNhc2UoKTtmb3IodmFyIGM9MCxkO2Q9YltjXTtjKyspaWYoZC5uYW1lLnRvTG93ZXJDYXNlKCk9PWEpcmV0dXJuIGQ7cmV0dXJuIG51bGx9O0Jsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVmFyaWFibGVGaWVsZERvbT1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiZmllbGRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJWQVJcIik7Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGEuZ2V0SWQoKSk7Yi5zZXRBdHRyaWJ1dGUoXCJ2YXJpYWJsZXR5cGVcIixhLnR5cGUpO2E9QmxvY2tseS51dGlscy54bWwuY3JlYXRlVGV4dE5vZGUoYS5uYW1lKTtiLmFwcGVuZENoaWxkKGEpO3JldHVybiBifTtcbkJsb2NrbHkuVmFyaWFibGVzLmdldE9yQ3JlYXRlVmFyaWFibGVQYWNrYWdlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPUJsb2NrbHkuVmFyaWFibGVzLmdldFZhcmlhYmxlKGEsYixjLGQpO2V8fChlPUJsb2NrbHkuVmFyaWFibGVzLmNyZWF0ZVZhcmlhYmxlXyhhLGIsYyxkKSk7cmV0dXJuIGV9O0Jsb2NrbHkuVmFyaWFibGVzLmdldFZhcmlhYmxlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEuZ2V0UG90ZW50aWFsVmFyaWFibGVNYXAoKSxmPW51bGw7aWYoYiYmKGY9YS5nZXRWYXJpYWJsZUJ5SWQoYiksIWYmJmUmJihmPWUuZ2V0VmFyaWFibGVCeUlkKGIpKSxmKSlyZXR1cm4gZjtpZihjKXtpZih2b2lkIDA9PWQpdGhyb3cgRXJyb3IoXCJUcmllZCB0byBsb29rIHVwIGEgdmFyaWFibGUgYnkgbmFtZSB3aXRob3V0IGEgdHlwZVwiKTtmPWEuZ2V0VmFyaWFibGUoYyxkKTshZiYmZSYmKGY9ZS5nZXRWYXJpYWJsZShjLGQpKX1yZXR1cm4gZn07XG5CbG9ja2x5LlZhcmlhYmxlcy5jcmVhdGVWYXJpYWJsZV89ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5nZXRQb3RlbnRpYWxWYXJpYWJsZU1hcCgpO2N8fChjPUJsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVW5pcXVlTmFtZShhLmlzRmx5b3V0P2EudGFyZ2V0V29ya3NwYWNlOmEpKTtyZXR1cm4gZT9lLmNyZWF0ZVZhcmlhYmxlKGMsZCxiKTphLmNyZWF0ZVZhcmlhYmxlKGMsZCxiKX07QmxvY2tseS5WYXJpYWJsZXMuZ2V0QWRkZWRWYXJpYWJsZXM9ZnVuY3Rpb24oYSxiKXthPWEuZ2V0QWxsVmFyaWFibGVzKCk7dmFyIGM9W107aWYoYi5sZW5ndGghPWEubGVuZ3RoKWZvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdOy0xPT1iLmluZGV4T2YoZSkmJmMucHVzaChlKX1yZXR1cm4gY307QmxvY2tseS5XaWRnZXREaXY9e307QmxvY2tseS5XaWRnZXREaXYub3duZXJfPW51bGw7QmxvY2tseS5XaWRnZXREaXYuZGlzcG9zZV89bnVsbDtCbG9ja2x5LldpZGdldERpdi5yZW5kZXJlckNsYXNzTmFtZV89XCJcIjtCbG9ja2x5LldpZGdldERpdi50aGVtZUNsYXNzTmFtZV89XCJcIjtCbG9ja2x5LldpZGdldERpdi5jcmVhdGVEb209ZnVuY3Rpb24oKXtCbG9ja2x5LldpZGdldERpdi5ESVZ8fChCbG9ja2x5LldpZGdldERpdi5ESVY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxCbG9ja2x5LldpZGdldERpdi5ESVYuY2xhc3NOYW1lPVwiYmxvY2tseVdpZGdldERpdlwiLChCbG9ja2x5LnBhcmVudENvbnRhaW5lcnx8ZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoQmxvY2tseS5XaWRnZXREaXYuRElWKSl9O1xuQmxvY2tseS5XaWRnZXREaXYuc2hvdz1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS5XaWRnZXREaXYuaGlkZSgpO0Jsb2NrbHkuV2lkZ2V0RGl2Lm93bmVyXz1hO0Jsb2NrbHkuV2lkZ2V0RGl2LmRpc3Bvc2VfPWM7YT1CbG9ja2x5LldpZGdldERpdi5ESVY7YS5zdHlsZS5kaXJlY3Rpb249Yj9cInJ0bFwiOlwibHRyXCI7YS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtiPUJsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpO0Jsb2NrbHkuV2lkZ2V0RGl2LnJlbmRlcmVyQ2xhc3NOYW1lXz1iLmdldFJlbmRlcmVyKCkuZ2V0Q2xhc3NOYW1lKCk7QmxvY2tseS5XaWRnZXREaXYudGhlbWVDbGFzc05hbWVfPWIuZ2V0VGhlbWUoKS5nZXRDbGFzc05hbWUoKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLEJsb2NrbHkuV2lkZ2V0RGl2LnJlbmRlcmVyQ2xhc3NOYW1lXyk7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYSxCbG9ja2x5LldpZGdldERpdi50aGVtZUNsYXNzTmFtZV8pfTtcbkJsb2NrbHkuV2lkZ2V0RGl2LmhpZGU9ZnVuY3Rpb24oKXtpZihCbG9ja2x5LldpZGdldERpdi5pc1Zpc2libGUoKSl7QmxvY2tseS5XaWRnZXREaXYub3duZXJfPW51bGw7dmFyIGE9QmxvY2tseS5XaWRnZXREaXYuRElWO2Euc3R5bGUuZGlzcGxheT1cIm5vbmVcIjthLnN0eWxlLmxlZnQ9XCJcIjthLnN0eWxlLnRvcD1cIlwiO0Jsb2NrbHkuV2lkZ2V0RGl2LmRpc3Bvc2VfJiZCbG9ja2x5LldpZGdldERpdi5kaXNwb3NlXygpO0Jsb2NrbHkuV2lkZ2V0RGl2LmRpc3Bvc2VfPW51bGw7YS50ZXh0Q29udGVudD1cIlwiO0Jsb2NrbHkuV2lkZ2V0RGl2LnJlbmRlcmVyQ2xhc3NOYW1lXyYmKEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzKGEsQmxvY2tseS5XaWRnZXREaXYucmVuZGVyZXJDbGFzc05hbWVfKSxCbG9ja2x5LldpZGdldERpdi5yZW5kZXJlckNsYXNzTmFtZV89XCJcIik7QmxvY2tseS5XaWRnZXREaXYudGhlbWVDbGFzc05hbWVfJiYoQmxvY2tseS51dGlscy5kb20ucmVtb3ZlQ2xhc3MoYSxcbkJsb2NrbHkuV2lkZ2V0RGl2LnRoZW1lQ2xhc3NOYW1lXyksQmxvY2tseS5XaWRnZXREaXYudGhlbWVDbGFzc05hbWVfPVwiXCIpO0Jsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpLm1hcmtGb2N1c2VkKCl9fTtCbG9ja2x5LldpZGdldERpdi5pc1Zpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4hIUJsb2NrbHkuV2lkZ2V0RGl2Lm93bmVyX307QmxvY2tseS5XaWRnZXREaXYuaGlkZUlmT3duZXI9ZnVuY3Rpb24oYSl7QmxvY2tseS5XaWRnZXREaXYub3duZXJfPT1hJiZCbG9ja2x5LldpZGdldERpdi5oaWRlKCl9O0Jsb2NrbHkuV2lkZ2V0RGl2LnBvc2l0aW9uSW50ZXJuYWxfPWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LldpZGdldERpdi5ESVYuc3R5bGUubGVmdD1hK1wicHhcIjtCbG9ja2x5LldpZGdldERpdi5ESVYuc3R5bGUudG9wPWIrXCJweFwiO0Jsb2NrbHkuV2lkZ2V0RGl2LkRJVi5zdHlsZS5oZWlnaHQ9YytcInB4XCJ9O1xuQmxvY2tseS5XaWRnZXREaXYucG9zaXRpb25XaXRoQW5jaG9yPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPUJsb2NrbHkuV2lkZ2V0RGl2LmNhbGN1bGF0ZVlfKGEsYixjKTthPUJsb2NrbHkuV2lkZ2V0RGl2LmNhbGN1bGF0ZVhfKGEsYixjLGQpOzA+ZT9CbG9ja2x5LldpZGdldERpdi5wb3NpdGlvbkludGVybmFsXyhhLDAsYy5oZWlnaHQrZSk6QmxvY2tseS5XaWRnZXREaXYucG9zaXRpb25JbnRlcm5hbF8oYSxlLGMuaGVpZ2h0KX07QmxvY2tseS5XaWRnZXREaXYuY2FsY3VsYXRlWF89ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZClyZXR1cm4gYj1NYXRoLm1heChiLnJpZ2h0LWMud2lkdGgsYS5sZWZ0KSxNYXRoLm1pbihiLGEucmlnaHQtYy53aWR0aCk7Yj1NYXRoLm1pbihiLmxlZnQsYS5yaWdodC1jLndpZHRoKTtyZXR1cm4gTWF0aC5tYXgoYixhLmxlZnQpfTtcbkJsb2NrbHkuV2lkZ2V0RGl2LmNhbGN1bGF0ZVlfPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5ib3R0b20rYy5oZWlnaHQ+PWEuYm90dG9tP2IudG9wLWMuaGVpZ2h0OmIuYm90dG9tfTtCbG9ja2x5LlZFUlNJT049XCIzLjIwMjAwOTI0LjRcIjtCbG9ja2x5Lm1haW5Xb3Jrc3BhY2U9bnVsbDtCbG9ja2x5LnNlbGVjdGVkPW51bGw7QmxvY2tseS5kcmFnZ2luZ0Nvbm5lY3Rpb25zPVtdO0Jsb2NrbHkuY2xpcGJvYXJkWG1sXz1udWxsO0Jsb2NrbHkuY2xpcGJvYXJkU291cmNlXz1udWxsO0Jsb2NrbHkuY2xpcGJvYXJkVHlwZUNvdW50c189bnVsbDtCbG9ja2x5LmNhY2hlM2RTdXBwb3J0ZWRfPW51bGw7QmxvY2tseS5wYXJlbnRDb250YWluZXI9bnVsbDtCbG9ja2x5LnN2Z1NpemU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCbG9ja2x5LnV0aWxzLlNpemUoYS5jYWNoZWRXaWR0aF8sYS5jYWNoZWRIZWlnaHRfKX07QmxvY2tseS5yZXNpemVTdmdDb250ZW50cz1mdW5jdGlvbihhKXthLnJlc2l6ZUNvbnRlbnRzKCl9O1xuQmxvY2tseS5zdmdSZXNpemU9ZnVuY3Rpb24oYSl7Zm9yKDthLm9wdGlvbnMucGFyZW50V29ya3NwYWNlOylhPWEub3B0aW9ucy5wYXJlbnRXb3Jrc3BhY2U7dmFyIGI9YS5nZXRQYXJlbnRTdmcoKSxjPWIucGFyZW50Tm9kZTtpZihjKXt2YXIgZD1jLm9mZnNldFdpZHRoO2M9Yy5vZmZzZXRIZWlnaHQ7Yi5jYWNoZWRXaWR0aF8hPWQmJihiLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZCtcInB4XCIpLGIuY2FjaGVkV2lkdGhfPWQpO2IuY2FjaGVkSGVpZ2h0XyE9YyYmKGIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsYytcInB4XCIpLGIuY2FjaGVkSGVpZ2h0Xz1jKTthLnJlc2l6ZSgpfX07XG5CbG9ja2x5Lm9uS2V5RG93bj1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5Lm1haW5Xb3Jrc3BhY2U7aWYoYiYmIShCbG9ja2x5LnV0aWxzLmlzVGFyZ2V0SW5wdXQoYSl8fGIucmVuZGVyZWQmJiFiLmlzVmlzaWJsZSgpKSlpZihiLm9wdGlvbnMucmVhZE9ubHkpQmxvY2tseS5uYXZpZ2F0aW9uLm9uS2V5UHJlc3MoYSk7ZWxzZXt2YXIgYz0hMTtpZihhLmtleUNvZGU9PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuRVNDKUJsb2NrbHkuaGlkZUNoYWZmKCksQmxvY2tseS5uYXZpZ2F0aW9uLm9uQmxvY2tseUFjdGlvbihCbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX0VYSVQpO2Vsc2V7aWYoIUJsb2NrbHkuR2VzdHVyZS5pblByb2dyZXNzKCkmJkJsb2NrbHkubmF2aWdhdGlvbi5vbktleVByZXNzKGEpKXJldHVybjtpZihhLmtleUNvZGU9PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuQkFDS1NQQUNFfHxhLmtleUNvZGU9PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuREVMRVRFKXthLnByZXZlbnREZWZhdWx0KCk7XG5pZihCbG9ja2x5Lkdlc3R1cmUuaW5Qcm9ncmVzcygpKXJldHVybjtCbG9ja2x5LnNlbGVjdGVkJiZCbG9ja2x5LnNlbGVjdGVkLmlzRGVsZXRhYmxlKCkmJihjPSEwKX1lbHNlIGlmKGEuYWx0S2V5fHxhLmN0cmxLZXl8fGEubWV0YUtleSl7aWYoQmxvY2tseS5HZXN0dXJlLmluUHJvZ3Jlc3MoKSlyZXR1cm47QmxvY2tseS5zZWxlY3RlZCYmQmxvY2tseS5zZWxlY3RlZC5pc0RlbGV0YWJsZSgpJiZCbG9ja2x5LnNlbGVjdGVkLmlzTW92YWJsZSgpJiYoYS5rZXlDb2RlPT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLkM/KEJsb2NrbHkuaGlkZUNoYWZmKCksQmxvY2tseS5jb3B5XyhCbG9ja2x5LnNlbGVjdGVkKSk6YS5rZXlDb2RlIT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlh8fEJsb2NrbHkuc2VsZWN0ZWQud29ya3NwYWNlLmlzRmx5b3V0fHwoQmxvY2tseS5jb3B5XyhCbG9ja2x5LnNlbGVjdGVkKSxjPSEwKSk7YS5rZXlDb2RlPT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlY/QmxvY2tseS5jbGlwYm9hcmRYbWxfJiZcbihhPUJsb2NrbHkuY2xpcGJvYXJkU291cmNlXyxhLmlzRmx5b3V0JiYoYT1hLnRhcmdldFdvcmtzcGFjZSksQmxvY2tseS5jbGlwYm9hcmRUeXBlQ291bnRzXyYmYS5pc0NhcGFjaXR5QXZhaWxhYmxlKEJsb2NrbHkuY2xpcGJvYXJkVHlwZUNvdW50c18pJiYoQmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApLGEucGFzdGUoQmxvY2tseS5jbGlwYm9hcmRYbWxfKSxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSkpKTphLmtleUNvZGU9PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuWj8oQmxvY2tseS5oaWRlQ2hhZmYoKSxiLnVuZG8oYS5zaGlmdEtleSkpOmEuY3RybEtleSYmYS5rZXlDb2RlPT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlkmJihCbG9ja2x5LmhpZGVDaGFmZigpLGIudW5kbyghMCkpfX1jJiYhQmxvY2tseS5zZWxlY3RlZC53b3Jrc3BhY2UuaXNGbHlvdXQmJihCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMCksQmxvY2tseS5oaWRlQ2hhZmYoKSxCbG9ja2x5LnNlbGVjdGVkLmRpc3Bvc2UoITAsXG4hMCksQmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITEpKX19O0Jsb2NrbHkuY29weV89ZnVuY3Rpb24oYSl7aWYoYT1hLnRvQ29weURhdGEoKSlCbG9ja2x5LmNsaXBib2FyZFhtbF89YS54bWwsQmxvY2tseS5jbGlwYm9hcmRTb3VyY2VfPWEuc291cmNlLEJsb2NrbHkuY2xpcGJvYXJkVHlwZUNvdW50c189YS50eXBlQ291bnRzfTtCbG9ja2x5LmR1cGxpY2F0ZT1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LmNsaXBib2FyZFhtbF8sYz1CbG9ja2x5LmNsaXBib2FyZFNvdXJjZV87QmxvY2tseS5jb3B5XyhhKTthLndvcmtzcGFjZS5wYXN0ZShCbG9ja2x5LmNsaXBib2FyZFhtbF8pO0Jsb2NrbHkuY2xpcGJvYXJkWG1sXz1iO0Jsb2NrbHkuY2xpcGJvYXJkU291cmNlXz1jfTtCbG9ja2x5Lm9uQ29udGV4dE1lbnVfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuaXNUYXJnZXRJbnB1dChhKXx8YS5wcmV2ZW50RGVmYXVsdCgpfTtcbkJsb2NrbHkuaGlkZUNoYWZmPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuVG9vbHRpcC5oaWRlKCk7QmxvY2tseS5XaWRnZXREaXYuaGlkZSgpO0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKTthfHwoYT1CbG9ja2x5LmdldE1haW5Xb3Jrc3BhY2UoKSxhLnRyYXNoY2FuJiZhLnRyYXNoY2FuLmZseW91dCYmYS50cmFzaGNhbi5jbG9zZUZseW91dCgpLChhPWEuZ2V0VG9vbGJveCgpKSYmYS5nZXRGbHlvdXQoKSYmYS5nZXRGbHlvdXQoKS5hdXRvQ2xvc2UmJmEuY2xlYXJTZWxlY3Rpb24oKSl9O0Jsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZT1mdW5jdGlvbigpe3JldHVybiBCbG9ja2x5Lm1haW5Xb3Jrc3BhY2V9O0Jsb2NrbHkuYWxlcnQ9ZnVuY3Rpb24oYSxiKXthbGVydChhKTtiJiZiKCl9O0Jsb2NrbHkuY29uZmlybT1mdW5jdGlvbihhLGIpe2IoY29uZmlybShhKSl9O0Jsb2NrbHkucHJvbXB0PWZ1bmN0aW9uKGEsYixjKXtjKHByb21wdChhLGIpKX07XG5CbG9ja2x5Lmpzb25Jbml0RmFjdG9yeV89ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5qc29uSW5pdChhKX19O1xuQmxvY2tseS5kZWZpbmVCbG9ja3NXaXRoSnNvbkFycmF5PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKGMpe3ZhciBkPWMudHlwZTtudWxsPT1kfHxcIlwiPT09ZD9jb25zb2xlLndhcm4oXCJCbG9jayBkZWZpbml0aW9uICNcIitiK1wiIGluIEpTT04gYXJyYXkgaXMgbWlzc2luZyBhIHR5cGUgYXR0cmlidXRlLiBTa2lwcGluZy5cIik6KEJsb2NrbHkuQmxvY2tzW2RdJiZjb25zb2xlLndhcm4oXCJCbG9jayBkZWZpbml0aW9uICNcIitiKycgaW4gSlNPTiBhcnJheSBvdmVyd3JpdGVzIHByaW9yIGRlZmluaXRpb24gb2YgXCInK2QrJ1wiLicpLEJsb2NrbHkuQmxvY2tzW2RdPXtpbml0OkJsb2NrbHkuanNvbkluaXRGYWN0b3J5XyhjKX0pfWVsc2UgY29uc29sZS53YXJuKFwiQmxvY2sgZGVmaW5pdGlvbiAjXCIrYitcIiBpbiBKU09OIGFycmF5IGlzIFwiK2MrXCIuIFNraXBwaW5nLlwiKX19O1xuQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9ITEsaD1mdW5jdGlvbihwKXt2YXIgcT0hZTtwPUJsb2NrbHkuVG91Y2guc3BsaXRFdmVudEJ5VG91Y2hlcyhwKTtmb3IodmFyIHQ9MCxyO3I9cFt0XTt0KyspaWYoIXF8fEJsb2NrbHkuVG91Y2guc2hvdWxkSGFuZGxlRXZlbnQocikpQmxvY2tseS5Ub3VjaC5zZXRDbGllbnRGcm9tVG91Y2gociksYz9kLmNhbGwoYyxyKTpkKHIpLGc9ITB9LGs9W107aWYoQmxvY2tseS51dGlscy5nbG9iYWwuUG9pbnRlckV2ZW50JiZiIGluIEJsb2NrbHkuVG91Y2guVE9VQ0hfTUFQKWZvcih2YXIgbD0wLG07bT1CbG9ja2x5LlRvdWNoLlRPVUNIX01BUFtiXVtsXTtsKyspYS5hZGRFdmVudExpc3RlbmVyKG0saCwhMSksay5wdXNoKFthLG0saF0pO2Vsc2UgaWYoYS5hZGRFdmVudExpc3RlbmVyKGIsaCwhMSksay5wdXNoKFthLGIsaF0pLGIgaW4gQmxvY2tseS5Ub3VjaC5UT1VDSF9NQVApe3ZhciBuPVxuZnVuY3Rpb24ocCl7aChwKTt2YXIgcT0hZjtnJiZxJiZwLnByZXZlbnREZWZhdWx0KCl9O2ZvcihsPTA7bT1CbG9ja2x5LlRvdWNoLlRPVUNIX01BUFtiXVtsXTtsKyspYS5hZGRFdmVudExpc3RlbmVyKG0sbiwhMSksay5wdXNoKFthLG0sbl0pfXJldHVybiBrfTtcbkJsb2NrbHkuYmluZEV2ZW50Xz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1mdW5jdGlvbihsKXtjP2QuY2FsbChjLGwpOmQobCl9LGY9W107aWYoQmxvY2tseS51dGlscy5nbG9iYWwuUG9pbnRlckV2ZW50JiZiIGluIEJsb2NrbHkuVG91Y2guVE9VQ0hfTUFQKWZvcih2YXIgZz0wLGg7aD1CbG9ja2x5LlRvdWNoLlRPVUNIX01BUFtiXVtnXTtnKyspYS5hZGRFdmVudExpc3RlbmVyKGgsZSwhMSksZi5wdXNoKFthLGgsZV0pO2Vsc2UgaWYoYS5hZGRFdmVudExpc3RlbmVyKGIsZSwhMSksZi5wdXNoKFthLGIsZV0pLGIgaW4gQmxvY2tseS5Ub3VjaC5UT1VDSF9NQVApe3ZhciBrPWZ1bmN0aW9uKGwpe2lmKGwuY2hhbmdlZFRvdWNoZXMmJjE9PWwuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKXt2YXIgbT1sLmNoYW5nZWRUb3VjaGVzWzBdO2wuY2xpZW50WD1tLmNsaWVudFg7bC5jbGllbnRZPW0uY2xpZW50WX1lKGwpO2wucHJldmVudERlZmF1bHQoKX07Zm9yKGc9MDtoPUJsb2NrbHkuVG91Y2guVE9VQ0hfTUFQW2JdW2ddO2crKylhLmFkZEV2ZW50TGlzdGVuZXIoaCxcbmssITEpLGYucHVzaChbYSxoLGtdKX1yZXR1cm4gZn07QmxvY2tseS51bmJpbmRFdmVudF89ZnVuY3Rpb24oYSl7Zm9yKDthLmxlbmd0aDspe3ZhciBiPWEucG9wKCksYz1iWzJdO2JbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihiWzFdLGMsITEpfXJldHVybiBjfTtCbG9ja2x5LmlzTnVtYmVyPWZ1bmN0aW9uKGEpe3JldHVybi9eXFxzKi0/XFxkKyhcXC5cXGQrKT9cXHMqJC8udGVzdChhKX07QmxvY2tseS5odWVUb0hleD1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS51dGlscy5jb2xvdXIuaHN2VG9IZXgoYSxCbG9ja2x5LkhTVl9TQVRVUkFUSU9OLDI1NSpCbG9ja2x5LkhTVl9WQUxVRSl9O1xuQmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRzPWZ1bmN0aW9uKCl7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTE9HSUNfSFVFXCIsW1wiQmxvY2tzXCIsXCJsb2dpY1wiLFwiSFVFXCJdLHZvaWQgMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTE9HSUNfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJMb2dpY1wiLFwiSFVFXCJdLDIxMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTE9PUFNfSFVFXCIsW1wiQmxvY2tzXCIsXCJsb29wc1wiLFwiSFVFXCJdLHZvaWQgMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTE9PUFNfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJMb29wc1wiLFwiSFVFXCJdLDEyMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTUFUSF9IVUVcIixbXCJCbG9ja3NcIixcIm1hdGhcIixcIkhVRVwiXSx2b2lkIDApO0Jsb2NrbHkuY2hlY2tCbG9ja0NvbG91ckNvbnN0YW50XyhcIk1BVEhfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJNYXRoXCIsXG5cIkhVRVwiXSwyMzApO0Jsb2NrbHkuY2hlY2tCbG9ja0NvbG91ckNvbnN0YW50XyhcIlRFWFRTX0hVRVwiLFtcIkJsb2Nrc1wiLFwidGV4dHNcIixcIkhVRVwiXSx2b2lkIDApO0Jsb2NrbHkuY2hlY2tCbG9ja0NvbG91ckNvbnN0YW50XyhcIlRFWFRTX0hVRVwiLFtcIkNvbnN0YW50c1wiLFwiVGV4dFwiLFwiSFVFXCJdLDE2MCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTElTVFNfSFVFXCIsW1wiQmxvY2tzXCIsXCJsaXN0c1wiLFwiSFVFXCJdLHZvaWQgMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiTElTVFNfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJMaXN0c1wiLFwiSFVFXCJdLDI2MCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiQ09MT1VSX0hVRVwiLFtcIkJsb2Nrc1wiLFwiY29sb3VyXCIsXCJIVUVcIl0sdm9pZCAwKTtCbG9ja2x5LmNoZWNrQmxvY2tDb2xvdXJDb25zdGFudF8oXCJDT0xPVVJfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJDb2xvdXJcIixcIkhVRVwiXSwyMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiVkFSSUFCTEVTX0hVRVwiLFxuW1wiQmxvY2tzXCIsXCJ2YXJpYWJsZXNcIixcIkhVRVwiXSx2b2lkIDApO0Jsb2NrbHkuY2hlY2tCbG9ja0NvbG91ckNvbnN0YW50XyhcIlZBUklBQkxFU19IVUVcIixbXCJDb25zdGFudHNcIixcIlZhcmlhYmxlc1wiLFwiSFVFXCJdLDMzMCk7QmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfKFwiVkFSSUFCTEVTX0RZTkFNSUNfSFVFXCIsW1wiQ29uc3RhbnRzXCIsXCJWYXJpYWJsZXNEeW5hbWljXCIsXCJIVUVcIl0sMzEwKTtCbG9ja2x5LmNoZWNrQmxvY2tDb2xvdXJDb25zdGFudF8oXCJQUk9DRURVUkVTX0hVRVwiLFtcIkJsb2Nrc1wiLFwicHJvY2VkdXJlc1wiLFwiSFVFXCJdLHZvaWQgMCl9O1xuQmxvY2tseS5jaGVja0Jsb2NrQ29sb3VyQ29uc3RhbnRfPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9XCJCbG9ja2x5XCIsZT1CbG9ja2x5LGY9MDtmPGIubGVuZ3RoOysrZilkKz1cIi5cIitiW2ZdLGUmJihlPWVbYltmXV0pO2UmJmUhPT1jJiYoYT0odm9pZCAwPT09Yz8nJTEgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEJsb2NrbHkuTXNnW1wiJTJcIl0uJzonJTEgaXMgZGVwcmVjYXRlZCBhbmQgdW51c2VkLiBPdmVycmlkZSBCbG9ja2x5Lk1zZ1tcIiUyXCJdLicpLnJlcGxhY2UoXCIlMVwiLGQpLnJlcGxhY2UoXCIlMlwiLGEpLGNvbnNvbGUud2FybihhKSl9O0Jsb2NrbHkuc2V0UGFyZW50Q29udGFpbmVyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkucGFyZW50Q29udGFpbmVyPWF9O0Jsb2NrbHkuSWNvbj1mdW5jdGlvbihhKXt0aGlzLmJsb2NrXz1hO3RoaXMuaWNvbkdyb3VwXz1udWxsfTtCbG9ja2x5Lkljb24ucHJvdG90eXBlLmNvbGxhcHNlSGlkZGVuPSEwO0Jsb2NrbHkuSWNvbi5wcm90b3R5cGUuU0laRT0xNztCbG9ja2x5Lkljb24ucHJvdG90eXBlLmJ1YmJsZV89bnVsbDtCbG9ja2x5Lkljb24ucHJvdG90eXBlLmljb25YWV89bnVsbDtcbkJsb2NrbHkuSWNvbi5wcm90b3R5cGUuY3JlYXRlSWNvbj1mdW5jdGlvbigpe3RoaXMuaWNvbkdyb3VwX3x8KHRoaXMuaWNvbkdyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse1wiY2xhc3NcIjpcImJsb2NrbHlJY29uR3JvdXBcIn0sbnVsbCksdGhpcy5ibG9ja18uaXNJbkZseW91dCYmQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy5pY29uR3JvdXBfLFwiYmxvY2tseUljb25Hcm91cFJlYWRvbmx5XCIpLHRoaXMuZHJhd0ljb25fKHRoaXMuaWNvbkdyb3VwXyksdGhpcy5ibG9ja18uZ2V0U3ZnUm9vdCgpLmFwcGVuZENoaWxkKHRoaXMuaWNvbkdyb3VwXyksQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLmljb25Hcm91cF8sXCJtb3VzZXVwXCIsdGhpcyx0aGlzLmljb25DbGlja18pLHRoaXMudXBkYXRlRWRpdGFibGUoKSl9O1xuQmxvY2tseS5JY29uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZSh0aGlzLmljb25Hcm91cF8pO3RoaXMuaWNvbkdyb3VwXz1udWxsO3RoaXMuc2V0VmlzaWJsZSghMSk7dGhpcy5ibG9ja189bnVsbH07QmxvY2tseS5JY29uLnByb3RvdHlwZS51cGRhdGVFZGl0YWJsZT1mdW5jdGlvbigpe307QmxvY2tseS5JY29uLnByb3RvdHlwZS5pc1Zpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuYnViYmxlX307QmxvY2tseS5JY29uLnByb3RvdHlwZS5pY29uQ2xpY2tfPWZ1bmN0aW9uKGEpe3RoaXMuYmxvY2tfLndvcmtzcGFjZS5pc0RyYWdnaW5nKCl8fHRoaXMuYmxvY2tfLmlzSW5GbHlvdXR8fEJsb2NrbHkudXRpbHMuaXNSaWdodEJ1dHRvbihhKXx8dGhpcy5zZXRWaXNpYmxlKCF0aGlzLmlzVmlzaWJsZSgpKX07XG5CbG9ja2x5Lkljb24ucHJvdG90eXBlLmFwcGx5Q29sb3VyPWZ1bmN0aW9uKCl7dGhpcy5pc1Zpc2libGUoKSYmdGhpcy5idWJibGVfLnNldENvbG91cih0aGlzLmJsb2NrXy5zdHlsZS5jb2xvdXJQcmltYXJ5KX07QmxvY2tseS5JY29uLnByb3RvdHlwZS5zZXRJY29uTG9jYXRpb249ZnVuY3Rpb24oYSl7dGhpcy5pY29uWFlfPWE7dGhpcy5pc1Zpc2libGUoKSYmdGhpcy5idWJibGVfLnNldEFuY2hvckxvY2F0aW9uKGEpfTtcbkJsb2NrbHkuSWNvbi5wcm90b3R5cGUuY29tcHV0ZUljb25Mb2NhdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYmxvY2tfLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKSxiPUJsb2NrbHkudXRpbHMuZ2V0UmVsYXRpdmVYWSh0aGlzLmljb25Hcm91cF8pO2E9bmV3IEJsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZShhLngrYi54K3RoaXMuU0laRS8yLGEueStiLnkrdGhpcy5TSVpFLzIpO0Jsb2NrbHkudXRpbHMuQ29vcmRpbmF0ZS5lcXVhbHModGhpcy5nZXRJY29uTG9jYXRpb24oKSxhKXx8dGhpcy5zZXRJY29uTG9jYXRpb24oYSl9O0Jsb2NrbHkuSWNvbi5wcm90b3R5cGUuZ2V0SWNvbkxvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWNvblhZX307XG5CbG9ja2x5Lkljb24ucHJvdG90eXBlLmdldENvcnJlY3RlZFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuU2l6ZShCbG9ja2x5Lkljb24ucHJvdG90eXBlLlNJWkUsQmxvY2tseS5JY29uLnByb3RvdHlwZS5TSVpFLTIpfTtCbG9ja2x5Lldhcm5pbmc9ZnVuY3Rpb24oYSl7QmxvY2tseS5XYXJuaW5nLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmNyZWF0ZUljb24oKTt0aGlzLnRleHRfPXt9fTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5Lldhcm5pbmcsQmxvY2tseS5JY29uKTtCbG9ja2x5Lldhcm5pbmcucHJvdG90eXBlLmNvbGxhcHNlSGlkZGVuPSExO1xuQmxvY2tseS5XYXJuaW5nLnByb3RvdHlwZS5kcmF3SWNvbl89ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5QQVRILHtcImNsYXNzXCI6XCJibG9ja2x5SWNvblNoYXBlXCIsZDpcIk0yLDE1US0xLDE1IDAuNSwxMkw2LjUsMS43UTgsLTEgOS41LDEuN0wxNS41LDEyUTE3LDE1IDE0LDE1elwifSxhKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse1wiY2xhc3NcIjpcImJsb2NrbHlJY29uU3ltYm9sXCIsZDpcIm03LDQuOHYzLjE2bDAuMjcsMi4yN2gxLjQ2bDAuMjcsLTIuMjd2LTMuMTZ6XCJ9LGEpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7XCJjbGFzc1wiOlwiYmxvY2tseUljb25TeW1ib2xcIix4OlwiN1wiLHk6XCIxMVwiLGhlaWdodDpcIjJcIix3aWR0aDpcIjJcIn0sYSl9O1xuQmxvY2tseS5XYXJuaW5nLnRleHRUb0RvbV89ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5URVhULHtcImNsYXNzXCI6XCJibG9ja2x5VGV4dCBibG9ja2x5QnViYmxlVGV4dCBibG9ja2x5Tm9Qb2ludGVyRXZlbnRzXCIseTpCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEh9LG51bGwpO2E9YS5zcGxpdChcIlxcblwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5UU1BBTix7ZHk6XCIxZW1cIix4OkJsb2NrbHkuQnViYmxlLkJPUkRFUl9XSURUSH0sYiksZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhW2NdKTtkLmFwcGVuZENoaWxkKGUpfXJldHVybiBifTtcbkJsb2NrbHkuV2FybmluZy5wcm90b3R5cGUuc2V0VmlzaWJsZT1mdW5jdGlvbihhKXthIT10aGlzLmlzVmlzaWJsZSgpJiYoQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuVWkodGhpcy5ibG9ja18sXCJ3YXJuaW5nT3BlblwiLCFhLGEpKSxhP3RoaXMuY3JlYXRlQnViYmxlKCk6dGhpcy5kaXNwb3NlQnViYmxlKCkpfTtcbkJsb2NrbHkuV2FybmluZy5wcm90b3R5cGUuY3JlYXRlQnViYmxlPWZ1bmN0aW9uKCl7dGhpcy5wYXJhZ3JhcGhFbGVtZW50Xz1CbG9ja2x5Lldhcm5pbmcudGV4dFRvRG9tXyh0aGlzLmdldFRleHQoKSk7dGhpcy5idWJibGVfPW5ldyBCbG9ja2x5LkJ1YmJsZSh0aGlzLmJsb2NrXy53b3Jrc3BhY2UsdGhpcy5wYXJhZ3JhcGhFbGVtZW50Xyx0aGlzLmJsb2NrXy5wYXRoT2JqZWN0LnN2Z1BhdGgsdGhpcy5pY29uWFlfLG51bGwsbnVsbCk7dGhpcy5idWJibGVfLnNldFN2Z0lkKHRoaXMuYmxvY2tfLmlkKTtpZih0aGlzLmJsb2NrXy5SVEwpZm9yKHZhciBhPXRoaXMucGFyYWdyYXBoRWxlbWVudF8uZ2V0QkJveCgpLndpZHRoLGI9MCxjO2M9dGhpcy5wYXJhZ3JhcGhFbGVtZW50Xy5jaGlsZE5vZGVzW2JdO2IrKyljLnNldEF0dHJpYnV0ZShcInRleHQtYW5jaG9yXCIsXCJlbmRcIiksYy5zZXRBdHRyaWJ1dGUoXCJ4XCIsYStCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEgpO3RoaXMuYXBwbHlDb2xvdXIoKX07XG5CbG9ja2x5Lldhcm5pbmcucHJvdG90eXBlLmRpc3Bvc2VCdWJibGU9ZnVuY3Rpb24oKXt0aGlzLmJ1YmJsZV8uZGlzcG9zZSgpO3RoaXMucGFyYWdyYXBoRWxlbWVudF89dGhpcy5ib2R5Xz10aGlzLmJ1YmJsZV89bnVsbH07QmxvY2tseS5XYXJuaW5nLnByb3RvdHlwZS5zZXRUZXh0PWZ1bmN0aW9uKGEsYil7dGhpcy50ZXh0X1tiXSE9YSYmKGE/dGhpcy50ZXh0X1tiXT1hOmRlbGV0ZSB0aGlzLnRleHRfW2JdLHRoaXMuaXNWaXNpYmxlKCkmJih0aGlzLnNldFZpc2libGUoITEpLHRoaXMuc2V0VmlzaWJsZSghMCkpKX07QmxvY2tseS5XYXJuaW5nLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7dmFyIGE9W10sYjtmb3IoYiBpbiB0aGlzLnRleHRfKWEucHVzaCh0aGlzLnRleHRfW2JdKTtyZXR1cm4gYS5qb2luKFwiXFxuXCIpfTtCbG9ja2x5Lldhcm5pbmcucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmJsb2NrXy53YXJuaW5nPW51bGw7QmxvY2tseS5JY29uLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9O0Jsb2NrbHkuQ29tbWVudD1mdW5jdGlvbihhKXtCbG9ja2x5LkNvbW1lbnQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMubW9kZWxfPWEuY29tbWVudE1vZGVsO3RoaXMubW9kZWxfLnRleHQ9dGhpcy5tb2RlbF8udGV4dHx8XCJcIjt0aGlzLmNhY2hlZFRleHRfPVwiXCI7dGhpcy5vbklucHV0V3JhcHBlcl89dGhpcy5vbkNoYW5nZVdyYXBwZXJfPXRoaXMub25XaGVlbFdyYXBwZXJfPXRoaXMub25Nb3VzZVVwV3JhcHBlcl89bnVsbDt0aGlzLmNyZWF0ZUljb24oKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5Db21tZW50LEJsb2NrbHkuSWNvbik7XG5CbG9ja2x5LkNvbW1lbnQucHJvdG90eXBlLmRyYXdJY29uXz1mdW5jdGlvbihhKXtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNJUkNMRSx7XCJjbGFzc1wiOlwiYmxvY2tseUljb25TaGFwZVwiLHI6XCI4XCIsY3g6XCI4XCIsY3k6XCI4XCJ9LGEpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUSCx7XCJjbGFzc1wiOlwiYmxvY2tseUljb25TeW1ib2xcIixkOlwibTYuOCwxMGgyYzAuMDAzLC0wLjYxNyAwLjI3MSwtMC45NjIgMC42MzMsLTEuMjY2IDIuODc1LC0yLjQwNTAuNjA3LC01LjUzNCAtMy43NjUsLTMuODc0djEuN2MzLjEyLC0xLjY1NyAzLjY5OCwwLjExOCAyLjMzNiwxLjI1LTEuMjAxLDAuOTk4IC0xLjIwMSwxLjUyOCAtMS4yMDQsMi4xOXpcIn0sYSk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtcImNsYXNzXCI6XCJibG9ja2x5SWNvblN5bWJvbFwiLFxueDpcIjYuOFwiLHk6XCIxMC43OFwiLGhlaWdodDpcIjJcIix3aWR0aDpcIjJcIn0sYSl9O1xuQmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5jcmVhdGVFZGl0b3JfPWZ1bmN0aW9uKCl7dGhpcy5mb3JlaWduT2JqZWN0Xz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZPUkVJR05PQkpFQ1Qse3g6QmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRILHk6QmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRIfSxudWxsKTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoQmxvY2tseS51dGlscy5kb20uSFRNTF9OUyxcImJvZHlcIik7YS5zZXRBdHRyaWJ1dGUoXCJ4bWxuc1wiLEJsb2NrbHkudXRpbHMuZG9tLkhUTUxfTlMpO2EuY2xhc3NOYW1lPVwiYmxvY2tseU1pbmltYWxCb2R5XCI7dmFyIGI9dGhpcy50ZXh0YXJlYV89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEJsb2NrbHkudXRpbHMuZG9tLkhUTUxfTlMsXCJ0ZXh0YXJlYVwiKTtiLmNsYXNzTmFtZT1cImJsb2NrbHlDb21tZW50VGV4dGFyZWFcIjtiLnNldEF0dHJpYnV0ZShcImRpclwiLHRoaXMuYmxvY2tfLlJUTD9cblwiUlRMXCI6XCJMVFJcIik7Yi52YWx1ZT10aGlzLm1vZGVsXy50ZXh0O3RoaXMucmVzaXplVGV4dGFyZWFfKCk7YS5hcHBlbmRDaGlsZChiKTt0aGlzLmZvcmVpZ25PYmplY3RfLmFwcGVuZENoaWxkKGEpO3RoaXMub25Nb3VzZVVwV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhiLFwibW91c2V1cFwiLHRoaXMsdGhpcy5zdGFydEVkaXRfLCEwLCEwKTt0aGlzLm9uV2hlZWxXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGIsXCJ3aGVlbFwiLHRoaXMsZnVuY3Rpb24oYyl7Yy5zdG9wUHJvcGFnYXRpb24oKX0pO3RoaXMub25DaGFuZ2VXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGIsXCJjaGFuZ2VcIix0aGlzLGZ1bmN0aW9uKGMpe3RoaXMuY2FjaGVkVGV4dF8hPXRoaXMubW9kZWxfLnRleHQmJkJsb2NrbHkuRXZlbnRzLmZpcmUobmV3IEJsb2NrbHkuRXZlbnRzLkJsb2NrQ2hhbmdlKHRoaXMuYmxvY2tfLFwiY29tbWVudFwiLG51bGwsdGhpcy5jYWNoZWRUZXh0XyxcbnRoaXMubW9kZWxfLnRleHQpKX0pO3RoaXMub25JbnB1dFdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcImlucHV0XCIsdGhpcyxmdW5jdGlvbihjKXt0aGlzLm1vZGVsXy50ZXh0PWIudmFsdWV9KTtzZXRUaW1lb3V0KGIuZm9jdXMuYmluZChiKSwwKTtyZXR1cm4gdGhpcy5mb3JlaWduT2JqZWN0X307QmxvY2tseS5Db21tZW50LnByb3RvdHlwZS51cGRhdGVFZGl0YWJsZT1mdW5jdGlvbigpe0Jsb2NrbHkuQ29tbWVudC5zdXBlckNsYXNzXy51cGRhdGVFZGl0YWJsZS5jYWxsKHRoaXMpO3RoaXMuaXNWaXNpYmxlKCkmJih0aGlzLmRpc3Bvc2VCdWJibGVfKCksdGhpcy5jcmVhdGVCdWJibGVfKCkpfTtCbG9ja2x5LkNvbW1lbnQucHJvdG90eXBlLm9uQnViYmxlUmVzaXplXz1mdW5jdGlvbigpe3RoaXMuaXNWaXNpYmxlKCkmJih0aGlzLm1vZGVsXy5zaXplPXRoaXMuYnViYmxlXy5nZXRCdWJibGVTaXplKCksdGhpcy5yZXNpemVUZXh0YXJlYV8oKSl9O1xuQmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5yZXNpemVUZXh0YXJlYV89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1vZGVsXy5zaXplLGI9MipCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEgsYz1hLndpZHRoLWI7YT1hLmhlaWdodC1iO3RoaXMuZm9yZWlnbk9iamVjdF8uc2V0QXR0cmlidXRlKFwid2lkdGhcIixjKTt0aGlzLmZvcmVpZ25PYmplY3RfLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGEpO3RoaXMudGV4dGFyZWFfLnN0eWxlLndpZHRoPWMtNCtcInB4XCI7dGhpcy50ZXh0YXJlYV8uc3R5bGUuaGVpZ2h0PWEtNCtcInB4XCJ9O0Jsb2NrbHkuQ29tbWVudC5wcm90b3R5cGUuc2V0VmlzaWJsZT1mdW5jdGlvbihhKXthIT10aGlzLmlzVmlzaWJsZSgpJiYoQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuVWkodGhpcy5ibG9ja18sXCJjb21tZW50T3BlblwiLCFhLGEpKSwodGhpcy5tb2RlbF8ucGlubmVkPWEpP3RoaXMuY3JlYXRlQnViYmxlXygpOnRoaXMuZGlzcG9zZUJ1YmJsZV8oKSl9O1xuQmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5jcmVhdGVCdWJibGVfPWZ1bmN0aW9uKCl7IXRoaXMuYmxvY2tfLmlzRWRpdGFibGUoKXx8QmxvY2tseS51dGlscy51c2VyQWdlbnQuSUU/dGhpcy5jcmVhdGVOb25FZGl0YWJsZUJ1YmJsZV8oKTp0aGlzLmNyZWF0ZUVkaXRhYmxlQnViYmxlXygpfTtCbG9ja2x5LkNvbW1lbnQucHJvdG90eXBlLmNyZWF0ZUVkaXRhYmxlQnViYmxlXz1mdW5jdGlvbigpe3RoaXMuYnViYmxlXz1uZXcgQmxvY2tseS5CdWJibGUodGhpcy5ibG9ja18ud29ya3NwYWNlLHRoaXMuY3JlYXRlRWRpdG9yXygpLHRoaXMuYmxvY2tfLnBhdGhPYmplY3Quc3ZnUGF0aCx0aGlzLmljb25YWV8sdGhpcy5tb2RlbF8uc2l6ZS53aWR0aCx0aGlzLm1vZGVsXy5zaXplLmhlaWdodCk7dGhpcy5idWJibGVfLnNldFN2Z0lkKHRoaXMuYmxvY2tfLmlkKTt0aGlzLmJ1YmJsZV8ucmVnaXN0ZXJSZXNpemVFdmVudCh0aGlzLm9uQnViYmxlUmVzaXplXy5iaW5kKHRoaXMpKTt0aGlzLmFwcGx5Q29sb3VyKCl9O1xuQmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5jcmVhdGVOb25FZGl0YWJsZUJ1YmJsZV89ZnVuY3Rpb24oKXtCbG9ja2x5Lldhcm5pbmcucHJvdG90eXBlLmNyZWF0ZUJ1YmJsZS5jYWxsKHRoaXMpfTtcbkJsb2NrbHkuQ29tbWVudC5wcm90b3R5cGUuZGlzcG9zZUJ1YmJsZV89ZnVuY3Rpb24oKXt0aGlzLnBhcmFncmFwaEVsZW1lbnRfP0Jsb2NrbHkuV2FybmluZy5wcm90b3R5cGUuZGlzcG9zZUJ1YmJsZS5jYWxsKHRoaXMpOih0aGlzLm9uTW91c2VVcFdyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlVXBXcmFwcGVyXyksdGhpcy5vbk1vdXNlVXBXcmFwcGVyXz1udWxsKSx0aGlzLm9uV2hlZWxXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25XaGVlbFdyYXBwZXJfKSx0aGlzLm9uV2hlZWxXcmFwcGVyXz1udWxsKSx0aGlzLm9uQ2hhbmdlV3JhcHBlcl8mJihCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uQ2hhbmdlV3JhcHBlcl8pLHRoaXMub25DaGFuZ2VXcmFwcGVyXz1udWxsKSx0aGlzLm9uSW5wdXRXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25JbnB1dFdyYXBwZXJfKSx0aGlzLm9uSW5wdXRXcmFwcGVyXz1cbm51bGwpLHRoaXMuYnViYmxlXy5kaXNwb3NlKCksdGhpcy5mb3JlaWduT2JqZWN0Xz10aGlzLnRleHRhcmVhXz10aGlzLmJ1YmJsZV89bnVsbCl9O0Jsb2NrbHkuQ29tbWVudC5wcm90b3R5cGUuc3RhcnRFZGl0Xz1mdW5jdGlvbihhKXt0aGlzLmJ1YmJsZV8ucHJvbW90ZSgpJiZ0aGlzLnRleHRhcmVhXy5mb2N1cygpO3RoaXMuY2FjaGVkVGV4dF89dGhpcy5tb2RlbF8udGV4dH07QmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5nZXRCdWJibGVTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWxfLnNpemV9O0Jsb2NrbHkuQ29tbWVudC5wcm90b3R5cGUuc2V0QnViYmxlU2l6ZT1mdW5jdGlvbihhLGIpe3RoaXMuYnViYmxlXz90aGlzLmJ1YmJsZV8uc2V0QnViYmxlU2l6ZShhLGIpOih0aGlzLm1vZGVsXy5zaXplLndpZHRoPWEsdGhpcy5tb2RlbF8uc2l6ZS5oZWlnaHQ9Yil9O1xuQmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiQ29tbWVudC5wcm90b3R5cGUuZ2V0VGV4dFwiLFwiQXVndXN0IDIwMTlcIixcIkRlY2VtYmVyIDIwMjBcIixcImJsb2NrLmdldENvbW1lbnRUZXh0XCIpO3JldHVybiB0aGlzLm1vZGVsXy50ZXh0fHxcIlwifTtCbG9ja2x5LkNvbW1lbnQucHJvdG90eXBlLnNldFRleHQ9ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kZXByZWNhdGlvbi53YXJuKFwiQ29tbWVudC5wcm90b3R5cGUuc2V0VGV4dFwiLFwiQXVndXN0IDIwMTlcIixcIkRlY2VtYmVyIDIwMjBcIixcImJsb2NrLnNldENvbW1lbnRUZXh0XCIpO3RoaXMubW9kZWxfLnRleHQhPWEmJih0aGlzLm1vZGVsXy50ZXh0PWEsdGhpcy51cGRhdGVUZXh0KCkpfTtcbkJsb2NrbHkuQ29tbWVudC5wcm90b3R5cGUudXBkYXRlVGV4dD1mdW5jdGlvbigpe3RoaXMudGV4dGFyZWFfP3RoaXMudGV4dGFyZWFfLnZhbHVlPXRoaXMubW9kZWxfLnRleHQ6dGhpcy5wYXJhZ3JhcGhFbGVtZW50XyYmKHRoaXMucGFyYWdyYXBoRWxlbWVudF8uZmlyc3RDaGlsZC50ZXh0Q29udGVudD10aGlzLm1vZGVsXy50ZXh0KX07QmxvY2tseS5Db21tZW50LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5ibG9ja18uY29tbWVudD1udWxsO0Jsb2NrbHkuSWNvbi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfTtCbG9ja2x5LkNzcy5yZWdpc3RlcihcIi5ibG9ja2x5Q29tbWVudFRleHRhcmVhIHssYmFja2dyb3VuZC1jb2xvcjogI2ZlZjQ5YzssYm9yZGVyOiAwOyxvdXRsaW5lOiAwOyxtYXJnaW46IDA7LHBhZGRpbmc6IDNweDsscmVzaXplOiBub25lOyxkaXNwbGF5OiBibG9jazssb3ZlcmZsb3c6IGhpZGRlbjssfVwiLnNwbGl0KFwiLFwiKSk7QmxvY2tseS5GbHlvdXRDdXJzb3I9ZnVuY3Rpb24oKXtCbG9ja2x5LkZseW91dEN1cnNvci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkZseW91dEN1cnNvcixCbG9ja2x5LkN1cnNvcik7QmxvY2tseS5GbHlvdXRDdXJzb3IucHJvdG90eXBlLm9uQmxvY2tseUFjdGlvbj1mdW5jdGlvbihhKXtzd2l0Y2goYS5uYW1lKXtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5QUkVWSU9VUzpyZXR1cm4gdGhpcy5wcmV2KCksITA7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTkVYVDpyZXR1cm4gdGhpcy5uZXh0KCksITA7ZGVmYXVsdDpyZXR1cm4hMX19O1xuQmxvY2tseS5GbHlvdXRDdXJzb3IucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1ck5vZGUoKTtpZighYSlyZXR1cm4gbnVsbDsoYT1hLm5leHQoKSkmJnRoaXMuc2V0Q3VyTm9kZShhKTtyZXR1cm4gYX07QmxvY2tseS5GbHlvdXRDdXJzb3IucHJvdG90eXBlLmluPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0Jsb2NrbHkuRmx5b3V0Q3Vyc29yLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXJOb2RlKCk7aWYoIWEpcmV0dXJuIG51bGw7KGE9YS5wcmV2KCkpJiZ0aGlzLnNldEN1ck5vZGUoYSk7cmV0dXJuIGF9O0Jsb2NrbHkuRmx5b3V0Q3Vyc29yLnByb3RvdHlwZS5vdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07QmxvY2tseS5GbHlvdXQ9ZnVuY3Rpb24oYSl7YS5nZXRNZXRyaWNzPXRoaXMuZ2V0TWV0cmljc18uYmluZCh0aGlzKTthLnNldE1ldHJpY3M9dGhpcy5zZXRNZXRyaWNzXy5iaW5kKHRoaXMpO3RoaXMud29ya3NwYWNlXz1uZXcgQmxvY2tseS5Xb3Jrc3BhY2VTdmcoYSk7dGhpcy53b3Jrc3BhY2VfLmlzRmx5b3V0PSEwO3RoaXMud29ya3NwYWNlXy5zZXRWaXNpYmxlKHRoaXMuaXNWaXNpYmxlXyk7dGhpcy5SVEw9ISFhLlJUTDt0aGlzLmhvcml6b250YWxMYXlvdXQ9ITE7dGhpcy50b29sYm94UG9zaXRpb25fPWEudG9vbGJveFBvc2l0aW9uO3RoaXMuZXZlbnRXcmFwcGVyc189W107dGhpcy5tYXRzXz1bXTt0aGlzLmJ1dHRvbnNfPVtdO3RoaXMubGlzdGVuZXJzXz1bXTt0aGlzLnBlcm1hbmVudGx5RGlzYWJsZWRfPVtdO3RoaXMudGFiV2lkdGhfPXRoaXMud29ya3NwYWNlXy5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpLlRBQl9XSURUSDt0aGlzLnRhcmdldFdvcmtzcGFjZT1udWxsfTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5hdXRvQ2xvc2U9ITA7QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmlzVmlzaWJsZV89ITE7QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmNvbnRhaW5lclZpc2libGVfPSEwO0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5DT1JORVJfUkFESVVTPTg7QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLk1BUkdJTj1CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuQ09STkVSX1JBRElVUztCbG9ja2x5LkZseW91dC5wcm90b3R5cGUuR0FQX1g9MypCbG9ja2x5LkZseW91dC5wcm90b3R5cGUuTUFSR0lOO0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5HQVBfWT0zKkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5NQVJHSU47QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLlNDUk9MTEJBUl9QQURESU5HPTI7QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLndpZHRoXz0wO0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5oZWlnaHRfPTA7XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuZHJhZ0FuZ2xlUmFuZ2VfPTcwO1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmNyZWF0ZURvbT1mdW5jdGlvbihhKXt0aGlzLnN2Z0dyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KGEse1wiY2xhc3NcIjpcImJsb2NrbHlGbHlvdXRcIixzdHlsZTpcImRpc3BsYXk6IG5vbmVcIn0sbnVsbCk7dGhpcy5zdmdCYWNrZ3JvdW5kXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse1wiY2xhc3NcIjpcImJsb2NrbHlGbHlvdXRCYWNrZ3JvdW5kXCJ9LHRoaXMuc3ZnR3JvdXBfKTt0aGlzLnN2Z0dyb3VwXy5hcHBlbmRDaGlsZCh0aGlzLndvcmtzcGFjZV8uY3JlYXRlRG9tKCkpO3RoaXMud29ya3NwYWNlXy5nZXRUaGVtZU1hbmFnZXIoKS5zdWJzY3JpYmUodGhpcy5zdmdCYWNrZ3JvdW5kXyxcImZseW91dEJhY2tncm91bmRDb2xvdXJcIixcImZpbGxcIik7dGhpcy53b3Jrc3BhY2VfLmdldFRoZW1lTWFuYWdlcigpLnN1YnNjcmliZSh0aGlzLnN2Z0JhY2tncm91bmRfLFwiZmx5b3V0T3BhY2l0eVwiLFxuXCJmaWxsLW9wYWNpdHlcIik7dGhpcy53b3Jrc3BhY2VfLmdldE1hcmtlck1hbmFnZXIoKS5zZXRDdXJzb3IobmV3IEJsb2NrbHkuRmx5b3V0Q3Vyc29yKTtyZXR1cm4gdGhpcy5zdmdHcm91cF99O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYSl7dGhpcy50YXJnZXRXb3Jrc3BhY2U9YTt0aGlzLndvcmtzcGFjZV8udGFyZ2V0V29ya3NwYWNlPWE7dGhpcy5zY3JvbGxiYXI9bmV3IEJsb2NrbHkuU2Nyb2xsYmFyKHRoaXMud29ya3NwYWNlXyx0aGlzLmhvcml6b250YWxMYXlvdXQsITEsXCJibG9ja2x5Rmx5b3V0U2Nyb2xsYmFyXCIpO3RoaXMuaGlkZSgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMuZXZlbnRXcmFwcGVyc18sQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLnN2Z0dyb3VwXyxcIndoZWVsXCIsdGhpcyx0aGlzLndoZWVsXykpO3RoaXMuYXV0b0Nsb3NlfHwodGhpcy5maWx0ZXJXcmFwcGVyXz10aGlzLmZpbHRlckZvckNhcGFjaXR5Xy5iaW5kKHRoaXMpLHRoaXMudGFyZ2V0V29ya3NwYWNlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuZmlsdGVyV3JhcHBlcl8pKTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLmV2ZW50V3JhcHBlcnNfLFxuQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyh0aGlzLnN2Z0JhY2tncm91bmRfLFwibW91c2Vkb3duXCIsdGhpcyx0aGlzLm9uTW91c2VEb3duXykpO3RoaXMud29ya3NwYWNlXy5nZXRHZXN0dXJlPXRoaXMudGFyZ2V0V29ya3NwYWNlLmdldEdlc3R1cmUuYmluZCh0aGlzLnRhcmdldFdvcmtzcGFjZSk7dGhpcy53b3Jrc3BhY2VfLnNldFZhcmlhYmxlTWFwKHRoaXMudGFyZ2V0V29ya3NwYWNlLmdldFZhcmlhYmxlTWFwKCkpO3RoaXMud29ya3NwYWNlXy5jcmVhdGVQb3RlbnRpYWxWYXJpYWJsZU1hcCgpfTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5oaWRlKCk7QmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5ldmVudFdyYXBwZXJzXyk7dGhpcy5maWx0ZXJXcmFwcGVyXyYmKHRoaXMudGFyZ2V0V29ya3NwYWNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuZmlsdGVyV3JhcHBlcl8pLHRoaXMuZmlsdGVyV3JhcHBlcl89bnVsbCk7dGhpcy5zY3JvbGxiYXImJih0aGlzLnNjcm9sbGJhci5kaXNwb3NlKCksdGhpcy5zY3JvbGxiYXI9bnVsbCk7dGhpcy53b3Jrc3BhY2VfJiYodGhpcy53b3Jrc3BhY2VfLmdldFRoZW1lTWFuYWdlcigpLnVuc3Vic2NyaWJlKHRoaXMuc3ZnQmFja2dyb3VuZF8pLHRoaXMud29ya3NwYWNlXy50YXJnZXRXb3Jrc3BhY2U9bnVsbCx0aGlzLndvcmtzcGFjZV8uZGlzcG9zZSgpLHRoaXMud29ya3NwYWNlXz1udWxsKTt0aGlzLnN2Z0dyb3VwXyYmKEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5zdmdHcm91cF8pLFxudGhpcy5zdmdHcm91cF89bnVsbCk7dGhpcy50YXJnZXRXb3Jrc3BhY2U9dGhpcy5zdmdCYWNrZ3JvdW5kXz1udWxsfTtCbG9ja2x5LkZseW91dC5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aF99O0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5nZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHRffTtCbG9ja2x5LkZseW91dC5wcm90b3R5cGUuZ2V0V29ya3NwYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud29ya3NwYWNlX307QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlzaWJsZV99O0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5zZXRWaXNpYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPWEhPXRoaXMuaXNWaXNpYmxlKCk7dGhpcy5pc1Zpc2libGVfPWE7YiYmdGhpcy51cGRhdGVEaXNwbGF5XygpfTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5zZXRDb250YWluZXJWaXNpYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPWEhPXRoaXMuY29udGFpbmVyVmlzaWJsZV87dGhpcy5jb250YWluZXJWaXNpYmxlXz1hO2ImJnRoaXMudXBkYXRlRGlzcGxheV8oKX07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLnVwZGF0ZURpc3BsYXlfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250YWluZXJWaXNpYmxlXz90aGlzLmlzVmlzaWJsZSgpOiExO3RoaXMuc3ZnR3JvdXBfLnN0eWxlLmRpc3BsYXk9YT9cImJsb2NrXCI6XCJub25lXCI7dGhpcy5zY3JvbGxiYXIuc2V0Q29udGFpbmVyVmlzaWJsZShhKX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUucG9zaXRpb25BdF89ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5zdmdHcm91cF8uc2V0QXR0cmlidXRlKFwid2lkdGhcIixhKTt0aGlzLnN2Z0dyb3VwXy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixiKTtcInN2Z1wiPT10aGlzLnN2Z0dyb3VwXy50YWdOYW1lP0Jsb2NrbHkudXRpbHMuZG9tLnNldENzc1RyYW5zZm9ybSh0aGlzLnN2Z0dyb3VwXyxcInRyYW5zbGF0ZShcIitjK1wicHgsXCIrZCtcInB4KVwiKTp0aGlzLnN2Z0dyb3VwXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIitjK1wiLFwiK2QrXCIpXCIpO3RoaXMuc2Nyb2xsYmFyJiYodGhpcy5zY3JvbGxiYXIuc2V0T3JpZ2luKGMsZCksdGhpcy5zY3JvbGxiYXIucmVzaXplKCksdGhpcy5zY3JvbGxiYXIuc2V0UG9zaXRpb24odGhpcy5zY3JvbGxiYXIucG9zaXRpb24ueCx0aGlzLnNjcm9sbGJhci5wb3NpdGlvbi55KSl9O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZih0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLnNldFZpc2libGUoITEpO2Zvcih2YXIgYT0wLGI7Yj10aGlzLmxpc3RlbmVyc19bYV07YSsrKUJsb2NrbHkudW5iaW5kRXZlbnRfKGIpO3RoaXMubGlzdGVuZXJzXy5sZW5ndGg9MDt0aGlzLnJlZmxvd1dyYXBwZXJfJiYodGhpcy53b3Jrc3BhY2VfLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMucmVmbG93V3JhcHBlcl8pLHRoaXMucmVmbG93V3JhcHBlcl89bnVsbCl9fTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGEpe3RoaXMud29ya3NwYWNlXy5zZXRSZXNpemVzRW5hYmxlZCghMSk7dGhpcy5oaWRlKCk7dGhpcy5jbGVhck9sZEJsb2Nrc18oKTtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dGhpcy5nZXREeW5hbWljQ2F0ZWdvcnlDb250ZW50c18oYSkpO3RoaXMuc2V0VmlzaWJsZSghMCk7YT1CbG9ja2x5LnV0aWxzLnRvb2xib3guY29udmVydEZseW91dERlZlRvSnNvbkFycmF5KGEpO2E9dGhpcy5jcmVhdGVGbHlvdXRJbmZvXyhhKTt0aGlzLmxheW91dF8oYS5jb250ZW50cyxhLmdhcHMpO3RoaXMubGlzdGVuZXJzXy5wdXNoKEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18odGhpcy5zdmdCYWNrZ3JvdW5kXyxcIm1vdXNlb3ZlclwiLHRoaXMsZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy53b3Jrc3BhY2VfLmdldFRvcEJsb2NrcyghMSksYz0wLGQ7ZD1iW2NdO2MrKylkLnJlbW92ZVNlbGVjdCgpfSkpO3RoaXMuaG9yaXpvbnRhbExheW91dD9cbnRoaXMuaGVpZ2h0Xz0wOnRoaXMud2lkdGhfPTA7dGhpcy53b3Jrc3BhY2VfLnNldFJlc2l6ZXNFbmFibGVkKCEwKTt0aGlzLnJlZmxvdygpO3RoaXMuZmlsdGVyRm9yQ2FwYWNpdHlfKCk7dGhpcy5wb3NpdGlvbigpO3RoaXMucmVmbG93V3JhcHBlcl89dGhpcy5yZWZsb3cuYmluZCh0aGlzKTt0aGlzLndvcmtzcGFjZV8uYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5yZWZsb3dXcmFwcGVyXyl9O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmNyZWF0ZUZseW91dEluZm9fPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W107dGhpcy5wZXJtYW5lbnRseURpc2FibGVkXy5sZW5ndGg9MDtmb3IodmFyIGQ9dGhpcy5ob3Jpem9udGFsTGF5b3V0P3RoaXMuR0FQX1g6dGhpcy5HQVBfWSxlPTAsZjtmPWFbZV07ZSsrKXN3aXRjaChmLmN1c3RvbSYmKGY9dGhpcy5nZXREeW5hbWljQ2F0ZWdvcnlDb250ZW50c18oZi5jdXN0b20pLGY9QmxvY2tseS51dGlscy50b29sYm94LmNvbnZlcnRGbHlvdXREZWZUb0pzb25BcnJheShmKSxhLnNwbGljZS5hcHBseShhLFtlLDFdLmNvbmNhdChmKSksZj1hW2VdKSxmLmtpbmQudG9VcHBlckNhc2UoKSl7Y2FzZSBcIkJMT0NLXCI6dmFyIGc9ZixoPXRoaXMuZ2V0QmxvY2tYbWxfKGcpO2Y9dGhpcy5jcmVhdGVCbG9ja18oaCk7Zz1wYXJzZUludChnLmdhcHx8aC5nZXRBdHRyaWJ1dGUoXCJnYXBcIiksMTApO2MucHVzaChpc05hTihnKT9kOmcpO2IucHVzaCh7dHlwZTpcImJsb2NrXCIsXG5ibG9jazpmfSk7YnJlYWs7Y2FzZSBcIlNFUFwiOnRoaXMuYWRkU2VwYXJhdG9yR2FwXyhmLGMsZCk7YnJlYWs7Y2FzZSBcIkxBQkVMXCI6Zj10aGlzLmNyZWF0ZUJ1dHRvbl8oZiwhMCk7Yi5wdXNoKHt0eXBlOlwiYnV0dG9uXCIsYnV0dG9uOmZ9KTtjLnB1c2goZCk7YnJlYWs7Y2FzZSBcIkJVVFRPTlwiOmY9dGhpcy5jcmVhdGVCdXR0b25fKGYsITEpLGIucHVzaCh7dHlwZTpcImJ1dHRvblwiLGJ1dHRvbjpmfSksYy5wdXNoKGQpfXJldHVybntjb250ZW50czpiLGdhcHM6Y319O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmdldER5bmFtaWNDYXRlZ29yeUNvbnRlbnRzXz1mdW5jdGlvbihhKXthPXRoaXMud29ya3NwYWNlXy50YXJnZXRXb3Jrc3BhY2UuZ2V0VG9vbGJveENhdGVnb3J5Q2FsbGJhY2soYSk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBUeXBlRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBvcGVuaW5nIGEgdG9vbGJveCBjYXRlZ29yeS5cIik7YT1hKHRoaXMud29ya3NwYWNlXy50YXJnZXRXb3Jrc3BhY2UpO2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJSZXN1bHQgb2YgdG9vbGJveCBjYXRlZ29yeSBjYWxsYmFjayBtdXN0IGJlIGFuIGFycmF5LlwiKTtyZXR1cm4gYX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuY3JlYXRlQnV0dG9uXz1mdW5jdGlvbihhLGIpe2lmKCFCbG9ja2x5LkZseW91dEJ1dHRvbil0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5GbHlvdXRCdXR0b25cIik7cmV0dXJuIG5ldyBCbG9ja2x5LkZseW91dEJ1dHRvbih0aGlzLndvcmtzcGFjZV8sdGhpcy50YXJnZXRXb3Jrc3BhY2UsYSxiKX07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmNyZWF0ZUJsb2NrXz1mdW5jdGlvbihhKXthPUJsb2NrbHkuWG1sLmRvbVRvQmxvY2soYSx0aGlzLndvcmtzcGFjZV8pO2EuaXNFbmFibGVkKCl8fHRoaXMucGVybWFuZW50bHlEaXNhYmxlZF8ucHVzaChhKTtyZXR1cm4gYX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuZ2V0QmxvY2tYbWxfPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYz1hLmJsb2NreG1sO2MmJlwic3RyaW5nXCIhPXR5cGVvZiBjP2I9YzpjJiZcInN0cmluZ1wiPT10eXBlb2YgYz8oYj1CbG9ja2x5LlhtbC50ZXh0VG9Eb20oYyksYS5ibG9ja3htbD1iKTphLnR5cGUmJihiPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJ4bWxcIiksYi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYS50eXBlKSxiLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsYS5kaXNhYmxlZCksYS5ibG9ja3htbD1iKTtpZighYil0aHJvdyBFcnJvcihcIkVycm9yOiBJbnZhbGlkIGJsb2NrIGRlZmluaXRpb24uIEJsb2NrIGRlZmluaXRpb24gbXVzdCBoYXZlIGJsb2NreG1sIG9yIHR5cGUuXCIpO3JldHVybiBifTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5hZGRTZXBhcmF0b3JHYXBfPWZ1bmN0aW9uKGEsYixjKXthPXBhcnNlSW50KGEuZ2FwLDEwKTshaXNOYU4oYSkmJjA8Yi5sZW5ndGg/YltiLmxlbmd0aC0xXT1hOmIucHVzaChjKX07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmNsZWFyT2xkQmxvY2tzXz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmtzcGFjZV8uZ2V0VG9wQmxvY2tzKCExKSxiPTAsYztjPWFbYl07YisrKWMud29ya3NwYWNlPT10aGlzLndvcmtzcGFjZV8mJmMuZGlzcG9zZSghMSwhMSk7Zm9yKGI9MDtiPHRoaXMubWF0c18ubGVuZ3RoO2IrKylpZihhPXRoaXMubWF0c19bYl0pQmxvY2tseS5Ub29sdGlwLnVuYmluZE1vdXNlRXZlbnRzKGEpLEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUoYSk7Zm9yKGI9dGhpcy5tYXRzXy5sZW5ndGg9MDthPXRoaXMuYnV0dG9uc19bYl07YisrKWEuZGlzcG9zZSgpO3RoaXMuYnV0dG9uc18ubGVuZ3RoPTA7dGhpcy53b3Jrc3BhY2VfLmdldFBvdGVudGlhbFZhcmlhYmxlTWFwKCkuY2xlYXIoKX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuYWRkQmxvY2tMaXN0ZW5lcnNfPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmxpc3RlbmVyc18ucHVzaChCbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGEsXCJtb3VzZWRvd25cIixudWxsLHRoaXMuYmxvY2tNb3VzZURvd25fKGIpKSk7dGhpcy5saXN0ZW5lcnNfLnB1c2goQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhjLFwibW91c2Vkb3duXCIsbnVsbCx0aGlzLmJsb2NrTW91c2VEb3duXyhiKSkpO3RoaXMubGlzdGVuZXJzXy5wdXNoKEJsb2NrbHkuYmluZEV2ZW50XyhhLFwibW91c2VlbnRlclwiLGIsYi5hZGRTZWxlY3QpKTt0aGlzLmxpc3RlbmVyc18ucHVzaChCbG9ja2x5LmJpbmRFdmVudF8oYSxcIm1vdXNlbGVhdmVcIixiLGIucmVtb3ZlU2VsZWN0KSk7dGhpcy5saXN0ZW5lcnNfLnB1c2goQmxvY2tseS5iaW5kRXZlbnRfKGMsXCJtb3VzZWVudGVyXCIsYixiLmFkZFNlbGVjdCkpO3RoaXMubGlzdGVuZXJzXy5wdXNoKEJsb2NrbHkuYmluZEV2ZW50XyhjLFxuXCJtb3VzZWxlYXZlXCIsYixiLnJlbW92ZVNlbGVjdCkpfTtCbG9ja2x5LkZseW91dC5wcm90b3R5cGUuYmxvY2tNb3VzZURvd25fPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWIudGFyZ2V0V29ya3NwYWNlLmdldEdlc3R1cmUoYyk7ZCYmKGQuc2V0U3RhcnRCbG9jayhhKSxkLmhhbmRsZUZseW91dFN0YXJ0KGMsYikpfX07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLm9uTW91c2VEb3duXz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnRhcmdldFdvcmtzcGFjZS5nZXRHZXN0dXJlKGEpO2ImJmIuaGFuZGxlRmx5b3V0U3RhcnQoYSx0aGlzKX07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmlzQmxvY2tDcmVhdGFibGVfPWZ1bmN0aW9uKGEpe3JldHVybiBhLmlzRW5hYmxlZCgpfTtcbkJsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5jcmVhdGVCbG9jaz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO0Jsb2NrbHkuRXZlbnRzLmRpc2FibGUoKTt2YXIgYz10aGlzLnRhcmdldFdvcmtzcGFjZS5nZXRBbGxWYXJpYWJsZXMoKTt0aGlzLnRhcmdldFdvcmtzcGFjZS5zZXRSZXNpemVzRW5hYmxlZCghMSk7dHJ5e2I9dGhpcy5wbGFjZU5ld0Jsb2NrXyhhKX1maW5hbGx5e0Jsb2NrbHkuRXZlbnRzLmVuYWJsZSgpfUJsb2NrbHkuaGlkZUNoYWZmKCk7YT1CbG9ja2x5LlZhcmlhYmxlcy5nZXRBZGRlZFZhcmlhYmxlcyh0aGlzLnRhcmdldFdvcmtzcGFjZSxjKTtpZihCbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSl7QmxvY2tseS5FdmVudHMuc2V0R3JvdXAoITApO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuVmFyQ3JlYXRlKGFbY10pKTtCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5DcmVhdGUoYikpfXRoaXMuYXV0b0Nsb3NlP1xudGhpcy5oaWRlKCk6dGhpcy5maWx0ZXJGb3JDYXBhY2l0eV8oKTtyZXR1cm4gYn07QmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmluaXRGbHlvdXRCdXR0b25fPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmNyZWF0ZURvbSgpO2EubW92ZVRvKGIsYyk7YS5zaG93KCk7dGhpcy5saXN0ZW5lcnNfLnB1c2goQmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhkLFwibW91c2Vkb3duXCIsdGhpcyx0aGlzLm9uTW91c2VEb3duXykpO3RoaXMuYnV0dG9uc18ucHVzaChhKX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUuY3JlYXRlUmVjdF89ZnVuY3Rpb24oYSxiLGMsZCxlKXtiPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7XCJmaWxsLW9wYWNpdHlcIjowLHg6Yix5OmMsaGVpZ2h0OmQuaGVpZ2h0LHdpZHRoOmQud2lkdGh9LG51bGwpO2IudG9vbHRpcD1hO0Jsb2NrbHkuVG9vbHRpcC5iaW5kTW91c2VFdmVudHMoYik7dGhpcy53b3Jrc3BhY2VfLmdldENhbnZhcygpLmluc2VydEJlZm9yZShiLGEuZ2V0U3ZnUm9vdCgpKTthLmZseW91dFJlY3RfPWI7cmV0dXJuIHRoaXMubWF0c19bZV09Yn07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUubW92ZVJlY3RUb0Jsb2NrXz1mdW5jdGlvbihhLGIpe3ZhciBjPWIuZ2V0SGVpZ2h0V2lkdGgoKTthLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYy53aWR0aCk7YS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixjLmhlaWdodCk7Yj1iLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTthLnNldEF0dHJpYnV0ZShcInlcIixiLnkpO2Euc2V0QXR0cmlidXRlKFwieFwiLHRoaXMuUlRMP2IueC1jLndpZHRoOmIueCl9O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmZpbHRlckZvckNhcGFjaXR5Xz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLndvcmtzcGFjZV8uZ2V0VG9wQmxvY2tzKCExKSxiPTAsYztjPWFbYl07YisrKWlmKC0xPT10aGlzLnBlcm1hbmVudGx5RGlzYWJsZWRfLmluZGV4T2YoYykpZm9yKHZhciBkPXRoaXMudGFyZ2V0V29ya3NwYWNlLmlzQ2FwYWNpdHlBdmFpbGFibGUoQmxvY2tseS51dGlscy5nZXRCbG9ja1R5cGVDb3VudHMoYykpO2M7KWMuc2V0RW5hYmxlZChkKSxjPWMuZ2V0TmV4dEJsb2NrKCl9O0Jsb2NrbHkuRmx5b3V0LnByb3RvdHlwZS5yZWZsb3c9ZnVuY3Rpb24oKXt0aGlzLnJlZmxvd1dyYXBwZXJfJiZ0aGlzLndvcmtzcGFjZV8ucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5yZWZsb3dXcmFwcGVyXyk7dGhpcy5yZWZsb3dJbnRlcm5hbF8oKTt0aGlzLnJlZmxvd1dyYXBwZXJfJiZ0aGlzLndvcmtzcGFjZV8uYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5yZWZsb3dXcmFwcGVyXyl9O1xuQmxvY2tseS5GbHlvdXQucHJvdG90eXBlLmlzU2Nyb2xsYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbGJhcj90aGlzLnNjcm9sbGJhci5pc1Zpc2libGUoKTohMX07XG5CbG9ja2x5LkZseW91dC5wcm90b3R5cGUucGxhY2VOZXdCbG9ja189ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50YXJnZXRXb3Jrc3BhY2U7aWYoIWEuZ2V0U3ZnUm9vdCgpKXRocm93IEVycm9yKFwib2xkQmxvY2sgaXMgbm90IHJlbmRlcmVkLlwiKTt2YXIgYz1CbG9ja2x5LlhtbC5ibG9ja1RvRG9tKGEsITApO2Iuc2V0UmVzaXplc0VuYWJsZWQoITEpO2M9QmxvY2tseS5YbWwuZG9tVG9CbG9jayhjLGIpO2lmKCFjLmdldFN2Z1Jvb3QoKSl0aHJvdyBFcnJvcihcImJsb2NrIGlzIG5vdCByZW5kZXJlZC5cIik7dmFyIGQ9Yi5nZXRPcmlnaW5PZmZzZXRJblBpeGVscygpLGU9dGhpcy53b3Jrc3BhY2VfLmdldE9yaWdpbk9mZnNldEluUGl4ZWxzKCk7YT1hLmdldFJlbGF0aXZlVG9TdXJmYWNlWFkoKTthLnNjYWxlKHRoaXMud29ya3NwYWNlXy5zY2FsZSk7YT1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuc3VtKGUsYSk7ZD1CbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUuZGlmZmVyZW5jZShhLGQpO1xuZC5zY2FsZSgxL2Iuc2NhbGUpO2MubW92ZUJ5KGQueCxkLnkpO3JldHVybiBjfTtCbG9ja2x5LkZseW91dC5wcm90b3R5cGUub25CbG9ja2x5QWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndvcmtzcGFjZV8uZ2V0Q3Vyc29yKCkub25CbG9ja2x5QWN0aW9uKGEpfTtCbG9ja2x5Lkhvcml6b250YWxGbHlvdXQ9ZnVuY3Rpb24oYSl7QmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhvcml6b250YWxMYXlvdXQ9ITB9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuSG9yaXpvbnRhbEZseW91dCxCbG9ja2x5LkZseW91dCk7XG5CbG9ja2x5Lkhvcml6b250YWxGbHlvdXQucHJvdG90eXBlLmdldE1ldHJpY3NfPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNWaXNpYmxlKCkpcmV0dXJuIG51bGw7dHJ5e3ZhciBhPXRoaXMud29ya3NwYWNlXy5nZXRDYW52YXMoKS5nZXRCQm94KCl9Y2F0Y2goZSl7YT17aGVpZ2h0OjAseTowLHdpZHRoOjAseDowfX12YXIgYj10aGlzLlNDUk9MTEJBUl9QQURESU5HLGM9dGhpcy5TQ1JPTExCQVJfUEFERElORzt0aGlzLnRvb2xib3hQb3NpdGlvbl89PUJsb2NrbHkuVE9PTEJPWF9BVF9CT1RUT00mJihiPTApO3ZhciBkPXRoaXMuaGVpZ2h0Xzt0aGlzLnRvb2xib3hQb3NpdGlvbl89PUJsb2NrbHkuVE9PTEJPWF9BVF9UT1AmJihkLT10aGlzLlNDUk9MTEJBUl9QQURESU5HKTtyZXR1cm57Y29udGVudEhlaWdodDooYS5oZWlnaHQrMip0aGlzLk1BUkdJTikqdGhpcy53b3Jrc3BhY2VfLnNjYWxlLGNvbnRlbnRXaWR0aDooYS53aWR0aCsyKnRoaXMuTUFSR0lOKSp0aGlzLndvcmtzcGFjZV8uc2NhbGUsXG5jb250ZW50VG9wOjAsY29udGVudExlZnQ6MCx2aWV3SGVpZ2h0OmQsdmlld1dpZHRoOnRoaXMud2lkdGhfLTIqdGhpcy5TQ1JPTExCQVJfUEFERElORyx2aWV3VG9wOi10aGlzLndvcmtzcGFjZV8uc2Nyb2xsWSx2aWV3TGVmdDotdGhpcy53b3Jrc3BhY2VfLnNjcm9sbFgsYWJzb2x1dGVUb3A6YixhYnNvbHV0ZUxlZnQ6Y319O0Jsb2NrbHkuSG9yaXpvbnRhbEZseW91dC5wcm90b3R5cGUuc2V0TWV0cmljc189ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRNZXRyaWNzXygpO2ImJihcIm51bWJlclwiPT10eXBlb2YgYS54JiYodGhpcy53b3Jrc3BhY2VfLnNjcm9sbFg9LWIuY29udGVudFdpZHRoKmEueCksdGhpcy53b3Jrc3BhY2VfLnRyYW5zbGF0ZSh0aGlzLndvcmtzcGFjZV8uc2Nyb2xsWCtiLmFic29sdXRlTGVmdCx0aGlzLndvcmtzcGFjZV8uc2Nyb2xsWStiLmFic29sdXRlVG9wKSl9O1xuQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0LnByb3RvdHlwZS5wb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuaXNWaXNpYmxlKCkpe3ZhciBhPXRoaXMudGFyZ2V0V29ya3NwYWNlLmdldE1ldHJpY3MoKTthJiYodGhpcy53aWR0aF89YS52aWV3V2lkdGgsdGhpcy5zZXRCYWNrZ3JvdW5kUGF0aF8oYS52aWV3V2lkdGgtMip0aGlzLkNPUk5FUl9SQURJVVMsdGhpcy5oZWlnaHRfLXRoaXMuQ09STkVSX1JBRElVUyksdGhpcy5wb3NpdGlvbkF0Xyh0aGlzLndpZHRoXyx0aGlzLmhlaWdodF8sMCx0aGlzLnRhcmdldFdvcmtzcGFjZS50b29sYm94UG9zaXRpb249PXRoaXMudG9vbGJveFBvc2l0aW9uXz9hLnRvb2xib3hIZWlnaHQ/dGhpcy50b29sYm94UG9zaXRpb25fPT1CbG9ja2x5LlRPT0xCT1hfQVRfVE9QP2EudG9vbGJveEhlaWdodDphLnZpZXdIZWlnaHQtdGhpcy5oZWlnaHRfOnRoaXMudG9vbGJveFBvc2l0aW9uXz09QmxvY2tseS5UT09MQk9YX0FUX1RPUD8wOmEudmlld0hlaWdodDpcbnRoaXMudG9vbGJveFBvc2l0aW9uXz09QmxvY2tseS5UT09MQk9YX0FUX1RPUD8wOmEudmlld0hlaWdodCthLmFic29sdXRlVG9wLXRoaXMuaGVpZ2h0XykpfX07XG5CbG9ja2x5Lkhvcml6b250YWxGbHlvdXQucHJvdG90eXBlLnNldEJhY2tncm91bmRQYXRoXz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudG9vbGJveFBvc2l0aW9uXz09QmxvY2tseS5UT09MQk9YX0FUX1RPUCxkPVtcIk0gMCxcIisoYz8wOnRoaXMuQ09STkVSX1JBRElVUyldO2M/KGQucHVzaChcImhcIixhKzIqdGhpcy5DT1JORVJfUkFESVVTKSxkLnB1c2goXCJ2XCIsYiksZC5wdXNoKFwiYVwiLHRoaXMuQ09STkVSX1JBRElVUyx0aGlzLkNPUk5FUl9SQURJVVMsMCwwLDEsLXRoaXMuQ09STkVSX1JBRElVUyx0aGlzLkNPUk5FUl9SQURJVVMpLGQucHVzaChcImhcIiwtYSksZC5wdXNoKFwiYVwiLHRoaXMuQ09STkVSX1JBRElVUyx0aGlzLkNPUk5FUl9SQURJVVMsMCwwLDEsLXRoaXMuQ09STkVSX1JBRElVUywtdGhpcy5DT1JORVJfUkFESVVTKSk6KGQucHVzaChcImFcIix0aGlzLkNPUk5FUl9SQURJVVMsdGhpcy5DT1JORVJfUkFESVVTLDAsMCwxLHRoaXMuQ09STkVSX1JBRElVUywtdGhpcy5DT1JORVJfUkFESVVTKSxcbmQucHVzaChcImhcIixhKSxkLnB1c2goXCJhXCIsdGhpcy5DT1JORVJfUkFESVVTLHRoaXMuQ09STkVSX1JBRElVUywwLDAsMSx0aGlzLkNPUk5FUl9SQURJVVMsdGhpcy5DT1JORVJfUkFESVVTKSxkLnB1c2goXCJ2XCIsYiksZC5wdXNoKFwiaFwiLC1hLTIqdGhpcy5DT1JORVJfUkFESVVTKSk7ZC5wdXNoKFwielwiKTt0aGlzLnN2Z0JhY2tncm91bmRfLnNldEF0dHJpYnV0ZShcImRcIixkLmpvaW4oXCIgXCIpKX07QmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0LnByb3RvdHlwZS5zY3JvbGxUb1N0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxiYXIuc2V0KHRoaXMuUlRMP0luZmluaXR5OjApfTtcbkJsb2NrbHkuSG9yaXpvbnRhbEZseW91dC5wcm90b3R5cGUud2hlZWxfPWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkudXRpbHMuZ2V0U2Nyb2xsRGVsdGFQaXhlbHMoYSksYz1iLnh8fGIueTtjJiYoYj10aGlzLmdldE1ldHJpY3NfKCksYz1iLnZpZXdMZWZ0K2MsYz1NYXRoLm1pbihjLGIuY29udGVudFdpZHRoLWIudmlld1dpZHRoKSxjPU1hdGgubWF4KGMsMCksdGhpcy5zY3JvbGxiYXIuc2V0KGMpLEJsb2NrbHkuV2lkZ2V0RGl2LmhpZGUoKSxCbG9ja2x5LkRyb3BEb3duRGl2LmhpZGVXaXRob3V0QW5pbWF0aW9uKCkpO2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfTtcbkJsb2NrbHkuSG9yaXpvbnRhbEZseW91dC5wcm90b3R5cGUubGF5b3V0Xz1mdW5jdGlvbihhLGIpe3RoaXMud29ya3NwYWNlXy5zY2FsZT10aGlzLnRhcmdldFdvcmtzcGFjZS5zY2FsZTt2YXIgYz10aGlzLk1BUkdJTixkPWMrdGhpcy50YWJXaWR0aF87dGhpcy5SVEwmJihhPWEucmV2ZXJzZSgpKTtmb3IodmFyIGU9MCxmO2Y9YVtlXTtlKyspaWYoXCJibG9ja1wiPT1mLnR5cGUpe2Y9Zi5ibG9jaztmb3IodmFyIGc9Zi5nZXREZXNjZW5kYW50cyghMSksaD0wLGs7az1nW2hdO2grKylrLmlzSW5GbHlvdXQ9ITA7Zi5yZW5kZXIoKTtnPWYuZ2V0U3ZnUm9vdCgpO2g9Zi5nZXRIZWlnaHRXaWR0aCgpO2s9Zi5vdXRwdXRDb25uZWN0aW9uP3RoaXMudGFiV2lkdGhfOjA7az10aGlzLlJUTD9kK2gud2lkdGg6ZC1rO2YubW92ZUJ5KGssYyk7az10aGlzLmNyZWF0ZVJlY3RfKGYsayxjLGgsZSk7ZCs9aC53aWR0aCtiW2VdO3RoaXMuYWRkQmxvY2tMaXN0ZW5lcnNfKGcsZixrKX1lbHNlXCJidXR0b25cIj09XG5mLnR5cGUmJih0aGlzLmluaXRGbHlvdXRCdXR0b25fKGYuYnV0dG9uLGQsYyksZCs9Zi5idXR0b24ud2lkdGgrYltlXSl9O0Jsb2NrbHkuSG9yaXpvbnRhbEZseW91dC5wcm90b3R5cGUuaXNEcmFnVG93YXJkV29ya3NwYWNlPWZ1bmN0aW9uKGEpe2E9TWF0aC5hdGFuMihhLnksYS54KS9NYXRoLlBJKjE4MDt2YXIgYj10aGlzLmRyYWdBbmdsZVJhbmdlXztyZXR1cm4gYTw5MCtiJiZhPjkwLWJ8fGE+LTkwLWImJmE8LTkwK2I/ITA6ITF9O1xuQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0LnByb3RvdHlwZS5nZXRDbGllbnRSZWN0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuc3ZnR3JvdXBfKXJldHVybiBudWxsO3ZhciBhPXRoaXMuc3ZnR3JvdXBfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9YS50b3A7cmV0dXJuIHRoaXMudG9vbGJveFBvc2l0aW9uXz09QmxvY2tseS5UT09MQk9YX0FUX1RPUD9uZXcgQmxvY2tseS51dGlscy5SZWN0KC0xRTksYithLmhlaWdodCwtMUU5LDFFOSk6bmV3IEJsb2NrbHkudXRpbHMuUmVjdChiLDFFOSwtMUU5LDFFOSl9O1xuQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0LnByb3RvdHlwZS5yZWZsb3dJbnRlcm5hbF89ZnVuY3Rpb24oKXt0aGlzLndvcmtzcGFjZV8uc2NhbGU9dGhpcy50YXJnZXRXb3Jrc3BhY2Uuc2NhbGU7Zm9yKHZhciBhPTAsYj10aGlzLndvcmtzcGFjZV8uZ2V0VG9wQmxvY2tzKCExKSxjPTAsZDtkPWJbY107YysrKWE9TWF0aC5tYXgoYSxkLmdldEhlaWdodFdpZHRoKCkuaGVpZ2h0KTthKz0xLjUqdGhpcy5NQVJHSU47YSo9dGhpcy53b3Jrc3BhY2VfLnNjYWxlO2ErPUJsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcztpZih0aGlzLmhlaWdodF8hPWEpe2ZvcihjPTA7ZD1iW2NdO2MrKylkLmZseW91dFJlY3RfJiZ0aGlzLm1vdmVSZWN0VG9CbG9ja18oZC5mbHlvdXRSZWN0XyxkKTt0aGlzLnRhcmdldFdvcmtzcGFjZS50b29sYm94UG9zaXRpb24hPXRoaXMudG9vbGJveFBvc2l0aW9uX3x8dGhpcy50b29sYm94UG9zaXRpb25fIT1CbG9ja2x5LlRPT0xCT1hfQVRfVE9QfHx0aGlzLnRhcmdldFdvcmtzcGFjZS5nZXRUb29sYm94KCl8fFxudGhpcy50YXJnZXRXb3Jrc3BhY2UudHJhbnNsYXRlKHRoaXMudGFyZ2V0V29ya3NwYWNlLnNjcm9sbFgsdGhpcy50YXJnZXRXb3Jrc3BhY2Uuc2Nyb2xsWSthKTt0aGlzLmhlaWdodF89YTt0aGlzLnBvc2l0aW9uKCl9fTtCbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5GTFlPVVRTX0hPUklaT05UQUxfVE9PTEJPWCxCbG9ja2x5LnJlZ2lzdHJ5LkRFRkFVTFQsQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0KTtCbG9ja2x5LlZlcnRpY2FsRmx5b3V0PWZ1bmN0aW9uKGEpe0Jsb2NrbHkuVmVydGljYWxGbHlvdXQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LlZlcnRpY2FsRmx5b3V0LEJsb2NrbHkuRmx5b3V0KTtCbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnJlZ2lzdHJ5TmFtZT1cInZlcnRpY2FsRmx5b3V0XCI7XG5CbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnByb3RvdHlwZS5nZXRNZXRyaWNzXz1mdW5jdGlvbigpe2lmKCF0aGlzLmlzVmlzaWJsZSgpKXJldHVybiBudWxsO3RyeXt2YXIgYT10aGlzLndvcmtzcGFjZV8uZ2V0Q2FudmFzKCkuZ2V0QkJveCgpfWNhdGNoKGUpe2E9e2hlaWdodDowLHk6MCx3aWR0aDowLHg6MH19dmFyIGI9dGhpcy5TQ1JPTExCQVJfUEFERElORyxjPXRoaXMuaGVpZ2h0Xy0yKnRoaXMuU0NST0xMQkFSX1BBRERJTkcsZD10aGlzLndpZHRoXzt0aGlzLlJUTHx8KGQtPXRoaXMuU0NST0xMQkFSX1BBRERJTkcpO3JldHVybntjb250ZW50SGVpZ2h0OmEuaGVpZ2h0KnRoaXMud29ya3NwYWNlXy5zY2FsZSsyKnRoaXMuTUFSR0lOLGNvbnRlbnRXaWR0aDphLndpZHRoKnRoaXMud29ya3NwYWNlXy5zY2FsZSsyKnRoaXMuTUFSR0lOLGNvbnRlbnRUb3A6YS55LGNvbnRlbnRMZWZ0OmEueCx2aWV3SGVpZ2h0OmMsdmlld1dpZHRoOmQsdmlld1RvcDotdGhpcy53b3Jrc3BhY2VfLnNjcm9sbFkrXG5hLnksdmlld0xlZnQ6LXRoaXMud29ya3NwYWNlXy5zY3JvbGxYLGFic29sdXRlVG9wOmIsYWJzb2x1dGVMZWZ0OjB9fTtCbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnByb3RvdHlwZS5zZXRNZXRyaWNzXz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE1ldHJpY3NfKCk7YiYmKFwibnVtYmVyXCI9PXR5cGVvZiBhLnkmJih0aGlzLndvcmtzcGFjZV8uc2Nyb2xsWT0tYi5jb250ZW50SGVpZ2h0KmEueSksdGhpcy53b3Jrc3BhY2VfLnRyYW5zbGF0ZSh0aGlzLndvcmtzcGFjZV8uc2Nyb2xsWCtiLmFic29sdXRlTGVmdCx0aGlzLndvcmtzcGFjZV8uc2Nyb2xsWStiLmFic29sdXRlVG9wKSl9O1xuQmxvY2tseS5WZXJ0aWNhbEZseW91dC5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLmlzVmlzaWJsZSgpKXt2YXIgYT10aGlzLnRhcmdldFdvcmtzcGFjZS5nZXRNZXRyaWNzKCk7YSYmKHRoaXMuaGVpZ2h0Xz1hLnZpZXdIZWlnaHQsdGhpcy5zZXRCYWNrZ3JvdW5kUGF0aF8odGhpcy53aWR0aF8tdGhpcy5DT1JORVJfUkFESVVTLGEudmlld0hlaWdodC0yKnRoaXMuQ09STkVSX1JBRElVUyksdGhpcy5wb3NpdGlvbkF0Xyh0aGlzLndpZHRoXyx0aGlzLmhlaWdodF8sdGhpcy50YXJnZXRXb3Jrc3BhY2UudG9vbGJveFBvc2l0aW9uPT10aGlzLnRvb2xib3hQb3NpdGlvbl8/YS50b29sYm94V2lkdGg/dGhpcy50b29sYm94UG9zaXRpb25fPT1CbG9ja2x5LlRPT0xCT1hfQVRfTEVGVD9hLnRvb2xib3hXaWR0aDphLnZpZXdXaWR0aC10aGlzLndpZHRoXzp0aGlzLnRvb2xib3hQb3NpdGlvbl89PUJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUPzA6YS52aWV3V2lkdGg6dGhpcy50b29sYm94UG9zaXRpb25fPT1cbkJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUPzA6YS52aWV3V2lkdGgrYS5hYnNvbHV0ZUxlZnQtdGhpcy53aWR0aF8sMCkpfX07XG5CbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kUGF0aF89ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnRvb2xib3hQb3NpdGlvbl89PUJsb2NrbHkuVE9PTEJPWF9BVF9SSUdIVCxkPWErdGhpcy5DT1JORVJfUkFESVVTO2Q9W1wiTSBcIisoYz9kOjApK1wiLDBcIl07ZC5wdXNoKFwiaFwiLGM/LWE6YSk7ZC5wdXNoKFwiYVwiLHRoaXMuQ09STkVSX1JBRElVUyx0aGlzLkNPUk5FUl9SQURJVVMsMCwwLGM/MDoxLGM/LXRoaXMuQ09STkVSX1JBRElVUzp0aGlzLkNPUk5FUl9SQURJVVMsdGhpcy5DT1JORVJfUkFESVVTKTtkLnB1c2goXCJ2XCIsTWF0aC5tYXgoMCxiKSk7ZC5wdXNoKFwiYVwiLHRoaXMuQ09STkVSX1JBRElVUyx0aGlzLkNPUk5FUl9SQURJVVMsMCwwLGM/MDoxLGM/dGhpcy5DT1JORVJfUkFESVVTOi10aGlzLkNPUk5FUl9SQURJVVMsdGhpcy5DT1JORVJfUkFESVVTKTtkLnB1c2goXCJoXCIsYz9hOi1hKTtkLnB1c2goXCJ6XCIpO3RoaXMuc3ZnQmFja2dyb3VuZF8uc2V0QXR0cmlidXRlKFwiZFwiLFxuZC5qb2luKFwiIFwiKSl9O0Jsb2NrbHkuVmVydGljYWxGbHlvdXQucHJvdG90eXBlLnNjcm9sbFRvU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhci5zZXQoMCl9O0Jsb2NrbHkuVmVydGljYWxGbHlvdXQucHJvdG90eXBlLndoZWVsXz1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LnV0aWxzLmdldFNjcm9sbERlbHRhUGl4ZWxzKGEpO2lmKGIueSl7dmFyIGM9dGhpcy5nZXRNZXRyaWNzXygpO2I9Yy52aWV3VG9wLWMuY29udGVudFRvcCtiLnk7Yj1NYXRoLm1pbihiLGMuY29udGVudEhlaWdodC1jLnZpZXdIZWlnaHQpO2I9TWF0aC5tYXgoYiwwKTt0aGlzLnNjcm9sbGJhci5zZXQoYik7QmxvY2tseS5XaWRnZXREaXYuaGlkZSgpO0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKX1hLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKX07XG5CbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnByb3RvdHlwZS5sYXlvdXRfPWZ1bmN0aW9uKGEsYil7dGhpcy53b3Jrc3BhY2VfLnNjYWxlPXRoaXMudGFyZ2V0V29ya3NwYWNlLnNjYWxlO2Zvcih2YXIgYz10aGlzLk1BUkdJTixkPXRoaXMuUlRMP2M6Yyt0aGlzLnRhYldpZHRoXyxlPTAsZjtmPWFbZV07ZSsrKWlmKFwiYmxvY2tcIj09Zi50eXBlKXtmPWYuYmxvY2s7Zm9yKHZhciBnPWYuZ2V0RGVzY2VuZGFudHMoITEpLGg9MCxrO2s9Z1toXTtoKyspay5pc0luRmx5b3V0PSEwO2YucmVuZGVyKCk7Zz1mLmdldFN2Z1Jvb3QoKTtoPWYuZ2V0SGVpZ2h0V2lkdGgoKTtrPWYub3V0cHV0Q29ubmVjdGlvbj9kLXRoaXMudGFiV2lkdGhfOmQ7Zi5tb3ZlQnkoayxjKTtrPXRoaXMuY3JlYXRlUmVjdF8oZix0aGlzLlJUTD9rLWgud2lkdGg6ayxjLGgsZSk7dGhpcy5hZGRCbG9ja0xpc3RlbmVyc18oZyxmLGspO2MrPWguaGVpZ2h0K2JbZV19ZWxzZVwiYnV0dG9uXCI9PWYudHlwZSYmKHRoaXMuaW5pdEZseW91dEJ1dHRvbl8oZi5idXR0b24sXG5kLGMpLGMrPWYuYnV0dG9uLmhlaWdodCtiW2VdKX07QmxvY2tseS5WZXJ0aWNhbEZseW91dC5wcm90b3R5cGUuaXNEcmFnVG93YXJkV29ya3NwYWNlPWZ1bmN0aW9uKGEpe2E9TWF0aC5hdGFuMihhLnksYS54KS9NYXRoLlBJKjE4MDt2YXIgYj10aGlzLmRyYWdBbmdsZVJhbmdlXztyZXR1cm4gYTxiJiZhPi1ifHxhPC0xODArYnx8YT4xODAtYj8hMDohMX07QmxvY2tseS5WZXJ0aWNhbEZseW91dC5wcm90b3R5cGUuZ2V0Q2xpZW50UmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLnN2Z0dyb3VwXylyZXR1cm4gbnVsbDt2YXIgYT10aGlzLnN2Z0dyb3VwXy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxiPWEubGVmdDtyZXR1cm4gdGhpcy50b29sYm94UG9zaXRpb25fPT1CbG9ja2x5LlRPT0xCT1hfQVRfTEVGVD9uZXcgQmxvY2tseS51dGlscy5SZWN0KC0xRTksMUU5LC0xRTksYithLndpZHRoKTpuZXcgQmxvY2tseS51dGlscy5SZWN0KC0xRTksMUU5LGIsMUU5KX07XG5CbG9ja2x5LlZlcnRpY2FsRmx5b3V0LnByb3RvdHlwZS5yZWZsb3dJbnRlcm5hbF89ZnVuY3Rpb24oKXt0aGlzLndvcmtzcGFjZV8uc2NhbGU9dGhpcy50YXJnZXRXb3Jrc3BhY2Uuc2NhbGU7Zm9yKHZhciBhPTAsYj10aGlzLndvcmtzcGFjZV8uZ2V0VG9wQmxvY2tzKCExKSxjPTAsZDtkPWJbY107YysrKXt2YXIgZT1kLmdldEhlaWdodFdpZHRoKCkud2lkdGg7ZC5vdXRwdXRDb25uZWN0aW9uJiYoZS09dGhpcy50YWJXaWR0aF8pO2E9TWF0aC5tYXgoYSxlKX1mb3IoYz0wO2Q9dGhpcy5idXR0b25zX1tjXTtjKyspYT1NYXRoLm1heChhLGQud2lkdGgpO2ErPTEuNSp0aGlzLk1BUkdJTit0aGlzLnRhYldpZHRoXzthKj10aGlzLndvcmtzcGFjZV8uc2NhbGU7YSs9QmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzO2lmKHRoaXMud2lkdGhfIT1hKXtmb3IoYz0wO2Q9YltjXTtjKyspe2lmKHRoaXMuUlRMKXtlPWQuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpLng7dmFyIGY9XG5hL3RoaXMud29ya3NwYWNlXy5zY2FsZS10aGlzLk1BUkdJTjtkLm91dHB1dENvbm5lY3Rpb258fChmLT10aGlzLnRhYldpZHRoXyk7ZC5tb3ZlQnkoZi1lLDApfWQuZmx5b3V0UmVjdF8mJnRoaXMubW92ZVJlY3RUb0Jsb2NrXyhkLmZseW91dFJlY3RfLGQpfWlmKHRoaXMuUlRMKWZvcihjPTA7ZD10aGlzLmJ1dHRvbnNfW2NdO2MrKyliPWQuZ2V0UG9zaXRpb24oKS55LGQubW92ZVRvKGEvdGhpcy53b3Jrc3BhY2VfLnNjYWxlLWQud2lkdGgtdGhpcy5NQVJHSU4tdGhpcy50YWJXaWR0aF8sYik7dGhpcy50YXJnZXRXb3Jrc3BhY2UudG9vbGJveFBvc2l0aW9uIT10aGlzLnRvb2xib3hQb3NpdGlvbl98fHRoaXMudG9vbGJveFBvc2l0aW9uXyE9QmxvY2tseS5UT09MQk9YX0FUX0xFRlR8fHRoaXMudGFyZ2V0V29ya3NwYWNlLmdldFRvb2xib3goKXx8dGhpcy50YXJnZXRXb3Jrc3BhY2UudHJhbnNsYXRlKHRoaXMudGFyZ2V0V29ya3NwYWNlLnNjcm9sbFgrYSx0aGlzLnRhcmdldFdvcmtzcGFjZS5zY3JvbGxZKTtcbnRoaXMud2lkdGhfPWE7dGhpcy5wb3NpdGlvbigpfX07QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRkxZT1VUU19WRVJUSUNBTF9UT09MQk9YLEJsb2NrbHkucmVnaXN0cnkuREVGQVVMVCxCbG9ja2x5LlZlcnRpY2FsRmx5b3V0KTtCbG9ja2x5LkZseW91dEJ1dHRvbj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLndvcmtzcGFjZV89YTt0aGlzLnRhcmdldFdvcmtzcGFjZV89Yjt0aGlzLnRleHRfPWMudGV4dDt0aGlzLnBvc2l0aW9uXz1uZXcgQmxvY2tseS51dGlscy5Db29yZGluYXRlKDAsMCk7dGhpcy5pc0xhYmVsXz1kO3RoaXMuY2FsbGJhY2tLZXlfPWMuY2FsbGJhY2tLZXl8fGMuY2FsbGJhY2trZXk7dGhpcy5jc3NDbGFzc189Y1tcIndlYi1jbGFzc1wiXXx8bnVsbDt0aGlzLm9uTW91c2VVcFdyYXBwZXJfPW51bGw7dGhpcy5pbmZvPWN9O0Jsb2NrbHkuRmx5b3V0QnV0dG9uLk1BUkdJTl9YPTU7QmxvY2tseS5GbHlvdXRCdXR0b24uTUFSR0lOX1k9MjtCbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUud2lkdGg9MDtCbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUuaGVpZ2h0PTA7XG5CbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRG9tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pc0xhYmVsXz9cImJsb2NrbHlGbHlvdXRMYWJlbFwiOlwiYmxvY2tseUZseW91dEJ1dHRvblwiO3RoaXMuY3NzQ2xhc3NfJiYoYSs9XCIgXCIrdGhpcy5jc3NDbGFzc18pO3RoaXMuc3ZnR3JvdXBfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRyx7XCJjbGFzc1wiOmF9LHRoaXMud29ya3NwYWNlXy5nZXRDYW52YXMoKSk7aWYoIXRoaXMuaXNMYWJlbF8pdmFyIGI9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtcImNsYXNzXCI6XCJibG9ja2x5Rmx5b3V0QnV0dG9uU2hhZG93XCIscng6NCxyeTo0LHg6MSx5OjF9LHRoaXMuc3ZnR3JvdXBfKTthPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7XCJjbGFzc1wiOnRoaXMuaXNMYWJlbF8/XG5cImJsb2NrbHlGbHlvdXRMYWJlbEJhY2tncm91bmRcIjpcImJsb2NrbHlGbHlvdXRCdXR0b25CYWNrZ3JvdW5kXCIscng6NCxyeTo0fSx0aGlzLnN2Z0dyb3VwXyk7dmFyIGM9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5URVhULHtcImNsYXNzXCI6dGhpcy5pc0xhYmVsXz9cImJsb2NrbHlGbHlvdXRMYWJlbFRleHRcIjpcImJsb2NrbHlUZXh0XCIseDowLHk6MCxcInRleHQtYW5jaG9yXCI6XCJtaWRkbGVcIn0sdGhpcy5zdmdHcm91cF8pLGQ9QmxvY2tseS51dGlscy5yZXBsYWNlTWVzc2FnZVJlZmVyZW5jZXModGhpcy50ZXh0Xyk7dGhpcy53b3Jrc3BhY2VfLlJUTCYmKGQrPVwiXFx1MjAwZlwiKTtjLnRleHRDb250ZW50PWQ7dGhpcy5pc0xhYmVsXyYmKHRoaXMuc3ZnVGV4dF89Yyx0aGlzLndvcmtzcGFjZV8uZ2V0VGhlbWVNYW5hZ2VyKCkuc3Vic2NyaWJlKHRoaXMuc3ZnVGV4dF8sXCJmbHlvdXRGb3JlZ3JvdW5kQ29sb3VyXCIsXCJmaWxsXCIpKTt2YXIgZT1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldENvbXB1dGVkU3R5bGUoYyxcblwiZm9udFNpemVcIiksZj1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldENvbXB1dGVkU3R5bGUoYyxcImZvbnRXZWlnaHRcIiksZz1CbG9ja2x5LnV0aWxzLnN0eWxlLmdldENvbXB1dGVkU3R5bGUoYyxcImZvbnRGYW1pbHlcIik7dGhpcy53aWR0aD1CbG9ja2x5LnV0aWxzLmRvbS5nZXRGYXN0VGV4dFdpZHRoV2l0aFNpemVTdHJpbmcoYyxlLGYsZyk7ZD1CbG9ja2x5LnV0aWxzLmRvbS5tZWFzdXJlRm9udE1ldHJpY3MoZCxlLGYsZyk7dGhpcy5oZWlnaHQ9ZC5oZWlnaHQ7dGhpcy5pc0xhYmVsX3x8KHRoaXMud2lkdGgrPTIqQmxvY2tseS5GbHlvdXRCdXR0b24uTUFSR0lOX1gsdGhpcy5oZWlnaHQrPTIqQmxvY2tseS5GbHlvdXRCdXR0b24uTUFSR0lOX1ksYi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMud2lkdGgpLGIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsdGhpcy5oZWlnaHQpKTthLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsdGhpcy53aWR0aCk7YS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLmhlaWdodCk7XG5jLnNldEF0dHJpYnV0ZShcInhcIix0aGlzLndpZHRoLzIpO2Muc2V0QXR0cmlidXRlKFwieVwiLHRoaXMuaGVpZ2h0LzItZC5oZWlnaHQvMitkLmJhc2VsaW5lKTt0aGlzLnVwZGF0ZVRyYW5zZm9ybV8oKTt0aGlzLm9uTW91c2VVcFdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18odGhpcy5zdmdHcm91cF8sXCJtb3VzZXVwXCIsdGhpcyx0aGlzLm9uTW91c2VVcF8pO3JldHVybiB0aGlzLnN2Z0dyb3VwX307QmxvY2tseS5GbHlvdXRCdXR0b24ucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZVRyYW5zZm9ybV8oKTt0aGlzLnN2Z0dyb3VwXy5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKX07XG5CbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtXz1mdW5jdGlvbigpe3RoaXMuc3ZnR3JvdXBfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiK3RoaXMucG9zaXRpb25fLngrXCIsXCIrdGhpcy5wb3NpdGlvbl8ueStcIilcIil9O0Jsb2NrbHkuRmx5b3V0QnV0dG9uLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oYSxiKXt0aGlzLnBvc2l0aW9uXy54PWE7dGhpcy5wb3NpdGlvbl8ueT1iO3RoaXMudXBkYXRlVHJhbnNmb3JtXygpfTtCbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUuaXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGFiZWxffTtCbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbl99O0Jsb2NrbHkuRmx5b3V0QnV0dG9uLnByb3RvdHlwZS5nZXRCdXR0b25UZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dF99O1xuQmxvY2tseS5GbHlvdXRCdXR0b24ucHJvdG90eXBlLmdldFRhcmdldFdvcmtzcGFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldFdvcmtzcGFjZV99O0Jsb2NrbHkuRmx5b3V0QnV0dG9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5vbk1vdXNlVXBXcmFwcGVyXyYmQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlVXBXcmFwcGVyXyk7dGhpcy5zdmdHcm91cF8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5zdmdHcm91cF8pO3RoaXMuc3ZnVGV4dF8mJnRoaXMud29ya3NwYWNlXy5nZXRUaGVtZU1hbmFnZXIoKS51bnN1YnNjcmliZSh0aGlzLnN2Z1RleHRfKX07XG5CbG9ja2x5LkZseW91dEJ1dHRvbi5wcm90b3R5cGUub25Nb3VzZVVwXz1mdW5jdGlvbihhKXsoYT10aGlzLnRhcmdldFdvcmtzcGFjZV8uZ2V0R2VzdHVyZShhKSkmJmEuY2FuY2VsKCk7dGhpcy5pc0xhYmVsXyYmdGhpcy5jYWxsYmFja0tleV8/Y29uc29sZS53YXJuKFwiTGFiZWxzIHNob3VsZCBub3QgaGF2ZSBjYWxsYmFja3MuIExhYmVsIHRleHQ6IFwiK3RoaXMudGV4dF8pOnRoaXMuaXNMYWJlbF98fHRoaXMuY2FsbGJhY2tLZXlfJiZ0aGlzLnRhcmdldFdvcmtzcGFjZV8uZ2V0QnV0dG9uQ2FsbGJhY2sodGhpcy5jYWxsYmFja0tleV8pP3RoaXMuaXNMYWJlbF98fHRoaXMudGFyZ2V0V29ya3NwYWNlXy5nZXRCdXR0b25DYWxsYmFjayh0aGlzLmNhbGxiYWNrS2V5XykodGhpcyk6Y29uc29sZS53YXJuKFwiQnV0dG9ucyBzaG91bGQgaGF2ZSBjYWxsYmFja3MuIEJ1dHRvbiB0ZXh0OiBcIit0aGlzLnRleHRfKX07QmxvY2tseS5Dc3MucmVnaXN0ZXIoXCIuYmxvY2tseUZseW91dEJ1dHRvbiB7LGZpbGw6ICM4ODg7LGN1cnNvcjogZGVmYXVsdDssfSwuYmxvY2tseUZseW91dEJ1dHRvblNoYWRvdyB7LGZpbGw6ICM2NjY7LH0sLmJsb2NrbHlGbHlvdXRCdXR0b246aG92ZXIgeyxmaWxsOiAjYWFhOyx9LC5ibG9ja2x5Rmx5b3V0TGFiZWwgeyxjdXJzb3I6IGRlZmF1bHQ7LH0sLmJsb2NrbHlGbHlvdXRMYWJlbEJhY2tncm91bmQgeyxvcGFjaXR5OiAwOyx9XCIuc3BsaXQoXCIsXCIpKTtCbG9ja2x5LkdlbmVyYXRvcj1mdW5jdGlvbihhKXt0aGlzLm5hbWVfPWE7dGhpcy5GVU5DVElPTl9OQU1FX1BMQUNFSE9MREVSX1JFR0VYUF89bmV3IFJlZ0V4cCh0aGlzLkZVTkNUSU9OX05BTUVfUExBQ0VIT0xERVJfLFwiZ1wiKX07QmxvY2tseS5HZW5lcmF0b3IuTkFNRV9UWVBFPVwiZ2VuZXJhdGVkX2Z1bmN0aW9uXCI7QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLklORklOSVRFX0xPT1BfVFJBUD1udWxsO0Jsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5TVEFURU1FTlRfUFJFRklYPW51bGw7QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLlNUQVRFTUVOVF9TVUZGSVg9bnVsbDtCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUuSU5ERU5UPVwiICBcIjtCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUuQ09NTUVOVF9XUkFQPTYwO0Jsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5PUkRFUl9PVkVSUklERVM9W107XG5CbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUud29ya3NwYWNlVG9Db2RlPWZ1bmN0aW9uKGEpe2F8fChjb25zb2xlLndhcm4oXCJObyB3b3Jrc3BhY2Ugc3BlY2lmaWVkIGluIHdvcmtzcGFjZVRvQ29kZSBjYWxsLiAgR3Vlc3NpbmcuXCIpLGE9QmxvY2tseS5nZXRNYWluV29ya3NwYWNlKCkpO3ZhciBiPVtdO3RoaXMuaW5pdChhKTthPWEuZ2V0VG9wQmxvY2tzKCEwKTtmb3IodmFyIGM9MCxkO2Q9YVtjXTtjKyspe3ZhciBlPXRoaXMuYmxvY2tUb0NvZGUoZCk7QXJyYXkuaXNBcnJheShlKSYmKGU9ZVswXSk7ZSYmKGQub3V0cHV0Q29ubmVjdGlvbiYmKGU9dGhpcy5zY3J1Yk5ha2VkVmFsdWUoZSksdGhpcy5TVEFURU1FTlRfUFJFRklYJiYhZC5zdXBwcmVzc1ByZWZpeFN1ZmZpeCYmKGU9dGhpcy5pbmplY3RJZCh0aGlzLlNUQVRFTUVOVF9QUkVGSVgsZCkrZSksdGhpcy5TVEFURU1FTlRfU1VGRklYJiYhZC5zdXBwcmVzc1ByZWZpeFN1ZmZpeCYmKGUrPXRoaXMuaW5qZWN0SWQodGhpcy5TVEFURU1FTlRfU1VGRklYLFxuZCkpKSxiLnB1c2goZSkpfWI9Yi5qb2luKFwiXFxuXCIpO2I9dGhpcy5maW5pc2goYik7Yj1iLnJlcGxhY2UoL15cXHMrXFxuLyxcIlwiKTtiPWIucmVwbGFjZSgvXFxuXFxzKyQvLFwiXFxuXCIpO3JldHVybiBiPWIucmVwbGFjZSgvWyBcXHRdK1xcbi9nLFwiXFxuXCIpfTtCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUucHJlZml4TGluZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYithLnJlcGxhY2UoLyg/IVxcbiQpXFxuL2csXCJcXG5cIitiKX07QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLmFsbE5lc3RlZENvbW1lbnRzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9YS5nZXREZXNjZW5kYW50cyghMCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uZ2V0Q29tbWVudFRleHQoKTtkJiZiLnB1c2goZCl9Yi5sZW5ndGgmJmIucHVzaChcIlwiKTtyZXR1cm4gYi5qb2luKFwiXFxuXCIpfTtcbkJsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5ibG9ja1RvQ29kZT1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVyblwiXCI7aWYoIWEuaXNFbmFibGVkKCkpcmV0dXJuIGI/XCJcIjp0aGlzLmJsb2NrVG9Db2RlKGEuZ2V0TmV4dEJsb2NrKCkpO2lmKGEuaXNJbnNlcnRpb25NYXJrZXIoKSlyZXR1cm4gYj9cIlwiOnRoaXMuYmxvY2tUb0NvZGUoYS5nZXRDaGlsZHJlbighMSlbMF0pO3ZhciBjPXRoaXNbYS50eXBlXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBjKXRocm93IEVycm9yKCdMYW5ndWFnZSBcIicrdGhpcy5uYW1lXysnXCIgZG9lcyBub3Qga25vdyBob3cgdG8gZ2VuZXJhdGUgIGNvZGUgZm9yIGJsb2NrIHR5cGUgXCInK2EudHlwZSsnXCIuJyk7Yz1jLmNhbGwoYSxhKTtpZihBcnJheS5pc0FycmF5KGMpKXtpZighYS5vdXRwdXRDb25uZWN0aW9uKXRocm93IFR5cGVFcnJvcihcIkV4cGVjdGluZyBzdHJpbmcgZnJvbSBzdGF0ZW1lbnQgYmxvY2s6IFwiK2EudHlwZSk7cmV0dXJuW3RoaXMuc2NydWJfKGEsXG5jWzBdLGIpLGNbMV1dfWlmKFwic3RyaW5nXCI9PXR5cGVvZiBjKXJldHVybiB0aGlzLlNUQVRFTUVOVF9QUkVGSVgmJiFhLnN1cHByZXNzUHJlZml4U3VmZml4JiYoYz10aGlzLmluamVjdElkKHRoaXMuU1RBVEVNRU5UX1BSRUZJWCxhKStjKSx0aGlzLlNUQVRFTUVOVF9TVUZGSVgmJiFhLnN1cHByZXNzUHJlZml4U3VmZml4JiYoYys9dGhpcy5pbmplY3RJZCh0aGlzLlNUQVRFTUVOVF9TVUZGSVgsYSkpLHRoaXMuc2NydWJfKGEsYyxiKTtpZihudWxsPT09YylyZXR1cm5cIlwiO3Rocm93IFN5bnRheEVycm9yKFwiSW52YWxpZCBjb2RlIGdlbmVyYXRlZDogXCIrYyk7fTtcbkJsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS52YWx1ZVRvQ29kZT1mdW5jdGlvbihhLGIsYyl7aWYoaXNOYU4oYykpdGhyb3cgVHlwZUVycm9yKFwiRXhwZWN0aW5nIHZhbGlkIG9yZGVyIGZyb20gYmxvY2s6IFwiK2EudHlwZSk7dmFyIGQ9YS5nZXRJbnB1dFRhcmdldEJsb2NrKGIpO2lmKCFkKXJldHVyblwiXCI7Yj10aGlzLmJsb2NrVG9Db2RlKGQpO2lmKFwiXCI9PT1iKXJldHVyblwiXCI7aWYoIUFycmF5LmlzQXJyYXkoYikpdGhyb3cgVHlwZUVycm9yKFwiRXhwZWN0aW5nIHR1cGxlIGZyb20gdmFsdWUgYmxvY2s6IFwiK2QudHlwZSk7YT1iWzBdO2I9YlsxXTtpZihpc05hTihiKSl0aHJvdyBUeXBlRXJyb3IoXCJFeHBlY3RpbmcgdmFsaWQgb3JkZXIgZnJvbSB2YWx1ZSBibG9jazogXCIrZC50eXBlKTtpZighYSlyZXR1cm5cIlwiO2Q9ITE7dmFyIGU9TWF0aC5mbG9vcihjKSxmPU1hdGguZmxvb3IoYik7aWYoZTw9ZiYmKGUhPWZ8fDAhPWUmJjk5IT1lKSlmb3IoZD0hMCxlPTA7ZTx0aGlzLk9SREVSX09WRVJSSURFUy5sZW5ndGg7ZSsrKWlmKHRoaXMuT1JERVJfT1ZFUlJJREVTW2VdWzBdPT1cbmMmJnRoaXMuT1JERVJfT1ZFUlJJREVTW2VdWzFdPT1iKXtkPSExO2JyZWFrfWQmJihhPVwiKFwiK2ErXCIpXCIpO3JldHVybiBhfTtCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUuc3RhdGVtZW50VG9Db2RlPWZ1bmN0aW9uKGEsYil7YT1hLmdldElucHV0VGFyZ2V0QmxvY2soYik7Yj10aGlzLmJsb2NrVG9Db2RlKGEpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiKXRocm93IFR5cGVFcnJvcihcIkV4cGVjdGluZyBjb2RlIGZyb20gc3RhdGVtZW50IGJsb2NrOiBcIisoYSYmYS50eXBlKSk7YiYmKGI9dGhpcy5wcmVmaXhMaW5lcyhiLHRoaXMuSU5ERU5UKSk7cmV0dXJuIGJ9O1xuQmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLmFkZExvb3BUcmFwPWZ1bmN0aW9uKGEsYil7dGhpcy5JTkZJTklURV9MT09QX1RSQVAmJihhPXRoaXMucHJlZml4TGluZXModGhpcy5pbmplY3RJZCh0aGlzLklORklOSVRFX0xPT1BfVFJBUCxiKSx0aGlzLklOREVOVCkrYSk7dGhpcy5TVEFURU1FTlRfU1VGRklYJiYhYi5zdXBwcmVzc1ByZWZpeFN1ZmZpeCYmKGE9dGhpcy5wcmVmaXhMaW5lcyh0aGlzLmluamVjdElkKHRoaXMuU1RBVEVNRU5UX1NVRkZJWCxiKSx0aGlzLklOREVOVCkrYSk7dGhpcy5TVEFURU1FTlRfUFJFRklYJiYhYi5zdXBwcmVzc1ByZWZpeFN1ZmZpeCYmKGErPXRoaXMucHJlZml4TGluZXModGhpcy5pbmplY3RJZCh0aGlzLlNUQVRFTUVOVF9QUkVGSVgsYiksdGhpcy5JTkRFTlQpKTtyZXR1cm4gYX07XG5CbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUuaW5qZWN0SWQ9ZnVuY3Rpb24oYSxiKXtiPWIuaWQucmVwbGFjZSgvXFwkL2csXCIkJCQkXCIpO3JldHVybiBhLnJlcGxhY2UoLyUxL2csXCInXCIrYitcIidcIil9O0Jsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5SRVNFUlZFRF9XT1JEU189XCJcIjtCbG9ja2x5LkdlbmVyYXRvci5wcm90b3R5cGUuYWRkUmVzZXJ2ZWRXb3Jkcz1mdW5jdGlvbihhKXt0aGlzLlJFU0VSVkVEX1dPUkRTXys9YStcIixcIn07QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLkZVTkNUSU9OX05BTUVfUExBQ0VIT0xERVJfPVwie2xlQ1VJOGh1dEhaSTQ0ODBEY31cIjtcbkJsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5wcm92aWRlRnVuY3Rpb25fPWZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuZGVmaW5pdGlvbnNfW2FdKXt2YXIgYz10aGlzLnZhcmlhYmxlREJfLmdldERpc3RpbmN0TmFtZShhLEJsb2NrbHkuUFJPQ0VEVVJFX0NBVEVHT1JZX05BTUUpO3RoaXMuZnVuY3Rpb25OYW1lc19bYV09YztiPWIuam9pbihcIlxcblwiKS5yZXBsYWNlKHRoaXMuRlVOQ1RJT05fTkFNRV9QTEFDRUhPTERFUl9SRUdFWFBfLGMpO2Zvcih2YXIgZDtkIT1iOylkPWIsYj1iLnJlcGxhY2UoL14oKCB7Mn0pKikgezJ9L2dtLFwiJDFcXHgwMFwiKTtiPWIucmVwbGFjZSgvXFwwL2csdGhpcy5JTkRFTlQpO3RoaXMuZGVmaW5pdGlvbnNfW2FdPWJ9cmV0dXJuIHRoaXMuZnVuY3Rpb25OYW1lc19bYV19O0Jsb2NrbHkuR2VuZXJhdG9yLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEpe307QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLnNjcnViXz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGJ9O1xuQmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbihhKXtyZXR1cm4gYX07QmxvY2tseS5HZW5lcmF0b3IucHJvdG90eXBlLnNjcnViTmFrZWRWYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gYX07QmxvY2tseS5Ub29sYm94SXRlbT1mdW5jdGlvbihhLGIsYyl7dGhpcy5pZF89YS50b29sYm94aXRlbWlkfHxCbG9ja2x5LnV0aWxzLklkR2VuZXJhdG9yLmdldE5leHRVbmlxdWVJZCgpO3RoaXMubGV2ZWxfPSh0aGlzLnBhcmVudF89Y3x8bnVsbCk/dGhpcy5wYXJlbnRfLmdldExldmVsKCkrMTowO3RoaXMudG9vbGJveEl0ZW1EZWZfPWE7dGhpcy5wYXJlbnRUb29sYm94Xz1iO3RoaXMud29ya3NwYWNlXz10aGlzLnBhcmVudFRvb2xib3hfLmdldFdvcmtzcGFjZSgpfTtCbG9ja2x5LlRvb2xib3hJdGVtLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7fTtCbG9ja2x5LlRvb2xib3hJdGVtLnByb3RvdHlwZS5nZXREaXY9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07QmxvY2tseS5Ub29sYm94SXRlbS5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZF99O0Jsb2NrbHkuVG9vbGJveEl0ZW0ucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtcbkJsb2NrbHkuVG9vbGJveEl0ZW0ucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGV2ZWxffTtCbG9ja2x5LlRvb2xib3hJdGVtLnByb3RvdHlwZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07QmxvY2tseS5Ub29sYm94SXRlbS5wcm90b3R5cGUuaXNDb2xsYXBzaWJsZT1mdW5jdGlvbigpe3JldHVybiExfTtCbG9ja2x5LlRvb2xib3hJdGVtLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fTtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeT1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKTt0aGlzLm5hbWVfPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEubmFtZSk7dGhpcy5jb2xvdXJfPXRoaXMuZ2V0Q29sb3VyXyhhKTt0aGlzLmljb25Eb21fPXRoaXMucm93Q29udGVudHNfPXRoaXMucm93RGl2Xz10aGlzLmh0bWxEaXZfPW51bGw7dGhpcy5jc3NDb25maWdfPXRoaXMubWFrZURlZmF1bHRDc3NDb25maWdfKCk7QmxvY2tseS51dGlscy5vYmplY3QubWl4aW4odGhpcy5jc3NDb25maWdfLGEuY3NzY29uZmlnfHxhLmNzc0NvbmZpZyk7dGhpcy5pc0Rpc2FibGVkXz10aGlzLmlzSGlkZGVuXz0hMTt0aGlzLmZseW91dEl0ZW1zXz1bXTt0aGlzLnBhcnNlQ29udGVudHNfKGEpfTtcbkJsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuVG9vbGJveENhdGVnb3J5LEJsb2NrbHkuVG9vbGJveEl0ZW0pO0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnJlZ2lzdHJhdGlvbk5hbWU9XCJjYXRlZ29yeVwiO0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5Lm5lc3RlZFBhZGRpbmc9MTk7QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkuYm9yZGVyV2lkdGg9ODtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5kZWZhdWx0QmFja2dyb3VuZENvbG91cj1cIiM1N2VcIjtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5tYWtlRGVmYXVsdENzc0NvbmZpZ189ZnVuY3Rpb24oKXtyZXR1cm57Y29udGFpbmVyOlwiYmxvY2tseVRvb2xib3hDYXRlZ29yeVwiLHJvdzpcImJsb2NrbHlUcmVlUm93XCIscm93Y29udGVudGNvbnRhaW5lcjpcImJsb2NrbHlUcmVlUm93Q29udGVudENvbnRhaW5lclwiLGljb246XCJibG9ja2x5VHJlZUljb25cIixsYWJlbDpcImJsb2NrbHlUcmVlTGFiZWxcIixjb250ZW50czpcImJsb2NrbHlUb29sYm94Q29udGVudHNcIixzZWxlY3RlZDpcImJsb2NrbHlUcmVlU2VsZWN0ZWRcIixvcGVuaWNvbjpcImJsb2NrbHlUcmVlSWNvbk9wZW5cIixjbG9zZWRpY29uOlwiYmxvY2tseVRyZWVJY29uQ2xvc2VkXCJ9fTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5wYXJzZUNvbnRlbnRzXz1mdW5jdGlvbihhKXt2YXIgYj1hLmNvbnRlbnRzO2lmKGEuY3VzdG9tKXRoaXMuZmx5b3V0SXRlbXNfPWEuY3VzdG9tO2Vsc2UgaWYoYil7YT0wO2Zvcih2YXIgYztjPWJbYV07YSsrKXRoaXMuZmx5b3V0SXRlbXNfLnB1c2goYyl9fTtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuY3JlYXRlRG9tXygpO1widHJ1ZVwiPT10aGlzLnRvb2xib3hJdGVtRGVmXy5oaWRkZW4mJnRoaXMuaGlkZSgpfTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5jcmVhdGVEb21fPWZ1bmN0aW9uKCl7dGhpcy5odG1sRGl2Xz10aGlzLmNyZWF0ZUNvbnRhaW5lcl8oKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0Um9sZSh0aGlzLmh0bWxEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLlRSRUVJVEVNKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUodGhpcy5odG1sRGl2XyxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuU0VMRUNURUQsITEpO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZSh0aGlzLmh0bWxEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5MRVZFTCx0aGlzLmxldmVsXyk7dGhpcy5yb3dEaXZfPXRoaXMuY3JlYXRlUm93Q29udGFpbmVyXygpO3RoaXMucm93RGl2Xy5zZXRBdHRyaWJ1dGUoXCJpZFwiLHRoaXMuaWRfKTt0aGlzLnJvd0Rpdl8uc3R5bGUucG9pbnRlckV2ZW50cz1cImF1dG9cIjt0aGlzLmh0bWxEaXZfLmFwcGVuZENoaWxkKHRoaXMucm93RGl2Xyk7dGhpcy5yb3dDb250ZW50c189XG50aGlzLmNyZWF0ZVJvd0NvbnRlbnRzQ29udGFpbmVyXygpO3RoaXMucm93Q29udGVudHNfLnN0eWxlLnBvaW50ZXJFdmVudHM9XCJub25lXCI7dGhpcy5yb3dEaXZfLmFwcGVuZENoaWxkKHRoaXMucm93Q29udGVudHNfKTt0aGlzLmljb25Eb21fPXRoaXMuY3JlYXRlSWNvbkRvbV8oKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0Um9sZSh0aGlzLmljb25Eb21fLEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLlBSRVNFTlRBVElPTik7dGhpcy5yb3dDb250ZW50c18uYXBwZW5kQ2hpbGQodGhpcy5pY29uRG9tXyk7dmFyIGE9dGhpcy5jcmVhdGVMYWJlbERvbV8odGhpcy5uYW1lXyk7dGhpcy5yb3dDb250ZW50c18uYXBwZW5kQ2hpbGQoYSk7QmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKHRoaXMuaHRtbERpdl8sQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLkxBQkVMTEVEQlksYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk7dGhpcy5hZGRDb2xvdXJCb3JkZXJfKHRoaXMuY29sb3VyXyk7cmV0dXJuIHRoaXMuaHRtbERpdl99O1xuQmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmNyZWF0ZUNvbnRhaW5lcl89ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy5jc3NDb25maWdfLmNvbnRhaW5lcik7cmV0dXJuIGF9O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5jcmVhdGVSb3dDb250YWluZXJfPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLHRoaXMuY3NzQ29uZmlnXy5yb3cpO3ZhciBiPUJsb2NrbHkuVG9vbGJveENhdGVnb3J5Lm5lc3RlZFBhZGRpbmcqdGhpcy5nZXRMZXZlbCgpO2I9Yi50b1N0cmluZygpK1wicHhcIjt0aGlzLndvcmtzcGFjZV8uUlRMP2Euc3R5bGUucGFkZGluZ1JpZ2h0PWI6YS5zdHlsZS5wYWRkaW5nTGVmdD1iO3JldHVybiBhfTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5jcmVhdGVSb3dDb250ZW50c0NvbnRhaW5lcl89ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy5jc3NDb25maWdfLnJvd2NvbnRlbnRjb250YWluZXIpO3JldHVybiBhfTtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuY3JlYXRlSWNvbkRvbV89ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0aGlzLnBhcmVudFRvb2xib3hfLmlzSG9yaXpvbnRhbCgpfHxCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLHRoaXMuY3NzQ29uZmlnXy5pY29uKTthLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIjtyZXR1cm4gYX07XG5CbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuY3JlYXRlTGFiZWxEb21fPWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2Iuc2V0QXR0cmlidXRlKFwiaWRcIix0aGlzLmdldElkKCkrXCIubGFiZWxcIik7Yi50ZXh0Q29udGVudD1hO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGIsdGhpcy5jc3NDb25maWdfLmxhYmVsKTtyZXR1cm4gYn07QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLnJlZnJlc2hUaGVtZT1mdW5jdGlvbigpe3RoaXMuY29sb3VyXz10aGlzLmdldENvbG91cl8odGhpcy50b29sYm94SXRlbURlZl8pO3RoaXMuYWRkQ29sb3VyQm9yZGVyXyh0aGlzLmNvbG91cl8pfTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5hZGRDb2xvdXJCb3JkZXJfPWZ1bmN0aW9uKGEpe2EmJihhPUJsb2NrbHkuVG9vbGJveENhdGVnb3J5LmJvcmRlcldpZHRoK1wicHggc29saWQgXCIrKGF8fFwiI2RkZFwiKSx0aGlzLndvcmtzcGFjZV8uUlRMP3RoaXMucm93RGl2Xy5zdHlsZS5ib3JkZXJSaWdodD1hOnRoaXMucm93RGl2Xy5zdHlsZS5ib3JkZXJMZWZ0PWEpfTtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuZ2V0Q29sb3VyXz1mdW5jdGlvbihhKXt2YXIgYj1hLmNhdGVnb3J5c3R5bGV8fGEuY2F0ZWdvcnlTdHlsZTtpZigoYT1hLmNvbG91cikmJmIpY29uc29sZS53YXJuKCdUb29sYm94IGNhdGVnb3J5IFwiJyt0aGlzLm5hbWVfKydcIiBtdXN0IG5vdCBoYXZlIGJvdGggYSBzdHlsZSBhbmQgYSBjb2xvdXInKTtlbHNlIHJldHVybiBiP3RoaXMuZ2V0Q29sb3VyZnJvbVN0eWxlXyhiKTp0aGlzLnBhcnNlQ29sb3VyXyhhKTtyZXR1cm5cIlwifTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5nZXRDb2xvdXJmcm9tU3R5bGVfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMud29ya3NwYWNlXy5nZXRUaGVtZSgpO2lmKGEmJmIpe2lmKChiPWIuY2F0ZWdvcnlTdHlsZXNbYV0pJiZiLmNvbG91cilyZXR1cm4gdGhpcy5wYXJzZUNvbG91cl8oYi5jb2xvdXIpO2NvbnNvbGUud2FybignU3R5bGUgXCInK2ErJ1wiIG11c3QgZXhpc3QgYW5kIGNvbnRhaW4gYSBjb2xvdXIgdmFsdWUnKX1yZXR1cm5cIlwifTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5wYXJzZUNvbG91cl89ZnVuY3Rpb24oYSl7YT1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhhKTtpZihudWxsPT1hfHxcIlwiPT09YSlyZXR1cm5cIlwiO3ZhciBiPU51bWJlcihhKTtpZihpc05hTihiKSl7aWYoYj1CbG9ja2x5LnV0aWxzLmNvbG91ci5wYXJzZShhKSlyZXR1cm4gYjtjb25zb2xlLndhcm4oJ1Rvb2xib3ggY2F0ZWdvcnkgXCInK3RoaXMubmFtZV8rJ1wiIGhhcyB1bnJlY29nbml6ZWQgY29sb3VyIGF0dHJpYnV0ZTogJythKTtyZXR1cm5cIlwifXJldHVybiBCbG9ja2x5Lmh1ZVRvSGV4KGIpfTtCbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUub3Blbkljb25fPWZ1bmN0aW9uKGEpe2EmJihCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzc2VzKGEsdGhpcy5jc3NDb25maWdfLmNsb3NlZGljb24pLEJsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy5jc3NDb25maWdfLm9wZW5pY29uKSl9O1xuQmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmNsb3NlSWNvbl89ZnVuY3Rpb24oYSl7YSYmKEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzZXMoYSx0aGlzLmNzc0NvbmZpZ18ub3Blbmljb24pLEJsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy5jc3NDb25maWdfLmNsb3NlZGljb24pKX07QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLnNldFZpc2libGVfPWZ1bmN0aW9uKGEpe3RoaXMuaHRtbERpdl8uc3R5bGUuZGlzcGxheT1hP1wiYmxvY2tcIjpcIm5vbmVcIjt0aGlzLmlzSGlkZGVuXz0hYTt0aGlzLnBhcmVudFRvb2xib3hfLmdldFNlbGVjdGVkSXRlbSgpPT10aGlzJiZ0aGlzLnBhcmVudFRvb2xib3hfLmNsZWFyU2VsZWN0aW9uKCl9O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5zZXRWaXNpYmxlXyghMSl9O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dGhpcy5zZXRWaXNpYmxlXyghMCl9O1xuQmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzSGlkZGVuXyYmdGhpcy5hbGxBbmNlc3RvcnNFeHBhbmRlZF8oKX07QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmFsbEFuY2VzdG9yc0V4cGFuZGVkXz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzO2EuZ2V0UGFyZW50KCk7KWlmKGE9YS5nZXRQYXJlbnQoKSwhYS5pc0V4cGFuZGVkKCkpcmV0dXJuITE7cmV0dXJuITB9O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5pc1NlbGVjdGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1Zpc2libGUoKSYmIXRoaXMuaXNEaXNhYmxlZF99O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5vbkNsaWNrPWZ1bmN0aW9uKGEpe307XG5CbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuc2V0U2VsZWN0ZWQ9ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5wYXJzZUNvbG91cl8oQmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkuZGVmYXVsdEJhY2tncm91bmRDb2xvdXIpO3RoaXMucm93RGl2Xy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5jb2xvdXJffHxiO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKHRoaXMucm93RGl2Xyx0aGlzLmNzc0NvbmZpZ18uc2VsZWN0ZWQpfWVsc2UgdGhpcy5yb3dEaXZfLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIlwiLEJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZUNsYXNzKHRoaXMucm93RGl2Xyx0aGlzLmNzc0NvbmZpZ18uc2VsZWN0ZWQpO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZSh0aGlzLmh0bWxEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5TRUxFQ1RFRCxhKX07XG5CbG9ja2x5LlRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuc2V0RGlzYWJsZWQ9ZnVuY3Rpb24oYSl7dGhpcy5pc0Rpc2FibGVkXz1hO3RoaXMuZ2V0RGl2KCkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixhKTthP3RoaXMuZ2V0RGl2KCkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcInRydWVcIik6dGhpcy5nZXREaXYoKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX07QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lX307QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudF99O0Jsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5nZXREaXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5odG1sRGl2X307QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmdldENvbnRlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmx5b3V0SXRlbXNffTtcbkJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS51cGRhdGVGbHlvdXRDb250ZW50cz1mdW5jdGlvbihhKXt0aGlzLmZseW91dEl0ZW1zXz1bXTtcInN0cmluZ1wiPT10eXBlb2YgYT90aGlzLnRvb2xib3hJdGVtRGVmXy5jdXN0b209YTooZGVsZXRlIHRoaXMudG9vbGJveEl0ZW1EZWZfLmN1c3RvbSx0aGlzLnRvb2xib3hJdGVtRGVmXy5jb250ZW50cz1CbG9ja2x5LnV0aWxzLnRvb2xib3guY29udmVydEZseW91dERlZlRvSnNvbkFycmF5KGEpKTt0aGlzLnBhcnNlQ29udGVudHNfKHRoaXMudG9vbGJveEl0ZW1EZWZfKX07QmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKHRoaXMuaHRtbERpdl8pfTtcbkJsb2NrbHkuQ3NzLnJlZ2lzdGVyKFtcIi5ibG9ja2x5VHJlZVJvdzpub3QoLmJsb2NrbHlUcmVlU2VsZWN0ZWQpOmhvdmVyIHtcIixcImJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcIixcIn1cIiwnLmJsb2NrbHlUb29sYm94RGl2W2xheW91dD1cImhcIl0gLmJsb2NrbHlUb29sYm94Q2F0ZWdvcnkgeycsXCJtYXJnaW46IDFweCA1cHggMXB4IDA7XCIsXCJ9XCIsJy5ibG9ja2x5VG9vbGJveERpdltkaXI9XCJSVExcIl1bbGF5b3V0PVwiaFwiXSAuYmxvY2tseVRvb2xib3hDYXRlZ29yeSB7JyxcIm1hcmdpbjogMXB4IDAgMXB4IDVweDtcIixcIn1cIixcIi5ibG9ja2x5VHJlZVJvdyB7XCIsXCJoZWlnaHQ6IDIycHg7XCIsXCJsaW5lLWhlaWdodDogMjJweDtcIixcIm1hcmdpbi1ib3R0b206IDNweDtcIixcInBhZGRpbmctcmlnaHQ6IDhweDtcIixcIndoaXRlLXNwYWNlOiBub3dyYXA7XCIsXCJ9XCIsJy5ibG9ja2x5VG9vbGJveERpdltkaXI9XCJSVExcIl0gLmJsb2NrbHlUcmVlUm93IHsnLFwibWFyZ2luLWxlZnQ6IDhweDtcIixcblwicGFkZGluZy1yaWdodDogMHB4XCIsXCJ9XCIsXCIuYmxvY2tseVRyZWVJY29uIHtcIixcImJhY2tncm91bmQtaW1hZ2U6IHVybCg8PDxQQVRIPj4+L3Nwcml0ZXMucG5nKTtcIixcImhlaWdodDogMTZweDtcIixcInZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XCIsXCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIsXCJ3aWR0aDogMTZweDtcIixcIn1cIixcIi5ibG9ja2x5VHJlZUljb25DbG9zZWQge1wiLFwiYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTFweDtcIixcIn1cIiwnLmJsb2NrbHlUb29sYm94RGl2W2Rpcj1cIlJUTFwiXSAuYmxvY2tseVRyZWVJY29uQ2xvc2VkIHsnLFwiYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMXB4O1wiLFwifVwiLFwiLmJsb2NrbHlUcmVlU2VsZWN0ZWQ+LmJsb2NrbHlUcmVlSWNvbkNsb3NlZCB7XCIsXCJiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTdweDtcIixcIn1cIiwnLmJsb2NrbHlUb29sYm94RGl2W2Rpcj1cIlJUTFwiXSAuYmxvY2tseVRyZWVTZWxlY3RlZD4uYmxvY2tseVRyZWVJY29uQ2xvc2VkIHsnLFxuXCJiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xN3B4O1wiLFwifVwiLFwiLmJsb2NrbHlUcmVlSWNvbk9wZW4ge1wiLFwiYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTFweDtcIixcIn1cIixcIi5ibG9ja2x5VHJlZVNlbGVjdGVkPi5ibG9ja2x5VHJlZUljb25PcGVuIHtcIixcImJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xN3B4O1wiLFwifVwiLFwiLmJsb2NrbHlUcmVlTGFiZWwge1wiLFwiY3Vyc29yOiBkZWZhdWx0O1wiLFwiZm9udDogMTZweCBzYW5zLXNlcmlmO1wiLFwicGFkZGluZzogMCAzcHg7XCIsXCJ2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wiLFwifVwiLFwiLmJsb2NrbHlUb29sYm94RGVsZXRlIC5ibG9ja2x5VHJlZUxhYmVsIHtcIiwnY3Vyc29yOiB1cmwoXCI8PDxQQVRIPj4+L2hhbmRkZWxldGUuY3VyXCIpLCBhdXRvOycsXCJ9XCIsXCIuYmxvY2tseVRyZWVTZWxlY3RlZCAuYmxvY2tseVRyZWVMYWJlbCB7XCIsXCJjb2xvcjogI2ZmZjtcIixcIn1cIl0pO1xuQmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVE9PTEJPWF9JVEVNLEJsb2NrbHkuVG9vbGJveENhdGVnb3J5LnJlZ2lzdHJhdGlvbk5hbWUsQmxvY2tseS5Ub29sYm94Q2F0ZWdvcnkpO0Jsb2NrbHkuVG9vbGJveFNlcGFyYXRvcj1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuVG9vbGJveFNlcGFyYXRvci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLmNzc0NvbmZpZ189e2NvbnRhaW5lcjpcImJsb2NrbHlUcmVlU2VwYXJhdG9yXCJ9O0Jsb2NrbHkudXRpbHMub2JqZWN0Lm1peGluKHRoaXMuY3NzQ29uZmlnXyxhLmNzc2NvbmZpZ3x8YS5jc3NDb25maWcpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LlRvb2xib3hTZXBhcmF0b3IsQmxvY2tseS5Ub29sYm94SXRlbSk7QmxvY2tseS5Ub29sYm94U2VwYXJhdG9yLnJlZ2lzdHJhdGlvbk5hbWU9XCJzZXBcIjtCbG9ja2x5LlRvb2xib3hTZXBhcmF0b3IucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZURvbV8oKX07XG5CbG9ja2x5LlRvb2xib3hTZXBhcmF0b3IucHJvdG90eXBlLmNyZWF0ZURvbV89ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsdGhpcy5jc3NDb25maWdfLmNvbnRhaW5lcik7cmV0dXJuIHRoaXMuaHRtbERpdl89YX07QmxvY2tseS5Ub29sYm94U2VwYXJhdG9yLnByb3RvdHlwZS5nZXREaXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5odG1sRGl2X307QmxvY2tseS5Ub29sYm94U2VwYXJhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZSh0aGlzLmh0bWxEaXZfKX07QmxvY2tseS5Dc3MucmVnaXN0ZXIoJy5ibG9ja2x5VHJlZVNlcGFyYXRvciB7LGJvcmRlci1ib3R0b206IHNvbGlkICNlNWU1ZTUgMXB4OyxoZWlnaHQ6IDA7LG1hcmdpbjogNXB4IDA7LH0sLmJsb2NrbHlUb29sYm94RGl2W2xheW91dD1cImhcIl0gLmJsb2NrbHlUcmVlU2VwYXJhdG9yIHssYm9yZGVyLXJpZ2h0OiBzb2xpZCAjZTVlNWU1IDFweDssYm9yZGVyLWJvdHRvbTogbm9uZTssaGVpZ2h0OiBhdXRvOyxtYXJnaW46IDAgNXB4IDAgNXB4OyxwYWRkaW5nOiA1cHggMDssd2lkdGg6IDA7LH0nLnNwbGl0KFwiLFwiKSk7XG5CbG9ja2x5LnJlZ2lzdHJ5LnJlZ2lzdGVyKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5UT09MQk9YX0lURU0sQmxvY2tseS5Ub29sYm94U2VwYXJhdG9yLnJlZ2lzdHJhdGlvbk5hbWUsQmxvY2tseS5Ub29sYm94U2VwYXJhdG9yKTtCbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5PWZ1bmN0aW9uKGEsYixjKXt0aGlzLnN1YmNhdGVnb3JpZXNEaXZfPW51bGw7dGhpcy5leHBhbmRlZF89ITE7dGhpcy50b29sYm94SXRlbXNfPVtdO0Jsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeSxCbG9ja2x5LlRvb2xib3hDYXRlZ29yeSk7QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5yZWdpc3RyYXRpb25OYW1lPVwiY29sbGFwc2libGVDYXRlZ29yeVwiO1xuQmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUubWFrZURlZmF1bHRDc3NDb25maWdfPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5zdXBlckNsYXNzXy5tYWtlRGVmYXVsdENzc0NvbmZpZ18uY2FsbCh0aGlzKTthLmNvbnRlbnRzPVwiYmxvY2tseVRvb2xib3hDb250ZW50c1wiO3JldHVybiBhfTtcbkJsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLnBhcnNlQ29udGVudHNfPWZ1bmN0aW9uKGEpe3ZhciBiPWEuY29udGVudHMsYz0hMDtpZihhLmN1c3RvbSl0aGlzLmZseW91dEl0ZW1zXz1hLmN1c3RvbTtlbHNlIGlmKGIpe2E9MDtmb3IodmFyIGQ7ZD1iW2FdO2ErKykhQmxvY2tseS5yZWdpc3RyeS5oYXNJdGVtKEJsb2NrbHkucmVnaXN0cnkuVHlwZS5UT09MQk9YX0lURU0sZC5raW5kKXx8ZC5raW5kLnRvTG93ZXJDYXNlKCk9PUJsb2NrbHkuVG9vbGJveFNlcGFyYXRvci5yZWdpc3RyYXRpb25OYW1lJiZjPyh0aGlzLmZseW91dEl0ZW1zXy5wdXNoKGQpLGM9ITApOih0aGlzLmNyZWF0ZVRvb2xib3hJdGVtXyhkKSxjPSExKX19O1xuQmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuY3JlYXRlVG9vbGJveEl0ZW1fPWZ1bmN0aW9uKGEpe3ZhciBiPWEua2luZDtcIkNBVEVHT1JZXCI9PWIudG9VcHBlckNhc2UoKSYmQmxvY2tseS51dGlscy50b29sYm94LmlzQ2F0ZWdvcnlDb2xsYXBzaWJsZShhKSYmKGI9QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5yZWdpc3RyYXRpb25OYW1lKTthPW5ldyAoQmxvY2tseS5yZWdpc3RyeS5nZXRDbGFzcyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVE9PTEJPWF9JVEVNLGIpKShhLHRoaXMucGFyZW50VG9vbGJveF8sdGhpcyk7dGhpcy50b29sYm94SXRlbXNfLnB1c2goYSl9O1xuQmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe0Jsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkuc3VwZXJDbGFzc18uaW5pdC5jYWxsKHRoaXMpO3RoaXMuc2V0RXhwYW5kZWQoXCJ0cnVlXCI9PXRoaXMudG9vbGJveEl0ZW1EZWZfLmV4cGFuZGVkfHx0aGlzLnRvb2xib3hJdGVtRGVmXy5leHBhbmRlZCl9O1xuQmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuY3JlYXRlRG9tXz1mdW5jdGlvbigpe0Jsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkuc3VwZXJDbGFzc18uY3JlYXRlRG9tXy5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuZ2V0Q2hpbGRUb29sYm94SXRlbXMoKTt0aGlzLnN1YmNhdGVnb3JpZXNEaXZfPXRoaXMuY3JlYXRlU3ViQ2F0ZWdvcmllc0RvbV8oYSk7QmxvY2tseS51dGlscy5hcmlhLnNldFJvbGUodGhpcy5zdWJjYXRlZ29yaWVzRGl2XyxCbG9ja2x5LnV0aWxzLmFyaWEuUm9sZS5HUk9VUCk7dGhpcy5odG1sRGl2Xy5hcHBlbmRDaGlsZCh0aGlzLnN1YmNhdGVnb3JpZXNEaXZfKTtyZXR1cm4gdGhpcy5odG1sRGl2X307XG5CbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5jcmVhdGVJY29uRG9tXz1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO3RoaXMucGFyZW50VG9vbGJveF8uaXNIb3Jpem9udGFsKCl8fChCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLHRoaXMuY3NzQ29uZmlnXy5pY29uKSxhLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIpO2Euc3R5bGUuZGlzcGxheT1cImlubGluZS1ibG9ja1wiO3JldHVybiBhfTtCbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5jcmVhdGVTdWJDYXRlZ29yaWVzRG9tXz1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGIsdGhpcy5jc3NDb25maWdfLmNvbnRlbnRzKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXTtkLmluaXQoKTtkPWQuZ2V0RGl2KCk7Yi5hcHBlbmRDaGlsZChkKX1yZXR1cm4gYn07XG5CbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS5zZXRFeHBhbmRlZD1mdW5jdGlvbihhKXt0aGlzLmV4cGFuZGVkXyE9YSYmKCh0aGlzLmV4cGFuZGVkXz1hKT8odGhpcy5zdWJjYXRlZ29yaWVzRGl2Xy5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIix0aGlzLm9wZW5JY29uXyh0aGlzLmljb25Eb21fKSk6KHRoaXMuc3ViY2F0ZWdvcmllc0Rpdl8uc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmNsb3NlSWNvbl8odGhpcy5pY29uRG9tXykpLEJsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZSh0aGlzLmh0bWxEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5FWFBBTkRFRCxhKSx0aGlzLnBhcmVudFRvb2xib3hfLmhhbmRsZVRvb2xib3hJdGVtUmVzaXplKCkpfTtcbkJsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLnNldFZpc2libGVfPWZ1bmN0aW9uKGEpe3RoaXMuaHRtbERpdl8uc3R5bGUuZGlzcGxheT1hP1wiYmxvY2tcIjpcIm5vbmVcIjtmb3IodmFyIGI9MCxjO2M9dGhpcy5nZXRDaGlsZFRvb2xib3hJdGVtcygpW2JdO2IrKyljLnNldFZpc2libGVfKGEpO3RoaXMuaXNIaWRkZW5fPSFhO3RoaXMucGFyZW50VG9vbGJveF8uZ2V0U2VsZWN0ZWRJdGVtKCk9PXRoaXMmJnRoaXMucGFyZW50VG9vbGJveF8uY2xlYXJTZWxlY3Rpb24oKX07QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuaXNFeHBhbmRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV4cGFuZGVkX307QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuaXNDb2xsYXBzaWJsZT1mdW5jdGlvbigpe3JldHVybiEwfTtcbkJsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLm9uQ2xpY2s9ZnVuY3Rpb24oYSl7dGhpcy50b2dnbGVFeHBhbmRlZCgpfTtCbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5LnByb3RvdHlwZS50b2dnbGVFeHBhbmRlZD1mdW5jdGlvbigpe3RoaXMuc2V0RXhwYW5kZWQoIXRoaXMuZXhwYW5kZWRfKX07QmxvY2tseS5Db2xsYXBzaWJsZVRvb2xib3hDYXRlZ29yeS5wcm90b3R5cGUuZ2V0RGl2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaHRtbERpdl99O0Jsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkucHJvdG90eXBlLmdldENoaWxkVG9vbGJveEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9vbGJveEl0ZW1zX307QmxvY2tseS5yZWdpc3RyeS5yZWdpc3RlcihCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVE9PTEJPWF9JVEVNLEJsb2NrbHkuQ29sbGFwc2libGVUb29sYm94Q2F0ZWdvcnkucmVnaXN0cmF0aW9uTmFtZSxCbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5KTtCbG9ja2x5LlRvb2xib3g9ZnVuY3Rpb24oYSl7dGhpcy53b3Jrc3BhY2VfPWE7dGhpcy50b29sYm94RGVmXz1hLm9wdGlvbnMubGFuZ3VhZ2VUcmVlfHx7Y29udGVudHM6W119O3RoaXMuaG9yaXpvbnRhbExheW91dF89YS5vcHRpb25zLmhvcml6b250YWxMYXlvdXQ7dGhpcy5jb250ZW50c0Rpdl89dGhpcy5IdG1sRGl2PW51bGw7dGhpcy5jb250ZW50c189W107dGhpcy5oZWlnaHRfPXRoaXMud2lkdGhfPTA7dGhpcy5SVEw9YS5vcHRpb25zLlJUTDt0aGlzLmZseW91dF89bnVsbDt0aGlzLmNvbnRlbnRNYXBfPXt9O3RoaXMudG9vbGJveFBvc2l0aW9uPWEub3B0aW9ucy50b29sYm94UG9zaXRpb247dGhpcy5wcmV2aW91c2x5U2VsZWN0ZWRJdGVtXz10aGlzLnNlbGVjdGVkSXRlbV89bnVsbDt0aGlzLmJvdW5kRXZlbnRzXz1bXX07XG5CbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmtzcGFjZV8sYj1hLmdldFBhcmVudFN2ZygpO3RoaXMuZmx5b3V0Xz10aGlzLmNyZWF0ZUZseW91dF8oKTt0aGlzLkh0bWxEaXY9dGhpcy5jcmVhdGVEb21fKHRoaXMud29ya3NwYWNlXyk7QmxvY2tseS51dGlscy5kb20uaW5zZXJ0QWZ0ZXIodGhpcy5mbHlvdXRfLmNyZWF0ZURvbShcInN2Z1wiKSxiKTt0aGlzLmZseW91dF8uaW5pdChhKTt0aGlzLnJlbmRlcih0aGlzLnRvb2xib3hEZWZfKTthPWEuZ2V0VGhlbWVNYW5hZ2VyKCk7YS5zdWJzY3JpYmUodGhpcy5IdG1sRGl2LFwidG9vbGJveEJhY2tncm91bmRDb2xvdXJcIixcImJhY2tncm91bmQtY29sb3JcIik7YS5zdWJzY3JpYmUodGhpcy5IdG1sRGl2LFwidG9vbGJveEZvcmVncm91bmRDb2xvdXJcIixcImNvbG9yXCIpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuY3JlYXRlRG9tXz1mdW5jdGlvbihhKXthPWEuZ2V0UGFyZW50U3ZnKCk7dmFyIGI9dGhpcy5jcmVhdGVDb250YWluZXJfKCk7dGhpcy5jb250ZW50c0Rpdl89dGhpcy5jcmVhdGVDb250ZW50c0NvbnRhaW5lcl8oKTt0aGlzLmNvbnRlbnRzRGl2Xy50YWJJbmRleD0wO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRSb2xlKHRoaXMuY29udGVudHNEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLlRSRUUpO2IuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50c0Rpdl8pO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTt0aGlzLmF0dGFjaEV2ZW50c18oYix0aGlzLmNvbnRlbnRzRGl2Xyk7cmV0dXJuIGJ9O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5jcmVhdGVDb250YWluZXJfPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnNldEF0dHJpYnV0ZShcImxheW91dFwiLHRoaXMuaXNIb3Jpem9udGFsKCk/XCJoXCI6XCJ2XCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsXCJibG9ja2x5VG9vbGJveERpdlwiKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLFwiYmxvY2tseU5vblNlbGVjdGFibGVcIik7YS5zZXRBdHRyaWJ1dGUoXCJkaXJcIix0aGlzLlJUTD9cIlJUTFwiOlwiTFRSXCIpO3JldHVybiBhfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuY3JlYXRlQ29udGVudHNDb250YWluZXJfPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLFwiYmxvY2tseVRvb2xib3hDb250ZW50c1wiKTt0aGlzLmlzSG9yaXpvbnRhbCgpJiYoYS5zdHlsZS5mbGV4RGlyZWN0aW9uPVwicm93XCIpO3JldHVybiBhfTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmF0dGFjaEV2ZW50c189ZnVuY3Rpb24oYSxiKXthPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYSxcIm1vdXNlZG93blwiLHRoaXMsdGhpcy5vbkNsaWNrXywhMSwhMCk7dGhpcy5ib3VuZEV2ZW50c18ucHVzaChhKTtiPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcImtleWRvd25cIix0aGlzLHRoaXMub25LZXlEb3duXywhMSwhMCk7dGhpcy5ib3VuZEV2ZW50c18ucHVzaChiKX07XG5CbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLm9uQ2xpY2tfPWZ1bmN0aW9uKGEpe2lmKEJsb2NrbHkudXRpbHMuaXNSaWdodEJ1dHRvbihhKXx8YS50YXJnZXQ9PXRoaXMuSHRtbERpdilCbG9ja2x5LmhpZGVDaGFmZighMSk7ZWxzZXt2YXIgYj1hLnNyY0VsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIik7YiYmKGI9dGhpcy5nZXRUb29sYm94SXRlbUJ5SWQoYiksYi5pc1NlbGVjdGFibGUoKSYmKHRoaXMuc2V0U2VsZWN0ZWRJdGVtKGIpLGIub25DbGljayhhKSkpO0Jsb2NrbHkuaGlkZUNoYWZmKCEwKX1CbG9ja2x5LlRvdWNoLmNsZWFyVG91Y2hJZGVudGlmaWVyKCl9O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5vbktleURvd25fPWZ1bmN0aW9uKGEpe3ZhciBiPSExO3N3aXRjaChhLmtleUNvZGUpe2Nhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5ET1dOOmI9dGhpcy5zZWxlY3ROZXh0XygpO2JyZWFrO2Nhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5VUDpiPXRoaXMuc2VsZWN0UHJldmlvdXNfKCk7YnJlYWs7Y2FzZSBCbG9ja2x5LnV0aWxzLktleUNvZGVzLkxFRlQ6Yj10aGlzLnNlbGVjdFBhcmVudF8oKTticmVhaztjYXNlIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuUklHSFQ6Yj10aGlzLnNlbGVjdENoaWxkXygpO2JyZWFrO2Nhc2UgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5FTlRFUjpjYXNlIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuU1BBQ0U6dGhpcy5zZWxlY3RlZEl0ZW1fJiZ0aGlzLnNlbGVjdGVkSXRlbV8uaXNDb2xsYXBzaWJsZSgpJiYodGhpcy5zZWxlY3RlZEl0ZW1fLnRvZ2dsZUV4cGFuZGVkKCksYj0hMCk7YnJlYWs7ZGVmYXVsdDpiPVxuITF9YiYmYS5wcmV2ZW50RGVmYXVsdCgpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuY3JlYXRlRmx5b3V0Xz1mdW5jdGlvbigpe3ZhciBhPXRoaXMud29ya3NwYWNlXyxiPW5ldyBCbG9ja2x5Lk9wdGlvbnMoe3BhcmVudFdvcmtzcGFjZTphLHJ0bDphLlJUTCxvbmVCYXNlZEluZGV4OmEub3B0aW9ucy5vbmVCYXNlZEluZGV4LGhvcml6b250YWxMYXlvdXQ6YS5ob3Jpem9udGFsTGF5b3V0LHJlbmRlcmVyOmEub3B0aW9ucy5yZW5kZXJlcixyZW5kZXJlck92ZXJyaWRlczphLm9wdGlvbnMucmVuZGVyZXJPdmVycmlkZXN9KTtiLnRvb2xib3hQb3NpdGlvbj1hLm9wdGlvbnMudG9vbGJveFBvc2l0aW9uO2E9YS5ob3Jpem9udGFsTGF5b3V0P0Jsb2NrbHkucmVnaXN0cnkuZ2V0Q2xhc3NGcm9tT3B0aW9ucyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuRkxZT1VUU19IT1JJWk9OVEFMX1RPT0xCT1gsYS5vcHRpb25zKTpCbG9ja2x5LnJlZ2lzdHJ5LmdldENsYXNzRnJvbU9wdGlvbnMoQmxvY2tseS5yZWdpc3RyeS5UeXBlLkZMWU9VVFNfVkVSVElDQUxfVE9PTEJPWCxhLm9wdGlvbnMpO1xuaWYoIWEpdGhyb3cgRXJyb3IoXCJCbG9ja2x5LlZlcnRpY2FsRmx5b3V0LCBCbG9ja2x5Lkhvcml6b250YWxGbHlvdXQgb3IgeW91ciBvd24gY3VzdG9tIGZseW91dCBtdXN0IGJlIHJlcXVpcmVkLlwiKTtyZXR1cm4gbmV3IGEoYil9O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGEpe3RoaXMudG9vbGJveERlZl89YTtmb3IodmFyIGI9MDtiPHRoaXMuY29udGVudHNfLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuY29udGVudHNfW2JdO2MmJmMuZGlzcG9zZSgpfXRoaXMuY29udGVudHNfPVtdO3RoaXMuY29udGVudE1hcF89e307dGhpcy5yZW5kZXJDb250ZW50c18oYS5jb250ZW50cyk7dGhpcy5wb3NpdGlvbigpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUucmVuZGVyQ29udGVudHNfPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYz0wLGQ7ZD1hW2NdO2MrKyl0aGlzLmNyZWF0ZVRvb2xib3hJdGVtXyhkLGIpO3RoaXMuY29udGVudHNEaXZfLmFwcGVuZENoaWxkKGIpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuY3JlYXRlVG9vbGJveEl0ZW1fPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5raW5kO1wiQ0FURUdPUllcIj09Yy50b1VwcGVyQ2FzZSgpJiZCbG9ja2x5LnV0aWxzLnRvb2xib3guaXNDYXRlZ29yeUNvbGxhcHNpYmxlKGEpJiYoYz1CbG9ja2x5LkNvbGxhcHNpYmxlVG9vbGJveENhdGVnb3J5LnJlZ2lzdHJhdGlvbk5hbWUpO2lmKGM9QmxvY2tseS5yZWdpc3RyeS5nZXRDbGFzcyhCbG9ja2x5LnJlZ2lzdHJ5LlR5cGUuVE9PTEJPWF9JVEVNLGMudG9Mb3dlckNhc2UoKSkpYT1uZXcgYyhhLHRoaXMpLHRoaXMuYWRkVG9vbGJveEl0ZW1fKGEpLGEuaW5pdCgpLChhPWEuZ2V0RGl2KCkpJiZiLmFwcGVuZENoaWxkKGEpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuYWRkVG9vbGJveEl0ZW1fPWZ1bmN0aW9uKGEpe3RoaXMuY29udGVudHNfLnB1c2goYSk7dGhpcy5jb250ZW50TWFwX1thLmdldElkKCldPWE7aWYoYS5pc0NvbGxhcHNpYmxlKCkpZm9yKHZhciBiPTAsYztjPWEuZ2V0Q2hpbGRUb29sYm94SXRlbXMoKVtiXTtiKyspdGhpcy5hZGRUb29sYm94SXRlbV8oYyl9O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZ2V0VG9vbGJveEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudHNffTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmFkZFN0eWxlPWZ1bmN0aW9uKGEpe0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKHRoaXMuSHRtbERpdixhKX07QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5yZW1vdmVTdHlsZT1mdW5jdGlvbihhKXtCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyh0aGlzLkh0bWxEaXYsYSl9O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5nZXRDbGllbnRSZWN0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuSHRtbERpdilyZXR1cm4gbnVsbDt2YXIgYT10aGlzLkh0bWxEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYj1hLnRvcCxjPWIrYS5oZWlnaHQsZD1hLmxlZnQ7YT1kK2Eud2lkdGg7cmV0dXJuIHRoaXMudG9vbGJveFBvc2l0aW9uPT1CbG9ja2x5LnV0aWxzLnRvb2xib3guUG9zaXRpb24uVE9QP25ldyBCbG9ja2x5LnV0aWxzLlJlY3QoLTFFNyxjLC0xRTcsMUU3KTp0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLkJPVFRPTT9uZXcgQmxvY2tseS51dGlscy5SZWN0KGIsMUU3LC0xRTcsMUU3KTp0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLkxFRlQ/bmV3IEJsb2NrbHkudXRpbHMuUmVjdCgtMUU3LDFFNywtMUU3LGEpOm5ldyBCbG9ja2x5LnV0aWxzLlJlY3QoLTFFNywxRTcsZCwxRTcpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZ2V0VG9vbGJveEl0ZW1CeUlkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnRlbnRNYXBfW2FdfTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGhffTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmdldEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhlaWdodF99O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZ2V0Rmx5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmx5b3V0X307QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5nZXRXb3Jrc3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53b3Jrc3BhY2VffTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkSXRlbV99O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZ2V0UHJldmlvdXNseVNlbGVjdGVkSXRlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZpb3VzbHlTZWxlY3RlZEl0ZW1ffTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuaXNIb3Jpem9udGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9yaXpvbnRhbExheW91dF99O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkh0bWxEaXY7YSYmKHRoaXMuaG9yaXpvbnRhbExheW91dF8/KGEuc3R5bGUubGVmdD1cIjBcIixhLnN0eWxlLmhlaWdodD1cImF1dG9cIixhLnN0eWxlLndpZHRoPVwiMTAwJVwiLHRoaXMuaGVpZ2h0Xz1hLm9mZnNldEhlaWdodCx0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX1RPUD9hLnN0eWxlLnRvcD1cIjBcIjphLnN0eWxlLmJvdHRvbT1cIjBcIik6KHRoaXMudG9vbGJveFBvc2l0aW9uPT1CbG9ja2x5LlRPT0xCT1hfQVRfUklHSFQ/YS5zdHlsZS5yaWdodD1cIjBcIjphLnN0eWxlLmxlZnQ9XCIwXCIsYS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy53aWR0aF89YS5vZmZzZXRXaWR0aCksdGhpcy5mbHlvdXRfLnBvc2l0aW9uKCkpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuaGFuZGxlVG9vbGJveEl0ZW1SZXNpemU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmtzcGFjZV8sYj10aGlzLkh0bWxEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7YS50cmFuc2xhdGUodGhpcy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUP2Euc2Nyb2xsWCtiLndpZHRoOmEuc2Nyb2xsWCx0aGlzLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX1RPUD9hLnNjcm9sbFkrYi5oZWlnaHQ6YS5zY3JvbGxZKTtCbG9ja2x5LnN2Z1Jlc2l6ZShhKX07QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2V0U2VsZWN0ZWRJdGVtKG51bGwpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUucmVmcmVzaFRoZW1lPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLmNvbnRlbnRzXy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmNvbnRlbnRzX1thXTtiLnJlZnJlc2hUaGVtZSYmYi5yZWZyZXNoVGhlbWUoKX19O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUucmVmcmVzaFNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJdGVtXyYmdGhpcy5zZWxlY3RlZEl0ZW1fLmlzU2VsZWN0YWJsZSgpJiZ0aGlzLnNlbGVjdGVkSXRlbV8uZ2V0Q29udGVudHMoKS5sZW5ndGgmJnRoaXMuZmx5b3V0Xy5zaG93KHRoaXMuc2VsZWN0ZWRJdGVtXy5nZXRDb250ZW50cygpKX07QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5zZXRWaXNpYmxlPWZ1bmN0aW9uKGEpe3RoaXMuSHRtbERpdi5zdHlsZS5kaXNwbGF5PWE/XCJibG9ja1wiOlwibm9uZVwifTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuc2V0U2VsZWN0ZWRJdGVtPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VsZWN0ZWRJdGVtXzshYSYmIWJ8fGEmJiFhLmlzU2VsZWN0YWJsZSgpfHwodGhpcy5zaG91bGREZXNlbGVjdEl0ZW1fKGIsYSkmJm51bGwhPWImJnRoaXMuZGVzZWxlY3RJdGVtXyhiKSx0aGlzLnNob3VsZFNlbGVjdEl0ZW1fKGIsYSkmJm51bGwhPWEmJnRoaXMuc2VsZWN0SXRlbV8oYixhKSx0aGlzLnVwZGF0ZUZseW91dF8oYixhKSx0aGlzLmZpcmVTZWxlY3RFdmVudF8oYixhKSl9O0Jsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuc2hvdWxkRGVzZWxlY3RJdGVtXz1mdW5jdGlvbihhLGIpe3JldHVybiBudWxsIT1hJiYoIWEuaXNDb2xsYXBzaWJsZSgpfHxhIT1iKX07QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5zaG91bGRTZWxlY3RJdGVtXz1mdW5jdGlvbihhLGIpe3JldHVybiBudWxsIT1iJiZiIT1hfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZGVzZWxlY3RJdGVtXz1mdW5jdGlvbihhKXt0aGlzLnNlbGVjdGVkSXRlbV89bnVsbDt0aGlzLnByZXZpb3VzbHlTZWxlY3RlZEl0ZW1fPWE7YS5zZXRTZWxlY3RlZCghMSk7QmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKHRoaXMuY29udGVudHNEaXZfLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5BQ1RJVkVERVNDRU5EQU5ULFwiXCIpfTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLnNlbGVjdEl0ZW1fPWZ1bmN0aW9uKGEsYil7dGhpcy5zZWxlY3RlZEl0ZW1fPWI7dGhpcy5wcmV2aW91c2x5U2VsZWN0ZWRJdGVtXz1hO2Iuc2V0U2VsZWN0ZWQoITApO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZSh0aGlzLmNvbnRlbnRzRGl2XyxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuQUNUSVZFREVTQ0VOREFOVCxiLmdldElkKCkpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuc2VsZWN0SXRlbUJ5UG9zaXRpb249ZnVuY3Rpb24oYSl7LTE8YSYmYTx0aGlzLmNvbnRlbnRzXy5sZW5ndGgmJihhPXRoaXMuY29udGVudHNfW2FdLGEuaXNTZWxlY3RhYmxlKCkmJnRoaXMuc2V0U2VsZWN0ZWRJdGVtKGEpKX07QmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS51cGRhdGVGbHlvdXRfPWZ1bmN0aW9uKGEsYil7KGEhPWJ8fGIuaXNDb2xsYXBzaWJsZSgpKSYmYiYmYi5nZXRDb250ZW50cygpLmxlbmd0aD8odGhpcy5mbHlvdXRfLnNob3coYi5nZXRDb250ZW50cygpKSx0aGlzLmZseW91dF8uc2Nyb2xsVG9TdGFydCgpKTp0aGlzLmZseW91dF8uaGlkZSgpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUuZmlyZVNlbGVjdEV2ZW50Xz1mdW5jdGlvbihhLGIpe3ZhciBjPWEmJmEuZ2V0TmFtZSgpLGQ9YiYmYi5nZXROYW1lKCk7YT09YiYmKGQ9bnVsbCk7YT1uZXcgQmxvY2tseS5FdmVudHMuVWkobnVsbCxcImNhdGVnb3J5XCIsYyxkKTthLndvcmtzcGFjZUlkPXRoaXMud29ya3NwYWNlXy5pZDtCbG9ja2x5LkV2ZW50cy5maXJlKGEpfTtcbkJsb2NrbHkuVG9vbGJveC5wcm90b3R5cGUub25CbG9ja2x5QWN0aW9uPWZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNlbGVjdGVkSXRlbV8pcmV0dXJuITE7c3dpdGNoKGEubmFtZSl7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuUFJFVklPVVM6cmV0dXJuIHRoaXMuc2VsZWN0UHJldmlvdXNfKCk7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuT1VUOnJldHVybiB0aGlzLnNlbGVjdFBhcmVudF8oKTtjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5ORVhUOnJldHVybiB0aGlzLnNlbGVjdE5leHRfKCk7Y2FzZSBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuSU46cmV0dXJuIHRoaXMuc2VsZWN0Q2hpbGRfKCk7ZGVmYXVsdDpyZXR1cm4hMX19O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5zZWxlY3RQYXJlbnRfPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWRJdGVtXz90aGlzLnNlbGVjdGVkSXRlbV8uaXNDb2xsYXBzaWJsZSgpJiZ0aGlzLnNlbGVjdGVkSXRlbV8uaXNFeHBhbmRlZCgpPyh0aGlzLnNlbGVjdGVkSXRlbV8uc2V0RXhwYW5kZWQoITEpLCEwKTp0aGlzLnNlbGVjdGVkSXRlbV8uZ2V0UGFyZW50KCkmJnRoaXMuc2VsZWN0ZWRJdGVtXy5nZXRQYXJlbnQoKS5pc1NlbGVjdGFibGUoKT8odGhpcy5zZXRTZWxlY3RlZEl0ZW0odGhpcy5zZWxlY3RlZEl0ZW1fLmdldFBhcmVudCgpKSwhMCk6ITE6ITF9O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5zZWxlY3RDaGlsZF89ZnVuY3Rpb24oKXtpZighdGhpcy5zZWxlY3RlZEl0ZW1ffHwhdGhpcy5zZWxlY3RlZEl0ZW1fLmlzQ29sbGFwc2libGUoKSlyZXR1cm4hMTt2YXIgYT10aGlzLnNlbGVjdGVkSXRlbV87YS5pc0V4cGFuZGVkKCk/dGhpcy5zZWxlY3ROZXh0XygpOmEuc2V0RXhwYW5kZWQoITApO3JldHVybiEwfTtCbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLnNlbGVjdE5leHRfPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0ZWRJdGVtXylyZXR1cm4hMTt2YXIgYT10aGlzLmNvbnRlbnRzXy5pbmRleE9mKHRoaXMuc2VsZWN0ZWRJdGVtXykrMTtpZigtMTxhJiZhPHRoaXMuY29udGVudHNfLmxlbmd0aCl7Zm9yKHZhciBiPXRoaXMuY29udGVudHNfW2FdO2ImJiFiLmlzU2VsZWN0YWJsZSgpOyliPXRoaXMuY29udGVudHNfWysrYV07aWYoYiYmYi5pc1NlbGVjdGFibGUoKSlyZXR1cm4gdGhpcy5zZXRTZWxlY3RlZEl0ZW0oYiksITB9cmV0dXJuITF9O1xuQmxvY2tseS5Ub29sYm94LnByb3RvdHlwZS5zZWxlY3RQcmV2aW91c189ZnVuY3Rpb24oKXtpZighdGhpcy5zZWxlY3RlZEl0ZW1fKXJldHVybiExO3ZhciBhPXRoaXMuY29udGVudHNfLmluZGV4T2YodGhpcy5zZWxlY3RlZEl0ZW1fKS0xO2lmKC0xPGEmJmE8dGhpcy5jb250ZW50c18ubGVuZ3RoKXtmb3IodmFyIGI9dGhpcy5jb250ZW50c19bYV07YiYmIWIuaXNTZWxlY3RhYmxlKCk7KWI9dGhpcy5jb250ZW50c19bLS1hXTtpZihiJiZiLmlzU2VsZWN0YWJsZSgpKXJldHVybiB0aGlzLnNldFNlbGVjdGVkSXRlbShiKSwhMH1yZXR1cm4hMX07XG5CbG9ja2x5LlRvb2xib3gucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmZseW91dF8uZGlzcG9zZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5jb250ZW50c18ubGVuZ3RoO2ErKyl0aGlzLmNvbnRlbnRzX1thXS5kaXNwb3NlKCk7Zm9yKGE9MDthPHRoaXMuYm91bmRFdmVudHNfLmxlbmd0aDthKyspQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5ib3VuZEV2ZW50c19bYV0pO3RoaXMuYm91bmRFdmVudHNfPVtdO3RoaXMuY29udGVudHNfPVtdO3RoaXMud29ya3NwYWNlXy5nZXRUaGVtZU1hbmFnZXIoKS51bnN1YnNjcmliZSh0aGlzLkh0bWxEaXYpO0Jsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5IdG1sRGl2KX07XG5CbG9ja2x5LkNzcy5yZWdpc3RlcihbXCIuYmxvY2tseVRvb2xib3hEZWxldGUge1wiLCdjdXJzb3I6IHVybChcIjw8PFBBVEg+Pj4vaGFuZGRlbGV0ZS5jdXJcIiksIGF1dG87JyxcIn1cIixcIi5ibG9ja2x5VG9vbGJveEdyYWIge1wiLCdjdXJzb3I6IHVybChcIjw8PFBBVEg+Pj4vaGFuZGNsb3NlZC5jdXJcIiksIGF1dG87JyxcImN1cnNvcjogZ3JhYmJpbmc7XCIsXCJjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XCIsXCJ9XCIsXCIuYmxvY2tseVRvb2xib3hEaXYge1wiLFwiYmFja2dyb3VuZC1jb2xvcjogI2RkZDtcIixcIm92ZXJmbG93LXg6IHZpc2libGU7XCIsXCJvdmVyZmxvdy15OiBhdXRvO1wiLFwicGFkZGluZzogNHB4IDAgNHB4IDA7XCIsXCJwb3NpdGlvbjogYWJzb2x1dGU7XCIsXCJ6LWluZGV4OiA3MDtcIixcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XCIsXCJ9XCIsXCIuYmxvY2tseVRvb2xib3hDb250ZW50cyB7XCIsXCJkaXNwbGF5OiBmbGV4O1wiLFwiZmxleC13cmFwOiB3cmFwO1wiLFwiZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcIixcblwifVwiLFwiLmJsb2NrbHlUb29sYm94Q29udGVudHM6Zm9jdXMge1wiLFwib3V0bGluZTogbm9uZTtcIixcIn1cIl0pO0Jsb2NrbHkucmVnaXN0cnkucmVnaXN0ZXIoQmxvY2tseS5yZWdpc3RyeS5UeXBlLlRPT0xCT1gsQmxvY2tseS5yZWdpc3RyeS5ERUZBVUxULEJsb2NrbHkuVG9vbGJveCk7QmxvY2tseS5UcmFzaGNhbj1mdW5jdGlvbihhKXt0aGlzLndvcmtzcGFjZV89YTt0aGlzLmNvbnRlbnRzXz1bXTt0aGlzLmZseW91dD1udWxsO2lmKCEoMD49dGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMubWF4VHJhc2hjYW5Db250ZW50cykpe2E9bmV3IEJsb2NrbHkuT3B0aW9ucyh7c2Nyb2xsYmFyczohMCxwYXJlbnRXb3Jrc3BhY2U6dGhpcy53b3Jrc3BhY2VfLHJ0bDp0aGlzLndvcmtzcGFjZV8uUlRMLG9uZUJhc2VkSW5kZXg6dGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMub25lQmFzZWRJbmRleCxyZW5kZXJlcjp0aGlzLndvcmtzcGFjZV8ub3B0aW9ucy5yZW5kZXJlcixyZW5kZXJlck92ZXJyaWRlczp0aGlzLndvcmtzcGFjZV8ub3B0aW9ucy5yZW5kZXJlck92ZXJyaWRlc30pO2lmKHRoaXMud29ya3NwYWNlXy5ob3Jpem9udGFsTGF5b3V0KXthLnRvb2xib3hQb3NpdGlvbj10aGlzLndvcmtzcGFjZV8udG9vbGJveFBvc2l0aW9uPT1CbG9ja2x5LnV0aWxzLnRvb2xib3guUG9zaXRpb24uVE9QP1xuQmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLkJPVFRPTTpCbG9ja2x5LnV0aWxzLnRvb2xib3guUG9zaXRpb24uVE9QO2lmKCFCbG9ja2x5Lkhvcml6b250YWxGbHlvdXQpdGhyb3cgRXJyb3IoXCJNaXNzaW5nIHJlcXVpcmUgZm9yIEJsb2NrbHkuSG9yaXpvbnRhbEZseW91dFwiKTt0aGlzLmZseW91dD1uZXcgQmxvY2tseS5Ib3Jpem9udGFsRmx5b3V0KGEpfWVsc2V7YS50b29sYm94UG9zaXRpb249dGhpcy53b3Jrc3BhY2VfLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLlJJR0hUP0Jsb2NrbHkudXRpbHMudG9vbGJveC5Qb3NpdGlvbi5MRUZUOkJsb2NrbHkudXRpbHMudG9vbGJveC5Qb3NpdGlvbi5SSUdIVDtpZighQmxvY2tseS5WZXJ0aWNhbEZseW91dCl0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5WZXJ0aWNhbEZseW91dFwiKTt0aGlzLmZseW91dD1uZXcgQmxvY2tseS5WZXJ0aWNhbEZseW91dChhKX10aGlzLndvcmtzcGFjZV8uYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkRlbGV0ZV8uYmluZCh0aGlzKSl9fTtcbkJsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLldJRFRIXz00NztCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5CT0RZX0hFSUdIVF89NDQ7QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuTElEX0hFSUdIVF89MTY7QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuTUFSR0lOX0JPVFRPTV89MjA7QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuTUFSR0lOX1NJREVfPTIwO0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLk1BUkdJTl9IT1RTUE9UXz0xMDtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5TUFJJVEVfTEVGVF89MDtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5TUFJJVEVfVE9QXz0zMjtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5IQVNfQkxPQ0tTX0xJRF9BTkdMRV89LjE7QmxvY2tseS5UcmFzaGNhbi5BTklNQVRJT05fTEVOR1RIXz04MDtCbG9ja2x5LlRyYXNoY2FuLkFOSU1BVElPTl9GUkFNRVNfPTQ7QmxvY2tseS5UcmFzaGNhbi5PUEFDSVRZX01JTl89LjQ7XG5CbG9ja2x5LlRyYXNoY2FuLk9QQUNJVFlfTUFYXz0uODtCbG9ja2x5LlRyYXNoY2FuLk1BWF9MSURfQU5HTEVfPTQ1O0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmlzTGlkT3Blbj0hMTtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5taW5PcGVubmVzc189MDtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5zdmdHcm91cF89bnVsbDtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5zdmdMaWRfPW51bGw7QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUubGlkVGFza189MDtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5saWRPcGVuXz0wO0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmxlZnRfPTA7QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUudG9wXz0wO1xuQmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuY3JlYXRlRG9tPWZ1bmN0aW9uKCl7dGhpcy5zdmdHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHtcImNsYXNzXCI6XCJibG9ja2x5VHJhc2hcIn0sbnVsbCk7dmFyIGE9U3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cmluZygyKTt2YXIgYj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNMSVBQQVRILHtpZDpcImJsb2NrbHlUcmFzaEJvZHlDbGlwUGF0aFwiK2F9LHRoaXMuc3ZnR3JvdXBfKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlJFQ1Qse3dpZHRoOnRoaXMuV0lEVEhfLGhlaWdodDp0aGlzLkJPRFlfSEVJR0hUXyx5OnRoaXMuTElEX0hFSUdIVF99LGIpO3ZhciBjPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuSU1BR0Use3dpZHRoOkJsb2NrbHkuU1BSSVRFLndpZHRoLFxueDotdGhpcy5TUFJJVEVfTEVGVF8saGVpZ2h0OkJsb2NrbHkuU1BSSVRFLmhlaWdodCx5Oi10aGlzLlNQUklURV9UT1BfLFwiY2xpcC1wYXRoXCI6XCJ1cmwoI2Jsb2NrbHlUcmFzaEJvZHlDbGlwUGF0aFwiK2ErXCIpXCJ9LHRoaXMuc3ZnR3JvdXBfKTtjLnNldEF0dHJpYnV0ZU5TKEJsb2NrbHkudXRpbHMuZG9tLlhMSU5LX05TLFwieGxpbms6aHJlZlwiLHRoaXMud29ya3NwYWNlXy5vcHRpb25zLnBhdGhUb01lZGlhK0Jsb2NrbHkuU1BSSVRFLnVybCk7Yj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNMSVBQQVRILHtpZDpcImJsb2NrbHlUcmFzaExpZENsaXBQYXRoXCIrYX0sdGhpcy5zdmdHcm91cF8pO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7d2lkdGg6dGhpcy5XSURUSF8saGVpZ2h0OnRoaXMuTElEX0hFSUdIVF99LGIpO3RoaXMuc3ZnTGlkXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLklNQUdFLFxue3dpZHRoOkJsb2NrbHkuU1BSSVRFLndpZHRoLHg6LXRoaXMuU1BSSVRFX0xFRlRfLGhlaWdodDpCbG9ja2x5LlNQUklURS5oZWlnaHQseTotdGhpcy5TUFJJVEVfVE9QXyxcImNsaXAtcGF0aFwiOlwidXJsKCNibG9ja2x5VHJhc2hMaWRDbGlwUGF0aFwiK2ErXCIpXCJ9LHRoaXMuc3ZnR3JvdXBfKTt0aGlzLnN2Z0xpZF8uc2V0QXR0cmlidXRlTlMoQmxvY2tseS51dGlscy5kb20uWExJTktfTlMsXCJ4bGluazpocmVmXCIsdGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMucGF0aFRvTWVkaWErQmxvY2tseS5TUFJJVEUudXJsKTtCbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHRoaXMuc3ZnR3JvdXBfLFwibW91c2V1cFwiLHRoaXMsdGhpcy5jbGljayk7QmxvY2tseS5iaW5kRXZlbnRfKGMsXCJtb3VzZW92ZXJcIix0aGlzLHRoaXMubW91c2VPdmVyXyk7QmxvY2tseS5iaW5kRXZlbnRfKGMsXCJtb3VzZW91dFwiLHRoaXMsdGhpcy5tb3VzZU91dF8pO3RoaXMuYW5pbWF0ZUxpZF8oKTtyZXR1cm4gdGhpcy5zdmdHcm91cF99O1xuQmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihhKXswPHRoaXMud29ya3NwYWNlXy5vcHRpb25zLm1heFRyYXNoY2FuQ29udGVudHMmJihCbG9ja2x5LnV0aWxzLmRvbS5pbnNlcnRBZnRlcih0aGlzLmZseW91dC5jcmVhdGVEb20oQmxvY2tseS51dGlscy5TdmcuU1ZHKSx0aGlzLndvcmtzcGFjZV8uZ2V0UGFyZW50U3ZnKCkpLHRoaXMuZmx5b3V0LmluaXQodGhpcy53b3Jrc3BhY2VfKSk7dGhpcy52ZXJ0aWNhbFNwYWNpbmdfPXRoaXMuTUFSR0lOX0JPVFRPTV8rYTt0aGlzLnNldExpZE9wZW4oITEpO3JldHVybiB0aGlzLnZlcnRpY2FsU3BhY2luZ18rdGhpcy5CT0RZX0hFSUdIVF8rdGhpcy5MSURfSEVJR0hUX307XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5zdmdHcm91cF8mJihCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKHRoaXMuc3ZnR3JvdXBfKSx0aGlzLnN2Z0dyb3VwXz1udWxsKTt0aGlzLndvcmtzcGFjZV89dGhpcy5zdmdMaWRfPW51bGw7Y2xlYXJUaW1lb3V0KHRoaXMubGlkVGFza18pfTtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5oYXNDb250ZW50c189ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuY29udGVudHNfLmxlbmd0aH07QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuY29udGVudHNJc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mbHlvdXQuaXNWaXNpYmxlKCl9O1xuQmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUub3BlbkZseW91dD1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnRzSXNPcGVuKCkpe2Zvcih2YXIgYT1bXSxiPTAsYztjPXRoaXMuY29udGVudHNfW2JdO2IrKylhW2JdPUJsb2NrbHkuWG1sLnRleHRUb0RvbShjKTt0aGlzLmZseW91dC5zaG93KGEpO3RoaXMuZmlyZVVpRXZlbnRfKCEwKX19O0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmNsb3NlRmx5b3V0PWZ1bmN0aW9uKCl7dGhpcy5jb250ZW50c0lzT3BlbigpJiYodGhpcy5mbHlvdXQuaGlkZSgpLHRoaXMuZmlyZVVpRXZlbnRfKCExKSl9O0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmVtcHR5Q29udGVudHM9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbnRlbnRzXygpJiYodGhpcy5jb250ZW50c18ubGVuZ3RoPTAsdGhpcy5zZXRNaW5PcGVubmVzc18oMCksdGhpcy5jbG9zZUZseW91dCgpKX07XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5wb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMudmVydGljYWxTcGFjaW5nXyl7dmFyIGE9dGhpcy53b3Jrc3BhY2VfLmdldE1ldHJpY3MoKTthJiYodGhpcy5sZWZ0Xz1hLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX0xFRlR8fHRoaXMud29ya3NwYWNlXy5ob3Jpem9udGFsTGF5b3V0JiYhdGhpcy53b3Jrc3BhY2VfLlJUTD9hLnZpZXdXaWR0aCthLmFic29sdXRlTGVmdC10aGlzLldJRFRIXy10aGlzLk1BUkdJTl9TSURFXy1CbG9ja2x5LlNjcm9sbGJhci5zY3JvbGxiYXJUaGlja25lc3M6dGhpcy5NQVJHSU5fU0lERV8rQmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzLHRoaXMudG9wXz1hLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX0JPVFRPTT90aGlzLnZlcnRpY2FsU3BhY2luZ186YS52aWV3SGVpZ2h0K2EuYWJzb2x1dGVUb3AtKHRoaXMuQk9EWV9IRUlHSFRfK3RoaXMuTElEX0hFSUdIVF8pLVxudGhpcy52ZXJ0aWNhbFNwYWNpbmdfLHRoaXMuc3ZnR3JvdXBfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiK3RoaXMubGVmdF8rXCIsXCIrdGhpcy50b3BfK1wiKVwiKSl9fTtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5nZXRDbGllbnRSZWN0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuc3ZnR3JvdXBfKXJldHVybiBudWxsO3ZhciBhPXRoaXMuc3ZnR3JvdXBfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9YS50b3ArdGhpcy5TUFJJVEVfVE9QXy10aGlzLk1BUkdJTl9IT1RTUE9UXzthPWEubGVmdCt0aGlzLlNQUklURV9MRUZUXy10aGlzLk1BUkdJTl9IT1RTUE9UXztyZXR1cm4gbmV3IEJsb2NrbHkudXRpbHMuUmVjdChiLGIrdGhpcy5MSURfSEVJR0hUXyt0aGlzLkJPRFlfSEVJR0hUXysyKnRoaXMuTUFSR0lOX0hPVFNQT1RfLGEsYSt0aGlzLldJRFRIXysyKnRoaXMuTUFSR0lOX0hPVFNQT1RfKX07XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5zZXRMaWRPcGVuPWZ1bmN0aW9uKGEpe3RoaXMuaXNMaWRPcGVuIT1hJiYoY2xlYXJUaW1lb3V0KHRoaXMubGlkVGFza18pLHRoaXMuaXNMaWRPcGVuPWEsdGhpcy5hbmltYXRlTGlkXygpKX07XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5hbmltYXRlTGlkXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuVHJhc2hjYW4uQU5JTUFUSU9OX0ZSQU1FU18sYj0xLyhhKzEpO3RoaXMubGlkT3Blbl8rPXRoaXMuaXNMaWRPcGVuP2I6LWI7dGhpcy5saWRPcGVuXz1NYXRoLm1pbihNYXRoLm1heCh0aGlzLmxpZE9wZW5fLHRoaXMubWluT3Blbm5lc3NfKSwxKTt0aGlzLnNldExpZEFuZ2xlXyh0aGlzLmxpZE9wZW5fKkJsb2NrbHkuVHJhc2hjYW4uTUFYX0xJRF9BTkdMRV8pO2I9QmxvY2tseS5UcmFzaGNhbi5PUEFDSVRZX01JTl87dGhpcy5zdmdHcm91cF8uc3R5bGUub3BhY2l0eT1iK3RoaXMubGlkT3Blbl8qKEJsb2NrbHkuVHJhc2hjYW4uT1BBQ0lUWV9NQVhfLWIpO3RoaXMubGlkT3Blbl8+dGhpcy5taW5PcGVubmVzc18mJjE+dGhpcy5saWRPcGVuXyYmKHRoaXMubGlkVGFza189c2V0VGltZW91dCh0aGlzLmFuaW1hdGVMaWRfLmJpbmQodGhpcyksQmxvY2tseS5UcmFzaGNhbi5BTklNQVRJT05fTEVOR1RIXy9cbmEpKX07QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuc2V0TGlkQW5nbGVfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMud29ya3NwYWNlXy50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9SSUdIVHx8dGhpcy53b3Jrc3BhY2VfLmhvcml6b250YWxMYXlvdXQmJnRoaXMud29ya3NwYWNlXy5SVEw7dGhpcy5zdmdMaWRfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwicm90YXRlKFwiKyhiPy1hOmEpK1wiLFwiKyhiPzQ6dGhpcy5XSURUSF8tNCkrXCIsXCIrKHRoaXMuTElEX0hFSUdIVF8tMikrXCIpXCIpfTtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5zZXRNaW5PcGVubmVzc189ZnVuY3Rpb24oYSl7dGhpcy5taW5PcGVubmVzc189YTt0aGlzLmlzTGlkT3Blbnx8dGhpcy5zZXRMaWRBbmdsZV8oYSpCbG9ja2x5LlRyYXNoY2FuLk1BWF9MSURfQU5HTEVfKX07QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUuY2xvc2VMaWQ9ZnVuY3Rpb24oKXt0aGlzLnNldExpZE9wZW4oITEpfTtcbkJsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmNsaWNrPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb250ZW50c18oKSYmdGhpcy5vcGVuRmx5b3V0KCl9O0Jsb2NrbHkuVHJhc2hjYW4ucHJvdG90eXBlLmZpcmVVaUV2ZW50Xz1mdW5jdGlvbihhKXthPW5ldyBCbG9ja2x5LkV2ZW50cy5VaShudWxsLFwidHJhc2hjYW5PcGVuXCIsbnVsbCxhKTthLndvcmtzcGFjZUlkPXRoaXMud29ya3NwYWNlXy5pZDtCbG9ja2x5LkV2ZW50cy5maXJlKGEpfTtCbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5tb3VzZU92ZXJfPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb250ZW50c18oKSYmdGhpcy5zZXRMaWRPcGVuKCEwKX07QmxvY2tseS5UcmFzaGNhbi5wcm90b3R5cGUubW91c2VPdXRfPWZ1bmN0aW9uKCl7dGhpcy5zZXRMaWRPcGVuKCExKX07XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5vbkRlbGV0ZV89ZnVuY3Rpb24oYSl7aWYoISgwPj10aGlzLndvcmtzcGFjZV8ub3B0aW9ucy5tYXhUcmFzaGNhbkNvbnRlbnRzKSYmYS50eXBlPT1CbG9ja2x5LkV2ZW50cy5CTE9DS19ERUxFVEUmJmEub2xkWG1sLnRhZ05hbWUmJlwic2hhZG93XCIhPWEub2xkWG1sLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKGE9dGhpcy5jbGVhbkJsb2NrWE1MXyhhLm9sZFhtbCksLTE9PXRoaXMuY29udGVudHNfLmluZGV4T2YoYSkpKXtmb3IodGhpcy5jb250ZW50c18udW5zaGlmdChhKTt0aGlzLmNvbnRlbnRzXy5sZW5ndGg+dGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMubWF4VHJhc2hjYW5Db250ZW50czspdGhpcy5jb250ZW50c18ucG9wKCk7dGhpcy5zZXRNaW5PcGVubmVzc18odGhpcy5IQVNfQkxPQ0tTX0xJRF9BTkdMRV8pfX07XG5CbG9ja2x5LlRyYXNoY2FuLnByb3RvdHlwZS5jbGVhbkJsb2NrWE1MXz1mdW5jdGlvbihhKXtmb3IodmFyIGI9YT1hLmNsb25lTm9kZSghMCk7Yjspe2IucmVtb3ZlQXR0cmlidXRlJiYoYi5yZW1vdmVBdHRyaWJ1dGUoXCJ4XCIpLGIucmVtb3ZlQXR0cmlidXRlKFwieVwiKSxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpLGIucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksXCJjb21tZW50XCI9PWIubm9kZU5hbWUmJihiLnJlbW92ZUF0dHJpYnV0ZShcImhcIiksYi5yZW1vdmVBdHRyaWJ1dGUoXCJ3XCIpLGIucmVtb3ZlQXR0cmlidXRlKFwicGlubmVkXCIpKSk7dmFyIGM9Yi5maXJzdENoaWxkfHxiLm5leHRTaWJsaW5nO2lmKCFjKWZvcihjPWIucGFyZW50Tm9kZTtjOyl7aWYoYy5uZXh0U2libGluZyl7Yz1jLm5leHRTaWJsaW5nO2JyZWFrfWM9Yy5wYXJlbnROb2RlfWI9Y31yZXR1cm4gQmxvY2tseS5YbWwuZG9tVG9UZXh0KGEpfTtCbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWM9e307QmxvY2tseS5WYXJpYWJsZXNEeW5hbWljLm9uQ3JlYXRlVmFyaWFibGVCdXR0b25DbGlja19TdHJpbmc9ZnVuY3Rpb24oYSl7QmxvY2tseS5WYXJpYWJsZXMuY3JlYXRlVmFyaWFibGVCdXR0b25IYW5kbGVyKGEuZ2V0VGFyZ2V0V29ya3NwYWNlKCksdm9pZCAwLFwiU3RyaW5nXCIpfTtCbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWMub25DcmVhdGVWYXJpYWJsZUJ1dHRvbkNsaWNrX051bWJlcj1mdW5jdGlvbihhKXtCbG9ja2x5LlZhcmlhYmxlcy5jcmVhdGVWYXJpYWJsZUJ1dHRvbkhhbmRsZXIoYS5nZXRUYXJnZXRXb3Jrc3BhY2UoKSx2b2lkIDAsXCJOdW1iZXJcIil9O0Jsb2NrbHkuVmFyaWFibGVzRHluYW1pYy5vbkNyZWF0ZVZhcmlhYmxlQnV0dG9uQ2xpY2tfQ29sb3VyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuVmFyaWFibGVzLmNyZWF0ZVZhcmlhYmxlQnV0dG9uSGFuZGxlcihhLmdldFRhcmdldFdvcmtzcGFjZSgpLHZvaWQgMCxcIkNvbG91clwiKX07XG5CbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWMuZmx5b3V0Q2F0ZWdvcnk9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2Muc2V0QXR0cmlidXRlKFwidGV4dFwiLEJsb2NrbHkuTXNnLk5FV19TVFJJTkdfVkFSSUFCTEUpO2Muc2V0QXR0cmlidXRlKFwiY2FsbGJhY2tLZXlcIixcIkNSRUFURV9WQVJJQUJMRV9TVFJJTkdcIik7Yi5wdXNoKGMpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtjLnNldEF0dHJpYnV0ZShcInRleHRcIixCbG9ja2x5Lk1zZy5ORVdfTlVNQkVSX1ZBUklBQkxFKTtjLnNldEF0dHJpYnV0ZShcImNhbGxiYWNrS2V5XCIsXCJDUkVBVEVfVkFSSUFCTEVfTlVNQkVSXCIpO2IucHVzaChjKTtjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsQmxvY2tseS5Nc2cuTkVXX0NPTE9VUl9WQVJJQUJMRSk7Yy5zZXRBdHRyaWJ1dGUoXCJjYWxsYmFja0tleVwiLFwiQ1JFQVRFX1ZBUklBQkxFX0NPTE9VUlwiKTtcbmIucHVzaChjKTthLnJlZ2lzdGVyQnV0dG9uQ2FsbGJhY2soXCJDUkVBVEVfVkFSSUFCTEVfU1RSSU5HXCIsQmxvY2tseS5WYXJpYWJsZXNEeW5hbWljLm9uQ3JlYXRlVmFyaWFibGVCdXR0b25DbGlja19TdHJpbmcpO2EucmVnaXN0ZXJCdXR0b25DYWxsYmFjayhcIkNSRUFURV9WQVJJQUJMRV9OVU1CRVJcIixCbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWMub25DcmVhdGVWYXJpYWJsZUJ1dHRvbkNsaWNrX051bWJlcik7YS5yZWdpc3RlckJ1dHRvbkNhbGxiYWNrKFwiQ1JFQVRFX1ZBUklBQkxFX0NPTE9VUlwiLEJsb2NrbHkuVmFyaWFibGVzRHluYW1pYy5vbkNyZWF0ZVZhcmlhYmxlQnV0dG9uQ2xpY2tfQ29sb3VyKTthPUJsb2NrbHkuVmFyaWFibGVzRHluYW1pYy5mbHlvdXRDYXRlZ29yeUJsb2NrcyhhKTtyZXR1cm4gYj1iLmNvbmNhdChhKX07XG5CbG9ja2x5LlZhcmlhYmxlc0R5bmFtaWMuZmx5b3V0Q2F0ZWdvcnlCbG9ja3M9ZnVuY3Rpb24oYSl7YT1hLmdldEFsbFZhcmlhYmxlcygpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpe2lmKEJsb2NrbHkuQmxvY2tzLnZhcmlhYmxlc19zZXRfZHluYW1pYyl7dmFyIGM9YVthLmxlbmd0aC0xXSxkPUJsb2NrbHkudXRpbHMueG1sLmNyZWF0ZUVsZW1lbnQoXCJibG9ja1wiKTtkLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInZhcmlhYmxlc19zZXRfZHluYW1pY1wiKTtkLnNldEF0dHJpYnV0ZShcImdhcFwiLDI0KTtkLmFwcGVuZENoaWxkKEJsb2NrbHkuVmFyaWFibGVzLmdlbmVyYXRlVmFyaWFibGVGaWVsZERvbShjKSk7Yi5wdXNoKGQpfWlmKEJsb2NrbHkuQmxvY2tzLnZhcmlhYmxlc19nZXRfZHluYW1pYyl7YS5zb3J0KEJsb2NrbHkuVmFyaWFibGVNb2RlbC5jb21wYXJlQnlOYW1lKTtjPTA7Zm9yKHZhciBlO2U9YVtjXTtjKyspZD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYmxvY2tcIiksXG5kLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInZhcmlhYmxlc19nZXRfZHluYW1pY1wiKSxkLnNldEF0dHJpYnV0ZShcImdhcFwiLDgpLGQuYXBwZW5kQ2hpbGQoQmxvY2tseS5WYXJpYWJsZXMuZ2VuZXJhdGVWYXJpYWJsZUZpZWxkRG9tKGUpKSxiLnB1c2goZCl9fXJldHVybiBifTtCbG9ja2x5Llpvb21Db250cm9scz1mdW5jdGlvbihhKXt0aGlzLndvcmtzcGFjZV89YTt0aGlzLnpvb21SZXNldEdyb3VwXz10aGlzLnpvb21PdXRHcm91cF89dGhpcy56b29tSW5Hcm91cF89dGhpcy52ZXJ0aWNhbFNwYWNpbmdfPXRoaXMub25ab29tT3V0V3JhcHBlcl89dGhpcy5vblpvb21JbldyYXBwZXJfPXRoaXMub25ab29tUmVzZXRXcmFwcGVyXz1udWxsfTtCbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUuV0lEVEhfPTMyO0Jsb2NrbHkuWm9vbUNvbnRyb2xzLnByb3RvdHlwZS5IRUlHSFRfPTExMDtCbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUuTUFSR0lOX0JPVFRPTV89MjA7QmxvY2tseS5ab29tQ29udHJvbHMucHJvdG90eXBlLk1BUkdJTl9TSURFXz0yMDtCbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUuc3ZnR3JvdXBfPW51bGw7QmxvY2tseS5ab29tQ29udHJvbHMucHJvdG90eXBlLmxlZnRfPTA7XG5CbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUudG9wXz0wO0Jsb2NrbHkuWm9vbUNvbnRyb2xzLnByb3RvdHlwZS5jcmVhdGVEb209ZnVuY3Rpb24oKXt0aGlzLnN2Z0dyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse30sbnVsbCk7dmFyIGE9U3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cmluZygyKTt0aGlzLmNyZWF0ZVpvb21PdXRTdmdfKGEpO3RoaXMuY3JlYXRlWm9vbUluU3ZnXyhhKTt0aGlzLndvcmtzcGFjZV8uaXNNb3ZhYmxlKCkmJnRoaXMuY3JlYXRlWm9vbVJlc2V0U3ZnXyhhKTtyZXR1cm4gdGhpcy5zdmdHcm91cF99O0Jsb2NrbHkuWm9vbUNvbnRyb2xzLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEpe3RoaXMudmVydGljYWxTcGFjaW5nXz10aGlzLk1BUkdJTl9CT1RUT01fK2E7cmV0dXJuIHRoaXMudmVydGljYWxTcGFjaW5nXyt0aGlzLkhFSUdIVF99O1xuQmxvY2tseS5ab29tQ29udHJvbHMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnN2Z0dyb3VwXyYmQmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZSh0aGlzLnN2Z0dyb3VwXyk7dGhpcy5vblpvb21SZXNldFdyYXBwZXJfJiZCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uWm9vbVJlc2V0V3JhcHBlcl8pO3RoaXMub25ab29tSW5XcmFwcGVyXyYmQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vblpvb21JbldyYXBwZXJfKTt0aGlzLm9uWm9vbU91dFdyYXBwZXJfJiZCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uWm9vbU91dFdyYXBwZXJfKX07XG5CbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLnZlcnRpY2FsU3BhY2luZ18pe3ZhciBhPXRoaXMud29ya3NwYWNlXy5nZXRNZXRyaWNzKCk7YSYmKHRoaXMubGVmdF89YS50b29sYm94UG9zaXRpb249PUJsb2NrbHkuVE9PTEJPWF9BVF9MRUZUfHx0aGlzLndvcmtzcGFjZV8uaG9yaXpvbnRhbExheW91dCYmIXRoaXMud29ya3NwYWNlXy5SVEw/YS52aWV3V2lkdGgrYS5hYnNvbHV0ZUxlZnQtdGhpcy5XSURUSF8tdGhpcy5NQVJHSU5fU0lERV8tQmxvY2tseS5TY3JvbGxiYXIuc2Nyb2xsYmFyVGhpY2tuZXNzOnRoaXMuTUFSR0lOX1NJREVfK0Jsb2NrbHkuU2Nyb2xsYmFyLnNjcm9sbGJhclRoaWNrbmVzcyxhLnRvb2xib3hQb3NpdGlvbj09QmxvY2tseS5UT09MQk9YX0FUX0JPVFRPTT8odGhpcy50b3BfPXRoaXMudmVydGljYWxTcGFjaW5nXyx0aGlzLnpvb21Jbkdyb3VwXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZSgwLCAzNClcIiksXG50aGlzLnpvb21SZXNldEdyb3VwXyYmdGhpcy56b29tUmVzZXRHcm91cF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoMCwgNzcpXCIpKToodGhpcy50b3BfPWEudmlld0hlaWdodCthLmFic29sdXRlVG9wLXRoaXMuSEVJR0hUXy10aGlzLnZlcnRpY2FsU3BhY2luZ18sdGhpcy56b29tSW5Hcm91cF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoMCwgNDMpXCIpLHRoaXMuem9vbU91dEdyb3VwXy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZSgwLCA3NylcIikpLHRoaXMuc3ZnR3JvdXBfLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiK3RoaXMubGVmdF8rXCIsXCIrdGhpcy50b3BfK1wiKVwiKSl9fTtcbkJsb2NrbHkuWm9vbUNvbnRyb2xzLnByb3RvdHlwZS5jcmVhdGVab29tT3V0U3ZnXz1mdW5jdGlvbihhKXt0aGlzLnpvb21PdXRHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHtcImNsYXNzXCI6XCJibG9ja2x5Wm9vbVwifSx0aGlzLnN2Z0dyb3VwXyk7dmFyIGI9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5DTElQUEFUSCx7aWQ6XCJibG9ja2x5Wm9vbW91dENsaXBQYXRoXCIrYX0sdGhpcy56b29tT3V0R3JvdXBfKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlJFQ1Qse3dpZHRoOjMyLGhlaWdodDozMn0sYik7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5JTUFHRSx7d2lkdGg6QmxvY2tseS5TUFJJVEUud2lkdGgsaGVpZ2h0OkJsb2NrbHkuU1BSSVRFLmhlaWdodCx4Oi02NCx5Oi05MixcblwiY2xpcC1wYXRoXCI6XCJ1cmwoI2Jsb2NrbHlab29tb3V0Q2xpcFBhdGhcIithK1wiKVwifSx0aGlzLnpvb21PdXRHcm91cF8pLnNldEF0dHJpYnV0ZU5TKEJsb2NrbHkudXRpbHMuZG9tLlhMSU5LX05TLFwieGxpbms6aHJlZlwiLHRoaXMud29ya3NwYWNlXy5vcHRpb25zLnBhdGhUb01lZGlhK0Jsb2NrbHkuU1BSSVRFLnVybCk7dGhpcy5vblpvb21PdXRXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHRoaXMuem9vbU91dEdyb3VwXyxcIm1vdXNlZG93blwiLG51bGwsdGhpcy56b29tXy5iaW5kKHRoaXMsLTEpKX07XG5CbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUuY3JlYXRlWm9vbUluU3ZnXz1mdW5jdGlvbihhKXt0aGlzLnpvb21Jbkdyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse1wiY2xhc3NcIjpcImJsb2NrbHlab29tXCJ9LHRoaXMuc3ZnR3JvdXBfKTt2YXIgYj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNMSVBQQVRILHtpZDpcImJsb2NrbHlab29taW5DbGlwUGF0aFwiK2F9LHRoaXMuem9vbUluR3JvdXBfKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlJFQ1Qse3dpZHRoOjMyLGhlaWdodDozMn0sYik7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5JTUFHRSx7d2lkdGg6QmxvY2tseS5TUFJJVEUud2lkdGgsaGVpZ2h0OkJsb2NrbHkuU1BSSVRFLmhlaWdodCx4Oi0zMix5Oi05MixcblwiY2xpcC1wYXRoXCI6XCJ1cmwoI2Jsb2NrbHlab29taW5DbGlwUGF0aFwiK2ErXCIpXCJ9LHRoaXMuem9vbUluR3JvdXBfKS5zZXRBdHRyaWJ1dGVOUyhCbG9ja2x5LnV0aWxzLmRvbS5YTElOS19OUyxcInhsaW5rOmhyZWZcIix0aGlzLndvcmtzcGFjZV8ub3B0aW9ucy5wYXRoVG9NZWRpYStCbG9ja2x5LlNQUklURS51cmwpO3RoaXMub25ab29tSW5XcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKHRoaXMuem9vbUluR3JvdXBfLFwibW91c2Vkb3duXCIsbnVsbCx0aGlzLnpvb21fLmJpbmQodGhpcywxKSl9O1xuQmxvY2tseS5ab29tQ29udHJvbHMucHJvdG90eXBlLnpvb21fPWZ1bmN0aW9uKGEsYil7dGhpcy53b3Jrc3BhY2VfLm1hcmtGb2N1c2VkKCk7dmFyIGM9dGhpcy53b3Jrc3BhY2VfLnNjYWxlO3RoaXMud29ya3NwYWNlXy56b29tQ2VudGVyKGEpO3RoaXMuZmlyZVpvb21FdmVudF8oYyk7QmxvY2tseS5Ub3VjaC5jbGVhclRvdWNoSWRlbnRpZmllcigpO2Iuc3RvcFByb3BhZ2F0aW9uKCk7Yi5wcmV2ZW50RGVmYXVsdCgpfTtcbkJsb2NrbHkuWm9vbUNvbnRyb2xzLnByb3RvdHlwZS5jcmVhdGVab29tUmVzZXRTdmdfPWZ1bmN0aW9uKGEpe3RoaXMuem9vbVJlc2V0R3JvdXBfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRyx7XCJjbGFzc1wiOlwiYmxvY2tseVpvb21cIn0sdGhpcy5zdmdHcm91cF8pO3ZhciBiPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuQ0xJUFBBVEgse2lkOlwiYmxvY2tseVpvb21yZXNldENsaXBQYXRoXCIrYX0sdGhpcy56b29tUmVzZXRHcm91cF8pO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7d2lkdGg6MzIsaGVpZ2h0OjMyfSxiKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLklNQUdFLHt3aWR0aDpCbG9ja2x5LlNQUklURS53aWR0aCxoZWlnaHQ6QmxvY2tseS5TUFJJVEUuaGVpZ2h0LFxueTotOTIsXCJjbGlwLXBhdGhcIjpcInVybCgjYmxvY2tseVpvb21yZXNldENsaXBQYXRoXCIrYStcIilcIn0sdGhpcy56b29tUmVzZXRHcm91cF8pLnNldEF0dHJpYnV0ZU5TKEJsb2NrbHkudXRpbHMuZG9tLlhMSU5LX05TLFwieGxpbms6aHJlZlwiLHRoaXMud29ya3NwYWNlXy5vcHRpb25zLnBhdGhUb01lZGlhK0Jsb2NrbHkuU1BSSVRFLnVybCk7dGhpcy5vblpvb21SZXNldFdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18odGhpcy56b29tUmVzZXRHcm91cF8sXCJtb3VzZWRvd25cIixudWxsLHRoaXMucmVzZXRab29tXy5iaW5kKHRoaXMpKX07XG5CbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUucmVzZXRab29tXz1mdW5jdGlvbihhKXt0aGlzLndvcmtzcGFjZV8ubWFya0ZvY3VzZWQoKTt2YXIgYj10aGlzLndvcmtzcGFjZV8uc2NhbGU7dGhpcy53b3Jrc3BhY2VfLnNldFNjYWxlKHRoaXMud29ya3NwYWNlXy5vcHRpb25zLnpvb21PcHRpb25zLnN0YXJ0U2NhbGUpO3RoaXMud29ya3NwYWNlXy5iZWdpbkNhbnZhc1RyYW5zaXRpb24oKTt0aGlzLndvcmtzcGFjZV8uc2Nyb2xsQ2VudGVyKCk7c2V0VGltZW91dCh0aGlzLndvcmtzcGFjZV8uZW5kQ2FudmFzVHJhbnNpdGlvbi5iaW5kKHRoaXMud29ya3NwYWNlXyksNTAwKTt0aGlzLmZpcmVab29tRXZlbnRfKGIpO0Jsb2NrbHkuVG91Y2guY2xlYXJUb3VjaElkZW50aWZpZXIoKTthLnN0b3BQcm9wYWdhdGlvbigpO2EucHJldmVudERlZmF1bHQoKX07XG5CbG9ja2x5Llpvb21Db250cm9scy5wcm90b3R5cGUuZmlyZVpvb21FdmVudF89ZnVuY3Rpb24oYSl7YT1uZXcgQmxvY2tseS5FdmVudHMuVWkobnVsbCxcInpvb21cIixhLHRoaXMud29ya3NwYWNlXy5zY2FsZSk7YS53b3Jrc3BhY2VJZD10aGlzLndvcmtzcGFjZV8uaWQ7QmxvY2tseS5FdmVudHMuZmlyZShhKX07QmxvY2tseS5Dc3MucmVnaXN0ZXIoW1wiLmJsb2NrbHlab29tPmltYWdlLCAuYmxvY2tseVpvb20+c3ZnPmltYWdlIHtcIixcIm9wYWNpdHk6IC40O1wiLFwifVwiLFwiLmJsb2NrbHlab29tPmltYWdlOmhvdmVyLCAuYmxvY2tseVpvb20+c3ZnPmltYWdlOmhvdmVyIHtcIixcIm9wYWNpdHk6IC42O1wiLFwifVwiLFwiLmJsb2NrbHlab29tPmltYWdlOmFjdGl2ZSwgLmJsb2NrbHlab29tPnN2Zz5pbWFnZTphY3RpdmUge1wiLFwib3BhY2l0eTogLjg7XCIsXCJ9XCJdKTtCbG9ja2x5Lk11dGF0b3I9ZnVuY3Rpb24oYSl7QmxvY2tseS5NdXRhdG9yLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxudWxsKTt0aGlzLnF1YXJrTmFtZXNfPWF9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuTXV0YXRvcixCbG9ja2x5Lkljb24pO0Jsb2NrbHkuTXV0YXRvci5wcm90b3R5cGUud29ya3NwYWNlV2lkdGhfPTA7QmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS53b3Jrc3BhY2VIZWlnaHRfPTA7QmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS5zZXRCbG9jaz1mdW5jdGlvbihhKXt0aGlzLmJsb2NrXz1hfTtCbG9ja2x5Lk11dGF0b3IucHJvdG90eXBlLmdldFdvcmtzcGFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLndvcmtzcGFjZV99O1xuQmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS5kcmF3SWNvbl89ZnVuY3Rpb24oYSl7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5SRUNULHtcImNsYXNzXCI6XCJibG9ja2x5SWNvblNoYXBlXCIscng6XCI0XCIscnk6XCI0XCIsaGVpZ2h0OlwiMTZcIix3aWR0aDpcIjE2XCJ9LGEpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUSCx7XCJjbGFzc1wiOlwiYmxvY2tseUljb25TeW1ib2xcIixkOlwibTQuMjAzLDcuMjk2IDAsMS4zNjggLTAuOTIsMC42NzcgLTAuMTEsMC40MSAwLjksMS41NTkgMC40MSwwLjExIDEuMDQzLC0wLjQ1NyAxLjE4NywwLjY4MyAwLjEyNywxLjEzNCAwLjMsMC4zIDEuOCwwIDAuMywtMC4yOTkgMC4xMjcsLTEuMTM4IDEuMTg1LC0wLjY4MiAxLjA0NiwwLjQ1OCAwLjQwOSwtMC4xMSAwLjksLTEuNTU5IC0wLjExLC0wLjQxIC0wLjkyLC0wLjY3NyAwLC0xLjM2NiAwLjkyLC0wLjY3NyAwLjExLC0wLjQxIC0wLjksLTEuNTU5IC0wLjQwOSwtMC4xMDkgLTEuMDQ2LDAuNDU4IC0xLjE4NSwtMC42ODIgLTAuMTI3LC0xLjEzOCAtMC4zLC0wLjI5OSAtMS44LDAgLTAuMywwLjMgLTAuMTI2LDEuMTM1IC0xLjE4NywwLjY4MiAtMS4wNDMsLTAuNDU3IC0wLjQxLDAuMTEgLTAuODk5LDEuNTU5IDAuMTA4LDAuNDA5elwifSxcbmEpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuQ0lSQ0xFLHtcImNsYXNzXCI6XCJibG9ja2x5SWNvblNoYXBlXCIscjpcIjIuN1wiLGN4OlwiOFwiLGN5OlwiOFwifSxhKX07QmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS5pY29uQ2xpY2tfPWZ1bmN0aW9uKGEpe3RoaXMuYmxvY2tfLmlzRWRpdGFibGUoKSYmQmxvY2tseS5JY29uLnByb3RvdHlwZS5pY29uQ2xpY2tfLmNhbGwodGhpcyxhKX07XG5CbG9ja2x5Lk11dGF0b3IucHJvdG90eXBlLmNyZWF0ZUVkaXRvcl89ZnVuY3Rpb24oKXt0aGlzLnN2Z0RpYWxvZ189QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5TVkcse3g6QmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRILHk6QmxvY2tseS5CdWJibGUuQk9SREVSX1dJRFRIfSxudWxsKTtpZih0aGlzLnF1YXJrTmFtZXNfLmxlbmd0aClmb3IodmFyIGE9QmxvY2tseS51dGlscy54bWwuY3JlYXRlRWxlbWVudChcInhtbFwiKSxiPTAsYztjPXRoaXMucXVhcmtOYW1lc19bYl07YisrKXt2YXIgZD1CbG9ja2x5LnV0aWxzLnhtbC5jcmVhdGVFbGVtZW50KFwiYmxvY2tcIik7ZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYyk7YS5hcHBlbmRDaGlsZChkKX1lbHNlIGE9bnVsbDtiPW5ldyBCbG9ja2x5Lk9wdGlvbnMoe2Rpc2FibGU6ITEscGFyZW50V29ya3NwYWNlOnRoaXMuYmxvY2tfLndvcmtzcGFjZSxtZWRpYTp0aGlzLmJsb2NrXy53b3Jrc3BhY2Uub3B0aW9ucy5wYXRoVG9NZWRpYSxcbnJ0bDp0aGlzLmJsb2NrXy5SVEwsaG9yaXpvbnRhbExheW91dDohMSxyZW5kZXJlcjp0aGlzLmJsb2NrXy53b3Jrc3BhY2Uub3B0aW9ucy5yZW5kZXJlcixyZW5kZXJlck92ZXJyaWRlczp0aGlzLmJsb2NrXy53b3Jrc3BhY2Uub3B0aW9ucy5yZW5kZXJlck92ZXJyaWRlc30pO2IudG9vbGJveFBvc2l0aW9uPXRoaXMuYmxvY2tfLlJUTD9CbG9ja2x5LnV0aWxzLnRvb2xib3guUG9zaXRpb24uUklHSFQ6QmxvY2tseS51dGlscy50b29sYm94LlBvc2l0aW9uLkxFRlQ7aWYoYz0hIWEpYi5sYW5ndWFnZVRyZWU9QmxvY2tseS51dGlscy50b29sYm94LmNvbnZlcnRUb29sYm94RGVmVG9Kc29uKGEpLGIuZ2V0TWV0cmljcz10aGlzLmdldEZseW91dE1ldHJpY3NfLmJpbmQodGhpcyk7dGhpcy53b3Jrc3BhY2VfPW5ldyBCbG9ja2x5LldvcmtzcGFjZVN2ZyhiKTt0aGlzLndvcmtzcGFjZV8uaXNNdXRhdG9yPSEwO3RoaXMud29ya3NwYWNlXy5hZGRDaGFuZ2VMaXN0ZW5lcihCbG9ja2x5LkV2ZW50cy5kaXNhYmxlT3JwaGFucyk7XG5hPWM/dGhpcy53b3Jrc3BhY2VfLmFkZEZseW91dChCbG9ja2x5LnV0aWxzLlN2Zy5HKTpudWxsO2I9dGhpcy53b3Jrc3BhY2VfLmNyZWF0ZURvbShcImJsb2NrbHlNdXRhdG9yQmFja2dyb3VuZFwiKTthJiZiLmluc2VydEJlZm9yZShhLHRoaXMud29ya3NwYWNlXy5zdmdCbG9ja0NhbnZhc18pO3RoaXMuc3ZnRGlhbG9nXy5hcHBlbmRDaGlsZChiKTtyZXR1cm4gdGhpcy5zdmdEaWFsb2dffTtcbkJsb2NrbHkuTXV0YXRvci5wcm90b3R5cGUudXBkYXRlRWRpdGFibGU9ZnVuY3Rpb24oKXtCbG9ja2x5Lk11dGF0b3Iuc3VwZXJDbGFzc18udXBkYXRlRWRpdGFibGUuY2FsbCh0aGlzKTt0aGlzLmJsb2NrXy5pc0luRmx5b3V0fHwodGhpcy5ibG9ja18uaXNFZGl0YWJsZSgpP3RoaXMuaWNvbkdyb3VwXyYmQmxvY2tseS51dGlscy5kb20ucmVtb3ZlQ2xhc3ModGhpcy5pY29uR3JvdXBfLFwiYmxvY2tseUljb25Hcm91cFJlYWRvbmx5XCIpOih0aGlzLnNldFZpc2libGUoITEpLHRoaXMuaWNvbkdyb3VwXyYmQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy5pY29uR3JvdXBfLFwiYmxvY2tseUljb25Hcm91cFJlYWRvbmx5XCIpKSl9O1xuQmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS5yZXNpemVCdWJibGVfPWZ1bmN0aW9uKCl7dmFyIGE9MipCbG9ja2x5LkJ1YmJsZS5CT1JERVJfV0lEVEgsYj10aGlzLndvcmtzcGFjZV8uZ2V0Q2FudmFzKCkuZ2V0QkJveCgpLGM9Yi53aWR0aCtiLngsZD1iLmhlaWdodCszKmEsZT10aGlzLndvcmtzcGFjZV8uZ2V0Rmx5b3V0KCk7aWYoZSl7dmFyIGY9ZS5nZXRNZXRyaWNzXygpO2Q9TWF0aC5tYXgoZCxmLmNvbnRlbnRIZWlnaHQrMjApO2MrPWUuZ2V0V2lkdGgoKX10aGlzLmJsb2NrXy5SVEwmJihjPS1iLngpO2MrPTMqYTtpZihNYXRoLmFicyh0aGlzLndvcmtzcGFjZVdpZHRoXy1jKT5hfHxNYXRoLmFicyh0aGlzLndvcmtzcGFjZUhlaWdodF8tZCk+YSl0aGlzLndvcmtzcGFjZVdpZHRoXz1jLHRoaXMud29ya3NwYWNlSGVpZ2h0Xz1kLHRoaXMuYnViYmxlXy5zZXRCdWJibGVTaXplKGMrYSxkK2EpLHRoaXMuc3ZnRGlhbG9nXy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMud29ya3NwYWNlV2lkdGhfKSxcbnRoaXMuc3ZnRGlhbG9nXy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLndvcmtzcGFjZUhlaWdodF8pO3RoaXMuYmxvY2tfLlJUTCYmKGE9XCJ0cmFuc2xhdGUoXCIrdGhpcy53b3Jrc3BhY2VXaWR0aF8rXCIsMClcIix0aGlzLndvcmtzcGFjZV8uZ2V0Q2FudmFzKCkuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsYSkpO3RoaXMud29ya3NwYWNlXy5yZXNpemUoKX07QmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS5vbkJ1YmJsZU1vdmVfPWZ1bmN0aW9uKCl7dGhpcy53b3Jrc3BhY2VfJiZ0aGlzLndvcmtzcGFjZV8ucmVjb3JkRGVsZXRlQXJlYXMoKX07XG5CbG9ja2x5Lk11dGF0b3IucHJvdG90eXBlLnNldFZpc2libGU9ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5pc1Zpc2libGUoKSlpZihCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5VaSh0aGlzLmJsb2NrXyxcIm11dGF0b3JPcGVuXCIsIWEsYSkpLGEpe3RoaXMuYnViYmxlXz1uZXcgQmxvY2tseS5CdWJibGUodGhpcy5ibG9ja18ud29ya3NwYWNlLHRoaXMuY3JlYXRlRWRpdG9yXygpLHRoaXMuYmxvY2tfLnBhdGhPYmplY3Quc3ZnUGF0aCx0aGlzLmljb25YWV8sbnVsbCxudWxsKTt0aGlzLmJ1YmJsZV8uc2V0U3ZnSWQodGhpcy5ibG9ja18uaWQpO3RoaXMuYnViYmxlXy5yZWdpc3Rlck1vdmVFdmVudCh0aGlzLm9uQnViYmxlTW92ZV8uYmluZCh0aGlzKSk7dmFyIGI9dGhpcy53b3Jrc3BhY2VfLm9wdGlvbnMubGFuZ3VhZ2VUcmVlO2E9dGhpcy53b3Jrc3BhY2VfLmdldEZseW91dCgpO2ImJihhLmluaXQodGhpcy53b3Jrc3BhY2VfKSxhLnNob3coYikpO3RoaXMucm9vdEJsb2NrXz1cbnRoaXMuYmxvY2tfLmRlY29tcG9zZSh0aGlzLndvcmtzcGFjZV8pO2I9dGhpcy5yb290QmxvY2tfLmdldERlc2NlbmRhbnRzKCExKTtmb3IodmFyIGM9MCxkO2Q9YltjXTtjKyspZC5yZW5kZXIoKTt0aGlzLnJvb3RCbG9ja18uc2V0TW92YWJsZSghMSk7dGhpcy5yb290QmxvY2tfLnNldERlbGV0YWJsZSghMSk7YT8oYj0yKmEuQ09STkVSX1JBRElVUyxhPXRoaXMucm9vdEJsb2NrXy5SVEw/YS5nZXRXaWR0aCgpK2I6Yik6YT1iPTE2O3RoaXMuYmxvY2tfLlJUTCYmKGE9LWEpO3RoaXMucm9vdEJsb2NrXy5tb3ZlQnkoYSxiKTtpZih0aGlzLmJsb2NrXy5zYXZlQ29ubmVjdGlvbnMpe3ZhciBlPXRoaXMsZj10aGlzLmJsb2NrXztmLnNhdmVDb25uZWN0aW9ucyh0aGlzLnJvb3RCbG9ja18pO3RoaXMuc291cmNlTGlzdGVuZXJfPWZ1bmN0aW9uKCl7Zi5zYXZlQ29ubmVjdGlvbnMoZS5yb290QmxvY2tfKX07dGhpcy5ibG9ja18ud29ya3NwYWNlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuc291cmNlTGlzdGVuZXJfKX10aGlzLnJlc2l6ZUJ1YmJsZV8oKTtcbnRoaXMud29ya3NwYWNlXy5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLndvcmtzcGFjZUNoYW5nZWRfLmJpbmQodGhpcykpO3RoaXMuYXBwbHlDb2xvdXIoKX1lbHNlIHRoaXMuc3ZnRGlhbG9nXz1udWxsLHRoaXMud29ya3NwYWNlXy5kaXNwb3NlKCksdGhpcy5yb290QmxvY2tfPXRoaXMud29ya3NwYWNlXz1udWxsLHRoaXMuYnViYmxlXy5kaXNwb3NlKCksdGhpcy5idWJibGVfPW51bGwsdGhpcy53b3Jrc3BhY2VIZWlnaHRfPXRoaXMud29ya3NwYWNlV2lkdGhfPTAsdGhpcy5zb3VyY2VMaXN0ZW5lcl8mJih0aGlzLmJsb2NrXy53b3Jrc3BhY2UucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5zb3VyY2VMaXN0ZW5lcl8pLHRoaXMuc291cmNlTGlzdGVuZXJfPW51bGwpfTtcbkJsb2NrbHkuTXV0YXRvci5wcm90b3R5cGUud29ya3NwYWNlQ2hhbmdlZF89ZnVuY3Rpb24oYSl7aWYoYS50eXBlIT1CbG9ja2x5LkV2ZW50cy5VSSYmKGEudHlwZSE9QmxvY2tseS5FdmVudHMuQ0hBTkdFfHxcImRpc2FibGVkXCIhPWEuZWxlbWVudCkpe2lmKCF0aGlzLndvcmtzcGFjZV8uaXNEcmFnZ2luZygpKWZvcih2YXIgYj10aGlzLndvcmtzcGFjZV8uZ2V0VG9wQmxvY2tzKCExKSxjPTA7YT1iW2NdO2MrKyl7dmFyIGQ9YS5nZXRSZWxhdGl2ZVRvU3VyZmFjZVhZKCk7MjA+ZC55JiZhLm1vdmVCeSgwLDIwLWQueSk7aWYoYS5SVEwpe3ZhciBlPS0yMCxmPXRoaXMud29ya3NwYWNlXy5nZXRGbHlvdXQoKTtmJiYoZS09Zi5nZXRXaWR0aCgpKTtkLng+ZSYmYS5tb3ZlQnkoZS1kLngsMCl9ZWxzZSAyMD5kLngmJmEubW92ZUJ5KDIwLWQueCwwKX10aGlzLnJvb3RCbG9ja18ud29ya3NwYWNlPT10aGlzLndvcmtzcGFjZV8mJihCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMCksYT10aGlzLmJsb2NrXyxcbmI9KGI9YS5tdXRhdGlvblRvRG9tKCkpJiZCbG9ja2x5LlhtbC5kb21Ub1RleHQoYiksYz1hLnJlbmRlcmVkLGEucmVuZGVyZWQ9ITEsYS5jb21wb3NlKHRoaXMucm9vdEJsb2NrXyksYS5yZW5kZXJlZD1jLGEuaW5pdFN2ZygpLEJsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUmJkJsb2NrbHkubmF2aWdhdGlvbi5tb3ZlQ3Vyc29yT25CbG9ja011dGF0aW9uKGEpLGEucmVuZGVyZWQmJmEucmVuZGVyKCksYz0oYz1hLm11dGF0aW9uVG9Eb20oKSkmJkJsb2NrbHkuWG1sLmRvbVRvVGV4dChjKSxiIT1jJiZCbG9ja2x5LkV2ZW50cy5maXJlKG5ldyBCbG9ja2x5LkV2ZW50cy5CbG9ja0NoYW5nZShhLFwibXV0YXRpb25cIixudWxsLGIsYykpLHRoaXMud29ya3NwYWNlXy5pc0RyYWdnaW5nKCl8fHRoaXMucmVzaXplQnViYmxlXygpLEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCExKSl9fTtcbkJsb2NrbHkuTXV0YXRvci5wcm90b3R5cGUuZ2V0Rmx5b3V0TWV0cmljc189ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndvcmtzcGFjZV8uZ2V0Rmx5b3V0KCk7YT1hP2EuZ2V0V2lkdGgoKTowO3JldHVybntjb250ZW50SGVpZ2h0OjAsY29udGVudFdpZHRoOjAsY29udGVudFRvcDowLGNvbnRlbnRMZWZ0OjAsdmlld0hlaWdodDp0aGlzLndvcmtzcGFjZUhlaWdodF8sdmlld1dpZHRoOnRoaXMud29ya3NwYWNlV2lkdGhfLWEsdmlld1RvcDowLHZpZXdMZWZ0OjAsYWJzb2x1dGVUb3A6MCxhYnNvbHV0ZUxlZnQ6dGhpcy53b3Jrc3BhY2VfLlJUTD8wOmF9fTtCbG9ja2x5Lk11dGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmJsb2NrXy5tdXRhdG9yPW51bGw7QmxvY2tseS5JY29uLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9O1xuQmxvY2tseS5NdXRhdG9yLnByb3RvdHlwZS51cGRhdGVCbG9ja1N0eWxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53b3Jrc3BhY2VfO2lmKGEmJmEuZ2V0QWxsQmxvY2tzKCExKSl7Zm9yKHZhciBiPWEuZ2V0QWxsQmxvY2tzKCExKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107ZC5zZXRTdHlsZShkLmdldFN0eWxlTmFtZSgpKX1pZihjPWEuZ2V0Rmx5b3V0KCkpZm9yKGE9Yy53b3Jrc3BhY2VfLmdldEFsbEJsb2NrcyghMSksYz0wO2M8YS5sZW5ndGg7YysrKWQ9YVtjXSxkLnNldFN0eWxlKGQuZ2V0U3R5bGVOYW1lKCkpfX07XG5CbG9ja2x5Lk11dGF0b3IucmVjb25uZWN0PWZ1bmN0aW9uKGEsYixjKXtpZighYXx8IWEuZ2V0U291cmNlQmxvY2soKS53b3Jrc3BhY2UpcmV0dXJuITE7Yz1iLmdldElucHV0KGMpLmNvbm5lY3Rpb247dmFyIGQ9YS50YXJnZXRCbG9jaygpO3JldHVybiBkJiZkIT1ifHxjLnRhcmdldENvbm5lY3Rpb249PWE/ITE6KGMuaXNDb25uZWN0ZWQoKSYmYy5kaXNjb25uZWN0KCksYy5jb25uZWN0KGEpLCEwKX07QmxvY2tseS5NdXRhdG9yLmZpbmRQYXJlbnRXcz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO2lmKGEmJmEub3B0aW9ucyl7dmFyIGM9YS5vcHRpb25zLnBhcmVudFdvcmtzcGFjZTthLmlzRmx5b3V0P2MmJmMub3B0aW9ucyYmKGI9Yy5vcHRpb25zLnBhcmVudFdvcmtzcGFjZSk6YyYmKGI9Yyl9cmV0dXJuIGJ9O0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc3BlbGxjaGVja189ITA7QmxvY2tseS5GaWVsZFRleHRJbnB1dC5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiLGMpO3RoaXMub25LZXlJbnB1dFdyYXBwZXJfPXRoaXMub25LZXlEb3duV3JhcHBlcl89dGhpcy5odG1sSW5wdXRfPW51bGw7dGhpcy5mdWxsQmxvY2tDbGlja1RhcmdldF89ITE7dGhpcy53b3Jrc3BhY2VfPW51bGx9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRmllbGRUZXh0SW5wdXQsQmxvY2tseS5GaWVsZCk7QmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuREVGQVVMVF9WQUxVRT1cIlwiO1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5mcm9tSnNvbj1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhhLnRleHQpO3JldHVybiBuZXcgQmxvY2tseS5GaWVsZFRleHRJbnB1dChiLHZvaWQgMCxhKX07QmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuU0VSSUFMSVpBQkxFPSEwO0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQuQk9SREVSUkFESVVTPTQ7QmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuQ1VSU09SPVwidGV4dFwiO0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQucHJvdG90eXBlLmNvbmZpZ3VyZV89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZFRleHRJbnB1dC5zdXBlckNsYXNzXy5jb25maWd1cmVfLmNhbGwodGhpcyxhKTtcImJvb2xlYW5cIj09dHlwZW9mIGEuc3BlbGxjaGVjayYmKHRoaXMuc3BlbGxjaGVja189YS5zcGVsbGNoZWNrKX07XG5CbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5pbml0Vmlldz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29uc3RhbnRzKCkuRlVMTF9CTE9DS19GSUVMRFMpe2Zvcih2YXIgYT0wLGI9MCxjPTAsZDtkPXRoaXMuc291cmNlQmxvY2tfLmlucHV0TGlzdFtjXTtjKyspe2Zvcih2YXIgZT0wO2QuZmllbGRSb3dbZV07ZSsrKWErKztkLmNvbm5lY3Rpb24mJmIrK310aGlzLmZ1bGxCbG9ja0NsaWNrVGFyZ2V0Xz0xPj1hJiZ0aGlzLnNvdXJjZUJsb2NrXy5vdXRwdXRDb25uZWN0aW9uJiYhYn1lbHNlIHRoaXMuZnVsbEJsb2NrQ2xpY2tUYXJnZXRfPSExO3RoaXMuZnVsbEJsb2NrQ2xpY2tUYXJnZXRfP3RoaXMuY2xpY2tUYXJnZXRfPXRoaXMuc291cmNlQmxvY2tfLmdldFN2Z1Jvb3QoKTp0aGlzLmNyZWF0ZUJvcmRlclJlY3RfKCk7dGhpcy5jcmVhdGVUZXh0RWxlbWVudF8oKX07XG5CbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5kb0NsYXNzVmFsaWRhdGlvbl89ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hfHx2b2lkIDA9PT1hP251bGw6U3RyaW5nKGEpfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5kb1ZhbHVlSW52YWxpZF89ZnVuY3Rpb24oYSl7dGhpcy5pc0JlaW5nRWRpdGVkXyYmKHRoaXMuaXNUZXh0VmFsaWRfPSExLGE9dGhpcy52YWx1ZV8sdGhpcy52YWx1ZV89dGhpcy5odG1sSW5wdXRfLnVudHlwZWREZWZhdWx0VmFsdWVfLHRoaXMuc291cmNlQmxvY2tfJiZCbG9ja2x5LkV2ZW50cy5pc0VuYWJsZWQoKSYmQmxvY2tseS5FdmVudHMuZmlyZShuZXcgQmxvY2tseS5FdmVudHMuQmxvY2tDaGFuZ2UodGhpcy5zb3VyY2VCbG9ja18sXCJmaWVsZFwiLHRoaXMubmFtZXx8bnVsbCxhLHRoaXMudmFsdWVfKSkpfTtcbkJsb2NrbHkuRmllbGRUZXh0SW5wdXQucHJvdG90eXBlLmRvVmFsdWVVcGRhdGVfPWZ1bmN0aW9uKGEpe3RoaXMuaXNUZXh0VmFsaWRfPSEwO3RoaXMudmFsdWVfPWE7dGhpcy5pc0JlaW5nRWRpdGVkX3x8KHRoaXMuaXNEaXJ0eV89ITApfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5hcHBseUNvbG91cj1mdW5jdGlvbigpe3RoaXMuc291cmNlQmxvY2tfJiZ0aGlzLmdldENvbnN0YW50cygpLkZVTExfQkxPQ0tfRklFTERTJiYodGhpcy5ib3JkZXJSZWN0Xz90aGlzLmJvcmRlclJlY3RfLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLHRoaXMuc291cmNlQmxvY2tfLnN0eWxlLmNvbG91clRlcnRpYXJ5KTp0aGlzLnNvdXJjZUJsb2NrXy5wYXRoT2JqZWN0LnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQk9SREVSX1JFQ1RfQ09MT1VSKSl9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUucmVuZGVyXz1mdW5jdGlvbigpe0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQuc3VwZXJDbGFzc18ucmVuZGVyXy5jYWxsKHRoaXMpO2lmKHRoaXMuaXNCZWluZ0VkaXRlZF8pe3RoaXMucmVzaXplRWRpdG9yXygpO3ZhciBhPXRoaXMuaHRtbElucHV0Xzt0aGlzLmlzVGV4dFZhbGlkXz8oQmxvY2tseS51dGlscy5kb20ucmVtb3ZlQ2xhc3MoYSxcImJsb2NrbHlJbnZhbGlkSW5wdXRcIiksQmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKGEsQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLklOVkFMSUQsITEpKTooQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3MoYSxcImJsb2NrbHlJbnZhbGlkSW5wdXRcIiksQmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKGEsQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLklOVkFMSUQsITApKX19O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuc2V0U3BlbGxjaGVjaz1mdW5jdGlvbihhKXthIT10aGlzLnNwZWxsY2hlY2tfJiYodGhpcy5zcGVsbGNoZWNrXz1hLHRoaXMuaHRtbElucHV0XyYmdGhpcy5odG1sSW5wdXRfLnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIix0aGlzLnNwZWxsY2hlY2tfKSl9O0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQucHJvdG90eXBlLnNob3dFZGl0b3JfPWZ1bmN0aW9uKGEsYil7dGhpcy53b3Jrc3BhY2VfPXRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZTthPWJ8fCExOyFhJiYoQmxvY2tseS51dGlscy51c2VyQWdlbnQuTU9CSUxFfHxCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5BTkRST0lEfHxCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5JUEFEKT90aGlzLnNob3dQcm9tcHRFZGl0b3JfKCk6dGhpcy5zaG93SW5saW5lRWRpdG9yXyhhKX07XG5CbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5zaG93UHJvbXB0RWRpdG9yXz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7QmxvY2tseS5wcm9tcHQoQmxvY2tseS5Nc2cuQ0hBTkdFX1ZBTFVFX1RJVExFLHRoaXMuZ2V0VGV4dCgpLGZ1bmN0aW9uKGIpe2Euc2V0VmFsdWUoYil9KX07QmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuc2hvd0lubGluZUVkaXRvcl89ZnVuY3Rpb24oYSl7QmxvY2tseS5XaWRnZXREaXYuc2hvdyh0aGlzLHRoaXMuc291cmNlQmxvY2tfLlJUTCx0aGlzLndpZGdldERpc3Bvc2VfLmJpbmQodGhpcykpO3RoaXMuaHRtbElucHV0Xz10aGlzLndpZGdldENyZWF0ZV8oKTt0aGlzLmlzQmVpbmdFZGl0ZWRfPSEwO2F8fCh0aGlzLmh0bWxJbnB1dF8uZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSx0aGlzLmh0bWxJbnB1dF8uc2VsZWN0KCkpfTtcbkJsb2NrbHkuRmllbGRUZXh0SW5wdXQucHJvdG90eXBlLndpZGdldENyZWF0ZV89ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LldpZGdldERpdi5ESVY7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy5nZXRDbGlja1RhcmdldF8oKSxcImVkaXRpbmdcIik7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2IuY2xhc3NOYW1lPVwiYmxvY2tseUh0bWxJbnB1dFwiO2Iuc2V0QXR0cmlidXRlKFwic3BlbGxjaGVja1wiLHRoaXMuc3BlbGxjaGVja18pO3ZhciBjPXRoaXMud29ya3NwYWNlXy5nZXRTY2FsZSgpLGQ9dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9URVhUX0ZPTlRTSVpFKmMrXCJwdFwiO2Euc3R5bGUuZm9udFNpemU9ZDtiLnN0eWxlLmZvbnRTaXplPWQ7ZD1CbG9ja2x5LkZpZWxkVGV4dElucHV0LkJPUkRFUlJBRElVUypjK1wicHhcIjtpZih0aGlzLmZ1bGxCbG9ja0NsaWNrVGFyZ2V0Xyl7ZD10aGlzLmdldFNjYWxlZEJCb3goKTtkPShkLmJvdHRvbS1kLnRvcCkvMitcblwicHhcIjt2YXIgZT10aGlzLnNvdXJjZUJsb2NrXy5nZXRQYXJlbnQoKT90aGlzLnNvdXJjZUJsb2NrXy5nZXRQYXJlbnQoKS5zdHlsZS5jb2xvdXJUZXJ0aWFyeTp0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJUZXJ0aWFyeTtiLnN0eWxlLmJvcmRlcj0xKmMrXCJweCBzb2xpZCBcIitlO2Euc3R5bGUuYm9yZGVyUmFkaXVzPWQ7YS5zdHlsZS50cmFuc2l0aW9uPVwiYm94LXNoYWRvdyAwLjI1cyBlYXNlIDBzXCI7dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9URVhUSU5QVVRfQk9YX1NIQURPVyYmKGEuc3R5bGUuYm94U2hhZG93PVwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpIDBweCAwcHggMHB4IFwiKzQqYytcInB4XCIpfWIuc3R5bGUuYm9yZGVyUmFkaXVzPWQ7YS5hcHBlbmRDaGlsZChiKTtiLnZhbHVlPWIuZGVmYXVsdFZhbHVlPXRoaXMuZ2V0RWRpdG9yVGV4dF8odGhpcy52YWx1ZV8pO2IudW50eXBlZERlZmF1bHRWYWx1ZV89dGhpcy52YWx1ZV87Yi5vbGRWYWx1ZV89bnVsbDt0aGlzLnJlc2l6ZUVkaXRvcl8oKTtcbnRoaXMuYmluZElucHV0RXZlbnRzXyhiKTtyZXR1cm4gYn07QmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUud2lkZ2V0RGlzcG9zZV89ZnVuY3Rpb24oKXt0aGlzLmlzQmVpbmdFZGl0ZWRfPSExO3RoaXMuaXNUZXh0VmFsaWRfPSEwO3RoaXMuZm9yY2VSZXJlbmRlcigpO2lmKHRoaXMub25GaW5pc2hFZGl0aW5nXyl0aGlzLm9uRmluaXNoRWRpdGluZ18odGhpcy52YWx1ZV8pO3RoaXMudW5iaW5kSW5wdXRFdmVudHNfKCk7dmFyIGE9QmxvY2tseS5XaWRnZXREaXYuRElWLnN0eWxlO2Eud2lkdGg9XCJhdXRvXCI7YS5oZWlnaHQ9XCJhdXRvXCI7YS5mb250U2l6ZT1cIlwiO2EudHJhbnNpdGlvbj1cIlwiO2EuYm94U2hhZG93PVwiXCI7dGhpcy5odG1sSW5wdXRfPW51bGw7QmxvY2tseS51dGlscy5kb20ucmVtb3ZlQ2xhc3ModGhpcy5nZXRDbGlja1RhcmdldF8oKSxcImVkaXRpbmdcIil9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuYmluZElucHV0RXZlbnRzXz1mdW5jdGlvbihhKXt0aGlzLm9uS2V5RG93bldyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYSxcImtleWRvd25cIix0aGlzLHRoaXMub25IdG1sSW5wdXRLZXlEb3duXyk7dGhpcy5vbktleUlucHV0V3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhhLFwiaW5wdXRcIix0aGlzLHRoaXMub25IdG1sSW5wdXRDaGFuZ2VfKX07XG5CbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS51bmJpbmRJbnB1dEV2ZW50c189ZnVuY3Rpb24oKXt0aGlzLm9uS2V5RG93bldyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbktleURvd25XcmFwcGVyXyksdGhpcy5vbktleURvd25XcmFwcGVyXz1udWxsKTt0aGlzLm9uS2V5SW5wdXRXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25LZXlJbnB1dFdyYXBwZXJfKSx0aGlzLm9uS2V5SW5wdXRXcmFwcGVyXz1udWxsKX07XG5CbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5vbkh0bWxJbnB1dEtleURvd25fPWZ1bmN0aW9uKGEpe2Eua2V5Q29kZT09QmxvY2tseS51dGlscy5LZXlDb2Rlcy5FTlRFUj8oQmxvY2tseS5XaWRnZXREaXYuaGlkZSgpLEJsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKSk6YS5rZXlDb2RlPT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLkVTQz8odGhpcy5odG1sSW5wdXRfLnZhbHVlPXRoaXMuaHRtbElucHV0Xy5kZWZhdWx0VmFsdWUsQmxvY2tseS5XaWRnZXREaXYuaGlkZSgpLEJsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKSk6YS5rZXlDb2RlPT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlRBQiYmKEJsb2NrbHkuV2lkZ2V0RGl2LmhpZGUoKSxCbG9ja2x5LkRyb3BEb3duRGl2LmhpZGVXaXRob3V0QW5pbWF0aW9uKCksdGhpcy5zb3VyY2VCbG9ja18udGFiKHRoaXMsIWEuc2hpZnRLZXkpLGEucHJldmVudERlZmF1bHQoKSl9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUub25IdG1sSW5wdXRDaGFuZ2VfPWZ1bmN0aW9uKGEpe2E9dGhpcy5odG1sSW5wdXRfLnZhbHVlO2EhPT10aGlzLmh0bWxJbnB1dF8ub2xkVmFsdWVfJiYodGhpcy5odG1sSW5wdXRfLm9sZFZhbHVlXz1hLEJsb2NrbHkuRXZlbnRzLnNldEdyb3VwKCEwKSxhPXRoaXMuZ2V0VmFsdWVGcm9tRWRpdG9yVGV4dF8oYSksdGhpcy5zZXRWYWx1ZShhKSx0aGlzLmZvcmNlUmVyZW5kZXIoKSx0aGlzLnJlc2l6ZUVkaXRvcl8oKSxCbG9ja2x5LkV2ZW50cy5zZXRHcm91cCghMSkpfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5zZXRFZGl0b3JWYWx1ZV89ZnVuY3Rpb24oYSl7dGhpcy5pc0RpcnR5Xz0hMDt0aGlzLmlzQmVpbmdFZGl0ZWRfJiYodGhpcy5odG1sSW5wdXRfLnZhbHVlPXRoaXMuZ2V0RWRpdG9yVGV4dF8oYSkpO3RoaXMuc2V0VmFsdWUoYSl9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUucmVzaXplRWRpdG9yXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuV2lkZ2V0RGl2LkRJVixiPXRoaXMuZ2V0U2NhbGVkQkJveCgpO2Euc3R5bGUud2lkdGg9Yi5yaWdodC1iLmxlZnQrXCJweFwiO2Euc3R5bGUuaGVpZ2h0PWIuYm90dG9tLWIudG9wK1wicHhcIjtiPW5ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUodGhpcy5zb3VyY2VCbG9ja18uUlRMP2IucmlnaHQtYS5vZmZzZXRXaWR0aDpiLmxlZnQsYi50b3ApO2Euc3R5bGUubGVmdD1iLngrXCJweFwiO2Euc3R5bGUudG9wPWIueStcInB4XCJ9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5udW1iZXJWYWxpZGF0b3I9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiQmxvY2tseS5GaWVsZFRleHRJbnB1dC5udW1iZXJWYWxpZGF0b3IgaXMgZGVwcmVjYXRlZC4gVXNlIEJsb2NrbHkuRmllbGROdW1iZXIgaW5zdGVhZC5cIik7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7YT1TdHJpbmcoYSk7YT1hLnJlcGxhY2UoL08vaWcsXCIwXCIpO2E9YS5yZXBsYWNlKC8sL2csXCJcIik7YT1OdW1iZXIoYXx8MCk7cmV0dXJuIGlzTmFOKGEpP251bGw6U3RyaW5nKGEpfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0Lm5vbm5lZ2F0aXZlSW50ZWdlclZhbGlkYXRvcj1mdW5jdGlvbihhKXsoYT1CbG9ja2x5LkZpZWxkVGV4dElucHV0Lm51bWJlclZhbGlkYXRvcihhKSkmJihhPVN0cmluZyhNYXRoLm1heCgwLE1hdGguZmxvb3IoYSkpKSk7cmV0dXJuIGF9O0Jsb2NrbHkuRmllbGRUZXh0SW5wdXQucHJvdG90eXBlLmlzVGFiTmF2aWdhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuITB9O1xuQmxvY2tseS5GaWVsZFRleHRJbnB1dC5wcm90b3R5cGUuZ2V0VGV4dF89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0JlaW5nRWRpdGVkXyYmdGhpcy5odG1sSW5wdXRfP3RoaXMuaHRtbElucHV0Xy52YWx1ZTpudWxsfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5nZXRFZGl0b3JUZXh0Xz1mdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfTtCbG9ja2x5LkZpZWxkVGV4dElucHV0LnByb3RvdHlwZS5nZXRWYWx1ZUZyb21FZGl0b3JUZXh0Xz1mdW5jdGlvbihhKXtyZXR1cm4gYX07QmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyKFwiZmllbGRfaW5wdXRcIixCbG9ja2x5LkZpZWxkVGV4dElucHV0KTtCbG9ja2x5LkZpZWxkQW5nbGU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY2xvY2t3aXNlXz1CbG9ja2x5LkZpZWxkQW5nbGUuQ0xPQ0tXSVNFO3RoaXMub2Zmc2V0Xz1CbG9ja2x5LkZpZWxkQW5nbGUuT0ZGU0VUO3RoaXMud3JhcF89QmxvY2tseS5GaWVsZEFuZ2xlLldSQVA7dGhpcy5yb3VuZF89QmxvY2tseS5GaWVsZEFuZ2xlLlJPVU5EO0Jsb2NrbHkuRmllbGRBbmdsZS5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiLGMpO3RoaXMubW92ZVN1cmZhY2VXcmFwcGVyXz10aGlzLmNsaWNrU3VyZmFjZVdyYXBwZXJfPXRoaXMuY2xpY2tXcmFwcGVyXz10aGlzLmxpbmVfPXRoaXMuZ2F1Z2VfPW51bGx9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRmllbGRBbmdsZSxCbG9ja2x5LkZpZWxkVGV4dElucHV0KTtCbG9ja2x5LkZpZWxkQW5nbGUucHJvdG90eXBlLkRFRkFVTFRfVkFMVUU9MDtcbkJsb2NrbHkuRmllbGRBbmdsZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuRmllbGRBbmdsZShhLmFuZ2xlLHZvaWQgMCxhKX07QmxvY2tseS5GaWVsZEFuZ2xlLnByb3RvdHlwZS5TRVJJQUxJWkFCTEU9ITA7QmxvY2tseS5GaWVsZEFuZ2xlLlJPVU5EPTE1O0Jsb2NrbHkuRmllbGRBbmdsZS5IQUxGPTUwO0Jsb2NrbHkuRmllbGRBbmdsZS5DTE9DS1dJU0U9ITE7QmxvY2tseS5GaWVsZEFuZ2xlLk9GRlNFVD0wO0Jsb2NrbHkuRmllbGRBbmdsZS5XUkFQPTM2MDtCbG9ja2x5LkZpZWxkQW5nbGUuUkFESVVTPUJsb2NrbHkuRmllbGRBbmdsZS5IQUxGLTE7XG5CbG9ja2x5LkZpZWxkQW5nbGUucHJvdG90eXBlLmNvbmZpZ3VyZV89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZEFuZ2xlLnN1cGVyQ2xhc3NfLmNvbmZpZ3VyZV8uY2FsbCh0aGlzLGEpO3N3aXRjaChhLm1vZGUpe2Nhc2UgXCJjb21wYXNzXCI6dGhpcy5jbG9ja3dpc2VfPSEwO3RoaXMub2Zmc2V0Xz05MDticmVhaztjYXNlIFwicHJvdHJhY3RvclwiOnRoaXMuY2xvY2t3aXNlXz0hMSx0aGlzLm9mZnNldF89MH12YXIgYj1hLmNsb2Nrd2lzZTtcImJvb2xlYW5cIj09dHlwZW9mIGImJih0aGlzLmNsb2Nrd2lzZV89Yik7Yj1hLm9mZnNldDtudWxsIT1iJiYoYj1OdW1iZXIoYiksaXNOYU4oYil8fCh0aGlzLm9mZnNldF89YikpO2I9YS53cmFwO251bGwhPWImJihiPU51bWJlcihiKSxpc05hTihiKXx8KHRoaXMud3JhcF89YikpO2E9YS5yb3VuZDtudWxsIT1hJiYoYT1OdW1iZXIoYSksaXNOYU4oYSl8fCh0aGlzLnJvdW5kXz1hKSl9O1xuQmxvY2tseS5GaWVsZEFuZ2xlLnByb3RvdHlwZS5pbml0Vmlldz1mdW5jdGlvbigpe0Jsb2NrbHkuRmllbGRBbmdsZS5zdXBlckNsYXNzXy5pbml0Vmlldy5jYWxsKHRoaXMpO3RoaXMuc3ltYm9sXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlRTUEFOLHt9LG51bGwpO3RoaXMuc3ltYm9sXy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlxcdTAwYjBcIikpO3RoaXMudGV4dEVsZW1lbnRfLmFwcGVuZENoaWxkKHRoaXMuc3ltYm9sXyl9O0Jsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUucmVuZGVyXz1mdW5jdGlvbigpe0Jsb2NrbHkuRmllbGRBbmdsZS5zdXBlckNsYXNzXy5yZW5kZXJfLmNhbGwodGhpcyk7dGhpcy51cGRhdGVHcmFwaF8oKX07XG5CbG9ja2x5LkZpZWxkQW5nbGUucHJvdG90eXBlLnNob3dFZGl0b3JfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRmllbGRBbmdsZS5zdXBlckNsYXNzXy5zaG93RWRpdG9yXy5jYWxsKHRoaXMsYSxCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5NT0JJTEV8fEJsb2NrbHkudXRpbHMudXNlckFnZW50LkFORFJPSUR8fEJsb2NrbHkudXRpbHMudXNlckFnZW50LklQQUQpO2E9dGhpcy5kcm9wZG93bkNyZWF0ZV8oKTtCbG9ja2x5LkRyb3BEb3duRGl2LmdldENvbnRlbnREaXYoKS5hcHBlbmRDaGlsZChhKTtCbG9ja2x5LkRyb3BEb3duRGl2LnNldENvbG91cih0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJQcmltYXJ5LHRoaXMuc291cmNlQmxvY2tfLnN0eWxlLmNvbG91clRlcnRpYXJ5KTtCbG9ja2x5LkRyb3BEb3duRGl2LnNob3dQb3NpdGlvbmVkQnlGaWVsZCh0aGlzLHRoaXMuZHJvcGRvd25EaXNwb3NlXy5iaW5kKHRoaXMpKTt0aGlzLnVwZGF0ZUdyYXBoXygpfTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUuZHJvcGRvd25DcmVhdGVfPWZ1bmN0aW9uKCl7dmFyIGE9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5TVkcse3htbG5zOkJsb2NrbHkudXRpbHMuZG9tLlNWR19OUyxcInhtbG5zOmh0bWxcIjpCbG9ja2x5LnV0aWxzLmRvbS5IVE1MX05TLFwieG1sbnM6eGxpbmtcIjpCbG9ja2x5LnV0aWxzLmRvbS5YTElOS19OUyx2ZXJzaW9uOlwiMS4xXCIsaGVpZ2h0OjIqQmxvY2tseS5GaWVsZEFuZ2xlLkhBTEYrXCJweFwiLHdpZHRoOjIqQmxvY2tseS5GaWVsZEFuZ2xlLkhBTEYrXCJweFwiLHN0eWxlOlwidG91Y2gtYWN0aW9uOiBub25lXCJ9LG51bGwpLGI9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5DSVJDTEUse2N4OkJsb2NrbHkuRmllbGRBbmdsZS5IQUxGLGN5OkJsb2NrbHkuRmllbGRBbmdsZS5IQUxGLHI6QmxvY2tseS5GaWVsZEFuZ2xlLlJBRElVUyxcImNsYXNzXCI6XCJibG9ja2x5QW5nbGVDaXJjbGVcIn0sXG5hKTt0aGlzLmdhdWdlXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse1wiY2xhc3NcIjpcImJsb2NrbHlBbmdsZUdhdWdlXCJ9LGEpO3RoaXMubGluZV89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5MSU5FLHt4MTpCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRix5MTpCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRixcImNsYXNzXCI6XCJibG9ja2x5QW5nbGVMaW5lXCJ9LGEpO2Zvcih2YXIgYz0wOzM2MD5jO2MrPTE1KUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuTElORSx7eDE6QmxvY2tseS5GaWVsZEFuZ2xlLkhBTEYrQmxvY2tseS5GaWVsZEFuZ2xlLlJBRElVUyx5MTpCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRix4MjpCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRitCbG9ja2x5LkZpZWxkQW5nbGUuUkFESVVTLSgwPT1jJTQ1PzEwOjUpLHkyOkJsb2NrbHkuRmllbGRBbmdsZS5IQUxGLFxuXCJjbGFzc1wiOlwiYmxvY2tseUFuZ2xlTWFya3NcIix0cmFuc2Zvcm06XCJyb3RhdGUoXCIrYytcIixcIitCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRitcIixcIitCbG9ja2x5LkZpZWxkQW5nbGUuSEFMRitcIilcIn0sYSk7dGhpcy5jbGlja1dyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYSxcImNsaWNrXCIsdGhpcyx0aGlzLmhpZGVfKTt0aGlzLmNsaWNrU3VyZmFjZVdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcImNsaWNrXCIsdGhpcyx0aGlzLm9uTW91c2VNb3ZlXywhMCwhMCk7dGhpcy5tb3ZlU3VyZmFjZVdyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oYixcIm1vdXNlbW92ZVwiLHRoaXMsdGhpcy5vbk1vdXNlTW92ZV8sITAsITApO3JldHVybiBhfTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUuZHJvcGRvd25EaXNwb3NlXz1mdW5jdGlvbigpe3RoaXMuY2xpY2tXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMuY2xpY2tXcmFwcGVyXyksdGhpcy5jbGlja1dyYXBwZXJfPW51bGwpO3RoaXMuY2xpY2tTdXJmYWNlV3JhcHBlcl8mJihCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLmNsaWNrU3VyZmFjZVdyYXBwZXJfKSx0aGlzLmNsaWNrU3VyZmFjZVdyYXBwZXJfPW51bGwpO3RoaXMubW92ZVN1cmZhY2VXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMubW92ZVN1cmZhY2VXcmFwcGVyXyksdGhpcy5tb3ZlU3VyZmFjZVdyYXBwZXJfPW51bGwpO3RoaXMubGluZV89dGhpcy5nYXVnZV89bnVsbH07QmxvY2tseS5GaWVsZEFuZ2xlLnByb3RvdHlwZS5oaWRlXz1mdW5jdGlvbigpe0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZUlmT3duZXIodGhpcyk7QmxvY2tseS5XaWRnZXREaXYuaGlkZSgpfTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUub25Nb3VzZU1vdmVfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2F1Z2VfLm93bmVyU1ZHRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPWEuY2xpZW50WC1iLmxlZnQtQmxvY2tseS5GaWVsZEFuZ2xlLkhBTEY7YT1hLmNsaWVudFktYi50b3AtQmxvY2tseS5GaWVsZEFuZ2xlLkhBTEY7Yj1NYXRoLmF0YW4oLWEvYyk7aXNOYU4oYil8fChiPUJsb2NrbHkudXRpbHMubWF0aC50b0RlZ3JlZXMoYiksMD5jP2IrPTE4MDowPGEmJihiKz0zNjApLGI9dGhpcy5jbG9ja3dpc2VfP3RoaXMub2Zmc2V0XyszNjAtYjozNjAtKHRoaXMub2Zmc2V0Xy1iKSx0aGlzLmRpc3BsYXlNb3VzZU9yS2V5Ym9hcmRWYWx1ZV8oYikpfTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUuZGlzcGxheU1vdXNlT3JLZXlib2FyZFZhbHVlXz1mdW5jdGlvbihhKXt0aGlzLnJvdW5kXyYmKGE9TWF0aC5yb3VuZChhL3RoaXMucm91bmRfKSp0aGlzLnJvdW5kXyk7YT10aGlzLndyYXBWYWx1ZV8oYSk7YSE9dGhpcy52YWx1ZV8mJnRoaXMuc2V0RWRpdG9yVmFsdWVfKGEpfTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUudXBkYXRlR3JhcGhfPWZ1bmN0aW9uKCl7aWYodGhpcy5nYXVnZV8pe3ZhciBhPU51bWJlcih0aGlzLmdldFRleHQoKSkrdGhpcy5vZmZzZXRfLGI9QmxvY2tseS51dGlscy5tYXRoLnRvUmFkaWFucyhhJTM2MCk7YT1bXCJNIFwiLEJsb2NrbHkuRmllbGRBbmdsZS5IQUxGLFwiLFwiLEJsb2NrbHkuRmllbGRBbmdsZS5IQUxGXTt2YXIgYz1CbG9ja2x5LkZpZWxkQW5nbGUuSEFMRixkPUJsb2NrbHkuRmllbGRBbmdsZS5IQUxGO2lmKCFpc05hTihiKSl7dmFyIGU9TnVtYmVyKHRoaXMuY2xvY2t3aXNlXyksZj1CbG9ja2x5LnV0aWxzLm1hdGgudG9SYWRpYW5zKHRoaXMub2Zmc2V0XyksZz1NYXRoLmNvcyhmKSpCbG9ja2x5LkZpZWxkQW5nbGUuUkFESVVTLGg9TWF0aC5zaW4oZikqLUJsb2NrbHkuRmllbGRBbmdsZS5SQURJVVM7ZSYmKGI9MipmLWIpO2MrPU1hdGguY29zKGIpKkJsb2NrbHkuRmllbGRBbmdsZS5SQURJVVM7ZC09TWF0aC5zaW4oYikqXG5CbG9ja2x5LkZpZWxkQW5nbGUuUkFESVVTO2I9TWF0aC5hYnMoTWF0aC5mbG9vcigoYi1mKS9NYXRoLlBJKSUyKTtlJiYoYj0xLWIpO2EucHVzaChcIiBsIFwiLGcsXCIsXCIsaCxcIiBBIFwiLEJsb2NrbHkuRmllbGRBbmdsZS5SQURJVVMsXCIsXCIsQmxvY2tseS5GaWVsZEFuZ2xlLlJBRElVUyxcIiAwIFwiLGIsXCIgXCIsZSxcIiBcIixjLFwiLFwiLGQsXCIgelwiKX10aGlzLmdhdWdlXy5zZXRBdHRyaWJ1dGUoXCJkXCIsYS5qb2luKFwiXCIpKTt0aGlzLmxpbmVfLnNldEF0dHJpYnV0ZShcIngyXCIsYyk7dGhpcy5saW5lXy5zZXRBdHRyaWJ1dGUoXCJ5MlwiLGQpfX07XG5CbG9ja2x5LkZpZWxkQW5nbGUucHJvdG90eXBlLm9uSHRtbElucHV0S2V5RG93bl89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZEFuZ2xlLnN1cGVyQ2xhc3NfLm9uSHRtbElucHV0S2V5RG93bl8uY2FsbCh0aGlzLGEpO3ZhciBiO2Eua2V5Q29kZT09PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuTEVGVD9iPXRoaXMuc291cmNlQmxvY2tfLlJUTD8xOi0xOmEua2V5Q29kZT09PUJsb2NrbHkudXRpbHMuS2V5Q29kZXMuUklHSFQ/Yj10aGlzLnNvdXJjZUJsb2NrXy5SVEw/LTE6MTphLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLkRPV04/Yj0tMTphLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlVQJiYoYj0xKTtpZihiKXt2YXIgYz10aGlzLmdldFZhbHVlKCk7dGhpcy5kaXNwbGF5TW91c2VPcktleWJvYXJkVmFsdWVfKGMrYip0aGlzLnJvdW5kXyk7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9fTtcbkJsb2NrbHkuRmllbGRBbmdsZS5wcm90b3R5cGUuZG9DbGFzc1ZhbGlkYXRpb25fPWZ1bmN0aW9uKGEpe2E9TnVtYmVyKGEpO3JldHVybiBpc05hTihhKXx8IWlzRmluaXRlKGEpP251bGw6dGhpcy53cmFwVmFsdWVfKGEpfTtCbG9ja2x5LkZpZWxkQW5nbGUucHJvdG90eXBlLndyYXBWYWx1ZV89ZnVuY3Rpb24oYSl7YSU9MzYwOzA+YSYmKGErPTM2MCk7YT50aGlzLndyYXBfJiYoYS09MzYwKTtyZXR1cm4gYX07QmxvY2tseS5Dc3MucmVnaXN0ZXIoXCIuYmxvY2tseUFuZ2xlQ2lyY2xlIHssc3Ryb2tlOiAjNDQ0OyxzdHJva2Utd2lkdGg6IDE7LGZpbGw6ICNkZGQ7LGZpbGwtb3BhY2l0eTogLjg7LH0sLmJsb2NrbHlBbmdsZU1hcmtzIHssc3Ryb2tlOiAjNDQ0OyxzdHJva2Utd2lkdGg6IDE7LH0sLmJsb2NrbHlBbmdsZUdhdWdlIHssZmlsbDogI2Y4ODssZmlsbC1vcGFjaXR5OiAuODsscG9pbnRlci1ldmVudHM6IG5vbmU7LH0sLmJsb2NrbHlBbmdsZUxpbmUgeyxzdHJva2U6ICNmMDA7LHN0cm9rZS13aWR0aDogMjssc3Ryb2tlLWxpbmVjYXA6IHJvdW5kOyxwb2ludGVyLWV2ZW50czogbm9uZTssfVwiLnNwbGl0KFwiLFwiKSk7XG5CbG9ja2x5LmZpZWxkUmVnaXN0cnkucmVnaXN0ZXIoXCJmaWVsZF9hbmdsZVwiLEJsb2NrbHkuRmllbGRBbmdsZSk7QmxvY2tseS5GaWVsZENoZWNrYm94PWZ1bmN0aW9uKGEsYixjKXt0aGlzLmNoZWNrQ2hhcl89bnVsbDtCbG9ja2x5LkZpZWxkQ2hlY2tib3guc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5GaWVsZENoZWNrYm94LEJsb2NrbHkuRmllbGQpO0Jsb2NrbHkuRmllbGRDaGVja2JveC5wcm90b3R5cGUuREVGQVVMVF9WQUxVRT0hMTtCbG9ja2x5LkZpZWxkQ2hlY2tib3guZnJvbUpzb249ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCbG9ja2x5LkZpZWxkQ2hlY2tib3goYS5jaGVja2VkLHZvaWQgMCxhKX07QmxvY2tseS5GaWVsZENoZWNrYm94LkNIRUNLX0NIQVI9XCJcXHUyNzEzXCI7QmxvY2tseS5GaWVsZENoZWNrYm94LnByb3RvdHlwZS5TRVJJQUxJWkFCTEU9ITA7QmxvY2tseS5GaWVsZENoZWNrYm94LnByb3RvdHlwZS5DVVJTT1I9XCJkZWZhdWx0XCI7XG5CbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLmNvbmZpZ3VyZV89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZENoZWNrYm94LnN1cGVyQ2xhc3NfLmNvbmZpZ3VyZV8uY2FsbCh0aGlzLGEpO2EuY2hlY2tDaGFyYWN0ZXImJih0aGlzLmNoZWNrQ2hhcl89YS5jaGVja0NoYXJhY3Rlcil9O0Jsb2NrbHkuRmllbGRDaGVja2JveC5wcm90b3R5cGUuaW5pdFZpZXc9ZnVuY3Rpb24oKXtCbG9ja2x5LkZpZWxkQ2hlY2tib3guc3VwZXJDbGFzc18uaW5pdFZpZXcuY2FsbCh0aGlzKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyh0aGlzLnRleHRFbGVtZW50XyxcImJsb2NrbHlDaGVja2JveFwiKTt0aGlzLnRleHRFbGVtZW50Xy5zdHlsZS5kaXNwbGF5PXRoaXMudmFsdWVfP1wiYmxvY2tcIjpcIm5vbmVcIn07XG5CbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLnJlbmRlcl89ZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50XyYmKHRoaXMudGV4dENvbnRlbnRfLm5vZGVWYWx1ZT10aGlzLmdldERpc3BsYXlUZXh0XygpKTt0aGlzLnVwZGF0ZVNpemVfKHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQ0hFQ0tCT1hfWF9PRkZTRVQpfTtCbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLmdldERpc3BsYXlUZXh0Xz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrQ2hhcl98fEJsb2NrbHkuRmllbGRDaGVja2JveC5DSEVDS19DSEFSfTtCbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLnNldENoZWNrQ2hhcmFjdGVyPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tDaGFyXz1hO3RoaXMuZm9yY2VSZXJlbmRlcigpfTtCbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLnNob3dFZGl0b3JfPWZ1bmN0aW9uKCl7dGhpcy5zZXRWYWx1ZSghdGhpcy52YWx1ZV8pfTtcbkJsb2NrbHkuRmllbGRDaGVja2JveC5wcm90b3R5cGUuZG9DbGFzc1ZhbGlkYXRpb25fPWZ1bmN0aW9uKGEpe3JldHVybiEwPT09YXx8XCJUUlVFXCI9PT1hP1wiVFJVRVwiOiExPT09YXx8XCJGQUxTRVwiPT09YT9cIkZBTFNFXCI6bnVsbH07QmxvY2tseS5GaWVsZENoZWNrYm94LnByb3RvdHlwZS5kb1ZhbHVlVXBkYXRlXz1mdW5jdGlvbihhKXt0aGlzLnZhbHVlXz10aGlzLmNvbnZlcnRWYWx1ZVRvQm9vbF8oYSk7dGhpcy50ZXh0RWxlbWVudF8mJih0aGlzLnRleHRFbGVtZW50Xy5zdHlsZS5kaXNwbGF5PXRoaXMudmFsdWVfP1wiYmxvY2tcIjpcIm5vbmVcIil9O0Jsb2NrbHkuRmllbGRDaGVja2JveC5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV8/XCJUUlVFXCI6XCJGQUxTRVwifTtCbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLmdldFZhbHVlQm9vbGVhbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX307XG5CbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nKHRoaXMuY29udmVydFZhbHVlVG9Cb29sXyh0aGlzLnZhbHVlXykpfTtCbG9ja2x5LkZpZWxkQ2hlY2tib3gucHJvdG90eXBlLmNvbnZlcnRWYWx1ZVRvQm9vbF89ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGE/XCJUUlVFXCI9PWE6ISFhfTtCbG9ja2x5LmZpZWxkUmVnaXN0cnkucmVnaXN0ZXIoXCJmaWVsZF9jaGVja2JveFwiLEJsb2NrbHkuRmllbGRDaGVja2JveCk7QmxvY2tseS5GaWVsZENvbG91cj1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS5GaWVsZENvbG91ci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiLGMpO3RoaXMub25LZXlEb3duV3JhcHBlcl89dGhpcy5vbk1vdXNlTGVhdmVXcmFwcGVyXz10aGlzLm9uTW91c2VFbnRlcldyYXBwZXJfPXRoaXMub25Nb3VzZU1vdmVXcmFwcGVyXz10aGlzLm9uQ2xpY2tXcmFwcGVyXz10aGlzLmhpZ2hsaWdodGVkSW5kZXhfPXRoaXMucGlja2VyXz1udWxsfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkZpZWxkQ29sb3VyLEJsb2NrbHkuRmllbGQpO0Jsb2NrbHkuRmllbGRDb2xvdXIuZnJvbUpzb249ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCbG9ja2x5LkZpZWxkQ29sb3VyKGEuY29sb3VyLHZvaWQgMCxhKX07QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuU0VSSUFMSVpBQkxFPSEwO0Jsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLkNVUlNPUj1cImRlZmF1bHRcIjtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmlzRGlydHlfPSExO0Jsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmNvbG91cnNfPW51bGw7QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUudGl0bGVzXz1udWxsO0Jsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmNvbHVtbnNfPTA7QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuY29uZmlndXJlXz1mdW5jdGlvbihhKXtCbG9ja2x5LkZpZWxkQ29sb3VyLnN1cGVyQ2xhc3NfLmNvbmZpZ3VyZV8uY2FsbCh0aGlzLGEpO2EuY29sb3VyT3B0aW9ucyYmKHRoaXMuY29sb3Vyc189YS5jb2xvdXJPcHRpb25zLHRoaXMudGl0bGVzXz1hLmNvbG91clRpdGxlcyk7YS5jb2x1bW5zJiYodGhpcy5jb2x1bW5zXz1hLmNvbHVtbnMpfTtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmluaXRWaWV3PWZ1bmN0aW9uKCl7dGhpcy5zaXplXz1uZXcgQmxvY2tseS51dGlscy5TaXplKHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQ09MT1VSX0RFRkFVTFRfV0lEVEgsdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9DT0xPVVJfREVGQVVMVF9IRUlHSFQpO3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQ09MT1VSX0ZVTExfQkxPQ0s/dGhpcy5jbGlja1RhcmdldF89dGhpcy5zb3VyY2VCbG9ja18uZ2V0U3ZnUm9vdCgpOih0aGlzLmNyZWF0ZUJvcmRlclJlY3RfKCksdGhpcy5ib3JkZXJSZWN0Xy5zdHlsZS5maWxsT3BhY2l0eT1cIjFcIil9O1xuQmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuYXBwbHlDb2xvdXI9ZnVuY3Rpb24oKXt0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0NPTE9VUl9GVUxMX0JMT0NLPyh0aGlzLnNvdXJjZUJsb2NrXy5wYXRoT2JqZWN0LnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuZ2V0VmFsdWUoKSksdGhpcy5zb3VyY2VCbG9ja18ucGF0aE9iamVjdC5zdmdQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLFwiI2ZmZlwiKSk6dGhpcy5ib3JkZXJSZWN0XyYmKHRoaXMuYm9yZGVyUmVjdF8uc3R5bGUuZmlsbD10aGlzLmdldFZhbHVlKCkpfTtCbG9ja2x5LkZpZWxkQ29sb3VyLnByb3RvdHlwZS5kb0NsYXNzVmFsaWRhdGlvbl89ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGE/bnVsbDpCbG9ja2x5LnV0aWxzLmNvbG91ci5wYXJzZShhKX07XG5CbG9ja2x5LkZpZWxkQ29sb3VyLnByb3RvdHlwZS5kb1ZhbHVlVXBkYXRlXz1mdW5jdGlvbihhKXt0aGlzLnZhbHVlXz1hO3RoaXMuYm9yZGVyUmVjdF8/dGhpcy5ib3JkZXJSZWN0Xy5zdHlsZS5maWxsPWE6dGhpcy5zb3VyY2VCbG9ja18mJnRoaXMuc291cmNlQmxvY2tfLnJlbmRlcmVkJiYodGhpcy5zb3VyY2VCbG9ja18ucGF0aE9iamVjdC5zdmdQYXRoLnNldEF0dHJpYnV0ZShcImZpbGxcIixhKSx0aGlzLnNvdXJjZUJsb2NrXy5wYXRoT2JqZWN0LnN2Z1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsXCIjZmZmXCIpKX07QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudmFsdWVfOy9eIyguKVxcMSguKVxcMiguKVxcMyQvLnRlc3QoYSkmJihhPVwiI1wiK2FbMV0rYVszXSthWzVdKTtyZXR1cm4gYX07QmxvY2tseS5GaWVsZENvbG91ci5DT0xPVVJTPVwiI2ZmZmZmZiAjY2NjY2NjICNjMGMwYzAgIzk5OTk5OSAjNjY2NjY2ICMzMzMzMzMgIzAwMDAwMCAjZmZjY2NjICNmZjY2NjYgI2ZmMDAwMCAjY2MwMDAwICM5OTAwMDAgIzY2MDAwMCAjMzMwMDAwICNmZmNjOTkgI2ZmOTk2NiAjZmY5OTAwICNmZjY2MDAgI2NjNjYwMCAjOTkzMzAwICM2NjMzMDAgI2ZmZmY5OSAjZmZmZjY2ICNmZmNjNjYgI2ZmY2MzMyAjY2M5OTMzICM5OTY2MzMgIzY2MzMzMyAjZmZmZmNjICNmZmZmMzMgI2ZmZmYwMCAjZmZjYzAwICM5OTk5MDAgIzY2NjYwMCAjMzMzMzAwICM5OWZmOTkgIzY2ZmY5OSAjMzNmZjMzICMzM2NjMDAgIzAwOTkwMCAjMDA2NjAwICMwMDMzMDAgIzk5ZmZmZiAjMzNmZmZmICM2NmNjY2MgIzAwY2NjYyAjMzM5OTk5ICMzMzY2NjYgIzAwMzMzMyAjY2NmZmZmICM2NmZmZmYgIzMzY2NmZiAjMzM2NmZmICMzMzMzZmYgIzAwMDA5OSAjMDAwMDY2ICNjY2NjZmYgIzk5OTlmZiAjNjY2NmNjICM2NjMzZmYgIzY2MDBjYyAjMzMzMzk5ICMzMzAwOTkgI2ZmY2NmZiAjZmY5OWZmICNjYzY2Y2MgI2NjMzNjYyAjOTkzMzk5ICM2NjMzNjYgIzMzMDAzM1wiLnNwbGl0KFwiIFwiKTtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLkRFRkFVTFRfVkFMVUU9QmxvY2tseS5GaWVsZENvbG91ci5DT0xPVVJTWzBdO0Jsb2NrbHkuRmllbGRDb2xvdXIuVElUTEVTPVtdO0Jsb2NrbHkuRmllbGRDb2xvdXIuQ09MVU1OUz03O0Jsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLnNldENvbG91cnM9ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbG91cnNfPWE7YiYmKHRoaXMudGl0bGVzXz1iKTtyZXR1cm4gdGhpc307QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuc2V0Q29sdW1ucz1mdW5jdGlvbihhKXt0aGlzLmNvbHVtbnNfPWE7cmV0dXJuIHRoaXN9O1xuQmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuc2hvd0VkaXRvcl89ZnVuY3Rpb24oKXt0aGlzLnBpY2tlcl89dGhpcy5kcm9wZG93bkNyZWF0ZV8oKTtCbG9ja2x5LkRyb3BEb3duRGl2LmdldENvbnRlbnREaXYoKS5hcHBlbmRDaGlsZCh0aGlzLnBpY2tlcl8pO0Jsb2NrbHkuRHJvcERvd25EaXYuc2hvd1Bvc2l0aW9uZWRCeUZpZWxkKHRoaXMsdGhpcy5kcm9wZG93bkRpc3Bvc2VfLmJpbmQodGhpcykpO3RoaXMucGlja2VyXy5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfTtCbG9ja2x5LkZpZWxkQ29sb3VyLnByb3RvdHlwZS5vbkNsaWNrXz1mdW5jdGlvbihhKXthPShhPWEudGFyZ2V0KSYmYS5sYWJlbDtudWxsIT09YSYmKHRoaXMuc2V0VmFsdWUoYSksQmxvY2tseS5Ecm9wRG93bkRpdi5oaWRlSWZPd25lcih0aGlzKSl9O1xuQmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUub25LZXlEb3duXz1mdW5jdGlvbihhKXt2YXIgYj0hMTtpZihhLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlVQKXRoaXMubW92ZUhpZ2hsaWdodEJ5XygwLC0xKSxiPSEwO2Vsc2UgaWYoYS5rZXlDb2RlPT09QmxvY2tseS51dGlscy5LZXlDb2Rlcy5ET1dOKXRoaXMubW92ZUhpZ2hsaWdodEJ5XygwLDEpLGI9ITA7ZWxzZSBpZihhLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLkxFRlQpdGhpcy5tb3ZlSGlnaGxpZ2h0QnlfKC0xLDApLGI9ITA7ZWxzZSBpZihhLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLlJJR0hUKXRoaXMubW92ZUhpZ2hsaWdodEJ5XygxLDApLGI9ITA7ZWxzZSBpZihhLmtleUNvZGU9PT1CbG9ja2x5LnV0aWxzLktleUNvZGVzLkVOVEVSKXtpZihiPXRoaXMuZ2V0SGlnaGxpZ2h0ZWRfKCkpYj1iJiZiLmxhYmVsLG51bGwhPT1iJiZ0aGlzLnNldFZhbHVlKGIpO0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKTtcbmI9ITB9YiYmYS5zdG9wUHJvcGFnYXRpb24oKX07QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUub25CbG9ja2x5QWN0aW9uPWZ1bmN0aW9uKGEpe2lmKHRoaXMucGlja2VyXyl7aWYoYT09PUJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fUFJFVklPVVMpcmV0dXJuIHRoaXMubW92ZUhpZ2hsaWdodEJ5XygwLC0xKSwhMDtpZihhPT09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9ORVhUKXJldHVybiB0aGlzLm1vdmVIaWdobGlnaHRCeV8oMCwxKSwhMDtpZihhPT09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9PVVQpcmV0dXJuIHRoaXMubW92ZUhpZ2hsaWdodEJ5XygtMSwwKSwhMDtpZihhPT09QmxvY2tseS5uYXZpZ2F0aW9uLkFDVElPTl9JTilyZXR1cm4gdGhpcy5tb3ZlSGlnaGxpZ2h0QnlfKDEsMCksITB9cmV0dXJuIEJsb2NrbHkuRmllbGRDb2xvdXIuc3VwZXJDbGFzc18ub25CbG9ja2x5QWN0aW9uLmNhbGwodGhpcyxhKX07XG5CbG9ja2x5LkZpZWxkQ29sb3VyLnByb3RvdHlwZS5tb3ZlSGlnaGxpZ2h0QnlfPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jb2xvdXJzX3x8QmxvY2tseS5GaWVsZENvbG91ci5DT0xPVVJTLGQ9dGhpcy5jb2x1bW5zX3x8QmxvY2tseS5GaWVsZENvbG91ci5DT0xVTU5TLGU9dGhpcy5oaWdobGlnaHRlZEluZGV4XyVkLGY9TWF0aC5mbG9vcih0aGlzLmhpZ2hsaWdodGVkSW5kZXhfL2QpO2UrPWE7Zis9YjswPmE/MD5lJiYwPGY/KGU9ZC0xLGYtLSk6MD5lJiYoZT0wKTowPGE/ZT5kLTEmJmY8TWF0aC5mbG9vcihjLmxlbmd0aC9kKS0xPyhlPTAsZisrKTplPmQtMSYmZS0tOjA+Yj8wPmYmJihmPTApOjA8YiYmZj5NYXRoLmZsb29yKGMubGVuZ3RoL2QpLTEmJihmPU1hdGguZmxvb3IoYy5sZW5ndGgvZCktMSk7dGhpcy5zZXRIaWdobGlnaHRlZENlbGxfKHRoaXMucGlja2VyXy5jaGlsZE5vZGVzW2ZdLmNoaWxkTm9kZXNbZV0sZipkK2UpfTtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLm9uTW91c2VNb3ZlXz1mdW5jdGlvbihhKXt2YXIgYj0oYT1hLnRhcmdldCkmJk51bWJlcihhLmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIikpO251bGwhPT1iJiZiIT09dGhpcy5oaWdobGlnaHRlZEluZGV4XyYmdGhpcy5zZXRIaWdobGlnaHRlZENlbGxfKGEsYil9O0Jsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLm9uTW91c2VFbnRlcl89ZnVuY3Rpb24oKXt0aGlzLnBpY2tlcl8uZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KX07QmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUub25Nb3VzZUxlYXZlXz1mdW5jdGlvbigpe3RoaXMucGlja2VyXy5ibHVyKCk7dmFyIGE9dGhpcy5nZXRIaWdobGlnaHRlZF8oKTthJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLFwiYmxvY2tseUNvbG91ckhpZ2hsaWdodGVkXCIpfTtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmdldEhpZ2hsaWdodGVkXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29sdW1uc198fEJsb2NrbHkuRmllbGRDb2xvdXIuQ09MVU1OUyxiPXRoaXMucGlja2VyXy5jaGlsZE5vZGVzW01hdGguZmxvb3IodGhpcy5oaWdobGlnaHRlZEluZGV4Xy9hKV07cmV0dXJuIGI/Yi5jaGlsZE5vZGVzW3RoaXMuaGlnaGxpZ2h0ZWRJbmRleF8lYV06bnVsbH07XG5CbG9ja2x5LkZpZWxkQ29sb3VyLnByb3RvdHlwZS5zZXRIaWdobGlnaHRlZENlbGxfPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRIaWdobGlnaHRlZF8oKTtjJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhjLFwiYmxvY2tseUNvbG91ckhpZ2hsaWdodGVkXCIpO0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKGEsXCJibG9ja2x5Q29sb3VySGlnaGxpZ2h0ZWRcIik7dGhpcy5oaWdobGlnaHRlZEluZGV4Xz1iO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZSh0aGlzLnBpY2tlcl8sQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLkFDVElWRURFU0NFTkRBTlQsYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSl9O1xuQmxvY2tseS5GaWVsZENvbG91ci5wcm90b3R5cGUuZHJvcGRvd25DcmVhdGVfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb2x1bW5zX3x8QmxvY2tseS5GaWVsZENvbG91ci5DT0xVTU5TLGI9dGhpcy5jb2xvdXJzX3x8QmxvY2tseS5GaWVsZENvbG91ci5DT0xPVVJTLGM9dGhpcy50aXRsZXNffHxCbG9ja2x5LkZpZWxkQ29sb3VyLlRJVExFUyxkPXRoaXMuZ2V0VmFsdWUoKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtlLmNsYXNzTmFtZT1cImJsb2NrbHlDb2xvdXJUYWJsZVwiO2UudGFiSW5kZXg9MDtlLmRpcj1cImx0clwiO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRSb2xlKGUsQmxvY2tseS51dGlscy5hcmlhLlJvbGUuR1JJRCk7QmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKGUsQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLkVYUEFOREVELCEwKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoZSxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuUk9XQ09VTlQsTWF0aC5mbG9vcihiLmxlbmd0aC9cbmEpKTtCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoZSxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuQ09MQ09VTlQsYSk7Zm9yKHZhciBmLGc9MDtnPGIubGVuZ3RoO2crKyl7MD09ZyVhJiYoZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIiksQmxvY2tseS51dGlscy5hcmlhLnNldFJvbGUoZixCbG9ja2x5LnV0aWxzLmFyaWEuUm9sZS5ST1cpLGUuYXBwZW5kQ2hpbGQoZikpO3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtmLmFwcGVuZENoaWxkKGgpO2gubGFiZWw9YltnXTtoLnRpdGxlPWNbZ118fGJbZ107aC5pZD1CbG9ja2x5LnV0aWxzLklkR2VuZXJhdG9yLmdldE5leHRVbmlxdWVJZCgpO2guc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLGcpO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRSb2xlKGgsQmxvY2tseS51dGlscy5hcmlhLlJvbGUuR1JJRENFTEwpO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZShoLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5MQUJFTCxcbmJbZ10pO0Jsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZShoLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5TRUxFQ1RFRCxiW2ddPT1kKTtoLnN0eWxlLmJhY2tncm91bmRDb2xvcj1iW2ddO2JbZ109PWQmJihoLmNsYXNzTmFtZT1cImJsb2NrbHlDb2xvdXJTZWxlY3RlZFwiLHRoaXMuaGlnaGxpZ2h0ZWRJbmRleF89Zyl9dGhpcy5vbkNsaWNrV3JhcHBlcl89QmxvY2tseS5iaW5kRXZlbnRXaXRoQ2hlY2tzXyhlLFwiY2xpY2tcIix0aGlzLHRoaXMub25DbGlja18sITApO3RoaXMub25Nb3VzZU1vdmVXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGUsXCJtb3VzZW1vdmVcIix0aGlzLHRoaXMub25Nb3VzZU1vdmVfLCEwKTt0aGlzLm9uTW91c2VFbnRlcldyYXBwZXJfPUJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oZSxcIm1vdXNlZW50ZXJcIix0aGlzLHRoaXMub25Nb3VzZUVudGVyXywhMCk7dGhpcy5vbk1vdXNlTGVhdmVXcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGUsXG5cIm1vdXNlbGVhdmVcIix0aGlzLHRoaXMub25Nb3VzZUxlYXZlXywhMCk7dGhpcy5vbktleURvd25XcmFwcGVyXz1CbG9ja2x5LmJpbmRFdmVudFdpdGhDaGVja3NfKGUsXCJrZXlkb3duXCIsdGhpcyx0aGlzLm9uS2V5RG93bl8pO3JldHVybiBlfTtcbkJsb2NrbHkuRmllbGRDb2xvdXIucHJvdG90eXBlLmRyb3Bkb3duRGlzcG9zZV89ZnVuY3Rpb24oKXt0aGlzLm9uQ2xpY2tXcmFwcGVyXyYmKEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMub25DbGlja1dyYXBwZXJfKSx0aGlzLm9uQ2xpY2tXcmFwcGVyXz1udWxsKTt0aGlzLm9uTW91c2VNb3ZlV3JhcHBlcl8mJihCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm9uTW91c2VNb3ZlV3JhcHBlcl8pLHRoaXMub25Nb3VzZU1vdmVXcmFwcGVyXz1udWxsKTt0aGlzLm9uTW91c2VFbnRlcldyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlRW50ZXJXcmFwcGVyXyksdGhpcy5vbk1vdXNlRW50ZXJXcmFwcGVyXz1udWxsKTt0aGlzLm9uTW91c2VMZWF2ZVdyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbk1vdXNlTGVhdmVXcmFwcGVyXyksdGhpcy5vbk1vdXNlTGVhdmVXcmFwcGVyXz1udWxsKTt0aGlzLm9uS2V5RG93bldyYXBwZXJfJiYoQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5vbktleURvd25XcmFwcGVyXyksXG50aGlzLm9uS2V5RG93bldyYXBwZXJfPW51bGwpO3RoaXMuaGlnaGxpZ2h0ZWRJbmRleF89dGhpcy5waWNrZXJfPW51bGx9O1xuQmxvY2tseS5Dc3MucmVnaXN0ZXIoW1wiLmJsb2NrbHlDb2xvdXJUYWJsZSB7XCIsXCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1wiLFwiZGlzcGxheTogYmxvY2s7XCIsXCJvdXRsaW5lOiBub25lO1wiLFwicGFkZGluZzogMXB4O1wiLFwifVwiLFwiLmJsb2NrbHlDb2xvdXJUYWJsZT50cj50ZCB7XCIsXCJib3JkZXI6IC41cHggc29saWQgIzg4ODtcIixcImJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIsXCJjdXJzb3I6IHBvaW50ZXI7XCIsXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCIsXCJoZWlnaHQ6IDIwcHg7XCIsXCJwYWRkaW5nOiAwO1wiLFwid2lkdGg6IDIwcHg7XCIsXCJ9XCIsXCIuYmxvY2tseUNvbG91clRhYmxlPnRyPnRkLmJsb2NrbHlDb2xvdXJIaWdobGlnaHRlZCB7XCIsXCJib3JkZXItY29sb3I6ICNlZWU7XCIsXCJib3gtc2hhZG93OiAycHggMnB4IDdweCAycHggcmdiYSgwLDAsMCwuMyk7XCIsXCJwb3NpdGlvbjogcmVsYXRpdmU7XCIsXCJ9XCIsXCIuYmxvY2tseUNvbG91clNlbGVjdGVkLCAuYmxvY2tseUNvbG91clNlbGVjdGVkOmhvdmVyIHtcIixcblwiYm9yZGVyLWNvbG9yOiAjZWVlICFpbXBvcnRhbnQ7XCIsXCJvdXRsaW5lOiAxcHggc29saWQgIzMzMztcIixcInBvc2l0aW9uOiByZWxhdGl2ZTtcIixcIn1cIl0pO0Jsb2NrbHkuZmllbGRSZWdpc3RyeS5yZWdpc3RlcihcImZpZWxkX2NvbG91clwiLEJsb2NrbHkuRmllbGRDb2xvdXIpO0Jsb2NrbHkuRmllbGREcm9wZG93bj1mdW5jdGlvbihhLGIsYyl7XCJmdW5jdGlvblwiIT10eXBlb2YgYSYmQmxvY2tseS5GaWVsZERyb3Bkb3duLnZhbGlkYXRlT3B0aW9uc18oYSk7dGhpcy5tZW51R2VuZXJhdG9yXz1hO3RoaXMuc3VmZml4RmllbGQ9dGhpcy5wcmVmaXhGaWVsZD10aGlzLmdlbmVyYXRlZE9wdGlvbnNfPW51bGw7dGhpcy50cmltT3B0aW9uc18oKTt0aGlzLnNlbGVjdGVkT3B0aW9uXz10aGlzLmdldE9wdGlvbnMoITEpWzBdO0Jsb2NrbHkuRmllbGREcm9wZG93bi5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdGhpcy5zZWxlY3RlZE9wdGlvbl9bMV0sYixjKTt0aGlzLnN2Z0Fycm93Xz10aGlzLmFycm93Xz10aGlzLmltYWdlRWxlbWVudF89dGhpcy5tZW51Xz10aGlzLnNlbGVjdGVkTWVudUl0ZW1fPW51bGx9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuRmllbGREcm9wZG93bixCbG9ja2x5LkZpZWxkKTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5mcm9tSnNvbj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuRmllbGREcm9wZG93bihhLm9wdGlvbnMsdm9pZCAwLGEpfTtCbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLlNFUklBTElaQUJMRT0hMDtCbG9ja2x5LkZpZWxkRHJvcGRvd24uQ0hFQ0tNQVJLX09WRVJIQU5HPTI1O0Jsb2NrbHkuRmllbGREcm9wZG93bi5NQVhfTUVOVV9IRUlHSFRfVkg9LjQ1O0Jsb2NrbHkuRmllbGREcm9wZG93bi5JTUFHRV9ZX09GRlNFVD01O0Jsb2NrbHkuRmllbGREcm9wZG93bi5JTUFHRV9ZX1BBRERJTkc9MipCbG9ja2x5LkZpZWxkRHJvcGRvd24uSU1BR0VfWV9PRkZTRVQ7QmxvY2tseS5GaWVsZERyb3Bkb3duLkFSUk9XX0NIQVI9QmxvY2tseS51dGlscy51c2VyQWdlbnQuQU5EUk9JRD9cIlxcdTI1YmNcIjpcIlxcdTI1YmVcIjtCbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLkNVUlNPUj1cImRlZmF1bHRcIjtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUuaW5pdFZpZXc9ZnVuY3Rpb24oKXt0aGlzLnNob3VsZEFkZEJvcmRlclJlY3RfKCk/dGhpcy5jcmVhdGVCb3JkZXJSZWN0XygpOnRoaXMuY2xpY2tUYXJnZXRfPXRoaXMuc291cmNlQmxvY2tfLmdldFN2Z1Jvb3QoKTt0aGlzLmNyZWF0ZVRleHRFbGVtZW50XygpO3RoaXMuaW1hZ2VFbGVtZW50Xz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLklNQUdFLHt9LHRoaXMuZmllbGRHcm91cF8pO3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XP3RoaXMuY3JlYXRlU1ZHQXJyb3dfKCk6dGhpcy5jcmVhdGVUZXh0QXJyb3dfKCk7dGhpcy5ib3JkZXJSZWN0XyYmQmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy5ib3JkZXJSZWN0XyxcImJsb2NrbHlEcm9wZG93blJlY3RcIil9O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5zaG91bGRBZGRCb3JkZXJSZWN0Xz1mdW5jdGlvbigpe3JldHVybiF0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0RST1BET1dOX05PX0JPUkRFUl9SRUNUX1NIQURPV3x8dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9EUk9QRE9XTl9OT19CT1JERVJfUkVDVF9TSEFET1cmJiF0aGlzLnNvdXJjZUJsb2NrXy5pc1NoYWRvdygpfTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUuY3JlYXRlVGV4dEFycm93Xz1mdW5jdGlvbigpe3RoaXMuYXJyb3dfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuVFNQQU4se30sdGhpcy50ZXh0RWxlbWVudF8pO3RoaXMuYXJyb3dfLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMuc291cmNlQmxvY2tfLlJUTD9CbG9ja2x5LkZpZWxkRHJvcGRvd24uQVJST1dfQ0hBUitcIiBcIjpcIiBcIitCbG9ja2x5LkZpZWxkRHJvcGRvd24uQVJST1dfQ0hBUikpO3RoaXMuc291cmNlQmxvY2tfLlJUTD90aGlzLnRleHRFbGVtZW50Xy5pbnNlcnRCZWZvcmUodGhpcy5hcnJvd18sdGhpcy50ZXh0Q29udGVudF8pOnRoaXMudGV4dEVsZW1lbnRfLmFwcGVuZENoaWxkKHRoaXMuYXJyb3dfKX07XG5CbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLmNyZWF0ZVNWR0Fycm93Xz1mdW5jdGlvbigpe3RoaXMuc3ZnQXJyb3dfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuSU1BR0Use2hlaWdodDp0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0RST1BET1dOX1NWR19BUlJPV19TSVpFK1wicHhcIix3aWR0aDp0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0RST1BET1dOX1NWR19BUlJPV19TSVpFK1wicHhcIn0sdGhpcy5maWVsZEdyb3VwXyk7dGhpcy5zdmdBcnJvd18uc2V0QXR0cmlidXRlTlMoQmxvY2tseS51dGlscy5kb20uWExJTktfTlMsXCJ4bGluazpocmVmXCIsdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9EUk9QRE9XTl9TVkdfQVJST1dfREFUQVVSSSl9O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5zaG93RWRpdG9yXz1mdW5jdGlvbihhKXt0aGlzLm1lbnVfPXRoaXMuZHJvcGRvd25DcmVhdGVfKCk7dGhpcy5tZW51Xy5vcGVuaW5nQ29vcmRzPWEmJlwibnVtYmVyXCI9PT10eXBlb2YgYS5jbGllbnRYP25ldyBCbG9ja2x5LnV0aWxzLkNvb3JkaW5hdGUoYS5jbGllbnRYLGEuY2xpZW50WSk6bnVsbDt0aGlzLm1lbnVfLnJlbmRlcihCbG9ja2x5LkRyb3BEb3duRGl2LmdldENvbnRlbnREaXYoKSk7YT10aGlzLm1lbnVfLmdldEVsZW1lbnQoKTtCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLFwiYmxvY2tseURyb3Bkb3duTWVudVwiKTtpZih0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0RST1BET1dOX0NPTE9VUkVEX0RJVil7YT10aGlzLnNvdXJjZUJsb2NrXy5pc1NoYWRvdygpP3RoaXMuc291cmNlQmxvY2tfLmdldFBhcmVudCgpLmdldENvbG91cigpOnRoaXMuc291cmNlQmxvY2tfLmdldENvbG91cigpO3ZhciBiPXRoaXMuc291cmNlQmxvY2tfLmlzU2hhZG93KCk/XG50aGlzLnNvdXJjZUJsb2NrXy5nZXRQYXJlbnQoKS5zdHlsZS5jb2xvdXJUZXJ0aWFyeTp0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJUZXJ0aWFyeTtCbG9ja2x5LkRyb3BEb3duRGl2LnNldENvbG91cihhLGIpfUJsb2NrbHkuRHJvcERvd25EaXYuc2hvd1Bvc2l0aW9uZWRCeUZpZWxkKHRoaXMsdGhpcy5kcm9wZG93bkRpc3Bvc2VfLmJpbmQodGhpcykpO3RoaXMubWVudV8uZm9jdXMoKTt0aGlzLnNlbGVjdGVkTWVudUl0ZW1fJiZ0aGlzLm1lbnVfLnNldEhpZ2hsaWdodGVkKHRoaXMuc2VsZWN0ZWRNZW51SXRlbV8pO3RoaXMuYXBwbHlDb2xvdXIoKX07XG5CbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLmRyb3Bkb3duQ3JlYXRlXz1mdW5jdGlvbigpe3ZhciBhPW5ldyBCbG9ja2x5Lk1lbnU7YS5zZXRSb2xlKEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLkxJU1RCT1gpO3ZhciBiPXRoaXMuZ2V0T3B0aW9ucyghMSk7dGhpcy5zZWxlY3RlZE1lbnVJdGVtXz1udWxsO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdWzBdLGU9YltjXVsxXTtpZihcIm9iamVjdFwiPT10eXBlb2YgZCl7dmFyIGY9bmV3IEltYWdlKGQud2lkdGgsZC5oZWlnaHQpO2Yuc3JjPWQuc3JjO2YuYWx0PWQuYWx0fHxcIlwiO2Q9Zn1kPW5ldyBCbG9ja2x5Lk1lbnVJdGVtKGQsZSk7ZC5zZXRSb2xlKEJsb2NrbHkudXRpbHMuYXJpYS5Sb2xlLk9QVElPTik7ZC5zZXRSaWdodFRvTGVmdCh0aGlzLnNvdXJjZUJsb2NrXy5SVEwpO2Quc2V0Q2hlY2thYmxlKCEwKTthLmFkZENoaWxkKGQpO2Quc2V0Q2hlY2tlZChlPT10aGlzLnZhbHVlXyk7ZT09dGhpcy52YWx1ZV8mJlxuKHRoaXMuc2VsZWN0ZWRNZW51SXRlbV89ZCk7ZC5vbkFjdGlvbih0aGlzLmhhbmRsZU1lbnVBY3Rpb25FdmVudF8sdGhpcyl9cmV0dXJuIGF9O0Jsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUuZHJvcGRvd25EaXNwb3NlXz1mdW5jdGlvbigpe3RoaXMubWVudV8mJnRoaXMubWVudV8uZGlzcG9zZSgpO3RoaXMuc2VsZWN0ZWRNZW51SXRlbV89dGhpcy5tZW51Xz1udWxsO3RoaXMuYXBwbHlDb2xvdXIoKX07QmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5oYW5kbGVNZW51QWN0aW9uRXZlbnRfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRHJvcERvd25EaXYuaGlkZUlmT3duZXIodGhpcywhMCk7dGhpcy5vbkl0ZW1TZWxlY3RlZF8odGhpcy5tZW51XyxhKX07QmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5vbkl0ZW1TZWxlY3RlZF89ZnVuY3Rpb24oYSxiKXt0aGlzLnNldFZhbHVlKGIuZ2V0VmFsdWUoKSl9O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS50cmltT3B0aW9uc189ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1lbnVHZW5lcmF0b3JfO2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgYj0hMSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY11bMF07XCJzdHJpbmdcIj09dHlwZW9mIGQ/YVtjXVswXT1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhkKToobnVsbCE9ZC5hbHQmJihhW2NdWzBdLmFsdD1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhkLmFsdCkpLGI9ITApfWlmKCEoYnx8Mj5hLmxlbmd0aCkpe2I9W107Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKyliLnB1c2goYVtjXVswXSk7Yz1CbG9ja2x5LnV0aWxzLnN0cmluZy5zaG9ydGVzdFN0cmluZ0xlbmd0aChiKTtkPUJsb2NrbHkudXRpbHMuc3RyaW5nLmNvbW1vbldvcmRQcmVmaXgoYixjKTt2YXIgZT1CbG9ja2x5LnV0aWxzLnN0cmluZy5jb21tb25Xb3JkU3VmZml4KGIsXG5jKTshZCYmIWV8fGM8PWQrZXx8KGQmJih0aGlzLnByZWZpeEZpZWxkPWJbMF0uc3Vic3RyaW5nKDAsZC0xKSksZSYmKHRoaXMuc3VmZml4RmllbGQ9YlswXS5zdWJzdHIoMS1lKSksdGhpcy5tZW51R2VuZXJhdG9yXz1CbG9ja2x5LkZpZWxkRHJvcGRvd24uYXBwbHlUcmltXyhhLGQsZSkpfX19O0Jsb2NrbHkuRmllbGREcm9wZG93bi5hcHBseVRyaW1fPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9W10sZT0wO2U8YS5sZW5ndGg7ZSsrKXt2YXIgZj1hW2VdWzBdLGc9YVtlXVsxXTtmPWYuc3Vic3RyaW5nKGIsZi5sZW5ndGgtYyk7ZFtlXT1bZixnXX1yZXR1cm4gZH07QmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5pc09wdGlvbkxpc3REeW5hbWljPWZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5tZW51R2VuZXJhdG9yX307XG5CbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNPcHRpb25MaXN0RHluYW1pYygpPyh0aGlzLmdlbmVyYXRlZE9wdGlvbnNfJiZhfHwodGhpcy5nZW5lcmF0ZWRPcHRpb25zXz10aGlzLm1lbnVHZW5lcmF0b3JfLmNhbGwodGhpcyksQmxvY2tseS5GaWVsZERyb3Bkb3duLnZhbGlkYXRlT3B0aW9uc18odGhpcy5nZW5lcmF0ZWRPcHRpb25zXykpLHRoaXMuZ2VuZXJhdGVkT3B0aW9uc18pOnRoaXMubWVudUdlbmVyYXRvcl99O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5kb0NsYXNzVmFsaWRhdGlvbl89ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGM9dGhpcy5nZXRPcHRpb25zKCEwKSxkPTAsZTtlPWNbZF07ZCsrKWlmKGVbMV09PWEpe2I9ITA7YnJlYWt9cmV0dXJuIGI/YToodGhpcy5zb3VyY2VCbG9ja18mJmNvbnNvbGUud2FybihcIkNhbm5vdCBzZXQgdGhlIGRyb3Bkb3duJ3MgdmFsdWUgdG8gYW4gdW5hdmFpbGFibGUgb3B0aW9uLiBCbG9jayB0eXBlOiBcIit0aGlzLnNvdXJjZUJsb2NrXy50eXBlK1wiLCBGaWVsZCBuYW1lOiBcIit0aGlzLm5hbWUrXCIsIFZhbHVlOiBcIithKSxudWxsKX07XG5CbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLmRvVmFsdWVVcGRhdGVfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRmllbGREcm9wZG93bi5zdXBlckNsYXNzXy5kb1ZhbHVlVXBkYXRlXy5jYWxsKHRoaXMsYSk7YT10aGlzLmdldE9wdGlvbnMoITApO2Zvcih2YXIgYj0wLGM7Yz1hW2JdO2IrKyljWzFdPT10aGlzLnZhbHVlXyYmKHRoaXMuc2VsZWN0ZWRPcHRpb25fPWMpfTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUuYXBwbHlDb2xvdXI9ZnVuY3Rpb24oKXt0aGlzLmJvcmRlclJlY3RfJiYodGhpcy5ib3JkZXJSZWN0Xy5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIix0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJUZXJ0aWFyeSksdGhpcy5tZW51Xz90aGlzLmJvcmRlclJlY3RfLnNldEF0dHJpYnV0ZShcImZpbGxcIix0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJUZXJ0aWFyeSk6dGhpcy5ib3JkZXJSZWN0Xy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsXCJ0cmFuc3BhcmVudFwiKSk7dGhpcy5zb3VyY2VCbG9ja18mJnRoaXMuYXJyb3dfJiYodGhpcy5zb3VyY2VCbG9ja18uaXNTaGFkb3coKT90aGlzLmFycm93Xy5zdHlsZS5maWxsPXRoaXMuc291cmNlQmxvY2tfLnN0eWxlLmNvbG91clNlY29uZGFyeTp0aGlzLmFycm93Xy5zdHlsZS5maWxsPXRoaXMuc291cmNlQmxvY2tfLnN0eWxlLmNvbG91clByaW1hcnkpfTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUucmVuZGVyXz1mdW5jdGlvbigpe3RoaXMudGV4dENvbnRlbnRfLm5vZGVWYWx1ZT1cIlwiO3RoaXMuaW1hZ2VFbGVtZW50Xy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBhPXRoaXMuc2VsZWN0ZWRPcHRpb25fJiZ0aGlzLnNlbGVjdGVkT3B0aW9uX1swXTthJiZcIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLnJlbmRlclNlbGVjdGVkSW1hZ2VfKGEpOnRoaXMucmVuZGVyU2VsZWN0ZWRUZXh0XygpO3RoaXMucG9zaXRpb25Cb3JkZXJSZWN0XygpfTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUucmVuZGVyU2VsZWN0ZWRJbWFnZV89ZnVuY3Rpb24oYSl7dGhpcy5pbWFnZUVsZW1lbnRfLnN0eWxlLmRpc3BsYXk9XCJcIjt0aGlzLmltYWdlRWxlbWVudF8uc2V0QXR0cmlidXRlTlMoQmxvY2tseS51dGlscy5kb20uWExJTktfTlMsXCJ4bGluazpocmVmXCIsYS5zcmMpO3RoaXMuaW1hZ2VFbGVtZW50Xy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixhLmhlaWdodCk7dGhpcy5pbWFnZUVsZW1lbnRfLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYS53aWR0aCk7dmFyIGI9TnVtYmVyKGEuaGVpZ2h0KTthPU51bWJlcihhLndpZHRoKTt2YXIgYz0hIXRoaXMuYm9yZGVyUmVjdF8sZD1NYXRoLm1heChjP3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfRFJPUERPV05fQk9SREVSX1JFQ1RfSEVJR0hUOjAsYitCbG9ja2x5LkZpZWxkRHJvcGRvd24uSU1BR0VfWV9QQURESU5HKTtjPWM/dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9YX1BBRERJTkc6XG4wO3ZhciBlPXRoaXMuc3ZnQXJyb3dfP3RoaXMucG9zaXRpb25TVkdBcnJvd18oYStjLGQvMi10aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0RST1BET1dOX1NWR19BUlJPV19TSVpFLzIpOkJsb2NrbHkudXRpbHMuZG9tLmdldEZhc3RUZXh0V2lkdGgodGhpcy5hcnJvd18sdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9URVhUX0ZPTlRTSVpFLHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfVEVYVF9GT05UV0VJR0hULHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfVEVYVF9GT05URkFNSUxZKTt0aGlzLnNpemVfLndpZHRoPWErZSsyKmM7dGhpcy5zaXplXy5oZWlnaHQ9ZDt2YXIgZj0wO3RoaXMuc291cmNlQmxvY2tfLlJUTD90aGlzLmltYWdlRWxlbWVudF8uc2V0QXR0cmlidXRlKFwieFwiLGMrZSk6KGY9YStlLHRoaXMudGV4dEVsZW1lbnRfLnNldEF0dHJpYnV0ZShcInRleHQtYW5jaG9yXCIsXCJlbmRcIiksdGhpcy5pbWFnZUVsZW1lbnRfLnNldEF0dHJpYnV0ZShcInhcIixjKSk7dGhpcy5pbWFnZUVsZW1lbnRfLnNldEF0dHJpYnV0ZShcInlcIixcbmQvMi1iLzIpO3RoaXMucG9zaXRpb25UZXh0RWxlbWVudF8oZitjLGErZSl9O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXJTZWxlY3RlZFRleHRfPWZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudF8ubm9kZVZhbHVlPXRoaXMuZ2V0RGlzcGxheVRleHRfKCk7QmxvY2tseS51dGlscy5kb20uYWRkQ2xhc3ModGhpcy50ZXh0RWxlbWVudF8sXCJibG9ja2x5RHJvcGRvd25UZXh0XCIpO3RoaXMudGV4dEVsZW1lbnRfLnNldEF0dHJpYnV0ZShcInRleHQtYW5jaG9yXCIsXCJzdGFydFwiKTt2YXIgYT0hIXRoaXMuYm9yZGVyUmVjdF8sYj1NYXRoLm1heChhP3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfRFJPUERPV05fQk9SREVSX1JFQ1RfSEVJR0hUOjAsdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9URVhUX0hFSUdIVCksYz1CbG9ja2x5LnV0aWxzLmRvbS5nZXRGYXN0VGV4dFdpZHRoKHRoaXMudGV4dEVsZW1lbnRfLHRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfVEVYVF9GT05UU0laRSx0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX1RFWFRfRk9OVFdFSUdIVCxcbnRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfVEVYVF9GT05URkFNSUxZKTthPWE/dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9YX1BBRERJTkc6MDt2YXIgZD0wO3RoaXMuc3ZnQXJyb3dfJiYoZD10aGlzLnBvc2l0aW9uU1ZHQXJyb3dfKGMrYSxiLzItdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9EUk9QRE9XTl9TVkdfQVJST1dfU0laRS8yKSk7dGhpcy5zaXplXy53aWR0aD1jK2QrMiphO3RoaXMuc2l6ZV8uaGVpZ2h0PWI7dGhpcy5wb3NpdGlvblRleHRFbGVtZW50XyhhLGMpfTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUucG9zaXRpb25TVkdBcnJvd189ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zdmdBcnJvd18pcmV0dXJuIDA7dmFyIGM9dGhpcy5ib3JkZXJSZWN0Xz90aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1hfUEFERElORzowLGQ9dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9EUk9QRE9XTl9TVkdfQVJST1dfUEFERElORyxlPXRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XX1NJWkU7dGhpcy5zdmdBcnJvd18uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrKHRoaXMuc291cmNlQmxvY2tfLlJUTD9jOmErZCkrXCIsXCIrYitcIilcIik7cmV0dXJuIGUrZH07XG5CbG9ja2x5LkZpZWxkRHJvcGRvd24ucHJvdG90eXBlLmdldFRleHRfPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsZWN0ZWRPcHRpb25fKXJldHVybiBudWxsO3ZhciBhPXRoaXMuc2VsZWN0ZWRPcHRpb25fWzBdO3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP2EuYWx0OmF9O1xuQmxvY2tseS5GaWVsZERyb3Bkb3duLnZhbGlkYXRlT3B0aW9uc189ZnVuY3Rpb24oYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgVHlwZUVycm9yKFwiRmllbGREcm9wZG93biBvcHRpb25zIG11c3QgYmUgYW4gYXJyYXkuXCIpO2lmKCFhLmxlbmd0aCl0aHJvdyBUeXBlRXJyb3IoXCJGaWVsZERyb3Bkb3duIG9wdGlvbnMgbXVzdCBub3QgYmUgYW4gZW1wdHkgYXJyYXkuXCIpO2Zvcih2YXIgYj0hMSxjPTA7YzxhLmxlbmd0aDsrK2Mpe3ZhciBkPWFbY107QXJyYXkuaXNBcnJheShkKT9cInN0cmluZ1wiIT10eXBlb2YgZFsxXT8oYj0hMCxjb25zb2xlLmVycm9yKFwiSW52YWxpZCBvcHRpb25bXCIrYytcIl06IEVhY2ggRmllbGREcm9wZG93biBvcHRpb24gaWQgbXVzdCBiZSBhIHN0cmluZy4gRm91bmQgXCIrZFsxXStcIiBpbjogXCIsZCkpOmRbMF0mJlwic3RyaW5nXCIhPXR5cGVvZiBkWzBdJiZcInN0cmluZ1wiIT10eXBlb2YgZFswXS5zcmMmJihiPSEwLGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIG9wdGlvbltcIitcbmMrXCJdOiBFYWNoIEZpZWxkRHJvcGRvd24gb3B0aW9uIG11c3QgaGF2ZSBhIHN0cmluZyBsYWJlbCBvciBpbWFnZSBkZXNjcmlwdGlvbi4gRm91bmRcIitkWzBdK1wiIGluOiBcIixkKSk6KGI9ITAsY29uc29sZS5lcnJvcihcIkludmFsaWQgb3B0aW9uW1wiK2MrXCJdOiBFYWNoIEZpZWxkRHJvcGRvd24gb3B0aW9uIG11c3QgYmUgYW4gYXJyYXkuIEZvdW5kOiBcIixkKSl9aWYoYil0aHJvdyBUeXBlRXJyb3IoXCJGb3VuZCBpbnZhbGlkIEZpZWxkRHJvcGRvd24gb3B0aW9ucy5cIik7fTtcbkJsb2NrbHkuRmllbGREcm9wZG93bi5wcm90b3R5cGUub25CbG9ja2x5QWN0aW9uPWZ1bmN0aW9uKGEpe2lmKHRoaXMubWVudV8pe2lmKGE9PT1CbG9ja2x5Lm5hdmlnYXRpb24uQUNUSU9OX1BSRVZJT1VTKXJldHVybiB0aGlzLm1lbnVfLmhpZ2hsaWdodFByZXZpb3VzKCksITA7aWYoYT09PUJsb2NrbHkubmF2aWdhdGlvbi5BQ1RJT05fTkVYVClyZXR1cm4gdGhpcy5tZW51Xy5oaWdobGlnaHROZXh0KCksITB9cmV0dXJuIEJsb2NrbHkuRmllbGREcm9wZG93bi5zdXBlckNsYXNzXy5vbkJsb2NrbHlBY3Rpb24uY2FsbCh0aGlzLGEpfTtCbG9ja2x5LmZpZWxkUmVnaXN0cnkucmVnaXN0ZXIoXCJmaWVsZF9kcm9wZG93blwiLEJsb2NrbHkuRmllbGREcm9wZG93bik7QmxvY2tseS5GaWVsZExhYmVsU2VyaWFsaXphYmxlPWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LkZpZWxkTGFiZWxTZXJpYWxpemFibGUuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5GaWVsZExhYmVsU2VyaWFsaXphYmxlLEJsb2NrbHkuRmllbGRMYWJlbCk7QmxvY2tseS5GaWVsZExhYmVsU2VyaWFsaXphYmxlLmZyb21Kc29uPWZ1bmN0aW9uKGEpe3ZhciBiPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEudGV4dCk7cmV0dXJuIG5ldyBCbG9ja2x5LkZpZWxkTGFiZWxTZXJpYWxpemFibGUoYix2b2lkIDAsYSl9O0Jsb2NrbHkuRmllbGRMYWJlbFNlcmlhbGl6YWJsZS5wcm90b3R5cGUuRURJVEFCTEU9ITE7QmxvY2tseS5GaWVsZExhYmVsU2VyaWFsaXphYmxlLnByb3RvdHlwZS5TRVJJQUxJWkFCTEU9ITA7XG5CbG9ja2x5LmZpZWxkUmVnaXN0cnkucmVnaXN0ZXIoXCJmaWVsZF9sYWJlbF9zZXJpYWxpemFibGVcIixCbG9ja2x5LkZpZWxkTGFiZWxTZXJpYWxpemFibGUpO0Jsb2NrbHkuRmllbGRJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtpZighYSl0aHJvdyBFcnJvcihcIlNyYyB2YWx1ZSBvZiBhbiBpbWFnZSBmaWVsZCBpcyByZXF1aXJlZFwiKTthPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGEpO2M9TnVtYmVyKEJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGMpKTtiPU51bWJlcihCbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhiKSk7aWYoaXNOYU4oYyl8fGlzTmFOKGIpKXRocm93IEVycm9yKFwiSGVpZ2h0IGFuZCB3aWR0aCB2YWx1ZXMgb2YgYW4gaW1hZ2UgZmllbGQgbXVzdCBjYXN0IHRvIG51bWJlcnMuXCIpO2lmKDA+PWN8fDA+PWIpdGhyb3cgRXJyb3IoXCJIZWlnaHQgYW5kIHdpZHRoIHZhbHVlcyBvZiBhbiBpbWFnZSBmaWVsZCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLlwiKTt0aGlzLmZsaXBSdGxfPSExO3RoaXMuYWx0VGV4dF89XCJcIjtCbG9ja2x5LkZpZWxkSW1hZ2Uuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLFxuYSxudWxsLGcpO2d8fCh0aGlzLmZsaXBSdGxfPSEhZix0aGlzLmFsdFRleHRfPUJsb2NrbHkudXRpbHMucmVwbGFjZU1lc3NhZ2VSZWZlcmVuY2VzKGQpfHxcIlwiKTt0aGlzLnNpemVfPW5ldyBCbG9ja2x5LnV0aWxzLlNpemUoYixjK0Jsb2NrbHkuRmllbGRJbWFnZS5ZX1BBRERJTkcpO3RoaXMuaW1hZ2VIZWlnaHRfPWM7dGhpcy5jbGlja0hhbmRsZXJfPW51bGw7XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKHRoaXMuY2xpY2tIYW5kbGVyXz1lKTt0aGlzLmltYWdlRWxlbWVudF89bnVsbH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5GaWVsZEltYWdlLEJsb2NrbHkuRmllbGQpO0Jsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuREVGQVVMVF9WQUxVRT1cIlwiO0Jsb2NrbHkuRmllbGRJbWFnZS5mcm9tSnNvbj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuRmllbGRJbWFnZShhLnNyYyxhLndpZHRoLGEuaGVpZ2h0LHZvaWQgMCx2b2lkIDAsdm9pZCAwLGEpfTtcbkJsb2NrbHkuRmllbGRJbWFnZS5ZX1BBRERJTkc9MTtCbG9ja2x5LkZpZWxkSW1hZ2UucHJvdG90eXBlLkVESVRBQkxFPSExO0Jsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuaXNEaXJ0eV89ITE7QmxvY2tseS5GaWVsZEltYWdlLnByb3RvdHlwZS5jb25maWd1cmVfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuRmllbGRJbWFnZS5zdXBlckNsYXNzXy5jb25maWd1cmVfLmNhbGwodGhpcyxhKTt0aGlzLmZsaXBSdGxfPSEhYS5mbGlwUnRsO3RoaXMuYWx0VGV4dF89QmxvY2tseS51dGlscy5yZXBsYWNlTWVzc2FnZVJlZmVyZW5jZXMoYS5hbHQpfHxcIlwifTtcbkJsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuaW5pdFZpZXc9ZnVuY3Rpb24oKXt0aGlzLmltYWdlRWxlbWVudF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5JTUFHRSx7aGVpZ2h0OnRoaXMuaW1hZ2VIZWlnaHRfK1wicHhcIix3aWR0aDp0aGlzLnNpemVfLndpZHRoK1wicHhcIixhbHQ6dGhpcy5hbHRUZXh0X30sdGhpcy5maWVsZEdyb3VwXyk7dGhpcy5pbWFnZUVsZW1lbnRfLnNldEF0dHJpYnV0ZU5TKEJsb2NrbHkudXRpbHMuZG9tLlhMSU5LX05TLFwieGxpbms6aHJlZlwiLHRoaXMudmFsdWVfKTt0aGlzLmNsaWNrSGFuZGxlcl8mJih0aGlzLmltYWdlRWxlbWVudF8uc3R5bGUuY3Vyc29yPVwicG9pbnRlclwiKX07QmxvY2tseS5GaWVsZEltYWdlLnByb3RvdHlwZS51cGRhdGVTaXplXz1mdW5jdGlvbigpe307XG5CbG9ja2x5LkZpZWxkSW1hZ2UucHJvdG90eXBlLmRvQ2xhc3NWYWxpZGF0aW9uXz1mdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYT9udWxsOmF9O0Jsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuZG9WYWx1ZVVwZGF0ZV89ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZV89YTt0aGlzLmltYWdlRWxlbWVudF8mJnRoaXMuaW1hZ2VFbGVtZW50Xy5zZXRBdHRyaWJ1dGVOUyhCbG9ja2x5LnV0aWxzLmRvbS5YTElOS19OUyxcInhsaW5rOmhyZWZcIixTdHJpbmcodGhpcy52YWx1ZV8pKX07QmxvY2tseS5GaWVsZEltYWdlLnByb3RvdHlwZS5nZXRGbGlwUnRsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmxpcFJ0bF99O0Jsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuc2V0QWx0PWZ1bmN0aW9uKGEpe2EhPXRoaXMuYWx0VGV4dF8mJih0aGlzLmFsdFRleHRfPWF8fFwiXCIsdGhpcy5pbWFnZUVsZW1lbnRfJiZ0aGlzLmltYWdlRWxlbWVudF8uc2V0QXR0cmlidXRlKFwiYWx0XCIsdGhpcy5hbHRUZXh0XykpfTtcbkJsb2NrbHkuRmllbGRJbWFnZS5wcm90b3R5cGUuc2hvd0VkaXRvcl89ZnVuY3Rpb24oKXt0aGlzLmNsaWNrSGFuZGxlcl8mJnRoaXMuY2xpY2tIYW5kbGVyXyh0aGlzKX07QmxvY2tseS5GaWVsZEltYWdlLnByb3RvdHlwZS5zZXRPbkNsaWNrSGFuZGxlcj1mdW5jdGlvbihhKXt0aGlzLmNsaWNrSGFuZGxlcl89YX07QmxvY2tseS5GaWVsZEltYWdlLnByb3RvdHlwZS5nZXRUZXh0Xz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFsdFRleHRffTtCbG9ja2x5LmZpZWxkUmVnaXN0cnkucmVnaXN0ZXIoXCJmaWVsZF9pbWFnZVwiLEJsb2NrbHkuRmllbGRJbWFnZSk7QmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0PWZ1bmN0aW9uKGEsYixjKXtCbG9ja2x5LkZpZWxkTXVsdGlsaW5lSW5wdXQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKTt0aGlzLnRleHRHcm91cF89bnVsbH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0LEJsb2NrbHkuRmllbGRUZXh0SW5wdXQpO0Jsb2NrbHkuRmllbGRNdWx0aWxpbmVJbnB1dC5mcm9tSnNvbj1mdW5jdGlvbihhKXt2YXIgYj1CbG9ja2x5LnV0aWxzLnJlcGxhY2VNZXNzYWdlUmVmZXJlbmNlcyhhLnRleHQpO3JldHVybiBuZXcgQmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0KGIsdm9pZCAwLGEpfTtCbG9ja2x5LkZpZWxkTXVsdGlsaW5lSW5wdXQucHJvdG90eXBlLnRvWG1sPWZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9dGhpcy5nZXRWYWx1ZSgpLnJlcGxhY2UoL1xcbi9nLFwiJiMxMDtcIik7cmV0dXJuIGF9O1xuQmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0LnByb3RvdHlwZS5mcm9tWG1sPWZ1bmN0aW9uKGEpe3RoaXMuc2V0VmFsdWUoYS50ZXh0Q29udGVudC5yZXBsYWNlKC8mIzEwOy9nLFwiXFxuXCIpKX07QmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0LnByb3RvdHlwZS5pbml0Vmlldz1mdW5jdGlvbigpe3RoaXMuY3JlYXRlQm9yZGVyUmVjdF8oKTt0aGlzLnRleHRHcm91cF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5HLHtcImNsYXNzXCI6XCJibG9ja2x5RWRpdGFibGVUZXh0XCJ9LHRoaXMuZmllbGRHcm91cF8pfTtcbkJsb2NrbHkuRmllbGRNdWx0aWxpbmVJbnB1dC5wcm90b3R5cGUuZ2V0RGlzcGxheVRleHRfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52YWx1ZV87aWYoIWEpcmV0dXJuIEJsb2NrbHkuRmllbGQuTkJTUDt2YXIgYj1hLnNwbGl0KFwiXFxuXCIpO2E9XCJcIjtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtkLmxlbmd0aD50aGlzLm1heERpc3BsYXlMZW5ndGgmJihkPWQuc3Vic3RyaW5nKDAsdGhpcy5tYXhEaXNwbGF5TGVuZ3RoLTQpK1wiLi4uXCIpO2Q9ZC5yZXBsYWNlKC9cXHMvZyxCbG9ja2x5LkZpZWxkLk5CU1ApO2ErPWQ7YyE9PWIubGVuZ3RoLTEmJihhKz1cIlxcblwiKX10aGlzLnNvdXJjZUJsb2NrXy5SVEwmJihhKz1cIlxcdTIwMGZcIik7cmV0dXJuIGF9O1xuQmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0LnByb3RvdHlwZS5yZW5kZXJfPWZ1bmN0aW9uKCl7Zm9yKHZhciBhO2E9dGhpcy50ZXh0R3JvdXBfLmZpcnN0Q2hpbGQ7KXRoaXMudGV4dEdyb3VwXy5yZW1vdmVDaGlsZChhKTthPXRoaXMuZ2V0RGlzcGxheVRleHRfKCkuc3BsaXQoXCJcXG5cIik7Zm9yKHZhciBiPTAsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD10aGlzLmdldENvbnN0YW50cygpLkZJRUxEX1RFWFRfSEVJR0hUK3RoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQk9SREVSX1JFQ1RfWV9QQURESU5HO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuVEVYVCx7XCJjbGFzc1wiOlwiYmxvY2tseVRleHQgYmxvY2tseU11bHRpbGluZVRleHRcIix4OnRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQk9SREVSX1JFQ1RfWF9QQURESU5HLHk6Yit0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1lfUEFERElORyxkeTp0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX1RFWFRfQkFTRUxJTkV9LFxudGhpcy50ZXh0R3JvdXBfKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhW2NdKSk7Yis9ZH10aGlzLnVwZGF0ZVNpemVfKCk7dGhpcy5pc0JlaW5nRWRpdGVkXyYmKHRoaXMuc291cmNlQmxvY2tfLlJUTD9zZXRUaW1lb3V0KHRoaXMucmVzaXplRWRpdG9yXy5iaW5kKHRoaXMpLDApOnRoaXMucmVzaXplRWRpdG9yXygpLGE9dGhpcy5odG1sSW5wdXRfLHRoaXMuaXNUZXh0VmFsaWRfPyhCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyhhLFwiYmxvY2tseUludmFsaWRJbnB1dFwiKSxCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoYSxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuSU5WQUxJRCwhMSkpOihCbG9ja2x5LnV0aWxzLmRvbS5hZGRDbGFzcyhhLFwiYmxvY2tseUludmFsaWRJbnB1dFwiKSxCbG9ja2x5LnV0aWxzLmFyaWEuc2V0U3RhdGUoYSxCbG9ja2x5LnV0aWxzLmFyaWEuU3RhdGUuSU5WQUxJRCwhMCkpKX07XG5CbG9ja2x5LkZpZWxkTXVsdGlsaW5lSW5wdXQucHJvdG90eXBlLnVwZGF0ZVNpemVfPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudGV4dEdyb3VwXy5jaGlsZE5vZGVzLGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1CbG9ja2x5LnV0aWxzLmRvbS5nZXRUZXh0V2lkdGgoYVtkXSk7ZT5iJiYoYj1lKTtjKz10aGlzLmdldENvbnN0YW50cygpLkZJRUxEX1RFWFRfSEVJR0hUKygwPGQ/dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9ZX1BBRERJTkc6MCl9dGhpcy5ib3JkZXJSZWN0XyYmKGMrPTIqdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9ZX1BBRERJTkcsYis9Mip0aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1hfUEFERElORyx0aGlzLmJvcmRlclJlY3RfLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYiksdGhpcy5ib3JkZXJSZWN0Xy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixjKSk7dGhpcy5zaXplXy53aWR0aD1cbmI7dGhpcy5zaXplXy5oZWlnaHQ9Yzt0aGlzLnBvc2l0aW9uQm9yZGVyUmVjdF8oKX07XG5CbG9ja2x5LkZpZWxkTXVsdGlsaW5lSW5wdXQucHJvdG90eXBlLndpZGdldENyZWF0ZV89ZnVuY3Rpb24oKXt2YXIgYT1CbG9ja2x5LldpZGdldERpdi5ESVYsYj10aGlzLndvcmtzcGFjZV8uZ2V0U2NhbGUoKSxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtjLmNsYXNzTmFtZT1cImJsb2NrbHlIdG1sSW5wdXQgYmxvY2tseUh0bWxUZXh0QXJlYUlucHV0XCI7Yy5zZXRBdHRyaWJ1dGUoXCJzcGVsbGNoZWNrXCIsdGhpcy5zcGVsbGNoZWNrXyk7dmFyIGQ9dGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9URVhUX0ZPTlRTSVpFKmIrXCJwdFwiO2Euc3R5bGUuZm9udFNpemU9ZDtjLnN0eWxlLmZvbnRTaXplPWQ7Yy5zdHlsZS5ib3JkZXJSYWRpdXM9QmxvY2tseS5GaWVsZFRleHRJbnB1dC5CT1JERVJSQURJVVMqYitcInB4XCI7ZD10aGlzLmdldENvbnN0YW50cygpLkZJRUxEX0JPUkRFUl9SRUNUX1hfUEFERElORypiO3ZhciBlPXRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfQk9SREVSX1JFQ1RfWV9QQURESU5HKlxuYi8yO2Muc3R5bGUucGFkZGluZz1lK1wicHggXCIrZCtcInB4IFwiK2UrXCJweCBcIitkK1wicHhcIjtkPXRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfVEVYVF9IRUlHSFQrdGhpcy5nZXRDb25zdGFudHMoKS5GSUVMRF9CT1JERVJfUkVDVF9ZX1BBRERJTkc7Yy5zdHlsZS5saW5lSGVpZ2h0PWQqYitcInB4XCI7YS5hcHBlbmRDaGlsZChjKTtjLnZhbHVlPWMuZGVmYXVsdFZhbHVlPXRoaXMuZ2V0RWRpdG9yVGV4dF8odGhpcy52YWx1ZV8pO2MudW50eXBlZERlZmF1bHRWYWx1ZV89dGhpcy52YWx1ZV87Yy5vbGRWYWx1ZV89bnVsbDtCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5HRUNLTz9zZXRUaW1lb3V0KHRoaXMucmVzaXplRWRpdG9yXy5iaW5kKHRoaXMpLDApOnRoaXMucmVzaXplRWRpdG9yXygpO3RoaXMuYmluZElucHV0RXZlbnRzXyhjKTtyZXR1cm4gY307XG5CbG9ja2x5LkZpZWxkTXVsdGlsaW5lSW5wdXQucHJvdG90eXBlLm9uSHRtbElucHV0S2V5RG93bl89ZnVuY3Rpb24oYSl7YS5rZXlDb2RlIT09QmxvY2tseS51dGlscy5LZXlDb2Rlcy5FTlRFUiYmQmxvY2tseS5GaWVsZE11bHRpbGluZUlucHV0LnN1cGVyQ2xhc3NfLm9uSHRtbElucHV0S2V5RG93bl8uY2FsbCh0aGlzLGEpfTtCbG9ja2x5LkNzcy5yZWdpc3RlcihcIi5ibG9ja2x5SHRtbFRleHRBcmVhSW5wdXQgeyxmb250LWZhbWlseTogbW9ub3NwYWNlOyxyZXNpemU6IG5vbmU7LG92ZXJmbG93OiBoaWRkZW47LGhlaWdodDogMTAwJTssdGV4dC1hbGlnbjogbGVmdDssfVwiLnNwbGl0KFwiLFwiKSk7QmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyKFwiZmllbGRfbXVsdGlsaW5ldGV4dFwiLEJsb2NrbHkuRmllbGRNdWx0aWxpbmVJbnB1dCk7QmxvY2tseS5GaWVsZE51bWJlcj1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5taW5fPS1JbmZpbml0eTt0aGlzLm1heF89SW5maW5pdHk7dGhpcy5wcmVjaXNpb25fPTA7dGhpcy5kZWNpbWFsUGxhY2VzXz1udWxsO0Jsb2NrbHkuRmllbGROdW1iZXIuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsZSxmKTtmfHx0aGlzLnNldENvbnN0cmFpbnRzKGIsYyxkKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5GaWVsZE51bWJlcixCbG9ja2x5LkZpZWxkVGV4dElucHV0KTtCbG9ja2x5LkZpZWxkTnVtYmVyLnByb3RvdHlwZS5ERUZBVUxUX1ZBTFVFPTA7QmxvY2tseS5GaWVsZE51bWJlci5mcm9tSnNvbj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuRmllbGROdW1iZXIoYS52YWx1ZSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx2b2lkIDAsYSl9O0Jsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLlNFUklBTElaQUJMRT0hMDtcbkJsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLmNvbmZpZ3VyZV89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZE51bWJlci5zdXBlckNsYXNzXy5jb25maWd1cmVfLmNhbGwodGhpcyxhKTt0aGlzLnNldE1pbkludGVybmFsXyhhLm1pbik7dGhpcy5zZXRNYXhJbnRlcm5hbF8oYS5tYXgpO3RoaXMuc2V0UHJlY2lzaW9uSW50ZXJuYWxfKGEucHJlY2lzaW9uKX07QmxvY2tseS5GaWVsZE51bWJlci5wcm90b3R5cGUuc2V0Q29uc3RyYWludHM9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0TWluSW50ZXJuYWxfKGEpO3RoaXMuc2V0TWF4SW50ZXJuYWxfKGIpO3RoaXMuc2V0UHJlY2lzaW9uSW50ZXJuYWxfKGMpO3RoaXMuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZSgpKX07QmxvY2tseS5GaWVsZE51bWJlci5wcm90b3R5cGUuc2V0TWluPWZ1bmN0aW9uKGEpe3RoaXMuc2V0TWluSW50ZXJuYWxfKGEpO3RoaXMuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZSgpKX07XG5CbG9ja2x5LkZpZWxkTnVtYmVyLnByb3RvdHlwZS5zZXRNaW5JbnRlcm5hbF89ZnVuY3Rpb24oYSl7bnVsbD09YT90aGlzLm1pbl89LUluZmluaXR5OihhPU51bWJlcihhKSxpc05hTihhKXx8KHRoaXMubWluXz1hKSl9O0Jsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLmdldE1pbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbl99O0Jsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLnNldE1heD1mdW5jdGlvbihhKXt0aGlzLnNldE1heEludGVybmFsXyhhKTt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWUoKSl9O0Jsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLnNldE1heEludGVybmFsXz1mdW5jdGlvbihhKXtudWxsPT1hP3RoaXMubWF4Xz1JbmZpbml0eTooYT1OdW1iZXIoYSksaXNOYU4oYSl8fCh0aGlzLm1heF89YSkpfTtCbG9ja2x5LkZpZWxkTnVtYmVyLnByb3RvdHlwZS5nZXRNYXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhffTtcbkJsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLnNldFByZWNpc2lvbj1mdW5jdGlvbihhKXt0aGlzLnNldFByZWNpc2lvbkludGVybmFsXyhhKTt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWUoKSl9O0Jsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLnNldFByZWNpc2lvbkludGVybmFsXz1mdW5jdGlvbihhKXtudWxsPT1hP3RoaXMucHJlY2lzaW9uXz0wOihhPU51bWJlcihhKSxpc05hTihhKXx8KHRoaXMucHJlY2lzaW9uXz1hKSk7dmFyIGI9dGhpcy5wcmVjaXNpb25fLnRvTG9jYWxlU3RyaW5nKFwiZW4tVVNcIix7bWF4aW11bUZyYWN0aW9uRGlnaXRzOjIwfSksYz1iLmluZGV4T2YoXCIuXCIpO3RoaXMuZGVjaW1hbFBsYWNlc189LTE9PWM/YT8wOm51bGw6Yi5sZW5ndGgtYy0xfTtCbG9ja2x5LkZpZWxkTnVtYmVyLnByb3RvdHlwZS5nZXRQcmVjaXNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmVjaXNpb25ffTtcbkJsb2NrbHkuRmllbGROdW1iZXIucHJvdG90eXBlLmRvQ2xhc3NWYWxpZGF0aW9uXz1mdW5jdGlvbihhKXtpZihudWxsPT09YSlyZXR1cm4gbnVsbDthPVN0cmluZyhhKTthPWEucmVwbGFjZSgvTy9pZyxcIjBcIik7YT1hLnJlcGxhY2UoLywvZyxcIlwiKTthPWEucmVwbGFjZSgvaW5maW5pdHkvaSxcIkluZmluaXR5XCIpO2E9TnVtYmVyKGF8fDApO2lmKGlzTmFOKGEpKXJldHVybiBudWxsO2E9TWF0aC5taW4oTWF0aC5tYXgoYSx0aGlzLm1pbl8pLHRoaXMubWF4Xyk7dGhpcy5wcmVjaXNpb25fJiZpc0Zpbml0ZShhKSYmKGE9TWF0aC5yb3VuZChhL3RoaXMucHJlY2lzaW9uXykqdGhpcy5wcmVjaXNpb25fKTtudWxsIT10aGlzLmRlY2ltYWxQbGFjZXNfJiYoYT1OdW1iZXIoYS50b0ZpeGVkKHRoaXMuZGVjaW1hbFBsYWNlc18pKSk7cmV0dXJuIGF9O1xuQmxvY2tseS5GaWVsZE51bWJlci5wcm90b3R5cGUud2lkZ2V0Q3JlYXRlXz1mdW5jdGlvbigpe3ZhciBhPUJsb2NrbHkuRmllbGROdW1iZXIuc3VwZXJDbGFzc18ud2lkZ2V0Q3JlYXRlXy5jYWxsKHRoaXMpOy1JbmZpbml0eTx0aGlzLm1pbl8mJkJsb2NrbHkudXRpbHMuYXJpYS5zZXRTdGF0ZShhLEJsb2NrbHkudXRpbHMuYXJpYS5TdGF0ZS5WQUxVRU1JTix0aGlzLm1pbl8pO0luZmluaXR5PnRoaXMubWF4XyYmQmxvY2tseS51dGlscy5hcmlhLnNldFN0YXRlKGEsQmxvY2tseS51dGlscy5hcmlhLlN0YXRlLlZBTFVFTUFYLHRoaXMubWF4Xyk7cmV0dXJuIGF9O0Jsb2NrbHkuZmllbGRSZWdpc3RyeS5yZWdpc3RlcihcImZpZWxkX251bWJlclwiLEJsb2NrbHkuRmllbGROdW1iZXIpO0Jsb2NrbHkuRmllbGRWYXJpYWJsZT1mdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMubWVudUdlbmVyYXRvcl89QmxvY2tseS5GaWVsZFZhcmlhYmxlLmRyb3Bkb3duQ3JlYXRlO3RoaXMuZGVmYXVsdFZhcmlhYmxlTmFtZT1hfHxcIlwiO3RoaXMuc2l6ZV89bmV3IEJsb2NrbHkudXRpbHMuU2l6ZSgwLDApO2UmJnRoaXMuY29uZmlndXJlXyhlKTtiJiZ0aGlzLnNldFZhbGlkYXRvcihiKTtlfHx0aGlzLnNldFR5cGVzXyhjLGQpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LkZpZWxkVmFyaWFibGUsQmxvY2tseS5GaWVsZERyb3Bkb3duKTtCbG9ja2x5LkZpZWxkVmFyaWFibGUuZnJvbUpzb249ZnVuY3Rpb24oYSl7dmFyIGI9QmxvY2tseS51dGlscy5yZXBsYWNlTWVzc2FnZVJlZmVyZW5jZXMoYS52YXJpYWJsZSk7cmV0dXJuIG5ldyBCbG9ja2x5LkZpZWxkVmFyaWFibGUoYix2b2lkIDAsdm9pZCAwLHZvaWQgMCxhKX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLlNFUklBTElaQUJMRT0hMDtCbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLmNvbmZpZ3VyZV89ZnVuY3Rpb24oYSl7QmxvY2tseS5GaWVsZFZhcmlhYmxlLnN1cGVyQ2xhc3NfLmNvbmZpZ3VyZV8uY2FsbCh0aGlzLGEpO3RoaXMuc2V0VHlwZXNfKGEudmFyaWFibGVUeXBlcyxhLmRlZmF1bHRUeXBlKX07QmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5pbml0TW9kZWw9ZnVuY3Rpb24oKXtpZighdGhpcy52YXJpYWJsZV8pe3ZhciBhPUJsb2NrbHkuVmFyaWFibGVzLmdldE9yQ3JlYXRlVmFyaWFibGVQYWNrYWdlKHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSxudWxsLHRoaXMuZGVmYXVsdFZhcmlhYmxlTmFtZSx0aGlzLmRlZmF1bHRUeXBlXyk7dGhpcy5kb1ZhbHVlVXBkYXRlXyhhLmdldElkKCkpfX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLnNob3VsZEFkZEJvcmRlclJlY3RfPWZ1bmN0aW9uKCl7cmV0dXJuIEJsb2NrbHkuRmllbGRWYXJpYWJsZS5zdXBlckNsYXNzXy5zaG91bGRBZGRCb3JkZXJSZWN0Xy5jYWxsKHRoaXMpJiYoIXRoaXMuZ2V0Q29uc3RhbnRzKCkuRklFTERfRFJPUERPV05fTk9fQk9SREVSX1JFQ1RfU0hBRE9XfHxcInZhcmlhYmxlc19nZXRcIiE9dGhpcy5zb3VyY2VCbG9ja18udHlwZSl9O1xuQmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5mcm9tWG1sPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwiaWRcIiksYz1hLnRleHRDb250ZW50LGQ9YS5nZXRBdHRyaWJ1dGUoXCJ2YXJpYWJsZXR5cGVcIil8fGEuZ2V0QXR0cmlidXRlKFwidmFyaWFibGVUeXBlXCIpfHxcIlwiO2I9QmxvY2tseS5WYXJpYWJsZXMuZ2V0T3JDcmVhdGVWYXJpYWJsZVBhY2thZ2UodGhpcy5zb3VyY2VCbG9ja18ud29ya3NwYWNlLGIsYyxkKTtpZihudWxsIT1kJiZkIT09Yi50eXBlKXRocm93IEVycm9yKFwiU2VyaWFsaXplZCB2YXJpYWJsZSB0eXBlIHdpdGggaWQgJ1wiK2IuZ2V0SWQoKStcIicgaGFkIHR5cGUgXCIrYi50eXBlK1wiLCBhbmQgZG9lcyBub3QgbWF0Y2ggdmFyaWFibGUgZmllbGQgdGhhdCByZWZlcmVuY2VzIGl0OiBcIitCbG9ja2x5LlhtbC5kb21Ub1RleHQoYSkrXCIuXCIpO3RoaXMuc2V0VmFsdWUoYi5nZXRJZCgpKX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLnRvWG1sPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE1vZGVsKCk7YS5pZD10aGlzLnZhcmlhYmxlXy5nZXRJZCgpO2EudGV4dENvbnRlbnQ9dGhpcy52YXJpYWJsZV8ubmFtZTt0aGlzLnZhcmlhYmxlXy50eXBlJiZhLnNldEF0dHJpYnV0ZShcInZhcmlhYmxldHlwZVwiLHRoaXMudmFyaWFibGVfLnR5cGUpO3JldHVybiBhfTtCbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLnNldFNvdXJjZUJsb2NrPWZ1bmN0aW9uKGEpe2lmKGEuaXNTaGFkb3coKSl0aHJvdyBFcnJvcihcIlZhcmlhYmxlIGZpZWxkcyBhcmUgbm90IGFsbG93ZWQgdG8gZXhpc3Qgb24gc2hhZG93IGJsb2Nrcy5cIik7QmxvY2tseS5GaWVsZFZhcmlhYmxlLnN1cGVyQ2xhc3NfLnNldFNvdXJjZUJsb2NrLmNhbGwodGhpcyxhKX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFyaWFibGVfP3RoaXMudmFyaWFibGVfLmdldElkKCk6bnVsbH07QmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFyaWFibGVfP3RoaXMudmFyaWFibGVfLm5hbWU6XCJcIn07QmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5nZXRWYXJpYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhcmlhYmxlX307QmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5nZXRWYWxpZGF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YXJpYWJsZV8/dGhpcy52YWxpZGF0b3JfOm51bGx9O1xuQmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5kb0NsYXNzVmFsaWRhdGlvbl89ZnVuY3Rpb24oYSl7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7dmFyIGI9QmxvY2tseS5WYXJpYWJsZXMuZ2V0VmFyaWFibGUodGhpcy5zb3VyY2VCbG9ja18ud29ya3NwYWNlLGEpO2lmKCFiKXJldHVybiBjb25zb2xlLndhcm4oXCJWYXJpYWJsZSBpZCBkb2Vzbid0IHBvaW50IHRvIGEgcmVhbCB2YXJpYWJsZSEgSUQgd2FzIFwiK2EpLG51bGw7Yj1iLnR5cGU7cmV0dXJuIHRoaXMudHlwZUlzQWxsb3dlZF8oYik/YTooY29uc29sZS53YXJuKFwiVmFyaWFibGUgdHlwZSBkb2Vzbid0IG1hdGNoIHRoaXMgZmllbGQhICBUeXBlIHdhcyBcIitiKSxudWxsKX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLmRvVmFsdWVVcGRhdGVfPWZ1bmN0aW9uKGEpe3RoaXMudmFyaWFibGVfPUJsb2NrbHkuVmFyaWFibGVzLmdldFZhcmlhYmxlKHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSxhKTtCbG9ja2x5LkZpZWxkVmFyaWFibGUuc3VwZXJDbGFzc18uZG9WYWx1ZVVwZGF0ZV8uY2FsbCh0aGlzLGEpfTtCbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLnR5cGVJc0FsbG93ZWRfPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VmFyaWFibGVUeXBlc18oKTtpZighYilyZXR1cm4hMDtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihhPT1iW2NdKXJldHVybiEwO3JldHVybiExfTtcbkJsb2NrbHkuRmllbGRWYXJpYWJsZS5wcm90b3R5cGUuZ2V0VmFyaWFibGVUeXBlc189ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnZhcmlhYmxlVHlwZXM7aWYobnVsbD09PWEmJnRoaXMuc291cmNlQmxvY2tfJiZ0aGlzLnNvdXJjZUJsb2NrXy53b3Jrc3BhY2UpcmV0dXJuIHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZS5nZXRWYXJpYWJsZVR5cGVzKCk7YT1hfHxbXCJcIl07aWYoMD09YS5sZW5ndGgpdGhyb3cgYT10aGlzLmdldFRleHQoKSxFcnJvcihcIid2YXJpYWJsZVR5cGVzJyBvZiBmaWVsZCB2YXJpYWJsZSBcIithK1wiIHdhcyBhbiBlbXB0eSBsaXN0XCIpO3JldHVybiBhfTtcbkJsb2NrbHkuRmllbGRWYXJpYWJsZS5wcm90b3R5cGUuc2V0VHlwZXNfPWZ1bmN0aW9uKGEsYil7Yj1ifHxcIlwiO2lmKG51bGw9PWF8fHZvaWQgMD09YSlhPW51bGw7ZWxzZSBpZihBcnJheS5pc0FycmF5KGEpKXtmb3IodmFyIGM9ITEsZD0wO2Q8YS5sZW5ndGg7ZCsrKWFbZF09PWImJihjPSEwKTtpZighYyl0aHJvdyBFcnJvcihcIkludmFsaWQgZGVmYXVsdCB0eXBlICdcIitiK1wiJyBpbiB0aGUgZGVmaW5pdGlvbiBvZiBhIEZpZWxkVmFyaWFibGVcIik7fWVsc2UgdGhyb3cgRXJyb3IoXCIndmFyaWFibGVUeXBlcycgd2FzIG5vdCBhbiBhcnJheSBpbiB0aGUgZGVmaW5pdGlvbiBvZiBhIEZpZWxkVmFyaWFibGVcIik7dGhpcy5kZWZhdWx0VHlwZV89Yjt0aGlzLnZhcmlhYmxlVHlwZXM9YX07QmxvY2tseS5GaWVsZFZhcmlhYmxlLnByb3RvdHlwZS5yZWZyZXNoVmFyaWFibGVOYW1lPWZ1bmN0aW9uKCl7dGhpcy5mb3JjZVJlcmVuZGVyKCl9O1xuQmxvY2tseS5GaWVsZFZhcmlhYmxlLmRyb3Bkb3duQ3JlYXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMudmFyaWFibGVfKXRocm93IEVycm9yKFwiVHJpZWQgdG8gY2FsbCBkcm9wZG93bkNyZWF0ZSBvbiBhIHZhcmlhYmxlIGZpZWxkIHdpdGggbm8gdmFyaWFibGUgc2VsZWN0ZWQuXCIpO3ZhciBhPXRoaXMuZ2V0VGV4dCgpLGI9W107aWYodGhpcy5zb3VyY2VCbG9ja18mJnRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSlmb3IodmFyIGM9dGhpcy5nZXRWYXJpYWJsZVR5cGVzXygpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9dGhpcy5zb3VyY2VCbG9ja18ud29ya3NwYWNlLmdldFZhcmlhYmxlc09mVHlwZShjW2RdKTtiPWIuY29uY2F0KGUpfWIuc29ydChCbG9ja2x5LlZhcmlhYmxlTW9kZWwuY29tcGFyZUJ5TmFtZSk7Yz1bXTtmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWNbZF09W2JbZF0ubmFtZSxiW2RdLmdldElkKCldO2MucHVzaChbQmxvY2tseS5Nc2cuUkVOQU1FX1ZBUklBQkxFLEJsb2NrbHkuUkVOQU1FX1ZBUklBQkxFX0lEXSk7XG5CbG9ja2x5Lk1zZy5ERUxFVEVfVkFSSUFCTEUmJmMucHVzaChbQmxvY2tseS5Nc2cuREVMRVRFX1ZBUklBQkxFLnJlcGxhY2UoXCIlMVwiLGEpLEJsb2NrbHkuREVMRVRFX1ZBUklBQkxFX0lEXSk7cmV0dXJuIGN9O0Jsb2NrbHkuRmllbGRWYXJpYWJsZS5wcm90b3R5cGUub25JdGVtU2VsZWN0ZWRfPWZ1bmN0aW9uKGEsYil7YT1iLmdldFZhbHVlKCk7aWYodGhpcy5zb3VyY2VCbG9ja18mJnRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSl7aWYoYT09QmxvY2tseS5SRU5BTUVfVkFSSUFCTEVfSUQpe0Jsb2NrbHkuVmFyaWFibGVzLnJlbmFtZVZhcmlhYmxlKHRoaXMuc291cmNlQmxvY2tfLndvcmtzcGFjZSx0aGlzLnZhcmlhYmxlXyk7cmV0dXJufWlmKGE9PUJsb2NrbHkuREVMRVRFX1ZBUklBQkxFX0lEKXt0aGlzLnNvdXJjZUJsb2NrXy53b3Jrc3BhY2UuZGVsZXRlVmFyaWFibGVCeUlkKHRoaXMudmFyaWFibGVfLmdldElkKCkpO3JldHVybn19dGhpcy5zZXRWYWx1ZShhKX07XG5CbG9ja2x5LkZpZWxkVmFyaWFibGUucHJvdG90eXBlLnJlZmVyZW5jZXNWYXJpYWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm4hMH07QmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyKFwiZmllbGRfdmFyaWFibGVcIixCbG9ja2x5LkZpZWxkVmFyaWFibGUpO0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHM9e307QmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludD1mdW5jdGlvbihhLGIpe3JldHVyblwiIFwiK2ErXCIsXCIrYitcIiBcIn07QmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZT1mdW5jdGlvbihhLGIpe3JldHVyblwiIFwiK2ErYi5qb2luKFwiXCIpfTtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbz1mdW5jdGlvbihhLGIpe3JldHVyblwiIE0gXCIrYStcIixcIitiK1wiIFwifTtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeT1mdW5jdGlvbihhLGIpe3JldHVyblwiIG0gXCIrYStcIixcIitiK1wiIFwifTtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVUbz1mdW5jdGlvbihhLGIpe3JldHVyblwiIGwgXCIrYStcIixcIitiK1wiIFwifTtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmU9ZnVuY3Rpb24oYSl7cmV0dXJuXCIgbFwiK2Euam9pbihcIlwiKX07QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCIgXCIrYStcIiBcIitiK1wiIFwifTtcbkJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBhK1wiIFwiK2MrXCIgXCIrYytcIiBcIitiK2R9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlcj1mdW5jdGlvbigpe3RoaXMuTk9fUEFERElORz0wO3RoaXMuU01BTExfUEFERElORz0zO3RoaXMuTUVESVVNX1BBRERJTkc9NTt0aGlzLk1FRElVTV9MQVJHRV9QQURESU5HPTg7dGhpcy5MQVJHRV9QQURESU5HPTEwO3RoaXMuVEFMTF9JTlBVVF9GSUVMRF9PRkZTRVRfWT10aGlzLk1FRElVTV9QQURESU5HO3RoaXMuVEFCX0hFSUdIVD0xNTt0aGlzLlRBQl9PRkZTRVRfRlJPTV9UT1A9NTt0aGlzLlRBQl9WRVJUSUNBTF9PVkVSTEFQPTIuNTt0aGlzLlRBQl9XSURUSD04O3RoaXMuTk9UQ0hfV0lEVEg9MTU7dGhpcy5OT1RDSF9IRUlHSFQ9NDt0aGlzLk1JTl9CTE9DS19XSURUSD0xMjt0aGlzLkVNUFRZX0JMT0NLX1NQQUNFUl9IRUlHSFQ9MTY7dGhpcy5EVU1NWV9JTlBVVF9TSEFET1dfTUlOX0hFSUdIVD10aGlzLkRVTU1ZX0lOUFVUX01JTl9IRUlHSFQ9dGhpcy5UQUJfSEVJR0hUO3RoaXMuQ09STkVSX1JBRElVUz1cbjg7dGhpcy5TVEFURU1FTlRfSU5QVVRfTk9UQ0hfT0ZGU0VUPXRoaXMuTk9UQ0hfT0ZGU0VUX0xFRlQ9MTU7dGhpcy5TVEFURU1FTlRfQk9UVE9NX1NQQUNFUj0wO3RoaXMuU1RBVEVNRU5UX0lOUFVUX1BBRERJTkdfTEVGVD0yMDt0aGlzLkJFVFdFRU5fU1RBVEVNRU5UX1BBRERJTkdfWT00O3RoaXMuVE9QX1JPV19NSU5fSEVJR0hUPXRoaXMuTUVESVVNX1BBRERJTkc7dGhpcy5UT1BfUk9XX1BSRUNFREVTX1NUQVRFTUVOVF9NSU5fSEVJR0hUPXRoaXMuTEFSR0VfUEFERElORzt0aGlzLkJPVFRPTV9ST1dfTUlOX0hFSUdIVD10aGlzLk1FRElVTV9QQURESU5HO3RoaXMuQk9UVE9NX1JPV19BRlRFUl9TVEFURU1FTlRfTUlOX0hFSUdIVD10aGlzLkxBUkdFX1BBRERJTkc7dGhpcy5BRERfU1RBUlRfSEFUUz0hMTt0aGlzLlNUQVJUX0hBVF9IRUlHSFQ9MTU7dGhpcy5TVEFSVF9IQVRfV0lEVEg9MTAwO3RoaXMuU1BBQ0VSX0RFRkFVTFRfSEVJR0hUPTE1O3RoaXMuTUlOX0JMT0NLX0hFSUdIVD1cbjI0O3RoaXMuRU1QVFlfSU5MSU5FX0lOUFVUX1BBRERJTkc9MTQuNTt0aGlzLkVNUFRZX0lOTElORV9JTlBVVF9IRUlHSFQ9dGhpcy5UQUJfSEVJR0hUKzExO3RoaXMuRVhURVJOQUxfVkFMVUVfSU5QVVRfUEFERElORz0yO3RoaXMuRU1QVFlfU1RBVEVNRU5UX0lOUFVUX0hFSUdIVD10aGlzLk1JTl9CTE9DS19IRUlHSFQ7dGhpcy5TVEFSVF9QT0lOVD1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeSgwLDApO3RoaXMuSkFHR0VEX1RFRVRIX0hFSUdIVD0xMjt0aGlzLkpBR0dFRF9URUVUSF9XSURUSD02O3RoaXMuRklFTERfVEVYVF9GT05UU0laRT0xMTt0aGlzLkZJRUxEX1RFWFRfRk9OVFdFSUdIVD1cIm5vcm1hbFwiO3RoaXMuRklFTERfVEVYVF9GT05URkFNSUxZPVwic2Fucy1zZXJpZlwiO3RoaXMuRklFTERfVEVYVF9CQVNFTElORT10aGlzLkZJRUxEX1RFWFRfSEVJR0hUPS0xO3RoaXMuRklFTERfQk9SREVSX1JFQ1RfUkFESVVTPTQ7dGhpcy5GSUVMRF9CT1JERVJfUkVDVF9IRUlHSFQ9XG4xNjt0aGlzLkZJRUxEX0JPUkRFUl9SRUNUX1hfUEFERElORz01O3RoaXMuRklFTERfQk9SREVSX1JFQ1RfWV9QQURESU5HPTM7dGhpcy5GSUVMRF9CT1JERVJfUkVDVF9DT0xPVVI9XCIjZmZmXCI7dGhpcy5GSUVMRF9URVhUX0JBU0VMSU5FX0NFTlRFUj0hQmxvY2tseS51dGlscy51c2VyQWdlbnQuSUUmJiFCbG9ja2x5LnV0aWxzLnVzZXJBZ2VudC5FREdFO3RoaXMuRklFTERfRFJPUERPV05fQk9SREVSX1JFQ1RfSEVJR0hUPXRoaXMuRklFTERfQk9SREVSX1JFQ1RfSEVJR0hUO3RoaXMuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XPXRoaXMuRklFTERfRFJPUERPV05fQ09MT1VSRURfRElWPXRoaXMuRklFTERfRFJPUERPV05fTk9fQk9SREVSX1JFQ1RfU0hBRE9XPSExO3RoaXMuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XX1BBRERJTkc9dGhpcy5GSUVMRF9CT1JERVJfUkVDVF9YX1BBRERJTkc7dGhpcy5GSUVMRF9EUk9QRE9XTl9TVkdfQVJST1dfU0laRT0xMjt0aGlzLkZJRUxEX0RST1BET1dOX1NWR19BUlJPV19EQVRBVVJJPVxuXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJwWkQwaVRHRjVaWEpmTVNJZ1pHRjBZUzF1WVcxbFBTSk1ZWGxsY2lBeElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeE1pNDNNU0lnYUdWcFoyaDBQU0k0TGpjNUlpQjJhV1YzUW05NFBTSXdJREFnTVRJdU56RWdPQzQzT1NJK1BIUnBkR3hsUG1SeWIzQmtiM2R1TFdGeWNtOTNQQzkwYVhSc1pUNDhaeUJ2Y0dGamFYUjVQU0l3TGpFaVBqeHdZWFJvSUdROUlrMHhNaTQzTVN3eUxqUTBRVEl1TkRFc01pNDBNU3d3TERBc01Td3hNaXcwTGpFMlREZ3VNRGdzT0M0d09HRXlMalExTERJdU5EVXNNQ3d3TERFdE15NDBOU3d3VERBdU56SXNOQzR4TmtFeUxqUXlMREl1TkRJc01Dd3dMREVzTUN3eUxqUTBMREl1TkRnc01pNDBPQ3d3TERBc01Td3VOekV1TnpGRE1Td3dMalEzTERFdU5ETXNNQ3cyTGpNMkxEQlRNVEV1TnpVc01DNDBOaXd4TWl3dU56RkJNaTQwTkN3eUxqUTBMREFzTUN3eExERXlMamN4TERJdU5EUmFJaUJtYVd4c1BTSWpNak14WmpJd0lpOCtQQzluUGp4d1lYUm9JR1E5SWswMkxqTTJMRGN1TnpsaE1TNDBNeXd4TGpRekxEQXNNQ3d4TFRFdExqUXlUREV1TkRJc015NDBOV0V4TGpRMExERXVORFFzTUN3d0xERXNNQzB5WXpBdU5UWXRMalUyTERrdU16RXRNQzQxTml3NUxqZzNMREJoTVM0ME5Dd3hMalEwTERBc01Dd3hMREFzTWt3M0xqTTNMRGN1TXpkQk1TNDBNeXd4TGpRekxEQXNNQ3d4TERZdU16WXNOeTQzT1ZvaUlHWnBiR3c5SWlObVptWWlMejQ4TDNOMlp6ND1cIjtcbnRoaXMuRklFTERfQ09MT1VSX0ZVTExfQkxPQ0s9dGhpcy5GSUVMRF9URVhUSU5QVVRfQk9YX1NIQURPVz0hMTt0aGlzLkZJRUxEX0NPTE9VUl9ERUZBVUxUX1dJRFRIPTI2O3RoaXMuRklFTERfQ09MT1VSX0RFRkFVTFRfSEVJR0hUPXRoaXMuRklFTERfQk9SREVSX1JFQ1RfSEVJR0hUO3RoaXMuRklFTERfQ0hFQ0tCT1hfWF9PRkZTRVQ9dGhpcy5GSUVMRF9CT1JERVJfUkVDVF9YX1BBRERJTkctMzt0aGlzLnJhbmRvbUlkZW50aWZpZXI9U3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cmluZygyKTt0aGlzLmVtYm9zc0ZpbHRlcklkPVwiXCI7dGhpcy5lbWJvc3NGaWx0ZXJfPW51bGw7dGhpcy5kaXNhYmxlZFBhdHRlcm5JZD1cIlwiO3RoaXMuZGlzYWJsZWRQYXR0ZXJuXz1udWxsO3RoaXMuZGVidWdGaWx0ZXJJZD1cIlwiO3RoaXMuY3NzTm9kZV89dGhpcy5kZWJ1Z0ZpbHRlcl89bnVsbDt0aGlzLkNVUlNPUl9DT0xPVVI9XCIjY2MwYTBhXCI7dGhpcy5NQVJLRVJfQ09MT1VSPVwiIzQyODZmNFwiO3RoaXMuQ1VSU09SX1dTX1dJRFRIPVxuMTAwO3RoaXMuV1NfQ1VSU09SX0hFSUdIVD01O3RoaXMuQ1VSU09SX1NUQUNLX1BBRERJTkc9MTA7dGhpcy5DVVJTT1JfQkxPQ0tfUEFERElORz0yO3RoaXMuQ1VSU09SX1NUUk9LRV9XSURUSD00O3RoaXMuRlVMTF9CTE9DS19GSUVMRFM9ITE7dGhpcy5JTlNFUlRJT05fTUFSS0VSX0NPTE9VUj1cIiMwMDAwMDBcIjt0aGlzLklOU0VSVElPTl9NQVJLRVJfT1BBQ0lUWT0uMjt0aGlzLlNIQVBFUz17UFVaWkxFOjEsTk9UQ0g6Mn19O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5KQUdHRURfVEVFVEg9dGhpcy5tYWtlSmFnZ2VkVGVldGgoKTt0aGlzLk5PVENIPXRoaXMubWFrZU5vdGNoKCk7dGhpcy5TVEFSVF9IQVQ9dGhpcy5tYWtlU3RhcnRIYXQoKTt0aGlzLlBVWlpMRV9UQUI9dGhpcy5tYWtlUHV6emxlVGFiKCk7dGhpcy5JTlNJREVfQ09STkVSUz10aGlzLm1ha2VJbnNpZGVDb3JuZXJzKCk7dGhpcy5PVVRTSURFX0NPUk5FUlM9dGhpcy5tYWtlT3V0c2lkZUNvcm5lcnMoKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5zZXRUaGVtZT1mdW5jdGlvbihhKXt0aGlzLmJsb2NrU3R5bGVzPXt9O3ZhciBiPWEuYmxvY2tTdHlsZXMsYztmb3IoYyBpbiBiKXRoaXMuYmxvY2tTdHlsZXNbY109dGhpcy52YWxpZGF0ZWRCbG9ja1N0eWxlXyhiW2NdKTt0aGlzLnNldER5bmFtaWNQcm9wZXJ0aWVzXyhhKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLnNldER5bmFtaWNQcm9wZXJ0aWVzXz1mdW5jdGlvbihhKXt0aGlzLnNldEZvbnRDb25zdGFudHNfKGEpO3RoaXMuc2V0Q29tcG9uZW50Q29uc3RhbnRzXyhhKTt0aGlzLkFERF9TVEFSVF9IQVRTPW51bGwhPWEuc3RhcnRIYXRzP2Euc3RhcnRIYXRzOnRoaXMuQUREX1NUQVJUX0hBVFN9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5zZXRGb250Q29uc3RhbnRzXz1mdW5jdGlvbihhKXt0aGlzLkZJRUxEX1RFWFRfRk9OVEZBTUlMWT1hLmZvbnRTdHlsZSYmdm9pZCAwIT1hLmZvbnRTdHlsZS5mYW1pbHk/YS5mb250U3R5bGUuZmFtaWx5OnRoaXMuRklFTERfVEVYVF9GT05URkFNSUxZO3RoaXMuRklFTERfVEVYVF9GT05UV0VJR0hUPWEuZm9udFN0eWxlJiZ2b2lkIDAhPWEuZm9udFN0eWxlLndlaWdodD9hLmZvbnRTdHlsZS53ZWlnaHQ6dGhpcy5GSUVMRF9URVhUX0ZPTlRXRUlHSFQ7dGhpcy5GSUVMRF9URVhUX0ZPTlRTSVpFPWEuZm9udFN0eWxlJiZ2b2lkIDAhPWEuZm9udFN0eWxlLnNpemU/YS5mb250U3R5bGUuc2l6ZTp0aGlzLkZJRUxEX1RFWFRfRk9OVFNJWkU7YT1CbG9ja2x5LnV0aWxzLmRvbS5tZWFzdXJlRm9udE1ldHJpY3MoXCJIZ1wiLHRoaXMuRklFTERfVEVYVF9GT05UU0laRStcInB0XCIsdGhpcy5GSUVMRF9URVhUX0ZPTlRXRUlHSFQsXG50aGlzLkZJRUxEX1RFWFRfRk9OVEZBTUlMWSk7dGhpcy5GSUVMRF9URVhUX0hFSUdIVD1hLmhlaWdodDt0aGlzLkZJRUxEX1RFWFRfQkFTRUxJTkU9YS5iYXNlbGluZX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLnNldENvbXBvbmVudENvbnN0YW50c189ZnVuY3Rpb24oYSl7dGhpcy5DVVJTT1JfQ09MT1VSPWEuZ2V0Q29tcG9uZW50U3R5bGUoXCJjdXJzb3JDb2xvdXJcIil8fHRoaXMuQ1VSU09SX0NPTE9VUjt0aGlzLk1BUktFUl9DT0xPVVI9YS5nZXRDb21wb25lbnRTdHlsZShcIm1hcmtlckNvbG91clwiKXx8dGhpcy5NQVJLRVJfQ09MT1VSO3RoaXMuSU5TRVJUSU9OX01BUktFUl9DT0xPVVI9YS5nZXRDb21wb25lbnRTdHlsZShcImluc2VydGlvbk1hcmtlckNvbG91clwiKXx8dGhpcy5JTlNFUlRJT05fTUFSS0VSX0NPTE9VUjt0aGlzLklOU0VSVElPTl9NQVJLRVJfT1BBQ0lUWT1OdW1iZXIoYS5nZXRDb21wb25lbnRTdHlsZShcImluc2VydGlvbk1hcmtlck9wYWNpdHlcIikpfHx0aGlzLklOU0VSVElPTl9NQVJLRVJfT1BBQ0lUWX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdldEJsb2NrU3R5bGVGb3JDb2xvdXI9ZnVuY3Rpb24oYSl7dmFyIGI9XCJhdXRvX1wiK2E7dGhpcy5ibG9ja1N0eWxlc1tiXXx8KHRoaXMuYmxvY2tTdHlsZXNbYl09dGhpcy5jcmVhdGVCbG9ja1N0eWxlXyhhKSk7cmV0dXJue3N0eWxlOnRoaXMuYmxvY2tTdHlsZXNbYl0sbmFtZTpifX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5nZXRCbG9ja1N0eWxlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJsb2NrU3R5bGVzW2F8fFwiXCJdfHwoYSYmMD09YS5pbmRleE9mKFwiYXV0b19cIik/dGhpcy5nZXRCbG9ja1N0eWxlRm9yQ29sb3VyKGEuc3Vic3RyaW5nKDUpKS5zdHlsZTp0aGlzLmNyZWF0ZUJsb2NrU3R5bGVfKFwiIzAwMDAwMFwiKSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuY3JlYXRlQmxvY2tTdHlsZV89ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudmFsaWRhdGVkQmxvY2tTdHlsZV8oe2NvbG91clByaW1hcnk6YX0pfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUudmFsaWRhdGVkQmxvY2tTdHlsZV89ZnVuY3Rpb24oYSl7dmFyIGI9e307YSYmQmxvY2tseS51dGlscy5vYmplY3QubWl4aW4oYixhKTthPUJsb2NrbHkudXRpbHMucGFyc2VCbG9ja0NvbG91cihiLmNvbG91clByaW1hcnl8fFwiIzAwMFwiKTtiLmNvbG91clByaW1hcnk9YS5oZXg7Yi5jb2xvdXJTZWNvbmRhcnk9Yi5jb2xvdXJTZWNvbmRhcnk/QmxvY2tseS51dGlscy5wYXJzZUJsb2NrQ29sb3VyKGIuY29sb3VyU2Vjb25kYXJ5KS5oZXg6dGhpcy5nZW5lcmF0ZVNlY29uZGFyeUNvbG91cl8oYi5jb2xvdXJQcmltYXJ5KTtiLmNvbG91clRlcnRpYXJ5PWIuY29sb3VyVGVydGlhcnk/QmxvY2tseS51dGlscy5wYXJzZUJsb2NrQ29sb3VyKGIuY29sb3VyVGVydGlhcnkpLmhleDp0aGlzLmdlbmVyYXRlVGVydGlhcnlDb2xvdXJfKGIuY29sb3VyUHJpbWFyeSk7Yi5oYXQ9Yi5oYXR8fFwiXCI7cmV0dXJuIGJ9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5nZW5lcmF0ZVNlY29uZGFyeUNvbG91cl89ZnVuY3Rpb24oYSl7cmV0dXJuIEJsb2NrbHkudXRpbHMuY29sb3VyLmJsZW5kKFwiI2ZmZlwiLGEsLjYpfHxhfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdlbmVyYXRlVGVydGlhcnlDb2xvdXJfPWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LnV0aWxzLmNvbG91ci5ibGVuZChcIiNmZmZcIixhLC4zKXx8YX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmVtYm9zc0ZpbHRlcl8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5lbWJvc3NGaWx0ZXJfKTt0aGlzLmRpc2FibGVkUGF0dGVybl8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5kaXNhYmxlZFBhdHRlcm5fKTt0aGlzLmRlYnVnRmlsdGVyXyYmQmxvY2tseS51dGlscy5kb20ucmVtb3ZlTm9kZSh0aGlzLmRlYnVnRmlsdGVyXyk7dGhpcy5jc3NOb2RlXz1udWxsfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUubWFrZUphZ2dlZFRlZXRoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5KQUdHRURfVEVFVEhfSEVJR0hULGI9dGhpcy5KQUdHRURfVEVFVEhfV0lEVEgsYz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmUoW0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoYixhLzQpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoMiotYixhLzIpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoYixhLzQpXSk7cmV0dXJue2hlaWdodDphLHdpZHRoOmIscGF0aDpjfX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VTdGFydEhhdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuU1RBUlRfSEFUX0hFSUdIVCxiPXRoaXMuU1RBUlRfSEFUX1dJRFRILGM9QmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcImNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgzMCwtYSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCg3MCwtYSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChiLDApXSk7cmV0dXJue2hlaWdodDphLHdpZHRoOmIscGF0aDpjfX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VQdXp6bGVUYWI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGYpe2Y9Zj8tMToxO3ZhciBnPS1mLGg9Yy8yLGs9aCsyLjUsbD1oKy41LG09QmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgtYixmKmgpO2g9QmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChiLGYqaCk7cmV0dXJuIEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuY3VydmUoXCJjXCIsW0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoMCxmKmspLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLWIsZypsKSxtXSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcInNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChiLDIuNSpnKSxoXSl9dmFyIGI9dGhpcy5UQUJfV0lEVEgsYz10aGlzLlRBQl9IRUlHSFQsZD1hKCEwKSxlPWEoITEpO3JldHVybnt0eXBlOnRoaXMuU0hBUEVTLlBVWlpMRSx3aWR0aDpiLGhlaWdodDpjLFxucGF0aERvd246ZSxwYXRoVXA6ZH19O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUubWFrZU5vdGNoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShnKXtyZXR1cm4gQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lKFtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGcqZCxjKSxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KDMqZywwKSxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGcqZCwtYyldKX12YXIgYj10aGlzLk5PVENIX1dJRFRILGM9dGhpcy5OT1RDSF9IRUlHSFQsZD0oYi0zKS8yLGU9YSgxKSxmPWEoLTEpO3JldHVybnt0eXBlOnRoaXMuU0hBUEVTLk5PVENILHdpZHRoOmIsaGVpZ2h0OmMscGF0aExlZnQ6ZSxwYXRoUmlnaHQ6Zn19O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5tYWtlSW5zaWRlQ29ybmVycz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuQ09STkVSX1JBRElVUyxiPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDBcIixhLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLWEsYSkpLGM9QmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMFwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChhLGEpKTtyZXR1cm57d2lkdGg6YSxoZWlnaHQ6YSxwYXRoVG9wOmIscGF0aEJvdHRvbTpjfX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VPdXRzaWRlQ29ybmVycz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuQ09STkVSX1JBRElVUyxiPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KDAsYSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChhLC1hKSksYz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwxXCIsYSxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGEsYSkpLGQ9QmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgtYSwtYSkpLGU9QmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgtYSxhKSk7cmV0dXJue3RvcExlZnQ6Yix0b3BSaWdodDpjLGJvdHRvbVJpZ2h0OmUsYm90dG9tTGVmdDpkLFxucmlnaHRIZWlnaHQ6YX19O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuc2hhcGVGb3I9ZnVuY3Rpb24oYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSBCbG9ja2x5LklOUFVUX1ZBTFVFOmNhc2UgQmxvY2tseS5PVVRQVVRfVkFMVUU6cmV0dXJuIHRoaXMuUFVaWkxFX1RBQjtjYXNlIEJsb2NrbHkuUFJFVklPVVNfU1RBVEVNRU5UOmNhc2UgQmxvY2tseS5ORVhUX1NUQVRFTUVOVDpyZXR1cm4gdGhpcy5OT1RDSDtkZWZhdWx0OnRocm93IEVycm9yKFwiVW5rbm93biBjb25uZWN0aW9uIHR5cGVcIik7fX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmNyZWF0ZURvbT1mdW5jdGlvbihhLGIsYyl7dGhpcy5pbmplY3RDU1NfKGIsYyk7YT1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkRFRlMse30sYSk7Yj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZJTFRFUix7aWQ6XCJibG9ja2x5RW1ib3NzRmlsdGVyXCIrdGhpcy5yYW5kb21JZGVudGlmaWVyfSxhKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFR0FVU1NJQU5CTFVSLHtcImluXCI6XCJTb3VyY2VBbHBoYVwiLHN0ZERldmlhdGlvbjoxLHJlc3VsdDpcImJsdXJcIn0sYik7Yz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFU1BFQ1VMQVJMSUdIVElORyx7XCJpblwiOlwiYmx1clwiLHN1cmZhY2VTY2FsZToxLHNwZWN1bGFyQ29uc3RhbnQ6LjUsXG5zcGVjdWxhckV4cG9uZW50OjEwLFwibGlnaHRpbmctY29sb3JcIjpcIndoaXRlXCIscmVzdWx0Olwic3BlY091dFwifSxiKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFUE9JTlRMSUdIVCx7eDotNUUzLHk6LTFFNCx6OjJFNH0sYyk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5GRUNPTVBPU0lURSx7XCJpblwiOlwic3BlY091dFwiLGluMjpcIlNvdXJjZUFscGhhXCIsb3BlcmF0b3I6XCJpblwiLHJlc3VsdDpcInNwZWNPdXRcIn0sYik7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5GRUNPTVBPU0lURSx7XCJpblwiOlwiU291cmNlR3JhcGhpY1wiLGluMjpcInNwZWNPdXRcIixvcGVyYXRvcjpcImFyaXRobWV0aWNcIixrMTowLGsyOjEsazM6MSxrNDowfSxiKTt0aGlzLmVtYm9zc0ZpbHRlcklkPWIuaWQ7dGhpcy5lbWJvc3NGaWx0ZXJfPWI7Yj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVFRFUk4sXG57aWQ6XCJibG9ja2x5RGlzYWJsZWRQYXR0ZXJuXCIrdGhpcy5yYW5kb21JZGVudGlmaWVyLHBhdHRlcm5Vbml0czpcInVzZXJTcGFjZU9uVXNlXCIsd2lkdGg6MTAsaGVpZ2h0OjEwfSxhKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlJFQ1Qse3dpZHRoOjEwLGhlaWdodDoxMCxmaWxsOlwiI2FhYVwifSxiKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse2Q6XCJNIDAgMCBMIDEwIDEwIE0gMTAgMCBMIDAgMTBcIixzdHJva2U6XCIjY2MwXCJ9LGIpO3RoaXMuZGlzYWJsZWRQYXR0ZXJuSWQ9Yi5pZDt0aGlzLmRpc2FibGVkUGF0dGVybl89YjtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRlYnVnJiYoYT1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZJTFRFUix7aWQ6XCJibG9ja2x5RGVidWdGaWx0ZXJcIit0aGlzLnJhbmRvbUlkZW50aWZpZXIsaGVpZ2h0OlwiMTYwJVwiLFxud2lkdGg6XCIxODAlXCIseTpcIi0zMCVcIix4OlwiLTQwJVwifSxhKSxiPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVDT01QT05FTlRUUkFOU0ZFUix7cmVzdWx0Olwib3V0Qmx1clwifSxhKSxCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFRlVOQ0Ese3R5cGU6XCJ0YWJsZVwiLHRhYmxlVmFsdWVzOlwiMCAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxXCJ9LGIpLEJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVGTE9PRCx7XCJmbG9vZC1jb2xvclwiOlwiI2ZmMDAwMFwiLFwiZmxvb2Qtb3BhY2l0eVwiOi41LHJlc3VsdDpcIm91dENvbG9yXCJ9LGEpLEJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVDT01QT1NJVEUse1wiaW5cIjpcIm91dENvbG9yXCIsaW4yOlwib3V0Qmx1clwiLG9wZXJhdG9yOlwiaW5cIixyZXN1bHQ6XCJvdXRHbG93XCJ9LFxuYSksdGhpcy5kZWJ1Z0ZpbHRlcklkPWEuaWQsdGhpcy5kZWJ1Z0ZpbHRlcl89YSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuaW5qZWN0Q1NTXz1mdW5jdGlvbihhLGIpe2I9dGhpcy5nZXRDU1NfKGIpO2E9XCJibG9ja2x5LXJlbmRlcmVyLXN0eWxlLVwiK2E7dGhpcy5jc3NOb2RlXz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKTt2YXIgYz1iLmpvaW4oXCJcXG5cIik7dGhpcy5jc3NOb2RlXz90aGlzLmNzc05vZGVfLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQ9YzooYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksYi5pZD1hLGE9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYyksYi5hcHBlbmRDaGlsZChhKSxkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZShiLGRvY3VtZW50LmhlYWQuZmlyc3RDaGlsZCksdGhpcy5jc3NOb2RlXz1iKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdldENTU189ZnVuY3Rpb24oYSl7cmV0dXJuW2ErXCIgLmJsb2NrbHlUZXh0LCBcIixhK1wiIC5ibG9ja2x5Rmx5b3V0TGFiZWxUZXh0IHtcIixcImZvbnQ6IFwiK3RoaXMuRklFTERfVEVYVF9GT05UV0VJR0hUK1wiIFwiK3RoaXMuRklFTERfVEVYVF9GT05UU0laRStcInB0IFwiK3RoaXMuRklFTERfVEVYVF9GT05URkFNSUxZK1wiO1wiLFwifVwiLGErXCIgLmJsb2NrbHlUZXh0IHtcIixcImZpbGw6ICNmZmY7XCIsXCJ9XCIsYStcIiAuYmxvY2tseU5vbkVkaXRhYmxlVGV4dD5yZWN0LFwiLGErXCIgLmJsb2NrbHlFZGl0YWJsZVRleHQ+cmVjdCB7XCIsXCJmaWxsOiBcIit0aGlzLkZJRUxEX0JPUkRFUl9SRUNUX0NPTE9VUitcIjtcIixcImZpbGwtb3BhY2l0eTogLjY7XCIsXCJzdHJva2U6IG5vbmU7XCIsXCJ9XCIsYStcIiAuYmxvY2tseU5vbkVkaXRhYmxlVGV4dD50ZXh0LFwiLGErXCIgLmJsb2NrbHlFZGl0YWJsZVRleHQ+dGV4dCB7XCIsXCJmaWxsOiAjMDAwO1wiLFxuXCJ9XCIsYStcIiAuYmxvY2tseUZseW91dExhYmVsVGV4dCB7XCIsXCJmaWxsOiAjMDAwO1wiLFwifVwiLGErXCIgLmJsb2NrbHlUZXh0LmJsb2NrbHlCdWJibGVUZXh0IHtcIixcImZpbGw6ICMwMDA7XCIsXCJ9XCIsYStcIiAuYmxvY2tseUVkaXRhYmxlVGV4dDpub3QoLmVkaXRpbmcpOmhvdmVyPnJlY3Qge1wiLFwic3Ryb2tlOiAjZmZmO1wiLFwic3Ryb2tlLXdpZHRoOiAyO1wiLFwifVwiLGErXCIgLmJsb2NrbHlIdG1sSW5wdXQge1wiLFwiZm9udC1mYW1pbHk6IFwiK3RoaXMuRklFTERfVEVYVF9GT05URkFNSUxZK1wiO1wiLFwiZm9udC13ZWlnaHQ6IFwiK3RoaXMuRklFTERfVEVYVF9GT05UV0VJR0hUK1wiO1wiLFwifVwiLGErXCIgLmJsb2NrbHlTZWxlY3RlZD4uYmxvY2tseVBhdGgge1wiLFwic3Ryb2tlOiAjZmMzO1wiLFwic3Ryb2tlLXdpZHRoOiAzcHg7XCIsXCJ9XCIsYStcIiAuYmxvY2tseUhpZ2hsaWdodGVkQ29ubmVjdGlvblBhdGgge1wiLFwic3Ryb2tlOiAjZmMzO1wiLFwifVwiLGErXCIgLmJsb2NrbHlSZXBsYWNlYWJsZSAuYmxvY2tseVBhdGgge1wiLFxuXCJmaWxsLW9wYWNpdHk6IC41O1wiLFwifVwiLGErXCIgLmJsb2NrbHlSZXBsYWNlYWJsZSAuYmxvY2tseVBhdGhMaWdodCxcIixhK1wiIC5ibG9ja2x5UmVwbGFjZWFibGUgLmJsb2NrbHlQYXRoRGFyayB7XCIsXCJkaXNwbGF5OiBub25lO1wiLFwifVwiLGErXCIgLmJsb2NrbHlJbnNlcnRpb25NYXJrZXI+LmJsb2NrbHlQYXRoIHtcIixcImZpbGwtb3BhY2l0eTogXCIrdGhpcy5JTlNFUlRJT05fTUFSS0VSX09QQUNJVFkrXCI7XCIsXCJzdHJva2U6IG5vbmU7XCIsXCJ9XCJdfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zz1mdW5jdGlvbihhLGIsYyl7dGhpcy53b3Jrc3BhY2VfPWE7dGhpcy5tYXJrZXJfPWM7dGhpcy5wYXJlbnRfPW51bGw7dGhpcy5jb25zdGFudHNfPWI7dGhpcy5jdXJyZW50TWFya2VyU3ZnPW51bGw7YT10aGlzLmlzQ3Vyc29yKCk/dGhpcy5jb25zdGFudHNfLkNVUlNPUl9DT0xPVVI6dGhpcy5jb25zdGFudHNfLk1BUktFUl9DT0xPVVI7dGhpcy5jb2xvdXJfPWMuY29sb3VyfHxhfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5DVVJTT1JfQ0xBU1M9XCJibG9ja2x5Q3Vyc29yXCI7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcuTUFSS0VSX0NMQVNTPVwiYmxvY2tseU1hcmtlclwiO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLkhFSUdIVF9NVUxUSVBMSUVSPS43NTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuZ2V0U3ZnUm9vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN2Z0dyb3VwX307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuZ2V0TWFya2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFya2VyX307QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLmlzQ3Vyc29yPWZ1bmN0aW9uKCl7cmV0dXJuXCJjdXJzb3JcIj09dGhpcy5tYXJrZXJfLnR5cGV9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5jcmVhdGVEb209ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmlzQ3Vyc29yKCk/QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcuQ1VSU09SX0NMQVNTOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLk1BUktFUl9DTEFTUzt0aGlzLnN2Z0dyb3VwXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkcse1wiY2xhc3NcIjphfSxudWxsKTt0aGlzLmNyZWF0ZURvbUludGVybmFsXygpO3JldHVybiB0aGlzLnN2Z0dyb3VwX307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2V0UGFyZW50Xz1mdW5jdGlvbihhKXt0aGlzLmlzQ3Vyc29yKCk/KHRoaXMucGFyZW50XyYmdGhpcy5wYXJlbnRfLnNldEN1cnNvclN2ZyhudWxsKSxhLnNldEN1cnNvclN2Zyh0aGlzLmdldFN2Z1Jvb3QoKSkpOih0aGlzLnBhcmVudF8mJnRoaXMucGFyZW50Xy5zZXRNYXJrZXJTdmcobnVsbCksYS5zZXRNYXJrZXJTdmcodGhpcy5nZXRTdmdSb290KCkpKTt0aGlzLnBhcmVudF89YX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbihhLGIpe2lmKGIpe3RoaXMuY29uc3RhbnRzXz10aGlzLndvcmtzcGFjZV8uZ2V0UmVuZGVyZXIoKS5nZXRDb25zdGFudHMoKTt2YXIgYz10aGlzLmlzQ3Vyc29yKCk/dGhpcy5jb25zdGFudHNfLkNVUlNPUl9DT0xPVVI6dGhpcy5jb25zdGFudHNfLk1BUktFUl9DT0xPVVI7dGhpcy5jb2xvdXJfPXRoaXMubWFya2VyXy5jb2xvdXJ8fGM7dGhpcy5hcHBseUNvbG91cl8oYik7dGhpcy5zaG93QXRMb2NhdGlvbl8oYik7dGhpcy5maXJlTWFya2VyRXZlbnRfKGEsYik7YT10aGlzLmN1cnJlbnRNYXJrZXJTdmcuY2hpbGROb2Rlc1swXTt2b2lkIDAhPT1hJiZhLmJlZ2luRWxlbWVudCYmYS5iZWdpbkVsZW1lbnQoKX1lbHNlIHRoaXMuaGlkZSgpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5zaG93QXRMb2NhdGlvbl89ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRMb2NhdGlvbigpO2EuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0s/dGhpcy5zaG93V2l0aEJsb2NrXyhhKTphLmdldFR5cGUoKT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLk9VVFBVVD90aGlzLnNob3dXaXRoT3V0cHV0XyhhKTpiLnR5cGU9PUJsb2NrbHkuSU5QVVRfVkFMVUU/dGhpcy5zaG93V2l0aElucHV0XyhhKTpiLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/dGhpcy5zaG93V2l0aE5leHRfKGEpOmEuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuUFJFVklPVVM/dGhpcy5zaG93V2l0aFByZXZpb3VzXyhhKTphLmdldFR5cGUoKT09QmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEP3RoaXMuc2hvd1dpdGhGaWVsZF8oYSk6YS5nZXRUeXBlKCk9PUJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0U/XG50aGlzLnNob3dXaXRoQ29vcmRpbmF0ZXNfKGEpOmEuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuU1RBQ0smJnRoaXMuc2hvd1dpdGhTdGFja18oYSl9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLnNob3dXaXRoQmxvY2tQcmV2T3V0cHV0Xz1mdW5jdGlvbihhKXthPWEuZ2V0U291cmNlQmxvY2soKTt2YXIgYj1hLndpZHRoLGM9YS5oZWlnaHQsZD1jKkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLkhFSUdIVF9NVUxUSVBMSUVSLGU9dGhpcy5jb25zdGFudHNfLkNVUlNPUl9CTE9DS19QQURESU5HO2lmKGEucHJldmlvdXNDb25uZWN0aW9uKXt2YXIgZj10aGlzLmNvbnN0YW50c18uc2hhcGVGb3IoYS5wcmV2aW91c0Nvbm5lY3Rpb24pO3RoaXMucG9zaXRpb25QcmV2aW91c18oYixlLGQsZil9ZWxzZSBhLm91dHB1dENvbm5lY3Rpb24/KGY9dGhpcy5jb25zdGFudHNfLnNoYXBlRm9yKGEub3V0cHV0Q29ubmVjdGlvbiksdGhpcy5wb3NpdGlvbk91dHB1dF8oYixjLGYpKTp0aGlzLnBvc2l0aW9uQmxvY2tfKGIsZSxkKTt0aGlzLnNldFBhcmVudF8oYSk7dGhpcy5zaG93Q3VycmVudF8oKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd1dpdGhCbG9ja189ZnVuY3Rpb24oYSl7dGhpcy5zaG93V2l0aEJsb2NrUHJldk91dHB1dF8oYSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5zaG93V2l0aFByZXZpb3VzXz1mdW5jdGlvbihhKXt0aGlzLnNob3dXaXRoQmxvY2tQcmV2T3V0cHV0XyhhKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLnNob3dXaXRoT3V0cHV0Xz1mdW5jdGlvbihhKXt0aGlzLnNob3dXaXRoQmxvY2tQcmV2T3V0cHV0XyhhKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd1dpdGhDb29yZGluYXRlc189ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRXc0Nvb3JkaW5hdGUoKTthPWIueDtiPWIueTt0aGlzLndvcmtzcGFjZV8uUlRMJiYoYS09dGhpcy5jb25zdGFudHNfLkNVUlNPUl9XU19XSURUSCk7dGhpcy5wb3NpdGlvbkxpbmVfKGEsYix0aGlzLmNvbnN0YW50c18uQ1VSU09SX1dTX1dJRFRIKTt0aGlzLnNldFBhcmVudF8odGhpcy53b3Jrc3BhY2VfKTt0aGlzLnNob3dDdXJyZW50XygpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd1dpdGhGaWVsZF89ZnVuY3Rpb24oYSl7YT1hLmdldExvY2F0aW9uKCk7dmFyIGI9YS5nZXRTaXplKCkud2lkdGgsYz1hLmdldFNpemUoKS5oZWlnaHQ7dGhpcy5wb3NpdGlvblJlY3RfKDAsMCxiLGMpO3RoaXMuc2V0UGFyZW50XyhhKTt0aGlzLnNob3dDdXJyZW50XygpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5zaG93V2l0aElucHV0Xz1mdW5jdGlvbihhKXthPWEuZ2V0TG9jYXRpb24oKTt2YXIgYj1hLmdldFNvdXJjZUJsb2NrKCk7dGhpcy5wb3NpdGlvbklucHV0XyhhKTt0aGlzLnNldFBhcmVudF8oYik7dGhpcy5zaG93Q3VycmVudF8oKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLnNob3dXaXRoTmV4dF89ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRMb2NhdGlvbigpO2E9Yi5nZXRTb3VyY2VCbG9jaygpO3ZhciBjPTA7Yj1iLmdldE9mZnNldEluQmxvY2soKS55O3ZhciBkPWEuZ2V0SGVpZ2h0V2lkdGgoKS53aWR0aDt0aGlzLndvcmtzcGFjZV8uUlRMJiYoYz0tZCk7dGhpcy5wb3NpdGlvbkxpbmVfKGMsYixkKTt0aGlzLnNldFBhcmVudF8oYSk7dGhpcy5zaG93Q3VycmVudF8oKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd1dpdGhTdGFja189ZnVuY3Rpb24oYSl7YT1hLmdldExvY2F0aW9uKCk7dmFyIGI9YS5nZXRIZWlnaHRXaWR0aCgpLGM9Yi53aWR0aCt0aGlzLmNvbnN0YW50c18uQ1VSU09SX1NUQUNLX1BBRERJTkc7Yj1iLmhlaWdodCt0aGlzLmNvbnN0YW50c18uQ1VSU09SX1NUQUNLX1BBRERJTkc7dmFyIGQ9LXRoaXMuY29uc3RhbnRzXy5DVVJTT1JfU1RBQ0tfUEFERElORy8yLGU9LXRoaXMuY29uc3RhbnRzXy5DVVJTT1JfU1RBQ0tfUEFERElORy8yLGY9ZDt0aGlzLndvcmtzcGFjZV8uUlRMJiYoZj0tKGMrZCkpO3RoaXMucG9zaXRpb25SZWN0XyhmLGUsYyxiKTt0aGlzLnNldFBhcmVudF8oYSk7dGhpcy5zaG93Q3VycmVudF8oKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd0N1cnJlbnRfPWZ1bmN0aW9uKCl7dGhpcy5oaWRlKCk7dGhpcy5jdXJyZW50TWFya2VyU3ZnLnN0eWxlLmRpc3BsYXk9XCJcIn07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLnBvc2l0aW9uQmxvY2tfPWZ1bmN0aW9uKGEsYixjKXthPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KC1iLGMpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIiwtYikrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiSFwiLGErMipiKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJWXCIsYyk7dGhpcy5tYXJrZXJCbG9ja18uc2V0QXR0cmlidXRlKFwiZFwiLGEpO3RoaXMud29ya3NwYWNlXy5SVEwmJnRoaXMuZmxpcFJ0bF8odGhpcy5tYXJrZXJCbG9ja18pO3RoaXMuY3VycmVudE1hcmtlclN2Zz10aGlzLm1hcmtlckJsb2NrX307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUucG9zaXRpb25JbnB1dF89ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRPZmZzZXRJbkJsb2NrKCkueCxjPWEuZ2V0T2Zmc2V0SW5CbG9jaygpLnk7YT1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbygwLDApK3RoaXMuY29uc3RhbnRzXy5zaGFwZUZvcihhKS5wYXRoRG93bjt0aGlzLm1hcmtlcklucHV0Xy5zZXRBdHRyaWJ1dGUoXCJkXCIsYSk7dGhpcy5tYXJrZXJJbnB1dF8uc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIrYitcIixcIitjK1wiKVwiKyh0aGlzLndvcmtzcGFjZV8uUlRMP1wiIHNjYWxlKC0xIDEpXCI6XCJcIikpO3RoaXMuY3VycmVudE1hcmtlclN2Zz10aGlzLm1hcmtlcklucHV0X307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUucG9zaXRpb25MaW5lXz1mdW5jdGlvbihhLGIsYyl7dGhpcy5tYXJrZXJTdmdMaW5lXy5zZXRBdHRyaWJ1dGUoXCJ4XCIsYSk7dGhpcy5tYXJrZXJTdmdMaW5lXy5zZXRBdHRyaWJ1dGUoXCJ5XCIsYik7dGhpcy5tYXJrZXJTdmdMaW5lXy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGMpO3RoaXMuY3VycmVudE1hcmtlclN2Zz10aGlzLm1hcmtlclN2Z0xpbmVffTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5wb3NpdGlvbk91dHB1dF89ZnVuY3Rpb24oYSxiLGMpe2E9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoYSwwKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsLShhLWMud2lkdGgpKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsdGhpcy5jb25zdGFudHNfLlRBQl9PRkZTRVRfRlJPTV9UT1ApK2MucGF0aERvd24rQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGIpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixhKTt0aGlzLm1hcmtlckJsb2NrXy5zZXRBdHRyaWJ1dGUoXCJkXCIsYSk7dGhpcy53b3Jrc3BhY2VfLlJUTCYmdGhpcy5mbGlwUnRsXyh0aGlzLm1hcmtlckJsb2NrXyk7dGhpcy5jdXJyZW50TWFya2VyU3ZnPXRoaXMubWFya2VyQmxvY2tffTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5wb3NpdGlvblByZXZpb3VzXz1mdW5jdGlvbihhLGIsYyxkKXthPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KC1iLGMpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIiwtYikrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiSFwiLHRoaXMuY29uc3RhbnRzXy5OT1RDSF9PRkZTRVRfTEVGVCkrZC5wYXRoTGVmdCtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJIXCIsYSsyKmIpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIixjKTt0aGlzLm1hcmtlckJsb2NrXy5zZXRBdHRyaWJ1dGUoXCJkXCIsYSk7dGhpcy53b3Jrc3BhY2VfLlJUTCYmdGhpcy5mbGlwUnRsXyh0aGlzLm1hcmtlckJsb2NrXyk7dGhpcy5jdXJyZW50TWFya2VyU3ZnPXRoaXMubWFya2VyQmxvY2tffTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5wb3NpdGlvblJlY3RfPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubWFya2VyU3ZnUmVjdF8uc2V0QXR0cmlidXRlKFwieFwiLGEpO3RoaXMubWFya2VyU3ZnUmVjdF8uc2V0QXR0cmlidXRlKFwieVwiLGIpO3RoaXMubWFya2VyU3ZnUmVjdF8uc2V0QXR0cmlidXRlKFwid2lkdGhcIixjKTt0aGlzLm1hcmtlclN2Z1JlY3RfLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGQpO3RoaXMuY3VycmVudE1hcmtlclN2Zz10aGlzLm1hcmtlclN2Z1JlY3RffTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuZmxpcFJ0bF89ZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInNjYWxlKC0xIDEpXCIpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5tYXJrZXJTdmdMaW5lXy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3RoaXMubWFya2VyU3ZnUmVjdF8uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt0aGlzLm1hcmtlcklucHV0Xy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3RoaXMubWFya2VyQmxvY2tfLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5maXJlTWFya2VyRXZlbnRfPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5nZXRTb3VyY2VCbG9jaygpLGQ9dGhpcy5pc0N1cnNvcigpP1wiY3Vyc29yTW92ZVwiOlwibWFya2VyTW92ZVwiO2E9bmV3IEJsb2NrbHkuRXZlbnRzLlVpKGMsZCxhLGIpO2IuZ2V0VHlwZSgpPT1CbG9ja2x5LkFTVE5vZGUudHlwZXMuV09SS1NQQUNFJiYoYS53b3Jrc3BhY2VJZD1iLmdldExvY2F0aW9uKCkuaWQpO0Jsb2NrbHkuRXZlbnRzLmZpcmUoYSl9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcucHJvdG90eXBlLmdldEJsaW5rUHJvcGVydGllc189ZnVuY3Rpb24oKXtyZXR1cm57YXR0cmlidXRlVHlwZTpcIlhNTFwiLGF0dHJpYnV0ZU5hbWU6XCJmaWxsXCIsZHVyOlwiMXNcIix2YWx1ZXM6dGhpcy5jb2xvdXJfK1wiO3RyYW5zcGFyZW50O3RyYW5zcGFyZW50O1wiLHJlcGVhdENvdW50OlwiaW5kZWZpbml0ZVwifX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuY3JlYXRlRG9tSW50ZXJuYWxfPWZ1bmN0aW9uKCl7dGhpcy5tYXJrZXJTdmdfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRyx7d2lkdGg6dGhpcy5jb25zdGFudHNfLkNVUlNPUl9XU19XSURUSCxoZWlnaHQ6dGhpcy5jb25zdGFudHNfLldTX0NVUlNPUl9IRUlHSFR9LHRoaXMuc3ZnR3JvdXBfKTt0aGlzLm1hcmtlclN2Z0xpbmVfPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUkVDVCx7d2lkdGg6dGhpcy5jb25zdGFudHNfLkNVUlNPUl9XU19XSURUSCxoZWlnaHQ6dGhpcy5jb25zdGFudHNfLldTX0NVUlNPUl9IRUlHSFQsc3R5bGU6XCJkaXNwbGF5OiBub25lXCJ9LHRoaXMubWFya2VyU3ZnXyk7dGhpcy5tYXJrZXJTdmdSZWN0Xz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlJFQ1QsXG57XCJjbGFzc1wiOlwiYmxvY2tseVZlcnRpY2FsTWFya2VyXCIscng6MTAscnk6MTAsc3R5bGU6XCJkaXNwbGF5OiBub25lXCJ9LHRoaXMubWFya2VyU3ZnXyk7dGhpcy5tYXJrZXJJbnB1dF89QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5QQVRILHt0cmFuc2Zvcm06XCJcIixzdHlsZTpcImRpc3BsYXk6IG5vbmVcIn0sdGhpcy5tYXJrZXJTdmdfKTt0aGlzLm1hcmtlckJsb2NrXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse3RyYW5zZm9ybTpcIlwiLHN0eWxlOlwiZGlzcGxheTogbm9uZVwiLGZpbGw6XCJub25lXCIsXCJzdHJva2Utd2lkdGhcIjp0aGlzLmNvbnN0YW50c18uQ1VSU09SX1NUUk9LRV9XSURUSH0sdGhpcy5tYXJrZXJTdmdfKTtpZih0aGlzLmlzQ3Vyc29yKCkpe3ZhciBhPXRoaXMuZ2V0QmxpbmtQcm9wZXJ0aWVzXygpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuQU5JTUFURSxcbmEsdGhpcy5tYXJrZXJTdmdMaW5lXyk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5BTklNQVRFLGEsdGhpcy5tYXJrZXJJbnB1dF8pO2EuYXR0cmlidXRlTmFtZT1cInN0cm9rZVwiO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuQU5JTUFURSxhLHRoaXMubWFya2VyQmxvY2tfKX1yZXR1cm4gdGhpcy5tYXJrZXJTdmdffTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnLnByb3RvdHlwZS5hcHBseUNvbG91cl89ZnVuY3Rpb24oYSl7dGhpcy5tYXJrZXJTdmdMaW5lXy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsdGhpcy5jb2xvdXJfKTt0aGlzLm1hcmtlclN2Z1JlY3RfLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLHRoaXMuY29sb3VyXyk7dGhpcy5tYXJrZXJJbnB1dF8uc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuY29sb3VyXyk7dGhpcy5tYXJrZXJCbG9ja18uc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsdGhpcy5jb2xvdXJfKTt0aGlzLmlzQ3Vyc29yKCkmJihhPXRoaXMuY29sb3VyXytcIjt0cmFuc3BhcmVudDt0cmFuc3BhcmVudDtcIix0aGlzLm1hcmtlclN2Z0xpbmVfLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVzXCIsYSksdGhpcy5tYXJrZXJJbnB1dF8uZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZXNcIixhKSx0aGlzLm1hcmtlckJsb2NrXy5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlc1wiLFxuYSkpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1hcmtlclN2Zy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuc3ZnR3JvdXBfJiZCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVOb2RlKHRoaXMuc3ZnR3JvdXBfKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcz17Tk9ORTowLEZJRUxEOjEsSEFUOjIsSUNPTjo0LFNQQUNFUjo4LEJFVFdFRU5fUk9XX1NQQUNFUjoxNixJTl9ST1dfU1BBQ0VSOjMyLEVYVEVSTkFMX1ZBTFVFX0lOUFVUOjY0LElOUFVUOjEyOCxJTkxJTkVfSU5QVVQ6MjU2LFNUQVRFTUVOVF9JTlBVVDo1MTIsQ09OTkVDVElPTjoxMDI0LFBSRVZJT1VTX0NPTk5FQ1RJT046MjA0OCxORVhUX0NPTk5FQ1RJT046NDA5NixPVVRQVVRfQ09OTkVDVElPTjo4MTkyLENPUk5FUjoxNjM4NCxMRUZUX1NRVUFSRV9DT1JORVI6MzI3NjgsTEVGVF9ST1VORF9DT1JORVI6NjU1MzYsUklHSFRfU1FVQVJFX0NPUk5FUjoxMzEwNzIsUklHSFRfUk9VTkRfQ09STkVSOjI2MjE0NCxKQUdHRURfRURHRTo1MjQyODgsUk9XOjEwNDg1NzYsVE9QX1JPVzoyMDk3MTUyLEJPVFRPTV9ST1c6NDE5NDMwNCxJTlBVVF9ST1c6ODM4ODYwOH07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkxFRlRfQ09STkVSPUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTEVGVF9TUVVBUkVfQ09STkVSfEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTEVGVF9ST1VORF9DT1JORVI7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5SSUdIVF9DT1JORVI9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5SSUdIVF9TUVVBUkVfQ09STkVSfEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuUklHSFRfUk9VTkRfQ09STkVSO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMubmV4dFR5cGVWYWx1ZV89MTY3NzcyMTY7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmdldFR5cGU9ZnVuY3Rpb24oYSl7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMsYSl8fChCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzW2FdPUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMubmV4dFR5cGVWYWx1ZV8sQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5uZXh0VHlwZVZhbHVlXzw8PTEpO3JldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzW2FdfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkZJRUxEfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0PWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5IQVR9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ljb249ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLklDT059O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTcGFjZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLlNQQUNFUn07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0luUm93U3BhY2VyPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5JTl9ST1dfU1BBQ0VSfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLklOUFVUfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRXh0ZXJuYWxJbnB1dD1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuRVhURVJOQUxfVkFMVUVfSU5QVVR9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lubGluZUlucHV0PWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5JTkxJTkVfSU5QVVR9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTdGF0ZW1lbnRJbnB1dD1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuU1RBVEVNRU5UX0lOUFVUfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUHJldmlvdXNDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5QUkVWSU9VU19DT05ORUNUSU9OfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLk5FWFRfQ09OTkVDVElPTn07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUHJldmlvdXNPck5leHRDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuUFJFVklPVVNfQ09OTkVDVElPTnxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLk5FWFRfQ09OTkVDVElPTil9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcj1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTEVGVF9ST1VORF9DT1JORVJ9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNSaWdodFJvdW5kZWRDb3JuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLlJJR0hUX1JPVU5EX0NPUk5FUn07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTGVmdFNxdWFyZUNvcm5lcj1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTEVGVF9TUVVBUkVfQ09STkVSfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUmlnaHRTcXVhcmVDb3JuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLlJJR0hUX1NRVUFSRV9DT1JORVJ9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNDb3JuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkNPUk5FUn07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0phZ2dlZEVkZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkpBR0dFRF9FREdFfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNSb3c9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLlJPV307QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0JldHdlZW5Sb3dTcGFjZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkJFVFdFRU5fUk9XX1NQQUNFUn07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1RvcFJvdz1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuVE9QX1JPV307QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0JvdHRvbVJvdz1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuQk9UVE9NX1JPV307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wT3JCb3R0b21Sb3c9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZSYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5UT1BfUk9XfEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuQk9UVE9NX1JPVyl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbnB1dFJvdz1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuSU5QVVRfUk9XfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1lYXN1cmFibGU9ZnVuY3Rpb24oYSl7dGhpcy5oZWlnaHQ9dGhpcy53aWR0aD0wO3RoaXMudHlwZT1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLk5PTkU7dGhpcy5jZW50ZXJsaW5lPXRoaXMueFBvcz0wO3RoaXMuY29uc3RhbnRzXz1hO3RoaXMubm90Y2hPZmZzZXQ9dGhpcy5jb25zdGFudHNfLk5PVENIX09GRlNFVF9MRUZUfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbm5lY3Rpb24uc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuY29ubmVjdGlvbk1vZGVsPWI7dGhpcy5zaGFwZT10aGlzLmNvbnN0YW50c18uc2hhcGVGb3IoYik7dGhpcy5pc0R5bmFtaWNTaGFwZT0hIXRoaXMuc2hhcGUuaXNEeW5hbWljO3RoaXMudHlwZXw9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5DT05ORUNUSU9OfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbm5lY3Rpb24sQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NZWFzdXJhYmxlKTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuT3V0cHV0Q29ubmVjdGlvbj1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuT3V0cHV0Q29ubmVjdGlvbi5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuT1VUUFVUX0NPTk5FQ1RJT047dGhpcy5oZWlnaHQ9dGhpcy5pc0R5bmFtaWNTaGFwZT8wOnRoaXMuc2hhcGUuaGVpZ2h0O3RoaXMuc3RhcnRYPXRoaXMud2lkdGg9dGhpcy5pc0R5bmFtaWNTaGFwZT8wOnRoaXMuc2hhcGUud2lkdGg7dGhpcy5jb25uZWN0aW9uT2Zmc2V0WT10aGlzLmNvbnN0YW50c18uVEFCX09GRlNFVF9GUk9NX1RPUDt0aGlzLmNvbm5lY3Rpb25PZmZzZXRYPTB9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuT3V0cHV0Q29ubmVjdGlvbixCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbm5lY3Rpb24pO1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5QcmV2aW91c0Nvbm5lY3Rpb249ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlByZXZpb3VzQ29ubmVjdGlvbi5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuUFJFVklPVVNfQ09OTkVDVElPTjt0aGlzLmhlaWdodD10aGlzLnNoYXBlLmhlaWdodDt0aGlzLndpZHRoPXRoaXMuc2hhcGUud2lkdGh9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUHJldmlvdXNDb25uZWN0aW9uLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29ubmVjdGlvbik7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk5leHRDb25uZWN0aW9uPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5OZXh0Q29ubmVjdGlvbi5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTkVYVF9DT05ORUNUSU9OO3RoaXMuaGVpZ2h0PXRoaXMuc2hhcGUuaGVpZ2h0O3RoaXMud2lkdGg9dGhpcy5zaGFwZS53aWR0aH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5OZXh0Q29ubmVjdGlvbixCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkNvbm5lY3Rpb24pO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5wdXRDb25uZWN0aW9uPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbnB1dENvbm5lY3Rpb24uc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYi5jb25uZWN0aW9uKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuSU5QVVQ7dGhpcy5pbnB1dD1iO3RoaXMuYWxpZ249Yi5hbGlnbjsodGhpcy5jb25uZWN0ZWRCbG9jaz1iLmNvbm5lY3Rpb24mJmIuY29ubmVjdGlvbi50YXJnZXRCbG9jaygpP2IuY29ubmVjdGlvbi50YXJnZXRCbG9jaygpOm51bGwpPyhhPXRoaXMuY29ubmVjdGVkQmxvY2suZ2V0SGVpZ2h0V2lkdGgoKSx0aGlzLmNvbm5lY3RlZEJsb2NrV2lkdGg9YS53aWR0aCx0aGlzLmNvbm5lY3RlZEJsb2NrSGVpZ2h0PWEuaGVpZ2h0KTp0aGlzLmNvbm5lY3RlZEJsb2NrSGVpZ2h0PXRoaXMuY29ubmVjdGVkQmxvY2tXaWR0aD0wO3RoaXMuY29ubmVjdGlvbk9mZnNldFk9dGhpcy5jb25uZWN0aW9uT2Zmc2V0WD1cbjB9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5wdXRDb25uZWN0aW9uLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29ubmVjdGlvbik7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLklubGluZUlucHV0PWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbmxpbmVJbnB1dC5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuSU5MSU5FX0lOUFVUO3RoaXMuY29ubmVjdGVkQmxvY2s/KHRoaXMud2lkdGg9dGhpcy5jb25uZWN0ZWRCbG9ja1dpZHRoLHRoaXMuaGVpZ2h0PXRoaXMuY29ubmVjdGVkQmxvY2tIZWlnaHQpOih0aGlzLmhlaWdodD10aGlzLmNvbnN0YW50c18uRU1QVFlfSU5MSU5FX0lOUFVUX0hFSUdIVCx0aGlzLndpZHRoPXRoaXMuY29uc3RhbnRzXy5FTVBUWV9JTkxJTkVfSU5QVVRfUEFERElORyk7dGhpcy5jb25uZWN0aW9uSGVpZ2h0PXRoaXMuaXNEeW5hbWljU2hhcGU/dGhpcy5zaGFwZS5oZWlnaHQodGhpcy5oZWlnaHQpOnRoaXMuc2hhcGUuaGVpZ2h0O3RoaXMuY29ubmVjdGlvbldpZHRoPXRoaXMuaXNEeW5hbWljU2hhcGU/XG50aGlzLnNoYXBlLndpZHRoKHRoaXMuaGVpZ2h0KTp0aGlzLnNoYXBlLndpZHRoO3RoaXMuY29ubmVjdGVkQmxvY2t8fCh0aGlzLndpZHRoKz10aGlzLmNvbm5lY3Rpb25XaWR0aCoodGhpcy5pc0R5bmFtaWNTaGFwZT8yOjEpKTt0aGlzLmNvbm5lY3Rpb25PZmZzZXRZPXRoaXMuaXNEeW5hbWljU2hhcGU/dGhpcy5zaGFwZS5jb25uZWN0aW9uT2Zmc2V0WSh0aGlzLmNvbm5lY3Rpb25IZWlnaHQpOnRoaXMuY29uc3RhbnRzXy5UQUJfT0ZGU0VUX0ZST01fVE9QO3RoaXMuY29ubmVjdGlvbk9mZnNldFg9dGhpcy5pc0R5bmFtaWNTaGFwZT90aGlzLnNoYXBlLmNvbm5lY3Rpb25PZmZzZXRYKHRoaXMuY29ubmVjdGlvbldpZHRoKTowfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLklubGluZUlucHV0LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5wdXRDb25uZWN0aW9uKTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3RhdGVtZW50SW5wdXQ9ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlN0YXRlbWVudElucHV0LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZXw9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5TVEFURU1FTlRfSU5QVVQ7dGhpcy5oZWlnaHQ9dGhpcy5jb25uZWN0ZWRCbG9jaz90aGlzLmNvbm5lY3RlZEJsb2NrSGVpZ2h0K3RoaXMuY29uc3RhbnRzXy5TVEFURU1FTlRfQk9UVE9NX1NQQUNFUjp0aGlzLmNvbnN0YW50c18uRU1QVFlfU1RBVEVNRU5UX0lOUFVUX0hFSUdIVDt0aGlzLndpZHRoPXRoaXMuY29uc3RhbnRzXy5TVEFURU1FTlRfSU5QVVRfTk9UQ0hfT0ZGU0VUK3RoaXMuc2hhcGUud2lkdGh9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3RhdGVtZW50SW5wdXQsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbnB1dENvbm5lY3Rpb24pO1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5FeHRlcm5hbFZhbHVlSW5wdXQ9ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkV4dGVybmFsVmFsdWVJbnB1dC5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuRVhURVJOQUxfVkFMVUVfSU5QVVQ7dGhpcy5oZWlnaHQ9dGhpcy5jb25uZWN0ZWRCbG9jaz90aGlzLmNvbm5lY3RlZEJsb2NrSGVpZ2h0LXRoaXMuY29uc3RhbnRzXy5UQUJfT0ZGU0VUX0ZST01fVE9QLXRoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElORzp0aGlzLnNoYXBlLmhlaWdodDt0aGlzLndpZHRoPXRoaXMuc2hhcGUud2lkdGgrdGhpcy5jb25zdGFudHNfLkVYVEVSTkFMX1ZBTFVFX0lOUFVUX1BBRERJTkc7dGhpcy5jb25uZWN0aW9uT2Zmc2V0WT10aGlzLmNvbnN0YW50c18uVEFCX09GRlNFVF9GUk9NX1RPUDt0aGlzLmNvbm5lY3Rpb25IZWlnaHQ9dGhpcy5zaGFwZS5oZWlnaHQ7XG50aGlzLmNvbm5lY3Rpb25XaWR0aD10aGlzLnNoYXBlLndpZHRofTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkV4dGVybmFsVmFsdWVJbnB1dCxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLklucHV0Q29ubmVjdGlvbik7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JY29uPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JY29uLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmljb249Yjt0aGlzLmlzVmlzaWJsZT1iLmlzVmlzaWJsZSgpO3RoaXMudHlwZXw9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5JQ09OO2E9Yi5nZXRDb3JyZWN0ZWRTaXplKCk7dGhpcy5oZWlnaHQ9YS5oZWlnaHQ7dGhpcy53aWR0aD1hLndpZHRofTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkljb24sQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NZWFzdXJhYmxlKTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSmFnZ2VkRWRnZT1mdW5jdGlvbihhKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkphZ2dlZEVkZ2Uuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMudHlwZXw9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5KQUdHRURfRURHRTt0aGlzLmhlaWdodD10aGlzLmNvbnN0YW50c18uSkFHR0VEX1RFRVRILmhlaWdodDt0aGlzLndpZHRoPXRoaXMuY29uc3RhbnRzXy5KQUdHRURfVEVFVEgud2lkdGh9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSmFnZ2VkRWRnZSxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1lYXN1cmFibGUpO1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5GaWVsZD1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5GaWVsZC5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5maWVsZD1iO3RoaXMuaXNFZGl0YWJsZT1iLkVESVRBQkxFO3RoaXMuZmxpcFJ0bD1iLmdldEZsaXBSdGwoKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuRklFTEQ7YT10aGlzLmZpZWxkLmdldFNpemUoKTt0aGlzLmhlaWdodD1hLmhlaWdodDt0aGlzLndpZHRoPWEud2lkdGg7dGhpcy5wYXJlbnRJbnB1dD1jfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkZpZWxkLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWVhc3VyYWJsZSk7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkhhdD1mdW5jdGlvbihhKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkhhdC5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy50eXBlfD1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkhBVDt0aGlzLmhlaWdodD10aGlzLmNvbnN0YW50c18uU1RBUlRfSEFULmhlaWdodDt0aGlzLndpZHRoPXRoaXMuY29uc3RhbnRzXy5TVEFSVF9IQVQud2lkdGg7dGhpcy5hc2NlbmRlckhlaWdodD10aGlzLmhlaWdodH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5IYXQsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NZWFzdXJhYmxlKTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3F1YXJlQ29ybmVyPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5TcXVhcmVDb3JuZXIuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT0oYiYmXCJsZWZ0XCIhPWI/QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5SSUdIVF9TUVVBUkVfQ09STkVSOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuTEVGVF9TUVVBUkVfQ09STkVSKXxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkNPUk5FUjt0aGlzLndpZHRoPXRoaXMuaGVpZ2h0PXRoaXMuY29uc3RhbnRzXy5OT19QQURESU5HfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlNxdWFyZUNvcm5lcixCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk1lYXN1cmFibGUpO1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Sb3VuZENvcm5lcj1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm91bmRDb3JuZXIuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT0oYiYmXCJsZWZ0XCIhPWI/QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5SSUdIVF9ST1VORF9DT1JORVI6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5MRUZUX1JPVU5EX0NPUk5FUil8QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5DT1JORVI7dGhpcy53aWR0aD10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUzt0aGlzLmhlaWdodD10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUy8yfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdW5kQ29ybmVyLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWVhc3VyYWJsZSk7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkluUm93U3BhY2VyPWZ1bmN0aW9uKGEsYil7QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JblJvd1NwYWNlci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy50eXBlPXRoaXMudHlwZXxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLlNQQUNFUnxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLklOX1JPV19TUEFDRVI7dGhpcy53aWR0aD1iO3RoaXMuaGVpZ2h0PXRoaXMuY29uc3RhbnRzXy5TUEFDRVJfREVGQVVMVF9IRUlHSFR9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NZWFzdXJhYmxlKTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdz1mdW5jdGlvbihhKXt0aGlzLnR5cGU9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5ST1c7dGhpcy5lbGVtZW50cz1bXTt0aGlzLnhQb3M9dGhpcy55UG9zPXRoaXMud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzPXRoaXMubWluV2lkdGg9dGhpcy5taW5IZWlnaHQ9dGhpcy53aWR0aD10aGlzLmhlaWdodD0wO3RoaXMuaGFzSmFnZ2VkRWRnZT10aGlzLmhhc0R1bW15SW5wdXQ9dGhpcy5oYXNJbmxpbmVJbnB1dD10aGlzLmhhc1N0YXRlbWVudD10aGlzLmhhc0V4dGVybmFsSW5wdXQ9ITE7dGhpcy5jb25zdGFudHNfPWE7dGhpcy5ub3RjaE9mZnNldD10aGlzLmNvbnN0YW50c18uTk9UQ0hfT0ZGU0VUX0xFRlQ7dGhpcy5hbGlnbj1udWxsfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm93LnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIGF0dGVtcHQgdG8gbWVhc3VyZSBhIGJhc2UgUm93LlwiKTt9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm93LnByb3RvdHlwZS5nZXRMYXN0SW5wdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5lbGVtZW50cy5sZW5ndGgtMSxiO2I9dGhpcy5lbGVtZW50c1thXTthLS0paWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0KGIpKXJldHVybiBiO3JldHVybiBudWxsfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdy5wcm90b3R5cGUuc3RhcnRzV2l0aEVsZW1TcGFjZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5Sb3cucHJvdG90eXBlLmVuZHNXaXRoRWxlbVNwYWNlcj1mdW5jdGlvbigpe3JldHVybiEwfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm93LnByb3RvdHlwZS5nZXRGaXJzdFNwYWNlcj1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7Yj10aGlzLmVsZW1lbnRzW2FdO2ErKylpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpKXJldHVybiBiO3JldHVybiBudWxsfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdy5wcm90b3R5cGUuZ2V0TGFzdFNwYWNlcj1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmVsZW1lbnRzLmxlbmd0aC0xLGI7Yj10aGlzLmVsZW1lbnRzW2FdO2EtLSlpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpKXJldHVybiBiO3JldHVybiBudWxsfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVG9wUm93PWZ1bmN0aW9uKGEpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVG9wUm93LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuVE9QX1JPVzt0aGlzLmFzY2VuZGVySGVpZ2h0PXRoaXMuY2FwbGluZT0wO3RoaXMuaGFzUHJldmlvdXNDb25uZWN0aW9uPSExO3RoaXMuY29ubmVjdGlvbj1udWxsfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlRvcFJvdyxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdyk7XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlRvcFJvdy5wcm90b3R5cGUuaGFzTGVmdFNxdWFyZUNvcm5lcj1mdW5jdGlvbihhKXt2YXIgYj0oYS5oYXQ/XCJjYXBcIj09PWEuaGF0OnRoaXMuY29uc3RhbnRzXy5BRERfU1RBUlRfSEFUUykmJiFhLm91dHB1dENvbm5lY3Rpb24mJiFhLnByZXZpb3VzQ29ubmVjdGlvbixjPWEuZ2V0UHJldmlvdXNCbG9jaygpO3JldHVybiEhYS5vdXRwdXRDb25uZWN0aW9ufHxifHwoYz9jLmdldE5leHRCbG9jaygpPT1hOiExKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5Ub3BSb3cucHJvdG90eXBlLmhhc1JpZ2h0U3F1YXJlQ29ybmVyPWZ1bmN0aW9uKGEpe3JldHVybiEwfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVG9wUm93LnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9MCxkPTAsZTtlPXRoaXMuZWxlbWVudHNbZF07ZCsrKWIrPWUud2lkdGgsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1NwYWNlcihlKXx8KEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNIYXQoZSk/Yz1NYXRoLm1heChjLGUuYXNjZW5kZXJIZWlnaHQpOmE9TWF0aC5tYXgoYSxlLmhlaWdodCkpO3RoaXMud2lkdGg9TWF0aC5tYXgodGhpcy5taW5XaWR0aCxiKTt0aGlzLmhlaWdodD1NYXRoLm1heCh0aGlzLm1pbkhlaWdodCxhKStjO3RoaXMuY2FwbGluZT10aGlzLmFzY2VuZGVySGVpZ2h0PWM7dGhpcy53aWR0aFdpdGhDb25uZWN0ZWRCbG9ja3M9dGhpcy53aWR0aH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5Ub3BSb3cucHJvdG90eXBlLnN0YXJ0c1dpdGhFbGVtU3BhY2VyPWZ1bmN0aW9uKCl7cmV0dXJuITF9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Ub3BSb3cucHJvdG90eXBlLmVuZHNXaXRoRWxlbVNwYWNlcj1mdW5jdGlvbigpe3JldHVybiExfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkJvdHRvbVJvdz1mdW5jdGlvbihhKXtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkJvdHRvbVJvdy5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy50eXBlfD1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLkJPVFRPTV9ST1c7dGhpcy5oYXNOZXh0Q29ubmVjdGlvbj0hMTt0aGlzLmNvbm5lY3Rpb249bnVsbDt0aGlzLmJhc2VsaW5lPXRoaXMuZGVzY2VuZGVySGVpZ2h0PTB9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQm90dG9tUm93LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm93KTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQm90dG9tUm93LnByb3RvdHlwZS5oYXNMZWZ0U3F1YXJlQ29ybmVyPWZ1bmN0aW9uKGEpe3JldHVybiEhYS5vdXRwdXRDb25uZWN0aW9ufHwhIWEuZ2V0TmV4dEJsb2NrKCl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQm90dG9tUm93LnByb3RvdHlwZS5oYXNSaWdodFNxdWFyZUNvcm5lcj1mdW5jdGlvbihhKXtyZXR1cm4hMH07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkJvdHRvbVJvdy5wcm90b3R5cGUubWVhc3VyZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPTAsZD0wLGU7ZT10aGlzLmVsZW1lbnRzW2RdO2QrKyliKz1lLndpZHRoLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTcGFjZXIoZSl8fChCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb24oZSk/Yz1NYXRoLm1heChjLGUuaGVpZ2h0KTphPU1hdGgubWF4KGEsZS5oZWlnaHQpKTt0aGlzLndpZHRoPU1hdGgubWF4KHRoaXMubWluV2lkdGgsYik7dGhpcy5oZWlnaHQ9TWF0aC5tYXgodGhpcy5taW5IZWlnaHQsYSkrYzt0aGlzLmRlc2NlbmRlckhlaWdodD1jO3RoaXMud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzPXRoaXMud2lkdGh9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQm90dG9tUm93LnByb3RvdHlwZS5zdGFydHNXaXRoRWxlbVNwYWNlcj1mdW5jdGlvbigpe3JldHVybiExfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQm90dG9tUm93LnByb3RvdHlwZS5lbmRzV2l0aEVsZW1TcGFjZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5TcGFjZXJSb3c9ZnVuY3Rpb24oYSxiLGMpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3BhY2VyUm93LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9dGhpcy50eXBlfEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuU1BBQ0VSfEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuQkVUV0VFTl9ST1dfU1BBQ0VSO3RoaXMud2lkdGg9Yzt0aGlzLmhlaWdodD1iO3RoaXMuZm9sbG93c1N0YXRlbWVudD0hMTt0aGlzLndpZHRoV2l0aENvbm5lY3RlZEJsb2Nrcz0wO3RoaXMuZWxlbWVudHM9W25ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkluUm93U3BhY2VyKHRoaXMuY29uc3RhbnRzXyxjKV19O1xuQmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5TcGFjZXJSb3csQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Sb3cpO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3BhY2VyUm93LnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7fTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLklucHV0Um93PWZ1bmN0aW9uKGEpe0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5wdXRSb3cuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMudHlwZXw9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5JTlBVVF9ST1c7dGhpcy5jb25uZWN0ZWRCbG9ja1dpZHRocz0wfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLklucHV0Um93LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm93KTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5wdXRSb3cucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLndpZHRoPXRoaXMubWluV2lkdGg7dGhpcy5oZWlnaHQ9dGhpcy5taW5IZWlnaHQ7Zm9yKHZhciBhPTAsYj0wLGM7Yz10aGlzLmVsZW1lbnRzW2JdO2IrKyl0aGlzLndpZHRoKz1jLndpZHRoLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbnB1dChjKSYmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTdGF0ZW1lbnRJbnB1dChjKT9hKz1jLmNvbm5lY3RlZEJsb2NrV2lkdGg6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0V4dGVybmFsSW5wdXQoYykmJjAhPWMuY29ubmVjdGVkQmxvY2tXaWR0aCYmKGErPWMuY29ubmVjdGVkQmxvY2tXaWR0aC1jLmNvbm5lY3Rpb25XaWR0aCkpLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTcGFjZXIoYyl8fCh0aGlzLmhlaWdodD1NYXRoLm1heCh0aGlzLmhlaWdodCxjLmhlaWdodCkpO3RoaXMuY29ubmVjdGVkQmxvY2tXaWR0aHM9XG5hO3RoaXMud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzPXRoaXMud2lkdGgrYX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbnB1dFJvdy5wcm90b3R5cGUuZW5kc1dpdGhFbGVtU3BhY2VyPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRXh0ZXJuYWxJbnB1dCYmIXRoaXMuaGFzU3RhdGVtZW50fTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm89ZnVuY3Rpb24oYSxiKXt0aGlzLmJsb2NrXz1iO3RoaXMucmVuZGVyZXJfPWE7dGhpcy5jb25zdGFudHNfPXRoaXMucmVuZGVyZXJfLmdldENvbnN0YW50cygpO3RoaXMub3V0cHV0Q29ubmVjdGlvbj1iLm91dHB1dENvbm5lY3Rpb24/bmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuT3V0cHV0Q29ubmVjdGlvbih0aGlzLmNvbnN0YW50c18sYi5vdXRwdXRDb25uZWN0aW9uKTpudWxsO3RoaXMuaXNJbmxpbmU9Yi5nZXRJbnB1dHNJbmxpbmUoKSYmIWIuaXNDb2xsYXBzZWQoKTt0aGlzLmlzQ29sbGFwc2VkPWIuaXNDb2xsYXBzZWQoKTt0aGlzLmlzSW5zZXJ0aW9uTWFya2VyPWIuaXNJbnNlcnRpb25NYXJrZXIoKTt0aGlzLlJUTD1iLlJUTDt0aGlzLnN0YXRlbWVudEVkZ2U9dGhpcy53aWR0aD10aGlzLndpZHRoV2l0aENoaWxkcmVuPXRoaXMuaGVpZ2h0PTA7dGhpcy5yb3dzPVtdO3RoaXMuaW5wdXRSb3dzPVtdO3RoaXMuaGlkZGVuSWNvbnM9XG5bXTt0aGlzLnRvcFJvdz1uZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Ub3BSb3codGhpcy5jb25zdGFudHNfKTt0aGlzLmJvdHRvbVJvdz1uZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Cb3R0b21Sb3codGhpcy5jb25zdGFudHNfKTt0aGlzLnN0YXJ0WT10aGlzLnN0YXJ0WD0wfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXJffTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZVJvd3NfKCk7dGhpcy5hZGRFbGVtU3BhY2luZ18oKTt0aGlzLmFkZFJvd1NwYWNpbmdfKCk7dGhpcy5jb21wdXRlQm91bmRzXygpO3RoaXMuYWxpZ25Sb3dFbGVtZW50c18oKTt0aGlzLmZpbmFsaXplXygpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuY3JlYXRlUm93c189ZnVuY3Rpb24oKXt0aGlzLnBvcHVsYXRlVG9wUm93XygpO3RoaXMucm93cy5wdXNoKHRoaXMudG9wUm93KTt2YXIgYT1uZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbnB1dFJvdyh0aGlzLmNvbnN0YW50c18pO3RoaXMuaW5wdXRSb3dzLnB1c2goYSk7dmFyIGI9dGhpcy5ibG9ja18uZ2V0SWNvbnMoKTtpZihiLmxlbmd0aClmb3IodmFyIGM9MCxkO2Q9YltjXTtjKyspe3ZhciBlPW5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkljb24odGhpcy5jb25zdGFudHNfLGQpO3RoaXMuaXNDb2xsYXBzZWQmJmQuY29sbGFwc2VIaWRkZW4/dGhpcy5oaWRkZW5JY29ucy5wdXNoKGUpOmEuZWxlbWVudHMucHVzaChlKX1kPW51bGw7Zm9yKGM9MDtiPXRoaXMuYmxvY2tfLmlucHV0TGlzdFtjXTtjKyspaWYoYi5pc1Zpc2libGUoKSl7dGhpcy5zaG91bGRTdGFydE5ld1Jvd18oYixkKSYmKHRoaXMucm93cy5wdXNoKGEpLFxuYT1uZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbnB1dFJvdyh0aGlzLmNvbnN0YW50c18pLHRoaXMuaW5wdXRSb3dzLnB1c2goYSkpO2ZvcihkPTA7ZT1iLmZpZWxkUm93W2RdO2QrKylhLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRmllbGQodGhpcy5jb25zdGFudHNfLGUsYikpO3RoaXMuYWRkSW5wdXRfKGIsYSk7ZD1ifXRoaXMuaXNDb2xsYXBzZWQmJihhLmhhc0phZ2dlZEVkZ2U9ITAsYS5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkphZ2dlZEVkZ2UodGhpcy5jb25zdGFudHNfKSkpOyhhLmVsZW1lbnRzLmxlbmd0aHx8YS5oYXNEdW1teUlucHV0KSYmdGhpcy5yb3dzLnB1c2goYSk7dGhpcy5wb3B1bGF0ZUJvdHRvbVJvd18oKTt0aGlzLnJvd3MucHVzaCh0aGlzLmJvdHRvbVJvdyl9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5wb3B1bGF0ZVRvcFJvd189ZnVuY3Rpb24oKXt2YXIgYT0hIXRoaXMuYmxvY2tfLnByZXZpb3VzQ29ubmVjdGlvbixiPSh0aGlzLmJsb2NrXy5oYXQ/XCJjYXBcIj09PXRoaXMuYmxvY2tfLmhhdDp0aGlzLmNvbnN0YW50c18uQUREX1NUQVJUX0hBVFMpJiYhdGhpcy5vdXRwdXRDb25uZWN0aW9uJiYhYTt0aGlzLnRvcFJvdy5oYXNMZWZ0U3F1YXJlQ29ybmVyKHRoaXMuYmxvY2tfKT90aGlzLnRvcFJvdy5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlNxdWFyZUNvcm5lcih0aGlzLmNvbnN0YW50c18pKTp0aGlzLnRvcFJvdy5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdW5kQ29ybmVyKHRoaXMuY29uc3RhbnRzXykpO2I/KGE9bmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSGF0KHRoaXMuY29uc3RhbnRzXyksdGhpcy50b3BSb3cuZWxlbWVudHMucHVzaChhKSxcbnRoaXMudG9wUm93LmNhcGxpbmU9YS5hc2NlbmRlckhlaWdodCk6YSYmKHRoaXMudG9wUm93Lmhhc1ByZXZpb3VzQ29ubmVjdGlvbj0hMCx0aGlzLnRvcFJvdy5jb25uZWN0aW9uPW5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlByZXZpb3VzQ29ubmVjdGlvbih0aGlzLmNvbnN0YW50c18sdGhpcy5ibG9ja18ucHJldmlvdXNDb25uZWN0aW9uKSx0aGlzLnRvcFJvdy5lbGVtZW50cy5wdXNoKHRoaXMudG9wUm93LmNvbm5lY3Rpb24pKTt0aGlzLmJsb2NrXy5pbnB1dExpc3QubGVuZ3RoJiZ0aGlzLmJsb2NrXy5pbnB1dExpc3RbMF0udHlwZT09QmxvY2tseS5ORVhUX1NUQVRFTUVOVCYmIXRoaXMuYmxvY2tfLmlzQ29sbGFwc2VkKCk/dGhpcy50b3BSb3cubWluSGVpZ2h0PXRoaXMuY29uc3RhbnRzXy5UT1BfUk9XX1BSRUNFREVTX1NUQVRFTUVOVF9NSU5fSEVJR0hUOnRoaXMudG9wUm93Lm1pbkhlaWdodD10aGlzLmNvbnN0YW50c18uVE9QX1JPV19NSU5fSEVJR0hUO3RoaXMudG9wUm93Lmhhc1JpZ2h0U3F1YXJlQ29ybmVyKHRoaXMuYmxvY2tfKT9cbnRoaXMudG9wUm93LmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3F1YXJlQ29ybmVyKHRoaXMuY29uc3RhbnRzXyxcInJpZ2h0XCIpKTp0aGlzLnRvcFJvdy5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdW5kQ29ybmVyKHRoaXMuY29uc3RhbnRzXyxcInJpZ2h0XCIpKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLnBvcHVsYXRlQm90dG9tUm93Xz1mdW5jdGlvbigpe3RoaXMuYm90dG9tUm93Lmhhc05leHRDb25uZWN0aW9uPSEhdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb247dGhpcy5ib3R0b21Sb3cubWluSGVpZ2h0PXRoaXMuYmxvY2tfLmlucHV0TGlzdC5sZW5ndGgmJnRoaXMuYmxvY2tfLmlucHV0TGlzdFt0aGlzLmJsb2NrXy5pbnB1dExpc3QubGVuZ3RoLTFdLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/dGhpcy5jb25zdGFudHNfLkJPVFRPTV9ST1dfQUZURVJfU1RBVEVNRU5UX01JTl9IRUlHSFQ6dGhpcy5jb25zdGFudHNfLkJPVFRPTV9ST1dfTUlOX0hFSUdIVDt0aGlzLmJvdHRvbVJvdy5oYXNMZWZ0U3F1YXJlQ29ybmVyKHRoaXMuYmxvY2tfKT90aGlzLmJvdHRvbVJvdy5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlNxdWFyZUNvcm5lcih0aGlzLmNvbnN0YW50c18pKTpcbnRoaXMuYm90dG9tUm93LmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUm91bmRDb3JuZXIodGhpcy5jb25zdGFudHNfKSk7dGhpcy5ib3R0b21Sb3cuaGFzTmV4dENvbm5lY3Rpb24mJih0aGlzLmJvdHRvbVJvdy5jb25uZWN0aW9uPW5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLk5leHRDb25uZWN0aW9uKHRoaXMuY29uc3RhbnRzXyx0aGlzLmJsb2NrXy5uZXh0Q29ubmVjdGlvbiksdGhpcy5ib3R0b21Sb3cuZWxlbWVudHMucHVzaCh0aGlzLmJvdHRvbVJvdy5jb25uZWN0aW9uKSk7dGhpcy5ib3R0b21Sb3cuaGFzUmlnaHRTcXVhcmVDb3JuZXIodGhpcy5ibG9ja18pP3RoaXMuYm90dG9tUm93LmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3F1YXJlQ29ybmVyKHRoaXMuY29uc3RhbnRzXyxcInJpZ2h0XCIpKTp0aGlzLmJvdHRvbVJvdy5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJvdW5kQ29ybmVyKHRoaXMuY29uc3RhbnRzXyxcblwicmlnaHRcIikpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuYWRkSW5wdXRfPWZ1bmN0aW9uKGEsYil7dGhpcy5pc0lubGluZSYmYS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFPyhiLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5saW5lSW5wdXQodGhpcy5jb25zdGFudHNfLGEpKSxiLmhhc0lubGluZUlucHV0PSEwKTphLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/KGIuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5TdGF0ZW1lbnRJbnB1dCh0aGlzLmNvbnN0YW50c18sYSkpLGIuaGFzU3RhdGVtZW50PSEwKTphLnR5cGU9PUJsb2NrbHkuSU5QVVRfVkFMVUU/KGIuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5FeHRlcm5hbFZhbHVlSW5wdXQodGhpcy5jb25zdGFudHNfLGEpKSxiLmhhc0V4dGVybmFsSW5wdXQ9ITApOmEudHlwZT09QmxvY2tseS5EVU1NWV9JTlBVVCYmKGIubWluSGVpZ2h0PVxuTWF0aC5tYXgoYi5taW5IZWlnaHQsYS5nZXRTb3VyY2VCbG9jaygpJiZhLmdldFNvdXJjZUJsb2NrKCkuaXNTaGFkb3coKT90aGlzLmNvbnN0YW50c18uRFVNTVlfSU5QVVRfU0hBRE9XX01JTl9IRUlHSFQ6dGhpcy5jb25zdGFudHNfLkRVTU1ZX0lOUFVUX01JTl9IRUlHSFQpLGIuaGFzRHVtbXlJbnB1dD0hMCk7bnVsbD09Yi5hbGlnbiYmKGIuYWxpZ249YS5hbGlnbil9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuc2hvdWxkU3RhcnROZXdSb3dfPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YS50eXBlPT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UfHxiLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/ITA6YS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFfHxhLnR5cGU9PUJsb2NrbHkuRFVNTVlfSU5QVVQ/IXRoaXMuaXNJbmxpbmU6ITE6ITF9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5hZGRFbGVtU3BhY2luZ189ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiO2I9dGhpcy5yb3dzW2FdO2ErKyl7dmFyIGM9Yi5lbGVtZW50cztiLmVsZW1lbnRzPVtdO2Iuc3RhcnRzV2l0aEVsZW1TcGFjZXIoKSYmYi5lbGVtZW50cy5wdXNoKG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkluUm93U3BhY2VyKHRoaXMuY29uc3RhbnRzXyx0aGlzLmdldEluUm93U3BhY2luZ18obnVsbCxjWzBdKSkpO2lmKGMubGVuZ3RoKXtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoLTE7ZCsrKXtiLmVsZW1lbnRzLnB1c2goY1tkXSk7dmFyIGU9dGhpcy5nZXRJblJvd1NwYWNpbmdfKGNbZF0sY1tkKzFdKTtiLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLGUpKX1iLmVsZW1lbnRzLnB1c2goY1tjLmxlbmd0aC0xXSk7Yi5lbmRzV2l0aEVsZW1TcGFjZXIoKSYmXG5iLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLHRoaXMuZ2V0SW5Sb3dTcGFjaW5nXyhjW2MubGVuZ3RoLTFdLG51bGwpKSl9fX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmdldEluUm93U3BhY2luZ189ZnVuY3Rpb24oYSxiKXtpZighYSYmYiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1N0YXRlbWVudElucHV0KGIpKXJldHVybiB0aGlzLmNvbnN0YW50c18uU1RBVEVNRU5UX0lOUFVUX1BBRERJTkdfTEVGVDtpZihhJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQoYSkmJiFiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRXh0ZXJuYWxJbnB1dChhKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkc7aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lubGluZUlucHV0KGEpKXJldHVybiB0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORztpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3RhdGVtZW50SW5wdXQoYSkpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5OT19QQURESU5HfXJldHVybiBhJiZcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0U3F1YXJlQ29ybmVyKGEpJiZiJiYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1ByZXZpb3VzQ29ubmVjdGlvbihiKXx8QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc05leHRDb25uZWN0aW9uKGIpKT9iLm5vdGNoT2Zmc2V0OmEmJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihhKSYmYiYmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oYil8fEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNOZXh0Q29ubmVjdGlvbihiKSk/Yi5ub3RjaE9mZnNldC10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUzp0aGlzLmNvbnN0YW50c18uTUVESVVNX1BBRERJTkd9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5jb21wdXRlQm91bmRzXz1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPTAsZD0wLGU7ZT10aGlzLnJvd3NbZF07ZCsrKXtlLm1lYXN1cmUoKTtiPU1hdGgubWF4KGIsZS53aWR0aCk7aWYoZS5oYXNTdGF0ZW1lbnQpe3ZhciBmPWUuZ2V0TGFzdElucHV0KCk7YT1NYXRoLm1heChhLGUud2lkdGgtZi53aWR0aCl9Yz1NYXRoLm1heChjLGUud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzKX10aGlzLnN0YXRlbWVudEVkZ2U9YTt0aGlzLndpZHRoPWI7Zm9yKGQ9MDtlPXRoaXMucm93c1tkXTtkKyspZS5oYXNTdGF0ZW1lbnQmJihlLnN0YXRlbWVudEVkZ2U9dGhpcy5zdGF0ZW1lbnRFZGdlKTt0aGlzLndpZHRoV2l0aENoaWxkcmVuPU1hdGgubWF4KGIsYyk7dGhpcy5vdXRwdXRDb25uZWN0aW9uJiYodGhpcy5zdGFydFg9dGhpcy5vdXRwdXRDb25uZWN0aW9uLndpZHRoLHRoaXMud2lkdGgrPXRoaXMub3V0cHV0Q29ubmVjdGlvbi53aWR0aCxcbnRoaXMud2lkdGhXaXRoQ2hpbGRyZW4rPXRoaXMub3V0cHV0Q29ubmVjdGlvbi53aWR0aCl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuYWxpZ25Sb3dFbGVtZW50c189ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiO2I9dGhpcy5yb3dzW2FdO2ErKylpZihiLmhhc1N0YXRlbWVudCl0aGlzLmFsaWduU3RhdGVtZW50Um93XyhiKTtlbHNle3ZhciBjPWIud2lkdGg7Yz10aGlzLmdldERlc2lyZWRSb3dXaWR0aF8oYiktYzswPGMmJnRoaXMuYWRkQWxpZ25tZW50UGFkZGluZ18oYixjKTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wT3JCb3R0b21Sb3coYikmJihiLndpZHRoV2l0aENvbm5lY3RlZEJsb2Nrcz1iLndpZHRoKX19O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0RGVzaXJlZFJvd1dpZHRoXz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53aWR0aC10aGlzLnN0YXJ0WH07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmFkZEFsaWdubWVudFBhZGRpbmdfPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRGaXJzdFNwYWNlcigpLGQ9YS5nZXRMYXN0U3BhY2VyKCk7aWYoYS5oYXNFeHRlcm5hbElucHV0fHxhLmhhc1N0YXRlbWVudClhLndpZHRoV2l0aENvbm5lY3RlZEJsb2Nrcys9YjthLmFsaWduPT1CbG9ja2x5LkFMSUdOX0xFRlQ/ZC53aWR0aCs9YjphLmFsaWduPT1CbG9ja2x5LkFMSUdOX0NFTlRSRT8oYy53aWR0aCs9Yi8yLGQud2lkdGgrPWIvMik6YS5hbGlnbj09QmxvY2tseS5BTElHTl9SSUdIVD9jLndpZHRoKz1iOmQud2lkdGgrPWI7YS53aWR0aCs9Yn07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmFsaWduU3RhdGVtZW50Um93Xz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldExhc3RJbnB1dCgpLGM9YS53aWR0aC1iLndpZHRoLGQ9dGhpcy5zdGF0ZW1lbnRFZGdlO2M9ZC1jOzA8YyYmdGhpcy5hZGRBbGlnbm1lbnRQYWRkaW5nXyhhLGMpO2M9YS53aWR0aDtkPXRoaXMuZ2V0RGVzaXJlZFJvd1dpZHRoXyhhKTtiLndpZHRoKz1kLWM7Yi5oZWlnaHQ9TWF0aC5tYXgoYi5oZWlnaHQsYS5oZWlnaHQpO2Eud2lkdGgrPWQtYzthLndpZHRoV2l0aENvbm5lY3RlZEJsb2Nrcz1NYXRoLm1heChhLndpZHRoLHRoaXMuc3RhdGVtZW50RWRnZSthLmNvbm5lY3RlZEJsb2NrV2lkdGhzKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmFkZFJvd1NwYWNpbmdfPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb3dzO3RoaXMucm93cz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl0aGlzLnJvd3MucHVzaChhW2JdKSxiIT1hLmxlbmd0aC0xJiZ0aGlzLnJvd3MucHVzaCh0aGlzLm1ha2VTcGFjZXJSb3dfKGFbYl0sYVtiKzFdKSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUubWFrZVNwYWNlclJvd189ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFNwYWNlclJvd0hlaWdodF8oYSxiKSxkPXRoaXMuZ2V0U3BhY2VyUm93V2lkdGhfKGEsYik7Yz1uZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5TcGFjZXJSb3codGhpcy5jb25zdGFudHNfLGMsZCk7YS5oYXNTdGF0ZW1lbnQmJihjLmZvbGxvd3NTdGF0ZW1lbnQ9ITApO2IuaGFzU3RhdGVtZW50JiYoYy5wcmVjZWRlc1N0YXRlbWVudD0hMCk7cmV0dXJuIGN9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRTcGFjZXJSb3dXaWR0aF89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy53aWR0aC10aGlzLnN0YXJ0WH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRTcGFjZXJSb3dIZWlnaHRfPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElOR307XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8ucHJvdG90eXBlLmdldEVsZW1DZW50ZXJsaW5lXz1mdW5jdGlvbihhLGIpe3JldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpP2EueVBvcytiLmhlaWdodC8yOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNCb3R0b21Sb3coYSk/KGE9YS55UG9zK2EuaGVpZ2h0LWEuZGVzY2VuZGVySGVpZ2h0LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNOZXh0Q29ubmVjdGlvbihiKT9hK2IuaGVpZ2h0LzI6YS1iLmhlaWdodC8yKTpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpP0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNIYXQoYik/YS5jYXBsaW5lLWIuaGVpZ2h0LzI6YS5jYXBsaW5lK2IuaGVpZ2h0LzI6YS55UG9zK2EuaGVpZ2h0LzJ9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvLnByb3RvdHlwZS5yZWNvcmRFbGVtUG9zaXRpb25zXz1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS54UG9zLGM9MCxkO2Q9YS5lbGVtZW50c1tjXTtjKyspQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1NwYWNlcihkKSYmKGQuaGVpZ2h0PWEuaGVpZ2h0KSxkLnhQb3M9YixkLmNlbnRlcmxpbmU9dGhpcy5nZXRFbGVtQ2VudGVybGluZV8oYSxkKSxiKz1kLndpZHRofTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mby5wcm90b3R5cGUuZmluYWxpemVfPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9MCxkO2Q9dGhpcy5yb3dzW2NdO2MrKylkLnlQb3M9YixkLnhQb3M9dGhpcy5zdGFydFgsYis9ZC5oZWlnaHQsYT1NYXRoLm1heChhLGQud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzKSx0aGlzLnJlY29yZEVsZW1Qb3NpdGlvbnNfKGQpO3RoaXMub3V0cHV0Q29ubmVjdGlvbiYmdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24mJnRoaXMuYmxvY2tfLm5leHRDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkmJihhPU1hdGgubWF4KGEsdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKS5nZXRIZWlnaHRXaWR0aCgpLndpZHRoKSk7dGhpcy53aWR0aFdpdGhDaGlsZHJlbj1hK3RoaXMuc3RhcnRYO3RoaXMuaGVpZ2h0PWI7dGhpcy5zdGFydFk9dGhpcy50b3BSb3cuY2FwbGluZTt0aGlzLmJvdHRvbVJvdy5iYXNlbGluZT1iLXRoaXMuYm90dG9tUm93LmRlc2NlbmRlckhlaWdodH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmJsb2NrXz1hO3RoaXMuaW5mb189Yjt0aGlzLnRvcExlZnRfPWEuZ2V0UmVsYXRpdmVUb1N1cmZhY2VYWSgpO3RoaXMuaW5saW5lUGF0aF89dGhpcy5vdXRsaW5lUGF0aF89XCJcIjt0aGlzLmNvbnN0YW50c189Yi5nZXRSZW5kZXJlcigpLmdldENvbnN0YW50cygpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKCl7dGhpcy5oaWRlSGlkZGVuSWNvbnNfKCk7dGhpcy5kcmF3T3V0bGluZV8oKTt0aGlzLmRyYXdJbnRlcm5hbHNfKCk7dGhpcy5ibG9ja18ucGF0aE9iamVjdC5zZXRQYXRoKHRoaXMub3V0bGluZVBhdGhfK1wiXFxuXCIrdGhpcy5pbmxpbmVQYXRoXyk7dGhpcy5pbmZvXy5SVEwmJnRoaXMuYmxvY2tfLnBhdGhPYmplY3QuZmxpcFJUTCgpO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudXNlRGVidWdnZXImJnRoaXMuYmxvY2tfLnJlbmRlcmluZ0RlYnVnZ2VyLmRyYXdEZWJ1Zyh0aGlzLmJsb2NrXyx0aGlzLmluZm9fKTt0aGlzLnJlY29yZFNpemVPbkJsb2NrXygpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUucmVjb3JkU2l6ZU9uQmxvY2tfPWZ1bmN0aW9uKCl7dGhpcy5ibG9ja18uaGVpZ2h0PXRoaXMuaW5mb18uaGVpZ2h0O3RoaXMuYmxvY2tfLndpZHRoPXRoaXMuaW5mb18ud2lkdGhXaXRoQ2hpbGRyZW59O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLmhpZGVIaWRkZW5JY29uc189ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiO2I9dGhpcy5pbmZvXy5oaWRkZW5JY29uc1thXTthKyspYi5pY29uLmljb25Hcm91cF8uc2V0QXR0cmlidXRlKFwiZGlzcGxheVwiLFwibm9uZVwiKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLmRyYXdPdXRsaW5lXz1mdW5jdGlvbigpe3RoaXMuZHJhd1RvcF8oKTtmb3IodmFyIGE9MTthPHRoaXMuaW5mb18ucm93cy5sZW5ndGgtMTthKyspe3ZhciBiPXRoaXMuaW5mb18ucm93c1thXTtiLmhhc0phZ2dlZEVkZ2U/dGhpcy5kcmF3SmFnZ2VkRWRnZV8oYik6Yi5oYXNTdGF0ZW1lbnQ/dGhpcy5kcmF3U3RhdGVtZW50SW5wdXRfKGIpOmIuaGFzRXh0ZXJuYWxJbnB1dD90aGlzLmRyYXdWYWx1ZUlucHV0XyhiKTp0aGlzLmRyYXdSaWdodFNpZGVSb3dfKGIpfXRoaXMuZHJhd0JvdHRvbV8oKTt0aGlzLmRyYXdMZWZ0XygpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5kcmF3VG9wXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5mb18udG9wUm93LGI9YS5lbGVtZW50czt0aGlzLnBvc2l0aW9uUHJldmlvdXNDb25uZWN0aW9uXygpO3RoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeShhLnhQb3MsdGhpcy5pbmZvXy5zdGFydFkpO2Zvcih2YXIgYz0wLGQ7ZD1iW2NdO2MrKylCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTGVmdFJvdW5kZWRDb3JuZXIoZCk/dGhpcy5vdXRsaW5lUGF0aF8rPXRoaXMuY29uc3RhbnRzXy5PVVRTSURFX0NPUk5FUlMudG9wTGVmdDpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUmlnaHRSb3VuZGVkQ29ybmVyKGQpP3RoaXMub3V0bGluZVBhdGhfKz10aGlzLmNvbnN0YW50c18uT1VUU0lERV9DT1JORVJTLnRvcFJpZ2h0OkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oZCk/XG50aGlzLm91dGxpbmVQYXRoXys9ZC5zaGFwZS5wYXRoTGVmdDpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0KGQpP3RoaXMub3V0bGluZVBhdGhfKz10aGlzLmNvbnN0YW50c18uU1RBUlRfSEFULnBhdGg6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1NwYWNlcihkKSYmKHRoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsZC53aWR0aCkpO3RoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsYS5oZWlnaHQpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUuZHJhd0phZ2dlZEVkZ2VfPWZ1bmN0aW9uKGEpe3RoaXMub3V0bGluZVBhdGhfKz10aGlzLmNvbnN0YW50c18uSkFHR0VEX1RFRVRILnBhdGgrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwidlwiLGEuaGVpZ2h0LXRoaXMuY29uc3RhbnRzXy5KQUdHRURfVEVFVEguaGVpZ2h0KX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUuZHJhd1ZhbHVlSW5wdXRfPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGFzdElucHV0KCk7dGhpcy5wb3NpdGlvbkV4dGVybmFsVmFsdWVDb25uZWN0aW9uXyhhKTt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBiLnNoYXBlLnBhdGhEb3duP2Iuc2hhcGUucGF0aERvd24oYi5oZWlnaHQpOmIuc2hhcGUucGF0aERvd247dGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixiLnhQb3MrYi53aWR0aCkrYytCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsYS5oZWlnaHQtYi5jb25uZWN0aW9uSGVpZ2h0KX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUuZHJhd1N0YXRlbWVudElucHV0Xz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldExhc3RJbnB1dCgpLGM9Yi54UG9zK2Iubm90Y2hPZmZzZXQrYi5zaGFwZS53aWR0aDtiPWIuc2hhcGUucGF0aFJpZ2h0K0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcImhcIiwtKGIubm90Y2hPZmZzZXQtdGhpcy5jb25zdGFudHNfLklOU0lERV9DT1JORVJTLndpZHRoKSkrdGhpcy5jb25zdGFudHNfLklOU0lERV9DT1JORVJTLnBhdGhUb3A7dmFyIGQ9YS5oZWlnaHQtMip0aGlzLmNvbnN0YW50c18uSU5TSURFX0NPUk5FUlMuaGVpZ2h0O3RoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJIXCIsYykrYitCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsZCkrdGhpcy5jb25zdGFudHNfLklOU0lERV9DT1JORVJTLnBhdGhCb3R0b20rQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiSFwiLFxuYS54UG9zK2Eud2lkdGgpO3RoaXMucG9zaXRpb25TdGF0ZW1lbnRJbnB1dENvbm5lY3Rpb25fKGEpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUuZHJhd1JpZ2h0U2lkZVJvd189ZnVuY3Rpb24oYSl7dGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIixhLnlQb3MrYS5oZWlnaHQpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5kcmF3Qm90dG9tXz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5mb18uYm90dG9tUm93LGI9YS5lbGVtZW50czt0aGlzLnBvc2l0aW9uTmV4dENvbm5lY3Rpb25fKCk7Zm9yKHZhciBjPTAsZD1cIlwiLGU9Yi5sZW5ndGgtMSxmO2Y9YltlXTtlLS0pQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc05leHRDb25uZWN0aW9uKGYpP2QrPWYuc2hhcGUucGF0aFJpZ2h0OkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0U3F1YXJlQ29ybmVyKGYpP2QrPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixhLnhQb3MpOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihmKT9kKz10aGlzLmNvbnN0YW50c18uT1VUU0lERV9DT1JORVJTLmJvdHRvbUxlZnQ6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1JpZ2h0Um91bmRlZENvcm5lcihmKT8oZCs9XG50aGlzLmNvbnN0YW50c18uT1VUU0lERV9DT1JORVJTLmJvdHRvbVJpZ2h0LGM9dGhpcy5jb25zdGFudHNfLk9VVFNJREVfQ09STkVSUy5yaWdodEhlaWdodCk6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1NwYWNlcihmKSYmKGQrPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcImhcIiwtMSpmLndpZHRoKSk7dGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIixhLmJhc2VsaW5lLWMpO3RoaXMub3V0bGluZVBhdGhfKz1kfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5kcmF3TGVmdF89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZm9fLm91dHB1dENvbm5lY3Rpb247dGhpcy5wb3NpdGlvbk91dHB1dENvbm5lY3Rpb25fKCk7aWYoYSl7dmFyIGI9YS5jb25uZWN0aW9uT2Zmc2V0WSthLmhlaWdodDthPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEuc2hhcGUucGF0aFVwP2Euc2hhcGUucGF0aFVwKGEuaGVpZ2h0KTphLnNoYXBlLnBhdGhVcDt0aGlzLm91dGxpbmVQYXRoXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGIpK2F9dGhpcy5vdXRsaW5lUGF0aF8rPVwielwifTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5kcmF3SW50ZXJuYWxzXz1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7Yj10aGlzLmluZm9fLnJvd3NbYV07YSsrKWZvcih2YXIgYz0wLGQ7ZD1iLmVsZW1lbnRzW2NdO2MrKylCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoZCk/dGhpcy5kcmF3SW5saW5lSW5wdXRfKGQpOihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSWNvbihkKXx8QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGQpKSYmdGhpcy5sYXlvdXRGaWVsZF8oZCl9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLmxheW91dEZpZWxkXz1mdW5jdGlvbihhKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYSkpdmFyIGI9YS5maWVsZC5nZXRTdmdSb290KCk7ZWxzZSBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSWNvbihhKSYmKGI9YS5pY29uLmljb25Hcm91cF8pO3ZhciBjPWEuY2VudGVybGluZS1hLmhlaWdodC8yLGQ9YS54UG9zLGU9XCJcIjt0aGlzLmluZm9fLlJUTCYmKGQ9LShkK2Eud2lkdGgpLGEuZmxpcFJ0bCYmKGQrPWEud2lkdGgsZT1cInNjYWxlKC0xIDEpXCIpKTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSWNvbihhKT8oYi5zZXRBdHRyaWJ1dGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxiLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiK2QrXCIsXCIrYytcIilcIiksYS5pY29uLmNvbXB1dGVJY29uTG9jYXRpb24oKSk6Yi5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcblwidHJhbnNsYXRlKFwiK2QrXCIsXCIrYytcIilcIitlKTt0aGlzLmluZm9fLmlzSW5zZXJ0aW9uTWFya2VyJiZiLnNldEF0dHJpYnV0ZShcImRpc3BsYXlcIixcIm5vbmVcIil9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLmRyYXdJbmxpbmVJbnB1dF89ZnVuY3Rpb24oYSl7dmFyIGI9YS53aWR0aCxjPWEuaGVpZ2h0LGQ9YS5jb25uZWN0aW9uT2Zmc2V0WSxlPWEuY29ubmVjdGlvbkhlaWdodCtkO3RoaXMuaW5saW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZVRvKGEueFBvcythLmNvbm5lY3Rpb25XaWR0aCxhLmNlbnRlcmxpbmUtYy8yKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsZCkrYS5zaGFwZS5wYXRoRG93bitCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsYy1lKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsYi1hLmNvbm5lY3Rpb25XaWR0aCkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwidlwiLC1jKStcInpcIjt0aGlzLnBvc2l0aW9uSW5saW5lSW5wdXRDb25uZWN0aW9uXyhhKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUucG9zaXRpb25JbmxpbmVJbnB1dENvbm5lY3Rpb25fPWZ1bmN0aW9uKGEpe3ZhciBiPWEuY2VudGVybGluZS1hLmhlaWdodC8yO2lmKGEuY29ubmVjdGlvbk1vZGVsKXt2YXIgYz1hLnhQb3MrYS5jb25uZWN0aW9uV2lkdGgrYS5jb25uZWN0aW9uT2Zmc2V0WDt0aGlzLmluZm9fLlJUTCYmKGMqPS0xKTthLmNvbm5lY3Rpb25Nb2RlbC5zZXRPZmZzZXRJbkJsb2NrKGMsYithLmNvbm5lY3Rpb25PZmZzZXRZKX19O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLnBvc2l0aW9uU3RhdGVtZW50SW5wdXRDb25uZWN0aW9uXz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldExhc3RJbnB1dCgpO2lmKGIuY29ubmVjdGlvbk1vZGVsKXt2YXIgYz1hLnhQb3MrYS5zdGF0ZW1lbnRFZGdlK2Iubm90Y2hPZmZzZXQ7dGhpcy5pbmZvXy5SVEwmJihjKj0tMSk7Yi5jb25uZWN0aW9uTW9kZWwuc2V0T2Zmc2V0SW5CbG9jayhjLGEueVBvcyl9fTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUucG9zaXRpb25FeHRlcm5hbFZhbHVlQ29ubmVjdGlvbl89ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRMYXN0SW5wdXQoKTtpZihiLmNvbm5lY3Rpb25Nb2RlbCl7dmFyIGM9YS54UG9zK2Eud2lkdGg7dGhpcy5pbmZvXy5SVEwmJihjKj0tMSk7Yi5jb25uZWN0aW9uTW9kZWwuc2V0T2Zmc2V0SW5CbG9jayhjLGEueVBvcyl9fTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRHJhd2VyLnByb3RvdHlwZS5wb3NpdGlvblByZXZpb3VzQ29ubmVjdGlvbl89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZm9fLnRvcFJvdztpZihhLmNvbm5lY3Rpb24pe3ZhciBiPWEueFBvcythLm5vdGNoT2Zmc2V0O2EuY29ubmVjdGlvbi5jb25uZWN0aW9uTW9kZWwuc2V0T2Zmc2V0SW5CbG9jayh0aGlzLmluZm9fLlJUTD8tYjpiLDApfX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIucHJvdG90eXBlLnBvc2l0aW9uTmV4dENvbm5lY3Rpb25fPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbmZvXy5ib3R0b21Sb3c7aWYoYS5jb25uZWN0aW9uKXt2YXIgYj1hLmNvbm5lY3Rpb24sYz1iLnhQb3M7Yi5jb25uZWN0aW9uTW9kZWwuc2V0T2Zmc2V0SW5CbG9jayh0aGlzLmluZm9fLlJUTD8tYzpjLGEuYmFzZWxpbmUpfX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlci5wcm90b3R5cGUucG9zaXRpb25PdXRwdXRDb25uZWN0aW9uXz1mdW5jdGlvbigpe2lmKHRoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbil7dmFyIGE9dGhpcy5pbmZvXy5zdGFydFgrdGhpcy5pbmZvXy5vdXRwdXRDb25uZWN0aW9uLmNvbm5lY3Rpb25PZmZzZXRYO3RoaXMuYmxvY2tfLm91dHB1dENvbm5lY3Rpb24uc2V0T2Zmc2V0SW5CbG9jayh0aGlzLmluZm9fLlJUTD8tYTphLHRoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbi5jb25uZWN0aW9uT2Zmc2V0WSl9fTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlBhdGhPYmplY3Q9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY29uc3RhbnRzPWM7dGhpcy5zdmdSb290PWE7dGhpcy5zdmdQYXRoPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUSCx7XCJjbGFzc1wiOlwiYmxvY2tseVBhdGhcIn0sdGhpcy5zdmdSb290KTt0aGlzLnN0eWxlPWI7dGhpcy5tYXJrZXJTdmc9dGhpcy5jdXJzb3JTdmc9bnVsbH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0LnByb3RvdHlwZS5zZXRQYXRoPWZ1bmN0aW9uKGEpe3RoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsYSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUuZmxpcFJUTD1mdW5jdGlvbigpe3RoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInNjYWxlKC0xIDEpXCIpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUuc2V0Q3Vyc29yU3ZnPWZ1bmN0aW9uKGEpe2E/KHRoaXMuc3ZnUm9vdC5hcHBlbmRDaGlsZChhKSx0aGlzLmN1cnNvclN2Zz1hKTp0aGlzLmN1cnNvclN2Zz1udWxsfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlBhdGhPYmplY3QucHJvdG90eXBlLnNldE1hcmtlclN2Zz1mdW5jdGlvbihhKXthPyh0aGlzLmN1cnNvclN2Zz90aGlzLnN2Z1Jvb3QuaW5zZXJ0QmVmb3JlKGEsdGhpcy5jdXJzb3JTdmcpOnRoaXMuc3ZnUm9vdC5hcHBlbmRDaGlsZChhKSx0aGlzLm1hcmtlclN2Zz1hKTp0aGlzLm1hcmtlclN2Zz1udWxsfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUuYXBwbHlDb2xvdXI9ZnVuY3Rpb24oYSl7dGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLHRoaXMuc3R5bGUuY29sb3VyVGVydGlhcnkpO3RoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsdGhpcy5zdHlsZS5jb2xvdXJQcmltYXJ5KTt0aGlzLnVwZGF0ZVNoYWRvd18oYS5pc1NoYWRvdygpKTt0aGlzLnVwZGF0ZURpc2FibGVkXyghYS5pc0VuYWJsZWQoKXx8YS5nZXRJbmhlcml0ZWREaXNhYmxlZCgpKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0LnByb3RvdHlwZS5zZXRTdHlsZT1mdW5jdGlvbihhKXt0aGlzLnN0eWxlPWF9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0LnByb3RvdHlwZS5zZXRDbGFzc189ZnVuY3Rpb24oYSxiKXtiP0Jsb2NrbHkudXRpbHMuZG9tLmFkZENsYXNzKHRoaXMuc3ZnUm9vdCxhKTpCbG9ja2x5LnV0aWxzLmRvbS5yZW1vdmVDbGFzcyh0aGlzLnN2Z1Jvb3QsYSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlSGlnaGxpZ2h0ZWQ9ZnVuY3Rpb24oYSl7YT90aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsXCJ1cmwoI1wiK3RoaXMuY29uc3RhbnRzLmVtYm9zc0ZpbHRlcklkK1wiKVwiKTp0aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsXCJub25lXCIpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlU2hhZG93Xz1mdW5jdGlvbihhKXthJiYodGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLFwibm9uZVwiKSx0aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuc3R5bGUuY29sb3VyU2Vjb25kYXJ5KSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlRGlzYWJsZWRfPWZ1bmN0aW9uKGEpe3RoaXMuc2V0Q2xhc3NfKFwiYmxvY2tseURpc2FibGVkXCIsYSk7YSYmdGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcImZpbGxcIixcInVybCgjXCIrdGhpcy5jb25zdGFudHMuZGlzYWJsZWRQYXR0ZXJuSWQrXCIpXCIpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlBhdGhPYmplY3QucHJvdG90eXBlLnVwZGF0ZVNlbGVjdGVkPWZ1bmN0aW9uKGEpe3RoaXMuc2V0Q2xhc3NfKFwiYmxvY2tseVNlbGVjdGVkXCIsYSl9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0LnByb3RvdHlwZS51cGRhdGVEcmFnZ2luZ0RlbGV0ZT1mdW5jdGlvbihhKXt0aGlzLnNldENsYXNzXyhcImJsb2NrbHlEcmFnZ2luZ0RlbGV0ZVwiLGEpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlBhdGhPYmplY3QucHJvdG90eXBlLnVwZGF0ZUluc2VydGlvbk1hcmtlcj1mdW5jdGlvbihhKXt0aGlzLnNldENsYXNzXyhcImJsb2NrbHlJbnNlcnRpb25NYXJrZXJcIixhKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0LnByb3RvdHlwZS51cGRhdGVNb3ZhYmxlPWZ1bmN0aW9uKGEpe3RoaXMuc2V0Q2xhc3NfKFwiYmxvY2tseURyYWdnYWJsZVwiLGEpfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlBhdGhPYmplY3QucHJvdG90eXBlLnVwZGF0ZVJlcGxhY2VtZW50RmFkZT1mdW5jdGlvbihhKXt0aGlzLnNldENsYXNzXyhcImJsb2NrbHlSZXBsYWNlYWJsZVwiLGEpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlU2hhcGVGb3JJbnB1dEhpZ2hsaWdodD1mdW5jdGlvbihhLGIpe307QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlcj1mdW5jdGlvbihhKXt0aGlzLm5hbWU9YTt0aGlzLm92ZXJyaWRlcz10aGlzLmNvbnN0YW50c189bnVsbH07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlci5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZStcIi1yZW5kZXJlclwifTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEsYil7dGhpcy5jb25zdGFudHNfPXRoaXMubWFrZUNvbnN0YW50c18oKTtiJiYodGhpcy5vdmVycmlkZXM9YixCbG9ja2x5LnV0aWxzLm9iamVjdC5taXhpbih0aGlzLmNvbnN0YW50c18sYikpO3RoaXMuY29uc3RhbnRzXy5zZXRUaGVtZShhKTt0aGlzLmNvbnN0YW50c18uaW5pdCgpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZURvbT1mdW5jdGlvbihhLGIpe3RoaXMuY29uc3RhbnRzXy5jcmVhdGVEb20oYSx0aGlzLm5hbWUrXCItXCIrYi5uYW1lLFwiLlwiK3RoaXMuZ2V0Q2xhc3NOYW1lKCkrXCIuXCIrYi5nZXRDbGFzc05hbWUoKSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hEb209ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbnN0YW50cygpO2MuZGlzcG9zZSgpO3RoaXMuY29uc3RhbnRzXz10aGlzLm1ha2VDb25zdGFudHNfKCk7dGhpcy5vdmVycmlkZXMmJkJsb2NrbHkudXRpbHMub2JqZWN0Lm1peGluKHRoaXMuY29uc3RhbnRzXyx0aGlzLm92ZXJyaWRlcyk7dGhpcy5jb25zdGFudHNfLnJhbmRvbUlkZW50aWZpZXI9Yy5yYW5kb21JZGVudGlmaWVyO3RoaXMuY29uc3RhbnRzXy5zZXRUaGVtZShiKTt0aGlzLmNvbnN0YW50c18uaW5pdCgpO3RoaXMuY3JlYXRlRG9tKGEsYil9O1xuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uc3RhbnRzXyYmdGhpcy5jb25zdGFudHNfLmRpc3Bvc2UoKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlci5wcm90b3R5cGUubWFrZUNvbnN0YW50c189ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuQ29uc3RhbnRQcm92aWRlcn07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlci5wcm90b3R5cGUubWFrZVJlbmRlckluZm9fPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvKHRoaXMsYSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VEcmF3ZXJfPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlcihhLGIpfTtcbkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VEZWJ1Z2dlcl89ZnVuY3Rpb24oKXtpZighQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EZWJ1Zyl0aHJvdyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZSBmb3IgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EZWJ1Z1wiKTtyZXR1cm4gbmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuRGVidWcodGhpcy5nZXRDb25zdGFudHMoKSl9O0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VNYXJrZXJEcmF3ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWFya2VyU3ZnKGEsdGhpcy5nZXRDb25zdGFudHMoKSxiKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlci5wcm90b3R5cGUubWFrZVBhdGhPYmplY3Q9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdChhLGIsdGhpcy5jb25zdGFudHNfKX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5nZXRDb25zdGFudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdGFudHNffTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5zaG91bGRIaWdobGlnaHRDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiEwfTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5vcnBoYW5DYW5Db25uZWN0QXRFbmQ9ZnVuY3Rpb24oYSxiLGMpe2M9PUJsb2NrbHkuT1VUUFVUX1ZBTFVFPyhjPWIub3V0cHV0Q29ubmVjdGlvbixhPUJsb2NrbHkuQ29ubmVjdGlvbi5sYXN0Q29ubmVjdGlvbkluUm93KGEsYikpOihjPWIucHJldmlvdXNDb25uZWN0aW9uLGE9YS5sYXN0Q29ubmVjdGlvbkluU3RhY2soKSk7cmV0dXJuIGE/Yy5nZXRDb25uZWN0aW9uQ2hlY2tlcigpLmNhbkNvbm5lY3QoYSxjLCExKTohMX07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5nZXRDb25uZWN0aW9uUHJldmlld01ldGhvZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIudHlwZT09QmxvY2tseS5PVVRQVVRfVkFMVUV8fGIudHlwZT09QmxvY2tseS5QUkVWSU9VU19TVEFURU1FTlQ/IWEuaXNDb25uZWN0ZWQoKXx8dGhpcy5vcnBoYW5DYW5Db25uZWN0QXRFbmQoYyxhLnRhcmdldEJsb2NrKCksYi50eXBlKT9CbG9ja2x5Lkluc2VydGlvbk1hcmtlck1hbmFnZXIuUFJFVklFV19UWVBFLklOU0VSVElPTl9NQVJLRVI6QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLlBSRVZJRVdfVFlQRS5SRVBMQUNFTUVOVF9GQURFOkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5QUkVWSUVXX1RZUEUuSU5TRVJUSU9OX01BUktFUn07XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oYSl7QmxvY2tseS5ibG9ja1JlbmRlcmluZy51c2VEZWJ1Z2dlciYmIWEucmVuZGVyaW5nRGVidWdnZXImJihhLnJlbmRlcmluZ0RlYnVnZ2VyPXRoaXMubWFrZURlYnVnZ2VyXygpKTt2YXIgYj10aGlzLm1ha2VSZW5kZXJJbmZvXyhhKTtiLm1lYXN1cmUoKTt0aGlzLm1ha2VEcmF3ZXJfKGEsYikuZHJhdygpfTtCbG9ja2x5LmdlcmFzPXt9O0Jsb2NrbHkuZ2VyYXMuQ29uc3RhbnRQcm92aWRlcj1mdW5jdGlvbigpe0Jsb2NrbHkuZ2VyYXMuQ29uc3RhbnRQcm92aWRlci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuRklFTERfVEVYVF9CQVNFTElORV9DRU5URVI9ITE7dGhpcy5EQVJLX1BBVEhfT0ZGU0VUPTE7dGhpcy5NQVhfQk9UVE9NX1dJRFRIPTMwfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmdlcmFzLkNvbnN0YW50UHJvdmlkZXIsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyKTtcbkJsb2NrbHkuZ2VyYXMuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuZ2V0Q1NTXz1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS5nZXJhcy5Db25zdGFudFByb3ZpZGVyLnN1cGVyQ2xhc3NfLmdldENTU18uY2FsbCh0aGlzLGEpLmNvbmNhdChbYStcIiAuYmxvY2tseUluc2VydGlvbk1hcmtlcj4uYmxvY2tseVBhdGhMaWdodCxcIixhK1wiIC5ibG9ja2x5SW5zZXJ0aW9uTWFya2VyPi5ibG9ja2x5UGF0aERhcmsge1wiLFwiZmlsbC1vcGFjaXR5OiBcIit0aGlzLklOU0VSVElPTl9NQVJLRVJfT1BBQ0lUWStcIjtcIixcInN0cm9rZTogbm9uZTtcIixcIn1cIl0pfTtCbG9ja2x5LmdlcmFzLkhpZ2hsaWdodGVyPWZ1bmN0aW9uKGEpe3RoaXMuaW5mb189YTt0aGlzLmlubGluZVN0ZXBzXz10aGlzLnN0ZXBzXz1cIlwiO3RoaXMuUlRMXz10aGlzLmluZm9fLlJUTDthPWEuZ2V0UmVuZGVyZXIoKTt0aGlzLmNvbnN0YW50c189YS5nZXRDb25zdGFudHMoKTt0aGlzLmhpZ2hsaWdodENvbnN0YW50c189YS5nZXRIaWdobGlnaHRDb25zdGFudHMoKTt0aGlzLmhpZ2hsaWdodE9mZnNldF89dGhpcy5oaWdobGlnaHRDb25zdGFudHNfLk9GRlNFVDt0aGlzLm91dHNpZGVDb3JuZXJQYXRoc189dGhpcy5oaWdobGlnaHRDb25zdGFudHNfLk9VVFNJREVfQ09STkVSO3RoaXMuaW5zaWRlQ29ybmVyUGF0aHNfPXRoaXMuaGlnaGxpZ2h0Q29uc3RhbnRzXy5JTlNJREVfQ09STkVSO3RoaXMucHV6emxlVGFiUGF0aHNfPXRoaXMuaGlnaGxpZ2h0Q29uc3RhbnRzXy5QVVpaTEVfVEFCO3RoaXMubm90Y2hQYXRoc189dGhpcy5oaWdobGlnaHRDb25zdGFudHNfLk5PVENIO3RoaXMuc3RhcnRQYXRoc189XG50aGlzLmhpZ2hsaWdodENvbnN0YW50c18uU1RBUlRfSEFUO3RoaXMuamFnZ2VkVGVldGhQYXRoc189dGhpcy5oaWdobGlnaHRDb25zdGFudHNfLkpBR0dFRF9URUVUSH07QmxvY2tseS5nZXJhcy5IaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0ZXBzXytcIlxcblwiK3RoaXMuaW5saW5lU3RlcHNffTtcbkJsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0ZXIucHJvdG90eXBlLmRyYXdUb3BDb3JuZXI9ZnVuY3Rpb24oYSl7dGhpcy5zdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KGEueFBvcyx0aGlzLmluZm9fLnN0YXJ0WSk7Zm9yKHZhciBiPTAsYztjPWEuZWxlbWVudHNbYl07YisrKUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0U3F1YXJlQ29ybmVyKGMpP3RoaXMuc3RlcHNfKz10aGlzLmhpZ2hsaWdodENvbnN0YW50c18uU1RBUlRfUE9JTlQ6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0xlZnRSb3VuZGVkQ29ybmVyKGMpP3RoaXMuc3RlcHNfKz10aGlzLm91dHNpZGVDb3JuZXJQYXRoc18udG9wTGVmdCh0aGlzLlJUTF8pOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oYyk/dGhpcy5zdGVwc18rPXRoaXMubm90Y2hQYXRoc18ucGF0aExlZnQ6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0hhdChjKT9cbnRoaXMuc3RlcHNfKz10aGlzLnN0YXJ0UGF0aHNfLnBhdGgodGhpcy5SVExfKTpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGMpJiYwIT1jLndpZHRoJiYodGhpcy5zdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixjLnhQb3MrYy53aWR0aC10aGlzLmhpZ2hsaWdodE9mZnNldF8pKTt0aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiSFwiLGEueFBvcythLndpZHRoLXRoaXMuaGlnaGxpZ2h0T2Zmc2V0Xyl9O0Jsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0ZXIucHJvdG90eXBlLmRyYXdKYWdnZWRFZGdlXz1mdW5jdGlvbihhKXt0aGlzLmluZm9fLlJUTCYmKHRoaXMuc3RlcHNfKz10aGlzLmphZ2dlZFRlZXRoUGF0aHNfLnBhdGhMZWZ0K0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixhLmhlaWdodC10aGlzLmphZ2dlZFRlZXRoUGF0aHNfLmhlaWdodC10aGlzLmhpZ2hsaWdodE9mZnNldF8pKX07XG5CbG9ja2x5LmdlcmFzLkhpZ2hsaWdodGVyLnByb3RvdHlwZS5kcmF3VmFsdWVJbnB1dD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldExhc3RJbnB1dCgpO2lmKHRoaXMuUlRMXyl7dmFyIGM9YS5oZWlnaHQtYi5jb25uZWN0aW9uSGVpZ2h0O3RoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhiLnhQb3MrYi53aWR0aC10aGlzLmhpZ2hsaWdodE9mZnNldF8sYS55UG9zKSt0aGlzLnB1enpsZVRhYlBhdGhzXy5wYXRoRG93bih0aGlzLlJUTF8pK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixjKX1lbHNlIHRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhiLnhQb3MrYi53aWR0aCxhLnlQb3MpK3RoaXMucHV6emxlVGFiUGF0aHNfLnBhdGhEb3duKHRoaXMuUlRMXyl9O1xuQmxvY2tseS5nZXJhcy5IaWdobGlnaHRlci5wcm90b3R5cGUuZHJhd1N0YXRlbWVudElucHV0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGFzdElucHV0KCk7aWYodGhpcy5SVExfKXt2YXIgYz1hLmhlaWdodC0yKnRoaXMuaW5zaWRlQ29ybmVyUGF0aHNfLmhlaWdodDt0aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlVG8oYi54UG9zLGEueVBvcykrdGhpcy5pbnNpZGVDb3JuZXJQYXRoc18ucGF0aFRvcCh0aGlzLlJUTF8pK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixjKSt0aGlzLmluc2lkZUNvcm5lclBhdGhzXy5wYXRoQm90dG9tKHRoaXMuUlRMXykrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lVG8oYS53aWR0aC1iLnhQb3MtdGhpcy5pbnNpZGVDb3JuZXJQYXRoc18ud2lkdGgsMCl9ZWxzZSB0aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlVG8oYi54UG9zLGEueVBvcythLmhlaWdodCkrdGhpcy5pbnNpZGVDb3JuZXJQYXRoc18ucGF0aEJvdHRvbSh0aGlzLlJUTF8pK1xuQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lVG8oYS53aWR0aC1iLnhQb3MtdGhpcy5pbnNpZGVDb3JuZXJQYXRoc18ud2lkdGgsMCl9O0Jsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0ZXIucHJvdG90eXBlLmRyYXdSaWdodFNpZGVSb3c9ZnVuY3Rpb24oYSl7dmFyIGI9YS54UG9zK2Eud2lkdGgtdGhpcy5oaWdobGlnaHRPZmZzZXRfO2EuZm9sbG93c1N0YXRlbWVudCYmKHRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJIXCIsYikpO3RoaXMuUlRMXyYmKHRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJIXCIsYiksYS5oZWlnaHQ+dGhpcy5oaWdobGlnaHRPZmZzZXRfJiYodGhpcy5zdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIixhLnlQb3MrYS5oZWlnaHQtdGhpcy5oaWdobGlnaHRPZmZzZXRfKSkpfTtcbkJsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0ZXIucHJvdG90eXBlLmRyYXdCb3R0b21Sb3c9ZnVuY3Rpb24oYSl7aWYodGhpcy5SVExfKXRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJWXCIsYS5iYXNlbGluZS10aGlzLmhpZ2hsaWdodE9mZnNldF8pO2Vsc2V7dmFyIGI9dGhpcy5pbmZvXy5ib3R0b21Sb3cuZWxlbWVudHNbMF07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0xlZnRTcXVhcmVDb3JuZXIoYik/dGhpcy5zdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZVRvKGEueFBvcyt0aGlzLmhpZ2hsaWdodE9mZnNldF8sYS5iYXNlbGluZS10aGlzLmhpZ2hsaWdodE9mZnNldF8pOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihiKSYmKHRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhhLnhQb3MsYS5iYXNlbGluZSksdGhpcy5zdGVwc18rPXRoaXMub3V0c2lkZUNvcm5lclBhdGhzXy5ib3R0b21MZWZ0KCkpfX07XG5CbG9ja2x5LmdlcmFzLkhpZ2hsaWdodGVyLnByb3RvdHlwZS5kcmF3TGVmdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbjthJiYoYT1hLmNvbm5lY3Rpb25PZmZzZXRZK2EuaGVpZ2h0LHRoaXMuUlRMXz90aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlVG8odGhpcy5pbmZvXy5zdGFydFgsYSk6KHRoaXMuc3RlcHNfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyh0aGlzLmluZm9fLnN0YXJ0WCt0aGlzLmhpZ2hsaWdodE9mZnNldF8sdGhpcy5pbmZvXy5ib3R0b21Sb3cuYmFzZWxpbmUtdGhpcy5oaWdobGlnaHRPZmZzZXRfKSx0aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGEpKSx0aGlzLnN0ZXBzXys9dGhpcy5wdXp6bGVUYWJQYXRoc18ucGF0aFVwKHRoaXMuUlRMXykpO3RoaXMuUlRMX3x8KGE9dGhpcy5pbmZvXy50b3BSb3csQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0xlZnRSb3VuZGVkQ29ybmVyKGEuZWxlbWVudHNbMF0pP1xudGhpcy5zdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIix0aGlzLm91dHNpZGVDb3JuZXJQYXRoc18uaGVpZ2h0KTp0aGlzLnN0ZXBzXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGEuY2FwbGluZSt0aGlzLmhpZ2hsaWdodE9mZnNldF8pKX07XG5CbG9ja2x5LmdlcmFzLkhpZ2hsaWdodGVyLnByb3RvdHlwZS5kcmF3SW5saW5lSW5wdXQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5oaWdobGlnaHRPZmZzZXRfLGM9YS54UG9zK2EuY29ubmVjdGlvbldpZHRoLGQ9YS5jZW50ZXJsaW5lLWEuaGVpZ2h0LzIsZT1hLndpZHRoLWEuY29ubmVjdGlvbldpZHRoLGY9ZCtiO3RoaXMuUlRMXz8oZD1hLmNvbm5lY3Rpb25PZmZzZXRZLWIsYT1hLmhlaWdodC0oYS5jb25uZWN0aW9uT2Zmc2V0WSthLmNvbm5lY3Rpb25IZWlnaHQpK2IsdGhpcy5pbmxpbmVTdGVwc18rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZVRvKGMtYixmKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsZCkrdGhpcy5wdXp6bGVUYWJQYXRoc18ucGF0aERvd24odGhpcy5SVExfKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJ2XCIsYSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiaFwiLGUpKTp0aGlzLmlubGluZVN0ZXBzXys9XG5CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhhLnhQb3MrYS53aWR0aCtiLGYpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixhLmhlaWdodCkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiaFwiLC1lKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhjLGQrYS5jb25uZWN0aW9uT2Zmc2V0WSkrdGhpcy5wdXp6bGVUYWJQYXRoc18ucGF0aERvd24odGhpcy5SVExfKX07QmxvY2tseS5nZXJhcy5JbmxpbmVJbnB1dD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuZ2VyYXMuSW5saW5lSW5wdXQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYik7dGhpcy5jb25uZWN0ZWRCbG9jayYmKHRoaXMud2lkdGgrPXRoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VULHRoaXMuaGVpZ2h0Kz10aGlzLmNvbnN0YW50c18uREFSS19QQVRIX09GRlNFVCl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuZ2VyYXMuSW5saW5lSW5wdXQsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JbmxpbmVJbnB1dCk7QmxvY2tseS5nZXJhcy5TdGF0ZW1lbnRJbnB1dD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuZ2VyYXMuU3RhdGVtZW50SW5wdXQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYik7dGhpcy5jb25uZWN0ZWRCbG9jayYmKHRoaXMuaGVpZ2h0Kz10aGlzLmNvbnN0YW50c18uREFSS19QQVRIX09GRlNFVCl9O1xuQmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5nZXJhcy5TdGF0ZW1lbnRJbnB1dCxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlN0YXRlbWVudElucHV0KTtCbG9ja2x5LmdlcmFzLlJlbmRlckluZm89ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LmdlcmFzLlJlbmRlckluZm8uc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYil9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuZ2VyYXMuUmVuZGVySW5mbyxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlJlbmRlckluZm8pO0Jsb2NrbHkuZ2VyYXMuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlcl99O1xuQmxvY2tseS5nZXJhcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5wb3B1bGF0ZUJvdHRvbVJvd189ZnVuY3Rpb24oKXtCbG9ja2x5LmdlcmFzLlJlbmRlckluZm8uc3VwZXJDbGFzc18ucG9wdWxhdGVCb3R0b21Sb3dfLmNhbGwodGhpcyk7dGhpcy5ibG9ja18uaW5wdXRMaXN0Lmxlbmd0aCYmdGhpcy5ibG9ja18uaW5wdXRMaXN0W3RoaXMuYmxvY2tfLmlucHV0TGlzdC5sZW5ndGgtMV0udHlwZT09QmxvY2tseS5ORVhUX1NUQVRFTUVOVHx8KHRoaXMuYm90dG9tUm93Lm1pbkhlaWdodD10aGlzLmNvbnN0YW50c18uTUVESVVNX1BBRERJTkctdGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQpfTtcbkJsb2NrbHkuZ2VyYXMuUmVuZGVySW5mby5wcm90b3R5cGUuYWRkSW5wdXRfPWZ1bmN0aW9uKGEsYil7dGhpcy5pc0lubGluZSYmYS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFPyhiLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuZ2VyYXMuSW5saW5lSW5wdXQodGhpcy5jb25zdGFudHNfLGEpKSxiLmhhc0lubGluZUlucHV0PSEwKTphLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/KGIuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5nZXJhcy5TdGF0ZW1lbnRJbnB1dCh0aGlzLmNvbnN0YW50c18sYSkpLGIuaGFzU3RhdGVtZW50PSEwKTphLnR5cGU9PUJsb2NrbHkuSU5QVVRfVkFMVUU/KGIuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5FeHRlcm5hbFZhbHVlSW5wdXQodGhpcy5jb25zdGFudHNfLGEpKSxiLmhhc0V4dGVybmFsSW5wdXQ9ITApOmEudHlwZT09QmxvY2tseS5EVU1NWV9JTlBVVCYmKGIubWluSGVpZ2h0PU1hdGgubWF4KGIubWluSGVpZ2h0LFxudGhpcy5jb25zdGFudHNfLkRVTU1ZX0lOUFVUX01JTl9IRUlHSFQpLGIuaGFzRHVtbXlJbnB1dD0hMCk7dGhpcy5pc0lubGluZXx8bnVsbCE9Yi5hbGlnbnx8KGIuYWxpZ249YS5hbGlnbil9O1xuQmxvY2tseS5nZXJhcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5hZGRFbGVtU3BhY2luZ189ZnVuY3Rpb24oKXtmb3IodmFyIGE9ITEsYj0wLGM7Yz10aGlzLnJvd3NbYl07YisrKWMuaGFzRXh0ZXJuYWxJbnB1dCYmKGE9ITApO2ZvcihiPTA7Yz10aGlzLnJvd3NbYl07YisrKXt2YXIgZD1jLmVsZW1lbnRzO2MuZWxlbWVudHM9W107Yy5zdGFydHNXaXRoRWxlbVNwYWNlcigpJiZjLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLHRoaXMuZ2V0SW5Sb3dTcGFjaW5nXyhudWxsLGRbMF0pKSk7aWYoZC5sZW5ndGgpe2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGgtMTtlKyspe2MuZWxlbWVudHMucHVzaChkW2VdKTt2YXIgZj10aGlzLmdldEluUm93U3BhY2luZ18oZFtlXSxkW2UrMV0pO2MuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JblJvd1NwYWNlcih0aGlzLmNvbnN0YW50c18sZikpfWMuZWxlbWVudHMucHVzaChkW2QubGVuZ3RoLVxuMV0pO2MuZW5kc1dpdGhFbGVtU3BhY2VyKCkmJihmPXRoaXMuZ2V0SW5Sb3dTcGFjaW5nXyhkW2QubGVuZ3RoLTFdLG51bGwpLGEmJmMuaGFzRHVtbXlJbnB1dCYmKGYrPXRoaXMuY29uc3RhbnRzXy5UQUJfV0lEVEgpLGMuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JblJvd1NwYWNlcih0aGlzLmNvbnN0YW50c18sZikpKX19fTtcbkJsb2NrbHkuZ2VyYXMuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0SW5Sb3dTcGFjaW5nXz1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYikmJmIuaXNFZGl0YWJsZT90aGlzLmNvbnN0YW50c18uTUVESVVNX1BBRERJTkc6YiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lubGluZUlucHV0KGIpP3RoaXMuY29uc3RhbnRzXy5NRURJVU1fTEFSR0VfUEFERElORzpiJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3RhdGVtZW50SW5wdXQoYik/dGhpcy5jb25zdGFudHNfLlNUQVRFTUVOVF9JTlBVVF9QQURESU5HX0xFRlQ6dGhpcy5jb25zdGFudHNfLkxBUkdFX1BBRERJTkc7aWYoIUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbnB1dChhKSYmKCFifHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3RhdGVtZW50SW5wdXQoYikpKXJldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYSkmJlxuYS5pc0VkaXRhYmxlP3RoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElORzpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSWNvbihhKT8yKnRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HKzE6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0hhdChhKT90aGlzLmNvbnN0YW50c18uTk9fUEFERElORzpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUHJldmlvdXNPck5leHRDb25uZWN0aW9uKGEpP3RoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihhKT90aGlzLmNvbnN0YW50c18uTUlOX0JMT0NLX1dJRFRIOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNKYWdnZWRFZGdlKGEpP3RoaXMuY29uc3RhbnRzXy5OT19QQURESU5HOnRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbnB1dChhKSYmXG4hYil7aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0V4dGVybmFsSW5wdXQoYSkpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5OT19QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChhKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLkxBUkdFX1BBRERJTkc7aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1N0YXRlbWVudElucHV0KGEpKXJldHVybiB0aGlzLmNvbnN0YW50c18uTk9fUEFERElOR31pZighQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0KGEpJiZiJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQoYikpe2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNGaWVsZChhKSYmYS5pc0VkaXRhYmxlKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYil8fEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNFeHRlcm5hbElucHV0KGIpKXJldHVybiB0aGlzLmNvbnN0YW50c18uU01BTExfUEFERElOR31lbHNle2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChiKXx8XG5CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRXh0ZXJuYWxJbnB1dChiKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLk1FRElVTV9MQVJHRV9QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTdGF0ZW1lbnRJbnB1dChiKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLkxBUkdFX1BBRERJTkd9cmV0dXJuIHRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HLTF9aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ljb24oYSkmJmImJiFCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQoYikpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChhKSYmYiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGIpKXJldHVybiBiLmlzRWRpdGFibGU/dGhpcy5jb25zdGFudHNfLk1FRElVTV9QQURESU5HOnRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HO1xuaWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0xlZnRTcXVhcmVDb3JuZXIoYSkmJmIpe2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNIYXQoYikpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5OT19QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oYikpcmV0dXJuIGIubm90Y2hPZmZzZXQ7aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc05leHRDb25uZWN0aW9uKGIpKXJldHVybiBhPSh0aGlzLlJUTD8xOi0xKSp0aGlzLmNvbnN0YW50c18uREFSS19QQVRIX09GRlNFVC8yLGIubm90Y2hPZmZzZXQrYX1pZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTGVmdFJvdW5kZWRDb3JuZXIoYSkmJmIpe2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oYikpcmV0dXJuIGIubm90Y2hPZmZzZXQtdGhpcy5jb25zdGFudHNfLkNPUk5FUl9SQURJVVM7XG5pZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb24oYikpcmV0dXJuIGE9KHRoaXMuUlRMPzE6LTEpKnRoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VULzIsYi5ub3RjaE9mZnNldC10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUythfXJldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYSkmJmImJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNGaWVsZChiKSYmYS5pc0VkaXRhYmxlPT1iLmlzRWRpdGFibGV8fGImJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNKYWdnZWRFZGdlKGIpP3RoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HOnRoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElOR307XG5CbG9ja2x5LmdlcmFzLlJlbmRlckluZm8ucHJvdG90eXBlLmdldFNwYWNlclJvd0hlaWdodF89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1RvcFJvdyhhKSYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0JvdHRvbVJvdyhiKT90aGlzLmNvbnN0YW50c18uRU1QVFlfQkxPQ0tfU1BBQ0VSX0hFSUdIVDpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzQm90dG9tUm93KGIpP3RoaXMuY29uc3RhbnRzXy5OT19QQURESU5HOmEuaGFzRXh0ZXJuYWxJbnB1dCYmYi5oYXNFeHRlcm5hbElucHV0P3RoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HOiFhLmhhc1N0YXRlbWVudCYmYi5oYXNTdGF0ZW1lbnQ/dGhpcy5jb25zdGFudHNfLkJFVFdFRU5fU1RBVEVNRU5UX1BBRERJTkdfWTphLmhhc1N0YXRlbWVudCYmYi5oYXNTdGF0ZW1lbnR8fCFhLmhhc1N0YXRlbWVudCYmXG5iLmhhc0R1bW15SW5wdXR8fGEuaGFzRHVtbXlJbnB1dD90aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORzp0aGlzLmNvbnN0YW50c18uTUVESVVNX1BBRERJTkd9O1xuQmxvY2tseS5nZXJhcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRFbGVtQ2VudGVybGluZV89ZnVuY3Rpb24oYSxiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpKXJldHVybiBhLnlQb3MrYi5oZWlnaHQvMjtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzQm90dG9tUm93KGEpKXJldHVybiBhPWEueVBvcythLmhlaWdodC1hLmRlc2NlbmRlckhlaWdodCxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb24oYik/YStiLmhlaWdodC8yOmEtYi5oZWlnaHQvMjtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpKXJldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0KGIpP2EuY2FwbGluZS1iLmhlaWdodC8yOmEuY2FwbGluZStiLmhlaWdodC8yO3ZhciBjPWEueVBvcztCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYil8fEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJY29uKGIpP1xuKGMrPWIuaGVpZ2h0LzIsKGEuaGFzSW5saW5lSW5wdXR8fGEuaGFzU3RhdGVtZW50KSYmYi5oZWlnaHQrdGhpcy5jb25zdGFudHNfLlRBTExfSU5QVVRfRklFTERfT0ZGU0VUX1k8PWEuaGVpZ2h0JiYoYys9dGhpcy5jb25zdGFudHNfLlRBTExfSU5QVVRfRklFTERfT0ZGU0VUX1kpKTpjPUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChiKT9jK2IuaGVpZ2h0LzI6YythLmhlaWdodC8yO3JldHVybiBjfTtcbkJsb2NrbHkuZ2VyYXMuUmVuZGVySW5mby5wcm90b3R5cGUuYWxpZ25Sb3dFbGVtZW50c189ZnVuY3Rpb24oKXtpZih0aGlzLmlzSW5saW5lKXtmb3IodmFyIGE9MCxiPW51bGwsYz10aGlzLnJvd3MubGVuZ3RoLTEsZDtkPXRoaXMucm93c1tjXTtjLS0pZC5uZXh0UmlnaHRFZGdlPWEsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0Um93KGQpJiYoZC5oYXNTdGF0ZW1lbnQmJnRoaXMuYWxpZ25TdGF0ZW1lbnRSb3dfKGQpLGImJmIuaGFzU3RhdGVtZW50JiZkLndpZHRoPGIud2lkdGg/ZC5uZXh0UmlnaHRFZGdlPWIud2lkdGg6YT1kLndpZHRoLGI9ZCk7Zm9yKGM9YT0wO2Q9dGhpcy5yb3dzW2NdO2MrKylkLmhhc1N0YXRlbWVudD9hPXRoaXMuZ2V0RGVzaXJlZFJvd1dpZHRoXyhkKTpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGQpP2Qud2lkdGg9TWF0aC5tYXgoYSxkLm5leHRSaWdodEVkZ2UpOihhPU1hdGgubWF4KGEsZC5uZXh0UmlnaHRFZGdlKS1cbmQud2lkdGgsMDxhJiZ0aGlzLmFkZEFsaWdubWVudFBhZGRpbmdfKGQsYSksYT1kLndpZHRoKX1lbHNlIEJsb2NrbHkuZ2VyYXMuUmVuZGVySW5mby5zdXBlckNsYXNzXy5hbGlnblJvd0VsZW1lbnRzXy5jYWxsKHRoaXMpfTtCbG9ja2x5LmdlcmFzLlJlbmRlckluZm8ucHJvdG90eXBlLmdldERlc2lyZWRSb3dXaWR0aF89ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNJbmxpbmUmJmEuaGFzU3RhdGVtZW50P3RoaXMuc3RhdGVtZW50RWRnZSt0aGlzLmNvbnN0YW50c18uTUFYX0JPVFRPTV9XSURUSCt0aGlzLnN0YXJ0WDpCbG9ja2x5LmdlcmFzLlJlbmRlckluZm8uc3VwZXJDbGFzc18uZ2V0RGVzaXJlZFJvd1dpZHRoXy5jYWxsKHRoaXMsYSl9O1xuQmxvY2tseS5nZXJhcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5maW5hbGl6ZV89ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz0wLGQ7ZD10aGlzLnJvd3NbY107YysrKXtkLnlQb3M9YjtkLnhQb3M9dGhpcy5zdGFydFg7Yis9ZC5oZWlnaHQ7YT1NYXRoLm1heChhLGQud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzKTt2YXIgZT1iLXRoaXMudG9wUm93LmFzY2VuZGVySGVpZ2h0O2Q9PXRoaXMuYm90dG9tUm93JiZlPHRoaXMuY29uc3RhbnRzXy5NSU5fQkxPQ0tfSEVJR0hUJiYoZT10aGlzLmNvbnN0YW50c18uTUlOX0JMT0NLX0hFSUdIVC1lLHRoaXMuYm90dG9tUm93LmhlaWdodCs9ZSxiKz1lKTt0aGlzLnJlY29yZEVsZW1Qb3NpdGlvbnNfKGQpfXRoaXMub3V0cHV0Q29ubmVjdGlvbiYmdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24mJnRoaXMuYmxvY2tfLm5leHRDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkmJihhPU1hdGgubWF4KGEsdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKS5nZXRIZWlnaHRXaWR0aCgpLndpZHRoLVxudGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQpKTt0aGlzLmJvdHRvbVJvdy5iYXNlbGluZT1iLXRoaXMuYm90dG9tUm93LmRlc2NlbmRlckhlaWdodDt0aGlzLndpZHRoV2l0aENoaWxkcmVuPWErdGhpcy5zdGFydFgrdGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQ7dGhpcy53aWR0aCs9dGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQ7dGhpcy5oZWlnaHQ9Yit0aGlzLmNvbnN0YW50c18uREFSS19QQVRIX09GRlNFVDt0aGlzLnN0YXJ0WT10aGlzLnRvcFJvdy5jYXBsaW5lfTtCbG9ja2x5LmdlcmFzLkRyYXdlcj1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLGIpO3RoaXMuaGlnaGxpZ2h0ZXJfPW5ldyBCbG9ja2x5LmdlcmFzLkhpZ2hsaWdodGVyKGIpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LmdlcmFzLkRyYXdlcixCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLkRyYXdlcik7XG5CbG9ja2x5LmdlcmFzLkRyYXdlci5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbigpe3RoaXMuaGlkZUhpZGRlbkljb25zXygpO3RoaXMuZHJhd091dGxpbmVfKCk7dGhpcy5kcmF3SW50ZXJuYWxzXygpO3ZhciBhPXRoaXMuYmxvY2tfLnBhdGhPYmplY3Q7YS5zZXRQYXRoKHRoaXMub3V0bGluZVBhdGhfK1wiXFxuXCIrdGhpcy5pbmxpbmVQYXRoXyk7YS5zZXRIaWdobGlnaHRQYXRoKHRoaXMuaGlnaGxpZ2h0ZXJfLmdldFBhdGgoKSk7dGhpcy5pbmZvXy5SVEwmJmEuZmxpcFJUTCgpO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudXNlRGVidWdnZXImJnRoaXMuYmxvY2tfLnJlbmRlcmluZ0RlYnVnZ2VyLmRyYXdEZWJ1Zyh0aGlzLmJsb2NrXyx0aGlzLmluZm9fKTt0aGlzLnJlY29yZFNpemVPbkJsb2NrXygpfTtcbkJsb2NrbHkuZ2VyYXMuRHJhd2VyLnByb3RvdHlwZS5kcmF3VG9wXz1mdW5jdGlvbigpe3RoaXMuaGlnaGxpZ2h0ZXJfLmRyYXdUb3BDb3JuZXIodGhpcy5pbmZvXy50b3BSb3cpO3RoaXMuaGlnaGxpZ2h0ZXJfLmRyYXdSaWdodFNpZGVSb3codGhpcy5pbmZvXy50b3BSb3cpO0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnN1cGVyQ2xhc3NfLmRyYXdUb3BfLmNhbGwodGhpcyl9O0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnByb3RvdHlwZS5kcmF3SmFnZ2VkRWRnZV89ZnVuY3Rpb24oYSl7dGhpcy5oaWdobGlnaHRlcl8uZHJhd0phZ2dlZEVkZ2VfKGEpO0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnN1cGVyQ2xhc3NfLmRyYXdKYWdnZWRFZGdlXy5jYWxsKHRoaXMsYSl9O1xuQmxvY2tseS5nZXJhcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdWYWx1ZUlucHV0Xz1mdW5jdGlvbihhKXt0aGlzLmhpZ2hsaWdodGVyXy5kcmF3VmFsdWVJbnB1dChhKTtCbG9ja2x5LmdlcmFzLkRyYXdlci5zdXBlckNsYXNzXy5kcmF3VmFsdWVJbnB1dF8uY2FsbCh0aGlzLGEpfTtCbG9ja2x5LmdlcmFzLkRyYXdlci5wcm90b3R5cGUuZHJhd1N0YXRlbWVudElucHV0Xz1mdW5jdGlvbihhKXt0aGlzLmhpZ2hsaWdodGVyXy5kcmF3U3RhdGVtZW50SW5wdXQoYSk7QmxvY2tseS5nZXJhcy5EcmF3ZXIuc3VwZXJDbGFzc18uZHJhd1N0YXRlbWVudElucHV0Xy5jYWxsKHRoaXMsYSl9O1xuQmxvY2tseS5nZXJhcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdSaWdodFNpZGVSb3dfPWZ1bmN0aW9uKGEpe3RoaXMuaGlnaGxpZ2h0ZXJfLmRyYXdSaWdodFNpZGVSb3coYSk7dGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixhLnhQb3MrYS53aWR0aCkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGEueVBvcythLmhlaWdodCl9O0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnByb3RvdHlwZS5kcmF3Qm90dG9tXz1mdW5jdGlvbigpe3RoaXMuaGlnaGxpZ2h0ZXJfLmRyYXdCb3R0b21Sb3codGhpcy5pbmZvXy5ib3R0b21Sb3cpO0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnN1cGVyQ2xhc3NfLmRyYXdCb3R0b21fLmNhbGwodGhpcyl9O0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnByb3RvdHlwZS5kcmF3TGVmdF89ZnVuY3Rpb24oKXt0aGlzLmhpZ2hsaWdodGVyXy5kcmF3TGVmdCgpO0Jsb2NrbHkuZ2VyYXMuRHJhd2VyLnN1cGVyQ2xhc3NfLmRyYXdMZWZ0Xy5jYWxsKHRoaXMpfTtcbkJsb2NrbHkuZ2VyYXMuRHJhd2VyLnByb3RvdHlwZS5kcmF3SW5saW5lSW5wdXRfPWZ1bmN0aW9uKGEpe3RoaXMuaGlnaGxpZ2h0ZXJfLmRyYXdJbmxpbmVJbnB1dChhKTtCbG9ja2x5LmdlcmFzLkRyYXdlci5zdXBlckNsYXNzXy5kcmF3SW5saW5lSW5wdXRfLmNhbGwodGhpcyxhKX07QmxvY2tseS5nZXJhcy5EcmF3ZXIucHJvdG90eXBlLnBvc2l0aW9uSW5saW5lSW5wdXRDb25uZWN0aW9uXz1mdW5jdGlvbihhKXt2YXIgYj1hLmNlbnRlcmxpbmUtYS5oZWlnaHQvMjtpZihhLmNvbm5lY3Rpb25Nb2RlbCl7dmFyIGM9YS54UG9zK2EuY29ubmVjdGlvbldpZHRoK3RoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VUO3RoaXMuaW5mb18uUlRMJiYoYyo9LTEpO2EuY29ubmVjdGlvbk1vZGVsLnNldE9mZnNldEluQmxvY2soYyxiK2EuY29ubmVjdGlvbk9mZnNldFkrdGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQpfX07XG5CbG9ja2x5LmdlcmFzLkRyYXdlci5wcm90b3R5cGUucG9zaXRpb25TdGF0ZW1lbnRJbnB1dENvbm5lY3Rpb25fPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGFzdElucHV0KCk7aWYoYi5jb25uZWN0aW9uTW9kZWwpe3ZhciBjPWEueFBvcythLnN0YXRlbWVudEVkZ2UrYi5ub3RjaE9mZnNldDtjPXRoaXMuaW5mb18uUlRMPy0xKmM6Yyt0aGlzLmNvbnN0YW50c18uREFSS19QQVRIX09GRlNFVDtiLmNvbm5lY3Rpb25Nb2RlbC5zZXRPZmZzZXRJbkJsb2NrKGMsYS55UG9zK3RoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VUKX19O1xuQmxvY2tseS5nZXJhcy5EcmF3ZXIucHJvdG90eXBlLnBvc2l0aW9uRXh0ZXJuYWxWYWx1ZUNvbm5lY3Rpb25fPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGFzdElucHV0KCk7aWYoYi5jb25uZWN0aW9uTW9kZWwpe3ZhciBjPWEueFBvcythLndpZHRoK3RoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VUO3RoaXMuaW5mb18uUlRMJiYoYyo9LTEpO2IuY29ubmVjdGlvbk1vZGVsLnNldE9mZnNldEluQmxvY2soYyxhLnlQb3MpfX07QmxvY2tseS5nZXJhcy5EcmF3ZXIucHJvdG90eXBlLnBvc2l0aW9uTmV4dENvbm5lY3Rpb25fPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbmZvXy5ib3R0b21Sb3c7aWYoYS5jb25uZWN0aW9uKXt2YXIgYj1hLmNvbm5lY3Rpb24sYz1iLnhQb3M7Yi5jb25uZWN0aW9uTW9kZWwuc2V0T2Zmc2V0SW5CbG9jaygodGhpcy5pbmZvXy5SVEw/LWM6YykrdGhpcy5jb25zdGFudHNfLkRBUktfUEFUSF9PRkZTRVQvMixhLmJhc2VsaW5lK3RoaXMuY29uc3RhbnRzXy5EQVJLX1BBVEhfT0ZGU0VUKX19O0Jsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0Q29uc3RhbnRQcm92aWRlcj1mdW5jdGlvbihhKXt0aGlzLmNvbnN0YW50UHJvdmlkZXI9YTt0aGlzLk9GRlNFVD0uNTt0aGlzLlNUQVJUX1BPSU5UPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KHRoaXMuT0ZGU0VULHRoaXMuT0ZGU0VUKX07QmxvY2tseS5nZXJhcy5IaWdobGlnaHRDb25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5JTlNJREVfQ09STkVSPXRoaXMubWFrZUluc2lkZUNvcm5lcigpO3RoaXMuT1VUU0lERV9DT1JORVI9dGhpcy5tYWtlT3V0c2lkZUNvcm5lcigpO3RoaXMuUFVaWkxFX1RBQj10aGlzLm1ha2VQdXp6bGVUYWIoKTt0aGlzLk5PVENIPXRoaXMubWFrZU5vdGNoKCk7dGhpcy5KQUdHRURfVEVFVEg9dGhpcy5tYWtlSmFnZ2VkVGVldGgoKTt0aGlzLlNUQVJUX0hBVD10aGlzLm1ha2VTdGFydEhhdCgpfTtcbkJsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0Q29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUubWFrZUluc2lkZUNvcm5lcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3RhbnRQcm92aWRlci5DT1JORVJfUkFESVVTLGI9dGhpcy5PRkZTRVQsYz0oMS1NYXRoLlNRUlQxXzIpKihhK2IpLWIsZD1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeShjLGMpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDBcIixhLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLWMtYixhLWMpKSxlPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDBcIixhK2IsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChhK2IsYStiKSksZj1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeShjLC1jKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwwXCIsYStiLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoYS1jLGMrYikpO3JldHVybnt3aWR0aDphK2IsaGVpZ2h0OmEsXG5wYXRoVG9wOmZ1bmN0aW9uKGcpe3JldHVybiBnP2Q6XCJcIn0scGF0aEJvdHRvbTpmdW5jdGlvbihnKXtyZXR1cm4gZz9lOmZ9fX07XG5CbG9ja2x5LmdlcmFzLkhpZ2hsaWdodENvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VPdXRzaWRlQ29ybmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25zdGFudFByb3ZpZGVyLkNPUk5FUl9SQURJVVMsYj10aGlzLk9GRlNFVCxjPSgxLU1hdGguU1FSVDFfMikqKGEtYikrYixkPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KGMsYykrQmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEtYixCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGEtYywtYytiKSksZT1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeShiLGEpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDFcIixhLWIsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChhLC1hK2IpKSxmPS1jLGc9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoYyxmKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwxXCIsYS1iLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLWMrXG5iLC1mLWEpKTtyZXR1cm57aGVpZ2h0OmEsdG9wTGVmdDpmdW5jdGlvbihoKXtyZXR1cm4gaD9kOmV9LGJvdHRvbUxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ319fTtcbkJsb2NrbHkuZ2VyYXMuSGlnaGxpZ2h0Q29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUubWFrZVB1enpsZVRhYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3RhbnRQcm92aWRlci5UQUJfV0lEVEgsYj10aGlzLmNvbnN0YW50UHJvdmlkZXIuVEFCX0hFSUdIVCxjPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KC0yLC1iKzMuNCkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lVG8oLS40NSphLC0yLjEpLGQ9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwidlwiLDIuNSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoLjk3Ki1hLDIuNSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcInFcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCguMDUqLWEsMTApLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLjMqYSw5LjUpXSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoLjY3KmEsLTEuOSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwidlwiLFxuMi41KSxlPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIiwtMS41KStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeSgtLjkyKmEsLS41KStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmN1cnZlKFwicVwiLFtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KC0uMTkqYSwtNS41KSxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KDAsLTExKV0pK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZUJ5KC45MiphLDEpLGY9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoLTUsYi0uNykrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lVG8oLjQ2KmEsLTIuMSk7cmV0dXJue3dpZHRoOmEsaGVpZ2h0OmIscGF0aFVwOmZ1bmN0aW9uKGcpe3JldHVybiBnP2M6ZX0scGF0aERvd246ZnVuY3Rpb24oZyl7cmV0dXJuIGc/ZDpmfX19O1xuQmxvY2tseS5nZXJhcy5IaWdobGlnaHRDb25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5tYWtlTm90Y2g9ZnVuY3Rpb24oKXtyZXR1cm57cGF0aExlZnQ6QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiaFwiLHRoaXMuT0ZGU0VUKSt0aGlzLmNvbnN0YW50UHJvdmlkZXIuTk9UQ0gucGF0aExlZnR9fTtCbG9ja2x5LmdlcmFzLkhpZ2hsaWdodENvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VKYWdnZWRUZWV0aD1mdW5jdGlvbigpe3JldHVybntwYXRoTGVmdDpCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVUbyg1LjEsMi42KStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeSgtMTAuMiw2LjgpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZVRvKDUuMSwyLjYpLGhlaWdodDoxMix3aWR0aDoxMC4yfX07XG5CbG9ja2x5LmdlcmFzLkhpZ2hsaWdodENvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VTdGFydEhhdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3RhbnRQcm92aWRlci5TVEFSVF9IQVQuaGVpZ2h0LGI9QmxvY2tseS51dGlscy5zdmdQYXRocy5tb3ZlQnkoMjUsLTguNykrQmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcImNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgyOS43LC02LjIpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoNTcuMiwtLjUpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoNzUsOC43KV0pLGM9QmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcImNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgxNy44LC05LjIpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoNDUuMywtMTQuOSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCg3NSwtOC43KV0pK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubW92ZVRvKDEwMC41LFxuYSsuNSk7cmV0dXJue3BhdGg6ZnVuY3Rpb24oZCl7cmV0dXJuIGQ/YjpjfX19O0Jsb2NrbHkuZ2VyYXMuUGF0aE9iamVjdD1mdW5jdGlvbihhLGIsYyl7dGhpcy5jb25zdGFudHM9Yzt0aGlzLnN2Z1Jvb3Q9YTt0aGlzLnN2Z1BhdGhEYXJrPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUSCx7XCJjbGFzc1wiOlwiYmxvY2tseVBhdGhEYXJrXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlKDEsMSlcIn0sdGhpcy5zdmdSb290KTt0aGlzLnN2Z1BhdGg9QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5QQVRILHtcImNsYXNzXCI6XCJibG9ja2x5UGF0aFwifSx0aGlzLnN2Z1Jvb3QpO3RoaXMuc3ZnUGF0aExpZ2h0PUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuUEFUSCx7XCJjbGFzc1wiOlwiYmxvY2tseVBhdGhMaWdodFwifSx0aGlzLnN2Z1Jvb3QpO3RoaXMuY29sb3VyRGFyaz1cIiMwMDAwMDBcIjt0aGlzLnN0eWxlPWJ9O1xuQmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUGF0aE9iamVjdCk7QmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5zZXRQYXRoPWZ1bmN0aW9uKGEpe3RoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsYSk7dGhpcy5zdmdQYXRoRGFyay5zZXRBdHRyaWJ1dGUoXCJkXCIsYSl9O0Jsb2NrbHkuZ2VyYXMuUGF0aE9iamVjdC5wcm90b3R5cGUuc2V0SGlnaGxpZ2h0UGF0aD1mdW5jdGlvbihhKXt0aGlzLnN2Z1BhdGhMaWdodC5zZXRBdHRyaWJ1dGUoXCJkXCIsYSl9O1xuQmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5mbGlwUlRMPWZ1bmN0aW9uKCl7dGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwic2NhbGUoLTEgMSlcIik7dGhpcy5zdmdQYXRoTGlnaHQuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXCJzY2FsZSgtMSAxKVwiKTt0aGlzLnN2Z1BhdGhEYXJrLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKDEsMSkgc2NhbGUoLTEgMSlcIil9O1xuQmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5hcHBseUNvbG91cj1mdW5jdGlvbihhKXt0aGlzLnN2Z1BhdGhMaWdodC5zdHlsZS5kaXNwbGF5PVwiXCI7dGhpcy5zdmdQYXRoRGFyay5zdHlsZS5kaXNwbGF5PVwiXCI7dGhpcy5zdmdQYXRoTGlnaHQuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsdGhpcy5zdHlsZS5jb2xvdXJUZXJ0aWFyeSk7dGhpcy5zdmdQYXRoRGFyay5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsdGhpcy5jb2xvdXJEYXJrKTtCbG9ja2x5LmdlcmFzLlBhdGhPYmplY3Quc3VwZXJDbGFzc18uYXBwbHlDb2xvdXIuY2FsbCh0aGlzLGEpO3RoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIixcIm5vbmVcIil9O1xuQmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5zZXRTdHlsZT1mdW5jdGlvbihhKXt0aGlzLnN0eWxlPWE7dGhpcy5jb2xvdXJEYXJrPUJsb2NrbHkudXRpbHMuY29sb3VyLmJsZW5kKFwiIzAwMFwiLHRoaXMuc3R5bGUuY29sb3VyUHJpbWFyeSwuMil8fHRoaXMuY29sb3VyRGFya307QmxvY2tseS5nZXJhcy5QYXRoT2JqZWN0LnByb3RvdHlwZS51cGRhdGVIaWdobGlnaHRlZD1mdW5jdGlvbihhKXthPyh0aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsXCJ1cmwoI1wiK3RoaXMuY29uc3RhbnRzLmVtYm9zc0ZpbHRlcklkK1wiKVwiKSx0aGlzLnN2Z1BhdGhMaWdodC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKToodGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcImZpbHRlclwiLFwibm9uZVwiKSx0aGlzLnN2Z1BhdGhMaWdodC5zdHlsZS5kaXNwbGF5PVwiaW5saW5lXCIpfTtcbkJsb2NrbHkuZ2VyYXMuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlU2hhZG93Xz1mdW5jdGlvbihhKXthJiYodGhpcy5zdmdQYXRoTGlnaHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN2Z1BhdGhEYXJrLnNldEF0dHJpYnV0ZShcImZpbGxcIix0aGlzLnN0eWxlLmNvbG91clNlY29uZGFyeSksdGhpcy5zdmdQYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLFwibm9uZVwiKSx0aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuc3R5bGUuY29sb3VyU2Vjb25kYXJ5KSl9O0Jsb2NrbHkuZ2VyYXMuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlRGlzYWJsZWRfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuZ2VyYXMuUGF0aE9iamVjdC5zdXBlckNsYXNzXy51cGRhdGVEaXNhYmxlZF8uY2FsbCh0aGlzLGEpO2EmJnRoaXMuc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIixcIm5vbmVcIil9O0Jsb2NrbHkuZ2VyYXMuUmVuZGVyZXI9ZnVuY3Rpb24oYSl7QmxvY2tseS5nZXJhcy5SZW5kZXJlci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oaWdobGlnaHRDb25zdGFudHNfPW51bGx9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuZ2VyYXMuUmVuZGVyZXIsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJlcik7QmxvY2tseS5nZXJhcy5SZW5kZXJlci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuZ2VyYXMuUmVuZGVyZXIuc3VwZXJDbGFzc18uaW5pdC5jYWxsKHRoaXMsYSxiKTt0aGlzLmhpZ2hsaWdodENvbnN0YW50c189dGhpcy5tYWtlSGlnaGxpZ2h0Q29uc3RhbnRzXygpO3RoaXMuaGlnaGxpZ2h0Q29uc3RhbnRzXy5pbml0KCl9O1xuQmxvY2tseS5nZXJhcy5SZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaERvbT1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuZ2VyYXMuUmVuZGVyZXIuc3VwZXJDbGFzc18ucmVmcmVzaERvbS5jYWxsKHRoaXMsYSxiKTt0aGlzLmdldEhpZ2hsaWdodENvbnN0YW50cygpLmluaXQoKX07QmxvY2tseS5nZXJhcy5SZW5kZXJlci5wcm90b3R5cGUubWFrZUNvbnN0YW50c189ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEJsb2NrbHkuZ2VyYXMuQ29uc3RhbnRQcm92aWRlcn07QmxvY2tseS5nZXJhcy5SZW5kZXJlci5wcm90b3R5cGUubWFrZVJlbmRlckluZm9fPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQmxvY2tseS5nZXJhcy5SZW5kZXJJbmZvKHRoaXMsYSl9O0Jsb2NrbHkuZ2VyYXMuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VEcmF3ZXJfPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCbG9ja2x5LmdlcmFzLkRyYXdlcihhLGIpfTtcbkJsb2NrbHkuZ2VyYXMuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VQYXRoT2JqZWN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCbG9ja2x5LmdlcmFzLlBhdGhPYmplY3QoYSxiLHRoaXMuZ2V0Q29uc3RhbnRzKCkpfTtCbG9ja2x5LmdlcmFzLlJlbmRlcmVyLnByb3RvdHlwZS5tYWtlSGlnaGxpZ2h0Q29uc3RhbnRzXz1mdW5jdGlvbigpe3JldHVybiBuZXcgQmxvY2tseS5nZXJhcy5IaWdobGlnaHRDb25zdGFudFByb3ZpZGVyKHRoaXMuZ2V0Q29uc3RhbnRzKCkpfTtCbG9ja2x5LmdlcmFzLlJlbmRlcmVyLnByb3RvdHlwZS5nZXRIaWdobGlnaHRDb25zdGFudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdobGlnaHRDb25zdGFudHNffTtCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLnJlZ2lzdGVyKFwiZ2VyYXNcIixCbG9ja2x5LmdlcmFzLlJlbmRlcmVyKTtCbG9ja2x5LnRocmFzb3M9e307QmxvY2tseS50aHJhc29zLlJlbmRlckluZm89ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LnRocmFzb3MuUmVuZGVySW5mby5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS50aHJhc29zLlJlbmRlckluZm8sQmxvY2tseS5ibG9ja1JlbmRlcmluZy5SZW5kZXJJbmZvKTtCbG9ja2x5LnRocmFzb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlcl99O1xuQmxvY2tseS50aHJhc29zLlJlbmRlckluZm8ucHJvdG90eXBlLmFkZEVsZW1TcGFjaW5nXz1mdW5jdGlvbigpe2Zvcih2YXIgYT0hMSxiPTAsYztjPXRoaXMucm93c1tiXTtiKyspYy5oYXNFeHRlcm5hbElucHV0JiYoYT0hMCk7Zm9yKGI9MDtjPXRoaXMucm93c1tiXTtiKyspe3ZhciBkPWMuZWxlbWVudHM7Yy5lbGVtZW50cz1bXTtjLnN0YXJ0c1dpdGhFbGVtU3BhY2VyKCkmJmMuZWxlbWVudHMucHVzaChuZXcgQmxvY2tseS5ibG9ja1JlbmRlcmluZy5JblJvd1NwYWNlcih0aGlzLmNvbnN0YW50c18sdGhpcy5nZXRJblJvd1NwYWNpbmdfKG51bGwsZFswXSkpKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoLTE7ZSsrKXtjLmVsZW1lbnRzLnB1c2goZFtlXSk7dmFyIGY9dGhpcy5nZXRJblJvd1NwYWNpbmdfKGRbZV0sZFtlKzFdKTtjLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLGYpKX1jLmVsZW1lbnRzLnB1c2goZFtkLmxlbmd0aC1cbjFdKTtjLmVuZHNXaXRoRWxlbVNwYWNlcigpJiYoZj10aGlzLmdldEluUm93U3BhY2luZ18oZFtkLmxlbmd0aC0xXSxudWxsKSxhJiZjLmhhc0R1bW15SW5wdXQmJihmKz10aGlzLmNvbnN0YW50c18uVEFCX1dJRFRIKSxjLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLGYpKSl9fTtcbkJsb2NrbHkudGhyYXNvcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRJblJvd1NwYWNpbmdfPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGImJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNGaWVsZChiKSYmYi5pc0VkaXRhYmxlP3RoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElORzpiJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYik/dGhpcy5jb25zdGFudHNfLk1FRElVTV9MQVJHRV9QQURESU5HOmImJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTdGF0ZW1lbnRJbnB1dChiKT90aGlzLmNvbnN0YW50c18uU1RBVEVNRU5UX0lOUFVUX1BBRERJTkdfTEVGVDp0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORztpZighQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0KGEpJiYhYilyZXR1cm4gQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGEpJiZhLmlzRWRpdGFibGU/dGhpcy5jb25zdGFudHNfLk1FRElVTV9QQURESU5HOlxuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ljb24oYSk/Mip0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORysxOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNIYXQoYSk/dGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkc6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1ByZXZpb3VzT3JOZXh0Q29ubmVjdGlvbihhKT90aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORzpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTGVmdFJvdW5kZWRDb3JuZXIoYSk/dGhpcy5jb25zdGFudHNfLk1JTl9CTE9DS19XSURUSDpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSmFnZ2VkRWRnZShhKT90aGlzLmNvbnN0YW50c18uTk9fUEFERElORzp0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORztpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQoYSkmJiFiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRXh0ZXJuYWxJbnB1dChhKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkc7XG5pZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYSkpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HO2lmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNTdGF0ZW1lbnRJbnB1dChhKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkd9aWYoIUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbnB1dChhKSYmYiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0KGIpKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYSkmJmEuaXNFZGl0YWJsZSl7aWYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lubGluZUlucHV0KGIpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRXh0ZXJuYWxJbnB1dChiKSlyZXR1cm4gdGhpcy5jb25zdGFudHNfLlNNQUxMX1BBRERJTkd9ZWxzZXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYil8fFxuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0V4dGVybmFsSW5wdXQoYikpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5NRURJVU1fTEFSR0VfUEFERElORztpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3RhdGVtZW50SW5wdXQoYikpcmV0dXJuIHRoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HfXJldHVybiB0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORy0xfWlmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJY29uKGEpJiZiJiYhQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0KGIpKXJldHVybiB0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORztpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYSkmJmImJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNGaWVsZChiKSlyZXR1cm4gYi5pc0VkaXRhYmxlP3RoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElORzp0aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORztcbmlmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0U3F1YXJlQ29ybmVyKGEpJiZiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0KGIpKXJldHVybiB0aGlzLmNvbnN0YW50c18uTk9fUEFERElORztpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzUHJldmlvdXNDb25uZWN0aW9uKGIpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb24oYikpcmV0dXJuIGIubm90Y2hPZmZzZXR9cmV0dXJuIEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihhKSYmYj9iLm5vdGNoT2Zmc2V0LXRoaXMuY29uc3RhbnRzXy5DT1JORVJfUkFESVVTOkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNGaWVsZChhKSYmYiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGIpJiZhLmlzRWRpdGFibGU9PWIuaXNFZGl0YWJsZXx8YiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0phZ2dlZEVkZ2UoYik/XG50aGlzLmNvbnN0YW50c18uTEFSR0VfUEFERElORzp0aGlzLmNvbnN0YW50c18uTUVESVVNX1BBRERJTkd9O1xuQmxvY2tseS50aHJhc29zLlJlbmRlckluZm8ucHJvdG90eXBlLmdldFNwYWNlclJvd0hlaWdodF89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1RvcFJvdyhhKSYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0JvdHRvbVJvdyhiKT90aGlzLmNvbnN0YW50c18uRU1QVFlfQkxPQ0tfU1BBQ0VSX0hFSUdIVDpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzQm90dG9tUm93KGIpP3RoaXMuY29uc3RhbnRzXy5OT19QQURESU5HOmEuaGFzRXh0ZXJuYWxJbnB1dCYmYi5oYXNFeHRlcm5hbElucHV0P3RoaXMuY29uc3RhbnRzXy5MQVJHRV9QQURESU5HOiFhLmhhc1N0YXRlbWVudCYmYi5oYXNTdGF0ZW1lbnQ/dGhpcy5jb25zdGFudHNfLkJFVFdFRU5fU1RBVEVNRU5UX1BBRERJTkdfWTphLmhhc1N0YXRlbWVudCYmYi5oYXNTdGF0ZW1lbnR8fGEuaGFzRHVtbXlJbnB1dHx8XG5iLmhhc0R1bW15SW5wdXQ/dGhpcy5jb25zdGFudHNfLkxBUkdFX1BBRERJTkc6dGhpcy5jb25zdGFudHNfLk1FRElVTV9QQURESU5HfTtcbkJsb2NrbHkudGhyYXNvcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRFbGVtQ2VudGVybGluZV89ZnVuY3Rpb24oYSxiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpKXJldHVybiBhLnlQb3MrYi5oZWlnaHQvMjtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzQm90dG9tUm93KGEpKXJldHVybiBhPWEueVBvcythLmhlaWdodC1hLmRlc2NlbmRlckhlaWdodCxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzTmV4dENvbm5lY3Rpb24oYik/YStiLmhlaWdodC8yOmEtYi5oZWlnaHQvMjtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpKXJldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0KGIpP2EuY2FwbGluZS1iLmhlaWdodC8yOmEuY2FwbGluZStiLmhlaWdodC8yO3ZhciBjPWEueVBvcztyZXR1cm4gYz1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoYikmJmEuaGFzU3RhdGVtZW50P1xuYysodGhpcy5jb25zdGFudHNfLlRBTExfSU5QVVRfRklFTERfT0ZGU0VUX1krYi5oZWlnaHQvMik6YythLmhlaWdodC8yfTtcbkJsb2NrbHkudGhyYXNvcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5maW5hbGl6ZV89ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz0wLGQ7ZD10aGlzLnJvd3NbY107YysrKXtkLnlQb3M9YjtkLnhQb3M9dGhpcy5zdGFydFg7Yis9ZC5oZWlnaHQ7YT1NYXRoLm1heChhLGQud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzKTt2YXIgZT1iLXRoaXMudG9wUm93LmFzY2VuZGVySGVpZ2h0O2Q9PXRoaXMuYm90dG9tUm93JiZlPHRoaXMuY29uc3RhbnRzXy5NSU5fQkxPQ0tfSEVJR0hUJiYoZT10aGlzLmNvbnN0YW50c18uTUlOX0JMT0NLX0hFSUdIVC1lLHRoaXMuYm90dG9tUm93LmhlaWdodCs9ZSxiKz1lKTt0aGlzLnJlY29yZEVsZW1Qb3NpdGlvbnNfKGQpfXRoaXMub3V0cHV0Q29ubmVjdGlvbiYmdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24mJnRoaXMuYmxvY2tfLm5leHRDb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkmJihhPU1hdGgubWF4KGEsdGhpcy5ibG9ja18ubmV4dENvbm5lY3Rpb24udGFyZ2V0QmxvY2soKS5nZXRIZWlnaHRXaWR0aCgpLndpZHRoKSk7XG50aGlzLmJvdHRvbVJvdy5iYXNlbGluZT1iLXRoaXMuYm90dG9tUm93LmRlc2NlbmRlckhlaWdodDt0aGlzLndpZHRoV2l0aENoaWxkcmVuPWErdGhpcy5zdGFydFg7dGhpcy5oZWlnaHQ9Yjt0aGlzLnN0YXJ0WT10aGlzLnRvcFJvdy5jYXBsaW5lfTtCbG9ja2x5LnRocmFzb3MuUmVuZGVyZXI9ZnVuY3Rpb24oYSl7QmxvY2tseS50aHJhc29zLlJlbmRlcmVyLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS50aHJhc29zLlJlbmRlcmVyLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIpO0Jsb2NrbHkudGhyYXNvcy5SZW5kZXJlci5wcm90b3R5cGUubWFrZVJlbmRlckluZm9fPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQmxvY2tseS50aHJhc29zLlJlbmRlckluZm8odGhpcyxhKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5yZWdpc3RlcihcInRocmFzb3NcIixCbG9ja2x5LnRocmFzb3MuUmVuZGVyZXIpO0Jsb2NrbHkuemVsb3M9e307XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXI9ZnVuY3Rpb24oKXtCbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLlNNQUxMX1BBRERJTkc9dGhpcy5HUklEX1VOSVQ9NDt0aGlzLk1FRElVTV9QQURESU5HPTIqdGhpcy5HUklEX1VOSVQ7dGhpcy5NRURJVU1fTEFSR0VfUEFERElORz0zKnRoaXMuR1JJRF9VTklUO3RoaXMuTEFSR0VfUEFERElORz00KnRoaXMuR1JJRF9VTklUO3RoaXMuQ09STkVSX1JBRElVUz0xKnRoaXMuR1JJRF9VTklUO3RoaXMuTk9UQ0hfV0lEVEg9OSp0aGlzLkdSSURfVU5JVDt0aGlzLk5PVENIX0hFSUdIVD0yKnRoaXMuR1JJRF9VTklUO3RoaXMuU1RBVEVNRU5UX0lOUFVUX05PVENIX09GRlNFVD10aGlzLk5PVENIX09GRlNFVF9MRUZUPTMqdGhpcy5HUklEX1VOSVQ7dGhpcy5NSU5fQkxPQ0tfV0lEVEg9Mip0aGlzLkdSSURfVU5JVDt0aGlzLk1JTl9CTE9DS19IRUlHSFQ9MTIqXG50aGlzLkdSSURfVU5JVDt0aGlzLkVNUFRZX1NUQVRFTUVOVF9JTlBVVF9IRUlHSFQ9Nip0aGlzLkdSSURfVU5JVDt0aGlzLlRBQl9PRkZTRVRfRlJPTV9UT1A9MDt0aGlzLlRPUF9ST1dfTUlOX0hFSUdIVD10aGlzLkNPUk5FUl9SQURJVVM7dGhpcy5UT1BfUk9XX1BSRUNFREVTX1NUQVRFTUVOVF9NSU5fSEVJR0hUPXRoaXMuTEFSR0VfUEFERElORzt0aGlzLkJPVFRPTV9ST1dfTUlOX0hFSUdIVD10aGlzLkNPUk5FUl9SQURJVVM7dGhpcy5CT1RUT01fUk9XX0FGVEVSX1NUQVRFTUVOVF9NSU5fSEVJR0hUPTYqdGhpcy5HUklEX1VOSVQ7dGhpcy5TVEFURU1FTlRfQk9UVE9NX1NQQUNFUj0tdGhpcy5OT1RDSF9IRUlHSFQ7dGhpcy5TVEFURU1FTlRfSU5QVVRfU1BBQ0VSX01JTl9XSURUSD00MCp0aGlzLkdSSURfVU5JVDt0aGlzLlNUQVRFTUVOVF9JTlBVVF9QQURESU5HX0xFRlQ9NCp0aGlzLkdSSURfVU5JVDt0aGlzLkVNUFRZX0lOTElORV9JTlBVVF9QQURESU5HPTQqdGhpcy5HUklEX1VOSVQ7XG50aGlzLkVNUFRZX0lOTElORV9JTlBVVF9IRUlHSFQ9OCp0aGlzLkdSSURfVU5JVDt0aGlzLkRVTU1ZX0lOUFVUX01JTl9IRUlHSFQ9OCp0aGlzLkdSSURfVU5JVDt0aGlzLkRVTU1ZX0lOUFVUX1NIQURPV19NSU5fSEVJR0hUPTYqdGhpcy5HUklEX1VOSVQ7dGhpcy5DVVJTT1JfV1NfV0lEVEg9MjAqdGhpcy5HUklEX1VOSVQ7dGhpcy5DVVJTT1JfQ09MT1VSPVwiI2ZmYTIwMFwiO3RoaXMuQ1VSU09SX1JBRElVUz01O3RoaXMuSkFHR0VEX1RFRVRIX1dJRFRIPXRoaXMuSkFHR0VEX1RFRVRIX0hFSUdIVD0wO3RoaXMuU1RBUlRfSEFUX0hFSUdIVD0yMjt0aGlzLlNUQVJUX0hBVF9XSURUSD05Njt0aGlzLlNIQVBFUz17SEVYQUdPTkFMOjEsUk9VTkQ6MixTUVVBUkU6MyxQVVpaTEU6NCxOT1RDSDo1fTt0aGlzLlNIQVBFX0lOX1NIQVBFX1BBRERJTkc9ezE6ezA6NSp0aGlzLkdSSURfVU5JVCwxOjIqdGhpcy5HUklEX1VOSVQsMjo1KnRoaXMuR1JJRF9VTklULDM6NSp0aGlzLkdSSURfVU5JVH0sXG4yOnswOjMqdGhpcy5HUklEX1VOSVQsMTozKnRoaXMuR1JJRF9VTklULDI6MSp0aGlzLkdSSURfVU5JVCwzOjIqdGhpcy5HUklEX1VOSVR9LDM6ezA6Mip0aGlzLkdSSURfVU5JVCwxOjIqdGhpcy5HUklEX1VOSVQsMjoyKnRoaXMuR1JJRF9VTklULDM6Mip0aGlzLkdSSURfVU5JVH19O3RoaXMuRlVMTF9CTE9DS19GSUVMRFM9ITA7dGhpcy5GSUVMRF9URVhUX0ZPTlRTSVpFPTMqdGhpcy5HUklEX1VOSVQ7dGhpcy5GSUVMRF9URVhUX0ZPTlRXRUlHSFQ9XCJib2xkXCI7dGhpcy5GSUVMRF9URVhUX0ZPTlRGQU1JTFk9J1wiSGVsdmV0aWNhIE5ldWVcIiwgXCJTZWdvZSBVSVwiLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYnO3RoaXMuRklFTERfQk9SREVSX1JFQ1RfUkFESVVTPXRoaXMuQ09STkVSX1JBRElVUzt0aGlzLkZJRUxEX0JPUkRFUl9SRUNUX1hfUEFERElORz0yKnRoaXMuR1JJRF9VTklUO3RoaXMuRklFTERfQk9SREVSX1JFQ1RfWV9QQURESU5HPTEuNjI1KnRoaXMuR1JJRF9VTklUO3RoaXMuRklFTERfQk9SREVSX1JFQ1RfSEVJR0hUPVxuOCp0aGlzLkdSSURfVU5JVDt0aGlzLkZJRUxEX0RST1BET1dOX0JPUkRFUl9SRUNUX0hFSUdIVD04KnRoaXMuR1JJRF9VTklUO3RoaXMuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XPXRoaXMuRklFTERfRFJPUERPV05fQ09MT1VSRURfRElWPXRoaXMuRklFTERfRFJPUERPV05fTk9fQk9SREVSX1JFQ1RfU0hBRE9XPSEwO3RoaXMuRklFTERfRFJPUERPV05fU1ZHX0FSUk9XX1BBRERJTkc9dGhpcy5GSUVMRF9CT1JERVJfUkVDVF9YX1BBRERJTkc7dGhpcy5GSUVMRF9DT0xPVVJfRlVMTF9CTE9DSz10aGlzLkZJRUxEX1RFWFRJTlBVVF9CT1hfU0hBRE9XPSEwO3RoaXMuRklFTERfQ09MT1VSX0RFRkFVTFRfV0lEVEg9Mip0aGlzLkdSSURfVU5JVDt0aGlzLkZJRUxEX0NPTE9VUl9ERUZBVUxUX0hFSUdIVD00KnRoaXMuR1JJRF9VTklUO3RoaXMuRklFTERfQ0hFQ0tCT1hfWF9PRkZTRVQ9MSp0aGlzLkdSSURfVU5JVDt0aGlzLk1BWF9EWU5BTUlDX0NPTk5FQ1RJT05fU0hBUEVfV0lEVEg9XG4xMip0aGlzLkdSSURfVU5JVDt0aGlzLlNFTEVDVEVEX0dMT1dfQ09MT1VSPVwiI2ZmZjIwMFwiO3RoaXMuU0VMRUNURURfR0xPV19TSVpFPS41O3RoaXMuUkVQTEFDRU1FTlRfR0xPV19DT0xPVVI9XCIjZmZmMjAwXCI7dGhpcy5SRVBMQUNFTUVOVF9HTE9XX1NJWkU9Mjt0aGlzLnNlbGVjdGVkR2xvd0ZpbHRlcklkPVwiXCI7dGhpcy5zZWxlY3RlZEdsb3dGaWx0ZXJfPW51bGw7dGhpcy5yZXBsYWNlbWVudEdsb3dGaWx0ZXJJZD1cIlwiO3RoaXMucmVwbGFjZW1lbnRHbG93RmlsdGVyXz1udWxsfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Db25zdGFudFByb3ZpZGVyKTtcbkJsb2NrbHkuemVsb3MuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuc2V0Rm9udENvbnN0YW50c189ZnVuY3Rpb24oYSl7QmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnN1cGVyQ2xhc3NfLnNldEZvbnRDb25zdGFudHNfLmNhbGwodGhpcyxhKTt0aGlzLkZJRUxEX0RST1BET1dOX0JPUkRFUl9SRUNUX0hFSUdIVD10aGlzLkZJRUxEX0JPUkRFUl9SRUNUX0hFSUdIVD10aGlzLkZJRUxEX1RFWFRfSEVJR0hUKzIqdGhpcy5GSUVMRF9CT1JERVJfUkVDVF9ZX1BBRERJTkd9O1xuQmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7QmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnN1cGVyQ2xhc3NfLmluaXQuY2FsbCh0aGlzKTt0aGlzLkhFWEFHT05BTD10aGlzLm1ha2VIZXhhZ29uYWwoKTt0aGlzLlJPVU5ERUQ9dGhpcy5tYWtlUm91bmRlZCgpO3RoaXMuU1FVQVJFRD10aGlzLm1ha2VTcXVhcmVkKCk7dGhpcy5TVEFURU1FTlRfSU5QVVRfTk9UQ0hfT0ZGU0VUPXRoaXMuTk9UQ0hfT0ZGU0VUX0xFRlQrdGhpcy5JTlNJREVfQ09STkVSUy5yaWdodFdpZHRofTtcbkJsb2NrbHkuemVsb3MuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUuc2V0RHluYW1pY1Byb3BlcnRpZXNfPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuemVsb3MuQ29uc3RhbnRQcm92aWRlci5zdXBlckNsYXNzXy5zZXREeW5hbWljUHJvcGVydGllc18uY2FsbCh0aGlzLGEpO3RoaXMuU0VMRUNURURfR0xPV19DT0xPVVI9YS5nZXRDb21wb25lbnRTdHlsZShcInNlbGVjdGVkR2xvd0NvbG91clwiKXx8dGhpcy5TRUxFQ1RFRF9HTE9XX0NPTE9VUjt2YXIgYj1OdW1iZXIoYS5nZXRDb21wb25lbnRTdHlsZShcInNlbGVjdGVkR2xvd1NpemVcIikpO3RoaXMuU0VMRUNURURfR0xPV19TSVpFPWImJiFpc05hTihiKT9iOnRoaXMuU0VMRUNURURfR0xPV19TSVpFO3RoaXMuUkVQTEFDRU1FTlRfR0xPV19DT0xPVVI9YS5nZXRDb21wb25lbnRTdHlsZShcInJlcGxhY2VtZW50R2xvd0NvbG91clwiKXx8dGhpcy5SRVBMQUNFTUVOVF9HTE9XX0NPTE9VUjt0aGlzLlJFUExBQ0VNRU5UX0dMT1dfU0laRT0oYT1OdW1iZXIoYS5nZXRDb21wb25lbnRTdHlsZShcInJlcGxhY2VtZW50R2xvd1NpemVcIikpKSYmXG4haXNOYU4oYSk/YTp0aGlzLlJFUExBQ0VNRU5UX0dMT1dfU0laRX07QmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7QmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnN1cGVyQ2xhc3NfLmRpc3Bvc2UuY2FsbCh0aGlzKTt0aGlzLnNlbGVjdGVkR2xvd0ZpbHRlcl8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5zZWxlY3RlZEdsb3dGaWx0ZXJfKTt0aGlzLnJlcGxhY2VtZW50R2xvd0ZpbHRlcl8mJkJsb2NrbHkudXRpbHMuZG9tLnJlbW92ZU5vZGUodGhpcy5yZXBsYWNlbWVudEdsb3dGaWx0ZXJfKX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VTdGFydEhhdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuU1RBUlRfSEFUX0hFSUdIVCxiPXRoaXMuU1RBUlRfSEFUX1dJRFRILGM9QmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcImNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgyNSwtYSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCg3MSwtYSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChiLDApXSk7cmV0dXJue2hlaWdodDphLHdpZHRoOmIscGF0aDpjfX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VIZXhhZ29uYWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsZCxlKXt2YXIgZj1jLzI7Zj1mPmI/YjpmO2U9ZT8tMToxO2M9KGQ/LTE6MSkqYy8yO3JldHVybiBCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVUbygtZSpmLGMpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZVRvKGUqZixjKX12YXIgYj10aGlzLk1BWF9EWU5BTUlDX0NPTk5FQ1RJT05fU0hBUEVfV0lEVEg7cmV0dXJue3R5cGU6dGhpcy5TSEFQRVMuSEVYQUdPTkFMLGlzRHluYW1pYzohMCx3aWR0aDpmdW5jdGlvbihjKXtjLz0yO3JldHVybiBjPmI/YjpjfSxoZWlnaHQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGN9LGNvbm5lY3Rpb25PZmZzZXRZOmZ1bmN0aW9uKGMpe3JldHVybiBjLzJ9LGNvbm5lY3Rpb25PZmZzZXRYOmZ1bmN0aW9uKGMpe3JldHVybi1jfSxwYXRoRG93bjpmdW5jdGlvbihjKXtyZXR1cm4gYShjLCExLCExKX0scGF0aFVwOmZ1bmN0aW9uKGMpe3JldHVybiBhKGMsXG4hMCwhMSl9LHBhdGhSaWdodERvd246ZnVuY3Rpb24oYyl7cmV0dXJuIGEoYywhMSwhMCl9LHBhdGhSaWdodFVwOmZ1bmN0aW9uKGMpe3JldHVybiBhKGMsITEsITApfX19O1xuQmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5tYWtlUm91bmRlZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoZCxlLGYpe3ZhciBnPWQ+Yz9kLWM6MDtkPShkPmM/YzpkKS8yO3JldHVybiBCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwxXCIsZCxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KChlPy0xOjEpKmQsKGU/LTE6MSkqZCkpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIiwoZj8xOi0xKSpnKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwxXCIsZCxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KChlPzE6LTEpKmQsKGU/LTE6MSkqZCkpfXZhciBiPXRoaXMuTUFYX0RZTkFNSUNfQ09OTkVDVElPTl9TSEFQRV9XSURUSCxjPTIqYjtyZXR1cm57dHlwZTp0aGlzLlNIQVBFUy5ST1VORCxpc0R5bmFtaWM6ITAsd2lkdGg6ZnVuY3Rpb24oZCl7ZC89MjtyZXR1cm4gZD5iP2I6ZH0saGVpZ2h0OmZ1bmN0aW9uKGQpe3JldHVybiBkfSxcbmNvbm5lY3Rpb25PZmZzZXRZOmZ1bmN0aW9uKGQpe3JldHVybiBkLzJ9LGNvbm5lY3Rpb25PZmZzZXRYOmZ1bmN0aW9uKGQpe3JldHVybi1kfSxwYXRoRG93bjpmdW5jdGlvbihkKXtyZXR1cm4gYShkLCExLCExKX0scGF0aFVwOmZ1bmN0aW9uKGQpe3JldHVybiBhKGQsITAsITEpfSxwYXRoUmlnaHREb3duOmZ1bmN0aW9uKGQpe3JldHVybiBhKGQsITEsITApfSxwYXRoUmlnaHRVcDpmdW5jdGlvbihkKXtyZXR1cm4gYShkLCExLCEwKX19fTtcbkJsb2NrbHkuemVsb3MuQ29uc3RhbnRQcm92aWRlci5wcm90b3R5cGUubWFrZVNxdWFyZWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMsZCxlKXtjLT0yKmI7cmV0dXJuIEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDFcIixiLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoKGQ/LTE6MSkqYiwoZD8tMToxKSpiKSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwidlwiLChlPzE6LTEpKmMpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDFcIixiLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoKGQ/MTotMSkqYiwoZD8tMToxKSpiKSl9dmFyIGI9dGhpcy5DT1JORVJfUkFESVVTO3JldHVybnt0eXBlOnRoaXMuU0hBUEVTLlNRVUFSRSxpc0R5bmFtaWM6ITAsd2lkdGg6ZnVuY3Rpb24oYyl7cmV0dXJuIGJ9LGhlaWdodDpmdW5jdGlvbihjKXtyZXR1cm4gY30sY29ubmVjdGlvbk9mZnNldFk6ZnVuY3Rpb24oYyl7cmV0dXJuIGMvMn0sXG5jb25uZWN0aW9uT2Zmc2V0WDpmdW5jdGlvbihjKXtyZXR1cm4tY30scGF0aERvd246ZnVuY3Rpb24oYyl7cmV0dXJuIGEoYywhMSwhMSl9LHBhdGhVcDpmdW5jdGlvbihjKXtyZXR1cm4gYShjLCEwLCExKX0scGF0aFJpZ2h0RG93bjpmdW5jdGlvbihjKXtyZXR1cm4gYShjLCExLCEwKX0scGF0aFJpZ2h0VXA6ZnVuY3Rpb24oYyl7cmV0dXJuIGEoYywhMSwhMCl9fX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLnNoYXBlRm9yPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Q2hlY2soKTshYiYmYS50YXJnZXRDb25uZWN0aW9uJiYoYj1hLnRhcmdldENvbm5lY3Rpb24uZ2V0Q2hlY2soKSk7c3dpdGNoKGEudHlwZSl7Y2FzZSBCbG9ja2x5LklOUFVUX1ZBTFVFOmNhc2UgQmxvY2tseS5PVVRQVVRfVkFMVUU6YT1hLmdldFNvdXJjZUJsb2NrKCkuZ2V0T3V0cHV0U2hhcGUoKTtpZihudWxsIT1hKXN3aXRjaChhKXtjYXNlIHRoaXMuU0hBUEVTLkhFWEFHT05BTDpyZXR1cm4gdGhpcy5IRVhBR09OQUw7Y2FzZSB0aGlzLlNIQVBFUy5ST1VORDpyZXR1cm4gdGhpcy5ST1VOREVEO2Nhc2UgdGhpcy5TSEFQRVMuU1FVQVJFOnJldHVybiB0aGlzLlNRVUFSRUR9aWYoYiYmLTEhPWIuaW5kZXhPZihcIkJvb2xlYW5cIikpcmV0dXJuIHRoaXMuSEVYQUdPTkFMO2lmKGImJi0xIT1iLmluZGV4T2YoXCJOdW1iZXJcIikpcmV0dXJuIHRoaXMuUk9VTkRFRDtcbmImJmIuaW5kZXhPZihcIlN0cmluZ1wiKTtyZXR1cm4gdGhpcy5ST1VOREVEO2Nhc2UgQmxvY2tseS5QUkVWSU9VU19TVEFURU1FTlQ6Y2FzZSBCbG9ja2x5Lk5FWFRfU1RBVEVNRU5UOnJldHVybiB0aGlzLk5PVENIO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmtub3duIHR5cGVcIik7fX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLm1ha2VOb3RjaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEobCl7cmV0dXJuIEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuY3VydmUoXCJjXCIsW0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQobCplLzIsMCksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUqMy80LGcvMiksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUsZyldKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmUoW0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQobCplLGYpXSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5jdXJ2ZShcImNcIixbQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUvNCxnLzIpLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQobCplLzIsZyksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUsZyldKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsbCpkKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmN1cnZlKFwiY1wiLFxuW0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQobCplLzIsMCksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUqMy80LC0oZy8yKSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUsLWcpXSkrQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lKFtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGwqZSwtZildKStCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmN1cnZlKFwiY1wiLFtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGwqZS80LC0oZy8yKSksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUvMiwtZyksQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChsKmUsLWcpXSl9dmFyIGI9dGhpcy5OT1RDSF9XSURUSCxjPXRoaXMuTk9UQ0hfSEVJR0hULGQ9Yi8zLGU9ZC8zLGY9Yy8yLGc9Zi8yLGg9YSgxKSxrPWEoLTEpO3JldHVybnt0eXBlOnRoaXMuU0hBUEVTLk5PVENILHdpZHRoOmIsaGVpZ2h0OmMscGF0aExlZnQ6aCxwYXRoUmlnaHQ6a319O1xuQmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5tYWtlSW5zaWRlQ29ybmVycz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuQ09STkVSX1JBRElVUyxiPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMuYXJjKFwiYVwiLFwiMCAwLDBcIixhLEJsb2NrbHkudXRpbHMuc3ZnUGF0aHMucG9pbnQoLWEsYSkpLGM9QmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludCgtYSxhKSksZD1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmFyYyhcImFcIixcIjAgMCwwXCIsYSxCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLnBvaW50KGEsYSkpLGU9QmxvY2tseS51dGlscy5zdmdQYXRocy5hcmMoXCJhXCIsXCIwIDAsMVwiLGEsQmxvY2tseS51dGlscy5zdmdQYXRocy5wb2ludChhLGEpKTtyZXR1cm57d2lkdGg6YSxoZWlnaHQ6YSxwYXRoVG9wOmIscGF0aEJvdHRvbTpkLHJpZ2h0V2lkdGg6YSxyaWdodEhlaWdodDphLHBhdGhUb3BSaWdodDpjLHBhdGhCb3R0b21SaWdodDplfX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdlbmVyYXRlU2Vjb25kYXJ5Q29sb3VyXz1mdW5jdGlvbihhKXtyZXR1cm4gQmxvY2tseS51dGlscy5jb2xvdXIuYmxlbmQoXCIjMDAwXCIsYSwuMTUpfHxhfTtCbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdlbmVyYXRlVGVydGlhcnlDb2xvdXJfPWZ1bmN0aW9uKGEpe3JldHVybiBCbG9ja2x5LnV0aWxzLmNvbG91ci5ibGVuZChcIiMwMDBcIixhLC4yNSl8fGF9O1xuQmxvY2tseS56ZWxvcy5Db25zdGFudFByb3ZpZGVyLnByb3RvdHlwZS5jcmVhdGVEb209ZnVuY3Rpb24oYSxiLGMpe0Jsb2NrbHkuemVsb3MuQ29uc3RhbnRQcm92aWRlci5zdXBlckNsYXNzXy5jcmVhdGVEb20uY2FsbCh0aGlzLGEsYixjKTthPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuREVGUyx7fSxhKTtiPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRklMVEVSLHtpZDpcImJsb2NrbHlTZWxlY3RlZEdsb3dGaWx0ZXJcIit0aGlzLnJhbmRvbUlkZW50aWZpZXIsaGVpZ2h0OlwiMTYwJVwiLHdpZHRoOlwiMTgwJVwiLHk6XCItMzAlXCIseDpcIi00MCVcIn0sYSk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5GRUdBVVNTSUFOQkxVUix7XCJpblwiOlwiU291cmNlR3JhcGhpY1wiLHN0ZERldmlhdGlvbjp0aGlzLlNFTEVDVEVEX0dMT1dfU0laRX0sYik7Yz1cbkJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVDT01QT05FTlRUUkFOU0ZFUix7cmVzdWx0Olwib3V0Qmx1clwifSxiKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFRlVOQ0Ese3R5cGU6XCJ0YWJsZVwiLHRhYmxlVmFsdWVzOlwiMCAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxXCJ9LGMpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVGTE9PRCx7XCJmbG9vZC1jb2xvclwiOnRoaXMuU0VMRUNURURfR0xPV19DT0xPVVIsXCJmbG9vZC1vcGFjaXR5XCI6MSxyZXN1bHQ6XCJvdXRDb2xvclwifSxiKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFQ09NUE9TSVRFLHtcImluXCI6XCJvdXRDb2xvclwiLGluMjpcIm91dEJsdXJcIixvcGVyYXRvcjpcImluXCIscmVzdWx0Olwib3V0R2xvd1wifSxiKTt0aGlzLnNlbGVjdGVkR2xvd0ZpbHRlcklkPVxuYi5pZDt0aGlzLnNlbGVjdGVkR2xvd0ZpbHRlcl89YjthPUJsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRklMVEVSLHtpZDpcImJsb2NrbHlSZXBsYWNlbWVudEdsb3dGaWx0ZXJcIit0aGlzLnJhbmRvbUlkZW50aWZpZXIsaGVpZ2h0OlwiMTYwJVwiLHdpZHRoOlwiMTgwJVwiLHk6XCItMzAlXCIseDpcIi00MCVcIn0sYSk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5GRUdBVVNTSUFOQkxVUix7XCJpblwiOlwiU291cmNlR3JhcGhpY1wiLHN0ZERldmlhdGlvbjp0aGlzLlJFUExBQ0VNRU5UX0dMT1dfU0laRX0sYSk7Yj1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFQ09NUE9ORU5UVFJBTlNGRVIse3Jlc3VsdDpcIm91dEJsdXJcIn0sYSk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5GRUZVTkNBLHt0eXBlOlwidGFibGVcIixcbnRhYmxlVmFsdWVzOlwiMCAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxIDEgMSAxXCJ9LGIpO0Jsb2NrbHkudXRpbHMuZG9tLmNyZWF0ZVN2Z0VsZW1lbnQoQmxvY2tseS51dGlscy5TdmcuRkVGTE9PRCx7XCJmbG9vZC1jb2xvclwiOnRoaXMuUkVQTEFDRU1FTlRfR0xPV19DT0xPVVIsXCJmbG9vZC1vcGFjaXR5XCI6MSxyZXN1bHQ6XCJvdXRDb2xvclwifSxhKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFQ09NUE9TSVRFLHtcImluXCI6XCJvdXRDb2xvclwiLGluMjpcIm91dEJsdXJcIixvcGVyYXRvcjpcImluXCIscmVzdWx0Olwib3V0R2xvd1wifSxhKTtCbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkZFQ09NUE9TSVRFLHtcImluXCI6XCJTb3VyY2VHcmFwaGljXCIsaW4yOlwib3V0R2xvd1wiLG9wZXJhdG9yOlwib3ZlclwifSxhKTt0aGlzLnJlcGxhY2VtZW50R2xvd0ZpbHRlcklkPWEuaWQ7dGhpcy5yZXBsYWNlbWVudEdsb3dGaWx0ZXJfPVxuYX07XG5CbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXIucHJvdG90eXBlLmdldENTU189ZnVuY3Rpb24oYSl7cmV0dXJuW2ErXCIgLmJsb2NrbHlUZXh0LFwiLGErXCIgLmJsb2NrbHlGbHlvdXRMYWJlbFRleHQge1wiLFwiZm9udDogXCIrdGhpcy5GSUVMRF9URVhUX0ZPTlRXRUlHSFQrXCIgXCIrdGhpcy5GSUVMRF9URVhUX0ZPTlRTSVpFK1wicHQgXCIrdGhpcy5GSUVMRF9URVhUX0ZPTlRGQU1JTFkrXCI7XCIsXCJ9XCIsYStcIiAuYmxvY2tseVRleHQge1wiLFwiZmlsbDogI2ZmZjtcIixcIn1cIixhK1wiIC5ibG9ja2x5Tm9uRWRpdGFibGVUZXh0PnJlY3Q6bm90KC5ibG9ja2x5RHJvcGRvd25SZWN0KSxcIixhK1wiIC5ibG9ja2x5RWRpdGFibGVUZXh0PnJlY3Q6bm90KC5ibG9ja2x5RHJvcGRvd25SZWN0KSB7XCIsXCJmaWxsOiBcIit0aGlzLkZJRUxEX0JPUkRFUl9SRUNUX0NPTE9VUitcIjtcIixcIn1cIixhK1wiIC5ibG9ja2x5Tm9uRWRpdGFibGVUZXh0PnRleHQsXCIsYStcIiAuYmxvY2tseUVkaXRhYmxlVGV4dD50ZXh0LFwiLGErXCIgLmJsb2NrbHlOb25FZGl0YWJsZVRleHQ+Zz50ZXh0LFwiLFxuYStcIiAuYmxvY2tseUVkaXRhYmxlVGV4dD5nPnRleHQge1wiLFwiZmlsbDogIzU3NUU3NTtcIixcIn1cIixhK1wiIC5ibG9ja2x5Rmx5b3V0TGFiZWxUZXh0IHtcIixcImZpbGw6ICM1NzVFNzU7XCIsXCJ9XCIsYStcIiAuYmxvY2tseVRleHQuYmxvY2tseUJ1YmJsZVRleHQge1wiLFwiZmlsbDogIzU3NUU3NTtcIixcIn1cIixhK1wiIC5ibG9ja2x5RHJhZ2dhYmxlOm5vdCguYmxvY2tseURpc2FibGVkKVwiLFwiIC5ibG9ja2x5RWRpdGFibGVUZXh0Om5vdCguZWRpdGluZyk6aG92ZXI+cmVjdCxcIixhK1wiIC5ibG9ja2x5RHJhZ2dhYmxlOm5vdCguYmxvY2tseURpc2FibGVkKVwiLFwiIC5ibG9ja2x5RWRpdGFibGVUZXh0Om5vdCguZWRpdGluZyk6aG92ZXI+LmJsb2NrbHlQYXRoIHtcIixcInN0cm9rZTogI2ZmZjtcIixcInN0cm9rZS13aWR0aDogMjtcIixcIn1cIixhK1wiIC5ibG9ja2x5SHRtbElucHV0IHtcIixcImZvbnQtZmFtaWx5OiBcIit0aGlzLkZJRUxEX1RFWFRfRk9OVEZBTUlMWStcIjtcIixcImZvbnQtd2VpZ2h0OiBcIit0aGlzLkZJRUxEX1RFWFRfRk9OVFdFSUdIVCtcblwiO1wiLFwiY29sb3I6ICM1NzVFNzU7XCIsXCJ9XCIsYStcIiAuYmxvY2tseURyb3Bkb3duVGV4dCB7XCIsXCJmaWxsOiAjZmZmICFpbXBvcnRhbnQ7XCIsXCJ9XCIsYStcIi5ibG9ja2x5V2lkZ2V0RGl2IC5nb29nLW1lbnVpdGVtLFwiLGErXCIuYmxvY2tseURyb3BEb3duRGl2IC5nb29nLW1lbnVpdGVtIHtcIixcImZvbnQtZmFtaWx5OiBcIit0aGlzLkZJRUxEX1RFWFRfRk9OVEZBTUlMWStcIjtcIixcIn1cIixhK1wiLmJsb2NrbHlEcm9wRG93bkRpdiAuZ29vZy1tZW51aXRlbS1jb250ZW50IHtcIixcImNvbG9yOiAjZmZmO1wiLFwifVwiLGErXCIgLmJsb2NrbHlIaWdobGlnaHRlZENvbm5lY3Rpb25QYXRoIHtcIixcInN0cm9rZTogXCIrdGhpcy5TRUxFQ1RFRF9HTE9XX0NPTE9VUitcIjtcIixcIn1cIixhK1wiIC5ibG9ja2x5RGlzYWJsZWQgPiAuYmxvY2tseU91dGxpbmVQYXRoIHtcIixcImZpbGw6IHVybCgjYmxvY2tseURpc2FibGVkUGF0dGVyblwiK3RoaXMucmFuZG9tSWRlbnRpZmllcitcIilcIixcIn1cIixhK1wiIC5ibG9ja2x5SW5zZXJ0aW9uTWFya2VyPi5ibG9ja2x5UGF0aCB7XCIsXG5cImZpbGwtb3BhY2l0eTogXCIrdGhpcy5JTlNFUlRJT05fTUFSS0VSX09QQUNJVFkrXCI7XCIsXCJzdHJva2U6IG5vbmU7XCIsXCJ9XCJdfTtCbG9ja2x5LnplbG9zLlRvcFJvdz1mdW5jdGlvbihhKXtCbG9ja2x5LnplbG9zLlRvcFJvdy5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSl9O0Jsb2NrbHkudXRpbHMub2JqZWN0LmluaGVyaXRzKEJsb2NrbHkuemVsb3MuVG9wUm93LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVG9wUm93KTtCbG9ja2x5LnplbG9zLlRvcFJvdy5wcm90b3R5cGUuZW5kc1dpdGhFbGVtU3BhY2VyPWZ1bmN0aW9uKCl7cmV0dXJuITF9O0Jsb2NrbHkuemVsb3MuVG9wUm93LnByb3RvdHlwZS5oYXNMZWZ0U3F1YXJlQ29ybmVyPWZ1bmN0aW9uKGEpe3ZhciBiPShhLmhhdD9cImNhcFwiPT09YS5oYXQ6dGhpcy5jb25zdGFudHNfLkFERF9TVEFSVF9IQVRTKSYmIWEub3V0cHV0Q29ubmVjdGlvbiYmIWEucHJldmlvdXNDb25uZWN0aW9uO3JldHVybiEhYS5vdXRwdXRDb25uZWN0aW9ufHxifTtcbkJsb2NrbHkuemVsb3MuVG9wUm93LnByb3RvdHlwZS5oYXNSaWdodFNxdWFyZUNvcm5lcj1mdW5jdGlvbihhKXtyZXR1cm4hIWEub3V0cHV0Q29ubmVjdGlvbiYmIWEuc3RhdGVtZW50SW5wdXRDb3VudCYmIWEubmV4dENvbm5lY3Rpb259O0Jsb2NrbHkuemVsb3MuQm90dG9tUm93PWZ1bmN0aW9uKGEpe0Jsb2NrbHkuemVsb3MuQm90dG9tUm93LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS56ZWxvcy5Cb3R0b21Sb3csQmxvY2tseS5ibG9ja1JlbmRlcmluZy5Cb3R0b21Sb3cpO0Jsb2NrbHkuemVsb3MuQm90dG9tUm93LnByb3RvdHlwZS5lbmRzV2l0aEVsZW1TcGFjZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMX07QmxvY2tseS56ZWxvcy5Cb3R0b21Sb3cucHJvdG90eXBlLmhhc0xlZnRTcXVhcmVDb3JuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuISFhLm91dHB1dENvbm5lY3Rpb259O1xuQmxvY2tseS56ZWxvcy5Cb3R0b21Sb3cucHJvdG90eXBlLmhhc1JpZ2h0U3F1YXJlQ29ybmVyPWZ1bmN0aW9uKGEpe3JldHVybiEhYS5vdXRwdXRDb25uZWN0aW9uJiYhYS5zdGF0ZW1lbnRJbnB1dENvdW50JiYhYS5uZXh0Q29ubmVjdGlvbn07QmxvY2tseS56ZWxvcy5SaWdodENvbm5lY3Rpb25TaGFwZT1mdW5jdGlvbihhKXtCbG9ja2x5LnplbG9zLlJpZ2h0Q29ubmVjdGlvblNoYXBlLnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLnR5cGV8PUJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuZ2V0VHlwZShcIlJJR0hUX0NPTk5FQ1RJT05cIik7dGhpcy53aWR0aD10aGlzLmhlaWdodD0wfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LnplbG9zLlJpZ2h0Q29ubmVjdGlvblNoYXBlLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuTWVhc3VyYWJsZSk7QmxvY2tseS56ZWxvcy5TdGF0ZW1lbnRJbnB1dD1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuemVsb3MuU3RhdGVtZW50SW5wdXQuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYik7aWYodGhpcy5jb25uZWN0ZWRCbG9jayl7Zm9yKGE9dGhpcy5jb25uZWN0ZWRCbG9jazthLmdldE5leHRCbG9jaygpOylhPWEuZ2V0TmV4dEJsb2NrKCk7YS5uZXh0Q29ubmVjdGlvbnx8KHRoaXMuaGVpZ2h0PXRoaXMuY29ubmVjdGVkQmxvY2tIZWlnaHQsdGhpcy5jb25uZWN0ZWRCb3R0b21OZXh0Q29ubmVjdGlvbj0hMCl9fTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LnplbG9zLlN0YXRlbWVudElucHV0LEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuU3RhdGVtZW50SW5wdXQpO0Jsb2NrbHkuemVsb3MuUmVuZGVySW5mbz1mdW5jdGlvbihhLGIpe0Jsb2NrbHkuemVsb3MuUmVuZGVySW5mby5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKTt0aGlzLnRvcFJvdz1uZXcgQmxvY2tseS56ZWxvcy5Ub3BSb3codGhpcy5jb25zdGFudHNfKTt0aGlzLmJvdHRvbVJvdz1uZXcgQmxvY2tseS56ZWxvcy5Cb3R0b21Sb3codGhpcy5jb25zdGFudHNfKTt0aGlzLmlzSW5saW5lPSEwO3RoaXMuaXNNdWx0aVJvdz0hYi5nZXRJbnB1dHNJbmxpbmUoKXx8Yi5pc0NvbGxhcHNlZCgpO3RoaXMuaGFzU3RhdGVtZW50SW5wdXQ9MDxiLnN0YXRlbWVudElucHV0Q291bnQ7dGhpcy5yaWdodFNpZGU9dGhpcy5vdXRwdXRDb25uZWN0aW9uP25ldyBCbG9ja2x5LnplbG9zLlJpZ2h0Q29ubmVjdGlvblNoYXBlKHRoaXMuY29uc3RhbnRzXyk6bnVsbH07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVySW5mbyk7XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXJffTtCbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZVJvd3NfKCk7dGhpcy5hZGRFbGVtU3BhY2luZ18oKTt0aGlzLmFkZFJvd1NwYWNpbmdfKCk7dGhpcy5hZGp1c3RYUG9zaXRpb25fKCk7dGhpcy5jb21wdXRlQm91bmRzXygpO3RoaXMuYWxpZ25Sb3dFbGVtZW50c18oKTt0aGlzLmZpbmFsaXplXygpfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuc2hvdWxkU3RhcnROZXdSb3dfPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YS50eXBlPT1CbG9ja2x5Lk5FWFRfU1RBVEVNRU5UfHxiLnR5cGU9PUJsb2NrbHkuTkVYVF9TVEFURU1FTlQ/ITA6YS50eXBlPT1CbG9ja2x5LklOUFVUX1ZBTFVFfHxhLnR5cGU9PUJsb2NrbHkuRFVNTVlfSU5QVVQ/IXRoaXMuaXNJbmxpbmV8fHRoaXMuaXNNdWx0aVJvdzohMTohMX07QmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXREZXNpcmVkUm93V2lkdGhfPWZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc1N0YXRlbWVudD90aGlzLndpZHRoLXRoaXMuc3RhcnRYLSh0aGlzLmNvbnN0YW50c18uSU5TSURFX0NPUk5FUlMucmlnaHRXaWR0aHx8MCk6QmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnN1cGVyQ2xhc3NfLmdldERlc2lyZWRSb3dXaWR0aF8uY2FsbCh0aGlzLGEpfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0SW5Sb3dTcGFjaW5nXz1mdW5jdGlvbihhLGIpe3JldHVybiBhJiZifHwhdGhpcy5vdXRwdXRDb25uZWN0aW9ufHwhdGhpcy5vdXRwdXRDb25uZWN0aW9uLmlzRHluYW1pY1NoYXBlfHx0aGlzLmhhc1N0YXRlbWVudElucHV0fHx0aGlzLmJvdHRvbVJvdy5oYXNOZXh0Q29ubmVjdGlvbj8hYSYmYiYmQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1N0YXRlbWVudElucHV0KGIpP3RoaXMuY29uc3RhbnRzXy5TVEFURU1FTlRfSU5QVVRfUEFERElOR19MRUZUOmEmJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0Um91bmRlZENvcm5lcihhKSYmYiYmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNQcmV2aW91c0Nvbm5lY3Rpb24oYil8fEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNOZXh0Q29ubmVjdGlvbihiKSk/Yi5ub3RjaE9mZnNldC10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUzpcbmEmJkJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNMZWZ0U3F1YXJlQ29ybmVyKGEpJiZiJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSGF0KGIpP3RoaXMuY29uc3RhbnRzXy5OT19QQURESU5HOnRoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElORzp0aGlzLmNvbnN0YW50c18uTk9fUEFERElOR307XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmdldFNwYWNlclJvd0hlaWdodF89ZnVuY3Rpb24oYSxiKXtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpJiZCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzQm90dG9tUm93KGIpKXJldHVybiB0aGlzLmNvbnN0YW50c18uRU1QVFlfQkxPQ0tfU1BBQ0VSX0hFSUdIVDt2YXIgYz1CbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXRSb3coYSkmJmEuaGFzU3RhdGVtZW50LGQ9QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0Um93KGIpJiZiLmhhc1N0YXRlbWVudDtyZXR1cm4gZHx8Yz8oYT1NYXRoLm1heCh0aGlzLmNvbnN0YW50c18uTk9UQ0hfSEVJR0hULHRoaXMuY29uc3RhbnRzXy5JTlNJREVfQ09STkVSUy5yaWdodEhlaWdodHx8MCksZCYmYz9NYXRoLm1heChhLHRoaXMuY29uc3RhbnRzXy5EVU1NWV9JTlBVVF9NSU5fSEVJR0hUKTphKTpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wUm93KGEpP1xuYS5oYXNQcmV2aW91c0Nvbm5lY3Rpb258fHRoaXMub3V0cHV0Q29ubmVjdGlvbiYmIXRoaXMuaGFzU3RhdGVtZW50SW5wdXQ/dGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkc6TWF0aC5hYnModGhpcy5jb25zdGFudHNfLk5PVENIX0hFSUdIVC10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUyk6QmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0JvdHRvbVJvdyhiKT90aGlzLm91dHB1dENvbm5lY3Rpb24/IWIuaGFzTmV4dENvbm5lY3Rpb24mJnRoaXMuaGFzU3RhdGVtZW50SW5wdXQ/TWF0aC5hYnModGhpcy5jb25zdGFudHNfLk5PVENIX0hFSUdIVC10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUyk6dGhpcy5jb25zdGFudHNfLk5PX1BBRERJTkc6TWF0aC5tYXgodGhpcy50b3BSb3cubWluSGVpZ2h0LE1hdGgubWF4KHRoaXMuY29uc3RhbnRzXy5OT1RDSF9IRUlHSFQsdGhpcy5jb25zdGFudHNfLkNPUk5FUl9SQURJVVMpKS10aGlzLmNvbnN0YW50c18uQ09STkVSX1JBRElVUzpcbnRoaXMuY29uc3RhbnRzXy5NRURJVU1fUEFERElOR307QmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnByb3RvdHlwZS5nZXRTcGFjZXJSb3dXaWR0aF89ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLndpZHRoLXRoaXMuc3RhcnRYO3JldHVybiBCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXRSb3coYSkmJmEuaGFzU3RhdGVtZW50fHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXRSb3coYikmJmIuaGFzU3RhdGVtZW50P01hdGgubWF4KGMsdGhpcy5jb25zdGFudHNfLlNUQVRFTUVOVF9JTlBVVF9TUEFDRVJfTUlOX1dJRFRIKTpjfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZ2V0RWxlbUNlbnRlcmxpbmVfPWZ1bmN0aW9uKGEsYil7aWYoYS5oYXNTdGF0ZW1lbnQmJiFCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGIpJiYhQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1N0YXRlbWVudElucHV0KGIpKXJldHVybiBhLnlQb3MrdGhpcy5jb25zdGFudHNfLkVNUFRZX1NUQVRFTUVOVF9JTlBVVF9IRUlHSFQvMjtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5saW5lSW5wdXQoYikpe3ZhciBjPWIuY29ubmVjdGVkQmxvY2s7aWYoYyYmYy5vdXRwdXRDb25uZWN0aW9uJiZjLm5leHRDb25uZWN0aW9uKXJldHVybiBhLnlQb3MrYy5oZWlnaHQvMn1yZXR1cm4gQmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnN1cGVyQ2xhc3NfLmdldEVsZW1DZW50ZXJsaW5lXy5jYWxsKHRoaXMsYSxiKX07XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmFkZElucHV0Xz1mdW5jdGlvbihhLGIpe2EudHlwZT09QmxvY2tseS5EVU1NWV9JTlBVVCYmYi5oYXNEdW1teUlucHV0JiZiLmFsaWduPT1CbG9ja2x5LkFMSUdOX0xFRlQmJmEuYWxpZ249PUJsb2NrbHkuQUxJR05fUklHSFQmJihiLnJpZ2h0QWxpZ25lZER1bW15SW5wdXQ9YSk7QmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnN1cGVyQ2xhc3NfLmFkZElucHV0Xy5jYWxsKHRoaXMsYSxiKX07XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmFkZEFsaWdubWVudFBhZGRpbmdfPWZ1bmN0aW9uKGEsYil7aWYoYS5yaWdodEFsaWduZWREdW1teUlucHV0KXtmb3IodmFyIGMsZD0wLGU7KGU9YS5lbGVtZW50c1tkXSkmJihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzU3BhY2VyKGUpJiYoYz1lKSwhQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGUpfHxlLnBhcmVudElucHV0IT1hLnJpZ2h0QWxpZ25lZER1bW15SW5wdXQpO2QrKyk7aWYoYyl7Yy53aWR0aCs9YjthLndpZHRoKz1iO3JldHVybn19QmxvY2tseS56ZWxvcy5SZW5kZXJJbmZvLnN1cGVyQ2xhc3NfLmFkZEFsaWdubWVudFBhZGRpbmdfLmNhbGwodGhpcyxhLGIpfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuYWRqdXN0WFBvc2l0aW9uXz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmNvbnN0YW50c18uTk9UQ0hfT0ZGU0VUX0xFRlQrdGhpcy5jb25zdGFudHNfLk5PVENIX1dJRFRILGI9YSxjPTI7Yzx0aGlzLnJvd3MubGVuZ3RoLTE7Yys9Mil7dmFyIGQ9dGhpcy5yb3dzW2MtMV0sZT10aGlzLnJvd3NbY10sZj10aGlzLnJvd3NbYysxXTtkPTI9PWM/ISF0aGlzLnRvcFJvdy5oYXNQcmV2aW91c0Nvbm5lY3Rpb246ISFkLmZvbGxvd3NTdGF0ZW1lbnQ7Zj1jKzI+PXRoaXMucm93cy5sZW5ndGgtMT8hIXRoaXMuYm90dG9tUm93Lmhhc05leHRDb25uZWN0aW9uOiEhZi5wcmVjZWRlc1N0YXRlbWVudDtpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXRSb3coZSkmJmUuaGFzU3RhdGVtZW50KWUubWVhc3VyZSgpLGI9ZS53aWR0aC1lLmdldExhc3RJbnB1dCgpLndpZHRoK2E7ZWxzZSBpZihkJiYoMj09Y3x8ZikmJlxuQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0lucHV0Um93KGUpJiYhZS5oYXNTdGF0ZW1lbnQpe2Y9ZS54UG9zO2Q9bnVsbDtmb3IodmFyIGc9MCxoO2g9ZS5lbGVtZW50c1tnXTtnKyspQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc1NwYWNlcihoKSYmKGQ9aCksIShkJiYoQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGgpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXQoaCkpJiZmPGIpfHxCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzRmllbGQoaCkmJihoLmZpZWxkIGluc3RhbmNlb2YgQmxvY2tseS5GaWVsZExhYmVsfHxoLmZpZWxkIGluc3RhbmNlb2YgQmxvY2tseS5GaWVsZEltYWdlKXx8KGQud2lkdGgrPWItZiksZis9aC53aWR0aH19fTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZmluYWxpemVPdXRwdXRDb25uZWN0aW9uXz1mdW5jdGlvbigpe2lmKHRoaXMub3V0cHV0Q29ubmVjdGlvbiYmdGhpcy5vdXRwdXRDb25uZWN0aW9uLmlzRHluYW1pY1NoYXBlKXtmb3IodmFyIGE9MCxiPTAsYztjPXRoaXMucm93c1tiXTtiKyspYy55UG9zPWEsYSs9Yy5oZWlnaHQ7dGhpcy5oZWlnaHQ9YTtiPXRoaXMuYm90dG9tUm93Lmhhc05leHRDb25uZWN0aW9uP3RoaXMuaGVpZ2h0LXRoaXMuYm90dG9tUm93LmRlc2NlbmRlckhlaWdodDp0aGlzLmhlaWdodDthPXRoaXMub3V0cHV0Q29ubmVjdGlvbi5zaGFwZS5oZWlnaHQoYik7Yj10aGlzLm91dHB1dENvbm5lY3Rpb24uc2hhcGUud2lkdGgoYik7dGhpcy5vdXRwdXRDb25uZWN0aW9uLmhlaWdodD1hO3RoaXMub3V0cHV0Q29ubmVjdGlvbi53aWR0aD1iO3RoaXMub3V0cHV0Q29ubmVjdGlvbi5zdGFydFg9Yjt0aGlzLm91dHB1dENvbm5lY3Rpb24uY29ubmVjdGlvbk9mZnNldFk9XG50aGlzLm91dHB1dENvbm5lY3Rpb24uc2hhcGUuY29ubmVjdGlvbk9mZnNldFkoYSk7dGhpcy5vdXRwdXRDb25uZWN0aW9uLmNvbm5lY3Rpb25PZmZzZXRYPXRoaXMub3V0cHV0Q29ubmVjdGlvbi5zaGFwZS5jb25uZWN0aW9uT2Zmc2V0WChiKTtjPTA7dGhpcy5oYXNTdGF0ZW1lbnRJbnB1dHx8dGhpcy5ib3R0b21Sb3cuaGFzTmV4dENvbm5lY3Rpb258fChjPWIsdGhpcy5yaWdodFNpZGUuaGVpZ2h0PWEsdGhpcy5yaWdodFNpZGUud2lkdGg9Yyx0aGlzLnJpZ2h0U2lkZS5jZW50ZXJsaW5lPWEvMix0aGlzLnJpZ2h0U2lkZS54UG9zPXRoaXMud2lkdGgrYyk7dGhpcy5zdGFydFg9Yjt0aGlzLndpZHRoKz1iK2M7dGhpcy53aWR0aFdpdGhDaGlsZHJlbis9YitjfX07XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmZpbmFsaXplSG9yaXpvbnRhbEFsaWdubWVudF89ZnVuY3Rpb24oKXtpZih0aGlzLm91dHB1dENvbm5lY3Rpb24mJiF0aGlzLmhhc1N0YXRlbWVudElucHV0JiYhdGhpcy5ib3R0b21Sb3cuaGFzTmV4dENvbm5lY3Rpb24pe2Zvcih2YXIgYT0wLGI9MCxjO2M9dGhpcy5yb3dzW2JdO2IrKylpZihCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSW5wdXRSb3coYykpe2E9Yy5lbGVtZW50c1tjLmVsZW1lbnRzLmxlbmd0aC0yXTt2YXIgZD10aGlzLmdldE5lZ2F0aXZlU3BhY2luZ18oYy5lbGVtZW50c1sxXSksZT10aGlzLmdldE5lZ2F0aXZlU3BhY2luZ18oYSk7YT1kK2U7dmFyIGY9dGhpcy5jb25zdGFudHNfLk1JTl9CTE9DS19XSURUSCsyKnRoaXMub3V0cHV0Q29ubmVjdGlvbi53aWR0aDt0aGlzLndpZHRoLWE8ZiYmKGE9dGhpcy53aWR0aC1mLGQ9YS8yLGU9YS8yKTtjLmVsZW1lbnRzLnVuc2hpZnQobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLFxuLWQpKTtjLmVsZW1lbnRzLnB1c2gobmV3IEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuSW5Sb3dTcGFjZXIodGhpcy5jb25zdGFudHNfLC1lKSl9aWYoYSlmb3IodGhpcy53aWR0aC09YSx0aGlzLndpZHRoV2l0aENoaWxkcmVuLT1hLHRoaXMucmlnaHRTaWRlLnhQb3MtPWEsYj0wO2M9dGhpcy5yb3dzW2JdO2IrKylCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzVG9wT3JCb3R0b21Sb3coYykmJihjLmVsZW1lbnRzWzFdLndpZHRoLT1hLGMuZWxlbWVudHNbMV0ud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzLT1hKSxjLndpZHRoLT1hLGMud2lkdGhXaXRoQ29ubmVjdGVkQmxvY2tzLT1hfX07XG5CbG9ja2x5LnplbG9zLlJlbmRlckluZm8ucHJvdG90eXBlLmdldE5lZ2F0aXZlU3BhY2luZ189ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIDA7dmFyIGI9dGhpcy5vdXRwdXRDb25uZWN0aW9uLndpZHRoLGM9dGhpcy5vdXRwdXRDb25uZWN0aW9uLnNoYXBlLnR5cGUsZD10aGlzLmNvbnN0YW50c187aWYodGhpcy5pc011bHRpUm93JiYxPHRoaXMuaW5wdXRSb3dzLmxlbmd0aClzd2l0Y2goYyl7Y2FzZSBkLlNIQVBFUy5ST1VORDpyZXR1cm4gYz10aGlzLmNvbnN0YW50c18uTUFYX0RZTkFNSUNfQ09OTkVDVElPTl9TSEFQRV9XSURUSCxjPXRoaXMuaGVpZ2h0LzI+Yz9jOnRoaXMuaGVpZ2h0LzIsYi1jKigxLU1hdGguc2luKE1hdGguYWNvcygoYy10aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORykvYykpKTtkZWZhdWx0OnJldHVybiAwfWlmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChhKSl7dmFyIGU9YS5jb25uZWN0ZWRCbG9jazthPWU/ZS5wYXRoT2JqZWN0Lm91dHB1dFNoYXBlVHlwZTpcbmEuc2hhcGUudHlwZTtyZXR1cm4gZSYmZS5vdXRwdXRDb25uZWN0aW9uJiYoZS5zdGF0ZW1lbnRJbnB1dENvdW50fHxlLm5leHRDb25uZWN0aW9uKXx8Yz09ZC5TSEFQRVMuSEVYQUdPTkFMJiZjIT1hPzA6Yi10aGlzLmNvbnN0YW50c18uU0hBUEVfSU5fU0hBUEVfUEFERElOR1tjXVthXX1yZXR1cm4gQmxvY2tseS5ibG9ja1JlbmRlcmluZy5UeXBlcy5pc0ZpZWxkKGEpP2M9PWQuU0hBUEVTLlJPVU5EJiZhLmZpZWxkIGluc3RhbmNlb2YgQmxvY2tseS5GaWVsZFRleHRJbnB1dD9iLTIuNzUqZC5HUklEX1VOSVQ6Yi10aGlzLmNvbnN0YW50c18uU0hBUEVfSU5fU0hBUEVfUEFERElOR1tjXVswXTpCbG9ja2x5LmJsb2NrUmVuZGVyaW5nLlR5cGVzLmlzSWNvbihhKT90aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORzowfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZmluYWxpemVWZXJ0aWNhbEFsaWdubWVudF89ZnVuY3Rpb24oKXtpZighdGhpcy5vdXRwdXRDb25uZWN0aW9uKWZvcih2YXIgYT0yO2E8dGhpcy5yb3dzLmxlbmd0aC0xO2ErPTIpe3ZhciBiPXRoaXMucm93c1thLTFdLGM9dGhpcy5yb3dzW2FdLGQ9dGhpcy5yb3dzW2ErMV0sZT0yPT1hLGY9YSsyPj10aGlzLnJvd3MubGVuZ3RoLTE/ISF0aGlzLmJvdHRvbVJvdy5oYXNOZXh0Q29ubmVjdGlvbjohIWQucHJlY2VkZXNTdGF0ZW1lbnQ7aWYoZT90aGlzLnRvcFJvdy5oYXNQcmV2aW91c0Nvbm5lY3Rpb246Yi5mb2xsb3dzU3RhdGVtZW50KXt2YXIgZz0zPT1jLmVsZW1lbnRzLmxlbmd0aCYmKGMuZWxlbWVudHNbMV0uZmllbGQgaW5zdGFuY2VvZiBCbG9ja2x5LkZpZWxkTGFiZWx8fGMuZWxlbWVudHNbMV0uZmllbGQgaW5zdGFuY2VvZiBCbG9ja2x5LkZpZWxkSW1hZ2UpO2lmKCFlJiZnKWIuaGVpZ2h0LT10aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORyxcbmQuaGVpZ2h0LT10aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORyxjLmhlaWdodC09dGhpcy5jb25zdGFudHNfLk1FRElVTV9QQURESU5HO2Vsc2UgaWYoIWUmJiFmKWIuaGVpZ2h0Kz10aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORztlbHNlIGlmKGYpe2U9ITE7Zm9yKGY9MDtnPWMuZWxlbWVudHNbZl07ZisrKWlmKEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuVHlwZXMuaXNJbmxpbmVJbnB1dChnKSYmZy5jb25uZWN0ZWRCbG9jayYmIWcuY29ubmVjdGVkQmxvY2suaXNTaGFkb3coKSYmNDA8PWcuY29ubmVjdGVkQmxvY2suZ2V0SGVpZ2h0V2lkdGgoKS5oZWlnaHQpe2U9ITA7YnJlYWt9ZSYmKGIuaGVpZ2h0LT10aGlzLmNvbnN0YW50c18uU01BTExfUEFERElORyxkLmhlaWdodC09dGhpcy5jb25zdGFudHNfLlNNQUxMX1BBRERJTkcpfX19fTtcbkJsb2NrbHkuemVsb3MuUmVuZGVySW5mby5wcm90b3R5cGUuZmluYWxpemVfPWZ1bmN0aW9uKCl7dGhpcy5maW5hbGl6ZU91dHB1dENvbm5lY3Rpb25fKCk7dGhpcy5maW5hbGl6ZUhvcml6b250YWxBbGlnbm1lbnRfKCk7dGhpcy5maW5hbGl6ZVZlcnRpY2FsQWxpZ25tZW50XygpO0Jsb2NrbHkuemVsb3MuUmVuZGVySW5mby5zdXBlckNsYXNzXy5maW5hbGl6ZV8uY2FsbCh0aGlzKTt0aGlzLnJpZ2h0U2lkZSYmKHRoaXMud2lkdGhXaXRoQ2hpbGRyZW4rPXRoaXMucmlnaHRTaWRlLndpZHRoKX07QmxvY2tseS56ZWxvcy5EcmF3ZXI9ZnVuY3Rpb24oYSxiKXtCbG9ja2x5LnplbG9zLkRyYXdlci5zdXBlckNsYXNzXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxiKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS56ZWxvcy5EcmF3ZXIsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5EcmF3ZXIpO1xuQmxvY2tseS56ZWxvcy5EcmF3ZXIucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJsb2NrXy5wYXRoT2JqZWN0O2EuYmVnaW5EcmF3aW5nKCk7dGhpcy5oaWRlSGlkZGVuSWNvbnNfKCk7dGhpcy5kcmF3T3V0bGluZV8oKTt0aGlzLmRyYXdJbnRlcm5hbHNfKCk7YS5zZXRQYXRoKHRoaXMub3V0bGluZVBhdGhfK1wiXFxuXCIrdGhpcy5pbmxpbmVQYXRoXyk7dGhpcy5pbmZvXy5SVEwmJmEuZmxpcFJUTCgpO0Jsb2NrbHkuYmxvY2tSZW5kZXJpbmcudXNlRGVidWdnZXImJnRoaXMuYmxvY2tfLnJlbmRlcmluZ0RlYnVnZ2VyLmRyYXdEZWJ1Zyh0aGlzLmJsb2NrXyx0aGlzLmluZm9fKTt0aGlzLnJlY29yZFNpemVPbkJsb2NrXygpO3RoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbiYmKGEub3V0cHV0U2hhcGVUeXBlPXRoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbi5zaGFwZS50eXBlKTthLmVuZERyYXdpbmcoKX07XG5CbG9ja2x5LnplbG9zLkRyYXdlci5wcm90b3R5cGUuZHJhd091dGxpbmVfPWZ1bmN0aW9uKCl7dGhpcy5pbmZvXy5vdXRwdXRDb25uZWN0aW9uJiZ0aGlzLmluZm9fLm91dHB1dENvbm5lY3Rpb24uaXNEeW5hbWljU2hhcGUmJiF0aGlzLmluZm9fLmhhc1N0YXRlbWVudElucHV0JiYhdGhpcy5pbmZvXy5ib3R0b21Sb3cuaGFzTmV4dENvbm5lY3Rpb24/KHRoaXMuZHJhd0ZsYXRUb3BfKCksdGhpcy5kcmF3UmlnaHREeW5hbWljQ29ubmVjdGlvbl8oKSx0aGlzLmRyYXdGbGF0Qm90dG9tXygpLHRoaXMuZHJhd0xlZnREeW5hbWljQ29ubmVjdGlvbl8oKSk6QmxvY2tseS56ZWxvcy5EcmF3ZXIuc3VwZXJDbGFzc18uZHJhd091dGxpbmVfLmNhbGwodGhpcyl9O1xuQmxvY2tseS56ZWxvcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdMZWZ0Xz1mdW5jdGlvbigpe3RoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbiYmdGhpcy5pbmZvXy5vdXRwdXRDb25uZWN0aW9uLmlzRHluYW1pY1NoYXBlP3RoaXMuZHJhd0xlZnREeW5hbWljQ29ubmVjdGlvbl8oKTpCbG9ja2x5LnplbG9zLkRyYXdlci5zdXBlckNsYXNzXy5kcmF3TGVmdF8uY2FsbCh0aGlzKX07XG5CbG9ja2x5LnplbG9zLkRyYXdlci5wcm90b3R5cGUuZHJhd1JpZ2h0U2lkZVJvd189ZnVuY3Rpb24oYSl7aWYoISgwPj1hLmhlaWdodCkpaWYoYS5wcmVjZWRlc1N0YXRlbWVudHx8YS5mb2xsb3dzU3RhdGVtZW50KXt2YXIgYj10aGlzLmNvbnN0YW50c18uSU5TSURFX0NPUk5FUlMucmlnaHRIZWlnaHQ7Yj1hLmhlaWdodC0oYS5wcmVjZWRlc1N0YXRlbWVudD9iOjApO3RoaXMub3V0bGluZVBhdGhfKz0oYS5mb2xsb3dzU3RhdGVtZW50P3RoaXMuY29uc3RhbnRzXy5JTlNJREVfQ09STkVSUy5wYXRoQm90dG9tUmlnaHQ6XCJcIikrKDA8Yj9CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJWXCIsYS55UG9zK2IpOlwiXCIpKyhhLnByZWNlZGVzU3RhdGVtZW50P3RoaXMuY29uc3RhbnRzXy5JTlNJREVfQ09STkVSUy5wYXRoVG9wUmlnaHQ6XCJcIil9ZWxzZSB0aGlzLm91dGxpbmVQYXRoXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiVlwiLGEueVBvcythLmhlaWdodCl9O1xuQmxvY2tseS56ZWxvcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdSaWdodER5bmFtaWNDb25uZWN0aW9uXz1mdW5jdGlvbigpe3RoaXMub3V0bGluZVBhdGhfKz10aGlzLmluZm9fLm91dHB1dENvbm5lY3Rpb24uc2hhcGUucGF0aFJpZ2h0RG93bih0aGlzLmluZm9fLm91dHB1dENvbm5lY3Rpb24uaGVpZ2h0KX07QmxvY2tseS56ZWxvcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdMZWZ0RHluYW1pY0Nvbm5lY3Rpb25fPWZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbk91dHB1dENvbm5lY3Rpb25fKCk7dGhpcy5vdXRsaW5lUGF0aF8rPXRoaXMuaW5mb18ub3V0cHV0Q29ubmVjdGlvbi5zaGFwZS5wYXRoVXAodGhpcy5pbmZvXy5vdXRwdXRDb25uZWN0aW9uLmhlaWdodCk7dGhpcy5vdXRsaW5lUGF0aF8rPVwielwifTtcbkJsb2NrbHkuemVsb3MuRHJhd2VyLnByb3RvdHlwZS5kcmF3RmxhdFRvcF89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZm9fLnRvcFJvdzt0aGlzLnBvc2l0aW9uUHJldmlvdXNDb25uZWN0aW9uXygpO3RoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVCeShhLnhQb3MsdGhpcy5pbmZvXy5zdGFydFkpO3RoaXMub3V0bGluZVBhdGhfKz1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsYS53aWR0aCl9O0Jsb2NrbHkuemVsb3MuRHJhd2VyLnByb3RvdHlwZS5kcmF3RmxhdEJvdHRvbV89ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmluZm9fLmJvdHRvbVJvdzt0aGlzLnBvc2l0aW9uTmV4dENvbm5lY3Rpb25fKCk7dGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIlZcIixhLmJhc2VsaW5lKTt0aGlzLm91dGxpbmVQYXRoXys9QmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiaFwiLC1hLndpZHRoKX07XG5CbG9ja2x5LnplbG9zLkRyYXdlci5wcm90b3R5cGUuZHJhd0lubGluZUlucHV0Xz1mdW5jdGlvbihhKXt0aGlzLnBvc2l0aW9uSW5saW5lSW5wdXRDb25uZWN0aW9uXyhhKTt2YXIgYj1hLmlucHV0Lm5hbWU7aWYoIWEuY29ubmVjdGVkQmxvY2smJiF0aGlzLmluZm9fLmlzSW5zZXJ0aW9uTWFya2VyKXt2YXIgYz1hLndpZHRoLTIqYS5jb25uZWN0aW9uV2lkdGg7YT1CbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLm1vdmVUbyhhLnhQb3MrYS5jb25uZWN0aW9uV2lkdGgsYS5jZW50ZXJsaW5lLWEuaGVpZ2h0LzIpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcImhcIixjKSthLnNoYXBlLnBhdGhSaWdodERvd24oYS5oZWlnaHQpK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcImhcIiwtYykrYS5zaGFwZS5wYXRoVXAoYS5oZWlnaHQpK1wielwiO3RoaXMuYmxvY2tfLnBhdGhPYmplY3Quc2V0T3V0bGluZVBhdGgoYixhKX19O1xuQmxvY2tseS56ZWxvcy5EcmF3ZXIucHJvdG90eXBlLmRyYXdTdGF0ZW1lbnRJbnB1dF89ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRMYXN0SW5wdXQoKSxjPWIueFBvcytiLm5vdGNoT2Zmc2V0K2Iuc2hhcGUud2lkdGgsZD1iLnNoYXBlLnBhdGhSaWdodCtCbG9ja2x5LnV0aWxzLnN2Z1BhdGhzLmxpbmVPbkF4aXMoXCJoXCIsLShiLm5vdGNoT2Zmc2V0LXRoaXMuY29uc3RhbnRzXy5JTlNJREVfQ09STkVSUy53aWR0aCkpK3RoaXMuY29uc3RhbnRzXy5JTlNJREVfQ09STkVSUy5wYXRoVG9wLGU9YS5oZWlnaHQtMip0aGlzLmNvbnN0YW50c18uSU5TSURFX0NPUk5FUlMuaGVpZ2h0O2I9dGhpcy5jb25zdGFudHNfLklOU0lERV9DT1JORVJTLnBhdGhCb3R0b20rQmxvY2tseS51dGlscy5zdmdQYXRocy5saW5lT25BeGlzKFwiaFwiLGIubm90Y2hPZmZzZXQtdGhpcy5jb25zdGFudHNfLklOU0lERV9DT1JORVJTLndpZHRoKSsoYi5jb25uZWN0ZWRCb3R0b21OZXh0Q29ubmVjdGlvbj9cIlwiOmIuc2hhcGUucGF0aExlZnQpO1xudGhpcy5vdXRsaW5lUGF0aF8rPUJsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixjKStkK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcInZcIixlKStiK0Jsb2NrbHkudXRpbHMuc3ZnUGF0aHMubGluZU9uQXhpcyhcIkhcIixhLnhQb3MrYS53aWR0aCk7dGhpcy5wb3NpdGlvblN0YXRlbWVudElucHV0Q29ubmVjdGlvbl8oYSl9O0Jsb2NrbHkuemVsb3MuUGF0aE9iamVjdD1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS56ZWxvcy5QYXRoT2JqZWN0LnN1cGVyQ2xhc3NfLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLGIsYyk7dGhpcy5jb25zdGFudHM9Yzt0aGlzLnN2Z1BhdGhTZWxlY3RlZF89bnVsbDt0aGlzLm91dGxpbmVzXz17fTt0aGlzLm91dHB1dFNoYXBlVHlwZT10aGlzLnJlbWFpbmluZ091dGxpbmVzXz1udWxsfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LnplbG9zLlBhdGhPYmplY3QsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5QYXRoT2JqZWN0KTtCbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLnNldFBhdGg9ZnVuY3Rpb24oYSl7QmxvY2tseS56ZWxvcy5QYXRoT2JqZWN0LnN1cGVyQ2xhc3NfLnNldFBhdGguY2FsbCh0aGlzLGEpO3RoaXMuc3ZnUGF0aFNlbGVjdGVkXyYmdGhpcy5zdmdQYXRoU2VsZWN0ZWRfLnNldEF0dHJpYnV0ZShcImRcIixhKX07XG5CbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLmFwcGx5Q29sb3VyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuemVsb3MuUGF0aE9iamVjdC5zdXBlckNsYXNzXy5hcHBseUNvbG91ci5jYWxsKHRoaXMsYSk7YS5pc1NoYWRvdygpJiZhLmdldFBhcmVudCgpJiZ0aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsYS5nZXRQYXJlbnQoKS5zdHlsZS5jb2xvdXJUZXJ0aWFyeSk7YT0wO2Zvcih2YXIgYj1PYmplY3Qua2V5cyh0aGlzLm91dGxpbmVzXyksYztjPWJbYV07YSsrKXRoaXMub3V0bGluZXNfW2NdLnNldEF0dHJpYnV0ZShcImZpbGxcIix0aGlzLnN0eWxlLmNvbG91clRlcnRpYXJ5KX07XG5CbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLmZsaXBSVEw9ZnVuY3Rpb24oKXtCbG9ja2x5LnplbG9zLlBhdGhPYmplY3Quc3VwZXJDbGFzc18uZmxpcFJUTC5jYWxsKHRoaXMpO2Zvcih2YXIgYT0wLGI9T2JqZWN0LmtleXModGhpcy5vdXRsaW5lc18pLGM7Yz1iW2FdO2ErKyl0aGlzLm91dGxpbmVzX1tjXS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcInNjYWxlKC0xIDEpXCIpfTtcbkJsb2NrbHkuemVsb3MuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5zZXRDbGFzc18oXCJibG9ja2x5U2VsZWN0ZWRcIixhKTthP3RoaXMuc3ZnUGF0aFNlbGVjdGVkX3x8KHRoaXMuc3ZnUGF0aFNlbGVjdGVkXz10aGlzLnN2Z1BhdGguY2xvbmVOb2RlKCEwKSx0aGlzLnN2Z1BhdGhTZWxlY3RlZF8uc2V0QXR0cmlidXRlKFwiZmlsbFwiLFwibm9uZVwiKSx0aGlzLnN2Z1BhdGhTZWxlY3RlZF8uc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsXCJ1cmwoI1wiK3RoaXMuY29uc3RhbnRzLnNlbGVjdGVkR2xvd0ZpbHRlcklkK1wiKVwiKSx0aGlzLnN2Z1Jvb3QuYXBwZW5kQ2hpbGQodGhpcy5zdmdQYXRoU2VsZWN0ZWRfKSk6dGhpcy5zdmdQYXRoU2VsZWN0ZWRfJiYodGhpcy5zdmdSb290LnJlbW92ZUNoaWxkKHRoaXMuc3ZnUGF0aFNlbGVjdGVkXyksdGhpcy5zdmdQYXRoU2VsZWN0ZWRfPW51bGwpfTtcbkJsb2NrbHkuemVsb3MuUGF0aE9iamVjdC5wcm90b3R5cGUudXBkYXRlUmVwbGFjZW1lbnRGYWRlPWZ1bmN0aW9uKGEpe3RoaXMuc2V0Q2xhc3NfKFwiYmxvY2tseVJlcGxhY2VhYmxlXCIsYSk7YT90aGlzLnN2Z1BhdGguc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsXCJ1cmwoI1wiK3RoaXMuY29uc3RhbnRzLnJlcGxhY2VtZW50R2xvd0ZpbHRlcklkK1wiKVwiKTp0aGlzLnN2Z1BhdGgucmVtb3ZlQXR0cmlidXRlKFwiZmlsdGVyXCIpfTtCbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLnVwZGF0ZVNoYXBlRm9ySW5wdXRIaWdobGlnaHQ9ZnVuY3Rpb24oYSxiKXthPWEuZ2V0UGFyZW50SW5wdXQoKS5uYW1lOyhhPXRoaXMuZ2V0T3V0bGluZVBhdGhfKGEpKSYmKGI/YS5zZXRBdHRyaWJ1dGUoXCJmaWx0ZXJcIixcInVybCgjXCIrdGhpcy5jb25zdGFudHMucmVwbGFjZW1lbnRHbG93RmlsdGVySWQrXCIpXCIpOmEucmVtb3ZlQXR0cmlidXRlKFwiZmlsdGVyXCIpKX07XG5CbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLmJlZ2luRHJhd2luZz1mdW5jdGlvbigpe3RoaXMucmVtYWluaW5nT3V0bGluZXNfPXt9O2Zvcih2YXIgYT0wLGI9T2JqZWN0LmtleXModGhpcy5vdXRsaW5lc18pLGM7Yz1iW2FdO2ErKyl0aGlzLnJlbWFpbmluZ091dGxpbmVzX1tjXT0xfTtCbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLmVuZERyYXdpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnJlbWFpbmluZ091dGxpbmVzXylmb3IodmFyIGE9MCxiPU9iamVjdC5rZXlzKHRoaXMucmVtYWluaW5nT3V0bGluZXNfKSxjO2M9YlthXTthKyspdGhpcy5yZW1vdmVPdXRsaW5lUGF0aF8oYyk7dGhpcy5yZW1haW5pbmdPdXRsaW5lc189bnVsbH07XG5CbG9ja2x5LnplbG9zLlBhdGhPYmplY3QucHJvdG90eXBlLnNldE91dGxpbmVQYXRoPWZ1bmN0aW9uKGEsYil7YT10aGlzLmdldE91dGxpbmVQYXRoXyhhKTthLnNldEF0dHJpYnV0ZShcImRcIixiKTthLnNldEF0dHJpYnV0ZShcImZpbGxcIix0aGlzLnN0eWxlLmNvbG91clRlcnRpYXJ5KX07QmxvY2tseS56ZWxvcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5nZXRPdXRsaW5lUGF0aF89ZnVuY3Rpb24oYSl7dGhpcy5vdXRsaW5lc19bYV18fCh0aGlzLm91dGxpbmVzX1thXT1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLlBBVEgse1wiY2xhc3NcIjpcImJsb2NrbHlPdXRsaW5lUGF0aFwiLGQ6XCJcIn0sdGhpcy5zdmdSb290KSk7dGhpcy5yZW1haW5pbmdPdXRsaW5lc18mJmRlbGV0ZSB0aGlzLnJlbWFpbmluZ091dGxpbmVzX1thXTtyZXR1cm4gdGhpcy5vdXRsaW5lc19bYV19O1xuQmxvY2tseS56ZWxvcy5QYXRoT2JqZWN0LnByb3RvdHlwZS5yZW1vdmVPdXRsaW5lUGF0aF89ZnVuY3Rpb24oYSl7dGhpcy5vdXRsaW5lc19bYV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm91dGxpbmVzX1thXSk7ZGVsZXRlIHRoaXMub3V0bGluZXNfW2FdfTtCbG9ja2x5LnplbG9zLk1hcmtlclN2Zz1mdW5jdGlvbihhLGIsYyl7QmxvY2tseS56ZWxvcy5NYXJrZXJTdmcuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixjKX07QmxvY2tseS51dGlscy5vYmplY3QuaW5oZXJpdHMoQmxvY2tseS56ZWxvcy5NYXJrZXJTdmcsQmxvY2tseS5ibG9ja1JlbmRlcmluZy5NYXJrZXJTdmcpO0Jsb2NrbHkuemVsb3MuTWFya2VyU3ZnLnByb3RvdHlwZS5zaG93V2l0aElucHV0T3V0cHV0Xz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldFNvdXJjZUJsb2NrKCk7YT1hLmdldExvY2F0aW9uKCkuZ2V0T2Zmc2V0SW5CbG9jaygpO3RoaXMucG9zaXRpb25DaXJjbGVfKGEueCxhLnkpO3RoaXMuc2V0UGFyZW50XyhiKTt0aGlzLnNob3dDdXJyZW50XygpfTtCbG9ja2x5LnplbG9zLk1hcmtlclN2Zy5wcm90b3R5cGUuc2hvd1dpdGhPdXRwdXRfPWZ1bmN0aW9uKGEpe3RoaXMuc2hvd1dpdGhJbnB1dE91dHB1dF8oYSl9O1xuQmxvY2tseS56ZWxvcy5NYXJrZXJTdmcucHJvdG90eXBlLnNob3dXaXRoSW5wdXRfPWZ1bmN0aW9uKGEpe3RoaXMuc2hvd1dpdGhJbnB1dE91dHB1dF8oYSl9O0Jsb2NrbHkuemVsb3MuTWFya2VyU3ZnLnByb3RvdHlwZS5zaG93V2l0aEJsb2NrXz1mdW5jdGlvbihhKXthPWEuZ2V0TG9jYXRpb24oKTt2YXIgYj1hLmdldEhlaWdodFdpZHRoKCk7dGhpcy5wb3NpdGlvblJlY3RfKDAsMCxiLndpZHRoLGIuaGVpZ2h0KTt0aGlzLnNldFBhcmVudF8oYSk7dGhpcy5zaG93Q3VycmVudF8oKX07QmxvY2tseS56ZWxvcy5NYXJrZXJTdmcucHJvdG90eXBlLnBvc2l0aW9uQ2lyY2xlXz1mdW5jdGlvbihhLGIpe3RoaXMubWFya2VyQ2lyY2xlXy5zZXRBdHRyaWJ1dGUoXCJjeFwiLGEpO3RoaXMubWFya2VyQ2lyY2xlXy5zZXRBdHRyaWJ1dGUoXCJjeVwiLGIpO3RoaXMuY3VycmVudE1hcmtlclN2Zz10aGlzLm1hcmtlckNpcmNsZV99O1xuQmxvY2tseS56ZWxvcy5NYXJrZXJTdmcucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtCbG9ja2x5LnplbG9zLk1hcmtlclN2Zy5zdXBlckNsYXNzXy5oaWRlLmNhbGwodGhpcyk7dGhpcy5tYXJrZXJDaXJjbGVfLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9O1xuQmxvY2tseS56ZWxvcy5NYXJrZXJTdmcucHJvdG90eXBlLmNyZWF0ZURvbUludGVybmFsXz1mdW5jdGlvbigpe0Jsb2NrbHkuemVsb3MuTWFya2VyU3ZnLnN1cGVyQ2xhc3NfLmNyZWF0ZURvbUludGVybmFsXy5jYWxsKHRoaXMpO3RoaXMubWFya2VyQ2lyY2xlXz1CbG9ja2x5LnV0aWxzLmRvbS5jcmVhdGVTdmdFbGVtZW50KEJsb2NrbHkudXRpbHMuU3ZnLkNJUkNMRSx7cjp0aGlzLmNvbnN0YW50c18uQ1VSU09SX1JBRElVUyxzdHlsZTpcImRpc3BsYXk6IG5vbmVcIixcInN0cm9rZS13aWR0aFwiOnRoaXMuY29uc3RhbnRzXy5DVVJTT1JfU1RST0tFX1dJRFRIfSx0aGlzLm1hcmtlclN2Z18pO2lmKHRoaXMuaXNDdXJzb3IoKSl7dmFyIGE9dGhpcy5nZXRCbGlua1Byb3BlcnRpZXNfKCk7QmxvY2tseS51dGlscy5kb20uY3JlYXRlU3ZnRWxlbWVudChCbG9ja2x5LnV0aWxzLlN2Zy5BTklNQVRFLGEsdGhpcy5tYXJrZXJDaXJjbGVfKX1yZXR1cm4gdGhpcy5tYXJrZXJTdmdffTtcbkJsb2NrbHkuemVsb3MuTWFya2VyU3ZnLnByb3RvdHlwZS5hcHBseUNvbG91cl89ZnVuY3Rpb24oYSl7QmxvY2tseS56ZWxvcy5NYXJrZXJTdmcuc3VwZXJDbGFzc18uYXBwbHlDb2xvdXJfLmNhbGwodGhpcyxhKTt0aGlzLm1hcmtlckNpcmNsZV8uc2V0QXR0cmlidXRlKFwiZmlsbFwiLHRoaXMuY29sb3VyXyk7dGhpcy5tYXJrZXJDaXJjbGVfLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLHRoaXMuY29sb3VyXyk7dGhpcy5pc0N1cnNvcigpJiZ0aGlzLm1hcmtlckNpcmNsZV8uZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZXNcIix0aGlzLmNvbG91cl8rXCI7dHJhbnNwYXJlbnQ7dHJhbnNwYXJlbnQ7XCIpfTtCbG9ja2x5LnplbG9zLlJlbmRlcmVyPWZ1bmN0aW9uKGEpe0Jsb2NrbHkuemVsb3MuUmVuZGVyZXIuc3VwZXJDbGFzc18uY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpfTtCbG9ja2x5LnV0aWxzLm9iamVjdC5pbmhlcml0cyhCbG9ja2x5LnplbG9zLlJlbmRlcmVyLEJsb2NrbHkuYmxvY2tSZW5kZXJpbmcuUmVuZGVyZXIpO0Jsb2NrbHkuemVsb3MuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VDb25zdGFudHNfPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCbG9ja2x5LnplbG9zLkNvbnN0YW50UHJvdmlkZXJ9O0Jsb2NrbHkuemVsb3MuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VSZW5kZXJJbmZvXz1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEJsb2NrbHkuemVsb3MuUmVuZGVySW5mbyh0aGlzLGEpfTtCbG9ja2x5LnplbG9zLlJlbmRlcmVyLnByb3RvdHlwZS5tYWtlRHJhd2VyXz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgQmxvY2tseS56ZWxvcy5EcmF3ZXIoYSxiKX07XG5CbG9ja2x5LnplbG9zLlJlbmRlcmVyLnByb3RvdHlwZS5tYWtlTWFya2VyRHJhd2VyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCbG9ja2x5LnplbG9zLk1hcmtlclN2ZyhhLHRoaXMuZ2V0Q29uc3RhbnRzKCksYil9O0Jsb2NrbHkuemVsb3MuUmVuZGVyZXIucHJvdG90eXBlLm1ha2VQYXRoT2JqZWN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCbG9ja2x5LnplbG9zLlBhdGhPYmplY3QoYSxiLHRoaXMuZ2V0Q29uc3RhbnRzKCkpfTtCbG9ja2x5LnplbG9zLlJlbmRlcmVyLnByb3RvdHlwZS5zaG91bGRIaWdobGlnaHRDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGUhPUJsb2NrbHkuSU5QVVRfVkFMVUUmJmEudHlwZSE9PUJsb2NrbHkuT1VUUFVUX1ZBTFVFfTtcbkJsb2NrbHkuemVsb3MuUmVuZGVyZXIucHJvdG90eXBlLmdldENvbm5lY3Rpb25QcmV2aWV3TWV0aG9kPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi50eXBlPT1CbG9ja2x5Lk9VVFBVVF9WQUxVRT9hLmlzQ29ubmVjdGVkKCk/QmxvY2tseS5JbnNlcnRpb25NYXJrZXJNYW5hZ2VyLlBSRVZJRVdfVFlQRS5SRVBMQUNFTUVOVF9GQURFOkJsb2NrbHkuSW5zZXJ0aW9uTWFya2VyTWFuYWdlci5QUkVWSUVXX1RZUEUuSU5QVVRfT1VUTElORTpCbG9ja2x5LnplbG9zLlJlbmRlcmVyLnN1cGVyQ2xhc3NfLmdldENvbm5lY3Rpb25QcmV2aWV3TWV0aG9kKGEsYixjKX07QmxvY2tseS5ibG9ja1JlbmRlcmluZy5yZWdpc3RlcihcInplbG9zXCIsQmxvY2tseS56ZWxvcy5SZW5kZXJlcik7QmxvY2tseS5UaGVtZXMuRGFyaz1CbG9ja2x5LlRoZW1lLmRlZmluZVRoZW1lKFwiZGFya1wiLHtiYXNlOkJsb2NrbHkuVGhlbWVzLkNsYXNzaWMsY29tcG9uZW50U3R5bGVzOnt3b3Jrc3BhY2VCYWNrZ3JvdW5kQ29sb3VyOlwiIzFlMWUxZVwiLHRvb2xib3hCYWNrZ3JvdW5kQ29sb3VyOlwiYmxhY2tCYWNrZ3JvdW5kXCIsdG9vbGJveEZvcmVncm91bmRDb2xvdXI6XCIjZmZmXCIsZmx5b3V0QmFja2dyb3VuZENvbG91cjpcIiMyNTI1MjZcIixmbHlvdXRGb3JlZ3JvdW5kQ29sb3VyOlwiI2NjY1wiLGZseW91dE9wYWNpdHk6MSxzY3JvbGxiYXJDb2xvdXI6XCIjNzk3OTc5XCIsaW5zZXJ0aW9uTWFya2VyQ29sb3VyOlwiI2ZmZlwiLGluc2VydGlvbk1hcmtlck9wYWNpdHk6LjMsc2Nyb2xsYmFyT3BhY2l0eTouNCxjdXJzb3JDb2xvdXI6XCIjZDBkMGQwXCIsYmxhY2tCYWNrZ3JvdW5kOlwiIzMzM1wifX0pO0Jsb2NrbHkuVGhlbWVzLkRldXRlcmFub3BpYT17fTtcbkJsb2NrbHkuVGhlbWVzLkRldXRlcmFub3BpYS5kZWZhdWx0QmxvY2tTdHlsZXM9e2NvbG91cl9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjZjJhNzJjXCIsY29sb3VyU2Vjb25kYXJ5OlwiI2YxYzE3MlwiLGNvbG91clRlcnRpYXJ5OlwiI2RhOTIxY1wifSxsaXN0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM3ZDY1YWJcIixjb2xvdXJTZWNvbmRhcnk6XCIjYTg4YmUwXCIsY29sb3VyVGVydGlhcnk6XCIjNjY1MThlXCJ9LGxvZ2ljX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM5ZmQyZjFcIixjb2xvdXJTZWNvbmRhcnk6XCIjYzBlMGY0XCIsY29sb3VyVGVydGlhcnk6XCIjNzRiYWU1XCJ9LGxvb3BfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzc5NWEwN1wiLGNvbG91clNlY29uZGFyeTpcIiNhYzg3MjZcIixjb2xvdXJUZXJ0aWFyeTpcIiNjNGEwM2ZcIn0sbWF0aF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjZTZkYTM5XCIsY29sb3VyU2Vjb25kYXJ5OlwiI2YzZWM4ZVwiLGNvbG91clRlcnRpYXJ5OlwiI2YyZWViN1wifSxwcm9jZWR1cmVfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzU5MDcyMVwiLFxuY29sb3VyU2Vjb25kYXJ5OlwiIzhjNDc1ZFwiLGNvbG91clRlcnRpYXJ5OlwiIzg4NTQ2NFwifSx0ZXh0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiMwNTg4NjNcIixjb2xvdXJTZWNvbmRhcnk6XCIjNWVjZmFmXCIsY29sb3VyVGVydGlhcnk6XCIjMDQ2ODRjXCJ9LHZhcmlhYmxlX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM0NzAyNWFcIixjb2xvdXJTZWNvbmRhcnk6XCIjODIwZmExXCIsY29sb3VyVGVydGlhcnk6XCIjOGU1NzlkXCJ9LHZhcmlhYmxlX2R5bmFtaWNfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzQ3MDI1YVwiLGNvbG91clNlY29uZGFyeTpcIiM4MjBmYTFcIixjb2xvdXJUZXJ0aWFyeTpcIiM4ZTU3OWRcIn19O1xuQmxvY2tseS5UaGVtZXMuRGV1dGVyYW5vcGlhLmNhdGVnb3J5U3R5bGVzPXtjb2xvdXJfY2F0ZWdvcnk6e2NvbG91cjpcIiNmMmE3MmNcIn0sbGlzdF9jYXRlZ29yeTp7Y29sb3VyOlwiIzdkNjVhYlwifSxsb2dpY19jYXRlZ29yeTp7Y29sb3VyOlwiIzlmZDJmMVwifSxsb29wX2NhdGVnb3J5Ontjb2xvdXI6XCIjNzk1YTA3XCJ9LG1hdGhfY2F0ZWdvcnk6e2NvbG91cjpcIiNlNmRhMzlcIn0scHJvY2VkdXJlX2NhdGVnb3J5Ontjb2xvdXI6XCIjNTkwNzIxXCJ9LHRleHRfY2F0ZWdvcnk6e2NvbG91cjpcIiMwNTg4NjNcIn0sdmFyaWFibGVfY2F0ZWdvcnk6e2NvbG91cjpcIiM0NzAyNWFcIn0sdmFyaWFibGVfZHluYW1pY19jYXRlZ29yeTp7Y29sb3VyOlwiIzQ3MDI1YVwifX07QmxvY2tseS5UaGVtZXMuRGV1dGVyYW5vcGlhPW5ldyBCbG9ja2x5LlRoZW1lKFwiZGV1dGVyYW5vcGlhXCIsQmxvY2tseS5UaGVtZXMuRGV1dGVyYW5vcGlhLmRlZmF1bHRCbG9ja1N0eWxlcyxCbG9ja2x5LlRoZW1lcy5EZXV0ZXJhbm9waWEuY2F0ZWdvcnlTdHlsZXMpO0Jsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdD17fTtcbkJsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdC5kZWZhdWx0QmxvY2tTdHlsZXM9e2NvbG91cl9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjYTUyNzE0XCIsY29sb3VyU2Vjb25kYXJ5OlwiI0ZCOUI4Q1wiLGNvbG91clRlcnRpYXJ5OlwiI0ZCRTFERFwifSxsaXN0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM0YTE0OGNcIixjb2xvdXJTZWNvbmRhcnk6XCIjQUQ3QkU5XCIsY29sb3VyVGVydGlhcnk6XCIjQ0RCNkU5XCJ9LGxvZ2ljX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiMwMTU3OWJcIixjb2xvdXJTZWNvbmRhcnk6XCIjNjRDN0ZGXCIsY29sb3VyVGVydGlhcnk6XCIjQzVFQUZGXCJ9LGxvb3BfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzMzNjkxZVwiLGNvbG91clNlY29uZGFyeTpcIiM5QUZGNzhcIixjb2xvdXJUZXJ0aWFyeTpcIiNFMUZGRDdcIn0sbWF0aF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjMWEyMzdlXCIsY29sb3VyU2Vjb25kYXJ5OlwiIzhBOUVGRlwiLGNvbG91clRlcnRpYXJ5OlwiI0RDRTJGRlwifSxwcm9jZWR1cmVfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzAwNjA2NFwiLFxuY29sb3VyU2Vjb25kYXJ5OlwiIzc3RTZFRVwiLGNvbG91clRlcnRpYXJ5OlwiI0NGRUNFRVwifSx0ZXh0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiMwMDRkNDBcIixjb2xvdXJTZWNvbmRhcnk6XCIjNWFlMjdjXCIsY29sb3VyVGVydGlhcnk6XCIjRDJGRkREXCJ9LHZhcmlhYmxlX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM4ODBlNGZcIixjb2xvdXJTZWNvbmRhcnk6XCIjRkY3M0JFXCIsY29sb3VyVGVydGlhcnk6XCIjRkZENEVCXCJ9LHZhcmlhYmxlX2R5bmFtaWNfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzg4MGU0ZlwiLGNvbG91clNlY29uZGFyeTpcIiNGRjczQkVcIixjb2xvdXJUZXJ0aWFyeTpcIiNGRkQ0RUJcIn0saGF0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM4ODBlNGZcIixjb2xvdXJTZWNvbmRhcnk6XCIjRkY3M0JFXCIsY29sb3VyVGVydGlhcnk6XCIjRkZENEVCXCIsaGF0OlwiY2FwXCJ9fTtcbkJsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdC5jYXRlZ29yeVN0eWxlcz17Y29sb3VyX2NhdGVnb3J5Ontjb2xvdXI6XCIjYTUyNzE0XCJ9LGxpc3RfY2F0ZWdvcnk6e2NvbG91cjpcIiM0YTE0OGNcIn0sbG9naWNfY2F0ZWdvcnk6e2NvbG91cjpcIiMwMTU3OWJcIn0sbG9vcF9jYXRlZ29yeTp7Y29sb3VyOlwiIzMzNjkxZVwifSxtYXRoX2NhdGVnb3J5Ontjb2xvdXI6XCIjMWEyMzdlXCJ9LHByb2NlZHVyZV9jYXRlZ29yeTp7Y29sb3VyOlwiIzAwNjA2NFwifSx0ZXh0X2NhdGVnb3J5Ontjb2xvdXI6XCIjMDA0ZDQwXCJ9LHZhcmlhYmxlX2NhdGVnb3J5Ontjb2xvdXI6XCIjODgwZTRmXCJ9LHZhcmlhYmxlX2R5bmFtaWNfY2F0ZWdvcnk6e2NvbG91cjpcIiM4ODBlNGZcIn19O0Jsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdD1uZXcgQmxvY2tseS5UaGVtZShcImhpZ2hjb250cmFzdFwiLEJsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdC5kZWZhdWx0QmxvY2tTdHlsZXMsQmxvY2tseS5UaGVtZXMuSGlnaENvbnRyYXN0LmNhdGVnb3J5U3R5bGVzKTtcbkJsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdC5zZXRDb21wb25lbnRTdHlsZShcInNlbGVjdGVkR2xvd0NvbG91clwiLFwiIzAwMDAwMFwiKTtCbG9ja2x5LlRoZW1lcy5IaWdoQ29udHJhc3Quc2V0Q29tcG9uZW50U3R5bGUoXCJzZWxlY3RlZEdsb3dTaXplXCIsMSk7QmxvY2tseS5UaGVtZXMuSGlnaENvbnRyYXN0LnNldENvbXBvbmVudFN0eWxlKFwicmVwbGFjZW1lbnRHbG93Q29sb3VyXCIsXCIjMDAwMDAwXCIpO0Jsb2NrbHkuVGhlbWVzLkhpZ2hDb250cmFzdC5zZXRGb250U3R5bGUoe2ZhbWlseTpudWxsLHdlaWdodDpudWxsLHNpemU6MTZ9KTtCbG9ja2x5LlRoZW1lcy5Ucml0YW5vcGlhPXt9O1xuQmxvY2tseS5UaGVtZXMuVHJpdGFub3BpYS5kZWZhdWx0QmxvY2tTdHlsZXM9e2NvbG91cl9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjMDU0MjdmXCIsY29sb3VyU2Vjb25kYXJ5OlwiIzI5NzRjMFwiLGNvbG91clRlcnRpYXJ5OlwiIzJkNzRiYlwifSxsaXN0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiNiNjljZThcIixjb2xvdXJTZWNvbmRhcnk6XCIjY2NiYWVmXCIsY29sb3VyVGVydGlhcnk6XCIjOTE3NmM1XCJ9LGxvZ2ljX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM5ZmQyZjFcIixjb2xvdXJTZWNvbmRhcnk6XCIjYzBlMGY0XCIsY29sb3VyVGVydGlhcnk6XCIjNzRiYWU1XCJ9LGxvb3BfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiI2FhMTg0NlwiLGNvbG91clNlY29uZGFyeTpcIiNkMzYxODVcIixjb2xvdXJUZXJ0aWFyeTpcIiM3YzE2MzZcIn0sbWF0aF9ibG9ja3M6e2NvbG91clByaW1hcnk6XCIjZTZkYTM5XCIsY29sb3VyU2Vjb25kYXJ5OlwiI2YzZWM4ZVwiLGNvbG91clRlcnRpYXJ5OlwiI2YyZWViN1wifSxwcm9jZWR1cmVfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzU5MDcyMVwiLFxuY29sb3VyU2Vjb25kYXJ5OlwiIzhjNDc1ZFwiLGNvbG91clRlcnRpYXJ5OlwiIzg4NTQ2NFwifSx0ZXh0X2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiMwNTg4NjNcIixjb2xvdXJTZWNvbmRhcnk6XCIjNWVjZmFmXCIsY29sb3VyVGVydGlhcnk6XCIjMDQ2ODRjXCJ9LHZhcmlhYmxlX2Jsb2Nrczp7Y29sb3VyUHJpbWFyeTpcIiM0YjJkODRcIixjb2xvdXJTZWNvbmRhcnk6XCIjODE2ZWE3XCIsY29sb3VyVGVydGlhcnk6XCIjODM3NTllXCJ9LHZhcmlhYmxlX2R5bmFtaWNfYmxvY2tzOntjb2xvdXJQcmltYXJ5OlwiIzRiMmQ4NFwiLGNvbG91clNlY29uZGFyeTpcIiM4MTZlYTdcIixjb2xvdXJUZXJ0aWFyeTpcIiM4Mzc1OWVcIn19O1xuQmxvY2tseS5UaGVtZXMuVHJpdGFub3BpYS5jYXRlZ29yeVN0eWxlcz17Y29sb3VyX2NhdGVnb3J5Ontjb2xvdXI6XCIjMDU0MjdmXCJ9LGxpc3RfY2F0ZWdvcnk6e2NvbG91cjpcIiNiNjljZThcIn0sbG9naWNfY2F0ZWdvcnk6e2NvbG91cjpcIiM5ZmQyZjFcIn0sbG9vcF9jYXRlZ29yeTp7Y29sb3VyOlwiI2FhMTg0NlwifSxtYXRoX2NhdGVnb3J5Ontjb2xvdXI6XCIjZTZkYTM5XCJ9LHByb2NlZHVyZV9jYXRlZ29yeTp7Y29sb3VyOlwiIzU5MDcyMVwifSx0ZXh0X2NhdGVnb3J5Ontjb2xvdXI6XCIjMDU4ODYzXCJ9LHZhcmlhYmxlX2NhdGVnb3J5Ontjb2xvdXI6XCIjNGIyZDg0XCJ9LHZhcmlhYmxlX2R5bmFtaWNfY2F0ZWdvcnk6e2NvbG91cjpcIiM0YjJkODRcIn19O0Jsb2NrbHkuVGhlbWVzLlRyaXRhbm9waWE9bmV3IEJsb2NrbHkuVGhlbWUoXCJ0cml0YW5vcGlhXCIsQmxvY2tseS5UaGVtZXMuVHJpdGFub3BpYS5kZWZhdWx0QmxvY2tTdHlsZXMsQmxvY2tseS5UaGVtZXMuVHJpdGFub3BpYS5jYXRlZ29yeVN0eWxlcyk7QmxvY2tseS5yZXF1aXJlcz17fTtcbnJldHVybiBCbG9ja2x5O1xufSkpO1xuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJsb2NrbHlfY29tcHJlc3NlZC5qcy5tYXBcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsV0FJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6Y8/\n");

/***/ })

}]);